(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return o}));var r=function(t){t=o(t);var e,n,r,i,a,p=f(t),g=1732584193,v=4023233417,m=2562383102,y=271733878,E=p.length;for(e=0;e<E;e+=16)n=g,r=v,i=m,a=y,g=u(g,v,m,y,p[e],7,3614090360),y=u(y,g,v,m,p[e+1],12,3905402710),m=u(m,y,g,v,p[e+2],17,606105819),v=u(v,m,y,g,p[e+3],22,3250441966),g=u(g,v,m,y,p[e+4],7,4118548399),y=u(y,g,v,m,p[e+5],12,1200080426),m=u(m,y,g,v,p[e+6],17,2821735955),v=u(v,m,y,g,p[e+7],22,4249261313),g=u(g,v,m,y,p[e+8],7,1770035416),y=u(y,g,v,m,p[e+9],12,2336552879),m=u(m,y,g,v,p[e+10],17,4294925233),v=u(v,m,y,g,p[e+11],22,2304563134),g=u(g,v,m,y,p[e+12],7,1804603682),y=u(y,g,v,m,p[e+13],12,4254626195),m=u(m,y,g,v,p[e+14],17,2792965006),v=u(v,m,y,g,p[e+15],22,1236535329),g=c(g,v,m,y,p[e+1],5,4129170786),y=c(y,g,v,m,p[e+6],9,3225465664),m=c(m,y,g,v,p[e+11],14,643717713),v=c(v,m,y,g,p[e],20,3921069994),g=c(g,v,m,y,p[e+5],5,3593408605),y=c(y,g,v,m,p[e+10],9,38016083),m=c(m,y,g,v,p[e+15],14,3634488961),v=c(v,m,y,g,p[e+4],20,3889429448),g=c(g,v,m,y,p[e+9],5,568446438),y=c(y,g,v,m,p[e+14],9,3275163606),m=c(m,y,g,v,p[e+3],14,4107603335),v=c(v,m,y,g,p[e+8],20,1163531501),g=c(g,v,m,y,p[e+13],5,2850285829),y=c(y,g,v,m,p[e+2],9,4243563512),m=c(m,y,g,v,p[e+7],14,1735328473),v=c(v,m,y,g,p[e+12],20,2368359562),g=l(g,v,m,y,p[e+5],4,4294588738),y=l(y,g,v,m,p[e+8],11,2272392833),m=l(m,y,g,v,p[e+11],16,1839030562),v=l(v,m,y,g,p[e+14],23,4259657740),g=l(g,v,m,y,p[e+1],4,2763975236),y=l(y,g,v,m,p[e+4],11,1272893353),m=l(m,y,g,v,p[e+7],16,4139469664),v=l(v,m,y,g,p[e+10],23,3200236656),g=l(g,v,m,y,p[e+13],4,681279174),y=l(y,g,v,m,p[e],11,3936430074),m=l(m,y,g,v,p[e+3],16,3572445317),v=l(v,m,y,g,p[e+6],23,76029189),g=l(g,v,m,y,p[e+9],4,3654602809),y=l(y,g,v,m,p[e+12],11,3873151461),m=l(m,y,g,v,p[e+15],16,530742520),v=l(v,m,y,g,p[e+2],23,3299628645),g=h(g,v,m,y,p[e],6,4096336452),y=h(y,g,v,m,p[e+7],10,1126891415),m=h(m,y,g,v,p[e+14],15,2878612391),v=h(v,m,y,g,p[e+5],21,4237533241),g=h(g,v,m,y,p[e+12],6,1700485571),y=h(y,g,v,m,p[e+3],10,2399980690),m=h(m,y,g,v,p[e+10],15,4293915773),v=h(v,m,y,g,p[e+1],21,2240044497),g=h(g,v,m,y,p[e+8],6,1873313359),y=h(y,g,v,m,p[e+15],10,4264355552),m=h(m,y,g,v,p[e+6],15,2734768916),v=h(v,m,y,g,p[e+13],21,1309151649),g=h(g,v,m,y,p[e+4],6,4149444226),y=h(y,g,v,m,p[e+11],10,3174756917),m=h(m,y,g,v,p[e+2],15,718787259),v=h(v,m,y,g,p[e+9],21,3951481745),g=s(g,n),v=s(v,r),m=s(m,i),y=s(y,a);return(d(g)+d(v)+d(m)+d(y)).toLowerCase()},i=function(t){for(var e,n=[],r=0,i=t.length;r<i;r++)e=t.charCodeAt(r).toString(16),n.push(2===e.length?e:"0".concat(e));return n.join("")},o=function(t){for(var e="",n=0,r=(t=t.replace(/\r\n/g,"\n")).length;n<r;n++){var i=t.charCodeAt(n);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e},a=function(t,e){return t<<e|t>>>32-e},s=function(t,e){var n=2147483648&t,r=2147483648&e,i=1073741824&t,o=1073741824&e,a=(1073741823&t)+(1073741823&e);return i&o?2147483648^a^n^r:i|o?1073741824&a?3221225472^a^n^r:1073741824^a^n^r:a^n^r},u=function(t,e,n,r,i,o,u){return t=s(t,s(s(function(t,e,n){return t&e|~t&n}(e,n,r),i),u)),s(a(t,o),e)},c=function(t,e,n,r,i,o,u){return t=s(t,s(s(function(t,e,n){return t&n|e&~n}(e,n,r),i),u)),s(a(t,o),e)},l=function(t,e,n,r,i,o,u){return t=s(t,s(s(function(t,e,n){return t^e^n}(e,n,r),i),u)),s(a(t,o),e)},h=function(t,e,n,r,i,o,u){return t=s(t,s(s(function(t,e,n){return e^(t|~n)}(e,n,r),i),u)),s(a(t,o),e)},f=function(t){for(var e,n=t.length,r=n+8,i=16*((r-r%64)/64+1),o=Array(i-1),a=0,s=0;s<n;)a=s%4*8,o[e=(s-s%4)/4]=o[e]|t.charCodeAt(s)<<a,s++;return a=s%4*8,o[e=(s-s%4)/4]=o[e]|128<<a,o[i-2]=n<<3,o[i-1]=n>>>29,o},d=function(t){var e,n="",r="";for(e=0;e<=3;e++)n+=(r="0".concat((t>>>8*e&255).toString(16))).substr(r.length-2,2);return n}},12:function(t,e,n){"use strict";var r,i,o,a,s,u,c,l,h,f,d,p,g,v,m,y;n.d(e,"i",(function(){return r})),n.d(e,"p",(function(){return i})),n.d(e,"h",(function(){return o})),n.d(e,"g",(function(){return a})),n.d(e,"n",(function(){return s})),n.d(e,"o",(function(){return u})),n.d(e,"m",(function(){return c})),n.d(e,"k",(function(){return l})),n.d(e,"j",(function(){return h})),n.d(e,"l",(function(){return f})),n.d(e,"d",(function(){return d})),n.d(e,"b",(function(){return p})),n.d(e,"f",(function(){return g})),n.d(e,"c",(function(){return v})),n.d(e,"e",(function(){return m})),n.d(e,"a",(function(){return y})),function(t){t.STATEMENT="statement",t.TABLE="table_reference",t.EXPRESSION="expression",t.FIELDS_LIST="fields_list",t.FIELD="field",t.UPDATE_FIELD="update_field",t.DELAYED_OPTION="delayed_option",t.LIMIT_OPTION="limit_option",t.ORDER_BY_OPTION="order_by_option",t.ORDER_BY_EXPRESSION="order_by_expression"}(r||(r={})),function(t){t.SELECT="select",t.UPDATE="update",t.INSERT="insert",t.DELETE="delete"}(i||(i={})),function(t){t.ALL_FIELDS="all",t.SPECIFIC_FIELDS="enumeration"}(o||(o={})),function(t){t.NUMBER="number",t.BOOLEAN="boolean",t.NULL="null",t.STRING="string",t.UNARY="unary",t.LOGICAL="logical",t.MATH="math",t.GROUP="group",t.IDENTIFIER="identifier",t.BINDING="binding",t.FUNCTION_CALL="function_call"}(a||(a={})),function(t){t.RANDOM="random",t.ORDERED="ordered"}(s||(s={})),function(t){t.ASCENDING="asc",t.DESCENDING="desc"}(u||(u={})),function(t){t.NOT="!",t.INVERT="-"}(c||(c={})),function(t){t.OR="||",t.AND="&&"}(l||(l={})),function(t){t.EQUALS="=",t.DIFFERENT="<>",t.LIKE="like",t.IN="in",t.LTE="<=",t.LT="<",t.GTE=">=",t.GT=">"}(h||(h={})),function(t){t.MULTIPLY="*",t.DIVISION="/",t.ADDITION="+",t.DIFFERENCE="-"}(f||(f={})),function(t){t.STRING="string",t.NUMBER="number",t.BOOLEAN="boolean",t.NULL="null",t.OBJECT="object"}(d||(d={})),function(t){t.STRING="string",t.INT="int",t.FLOAT="float",t.BOOLEAN="boolean"}(p||(p={})),function(t){t.IN_MEMORY="memory",t.REMOTE="remote"}(g||(g={})),function(t){t.READ="r",t.WRITE="w",t.READ_WRITE="rw"}(v||(v={})),function(t){t.FORM="private",t.GLOBAL="global"}(m||(m={})),function(t){t[t.INIT=0]="INIT",t[t.CHANGE=1]="CHANGE",t[t.CHECK=2]="CHECK",t[t.UNCHECK=3]="UNCHECK",t[t.TEXT_INPUT=4]="TEXT_INPUT",t[t.ALL_EVENTS=5]="ALL_EVENTS",t[t.REINITIALIZE=6]="REINITIALIZE",t[t.APPROVED=7]="APPROVED",t[t.SUBMITTED=8]="SUBMITTED",t[t.PREFILL=9]="PREFILL"}(y||(y={})),window.EJQLTableColumnType=d,window.EFormRuleEventType=y},141:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(20),i=n.n(r),o=n(5),a=n.n(o),s=n(6),u=n.n(s),c=n(0),l=n.n(c),h=function(){function t(e){a()(this,t),l()(this,"i18n",void 0),this.i18n=e}return u()(t,[{key:"convertFileSizeToString",value:function(e){var n,r;switch(!0){case e/t.KILOBYTE<1:n=e,r=null;break;case e/t.MEGABYTE<1:r="KB",n=e/t.KILOBYTE;break;case e/t.GIGABYTE<1:r="MB",n=e/t.MEGABYTE;break;case e/t.TERABYTE<1:r="GB",n=e/t.GIGABYTE;break;default:r="TB",n=e/t.TERABYTE}return Number(n).toFixed(1).replace(/\.0$/g,"")+(null===r?"":" "+r)}}],[{key:"download",value:function(e,n,r){var o,a,s=window,u="application/octet-stream",c=r||u,l=e,h=!n&&!r&&l,f=document.createElement("a"),d=function(t){return String(t)},p=s.Blob||s.MozBlob||s.WebKitBlob||d,g=n||"download";p=p.call?p.bind(s):Blob;var v=function(t,e){if("download"in f)return f.href=t,f.setAttribute("download",g),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout((function(){f.click(),document.body.removeChild(f),!0===e&&setTimeout((function(){s.URL.revokeObjectURL(f.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-+]+)/,u)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-+]+)/,u)),n.src=t,setTimeout((function(){document.body.removeChild(n)}),333)},m=function(t){for(var e=t.split(/[:;,]/),n=e[1],r=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),i=r.length,o=0,a=new Uint8Array(i);o<i;++o)a[o]=r.charCodeAt(o);return new p([a],{type:n})};if("true"===String(this)&&(c=(l=[l,c])[0],l=l[1]),h&&h.length<2048&&(g=h.split("/").pop().split("?")[0],f.href=h,-1!==f.href.indexOf(h))){var y=new XMLHttpRequest;return y.open("GET",h,!0),y.responseType="blob",y.onload=function(e){t.download(e.target.response,g,u)},setTimeout((function(){y.send()}),0),y}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l)){if(!(l.length>2096103.424&&p!==d))return navigator.msSaveBlob?navigator.msSaveBlob(m(l),g):v(l);c=(l=m(l)).type||u}else if(/([\x80-\xff])/.test(l)){for(var E=0,T=new Uint8Array(l.length),N=T.length;E<N;++E)T[E]=l.charCodeAt(E);l=new p([T],{type:c})}if(o=i()(l,p)?l:new p([l],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(o,g);if(s.URL)v(s.URL.createObjectURL(o),!0);else{if("string"===typeof o||o.constructor===d)try{return v("data:"+c+";base64,"+s.btoa(o))}catch(R){return v("data:"+c+","+encodeURIComponent(o))}(a=new FileReader).onload=function(){v(this.result)},a.readAsDataURL(o)}return!0}}]),t}();l()(h,"KILOBYTE",1024),l()(h,"MEGABYTE",1048576),l()(h,"GIGABYTE",1073741824),l()(h,"TERABYTE",1099511627776)},142:function(t,e,n){"use strict";var r=n(5),i=n.n(r),o=n(6),a=n.n(o),s=n(12),u=n(3),c=n.n(u),l=n(7),h=n.n(l),f=n(8),d=n.n(f),p=n(4),g=n.n(p),v=n(0),m=n.n(v),y=n(308),E=function(){function t(e){i()(this,t),m()(this,"identifiers",[]),m()(this,"emptyRow",[]),m()(this,"indexes",[]),m()(this,"autoIncrementColumnIndex",null),m()(this,"autoIncrementValue",1);for(var n=0,r=e||[],o=r.length;n<o;n++)if(this.identifiers.push(r[n]),void 0!==r[n].default)this.emptyRow.push(r[n].default);else switch(e[n].type){case s.d.NULL:this.emptyRow.push(null);break;case s.d.NUMBER:this.emptyRow.push(0);break;case s.d.STRING:this.emptyRow.push("");break;case s.d.BOOLEAN:this.emptyRow.push(!1);break;default:this.emptyRow.push(null)}}return a()(t,[{key:"withSingleColumnIndex",value:function(t){var e,n=0;if(this.indexes)for(var r=0,i=this.indexes.length;r<i;r++)this.indexes[r].isAutoIncrement()&&n++;if(void 0!==t.unique&&t.unique||void 0!==t.autoIncrement&&t.autoIncrement){if((e=y.a.createFromIndexDescriptor(this,t)).isAutoIncrement()){if(n++,e.getDescriptors().length>1)throw new Error("Auto-increment indexes must refer to a single column only!");if(n>1)throw new Error("There can be only a single auto-increment index!");if(!e.isUnique())throw new Error("Auto-increment indexes must be unique!");for(var o=!1,a=0,u=this.identifiers.length;a<u;a++)if(this.identifiers[a].name===t.name){if(this.autoIncrementColumnIndex=a,o=!0,this.identifiers[a].type!==s.d.NUMBER)throw new Error("Auto-increment index column type must be NUMBER!");break}if(!o)throw new Error("Cannot add a index on a non-existing column!")}this.indexes.push(e)}return this}},{key:"describe",value:function(){return this.identifiers.slice(0)}},{key:"hasIdentifier",value:function(t){for(var e=0,n=this.identifiers.length;e<n;e++)if(this.identifiers[e].name===t)return!0;return!1}},{key:"createEmptyRow",value:function(){return this.emptyRow.slice(0)}},{key:"getIndexes",value:function(){return this.indexes}},{key:"reIndex",value:function(){for(var t=0,e=this.indexes.length;t<e;t++)this.indexes[t].index(),this.indexes[t].isAutoIncrement()&&this.setNextAutoIncrementValue(this.indexes[t].getNextAutoIncrementValue())}},{key:"fetch",value:function(){return Promise.resolve(this)}}]),t}(),T=n(93),N=function(){function t(e){i()(this,t),m()(this,"table",void 0),m()(this,"index",0),m()(this,"row",void 0),this.table=e,this.row=new T.a(e.describe(),null,null)}return a()(t,[{key:"next",value:function(){var t=this.table.getRowAt(this.index);return null===t?null:(this.row.withIndex(this.index),this.row.withRowData(t),this.index++,this.row)}}]),t}();function R(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g()(t);if(e){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var b=function(t){h()(n,t);var e=R(n);function n(t,r,o){var a;i()(this,n),a=e.call(this,t),m()(c()(a),"rows",[]),m()(c()(a),"lastTransactionSnapshot",void 0);for(var s=0,u=r.length;s<u;s++)a.rows.push(r[s]);if(o){if(!Array.isArray(o))throw new Error("Invalid class constructor argument: indexes: Expected array!");for(var l=0,h=o.length;l<h;l++)a.withSingleColumnIndex(o[l]);a.reIndex()}return a}return a()(n,[{key:"isRemote",value:function(){return!1}},{key:"getStorageEngine",value:function(){return s.f.IN_MEMORY}},{key:"getRowAt",value:function(t){return this.rows[t]||null}},{key:"createIterator",value:function(){return new N(this)}},{key:"replace",value:function(t,e){if(!this.rows[t])throw new Error("Undefined table index: "+JSON.stringify(t));for(var n=0,r=this.rows[t].length;n<r;n++)this.rows[t][n]=e[n]}},{key:"deleteRow",value:function(t){this.rows[t]&&(this.rows[t]=null)}},{key:"insertRow",value:function(t){if(!t||void 0===t.length)throw new Error("Invalid argument row: array expected!");if(t.length!==this.identifiers.length)throw new Error("Row mismatch: Expected "+this.identifiers.length+" values, got "+t.length+" values!");null!==this.autoIncrementColumnIndex&&null===t[this.autoIncrementColumnIndex]&&(t[this.autoIncrementColumnIndex]=this.autoIncrementValue,this.autoIncrementValue++),this.rows.push(t)}},{key:"compact",value:function(){for(var t=this.rows.length-1;t>=0;t--)null===this.rows[t]&&this.rows.splice(t,1)}},{key:"isTransactional",value:function(){return!0}},{key:"startTransaction",value:function(){this.lastTransactionSnapshot=JSON.stringify(this.rows)}},{key:"commitTransaction",value:function(){if(void 0===this.lastTransactionSnapshot)throw new Error('No transaction started before!"');this.lastTransactionSnapshot=void 0}},{key:"rollbackTransaction",value:function(){if(void 0===this.lastTransactionSnapshot)throw new Error("Failed to rollback transaction: No transaction started before!");this.rows=JSON.parse(this.lastTransactionSnapshot)}},{key:"getNextAutoIncrementValue",value:function(){return this.autoIncrementValue+1}},{key:"setNextAutoIncrementValue",value:function(t){if("number"!==typeof t||!isFinite(t))throw new Error("Value is not finite!");if(t%1!==0)throw new Error("Value must be integer!");if(t<1)throw new Error("Value must be greater than 0!");this.autoIncrementValue=t}},{key:"alterIndexes",value:function(t){return Promise.reject()}},{key:"isIndexable",value:function(){return!0}},{key:"isVirtual",value:function(){return!1}}]),n}(E),S=function(){function t(e){i()(this,t),m()(this,"table",void 0),m()(this,"cols",void 0),m()(this,"data",void 0),this.table=e,this.data=Object.create(null);for(var n=0,r=this.table.describe(),o=r.length;n<o;n++)!function(t,e,n){Object.defineProperty(n,String(t),{get:function(){return void 0===n.data[e]||void 0===n.data[e].get?void 0:n.data[e].get()},set:function(t){if(void 0===n.data[e]||void 0===n.data[e].set)throw new Error('Value "'+e+'" is read-only!');n.data[e].set(t)},enumerable:!0,configurable:!1})}(n,r[n].name,this),this.cols=n+1}return a()(t,[{key:"withPropertySetter",value:function(t,e){if(!this.table.hasIdentifier(t))throw new Error('Property "'+t+'" is not allowed!');return this.data[t]=this.data[t]||Object.create(null),this.data[t].set=e,this}},{key:"withPropertyGetter",value:function(t,e){if(!this.table.hasIdentifier(t))throw new Error('Property "'+t+'" is not allowed!');return this.data[t]=this.data[t]||Object.create(null),this.data[t].get=e,this}},{key:"length",get:function(){return this.cols}}]),t}();function w(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g()(t);if(e){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var O=function(t){h()(n,t);var e=w(n);function n(t){return i()(this,n),e.call(this,t,[],void 0)}return a()(n,[{key:"createRow",value:function(){var t=new S(this);return this.rows.push(t),t}},{key:"withSingleColumnIndex",value:function(t){throw new Error("Cannot add indexes on virtual tables!")}},{key:"replace",value:function(t,e){}},{key:"insertRow",value:function(t){throw new Error("Cannot insert rows on virtual tables!")}},{key:"deleteRow",value:function(t){throw new Error("Cannot delete rows from virtual tables!")}},{key:"isTransactional",value:function(){return!1}},{key:"startTransaction",value:function(){throw new Error("Transactions are not supported on virtual tables!")}},{key:"commitTransaction",value:function(){throw new Error("Transactions are not supported on virtual tables!")}},{key:"rollbackTransaction",value:function(){throw new Error("Transactions are not supported on virtual tables!")}},{key:"getNextAutoIncrementValue",value:function(){return 1}},{key:"isIndexable",value:function(){return!1}},{key:"isVirtual",value:function(){return!0}}]),n}(b);function _(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g()(t);if(e){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var I=function(t){h()(n,t);var e=_(n);function n(t,r){var o;if(i()(this,n),o=e.call(this,t),r){if(!Array.isArray(r))throw new Error("Invalid class constructor argument: indexes: Expected array!");for(var a=0,s=r.length;a<s;a++)o.withSingleColumnIndex(r[a])}return o}return a()(n,[{key:"isRemote",value:function(){return!0}},{key:"getStorageEngine",value:function(){return s.f.REMOTE}},{key:"isTransactional",value:function(){return!1}},{key:"startTransaction",value:function(){throw new Error("Operation handled by backend!")}},{key:"commitTransaction",value:function(){throw new Error("Operation handled by backend!")}},{key:"rollbackTransaction",value:function(){throw new Error("Operation handled by backend!")}},{key:"getNextAutoIncrementValue",value:function(){throw new Error("Operation handled by backend!")}},{key:"setNextAutoIncrementValue",value:function(t){throw new Error("Operation handled by backend!")}},{key:"alterIndexes",value:function(t){return Promise.reject()}},{key:"isIndexable",value:function(){return!0}},{key:"isVirtual",value:function(){return!1}}]),n}(E),D=n(41);n.d(e,"a",(function(){return C}));var C=function(){function t(){i()(this,t)}return a()(t,null,[{key:"createVirtualTable",value:function(t){return new O(t)}},{key:"createFromInMemoryArrayOfObjects",value:function(t,e,n){var r,i,o,a=void 0===e?D.a.getColumnDefinitions(t):e,u=[],c=a.length;if(!a.length)throw new Error('No valid columns were detected in "in-memory" array!');for(var l=0,h=t.length;l<h;l++){var f=0,d=void 0;for(d=0;d<c;d++)if(Array.isArray(t[l][a[d].name])){f=t[l][a[d].name].length;break}if(f>0)for(var p=0;p<f;p++){r=[];for(var g=0;g<c;g++)i=g==d?t[l][a[g].name][p]:t[l][a[g].name],null!==(o=D.a.getType(i))&&o===a[g].type||(i=null),r.push(i);u.push(r)}else{r=[];for(var v=0;v<c;v++)i=t[l][a[v].name],(o=D.a.getType(i))===s.d.OBJECT&&(i=i[Object.keys(i)[0]],o=D.a.getType(i)),null!==o&&o===a[v].type||(i=null),r.push(i);u.push(r)}}return new b(a,u,n)}},{key:"createFromRemoteTableDefinition",value:function(t,e){return new I(t,e)}}]),t}();window.JQLTableFactory=C},156:function(t,e,n){"use strict";var r=n(5),i=n.n(r),o=n(6),a=n.n(o),s=n(3),u=n.n(s),c=n(7),l=n.n(c),h=n(8),f=n.n(h),d=n(4),p=n.n(d),g=n(0),v=n.n(g),m=n(29),y=n(12),E=n(20),T=n.n(E),N=n(34);function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var b=function(){function t(){i()(this,t)}return a()(t,null,[{key:"create",value:function(t,e,n){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach((function(e){v()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},{action:t,auth:e},{},n)}}]),t}(),S=n(41),w=n(93),O=function(){function t(){i()(this,t),v()(this,"affectedRows",void 0),v()(this,"affectingRows",!1),v()(this,"calcFoundRows",void 0)}return a()(t,[{key:"getAffectedRows",value:function(){return this.affectedRows}},{key:"withAffectedRows",value:function(t){return this.affectedRows=~~t,this}},{key:"withCalcFoundRows",value:function(t){return this.calcFoundRows=t,this}},{key:"getCalcFoundRows",value:function(){return this.calcFoundRows}},{key:"hasRows",value:function(){return!1}},{key:"getRows",value:function(){return[]}},{key:"getRowsAsArray",value:function(){return[]}}]),t}(),_=function(){function t(e,n,r){i()(this,t),v()(this,"statement",void 0),v()(this,"db",void 0),v()(this,"markedRowsForDelete",void 0),v()(this,"bindings",void 0),this.statement=e,this.db=n,this.bindings=r}return a()(t,[{key:"execute",value:function(){var t=this;return function(){return new Promise((function(e,n){try{t.statement.bind(t.bindings,t.db)}catch(r){return void n(r)}t.db.getTable(t.statement.getTable().getName()).fetch().then((function(i){i.isTransactional()&&i.startTransaction();try{t.markedRowsForDelete=[];for(var o,a=i.createIterator(),s=t.statement.getFilter();o=a.next();)(null===s||!!s.compute(o))&&t.markedRowsForDelete.push({rowIndex:o.getRowIndex(),values:o.getDataAsArray()});if(!t.markedRowsForDelete.length)return i.isTransactional()&&i.commitTransaction(),void e((new O).withAffectedRows(0));if(t.applySorting(),t.applyLimits(),!t.markedRowsForDelete.length)return i.isTransactional()&&i.commitTransaction(),void e((new O).withAffectedRows(0));for(var u=0,c=t.markedRowsForDelete.length;u<c;u++)i.deleteRow(t.markedRowsForDelete[u].rowIndex);i.compact(),i.isTransactional()&&i.commitTransaction(),e((new O).withAffectedRows(t.markedRowsForDelete.length))}catch(r){console.error(r),i.isTransactional()&&i.rollbackTransaction(),n(new Error("Failed to execute DELETE statement!"))}})).catch((function(t){console.error(t),n(new Error("Failed to fetch table from server!"))}))}))}}},{key:"applySorting",value:function(){var t=this.statement.getSorter(),e=this.db.getTable(this.statement.getTable().getName());if(t&&!(this.markedRowsForDelete.length<2)){if(t.isRandom())return S.a.shuffleArray(this.markedRowsForDelete);var n=t.getSortExpressions(),r=n.length,i=function(){for(var t=[],i=0;i<r;i++)i===r-1?t.push(function(t){return function(e,r){var i=n[t].getExpression().compute(e),o=n[t].getExpression().compute(r),a=S.a.compare(i,o);return n[t].getDirection()===y.o.DESCENDING&&(a=-a),a}}(i)):t.push(function(e){return function(r,i){var o=n[e].getExpression().compute(r),a=n[e].getExpression().compute(i),s=S.a.compare(o,a);return n[e].getDirection()===y.o.DESCENDING&&(s=-s),0===s?t[e+1](r,i):s}}(i));return function(n,r){return t[0](w.a.createFromTable(e).withRowData(n.values).withIndex(-1),w.a.createFromTable(e).withRowData(r.values).withIndex(-1))}}();this.markedRowsForDelete.sort(i)}}},{key:"applyLimits",value:function(){var t=this.statement.getLimit();t&&(this.markedRowsForDelete=this.markedRowsForDelete.slice(t.getSkip(),t.getSkip()+t.getLimit()))}}]),t}(),I=function(){function t(e,n,r){i()(this,t),v()(this,"statement",void 0),v()(this,"db",void 0),v()(this,"bindings",void 0),this.statement=e,this.db=n,this.bindings=r}return a()(t,[{key:"execute",value:function(){var t=this;return function(){return new Promise((function(e,n){try{t.statement.bind(t.bindings,t.db)}catch(r){return void n(r)}t.db.getTable(t.statement.getTable().getName()).fetch().then((function(i){i.isTransactional()&&i.startTransaction();try{for(var o=w.a.createFromTable(i),a=0,s=t.statement.getFields(),u=s.length;a<u;a++)o.setColumnValue(s[a].getFieldName(),s[a].getExpression().compute(o));i.insertRow(o.getDataAsArray()),i.reIndex(),i.commitTransaction(),e((new O).withAffectedRows(1))}catch(r){i.isTransactional()&&i.rollbackTransaction(),console.error(r),n(new Error("Failed to execute INSERT statement"))}})).catch((function(t){console.error(t),n(new Error("Failed to fetch table from server!"))}))}))}}}]),t}(),D=n(104);function C(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var A=function(t){l()(n,t);var e=C(n);function n(){var t;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),v()(u()(t),"lastInsertId",void 0),t}return a()(n,[{key:"getLastInsertId",value:function(){return this.lastInsertId}},{key:"withLastInsertId",value:function(t){return this.lastInsertId=t,this}}]),n}(O);function k(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var L=function(t){l()(n,t);var e=k(n);function n(){var t;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),v()(u()(t),"rows",[]),t}return a()(n,[{key:"addRows",value:function(t){if(t&&t.length)for(var e=0,n=t.length;e<n;e++)this.rows.push(t[e]);return this}},{key:"hasRows",value:function(){return!0}},{key:"getAffectedRows",value:function(){return this.rows.length}},{key:"getRows",value:function(){return this.rows}},{key:"getRowsAsArray",value:function(){if(!this.rows||!this.rows.length)return[];for(var t,e,n,r,i=[],o=0,a=this.rows.length;o<a;o++){n=[],e=(t=Object.keys(this.rows[o])).length;for(var s=0;s<e;s++)void 0===(r=this.rows[o][t[s]])&&(r=null),n.push(r);i.push(n)}return i}}]),n}(O),M=function(){function t(e,n,r){i()(this,t),v()(this,"statement",void 0),v()(this,"db",void 0),v()(this,"bindings",void 0),this.statement=e,this.db=n,this.bindings=r}return a()(t,[{key:"execute",value:function(){var t=this;return function(){return new Promise((function(e,n){try{t.statement.bind(t.bindings,t.db)}catch(a){return void n(a)}var r=-1!==t.statement.getTable().name.indexOf("salesforcePrefill")?t.db.getRPCEndpointSalesforceName():t.db.getRPCEndpointName(),i=-1!==t.statement.getTable().name.indexOf("salesforcePrefill")?t.db.getAuthorizationTokenSalesforce():t.db.getAuthorizationToken(),o=b.create("query",i,{query:btoa(JSON.stringify(t.statement.getTokenizedStatement())),bindings:btoa(Object(D.b)(JSON.stringify(t.statement.getBindingData()))),applicationConfig:btoa(t.db.getApplicationConfig())});S.a.makeRequest(r,S.a.REQUEST_METHOD_POST,S.a.REQUEST_CONTENT_TYPE_X_WWW_FORM_URLENCODED,S.a.REQUEST_RESPONSE_TYPE_JSON,S.a.encodeData(o)).then((function(n){e(t.createStatementResult(n))})).catch((function(t){n(new Error(t))}))}))}}},{key:"createStatementResult",value:function(t){if(!T()(t,Object))throw new Error("Object expected!");if(void 0===t.resultType)throw new Error('Property "resultType" expected!');switch(t.resultType){case y.p.SELECT:var e=new L;return e.addRows(t.rows),e.withCalcFoundRows(t.foundRows),e;case y.p.UPDATE:var n=new O;return n.withAffectedRows(parseInt(t.affectedRows)||0),n;case y.p.INSERT:var r=new A;return r.withLastInsertId(parseInt(t.lastInsertId)||0),r.withAffectedRows(1),r;case y.p.DELETE:var i=new O;return i.withAffectedRows(parseInt(t.affectedRows)||0),i;default:throw new Error("Invalid server response resultType: ".concat(JSON.stringify(t.resultType)))}}}]),t}(),x=function(){function t(e,n,r){i()(this,t),v()(this,"statement",void 0),v()(this,"db",void 0),v()(this,"bindings",void 0),this.statement=e,this.db=n,this.bindings=r}return a()(t,[{key:"execute",value:function(){var e=this;return function(){return new Promise((function(n,r){try{e.statement.bind(e.bindings,e.db)}catch(a){return void r(a)}var i;if(e.statement.getTable())e.db.getTable(e.statement.getTable().getName()).fetch().then((function(o){try{i=e.applyLimit(e.applyColumnFiltering(e.applySorting(e.getStatementCandidateRows(o))));var s=(new L).addRows(i);e.statement.getUnion()?new t(e.statement.getUnion(),e.db,e.bindings).execute()().then((function(t){s.addRows(t.getRows()),n(s)})).catch((function(t){r(t)})):n(s)}catch(a){console.error(a),r(new Error("Failed to execute SELECT statement!"))}})).catch((function(t){console.error(t),r(new Error("Failed to fetch table from server!"))}));else try{i=[e.createSingleStatementRow()];var o=(new L).addRows(i);e.statement.getUnion()?new t(e.statement.getUnion(),e.db,e.bindings).execute()().then((function(t){o.addRows(t.getRows()),n(o)})).catch((function(t){r(t)})):n(o)}catch(a){console.error(a),r(new Error("Failed to execute INSERT statement!"))}}))}}},{key:"createSingleStatementRow",value:function(){var t,e,n=Object.create(null),r=new w.a([],[],0),i=this.statement.getFields();if(i.isSelectingAllFields())return n;for(var o=0,a=i.getFields(),s=a.length;o<s;o++)e=a[o].getLiteral(),t=a[o].getExpression().compute(r),null===e&&(e=a[o].getExpression().getLiteral()),n[e]=t;return n}},{key:"getStatementCandidateRows",value:function(t){var e,n,r,i,o,a,s=t.createIterator(),u=[],c=this.statement.getFields(),l=c.isSelectingAllFields(),h=c,f=this.statement.getFilter();for(l||(n=h.getFields());e=s.next();)if(!f||!!f.compute(e))if(l)u.push(e.toObject());else{r=Object.create(null);for(var d=0,p=n.length;d<p;d++)a=n[d].getLiteral(),o=n[d].getExpression().compute(e),null===a&&(a=n[d].getExpression().getLiteral()),r[a]=o;for(var g in(i=e.toObject())["."]=r,r)i[g]=r[g];u.push(i)}return u}},{key:"applySorting",value:function(t){var e=this.statement.getSorter();if(!e||t.length<2)return t;if(e.isRandom())return S.a.shuffleArray(t);var n=e.getSortExpressions(),r=n.length,i=function(){for(var t=[],e=0;e<r;e++)e===r-1?t.push(function(t){return function(e,r){var i=n[t].getExpression().compute(e),o=n[t].getExpression().compute(r),a=S.a.compare(i,o);return n[t].getDirection()===y.o.DESCENDING&&(a=-a),a}}(e)):t.push(function(e){return function(r,i){var o=n[e].getExpression().compute(r),a=n[e].getExpression().compute(i),s=S.a.compare(o,a);return n[e].getDirection()===y.o.DESCENDING&&(s=-s),0===s?t[e+1](r,i):s}}(e));return function(e,n){return t[0](w.a.createFromObject(e),w.a.createFromObject(n))}}();return t.sort(i)}},{key:"applyLimit",value:function(t){var e=this.statement.getLimit();return e?t.slice(e.getSkip(),e.getSkip()+e.getLimit()):t}},{key:"applyColumnFiltering",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++)e.push(void 0===t[n]["."]?t[n]:t[n]["."]);return e}}]),t}(),P=function(){function t(e,n,r){i()(this,t),v()(this,"statement",void 0),v()(this,"db",void 0),v()(this,"markedRowsForUpdate",void 0),v()(this,"bindings",void 0),this.statement=e,this.db=n,this.bindings=r}return a()(t,[{key:"execute",value:function(){var t=this;return function(){return new Promise((function(e,n){try{t.statement.bind(t.bindings,t.db)}catch(r){return void n(r)}t.db.getTable(t.statement.getTable().getName()).fetch().then((function(i){i.isTransactional()&&i.startTransaction();try{t.markedRowsForUpdate=[];for(var o,a=i.createIterator(),s=t.statement.getFilter();o=a.next();)(null===s||!!s.compute(o))&&t.markedRowsForUpdate.push({rowIndex:o.getRowIndex(),values:o.getDataAsArray()});if(!t.markedRowsForUpdate.length)return i.isTransactional()&&i.commitTransaction(),void e((new O).withAffectedRows(0));if(t.applySorting(),t.applyLimits(),!t.markedRowsForUpdate.length)return i.isTransactional()&&i.commitTransaction(),void e((new O).withAffectedRows(0));for(var u,c,l=(new O).withAffectedRows(t.markedRowsForUpdate.length),h=w.a.createFromTable(i),f=t.statement.getFields(),d=f.length,p=0,g=t.markedRowsForUpdate.length;p<g;p++){h.withIndex(t.markedRowsForUpdate[p].rowIndex).withRowData(t.markedRowsForUpdate[p].values);for(var v=0;v<d;v++)u=f[v].getFieldName(),c=f[v].getExpression().compute(h),h.setColumnValue(u,c);i.replace(t.markedRowsForUpdate[p].rowIndex,h.getDataAsArray())}i.reIndex(),i.isTransactional()&&i.commitTransaction(),e(l)}catch(r){console.error(r),i.isTransactional()&&i.rollbackTransaction(),n(new Error("Failed to execute UPDATE statement!"))}})).catch((function(t){console.error(t),n(new Error("Failed to fetch table from server!"))}))}))}}},{key:"applySorting",value:function(){var t=this.statement.getSorter(),e=this.db.getTable(this.statement.getTable().getName());if(t&&!(this.markedRowsForUpdate.length<2)){if(t.isRandom())return S.a.shuffleArray(this.markedRowsForUpdate);var n=t.getSortExpressions(),r=n.length,i=function(){for(var t=[],i=0;i<r;i++)i===r-1?t.push(function(t){return function(e,r){var i=n[t].getExpression().compute(e),o=n[t].getExpression().compute(r),a=S.a.compare(i,o);return n[t].getDirection()===y.o.DESCENDING&&(a=-a),a}}(i)):t.push(function(e){return function(r,i){var o=n[e].getExpression().compute(r),a=n[e].getExpression().compute(i),s=S.a.compare(o,a);return n[e].getDirection()===y.o.DESCENDING&&(s=-s),0===s?t[e+1](r,i):s}}(i));return function(n,r){return t[0](w.a.createFromTable(e).withRowData(n.values).withIndex(-1),w.a.createFromTable(e).withRowData(r.values).withIndex(-1))}}();this.markedRowsForUpdate.sort(i)}}},{key:"applyLimits",value:function(){var t=this.statement.getLimit();t&&(this.markedRowsForUpdate=this.markedRowsForUpdate.slice(t.getSkip(),t.getSkip()+t.getLimit()))}}]),t}(),F=n(117),U=n(609),B=function(){function t(e){i()(this,t),v()(this,"queryId",0),v()(this,"database",void 0),v()(this,"queue",[]),v()(this,"isRunning",!1),this.database=e}return a()(t,[{key:"scheduleStatement",value:function(t,e){var n=this;return Object(F.a)(this.queue,(function(e){return e.statement===t}))&&Object(U.a)(this.queue,(function(e){return e.statement===t})),new Promise((function(r,i){n.queryId++,n.queue.push({queryId:n.queryId,statement:t,strategy:e,resolve:r,reject:i}),1!==n.queue.length||n.isRunning||(n.database.trigger("busy"),n.next())}))}},{key:"next",value:function(){var t=this;if(!this.isRunning){var e=this.queue.shift();if(void 0!==e){this.isRunning=!0;var n=function(){e.strategy.execute()().then((function(t){e.resolve(t)})).catch((function(t){e.reject(t)})).finally((function(){t.isRunning=!1,t.queue.length?t.next():t.database.trigger("idle")}))};0===this.queue.length%5?setTimeout(n):n()}else this.database.trigger("idle")}}}]),t}(),H=function t(){i()(this,t)};function V(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var G=function(t){l()(n,t);var e=V(n);function n(){var t;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),v()(u()(t),"literal",void 0),t}return a()(n,[{key:"getOpcodeType",value:function(){return y.i.EXPRESSION}},{key:"getLiteral",value:function(){return void 0!==this.literal||(this.literal=this.toString().replace(/["']+/g,"").trim()),this.literal}}]),n}(H);function j(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Y=function(t){l()(n,t);var e=j(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"bindingName",void 0),v()(u()(r),"bindingValue",void 0),r.bindingName=t.name,r}return a()(n,[{key:"getExpressionType",value:function(){return y.g.BINDING}},{key:"getBindingName",value:function(){return this.bindingName}},{key:"getBindedValue",value:function(){if(void 0===this.bindingValue)throw new Error("Binding "+JSON.stringify(this.bindingName)+" is not binded!");return this.bindingValue}},{key:"getBindings",value:function(){return[this]}},{key:"getFunctions",value:function(){return[]}},{key:"getIdentifiers",value:function(){return[]}},{key:"bind",value:function(t){return this.bindingValue=t,this}},{key:"unbind",value:function(){return this.bindingValue=void 0,this}},{key:"compute",value:function(t){if(void 0!==this.bindingValue)return this.bindingValue;throw new Error("Failed to compute binding: Binding "+this.bindingName+" is not binded!")}},{key:"toString",value:function(){return":"+this.bindingName}}]),n}(G);function q(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Q=function(t){l()(n,t);var e=q(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"value",void 0),r.value=t.value,r}return a()(n,[{key:"getExpressionType",value:function(){return y.g.BOOLEAN}},{key:"getBindings",value:function(){return[]}},{key:"getIdentifiers",value:function(){return[]}},{key:"getFunctions",value:function(){return[]}},{key:"compute",value:function(t){return this.value}},{key:"toString",value:function(){return String(this.value)}}]),n}(G);function J(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var W=function(t){l()(n,t);var e=J(n);function n(t){var r;i()(this,n),r=e.call(this),v()(u()(r),"functionName",void 0),v()(u()(r),"arguments",[]),v()(u()(r),"database",null),r.functionName=t.function_name;for(var o=0,a=t.arguments.length;o<a;o++)r.arguments.push(we.create(t.arguments[o]));return r}return a()(n,[{key:"getExpressionType",value:function(){return y.g.FUNCTION_CALL}},{key:"getFunctionName",value:function(){return this.functionName}},{key:"getArguments",value:function(){return this.arguments}},{key:"getBindings",value:function(){for(var t=[],e=0,n=this.arguments.length;e<n;e++)for(var r=0,i=this.arguments[e].getBindings(),o=i.length;r<o;r++)t.push(i[r]);return t}},{key:"getFunctions",value:function(){for(var t=[this],e=0,n=this.arguments.length;e<n;e++)for(var r=0,i=this.arguments[e].getFunctions(),o=i.length;r<o;r++)t.push(i[r]);return t}},{key:"getIdentifiers",value:function(){for(var t=[],e=0,n=this.arguments.length;e<n;e++)for(var r=0,i=this.arguments[e].getIdentifiers(),o=i.length;r<o;r++)t.push(i[r]);return t}},{key:"withDatabase",value:function(t){return this.database=t||null,this}},{key:"compute",value:function(t){if(this.database){for(var e=[],n=0,r=this.arguments.length;n<r;n++)e.push(this.arguments[n].compute(t));return this.database.callFunction(this.functionName,e)}throw new Error("Failed to call function "+JSON.stringify(this.functionName)+": Database not binded to function!")}},{key:"toString",value:function(){for(var t=this.functionName+"(",e=0,n=this.arguments.length;e<n;e++)t+=(0===e?"":", ")+this.arguments[e].toString();return t+")"}}]),n}(G);function K(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var z=function(t){l()(n,t);var e=K(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"expression",void 0),r.expression=we.create(t.expression),r}return a()(n,[{key:"getExpressionType",value:function(){return y.g.GROUP}},{key:"getBindings",value:function(){return this.expression.getBindings()}},{key:"getFunctions",value:function(){return this.expression.getFunctions()}},{key:"getIdentifiers",value:function(){return this.expression.getIdentifiers()}},{key:"compute",value:function(t){return this.expression.compute(t)}},{key:"toString",value:function(){return"("+this.expression.toString()+")"}}]),n}(G);function X(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var $=function(t){l()(n,t);var e=X(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"identifierName",void 0),r.identifierName=t.name,r}return a()(n,[{key:"getExpressionType",value:function(){return y.g.IDENTIFIER}},{key:"getIdentifierName",value:function(){return this.identifierName}},{key:"getBindings",value:function(){return[]}},{key:"getFunctions",value:function(){return[]}},{key:"getIdentifiers",value:function(){return[this]}},{key:"compute",value:function(t){return t.getColumnValue(this.identifierName)}},{key:"toString",value:function(){return this.identifierName}}]),n}(G);function Z(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var tt=function(t){l()(n,t);var e=Z(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"left",void 0),v()(u()(r),"right",void 0),r.left=we.create(t.left),r.right=null===t.right?null:we.create(t.right),r}return a()(n,[{key:"getExpressionType",value:function(){return y.g.LOGICAL}},{key:"getLeftOperand",value:function(){return this.left}},{key:"getRightOperand",value:function(){return this.right}},{key:"getBindings",value:function(){for(var t=[],e=0,n=this.left.getBindings(),r=n.length;e<r;e++)t.push(n[e]);for(var i=0,o=this.right.getBindings(),a=o.length;i<a;i++)t.push(o[i]);return t}},{key:"getFunctions",value:function(){for(var t=[],e=0,n=this.left.getFunctions(),r=n.length;e<r;e++)t.push(n[e]);for(var i=0,o=this.right.getFunctions(),a=o.length;i<a;i++)t.push(o[i]);return t}},{key:"getIdentifiers",value:function(){for(var t=[],e=0,n=this.left.getIdentifiers(),r=n.length;e<r;e++)t.push(n[e]);for(var i=0,o=this.right.getIdentifiers(),a=o.length;i<a;i++)t.push(o[i]);return t}}]),n}(G);function et(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var nt=function(t){l()(n,t);var e=et(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getOperator",value:function(){return y.k.AND}},{key:"compute",value:function(t){return!(!this.left.compute(t)||!this.right.compute(t))}},{key:"toString",value:function(){return this.left.toString()+" and "+this.right.toString()}}]),n}(tt);function rt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var it=function(t){l()(n,t);var e=rt(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getOperator",value:function(){return y.j.EQUALS}},{key:"compute",value:function(t){var e=this.left.compute(t),n=this.right.compute(t);return isNaN(e)||isNaN(n)?e!=n||0!==S.a.compareAsStrings(e,n):Number(e)!=Number(n)}},{key:"toString",value:function(){return this.left.toString()+" <> "+this.right.toString()}}]),n}(tt);function ot(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var at=function(t){l()(n,t);var e=ot(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getOperator",value:function(){return y.j.EQUALS}},{key:"compute",value:function(t){var e=this.left.compute(t),n=this.right.compute(t);return isNaN(e)||isNaN(n)?e==n||0===S.a.compareAsStrings(e,n):Number(e)==Number(n)}},{key:"toString",value:function(){return this.left.toString()+" = "+this.right.toString()}}]),n}(tt);function st(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var ut=function(t){l()(n,t);var e=st(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getOperator",value:function(){return y.j.GT}},{key:"compute",value:function(t){var e=this.left.compute(t),n=this.right.compute(t);return isNaN(e)||isNaN(n)?e>n||S.a.compareAsStrings(e,n)<0:Number(e)>Number(n)}},{key:"toString",value:function(){return this.left.toString()+" > "+this.right.toString()}}]),n}(tt);function ct(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var lt=function(t){l()(n,t);var e=ct(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getOperator",value:function(){return y.j.GTE}},{key:"compute",value:function(t){var e=this.left.compute(t),n=this.right.compute(t);return isNaN(e)||isNaN(n)?e>=n||S.a.compareAsStrings(e,n)<=0:Number(e)>=Number(n)}},{key:"toString",value:function(){return this.left.toString()+" >= "+this.right.toString()}}]),n}(tt);function ht(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var ft=function(t){l()(n,t);var e=ht(n);function n(t){var r;i()(this,n),r=e.call(this,t),v()(u()(r),"haystack",[]);for(var o=0,a=t.haystack.length;o<a;o++)r.haystack.push(we.create(t.haystack[o]));return r}return a()(n,[{key:"getOperator",value:function(){return y.j.IN}},{key:"compute",value:function(t){for(var e=this.left.compute(t),n=0,r=this.haystack.length;n<r;n++)if(this.equals(e,this.haystack[n].compute(t)))return!0;return!1}},{key:"equals",value:function(t,e){return isNaN(t)||isNaN(e)?t==e||0===S.a.compareAsStrings(t,e):Number(t)==Number(e)}},{key:"toString",value:function(){for(var t=this.left.toString()+" IN(",e=[],n=0,r=this.haystack.length;n<r;n++)e.push(this.haystack[n].toString());return t+e.join(", ")+")"}},{key:"getBindings",value:function(){for(var t=[],e=0,n=this.left.getBindings(),r=n.length;e<r;e++)t.push(n[e]);for(var i=0,o=this.haystack.length;i<o;i++)for(var a=0,s=this.haystack[i].getBindings(),u=s.length;a<u;a++)t.push(s[a]);return t}},{key:"getFunctions",value:function(){for(var t=[],e=0,n=this.left.getFunctions(),r=n.length;e<r;e++)t.push(n[e]);for(var i=0,o=this.haystack.length;i<o;i++)for(var a=0,s=this.haystack[i].getFunctions(),u=s.length;a<u;a++)t.push(s[a]);return t}},{key:"getIdentifiers",value:function(){for(var t=[],e=0,n=this.left.getIdentifiers(),r=n.length;e<r;e++)t.push(n[e]);for(var i=0,o=this.haystack.length;i<o;i++)for(var a=0,s=this.haystack[i].getIdentifiers(),u=s.length;a<u;a++)t.push(s[a]);return t}}]),n}(tt);function dt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var pt=function(t){l()(n,t);var e=dt(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getOperator",value:function(){return y.j.LIKE}},{key:"compute",value:function(t){return this.like(this.left.compute(t),this.right.compute(t))}},{key:"like",value:function(t,e){var n=S.a.castToString(t),r=S.a.castToString(e);return this.buildRegularExpression(r).test(n)}},{key:"buildRegularExpression",value:function(t){for(var e="^",n="",r=0,i=t.length;r<i;r++)switch(n=t.charAt(r)){case"%":e+="(.*)";break;case"\n":e+="\\n";break;case"\r":e+="\\r";break;case"\t":e+="\\t";break;case".":case"-":case"[":case"]":case"(":case")":case"?":case"!":case"^":case"$":case"\\":case"/":e+="\\"+n;break;default:e+=n}return new RegExp(e+"$","i")}},{key:"toString",value:function(){return this.left.toString()+" LIKE "+this.right.toString()}}]),n}(tt);function gt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var vt=function(t){l()(n,t);var e=gt(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getOperator",value:function(){return y.j.LT}},{key:"compute",value:function(t){var e=this.left.compute(t),n=this.right.compute(t);return isNaN(e)||isNaN(n)?e<n||S.a.compareAsStrings(e,n)>0:Number(e)<Number(n)}},{key:"toString",value:function(){return this.left.toString()+" < "+this.right.toString()}}]),n}(tt);function mt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var yt=function(t){l()(n,t);var e=mt(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getOperator",value:function(){return y.j.LTE}},{key:"compute",value:function(t){var e=this.left.compute(t),n=this.right.compute(t);return isNaN(e)||isNaN(n)?e<=n||S.a.compareAsStrings(e,n)>=0:Number(e)<=Number(n)}},{key:"toString",value:function(){return this.left.toString()+" <= "+this.right.toString()}}]),n}(tt);function Et(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Tt=function(t){l()(n,t);var e=Et(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getOperator",value:function(){return y.k.OR}},{key:"compute",value:function(t){return!(!this.left.compute(t)&&!this.right.compute(t))}},{key:"toString",value:function(){return this.left.toString()+" or "+this.right.toString()}}]),n}(tt);function Nt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Rt=function(t){l()(n,t);var e=Nt(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"left",void 0),v()(u()(r),"right",void 0),r.left=we.create(t.left),r.right=we.create(t.right),r}return a()(n,[{key:"getExpressionType",value:function(){return y.g.MATH}},{key:"getLeftOperand",value:function(){return this.left}},{key:"getRightOperand",value:function(){return this.right}},{key:"getBindings",value:function(){for(var t=[],e=0,n=this.left.getBindings(),r=n.length;e<r;e++)t.push(n[e]);for(var i=0,o=this.right.getBindings(),a=o.length;i<a;i++)t.push(o[i]);return t}},{key:"getFunctions",value:function(){for(var t=[],e=0,n=this.left.getFunctions(),r=n.length;e<r;e++)t.push(n[e]);for(var i=0,o=this.right.getFunctions(),a=o.length;i<a;i++)t.push(o[i]);return t}},{key:"getIdentifiers",value:function(){for(var t=[],e=0,n=this.left.getIdentifiers(),r=n.length;e<r;e++)t.push(n[e]);for(var i=0,o=this.right.getIdentifiers(),a=o.length;i<a;i++)t.push(o[i]);return t}}]),n}(G);function bt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var St=function(t){l()(n,t);var e=bt(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getOperator",value:function(){return y.l.ADDITION}},{key:"compute",value:function(t){return Number((Number(this.left.compute(t))+Number(this.right.compute(t))).toFixed(6))}},{key:"toString",value:function(){return this.left.toString()+" + "+this.right.toString()}}]),n}(Rt);function wt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Ot=function(t){l()(n,t);var e=wt(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getOperator",value:function(){return y.l.DIFFERENCE}},{key:"compute",value:function(t){return Number((Number(this.left.compute(t))-Number(this.right.compute(t))).toFixed(6))}},{key:"toString",value:function(){return this.left.toString()+" - "+this.right.toString()}}]),n}(Rt);function _t(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var It=function(t){l()(n,t);var e=_t(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getOperator",value:function(){return y.l.DIVISION}},{key:"compute",value:function(t){return Number((Number(this.left.compute(t))/Number(this.right.compute(t))).toFixed(6))}},{key:"toString",value:function(){return this.left.toString()+" / "+this.right.toString()}}]),n}(Rt);function Dt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Ct=function(t){l()(n,t);var e=Dt(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getOperator",value:function(){return y.l.MULTIPLY}},{key:"compute",value:function(t){return Number((Number(this.left.compute(t))*Number(this.right.compute(t))).toFixed(6))}},{key:"toString",value:function(){return this.left.toString()+" * "+this.right.toString()}}]),n}(Rt);function At(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var kt=function(t){l()(n,t);var e=At(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getExpressionType",value:function(){return y.g.NULL}},{key:"getBindings",value:function(){return[]}},{key:"getFunctions",value:function(){return[]}},{key:"getIdentifiers",value:function(){return[]}},{key:"compute",value:function(t){return null}},{key:"toString",value:function(){return"null"}}]),n}(G);function Lt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Mt=function(t){l()(n,t);var e=Lt(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"value",void 0),r.value=t.value,r}return a()(n,[{key:"getExpressionType",value:function(){return y.g.NUMBER}},{key:"getBindings",value:function(){return[]}},{key:"getFunctions",value:function(){return[]}},{key:"getIdentifiers",value:function(){return[]}},{key:"compute",value:function(t){return this.value}},{key:"toString",value:function(){return String(this.value)}}]),n}(G);function xt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Pt=function(t){l()(n,t);var e=xt(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"value",void 0),r.value=t.value,r}return a()(n,[{key:"getExpressionType",value:function(){return y.g.STRING}},{key:"getBindings",value:function(){return[]}},{key:"getFunctions",value:function(){return[]}},{key:"getIdentifiers",value:function(){return[]}},{key:"compute",value:function(t){return this.value}},{key:"toString",value:function(){return JSON.stringify(this.value)}}]),n}(G);function Ft(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Ut=function(t){l()(n,t);var e=Ft(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"operand",void 0),r.operand=we.create(t.left),r}return a()(n,[{key:"getExpressionType",value:function(){return y.g.UNARY}},{key:"getOperand",value:function(){return this.operand}},{key:"getBindings",value:function(){return this.operand.getBindings()}},{key:"getFunctions",value:function(){return this.operand.getFunctions()}},{key:"getIdentifiers",value:function(){return this.operand.getIdentifiers()}}]),n}(G);function Bt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Ht=function(t){l()(n,t);var e=Bt(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getOperator",value:function(){return y.m.INVERT}},{key:"compute",value:function(t){var e=this.operand.compute(t);return null===e?null:!0===e?-1:!1===e||isNaN(e)?0:-e}},{key:"toString",value:function(){return"-"+this.operand.toString()}}]),n}(Ut);function Vt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Gt=function(t){l()(n,t);var e=Vt(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getOperator",value:function(){return y.m.NOT}},{key:"compute",value:function(t){return console.warn('TODO: Properly implement "Unary !" operator'),!this.operand.compute(t)}},{key:"toString",value:function(){return"!"+this.operand.toString()}}]),n}(Ut);function jt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Yt=function(t){l()(n,t);var e=jt(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"limit",void 0),v()(u()(r),"skip",void 0),r.limit=t.limit,r.skip=t.skip,r}return a()(n,[{key:"getOpcodeType",value:function(){return y.i.LIMIT_OPTION}},{key:"getLimit",value:function(){return this.limit}},{key:"getSkip",value:function(){return this.skip}}]),n}(H);function qt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Qt=function(t){l()(n,t);var e=qt(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"direction",void 0),v()(u()(r),"expression",void 0),r.direction=t.direction,r.expression=we.create(t.expression),r}return a()(n,[{key:"getOpcodeType",value:function(){return y.i.ORDER_BY_EXPRESSION}},{key:"getDirection",value:function(){return this.direction}},{key:"getExpression",value:function(){return this.expression}}]),n}(H);function Jt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Wt=function(t){l()(n,t);var e=Jt(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"strategy",void 0),r.strategy=t.type,r}return a()(n,[{key:"getOpcodeType",value:function(){return y.i.ORDER_BY_OPTION}}]),n}(H);function Kt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var zt=function(t){l()(n,t);var e=Kt(n);function n(t){var r;i()(this,n),r=e.call(this,t),v()(u()(r),"expressions",[]);for(var o=0,a=t.fields.length;o<a;o++)r.expressions.push(we.create(t.fields[o]));return r}return a()(n,[{key:"getSortExpressions",value:function(){return this.expressions}},{key:"isRandom",value:function(){return!1}}]),n}(Wt);function Xt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var $t=function(t){l()(n,t);var e=Xt(n);function n(t){return i()(this,n),e.call(this,t)}return a()(n,[{key:"isRandom",value:function(){return!0}}]),n}(Wt);function Zt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var te=function(t){l()(n,t);var e=Zt(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"remote",void 0),v()(u()(r),"binded",void 0),v()(u()(r),"statement",void 0),r.remote=t.remote,r.statement=t,r}return a()(n,[{key:"getOpcodeType",value:function(){return y.i.STATEMENT}},{key:"isRemote",value:function(){return this.remote}},{key:"bind",value:function(t,e){this.binded=!1;for(var n,r=this.getBindings(),i=r.length,o=t?"function"===typeof t?t():t:{},a=0;a<i;a++)r[a].unbind();for(var s=0;s<i;s++)if(void 0===o[n=r[s].getBindingName()]){if(!e||!e.autoBind(n,r[s]))throw new Error("Failed to bind statement: Binding "+JSON.stringify(n)+" is not defined in bind object, and is also not auto bindable!")}else r[s].bind(o[n]);return this.binded=!0,this}},{key:"getBindingData",value:function(){for(var t,e={},n=this.getBindings(),r=0,i=n.length;r<i;r++)void 0===e[t=n[r].getBindingName()]&&(e[t]=n[r].getBindedValue());return e}},{key:"isBinded",value:function(){return this.binded}},{key:"getTokenizedStatement",value:function(){return JSON.parse(JSON.stringify(this.statement))}}]),n}(H);function ee(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var ne=function(t){l()(n,t);var e=ee(n);function n(t){var r;return i()(this,n),r=e.call(this,t),v()(u()(r),"table",void 0),v()(u()(r),"filter",null),v()(u()(r),"sorter",null),v()(u()(r),"limit",null),r.table=we.create(t.table),t.where&&(r.filter=we.create(t.where)),t.orderBy&&(r.sorter=we.create(t.orderBy)),t.limit&&(r.limit=we.create(t.limit)),r}return a()(n,[{key:"getStatementType",value:function(){return y.p.DELETE}},{key:"getTable",value:function(){return this.table}},{key:"getFilter",value:function(){return this.filter}},{key:"getSorter",value:function(){return this.sorter}},{key:"getLimit",value:function(){return this.limit}},{key:"getBindings",value:function(){var t=[];if(this.filter)for(var e=this.filter.getBindings(),n=0,r=e.length;n<r;n++)t.push(e[n]);if(this.sorter&&!this.sorter.isRandom())for(var i=0,o=this.sorter.getSortExpressions(),a=o.length;i<a;i++)for(var s=0,u=o[i].getExpression().getBindings(),c=u.length;s<c;s++)t.push(u[i]);return t}},{key:"getFunctions",value:function(){var t=[];if(null!==this.filter)for(var e=this.filter.getFunctions(),n=0,r=e.length;n<r;n++)t.push(e[n]);if(null!==this.sorter&&!this.sorter.isRandom())for(var i=0,o=this.sorter.getSortExpressions(),a=o.length;i<a;i++)for(var s=0,u=o[i].getExpression().getFunctions(),c=u.length;s<c;s++)t.push(u[i]);return t}},{key:"getIdentifiers",value:function(){var t=[];if(null!==this.filter)for(var e=this.filter.getIdentifiers(),n=0,r=e.length;n<r;n++)t.push(e[n]);if(null!==this.sorter&&!this.sorter.isRandom())for(var i=0,o=this.sorter.getSortExpressions(),a=o.length;i<a;i++)for(var s=0,u=o[i].getExpression().getIdentifiers(),c=u.length;s<c;s++)t.push(u[s]);return t}}]),n}(te);function re(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var ie=function(t){l()(n,t);var e=re(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"literal",null),v()(u()(r),"expression",void 0),r.literal=t.literal,r.expression=we.create(t.expression),r}return a()(n,[{key:"getOpcodeType",value:function(){return y.i.FIELD}},{key:"getLiteral",value:function(){return this.literal}},{key:"getExpression",value:function(){return this.expression}}]),n}(H);function oe(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var ae=function(t){l()(n,t);var e=oe(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getOpcodeType",value:function(){return y.i.FIELDS_LIST}}]),n}(H);function se(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var ue=function(t){l()(n,t);var e=se(n);function n(t){return i()(this,n),e.call(this)}return a()(n,[{key:"isSelectingAllFields",value:function(){return!0}}]),n}(ae);function ce(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var le=function(t){l()(n,t);var e=ce(n);function n(t){var r;i()(this,n),r=e.call(this),v()(u()(r),"fields",[]);for(var o=0,a=t.fields.length;o<a;o++)r.fields.push(we.create(t.fields[o]));return r}return a()(n,[{key:"getFields",value:function(){return this.fields}},{key:"isSelectingAllFields",value:function(){return!1}}]),n}(ae);function he(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var fe=function(t){l()(n,t);var e=he(n);function n(t){var r;i()(this,n),r=e.call(this,t),v()(u()(r),"table",void 0),v()(u()(r),"fields",[]),r.table=we.create(t.table);for(var o=0,a=t.fields.length;o<a;o++)r.fields.push(we.create(t.fields[o]));return r}return a()(n,[{key:"getStatementType",value:function(){return y.p.INSERT}},{key:"getTable",value:function(){return this.table}},{key:"getFields",value:function(){return this.fields}},{key:"getBindings",value:function(){for(var t=[],e=0,n=this.fields.length;e<n;e++)for(var r=0,i=this.fields[e].getExpression().getBindings(),o=i.length;r<o;r++)t.push(i[r]);return t}},{key:"getFunctions",value:function(){for(var t=[],e=0,n=this.fields.length;e<n;e++)for(var r=0,i=this.fields[e].getExpression().getFunctions(),o=i.length;r<o;r++)t.push(i[r]);return t}},{key:"getIdentifiers",value:function(){for(var t=[],e=0,n=this.fields.length;e<n;e++)for(var r=0,i=this.fields[e].getExpression().getIdentifiers(),o=i.length;r<o;r++)t.push(i[r]);return t}}]),n}(te),de=n(17),pe=n.n(de);function ge(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var ve=function(t){l()(n,t);var e=ge(n);function n(t){var r;return i()(this,n),r=e.call(this,t),v()(u()(r),"fields",void 0),v()(u()(r),"table",null),v()(u()(r),"filter",null),v()(u()(r),"sorter",null),v()(u()(r),"limit",null),v()(u()(r),"calcFoundRows",void 0),v()(u()(r),"union",null),v()(u()(r),"previous",null),r.calcFoundRows=t.calcFoundRows,r.fields=we.create(t.fields),t.table&&(r.table=we.create(t.table),t.where&&(r.filter=we.create(t.where)),t.orderBy&&(r.sorter=we.create(t.orderBy)),t.limit&&(r.limit=we.create(t.limit))),t.union&&(r.union=we.create(t.union).withPreviousStatement(u()(r))),r}return a()(n,[{key:"isRemote",value:function(){return this.previous?this.previous.isRemote():pe()(p()(n.prototype),"isRemote",this).call(this)}},{key:"getStatementType",value:function(){return y.p.SELECT}},{key:"getFields",value:function(){return this.fields}},{key:"getTable",value:function(){return this.table}},{key:"getFilter",value:function(){return this.filter}},{key:"getSorter",value:function(){return this.sorter}},{key:"getLimit",value:function(){return this.limit}},{key:"getUnion",value:function(){return this.union}},{key:"withPreviousStatement",value:function(t){return this.previous=t||null,this}},{key:"getBindings",value:function(){var t=[];if(null!==this.fields&&!this.fields.isSelectingAllFields())for(var e=0,n=this.fields.getFields(),r=n.length;e<r;e++)for(var i=0,o=n[e].getExpression().getBindings(),a=o.length;i<a;i++)t.push(o[i]);if(null!==this.filter)for(var s=this.filter.getBindings(),u=0,c=s.length;u<c;u++)t.push(s[u]);if(null!==this.sorter&&!this.sorter.isRandom())for(var l=0,h=this.sorter.getSortExpressions(),f=h.length;l<f;l++)for(var d=0,p=h[l].getExpression().getBindings(),g=p.length;d<g;d++)t.push(p[l]);return t}},{key:"getFunctions",value:function(){var t=[];if(null!==this.fields&&!this.fields.isSelectingAllFields())for(var e=0,n=this.fields.getFields(),r=n.length;e<r;e++)for(var i=0,o=n[e].getExpression().getFunctions(),a=o.length;i<a;i++)t.push(o[i]);if(null!==this.filter)for(var s=this.filter.getFunctions(),u=0,c=s.length;u<c;u++)t.push(s[u]);if(null!==this.sorter&&!this.sorter.isRandom())for(var l=0,h=this.sorter.getSortExpressions(),f=h.length;l<f;l++)for(var d=0,p=h[l].getExpression().getFunctions(),g=p.length;d<g;d++)t.push(p[l]);if(null!==this.union)for(var v=this.union.getFunctions(),m=0,y=v.length;m<y;m++)t.push(v[m]);return t}},{key:"getIdentifiers",value:function(){var t=[];if(null!==this.fields&&!this.fields.isSelectingAllFields())for(var e=0,n=this.fields.getFields(),r=n.length;e<r;e++)for(var i=0,o=n[e].getExpression().getIdentifiers(),a=o.length;i<a;i++)t.push(o[i]);if(null!==this.filter)for(var s=this.filter.getIdentifiers(),u=0,c=s.length;u<c;u++)t.push(s[u]);if(null!==this.sorter&&!this.sorter.isRandom())for(var l=0,h=this.sorter.getSortExpressions(),f=h.length;l<f;l++)for(var d=0,p=h[l].getExpression().getIdentifiers(),g=p.length;d<g;d++)t.push(p[d]);return t}},{key:"getCalcFoundRows",value:function(){return this.calcFoundRows}}]),n}(te);function me(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var ye=function(t){l()(n,t);var e=me(n);function n(t){var r;i()(this,n),r=e.call(this,t),v()(u()(r),"table",void 0),v()(u()(r),"fields",[]),v()(u()(r),"filter",null),v()(u()(r),"limit",null),v()(u()(r),"sorter",null),v()(u()(r),"timer",null),r.table=we.create(t.table),t.delayed&&(r.timer=we.create(t.delayed));for(var o=0,a=t.fields.length;o<a;o++)r.fields.push(we.create(t.fields[o]));return t.where&&(r.filter=we.create(t.where)),t.limit&&(r.limit=we.create(t.limit)),t.orderBy&&(r.sorter=we.create(t.orderBy)),r}return a()(n,[{key:"getStatementType",value:function(){return y.p.UPDATE}},{key:"getTimer",value:function(){return this.timer}},{key:"getTable",value:function(){return this.table}},{key:"getFields",value:function(){return this.fields}},{key:"getFilter",value:function(){return this.filter}},{key:"getSorter",value:function(){return this.sorter}},{key:"getLimit",value:function(){return this.limit}},{key:"getBindings",value:function(){for(var t=[],e=0,n=this.fields.length;e<n;e++)for(var r=0,i=this.fields[e].getExpression().getBindings(),o=i.length;r<o;r++)t.push(i[r]);if(this.filter)for(var a=0,s=this.filter.getBindings(),u=s.length;a<u;a++)t.push(s[a]);if(this.sorter&&!this.sorter.isRandom())for(var c=0,l=this.sorter.getSortExpressions(),h=l.length;c<h;c++)for(var f=0,d=l[c].getExpression().getBindings(),p=d.length;f<p;f++)t.push(d[c]);return t}},{key:"getFunctions",value:function(){for(var t=[],e=0,n=this.fields.length;e<n;e++)for(var r=0,i=this.fields[e].getExpression().getFunctions(),o=i.length;r<o;r++)t.push(i[r]);if(this.filter)for(var a=0,s=this.filter.getFunctions(),u=s.length;a<u;a++)t.push(s[a]);if(this.sorter&&!this.sorter.isRandom())for(var c=0,l=this.sorter.getSortExpressions(),h=l.length;c<h;c++)for(var f=0,d=l[c].getExpression().getFunctions(),p=d.length;f<p;f++)t.push(d[c]);return t}},{key:"getIdentifiers",value:function(){for(var t=[],e=0,n=this.fields.length;e<n;e++)for(var r=0,i=this.fields[e].getExpression().getIdentifiers(),o=i.length;r<o;r++)t.push(i[r]);if(this.filter)for(var a=0,s=this.filter.getIdentifiers(),u=s.length;a<u;a++)t.push(s[a]);if(null!==this.sorter&&!this.sorter.isRandom())for(var c=0,l=this.sorter.getSortExpressions(),h=l.length;c<h;c++)for(var f=0,d=l[c].getExpression().getIdentifiers(),p=d.length;f<p;f++)t.push(d[f]);return t}}]),n}(te);function Ee(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Te=function(t){l()(n,t);var e=Ee(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"timer",void 0),r.timer="number"===typeof t.timer?t.timer:null,r}return a()(n,[{key:"getOpcodeType",value:function(){return y.i.DELAYED_OPTION}},{key:"getTimerValueInMilliseconds",value:function(){return this.timer}}]),n}(H);function Ne(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Re=function(t){l()(n,t);var e=Ne(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"name",void 0),v()(u()(r),"expression",void 0),r.name=t.name,r.expression=we.create(t.expression),r}return a()(n,[{key:"getOpcodeType",value:function(){return y.i.UPDATE_FIELD}},{key:"getFieldName",value:function(){return this.name}},{key:"getExpression",value:function(){return this.expression}}]),n}(H);function be(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Se=function(t){l()(n,t);var e=be(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"name",void 0),r.name=t.name,r}return a()(n,[{key:"getOpcodeType",value:function(){return y.i.TABLE}},{key:"getName",value:function(){return this.name}}]),n}(H),we=function(){function t(){i()(this,t)}return a()(t,null,[{key:"create",value:function(t){switch(t.op){case y.i.STATEMENT:switch(t.type){case y.p.SELECT:return new ve(t);case y.p.INSERT:return new fe(t);case y.p.UPDATE:return new ye(t);case y.p.DELETE:return new ne(t);default:throw new Error("Cannot create statement from token: "+JSON.stringify(t))}case y.i.TABLE:return new Se(t);case y.i.EXPRESSION:switch(t.type){case y.g.NUMBER:return new Mt(t);case y.g.BOOLEAN:return new Q(t);case y.g.NULL:return new kt;case y.g.STRING:return new Pt(t);case y.g.UNARY:switch(t.operator){case y.m.INVERT:return new Ht(t);case y.m.NOT:return new Gt(t);default:throw new Error("Cannot create unary expression from token: "+JSON.stringify(t))}case y.g.LOGICAL:switch(t.operator){case y.k.AND:return new nt(t);case y.k.OR:return new Tt(t);case y.j.EQUALS:return new at(t);case y.j.DIFFERENT:return new it(t);case y.j.GT:return new ut(t);case y.j.GTE:return new lt(t);case y.j.LT:return new vt(t);case y.j.LTE:return new yt(t);case y.j.LIKE:return new pt(t);case y.j.IN:return new ft(t);default:throw new Error("Cannot create logical expression from token: "+JSON.stringify(t))}case y.g.MATH:switch(t.operator){case y.l.ADDITION:return new St(t);case y.l.DIFFERENCE:return new Ot(t);case y.l.DIVISION:return new It(t);case y.l.MULTIPLY:return new Ct(t);default:throw new Error("Cannot create math expression from token: "+JSON.stringify(t))}case y.g.GROUP:return new z(t);case y.g.IDENTIFIER:return new $(t);case y.g.BINDING:return new Y(t);case y.g.FUNCTION_CALL:return new W(t);default:throw new Error("Unknown expression type: "+JSON.stringify(t))}case y.i.FIELDS_LIST:switch(t.type){case y.h.ALL_FIELDS:return new ue(t);case y.h.SPECIFIC_FIELDS:return new le(t);default:throw new Error("Invalid lexer token select fields type: "+JSON.stringify(t))}case y.i.FIELD:return new ie(t);case y.i.UPDATE_FIELD:return new Re(t);case y.i.DELAYED_OPTION:return new Te(t);case y.i.LIMIT_OPTION:return new Yt(t);case y.i.ORDER_BY_OPTION:switch(t.type){case y.n.RANDOM:return new $t(t);case y.n.ORDERED:return new zt(t);default:throw new Error("Invalid lexer token ORDER BY: "+JSON.stringify(t))}case y.i.ORDER_BY_EXPRESSION:return new Qt(t);default:throw new Error("Invalid lexer token opcode type: "+JSON.stringify(t.op))}}}]),t}(),Oe=function(){function t(){i()(this,t)}return a()(t,null,[{key:"assertJQLV1ConfigurationStructure",value:function(t){if(!T()(t,Object))throw new Error("Object expected!");if(void 0===t.controlId)throw new Error('Missing property "controlId"');if("string"!==typeof t.controlId)throw new Error('Property "controlId" type should be string');if(void 0===t.eventType)throw new Error('Missing property "eventType"');if("number"!==typeof t.eventType)throw new Error('Property "eventType" type should be number');if(!Array.isArray(t.actions))throw new Error('Missing property "actions"');if(void 0!==t.isRule&&"boolean"!==typeof t.isRule)throw new Error('Property "isRule" type should be boolean|undefined');for(var e=0,n=t.actions.length;e<n;e++)this.assertJQLV1EventActionStructure(t.actions[e])}},{key:"assertJQLV1EventActionStructure",value:function(t){if(!T()(t,Object))throw new Error("Action object expected!");if(void 0===t.controlId)throw new Error('Action property "controlId" type should be string');if("string"!==typeof t.controlId)throw new Error('Action property "controlId" should be string');if(void 0===t.jql)throw new Error('Action property "jql" should be string');if("string"!==typeof t.jql)throw new Error('Action property "jql" should be string')}}]),t}(),_e=n(142),Ie=n(308),De=function(){function t(e,n){i()(this,t),v()(this,"identifiers",[]),v()(this,"indexes",[]),v()(this,"remote",void 0),v()(this,"storageEngine",void 0),v()(this,"db",void 0),v()(this,"table",void 0),v()(this,"name",void 0),v()(this,"deferredTable",null),this.db=n,this.name=e.name,this.remote=e.storageEngine===y.f.REMOTE,this.storageEngine=e.storageEngine,this.computeIdentifiers(e.schema),this.computeIndexDescriptors(e.indexes)}return a()(t,[{key:"describe",value:function(){return this.identifiers}},{key:"hasIdentifier",value:function(t){for(var e=0,n=this.identifiers.length;e<n;e++)if(this.identifiers[e].name===t)return!0;return!1}},{key:"isRemote",value:function(){return this.remote}},{key:"fetch",value:function(){var t=this;return this.table||(this.isRemote()?this.table=new Promise((function(e,n){t.deferredTable=_e.a.createFromRemoteTableDefinition(t.describe(),t.indexes),e(t.deferredTable)})):this.table=new Promise((function(e,n){var r=-1!==t.name.indexOf("salesforcePrefill")?t.db.getAuthorizationTokenSalesforce():t.db.getAuthorizationToken(),i=b.create("fetch-table",r,{name:t.name,applicationConfig:btoa(t.db.getApplicationConfig())});S.a.makeRequest(-1!==t.name.indexOf("salesforcePrefill")?t.db.getRPCEndpointSalesforceName():t.db.getRPCEndpointName(),S.a.REQUEST_METHOD_POST,S.a.REQUEST_CONTENT_TYPE_X_WWW_FORM_URLENCODED,S.a.REQUEST_RESPONSE_TYPE_JSON,S.a.encodeData(i)).then((function(n){t.deferredTable=_e.a.createFromInMemoryArrayOfObjects(n,t.identifiers,t.indexes),e(t.deferredTable)})).catch((function(t){n(new Error(t))}))}))),this.table}},{key:"getStorageEngine",value:function(){return this.storageEngine}},{key:"computeIdentifiers",value:function(e){for(var n in e)e.hasOwnProperty(n)&&this.identifiers.push({name:n,type:t.castBackendDataTypeToFrontendDataType(e[n]),default:null})}},{key:"computeIndexDescriptors",value:function(t){if(t){if(!Array.isArray(t))throw new Error("Invalid argument: indexes: array expected!");for(var e=0,n=t.length;e<n;e++)this.indexes.push(t[e])}}},{key:"getIndexes",value:function(){if(this.deferredTable)return this.deferredTable.getIndexes();for(var t=[],e=0,n=(this.indexes||[]).length;e<n;e++)t.push(Ie.a.createFromIndexDescriptor(this,this.indexes[e]));return t}},{key:"alterIndexes",value:function(t){var e=this;return new Promise((function(n,r){e.db.alterTableIndexes(e.name,t).then((function(t){e.deferredTable=null,e.indexes=t.indexes,n(!0)})).catch((function(t){r(t)}))}))}},{key:"isIndexable",value:function(){return!this.deferredTable||this.deferredTable.isIndexable()}},{key:"isVirtual",value:function(){return!!this.deferredTable&&this.deferredTable.isVirtual()}},{key:"isTransactional",value:function(){return!this.deferredTable||this.deferredTable.isTransactional()}}],[{key:"castBackendDataTypeToFrontendDataType",value:function(t){switch(t){case y.b.BOOLEAN:return y.d.BOOLEAN;case y.b.FLOAT:case y.b.INT:return y.d.NUMBER;case y.b.STRING:return y.d.STRING;default:return y.d.NULL}}}]),t}();function Ce(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ae(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ce(Object(n),!0).forEach((function(e){v()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ke(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Le,Me,xe=function(t){l()(n,t);var e=ke(n);function n(){var t;return i()(this,n),t=e.call(this),v()(u()(t),"functions",{}),v()(u()(t),"tables",{}),v()(u()(t),"planner",void 0),v()(u()(t),"authorizationToken",void 0),v()(u()(t),"authorizationTokenSalesforce",void 0),v()(u()(t),"rpcEndpointName",void 0),v()(u()(t),"rpcEndpointSalesforceName",void 0),v()(u()(t),"bindingProviders",[]),v()(u()(t),"onSchemaChanged",void 0),v()(u()(t),"applicationConfig",void 0),t.onSchemaChanged=N.a.create((function(){t.trigger("schema-changed")}),100),t}return a()(n,[{key:"initPlanner",value:function(){return this.planner=new B(this),this}},{key:"withAuthorizationToken",value:function(t){return this.authorizationToken=t,this}},{key:"getAuthorizationToken",value:function(){return this.authorizationToken}},{key:"withApplicationConfig",value:function(t){return this.applicationConfig=t,this}},{key:"getApplicationConfig",value:function(){return this.applicationConfig}},{key:"withAuthorizationTokenSalesforce",value:function(t){return this.authorizationTokenSalesforce=t,this}},{key:"getAuthorizationTokenSalesforce",value:function(){return this.authorizationTokenSalesforce}},{key:"withRPCEndpointName",value:function(t){return this.rpcEndpointName=t,this}},{key:"getRPCEndpointName",value:function(){return this.rpcEndpointName}},{key:"withRPCEndpointSalesforceName",value:function(t){return this.rpcEndpointSalesforceName=t,this}},{key:"getRPCEndpointSalesforceName",value:function(){return this.rpcEndpointSalesforceName}},{key:"isValidIdentifierName",value:function(t){return"string"===typeof t&&/^[a-zA-Z$_][a-zA-Z0-9_$]+$/.test(t)}},{key:"withFunction",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this.isValidIdentifierName(t))throw new Error(JSON.stringify(t)+" is not a valid function name!");if(t=t.toLowerCase(),S.a.isReservedKeyword(t))throw new Error(JSON.stringify(t)+" is a reserved keyword and cannot be used as a function name!");if(void 0!==this.functions[t])throw new Error("Function "+JSON.stringify(t)+" already registered in database!");return this.functions[t]={func:e,local:n,remote:r},this}},{key:"hasLocalFunction",value:function(t){return!("string"!==typeof t||(t=t.toLowerCase(),void 0===this.functions[t]||!this.functions.hasOwnProperty(t)||!this.functions[t].local))}},{key:"hasRemoteFunction",value:function(t){return!("string"!==typeof t||(t=t.toLowerCase(),void 0===this.functions[t]||!this.functions.hasOwnProperty(t)||!this.functions[t].remote))}},{key:"callFunction",value:function(t,e){if(this.hasLocalFunction(t))return this.functions[t.toLowerCase()].func.apply(this,e);throw new Error("Failed to call function "+JSON.stringify(t)+": Function not defined!")}},{key:"getFunction",value:function(t){if(this.hasLocalFunction(t))return this.functions[t].func;throw new Error("Failed to get function "+JSON.stringify(t)+": Function not defined!")}},{key:"withTable",value:function(t,e){if(!this.isValidTableName(t))throw new Error(JSON.stringify(t)+" is not a valid table name!");if(void 0!==this.tables[t])throw new Error("Table "+JSON.stringify(t)+" already created!");return this.tables[t]=e,this.onSchemaChanged(),this}},{key:"isValidTableName",value:function(t){return"string"===typeof t&&/^[a-zA-Z0-9_\-$]+$/.test(t)}},{key:"withTablesList",value:function(t){for(var e=0,n=t.length;e<n;e++)this.withTable(t[e].name,new De(t[e],this));return this.onSchemaChanged(),this}},{key:"hasTable",value:function(t){return"string"===typeof t&&void 0!==this.tables[t]&&this.tables.hasOwnProperty(t)}},{key:"enumerateTables",value:function(){var t=[];for(var e in this.tables)this.tables.hasOwnProperty(e)&&t.push({name:e,instance:this.tables[e]});return t}},{key:"getTable",value:function(t){if(this.hasTable(t))return this.tables[t];throw new Error("Table "+JSON.stringify(t)+" does not exist!")}},{key:"createStatement",value:function(t){if(!t||"string"!==typeof t)throw new Error("Invalid argument: statement: string expected!");if(!window.JQLGrammar)throw new Error("Cannot load JQLGrammar library!");var e=we.create(window.JQLGrammar.parse(t)),n=e.getTable();if(n){if(!this.hasTable(n.getName()))throw new Error("Failed to create statement: Table "+JSON.stringify(n.getName())+" does not exist!");for(var r=this.getTable(n.getName()),i=e.getIdentifiers(),o=0,a=i.length;o<a;o++)if(!r.hasIdentifier(i[o].getIdentifierName()))throw new Error("Unknown table identifier "+JSON.stringify(i[o].getIdentifierName()));if(r.isRemote()!==e.isRemote()){if(!e.isRemote())throw new Error("REMOTE statement clause is mandatory on encrypted tables");if(e.isRemote()&&r.isVirtual())throw new Error("REMOTE statements are not possible on virtual tables");if(r.isRemote()&&!e.isRemote())throw new Error("ENCRYPTED tables require remote statements")}}else if(e.getIdentifiers().length)throw new Error("A statement which does not affect a table cannot have identifiers!");for(var s=e.getFunctions(),u=0,c=s.length;u<c;u++){var l=s[u].getFunctionName();if(!e.isRemote()&&!this.hasLocalFunction(l)||e.isRemote()&&!this.hasRemoteFunction(l))throw new Error("Failed to create statement: Function "+JSON.stringify(s[u].getFunctionName())+" is not declared!");s[u].withDatabase(this)}return e}},{key:"executeStatement",value:function(t,e){try{return this.planner.scheduleStatement(t,this.createExecutionStrategy(t,e))}catch(n){return Promise.reject(n)}}},{key:"createExecutionStrategy",value:function(t,e){if(t.isRemote())return new M(t,this,e);switch(t.getStatementType()){case y.p.SELECT:return new x(t,this,e);case y.p.INSERT:return new I(t,this,e);case y.p.UPDATE:return new P(t,this,e);case y.p.DELETE:return new _(t,this,e);default:throw new Error("Failed to create execution strategy: Uknown statement type!")}}},{key:"createTableFromCSVFile",value:function(t){var e=this,n=new FormData;return n.append("action","create-table-from-csv"),n.append("auth",this.authorizationToken),n.append("csvFile",t.csvFile||""),n.append("setting",btoa(JSON.stringify({table:{name:t.tableName,namespace:t.tableNamespace,accessMode:t.tableAccessMode,storageEngine:t.tableStorageEngine},csvParser:{enclosure:S.a.parseString(t.csvFieldEnclosure),encloseAllFields:t.csvEncloseAllFields,delimiter:S.a.parseString(t.csvFieldDelimiter),escapeCharacter:S.a.parseString(t.csvEscapeCharacter),autoTrim:t.csvAutoTrim,lineTerminator:S.a.parseString(t.csvLineTerminator)}}))),new Promise((function(t,r){e.makePostRequest(n).then((function(n){e.withTablesList([n]),t(n)})).catch((function(t){r(new Error(t))}))}))}},{key:"dropTable",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.hasTable(t))return Promise.reject(new Error("Table '".concat(t,"' does not exist!")));var r=b.create("drop-table",this.authorizationToken,Ae({name:t},n));return new Promise((function(n,i){e.makePostRequest(r).then((function(r){delete e.tables[t],e.onSchemaChanged(),n(r)})).catch((function(t){i(new Error(t))}))}))}},{key:"unmountTable",value:function(t){if(!this.hasTable(t))throw new Error("Failed to unmount table "+JSON.stringify(t)+": Table not found!");delete this.tables[t]}},{key:"alterTableIndexes",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.hasTable(t))return Promise.reject(new Error("Table '".concat(t,"' does not exist!")));var i=b.create("alter-table-indexes",this.authorizationToken,Ae({name:t,indexes:btoa(JSON.stringify(e||null))},r));return new Promise((function(t,e){n.makePostRequest(i).then((function(e){t(e),n.onSchemaChanged()})).catch((function(t){e(new Error(t))}))}))}},{key:"autoBind",value:function(t,e){for(var n=0,r=this.bindingProviders.length;n<r;n++)if(this.bindingProviders[n].canBind(t))return e.bind(this.bindingProviders[n].getBindedValue(t)),!0;return!1}},{key:"withAutoBindingProvider",value:function(t){return this.bindingProviders.push(t),this}},{key:"getJQLFormConfiguration",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=b.create("fetch-form-events",this.authorizationToken,Ae({},e));return new Promise((function(e,r){t.makePostRequest(n).then((function(t){e(t)})).catch((function(t){r(new Error(t))}))}))}},{key:"saveJQLFormConfiguration",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(!Array.isArray(t))throw new Error("Array of IJQLv1FormEventConfiguration expected");for(var r=0,i=t.length;r<i;r++)Oe.assertJQLV1ConfigurationStructure(t[r]);for(var o=JSON.parse(JSON.stringify(t)),a=0,s=t.length;a<s;a++)for(var u=0,c=t[a].actions.length;u<c;u++)o[a].actions[u].statement=window.JQLGrammar.parse(t[a].actions[u].jql);var l=b.create("save-jql-configuration",this.authorizationToken,Ae({configuration:btoa(JSON.stringify(o))},n));return new Promise((function(n,r){e.makePostRequest(l).then((function(){n(t)})).catch((function(t){r(new Error(t))}))}))}catch(h){return Promise.reject(h)}}},{key:"deleteAllAssociatedSettingsAndAllTables",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var n=b.create("delete-jql-configuration-and-associated-tables",this.authorizationToken,Ae({},e));return new Promise((function(e,r){t.makePostRequest(n).then((function(t){e(t)})).catch((function(t){r(new Error(t))}))}))}catch(r){return Promise.reject(r)}}},{key:"downloadTableAsCSV",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.hasTable(t))return Promise.reject(new Error("Table '".concat(t,"' does not exist!")));var r=b.create("export-table",this.authorizationToken,Ae({name:t},n));return new Promise((function(t,n){e.makePostRequest(r).then((function(e){t(e)})).catch((function(t){n(new Error(t))}))}))}},{key:"makePostRequest",value:function(t){return S.a.makeRequest(this.rpcEndpointName,S.a.REQUEST_METHOD_POST,T()(t,FormData)?S.a.REQUEST_CONTENT_TYPE_MULTIPART:S.a.REQUEST_CONTENT_TYPE_X_WWW_FORM_URLENCODED,S.a.REQUEST_RESPONSE_TYPE_JSON,T()(t,FormData)?t:S.a.encodeData(t))}},{key:"triggerNextQuery",value:function(){this.planner.next()}}]),n}(m.a);!function(t){t[t.BY_SETTING_THE_VALUE_ATTRIBUTE=0]="BY_SETTING_THE_VALUE_ATTRIBUTE",t[t.BY_SETTING_THE_CHECKED_ATTRIBUTE=1]="BY_SETTING_THE_CHECKED_ATTRIBUTE",t[t.BY_SETTING_OPTIONS_AND_THEN_VALUE=2]="BY_SETTING_OPTIONS_AND_THEN_VALUE",t[t.BY_CUSTOM_PLUGIN_WHICH_CAN_FAIL=3]="BY_CUSTOM_PLUGIN_WHICH_CAN_FAIL",t[t.BY_USING_PROPRIETARY_DOM_ABSTRACTION_LAYER_METHOD=4]="BY_USING_PROPRIETARY_DOM_ABSTRACTION_LAYER_METHOD"}(Le||(Le={})),function(t){t[t.LEGACY_EDITOR=0]="LEGACY_EDITOR",t[t.LATEST_EDITOR_VERSION=1]="LATEST_EDITOR_VERSION",t[t.LEGACY_SALESFORCE_EDITOR=2]="LEGACY_SALESFORCE_EDITOR",t[t.LATEST_SALESFORCE_EDITOR_VERSION=3]="LATEST_SALESFORCE_EDITOR_VERSION"}(Me||(Me={}));var Pe=n(38),Fe=n.n(Pe),Ue=n(67);function Be(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var He,Ve=function(t){l()(n,t);var e=Be(n);function n(t,r){var o,a;return i()(this,n),o=e.call(this),v()(u()(o),"jq",void 0),v()(u()(o),"controls",[]),v()(u()(o),"formRules",void 0),o.jq=t,o.formRules=r,o.initializeControlMappings(),o.initializeNativeDOMEventsBridge(),(a=u()(o)).on("initialize-platform-specific-tasks",(function(t){setTimeout((function(){a.initializePlatformSpecificTasks(t)}),500)})),setTimeout((function(){for(var t=0,e=a.controls.length;t<e;t++)a.formRules.getLogger().log('Trigger "control-event" EFormRuleEventType.INIT for',a.controls[t].controlId),a.trigger("control-event",y.a.INIT,a.controls[t].domNode,a.controls[t].controlId)}),100),setTimeout((function(){var t;if(null!==a.formRules.getPreviouslySubmittedFormData())for(var e=0,n=a.controls.length;e<n;e++)t=a.formRules.getSubmissionValueForControlId(a.controls[e].controlId),a.formRules.getLogger().log('Trigger "control-event" EFormRuleEventType.REINITIALIZE for',a.controls[e].controlId,"with value: ",JSON.stringify(t)),a.trigger("control-event",y.a.REINITIALIZE,a.controls[e].domNode,a.controls[e].controlId,t)}),110),setTimeout((function(){a.formRules.getLogger().log("Enabling user interface"),Ue.a.onInterfaceEnabled()}),500),o}return a()(n,[{key:"clearControlsCache",value:function(){}},{key:"getControlValueById",value:function(t){var e,n,r=this.getControlById(t);if(null!==r)switch(n=r.nodeName.toLowerCase()){case"label":case"span":e=this.jq(r).text();break;default:e=this.jq(r).val()}else n="NULL";return this.formRules.getLogger().log("getControlValueById("+t+", "+n+" ) => ",JSON.stringify(e)),e}},{key:"castAnyToString",value:function(t){switch(Fe()(t)){case"string":return t;case"boolean":return t?"1":"0";case"number":return isFinite(t)?String(t):"0";default:return null===t?"":T()(t,Array)?this.castAnyToString(String(t.join("\t"))||""):String(JSON.stringify(t))}}},{key:"setupTextarea",value:function(t,e){var n=[];if(e)if("string"===typeof e)e&&(n=[String(e)]);else if(e&&T()(e,Array))for(var r=0,i=e.length;r<i;r++)if(e[r]){var o=this.castAnyToString(e[r]);o&&n.push(o)}t.value=n.join("\n")}},{key:"setupDropdown",value:function(t,e){var n,r,i=[];if(e)if("string"===typeof e)e&&(i=[String(e)]);else if(e&&T()(e,Array))for(var o=0,a=e.length;o<a;o++)if(e[o]){var s=this.castAnyToString(e[o]);s&&i.push(s)}for(;t.options.length;)t.remove(0);for(var u=0,c=i.length;u<c;u++)n=document.createElement("option"),r=i[u].split("\t"),n.text=r[0],n.value=r[1]||r[0],t.add(n);t.selectedIndex=i.length?0:-1,this.jq(t).parent().find(".select2-container > a > span:nth-child(1)").text(String(i[0]||"").split("\t")[0])}},{key:"setControlValueById",value:function(t,e){var r=this.getControlById(t);if(null!==r){var i,o=r.nodeName.toLowerCase();switch(o){case"input":switch(i=r.getAttribute("type")){case"checkbox":case"radio":r.checked=n.castAnyToCheckboxOrRadioValue(e),this.formRules.getLogger().log("setControlValueById("+t+" <"+i+">, "+JSON.stringify(n.castAnyToCheckboxOrRadioValue(e)));break;default:r.value=this.castAnyToString(e),this.reinitializeControlThirdPartyPluginsAfterItsValueHasBeenUpdated(r),this.formRules.getLogger().log("setControlValueById("+t+" <"+i+">, "+JSON.stringify(e))}break;case"textarea":this.setupTextarea(r,e),this.formRules.getLogger().log("setControlValueById("+t+" <"+o+">, "+JSON.stringify(e));break;case"select":this.setupDropdown(r,e),this.formRules.getLogger().log("setControlValueById("+t+" <"+o+">, "+JSON.stringify(e));break;case"label":case"span":this.formRules.getLogger().log("setControlValueById("+t+" <"+o+">, "+JSON.stringify(e)+": IGNORED");break;default:console.warn("AbstractionLayer: I don't know how to set the value for a input of type "+JSON.stringify(o))}}else this.formRules.getLogger().log("setControlValueById("+t+"): control not found!")}},{key:"getControlById",value:function(t){for(var e=String(t),n=0,r=this.controls.length;n<r;n++)if(this.controls[n].controlId===e)return this.controls[n].domNode;return null}},{key:"controlExistsInForm",value:function(t){var e=String(t);if(t){for(var n=0,r=this.controls.length;n<r;n++)if(e===this.controls[n].controlId)return!0;return!1}return!1}},{key:"isControl",value:function(t){return function(e,n){switch(t.nodeName.toLowerCase()){case"label":case"span":return n(t).closest(".uberfieldlat").hasClass("uberfieldlat");default:return!0}}(0,this.jq)}},{key:"initializeControlMappings",value:function(){var t;t=this,(0,this.jq)("form#mainform123 [id^=id123-control], form#mainform123 #id123-button-send, form#mainform123 [id^=id123-title]").each((function(){t.isControl(this)&&t.controls.push({controlId:n.getControlIdFromDOMNode(this),domNode:this})}))}},{key:"initializeNativeDOMEventsBridge",value:function(){var t;t=this,(0,this.jq)("form#mainform123").on("click","input[type=radio], input[type=checkbox]",(function(){t.trigger("control-event",this.checked?y.a.CHECK:y.a.UNCHECK,this,n.getControlIdFromDOMNode(this))})).on("change","select, input[type=text], input[type=number],input[type=email], input[type=password], textarea",(function(){t.trigger("control-event",y.a.CHANGE,this,n.getControlIdFromDOMNode(this))})).on("input","input:not([type=radio]):not([type=checkbox])",(function(){t.trigger("control-event",y.a.TEXT_INPUT,this,n.getControlIdFromDOMNode(this))}))}},{key:"getControlUpdateValueStrategy",value:function(t){var e=this.getControlById(t);if(null===e)return null;switch(e.nodeName.toLowerCase()){case"input":switch(e.getAttribute("type")){case"checkbox":case"radio":return Le.BY_SETTING_THE_CHECKED_ATTRIBUTE;default:return Le.BY_SETTING_THE_VALUE_ATTRIBUTE}case"textarea":return Le.BY_SETTING_THE_VALUE_ATTRIBUTE;case"select":return Le.BY_SETTING_OPTIONS_AND_THEN_VALUE;default:return Le.BY_CUSTOM_PLUGIN_WHICH_CAN_FAIL}}},{key:"initializeControlValueWhenTheFormIsPrefillingASubmission",value:function(t,e){var r,i=this.getControlUpdateValueStrategy(t);if(null!==i&&null!==e&&void 0!==e)switch(r=this.getControlById(t),i){case Le.BY_SETTING_THE_CHECKED_ATTRIBUTE:r.checked=n.castAnyToCheckboxOrRadioValue(e);break;case Le.BY_SETTING_THE_VALUE_ATTRIBUTE:r.value=String(e||"")||"";break;case Le.BY_SETTING_OPTIONS_AND_THEN_VALUE:this.setupDropdown(r,String(e||"")||""),r.selectedIndex=0;break;case Le.BY_USING_PROPRIETARY_DOM_ABSTRACTION_LAYER_METHOD:console.warn("DOMAbstractionLayer v1: Proprietary dom setters are not implemented by this abstraction layer");break;case Le.BY_CUSTOM_PLUGIN_WHICH_CAN_FAIL:}}},{key:"getControls",value:function(){return this.controls}},{key:"getJQuery",value:function(){return this.jq}},{key:"reinitializeControlThirdPartyPluginsAfterItsValueHasBeenUpdated",value:function(t){try{"datepicker"==t.dataset.toggle&&this.jq(t).datepicker("update",t.value)}catch(e){}}},{key:"initializePlatformSpecificTasks",value:function(t){if(t&&t.nextPreviewFormData)for(var e=function(e){return t.nextPreviewFormData[e||""]||null},n=this.getControls(),r=this.jq,i=0,o=n.length;i<o;i++)if(null!==e(n[i].controlId)&&""!=e(n[i].controlId)){var a=n[i].domNode;if("SELECT"==a.tagName){for(var s=r(a),u=0,c=s[0].options.length;u<c;u++)s[0].options[u].selected=s[0].options[u].value==e(n[i].controlId);-1!==a.className.indexOf("js-dropdown-searchable")?s.select2():s.trigger("change")}}}},{key:"getCurrentLanguage",value:function(){return"en"}}],[{key:"castAnyToCheckboxOrRadioValue",value:function(t){switch(!0){case"yes"===t:case!0===t:return!0;case"no"===t:case 0===t:return!1;default:return!!t}}},{key:"getControlIdFromDOMNode",value:function(t){return"id123-button-send"===t.id?"submit":String(t.id||t.name||"").replace(/^(id123-)?(control|title)/g,"").replace(/[^\d]+/g,"_")||null}}]),n}(m.a),Ge=n(9),je=n(255),Ye=n(187),qe=function(){function t(e,n){i()(this,t),v()(this,"dataGrid",void 0),v()(this,"rootDOMNode",void 0),v()(this,"gutterNumberDOMNode",void 0),v()(this,"height",28),v()(this,"rowData",void 0),v()(this,"cells",[]),v()(this,"rowIndex",void 0),v()(this,"selected",!1),v()(this,"selectedCellIndex",void 0),this.dataGrid=e,this.rootDOMNode=document.createElement("div"),this.rootDOMNode.setAttribute("data-role","row"),this.gutterNumberDOMNode=document.createElement("div"),this.gutterNumberDOMNode.setAttribute("data-role","gutter-number"),this.rootDOMNode.style.height=this.height+"px",this.gutterNumberDOMNode.style.height=this.height+"px",this.rowData=n||[],this.initCells()}return a()(t,[{key:"getRootDOMNode",value:function(){return this.rootDOMNode}},{key:"getGutterNumberDOMNode",value:function(){return this.gutterNumberDOMNode}},{key:"getHeight",value:function(){return this.height}},{key:"withHeight",value:function(t){return(t=~~t||0)<0&&(t=0),this.height=t,this.rootDOMNode.style.height=t+"px",this.gutterNumberDOMNode.style.height=t+"px",this.dataGrid.updateClientHeightDelayed(),this}},{key:"initCells",value:function(){for(var t=0,e=this.dataGrid.getColumns(),n=e.length;t<n;t++){var r=document.createElement("div");r.setAttribute("data-role","cell"),r.setAttribute("data-index",String(t)),r.innerHTML=e[t].renderValue(void 0===this.rowData[t]?null:this.rowData[t]),this.rootDOMNode.appendChild(r),this.cells.push(r)}}},{key:"getRowIndex",value:function(){return this.rowIndex}},{key:"withRowIndex",value:function(t){return null===t?(this.rowIndex=null,this.gutterNumberDOMNode.innerHTML=""):(t=~~t,this.rowIndex=t,this.gutterNumberDOMNode.appendChild(document.createElement("span")).textContent=String(this.rowIndex)),this}},{key:"getCells",value:function(){return this.cells}},{key:"getSelectedState",value:function(){return this.selected}},{key:"withSelectedState",value:function(t){return this.selected=!!t,this.selected?(this.rootDOMNode.setAttribute("data-selected",""),this.gutterNumberDOMNode.setAttribute("data-selected",""),this.dataGrid.getCollection()&&this.dataGrid.getCollection().setSelectedRowIndex(~~this.rootDOMNode.getAttribute("data-index"))):(this.rootDOMNode.removeAttribute("data-selected"),this.gutterNumberDOMNode.removeAttribute("data-selected"),null!==this.selectedCellIndex&&void 0!==this.selectedCellIndex&&this.withSelectedCellIndex(null)),this}},{key:"getSelectedCellIndex",value:function(){return null===this.selectedCellIndex||void 0===this.selectedCellIndex?null:this.selectedCellIndex}},{key:"withSelectedCellIndex",value:function(t){if(null===t||void 0===t)this.selectedCellIndex=void 0;else{if((t=~~t)<0)throw new Error("Invalid index!");if(t>=this.cells.length)throw new Error("Invalid index!");this.selectedCellIndex=t}for(var e=0,n=this.cells.length;e<n;e++)e===this.selectedCellIndex?this.cells[e].setAttribute("data-selected",""):this.cells[e].hasAttribute("data-selected")&&this.cells[e].removeAttribute("data-selected");return this}},{key:"getDataAt",value:function(t){return this.rowData[t]||null}},{key:"setDataAt",value:function(t,e){this.rowData[t]=e,this.cells[t].innerHTML=this.dataGrid.getColumns()[t].renderValue(void 0===this.rowData[t]?null:this.rowData[t])}}]),t}(),Qe=function(){function t(){i()(this,t)}return a()(t,null,[{key:"renderBooleanValue",value:function(t){return t&&"0"!==t?'<span data-type="boolean">true</span>':null===t?'<span data-type="null">NULL</span>':'<span data-type="boolean">false</span>'}},{key:"renderNumericValue",value:function(t){return null!==t&&!isNaN(t)&&isFinite(t)?'<span data-type="number">'+String(t)+"</span>":null===t?'<span data-type="null">NULL</span>':'<span data-type="number">NaN</span>'}},{key:"renderStringValue",value:function(t){return t||0===t?(this.htmlescaper.textContent=String(t||""),'<span data-type="string">'+this.htmlescaper.innerHTML+"</span>"):null===t?'<span data-type="null">NULL</span>':'<span data-type="string"></span>'}},{key:"renderUnknownDataTypeValue",value:function(t){switch(Fe()(t)){case"number":return this.renderNumericValue(t);case"string":return isNaN(Number(t))?this.renderStringValue(t):this.renderNumericValue(t);case"boolean":return this.renderBooleanValue(t);default:return this.renderStringValue(t)}}}]),t}();v()(Qe,"htmlescaper",document.createElement("div")),function(t){t[t.NONE=0]="NONE",t[t.ASCENDING=1]="ASCENDING",t[t.DESCENDING=2]="DESCENDING"}(He||(He={}));var Je=function(){function t(e){i()(this,t),v()(this,"name",void 0),v()(this,"caption",void 0),v()(this,"width",100),v()(this,"columnType",void 0),v()(this,"rootDOMNode",void 0),v()(this,"captionDOMNode",void 0),v()(this,"dataGrid",void 0),v()(this,"resizerDOMNode",void 0),v()(this,"sortModeDecoration",void 0),v()(this,"sortDirection",void 0),v()(this,"valueRenderer",void 0),v()(this,"editable",void 0),this.dataGrid=e,this.rootDOMNode=document.createElement("div"),this.rootDOMNode.setAttribute("data-role","column"),this.captionDOMNode=document.createElement("span"),this.captionDOMNode.setAttribute("data-role","caption"),this.sortModeDecoration=document.createElement("div"),this.sortModeDecoration.setAttribute("data-role","sort-direction-indicator"),this.rootDOMNode.appendChild(this.captionDOMNode),this.rootDOMNode.appendChild(this.sortModeDecoration),this.rootDOMNode.style.width=this.width+"px",this.resizerDOMNode=document.createElement("div"),this.resizerDOMNode.setAttribute("data-role","column-resizer")}return a()(t,[{key:"getRootDOMNode",value:function(){return this.rootDOMNode}},{key:"getResizerDOMNode",value:function(){return this.resizerDOMNode}},{key:"getColumnName",value:function(){return this.name}},{key:"withColumnName",value:function(t){return this.name=String(t||""),this.rootDOMNode.setAttribute("data-name",String(t||"")),this.onNameOrCaptionChanged(),this}},{key:"withColumnCaption",value:function(t){return this.caption=t,this.onNameOrCaptionChanged(),this}},{key:"getColumnType",value:function(){return this.columnType}},{key:"withColumnType",value:function(t){return this.columnType=t,this}},{key:"onNameOrCaptionChanged",value:function(){this.captionDOMNode.textContent=this.rootDOMNode.title=String(this.caption||this.name)}},{key:"getWidth",value:function(){return this.width}},{key:"withWidth",value:function(t){return(t=~~t||0)<5&&(t=5),this.width=t,this.rootDOMNode.style.width=this.width+"px",this.dataGrid.updateClientWidth(),this}},{key:"getSortDirection",value:function(){return this.sortDirection}},{key:"withSortDirection",value:function(t){switch(t){case He.ASCENDING:this.sortDirection=t,this.rootDOMNode.setAttribute("data-sort-direction","ascending");break;case He.DESCENDING:this.sortDirection=t,this.rootDOMNode.setAttribute("data-sort-direction","descending");break;case He.NONE:default:this.sortDirection=He.NONE,this.rootDOMNode.removeAttribute("data-sort-direction")}}},{key:"withValueRenderer",value:function(t){return this.valueRenderer=t||null,this}},{key:"renderValue",value:function(t,e){if(this.valueRenderer)return this.valueRenderer(t,e);switch(this.columnType){case Ge.e.BOOLEAN:return Qe.renderBooleanValue(t);case Ge.e.NUMBER:return Qe.renderNumericValue(t);case Ge.e.STRING:return Qe.renderStringValue(t);case Ge.e.UNKNOWN:default:return Qe.renderUnknownDataTypeValue(t)}}},{key:"isEditable",value:function(){return this.editable}},{key:"withEditable",value:function(t){return this.editable=!!t,this}}]),t}();function We(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Ke=function(t){l()(n,t);var e=We(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"row",void 0),v()(u()(r),"cell",void 0),v()(u()(r),"columnIndex",void 0),v()(u()(r),"column",void 0),v()(u()(r),"dataGrid",void 0),v()(u()(r),"editInput",void 0),v()(u()(r),"previousCellHTML",void 0),r.dataGrid=t,r}return a()(n,[{key:"getRow",value:function(){return this.row||null}},{key:"getColumnIndex",value:function(){return this.columnIndex||0===this.columnIndex?this.columnIndex:null}},{key:"getColumn",value:function(){return this.column||null}},{key:"getCell",value:function(){return this.cell||null}},{key:"cancelEditing",value:function(){this.isEditing()&&(this.row=void 0,this.cell.innerHTML=this.previousCellHTML,this.cell=void 0,this.column=void 0,this.editInput=void 0)}},{key:"doneEditing",value:function(){if(this.isEditing()){var t;switch(this.column.getColumnType()){case Ge.e.BOOLEAN:t=this.editInput.checked;break;case Ge.e.NUMBER:t=parseFloat(this.editInput.value),(isNaN(t)||null===t)&&(t=null);break;default:t=this.editInput.value}var e=this.row.getDataAt(this.columnIndex),n=this.columnIndex,r=this.row;this.cancelEditing(),e!==t&&(r.setDataAt(n,t),this.dataGrid.onRowUpdated(r,n,t,e))}}},{key:"editCell",value:function(t){var e=this;this.isEditing()&&this.doneEditing(),t&&null!==t.columnIndex&&(this.row=this.dataGrid.getRows()[t.rowIndex]||null,this.row&&(this.columnIndex=t.columnIndex,this.column=this.dataGrid.getColumns()[t.columnIndex]||null,this.column&&this.column.isEditable()&&(this.cell=this.row.getCells()[t.columnIndex]||null,this.cell&&(this.previousCellHTML=this.cell.innerHTML,this.cell.innerHTML="",this.editInput=this.createEditorInput(this.column.getColumnType(),this.row.getDataAt(this.columnIndex)),this.cell.appendChild(this.editInput),setTimeout((function(){e.editInput.focus();try{e.editInput.select()}catch(t){}}),10),this.editInput.onblur=function(){e.doneEditing()}))))}},{key:"isEditing",value:function(){return!!this.cell&&!!this.row&&!!this.column}},{key:"createEditorInput",value:function(t,e){var n;switch(t){case Ge.e.BOOLEAN:(n=document.createElement("input")).setAttribute("type","checkbox"),n.checked=this.castToBoolean(e);break;case Ge.e.NUMBER:(n=document.createElement("input")).setAttribute("type","number"),n.value=this.castToNumber(e);break;case Ge.e.STRING:case Ge.e.UNKNOWN:default:(n=document.createElement("input")).setAttribute("type","text"),n.value=this.castToString(e)}return n.setAttribute("data-role","editor"),n}},{key:"castToBoolean",value:function(t){return"0"!==t&&!!~~t}},{key:"castToNumber",value:function(t){return null===t||isNaN(t)||!isFinite(t)?"":String(t)}},{key:"castToString",value:function(t){return t?String(t):""}}]),n}(m.a);function ze(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Xe=function(t){l()(n,t);var e=ze(n);function n(t){var r;return i()(this,n),r=e.call(this),v()(u()(r),"jq",void 0),v()(u()(r),"uniqueGridId",void 0),v()(u()(r),"internalStyleDOMNode",void 0),v()(u()(r),"columns",[]),v()(u()(r),"rows",[]),v()(u()(r),"rootDOMNode",void 0),v()(u()(r),"headerDOMNode",void 0),v()(u()(r),"selectAllColumnsDOMNode",void 0),v()(u()(r),"bodyDOMNode",void 0),v()(u()(r),"gutterDOMNode",void 0),v()(u()(r),"footerDOMNode",void 0),v()(u()(r),"clientDOMNode",void 0),v()(u()(r),"clientWidth",0),v()(u()(r),"clientHeight",0),v()(u()(r),"clientScrollTop",0),v()(u()(r),"clientScrollLeft",0),v()(u()(r),"sortable",!1),v()(u()(r),"selectedRowIndex",void 0),v()(u()(r),"collection",void 0),v()(u()(r),"editor",void 0),v()(u()(r),"emptyStateHTMLDOMNode",void 0),v()(u()(r),"updateClientHeightDelayed",void 0),v()(u()(r),"renderInternalCssDelayed",void 0),n.styleId++,r.uniqueGridId=n.styleId,r.jq=t,r.rootDOMNode=document.createElement("div"),r.rootDOMNode.setAttribute("data-role","data-grid"),r.rootDOMNode.setAttribute("data-grid-uid",String(r.uniqueGridId)),r.rootDOMNode.appendChild(r.internalStyleDOMNode=document.createElement("style")),r.headerDOMNode=r.rootDOMNode.appendChild(document.createElement("div")),r.headerDOMNode.setAttribute("data-role","header"),r.selectAllColumnsDOMNode=r.headerDOMNode.appendChild(document.createElement("div")),r.selectAllColumnsDOMNode.setAttribute("data-role","select-all-columns"),r.gutterDOMNode=r.rootDOMNode.appendChild(document.createElement("div")),r.gutterDOMNode.setAttribute("data-role","gutter"),r.bodyDOMNode=r.rootDOMNode.appendChild(document.createElement("div")),r.bodyDOMNode.setAttribute("data-role","body"),r.clientDOMNode=r.bodyDOMNode.appendChild(document.createElement("div")),r.clientDOMNode.setAttribute("data-role","client"),r.clientDOMNode.setAttribute("data-allow-keyboard",""),r.clientDOMNode.tabIndex=0,r.footerDOMNode=r.rootDOMNode.appendChild(document.createElement("div")),r.footerDOMNode.setAttribute("data-role","footer"),r.emptyStateHTMLDOMNode=document.createElement("div"),r.emptyStateHTMLDOMNode.setAttribute("data-role","empty-state"),r.bodyDOMNode.appendChild(r.emptyStateHTMLDOMNode),r.updateClientHeightDelayed=N.a.create((function(){r.updateClientHeight()}),100),r.renderInternalCssDelayed=N.a.create((function(){r.renderInternalCSS()}),1),r.editor=new Ke(u()(r)),r.init(),r}return a()(n,[{key:"getSelectedIndex",value:function(){for(var t=0,e=this.rows.length;t<e;t++)if(this.rows[t].getSelectedState())return t;return-1}},{key:"getRootDOMNode",value:function(){return this.rootDOMNode}},{key:"createColumn",value:function(){var t=new Je(this);return this.columns.push(t),this.headerDOMNode.appendChild(t.getRootDOMNode()),this.headerDOMNode.appendChild(t.getResizerDOMNode()),this.updateClientWidth(),this.renderInternalCssDelayed(),t}},{key:"createRow",value:function(t){var e=new qe(this,t),n=this.rows.length;return e.getRootDOMNode().setAttribute("data-index",String(n)),e.getGutterNumberDOMNode().setAttribute("data-index",String(n)),this.rows.push(e),this.clientDOMNode.appendChild(e.getRootDOMNode()),this.gutterDOMNode.appendChild(e.getGutterNumberDOMNode()),this.updateClientHeightDelayed(),e}},{key:"getClientWidth",value:function(){return this.clientWidth}},{key:"withClientWidth",value:function(t){return(t=~~t||0)<0&&(t=0),this.clientWidth=t,this.clientDOMNode.style.width=t+"px",this}},{key:"getClientHeight",value:function(){return this.clientHeight}},{key:"withClientHeight",value:function(t){return(t=~~t||0)<0&&(t=0),this.clientHeight=t,this.clientDOMNode.style.height=t+"px",this}},{key:"updateClientWidth",value:function(){for(var t=0,e=0,n=this.columns.length;e<n;e++)t+=this.columns[e].getWidth();this.withClientWidth(t),this.renderInternalCSS()}},{key:"updateClientHeight",value:function(){for(var t=0,e=0,n=this.rows.length;e<n;e++)t+=this.rows[e].getHeight();this.withClientHeight(t)}},{key:"getClientScrollTop",value:function(){return this.clientScrollTop}},{key:"withClientScrollTop",value:function(t){return(t=~~t||0)<0&&(t=0),this.clientScrollTop=t,this.bodyDOMNode.scrollTop=this.clientScrollTop,this.renderInternalCSS(),this}},{key:"getClientScrollLeft",value:function(){return this.clientScrollLeft}},{key:"withClientScrollLeft",value:function(t){return(t=~~t||0)<0&&(t=0),this.clientScrollLeft=t,this.bodyDOMNode.scrollLeft=this.clientScrollLeft,this.renderInternalCSS(),this}},{key:"isSortingEnabled",value:function(){return this.sortable}},{key:"withSortingEnabled",value:function(t){if(this.sortable=!!t,!this.sortable)for(var e=0,n=this.columns.length;e<n;e++)this.columns[e].withSortDirection(He.NONE);return this}},{key:"clearRows",value:function(){for(;this.rows.length;){var t=this.rows.shift();this.clientDOMNode.removeChild(t.getRootDOMNode()),this.gutterDOMNode.removeChild(t.getGutterNumberDOMNode())}this.withClientHeight(0),this.withClientScrollTop(0)}},{key:"dispose",value:function(){for(this.emptyStateHTMLDOMNode.innerHTML="",this.rootDOMNode.removeAttribute("data-num-rows");this.columns.length;){var t=this.columns.shift();this.headerDOMNode.removeChild(t.getRootDOMNode()),this.headerDOMNode.removeChild(t.getResizerDOMNode())}this.clearRows(),this.withClientWidth(0),this.withClientScrollLeft(0),this.updateClientWidth()}},{key:"init",value:function(){var t,e;(t=this.jq)((e=this).bodyDOMNode).on("scroll",(function(t){e.withClientScrollLeft(this.scrollLeft),e.withClientScrollTop(this.scrollTop)})),t(e.headerDOMNode).on("mousedown","[data-role=column-resizer]",(function(t){for(var n,r=0,i=e.columns.length;r<i;r++)if(e.columns[r].getResizerDOMNode()===this){n=e.columns[r];break}if(n){var o=n.getWidth(),a=t.clientX,s=function(t){var e=t.clientX-a;n.withWidth(o+e)};document.body.addEventListener("mousemove",s,!0),document.body.addEventListener("mouseup",(function t(e){document.body.removeEventListener("mousemove",s,!0),document.body.removeEventListener("mouseup",t,!0)}),!0)}})).on("click","[data-role=column] > [data-role=caption]",(function(t){if(e.sortable){for(var n,r=this.parentNode,i=0,o=e.columns.length;i<o;i++)e.columns[i].getRootDOMNode()===r?n=e.columns[i]:e.columns[i].getSortDirection()!==He.NONE&&e.columns[i].withSortDirection(He.NONE);if(n){switch(n.getSortDirection()){case He.ASCENDING:case He.NONE:default:n.withSortDirection(He.DESCENDING);break;case He.DESCENDING:n.withSortDirection(He.ASCENDING)}e.onColumnSorted(n)}}})),t(e.gutterDOMNode).on("mousedown","> [data-role=gutter-number]",(function(){if(!this.hasAttribute("data-selected")){var n=~~this.getAttribute("data-index");t(e.clientDOMNode).find("> [data-role=row][data-selected]").each((function(){e.rows[~~this.getAttribute("data-index")].withSelectedState(!1)})),e.rows[n].withSelectedState(!0),setTimeout((function(){e.clientDOMNode.focus()}),100)}})),t(e.clientDOMNode).on("mousedown","> [data-role=row]",(function(){if(!this.hasAttribute("data-selected")){var n=~~this.getAttribute("data-index");t(e.clientDOMNode).find("> [data-role=row][data-selected]").each((function(){e.rows[~~this.getAttribute("data-index")].withSelectedState(!1)})),e.rows[n].withSelectedState(!0)}})).on("mousedown","> [data-role=row] > [data-role=cell]",(function(){var t=~~this.getAttribute("data-index"),n=~~this.parentNode.getAttribute("data-index");e.rows[n].withSelectedCellIndex(t)})).on("dblclick","> [data-role=row] > [data-role=cell]",(function(){e.editor.isEditing()||e.editor.editCell(e.getActiveCellCoordinates())})),e.clientDOMNode.addEventListener("keydown",(function(t){var n=t.keyCode||t.charCode,r=t.srcElement||t.target,i=!1;if(r&&-1===["input","select","textarea"].indexOf(r.nodeName.toLowerCase()))switch(n){case 37:e.editor.isEditing()||(i=!0,e.focusPreviousSiblingCell());break;case 39:e.editor.isEditing()||(i=!0,e.focusNextSiblingCell());break;case 38:e.editor.isEditing()||(i=!0,e.focusPreviousRowCell());break;case 40:e.editor.isEditing()||(i=!0,e.focusNextRowCell());break;case 36:e.editor.isEditing()||(i=!0,e.focusFirstColumnCell());break;case 35:e.editor.isEditing()||(i=!0,e.focusLastColumnCell());break;case 33:e.editor.isEditing()||(i=!0,e.focusPageUpCell());break;case 34:e.editor.isEditing()||(i=!0,e.focusPageDownCell());break;case 9:e.editor.isEditing()?(e.editor.doneEditing(),t.shiftKey?e.focusPreviousCell():e.focusNextCell(),e.editor.editCell(e.getActiveCellCoordinates()),i=!0):(i=!0,t.shiftKey?e.focusPreviousCell():e.focusNextCell());break;case 13:e.editor.isEditing()||(e.editor.editCell(e.getActiveCellCoordinates()),i=!0);break;case 27:e.editor.isEditing()&&(e.editor.cancelEditing(),setTimeout((function(){e.clientDOMNode.focus()}),10),i=!0)}else 27===n&&e.editor.isEditing()&&(e.editor.cancelEditing(),setTimeout((function(){e.clientDOMNode.focus()}),10),i=!0),13===n&&e.editor.isEditing()&&(e.editor.doneEditing(),setTimeout((function(){e.clientDOMNode.focus()}),10),i=!0),9===n&&(e.editor.isEditing()?(e.editor.doneEditing(),t.shiftKey?e.focusPreviousCell():e.focusNextCell(),e.editor.editCell(e.getActiveCellCoordinates()),i=!0):(i=!0,t.shiftKey?e.focusPreviousCell():e.focusNextCell(),setTimeout((function(){e.clientDOMNode.focus()}),10)));i&&(t.stopPropagation(),t.preventDefault())}),!0)}},{key:"renderInternalCSS",value:function(){for(var t="",e=0,n=this.columns.length;e<n;e++)t+='\n                [data-role=data-grid][data-grid-uid="'.concat(this.uniqueGridId,'"] > [data-role=body] > [data-role=client] > [data-role=row] > [data-role=cell]:nth-child(').concat(e+1,") {\n                    width: ").concat(this.columns[e].getWidth(),"px\n                }\n            ");this.internalStyleDOMNode.textContent='\n\n            [data-role=data-grid][data-grid-uid="'.concat(this.uniqueGridId,'"] > [data-role=gutter] > [data-role=gutter-number]:first-child {\n                margin-top: -').concat(this.clientScrollTop,'px;\n            }\n\n            [data-role=data-grid][data-grid-uid="').concat(this.uniqueGridId,'"] > [data-role=header] > [data-role=select-all-columns] + [data-role=column] {\n                margin-left: -').concat(this.clientScrollLeft,"px;\n            }\n\n        ")+t}},{key:"getColumns",value:function(){return this.columns}},{key:"withCollection",value:function(t){var e=this;if(this.dispose(),this.collection&&this.collection.dispose(),this.collection=t||null,!this.collection)return this.rootDOMNode.removeAttribute("data-has-footer"),void(this.footerDOMNode.innerHTML="");this.rootDOMNode.setAttribute("data-has-footer",""),this.footerDOMNode.innerHTML=this.collection.getGridFooterHTMLMarkup();for(var n=t.getColumnDescriptors(),r=n.length,i=0;i<r;i++)this.createColumn().withColumnType(n[i].type).withColumnName(n[i].name).withColumnCaption(n[i].caption).withEditable(n[i].editable);return setTimeout((function(){e.collection.setPage(1).fail((function(t){console.error(t)}))}),10),this.collection.onCollectionEmbedded(this.footerDOMNode),this.collection.on("change",(function(){e.clearRows();for(var t=0,n=e.collection.getNumberOfItemsOnCurrentPage();t<n;t++)e.createRow(e.collection.getRowAt(t)).withRowIndex(e.collection.getFirstRowOffsetStart()+t)})),this.collection.on("insert-row",(function(t){for(var n=e.createRow(t),r=0,i=e.rows.length;r<i;r++)e.rows[r]===n?e.rows[r].withSelectedState(!0):e.rows[r].getSelectedState()&&e.rows[r].withSelectedState(!1);e.maintainFocusCellViewportPosition()})),this.collection.on("commit-row",(function(t){e.rows[t].withRowIndex(e.collection.getFirstRowOffsetStart()+t)})),this}},{key:"withEmptyStateHTML",value:function(t){return this.emptyStateHTMLDOMNode.innerHTML=String(t||""),this}},{key:"getCollection",value:function(){return this.collection||null}},{key:"onColumnSorted",value:function(t){this.collection&&this.collection.setSortedColumn(t.getColumnName(),t.getSortDirection())}},{key:"getActiveCellCoordinates",value:function(){for(var t=0,e=0,n=0,r=this.rows.length;n<r;n++){if(this.rows[n].getSelectedState()){for(var i=0,o=Math.min(this.columns.length-1,~~this.rows[n].getSelectedCellIndex());i<o;i++)e+=this.columns[i].getWidth();return{rowIndex:n,columnIndex:this.rows[n].getSelectedCellIndex(),top:t,left:e}}t+=this.rows[n].getHeight()}return null}},{key:"focusPreviousSiblingCell",value:function(){var t=this.getActiveCellCoordinates();t&&0!==t.columnIndex&&(this.rows[t.rowIndex].withSelectedCellIndex(null===t.columnIndex?0:t.columnIndex-1),this.maintainFocusCellViewportPosition())}},{key:"focusNextSiblingCell",value:function(){var t=this.getActiveCellCoordinates();t&&t.columnIndex!==this.columns.length-1&&(this.rows[t.rowIndex].withSelectedCellIndex(null===t.columnIndex?0:t.columnIndex+1),this.maintainFocusCellViewportPosition())}},{key:"focusPreviousRowCell",value:function(){var t=this.getActiveCellCoordinates();t&&0!==t.rowIndex&&null!==t.columnIndex&&(this.rows[t.rowIndex].withSelectedState(!1),this.rows[t.rowIndex].withSelectedCellIndex(null),t.rowIndex--,this.rows[t.rowIndex].withSelectedState(!0),this.rows[t.rowIndex].withSelectedCellIndex(t.columnIndex),this.maintainFocusCellViewportPosition())}},{key:"focusNextRowCell",value:function(){var t=this.getActiveCellCoordinates();if(t&&t.rowIndex!==this.rows.length-1&&null!==t.columnIndex){this.clientDOMNode.offsetHeight;this.rows[t.rowIndex].withSelectedState(!1),this.rows[t.rowIndex].withSelectedCellIndex(null),t.rowIndex++,this.rows[t.rowIndex].withSelectedState(!0),this.rows[t.rowIndex].withSelectedCellIndex(t.columnIndex),this.maintainFocusCellViewportPosition()}}},{key:"focusFirstColumnCell",value:function(){var t=this.getActiveCellCoordinates();t&&0!==t.columnIndex&&(this.rows[t.rowIndex].withSelectedCellIndex(0),this.maintainFocusCellViewportPosition())}},{key:"focusLastColumnCell",value:function(){var t=this.getActiveCellCoordinates();t&&t.columnIndex!==this.columns.length-1&&(this.rows[t.rowIndex].withSelectedCellIndex(this.columns.length-1),this.maintainFocusCellViewportPosition())}},{key:"focusPageUpCell",value:function(){var t=this.getActiveCellCoordinates();if(t&&0!==t.rowIndex&&null!==t.columnIndex){var e=this.clientDOMNode.offsetHeight;for(this.rows[t.rowIndex].withSelectedState(!1),this.rows[t.rowIndex].withSelectedCellIndex(null);t.rowIndex>0&&e>0;)e-=this.rows[t.rowIndex].getHeight(),t.rowIndex--;this.rows[t.rowIndex].withSelectedState(!0),this.rows[t.rowIndex].withSelectedCellIndex(t.columnIndex),this.maintainFocusCellViewportPosition()}}},{key:"focusPageDownCell",value:function(){var t=this.getActiveCellCoordinates();if(t&&t.rowIndex!==this.rows.length-1&&null!==t.columnIndex){var e=this.clientDOMNode.offsetHeight;for(this.rows[t.rowIndex].withSelectedState(!1),this.rows[t.rowIndex].withSelectedCellIndex(null);t.rowIndex<this.rows.length-1&&e>0;)e-=this.rows[t.rowIndex].getHeight(),t.rowIndex++;this.rows[t.rowIndex].withSelectedState(!0),this.rows[t.rowIndex].withSelectedCellIndex(t.columnIndex),this.maintainFocusCellViewportPosition()}}},{key:"focusNextCell",value:function(){var t=this.getActiveCellCoordinates();t&&(null!==t.columnIndex?t.columnIndex<this.columns.length-1?this.focusNextSiblingCell():(this.rows[t.rowIndex].withSelectedState(!1),this.rows[t.rowIndex].withSelectedCellIndex(null),t.rowIndex++,t.rowIndex>=this.rows.length&&(t.rowIndex=0),t.columnIndex=0,this.rows[t.rowIndex].withSelectedState(!0),this.rows[t.rowIndex].withSelectedCellIndex(t.columnIndex),this.maintainFocusCellViewportPosition()):this.focusNextSiblingCell())}},{key:"focusPreviousCell",value:function(){var t=this.getActiveCellCoordinates();t&&(null!==t.columnIndex?t.columnIndex>0?this.focusPreviousSiblingCell():(this.rows[t.rowIndex].withSelectedState(!1),this.rows[t.rowIndex].withSelectedCellIndex(null),t.rowIndex--,t.rowIndex<0&&(t.rowIndex=this.rows.length-1),t.columnIndex=this.columns.length-1,this.rows[t.rowIndex].withSelectedState(!0),this.rows[t.rowIndex].withSelectedCellIndex(t.columnIndex),this.maintainFocusCellViewportPosition()):this.focusPreviousSiblingCell())}},{key:"maintainFocusCellViewportPosition",value:function(){var t=this.getActiveCellCoordinates();if(t){var e=this.rows[t.rowIndex].getRootDOMNode(),n=e.offsetTop;if(n<this.bodyDOMNode.scrollTop)this.bodyDOMNode.scrollTop=n;else{var r=e.offsetHeight,i=this.bodyDOMNode.offsetHeight-20;this.bodyDOMNode.scrollTop+i<n+r&&(this.bodyDOMNode.scrollTop=n+r-i)}if(null!==t.columnIndex){var o=this.rows[t.rowIndex].getCells()[t.columnIndex],a=o.offsetLeft;if(a<this.bodyDOMNode.scrollLeft)this.bodyDOMNode.scrollLeft=a;else{var s=o.offsetWidth,u=this.bodyDOMNode.offsetWidth-20;this.bodyDOMNode.scrollLeft+u<a+s&&(this.bodyDOMNode.scrollLeft=a+s-u)}}}}},{key:"getRows",value:function(){return this.rows}},{key:"onRowUpdated",value:function(t,e,n,r){if(this.trigger("row-updated",t,e,n,r),this.collection){for(var i=null,o=0,a=this.rows.length;o<a;o++)if(this.rows[o]===t){i=o;break}this.collection.updateRow(i,e,n).then((function(){})).fail((function(n){t.setDataAt(e,r),console.error(n)}))}}}]),n}(m.a);v()(Xe,"styleId",0);var $e=n(141),Ze=n(28);function tn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}function en(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var nn=function(t){l()(n,t);var e=en(n);function n(t,r,o){var a;return i()(this,n),a=e.call(this),v()(u()(a),"numberOfPages",0),v()(u()(a),"numberOfItemsPerPage",14),v()(u()(a),"rows",[]),v()(u()(a),"currentPage",null),v()(u()(a),"jq",void 0),v()(u()(a),"tableName",void 0),v()(u()(a),"database",void 0),v()(u()(a),"sortColumnName",void 0),v()(u()(a),"sortColumnDirection",void 0),v()(u()(a),"embeddedRootNode",void 0),v()(u()(a),"rowOffsetStart",0),v()(u()(a),"selectedRowIndex",void 0),v()(u()(a),"newRows",[]),a.jq=t,a.tableName=r,a.database=o,"controls"===a.tableName&&(a.numberOfItemsPerPage=99999),a}return a()(n,[{key:"getNumberOfPages",value:function(){return this.numberOfPages}},{key:"getNumberOfItemsPerPage",value:function(){return this.numberOfItemsPerPage}},{key:"getColumnDescriptors",value:function(){for(var t=this.database.getTable(this.tableName).describe(),e=[],r=0,i=t.length;r<i;r++)e.push({caption:t[r].name,name:t[r].name,type:n.convertJQLColumnTypeToGridColumnType(t[r].type),editable:!0});return e}},{key:"getCurrentPageNumber",value:function(){return this.currentPage}},{key:"setPage",value:function(t){return e=this,this.jq.Deferred((function(n){var r=e.getUncomittedRows();try{var i=e.database.createStatement(e.computePageFetchSQL(t,e.numberOfItemsPerPage,e.sortColumnName,e.sortColumnDirection));e.database.executeStatement(i).then((function(n){e.setSelectedRowIndex(null),e.onNumberOfPagesChanged(e.computeNumberOfPages(n.getCalcFoundRows())),e.rowOffsetStart=(t-1)*e.numberOfItemsPerPage+1,e.onCurrentPageChanged(t),e.rows=[];for(var i=0,o=n.getRowsAsArray(),a=o.length;i<a;i++)e.rows.push(o[i]);e.newRows=[];for(var s=0,u=r.length;s<u;s++)e.rows.push(r[s]),e.newRows.push(e.rows.length-1);e.trigger("change")})).catch((function(t){n.reject(t)}))}catch(o){n.reject(o)}})).promise();var e}},{key:"getNumberOfItemsOnCurrentPage",value:function(){return this.rows.length}},{key:"getRowAt",value:function(t){return JSON.parse(JSON.stringify(this.rows[t]))}},{key:"setSortedColumn",value:function(t,e){return this.sortColumnName=t,this.sortColumnDirection=e,this.setPage(this.currentPage)}},{key:"getGridFooterHTMLMarkup",value:function(){return'\n            <button data-role="previous-page"><span class="i-md i123-arrow_left"></span></button>\n            <label data-role="current-page"><span>Page: </span><input type="number" name="current-page" value="1" min="1" max="1" /></label>\n            <label data-role="total-pages"><span>of&nbsp;</span><span data-role="total-pages">0</span></label>\n            <button data-role="next-page"><span class="i-md i123-arrow_right"></span></button>\n            <span style="width: 20px"></span>\n            <button data-role="refresh" title="Refresh"><span class="i-md i123-refresh"></span></button>\n            <span style="width: 20px"></span>\n            <button data-role="insert-row" title="Insert row"><span class="i-md i123-add"></span></button>\n            <button data-role="delete-current-row" disabled title="Delete row"><span class="i-md i123-delete"></span></button>\n        '}},{key:"onCollectionEmbedded",value:function(t){var e,n;e=this.jq,(n=this).embeddedRootNode=t,e(t).find("input[name=current-page]").on("change",(function(){var t=~~this.value;t>=1&&t<=n.getNumberOfPages()?n.setPage(t):this.value=n.getCurrentPageNumber()})),e(t).find("button[data-role=previous-page]").on("click",(function(){n.getCurrentPageNumber()<=1||n.setPage(n.getCurrentPageNumber()-1)})),e(t).find("button[data-role=next-page]").on("click",(function(){n.getCurrentPageNumber()>=n.getNumberOfPages()||n.setPage(n.getCurrentPageNumber()+1)})),e(t).find("button[data-role=delete-current-row]").on("click",(function(){null!==n.selectedRowIndex&&n.deleteRow(n.selectedRowIndex)})),e(t).find("button[data-role=insert-row]").on("click",(function(){var t=n.createRow();n.rows.push(t),n.newRows.push(n.rows.length-1),n.trigger("insert-row",t)})),e(t).find("button[data-role=refresh]").on("click",(function(){n.setPage(n.getCurrentPageNumber())}))}},{key:"dispose",value:function(){this.events=void 0}},{key:"computePageFetchSQL",value:function(t,e,n,r){var i="";return this.database.getTable(this.tableName).isVirtual()||"session"===this.tableName||(i+="REMOTE "),i+="SELECT SQL_CALC_FOUND_ROWS * FROM "+this.tableName,!n||r!==He.DESCENDING&&r!==He.ASCENDING||(i+=" ORDER BY "+n,this.sortColumnDirection==He.ASCENDING?i+=" ASC":i+=" DESC"),i+=" LIMIT "+(t-1)*e+","+e,console.warn(i),i}},{key:"computeNumberOfPages",value:function(t){return t%this.numberOfItemsPerPage===0?~~(t/this.numberOfItemsPerPage):1+~~(t/this.numberOfItemsPerPage)}},{key:"onNumberOfPagesChanged",value:function(t){var e,n;this.numberOfPages=t,(e=this.jq)((n=this).embeddedRootNode).find("span[data-role=total-pages]").each((function(){this.textContent=String(t)})),e(n.embeddedRootNode).find("input[name=current-page]").attr("max",String(t))}},{key:"getFirstRowOffsetStart",value:function(){return this.rowOffsetStart}},{key:"onCurrentPageChanged",value:function(t){this.currentPage=t,(0,this.jq)(this.embeddedRootNode).find("input[name=current-page]").each((function(){this.value!=t&&(this.value=t)}))}},{key:"updateRow",value:function(t,e,n){return function(r,i){if(i.isUncommitedRow(t))return i.rows[t][e]=n,i.attemptToInsertRow(t),r.Deferred((function(t){t.resolve(!0)}));try{var o=i.database.getTable(i.tableName),a=o.describe(),s=[],u="";o.isVirtual()||"session"===i.tableName||(u+="REMOTE "),u+="UPDATE "+i.tableName+" SET `"+a[e].name+"` = :____new_value____ WHERE ";for(var c={____new_value____:n},l=0,h=a.length;l<h;l++)a[e].name!=a[l].name&&(null!==i.castBinding(i.rows[t][l],a[l].type)?(s.push("`"+a[l].name+"` = :"+a[l].name),c[a[l].name]=i.castBinding(i.rows[t][l],a[l].type)):s.push("`"+a[l].name+"` IS NULL"));u+=s.join(" AND "),u+=" LIMIT 1";var f=i.database.createStatement(u);return console.warn(u),r.Deferred((function(r){i.database.executeStatement(f,c).then((function(o){1===o.getAffectedRows()?(i.rows[t][e]=n,r.resolve(!0)):r.reject(new Error("No rows affected!"))})).catch((function(t){r.reject(t)}))}))}catch(d){return r.Deferred((function(t){t.reject(d)}))}}(this.jq,this)}},{key:"setSelectedRowIndex",value:function(t){this.selectedRowIndex=0===t?0:t||null,function(t,e,n){t(e).find("button[data-role=delete-current-row]").each((function(){this.disabled=null===n}))}(this.jq,this.embeddedRootNode,this.selectedRowIndex)}},{key:"deleteRow",value:function(t){return function(e,n){if(n.isUncommitedRow(t))return n.deleteUncommitedRow(t),n.setPage(n.getCurrentPageNumber());try{var r=n.database.getTable(n.tableName).describe(),i="";"session"!==n.tableName&&(i+="REMOTE "),i+="DELETE FROM "+n.tableName+" WHERE ";for(var o={},a=0,s=r.length;a<s;a++)null!==n.castBinding(n.rows[t][a],r[a].type)?(i+=(a>0?" AND ":"")+"`"+r[a].name+"` = :"+r[a].name,o[r[a].name]=n.castBinding(n.rows[t][a],r[a].type)):i+=(a>0?" AND ":"")+"`"+r[a].name+"` IS NULL";i+=" LIMIT 1";var u=n.database.createStatement(i);return console.warn(i),e.Deferred((function(t){n.database.executeStatement(u,o).then((function(e){1===e.getAffectedRows()?(n.setPage(n.getCurrentPageNumber()),t.resolve(!0)):t.reject(new Error("No rows affected!"))})).catch((function(e){t.reject(e)}))}))}catch(c){return console.error(c),e.Deferred((function(t){t.reject(c)}))}}(this.jq,this)}},{key:"castBinding",value:function(t,e){switch(e){case y.d.BOOLEAN:return null===t?null:"0"!==t&&!!~~t;case y.d.NUMBER:if(null===t)return null;var n=parseFloat(String(t));return!isNaN(n)&&isFinite(n)?n:null;default:return t}}},{key:"createRow",value:function(){for(var t=[],e=this.database.getTable(this.tableName).describe(),n=0,r=e.length;n<r;n++)switch(e[n].type){case y.d.BOOLEAN:t.push(!1);break;case y.d.STRING:t.push("");break;case y.d.NUMBER:t.push(0);break;default:case y.d.NULL:t.push(null)}return t}},{key:"isUncommitedRow",value:function(t){return this.newRows.indexOf(t)>-1}},{key:"deleteUncommitedRow",value:function(t){this.rows.splice(t,1);for(var e=0,n=this.newRows.length;e<n;e++)if(this.newRows[e]===t){this.newRows.splice(e,1);break}for(var r=0,i=this.newRows.length;r<i;r++)if(this.newRows[r]>t){this.newRows[r]--;break}}},{key:"markRowAsComitted",value:function(t){for(var e=0,n=this.newRows.length;e<n;e++)if(this.newRows[e]===t){this.newRows.splice(e,1);break}this.trigger("commit-row",t)}},{key:"getUncomittedRows",value:function(){for(var t=[],e=0,n=this.newRows.length;e<n;e++)t.push(this.rows[this.newRows[e]]);return t}},{key:"attemptToInsertRow",value:function(t){return function(e,n){if(!n.isUncommitedRow(t))return e.Deferred((function(t){t.reject(new Error("Row is already in comitted state!"))})).promise();try{var r=n.database.getTable(n.tableName).describe(),i="";i+="REMOTE ",i+="INSERT INTO "+n.tableName+" SET ";for(var o={},a=0,s=r.length;a<s;a++)null!==n.castBinding(n.rows[t][a],r[a].type)?(i+=(a>0?" , ":"")+"`"+r[a].name+"` = :"+r[a].name,o[r[a].name]=n.castBinding(n.rows[t][a],r[a].type)):i+=(a>0?" , ":"")+"`"+r[a].name+"` = NULL";var u=n.database.createStatement(i);return console.warn(i),e.Deferred((function(e){n.database.executeStatement(u,o).then((function(r){n.markRowAsComitted(t),e.resolve(!0)})).catch((function(t){e.reject(t)}))}))}catch(c){return e.Deferred((function(t){t.reject(c)}))}}(this.jq,this)}}],[{key:"convertJQLColumnTypeToGridColumnType",value:function(t){switch(t){case y.d.STRING:return Ge.e.STRING;case y.d.NUMBER:return Ge.e.NUMBER;case y.d.BOOLEAN:return Ge.e.BOOLEAN;case y.d.NULL:default:return Ge.e.UNKNOWN}}}]),n}(function(t){l()(n,t);var e=tn(n);function n(){return i()(this,n),e.apply(this,arguments)}return n}(m.a));function rn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var on=function(t){l()(n,t);var e=rn(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"getGridFooterHTMLMarkup",value:function(){return'\n            <button data-role="previous-page"><span class="i-md i123-arrow_left"></span></button>\n            <label data-role="current-page"><span>Page: </span><input type="number" name="current-page" value="1" min="1" max="1" /></label>\n            <label data-role="total-pages"><span>of&nbsp;</span><span data-role="total-pages">0</span></label>\n            <button data-role="next-page"><span class="i-md i123-arrow_right"></span></button>\n        '}}]),n}(nn),an=function(){function t(e){var n=this;i()(this,t),v()(this,"uniqueId",void 0),v()(this,"rootDOMNode",void 0),v()(this,"controlsDOMNode",void 0),v()(this,"eventsDOMNode",void 0),v()(this,"controlId",null),v()(this,"eventTypeId",null),v()(this,"index",null),v()(this,"selected",!1),v()(this,"formControlsList",void 0),v()(this,"actions",[]),t.UID++,this.uniqueId=t.UID,this.rootDOMNode=document.createElement("div"),this.rootDOMNode.setAttribute("data-role","rule"),this.controlsDOMNode=document.createElement("select"),this.controlsDOMNode.setAttribute("data-role","control"),this.rootDOMNode.appendChild(this.controlsDOMNode),this.eventsDOMNode=document.createElement("select"),this.eventsDOMNode.setAttribute("data-role","event"),this.formControlsList=e,this.initFormControlsList(),this.controlsDOMNode.onchange=function(){n.controlId=""===n.controlsDOMNode.value?null:n.controlsDOMNode.value,n.initEventsDOMNodeDropdown(n.controlsDOMNode.value),n.onErrorStateChanged()},this.eventsDOMNode.onchange=function(){n.eventTypeId=""===n.eventsDOMNode.value?null:parseInt(n.eventsDOMNode.value),n.onErrorStateChanged()},this.initEventsDOMNodeDropdown(this.eventsDOMNode.value),this.rootDOMNode.appendChild(this.eventsDOMNode),this.rootDOMNode.setAttribute("data-rule-uid",String(this.uniqueId)),this.onErrorStateChanged()}return a()(t,[{key:"getControlId",value:function(){return this.controlId}},{key:"withControlId",value:function(t){if(this.controlId=t||null,!this.controlId)return this.controlsDOMNode.value="",this;for(var e=-1,n=0,r=this.formControlsList.length;n<r;n++)if(this.formControlsList[n].id===t){e=n;break}if(-1===e&&"control_0"!==t){var i=document.createElement("option");i.value=t,i.text="DELETED "+this.controlId,this.controlsDOMNode.add(i)}return this.controlsDOMNode.value=this.controlId,this.initEventsDOMNodeDropdown(this.controlsDOMNode.value),this.onErrorStateChanged(),this}},{key:"getEventTypeId",value:function(){return this.eventTypeId}},{key:"withEventTypeId",value:function(t){return this.eventTypeId=t,this.eventsDOMNode.value=null===t?"":String(t),this.onErrorStateChanged(),this}},{key:"getRootDOMNode",value:function(){return this.rootDOMNode}},{key:"initEventsDOMNodeDropdown",value:function(t){for(var e=this.eventsDOMNode.value;this.eventsDOMNode.options.length;)this.eventsDOMNode.remove(0);var n=document.createElement("option");n.value="",n.text="[Select]",this.eventsDOMNode.add(n),"control_0"!==t?((n=document.createElement("option")).value=JSON.stringify(y.a.ALL_EVENTS),n.text="* Any",this.eventsDOMNode.add(n),(n=document.createElement("option")).value=JSON.stringify(y.a.INIT),n.text="Initialized",this.eventsDOMNode.add(n),(n=document.createElement("option")).value=JSON.stringify(y.a.CHANGE),n.text="Changed",this.eventsDOMNode.add(n),(n=document.createElement("option")).value=JSON.stringify(y.a.CHECK),n.text="Checked",this.eventsDOMNode.add(n),(n=document.createElement("option")).value=JSON.stringify(y.a.UNCHECK),n.text="Unchecked",this.eventsDOMNode.add(n),(n=document.createElement("option")).value=JSON.stringify(y.a.TEXT_INPUT),n.text="Edited",this.eventsDOMNode.add(n),(n=document.createElement("option")).value=JSON.stringify(y.a.INIT),n.text="Initialized",(n=document.createElement("option")).value=JSON.stringify(y.a.REINITIALIZE),n.text="Reloaded",this.eventsDOMNode.add(n)):((n=document.createElement("option")).value=JSON.stringify(y.a.SUBMITTED),n.text="Submitted",this.eventsDOMNode.add(n),(n=document.createElement("option")).value=JSON.stringify(y.a.APPROVED),n.text="Approved",this.eventsDOMNode.add(n)),this.eventsDOMNode.value=e,-1===this.eventsDOMNode.selectedIndex&&(this.eventsDOMNode.selectedIndex=0)}},{key:"initFormControlsList",value:function(){for(;this.controlsDOMNode.options.length;)this.controlsDOMNode.remove(0);var t=document.createElement("option");t.value="",t.text="[Select]",this.controlsDOMNode.add(t),(t=document.createElement("option")).value="control_0",t.text="[This Form]",this.controlsDOMNode.add(t);for(var e=0,n=this.formControlsList.length;e<n;e++)(t=document.createElement("option")).value=this.formControlsList[e].id,t.text=this.formControlsList[e].name,this.controlsDOMNode.add(t)}},{key:"isSelected",value:function(){return this.selected}},{key:"setSelected",value:function(t){this.selected=!!t,this.selected?this.rootDOMNode.setAttribute("data-selected",""):this.rootDOMNode.removeAttribute("data-selected")}},{key:"getUniqueId",value:function(){return this.uniqueId}},{key:"addAction",value:function(t){return this.actions.push(t),t.withParentRule(this),t}},{key:"deleteAction",value:function(t){for(var e=0,n=this.actions.length;e<n;e++)if(this.actions[e]===t)return this.actions.splice(e,1)[0];return null}},{key:"getActions",value:function(){return this.actions.slice(0)}},{key:"getActionByUniqueId",value:function(t){for(var e=0,n=this.actions.length;e<n;e++)if(this.actions[e].getUniqueId()===t)return this.actions[e];return null}},{key:"onErrorStateChanged",value:function(){if(this.controlId&&null!==this.eventTypeId){for(var t=0,e=this.actions.length;t<e;t++)if(this.actions[t].getRootDOMNode().hasAttribute("data-has-errors"))return void this.rootDOMNode.setAttribute("data-has-errors","");this.rootDOMNode.removeAttribute("data-has-errors")}else this.rootDOMNode.setAttribute("data-has-errors","")}},{key:"getSelectedAction",value:function(){for(var t=0,e=this.actions.length;t<e;t++)if(this.actions[t].isActive())return this.actions[t];return null}},{key:"setSelectedAction",value:function(t){for(var e=0,n=this.actions.length;e<n;e++)this.actions[e]===t?this.actions[e].setActive(!0):this.actions[e].isActive()&&this.actions[e].setActive(!1)}},{key:"moveActionUp",value:function(t){var e=null;if(!(this.actions.length<2)){for(var n=0,r=this.actions.length;n<r;n++)if(this.actions[n]===t){e=n;break}if(0!==e&&null!==e){this.actions.splice(e,1);var i=t.getRootDOMNode().previousSibling;t.getRootDOMNode().parentNode.removeChild(t.getRootDOMNode()),this.actions.splice(e-1,0,t),i.parentNode.insertBefore(t.getRootDOMNode(),i)}}}},{key:"moveActionDown",value:function(t){var e=null;if(!(this.actions.length<2)){for(var n=0,r=this.actions.length;n<r;n++)if(this.actions[n]===t){e=n;break}if(e!==this.actions.length-1&&null!==e){this.actions.splice(e,1);var i=t.getRootDOMNode().nextSibling;t.getRootDOMNode().parentNode.removeChild(t.getRootDOMNode()),this.actions.splice(e+1,0,t),i.parentNode.insertBefore(t.getRootDOMNode(),i.nextSibling)}}}}]),t}();v()(an,"UID",0);var sn=function(){function t(e,n,r,o){var a=this;i()(this,t),v()(this,"uniqueId",void 0),v()(this,"rootDOMNode",void 0),v()(this,"actionTypeDOMNode",void 0),v()(this,"formControlsList",void 0),v()(this,"targetControlDOMNode",void 0),v()(this,"sqlTextEditor",void 0),v()(this,"sql",""),v()(this,"db",void 0),v()(this,"errorDOMNode",void 0),v()(this,"error",null),v()(this,"statement",null),v()(this,"toolbarDOMNode",void 0),v()(this,"jq",void 0),v()(this,"carretCharIndex",0),v()(this,"carretLineIndex",0),v()(this,"commandDispatcher",void 0),v()(this,"onCursorPositionChangedThrottled",void 0),v()(this,"editorInited",!1),v()(this,"parentRule",void 0),v()(this,"active",!1),this.db=n,this.jq=r,this.commandDispatcher=o,t.UID++,this.uniqueId=t.UID,this.rootDOMNode=document.createElement("div"),this.rootDOMNode.setAttribute("data-role","action"),this.rootDOMNode.setAttribute("data-action-uid",String(this.uniqueId)),this.actionTypeDOMNode=document.createElement("select"),this.actionTypeDOMNode.setAttribute("data-role","action-type"),this.rootDOMNode.appendChild(this.actionTypeDOMNode),this.formControlsList=e,this.targetControlDOMNode=document.createElement("select"),this.targetControlDOMNode.setAttribute("data-role","target-control"),this.rootDOMNode.appendChild(this.targetControlDOMNode),this.toolbarDOMNode=document.createElement("div"),this.toolbarDOMNode.setAttribute("data-role","toolbar"),this.rootDOMNode.appendChild(this.toolbarDOMNode),this.iniToolbar(),this.errorDOMNode=document.createElement("div"),this.errorDOMNode.setAttribute("data-role","error"),this.onCursorPositionChangedThrottled=N.a.create((function(){a.onCursorPositionChanged()}),300),this.initActionTypeDOMNode(),this.initTargetControlDOMNode(),this.actionTypeDOMNode.onchange=function(){a.onCursorPositionChangedThrottled(),a.onErrorStateChanged()},this.targetControlDOMNode.onchange=function(){a.onCursorPositionChangedThrottled(),a.onErrorStateChanged()}}return a()(t,[{key:"asyncInitCodeMirrorEditor",value:function(){var t,e,n,r,i,o;this.editorInited||((t=this).sqlTextEditor=null===(e=CodeMirror)||void 0===e?void 0:e(t.rootDOMNode,{value:"asd",mode:"text/x-mariadb",lineNumbers:!0}),t.rootDOMNode.appendChild(t.errorDOMNode),null===(n=t.sqlTextEditor)||void 0===n||n.setSize("100%","80px"),null===(r=t.sqlTextEditor)||void 0===r||r.setValue(t.sql),null===(i=t.sqlTextEditor)||void 0===i||i.on("change",(function(){var e,n;t.sql=null!==(e=null===(n=t.sqlTextEditor)||void 0===n?void 0:n.getValue())&&void 0!==e?e:"",t.onSQLQueryChanged()})),null===(o=t.sqlTextEditor)||void 0===o||o.on("cursorActivity",(function(e){var n=e.getCursor();t.carretCharIndex=n.ch,t.carretLineIndex=n.line,t.onCursorPositionChangedThrottled()})),this.editorInited=!0)}},{key:"getRootDOMNode",value:function(){return this.rootDOMNode}},{key:"getUniqueId",value:function(){return this.uniqueId}},{key:"initActionTypeDOMNode",value:function(){var t=document.createElement("option");t.text="Execute SQL using:",t.value="run",this.actionTypeDOMNode.add(t),(t=document.createElement("option")).text="Set value of control:",t.value="set",this.actionTypeDOMNode.add(t)}},{key:"initTargetControlDOMNode",value:function(){var t=document.createElement("option");t.text="[Select]",t.value="",this.targetControlDOMNode.add(t);for(var e=0,n=this.formControlsList.length;e<n;e++)(t=document.createElement("option")).text=this.formControlsList[e].name,t.value=this.formControlsList[e].id,this.targetControlDOMNode.appendChild(t)}},{key:"getError",value:function(){return this.error}},{key:"getStatement",value:function(){return this.statement}},{key:"onSQLQueryChanged",value:function(){try{if(""===String(this.sql).trim())return this.rootDOMNode.removeAttribute("data-error-state"),this.errorDOMNode.textContent="",this.error=null,this.statement=null,void this.onErrorStateChanged();this.statement=this.db.createStatement(this.sql),this.errorDOMNode.textContent="",this.error=null,this.onErrorStateChanged()}catch(t){this.errorDOMNode.textContent=String(t).replace(/^Error: /g,"").replace(/^Failed to create statement: /g,""),this.error=t,this.statement=null,this.onErrorStateChanged()}}},{key:"iniToolbar",value:function(){var t;this.toolbarDOMNode.innerHTML='\n            <button data-role="insert-table" title="Insert table"><span class="i-md i123-memory" ></span></button>\n            <button data-role="insert-column" title="Insert column"><span class="i-md i123-reports" ></span></button>\n            <button data-role="insert-control" title="Insert form control"><span class="i-md i123-input_area" ></span></button>\n            <div data-role="editor-selection-feedback"></div>\n        ',(0,this.jq)((t=this).toolbarDOMNode).on("click","button[data-role]",(function(){switch(this.getAttribute("data-role")){case"insert-table":t.commandDispatcher.browserForDatabaseTablesDialog().then((function(e){var n;null===(n=t.sqlTextEditor)||void 0===n||n.replaceSelection(e,!0)}));break;case"insert-column":t.commandDispatcher.browserForDatabaseTableColumnsDialog().then((function(e){var n;null===(n=t.sqlTextEditor)||void 0===n||n.replaceSelection(e,!0)}));break;case"insert-control":t.commandDispatcher.browseForFormsControlDialog().then((function(e){var n;null===(n=t.sqlTextEditor)||void 0===n||n.replaceSelection(e,!0)}))}}))}},{key:"onCursorPositionChanged",value:function(){var t,e=this.sql.split("\n")[this.carretLineIndex],n=this.getIdentifierFromStringPosition(e,this.carretCharIndex);t=this,/^control_[\d]+(_[\d]+)?$/.test(n)?t.jq(t.toolbarDOMNode).find("[data-role=editor-selection-feedback]").each((function(){for(var e="<b>UNKNOWN</b> control <b>:"+n+"</b>",r=0,i=t.formControlsList.length;r<i;r++)if(t.formControlsList[r].id==n){e="<b>:"+n+"</b> => <b>"+t.formControlsList[r].name+"</b>";break}this.innerHTML=e})):"this"===n?t.jq(t.toolbarDOMNode).find("[data-role=editor-selection-feedback]").each((function(){if(t.getParentRule().getControlId()){for(var e="",n=t.getParentRule().getControlId(),r=0,i=t.formControlsList.length;r<i;r++)t.formControlsList[r].id===n&&(e=t.formControlsList[r].name);this.innerHTML=e?"<b>:this</b> => <b>"+e+"</b> (:"+n+")":"<b>:this</b> => Select a control on the rule"}else this.innerHTML="<b>:this</b> => Select a control on the rule"})):t.jq(t.toolbarDOMNode).find("[data-role=editor-selection-feedback]").text("")}},{key:"getIdentifierFromStringPosition",value:function(e,n){var r,i,o="",a="",s=e.length;for(i=n-1;i>=0&&t.IDENTIFIER_CHARS.indexOf(r=e.charAt(i))>-1;)o=r+o,i--;for(i=n;i<s&&t.IDENTIFIER_CHARS.indexOf(r=e.charAt(i))>-1;)a+=r,i++;return(o+a).replace(/^[0-9]+/g,"")}},{key:"withSQL",value:function(t){return this.sql=t||"",this.carretLineIndex=0,this.carretCharIndex=0,this.onSQLQueryChanged(),this.onErrorStateChanged(),this}},{key:"withControlId",value:function(t){for(var e=0,n=this.formControlsList.length;e<n;e++)if(this.formControlsList[e].id===t)return this.targetControlDOMNode.value=t,this;var r=document.createElement("option");return r.value=t,r.text="DELETED "+t,this.targetControlDOMNode.add(r),this.targetControlDOMNode.value=t,this}},{key:"getControlId",value:function(){return this.targetControlDOMNode.value}},{key:"getSQL",value:function(){return this.sql}},{key:"onErrorStateChanged",value:function(){this.statement&&(this.statement.getStatementType()===y.p.SELECT?"set"!==this.actionTypeDOMNode.value&&(this.actionTypeDOMNode.value="set"):"run"!==this.actionTypeDOMNode.value&&(this.actionTypeDOMNode.value="run"));var t=this.rootDOMNode.hasAttribute("data-has-errors");this.error||!this.statement?t||(this.rootDOMNode.setAttribute("data-has-errors",""),this.parentRule&&this.parentRule.onErrorStateChanged()):t&&(this.rootDOMNode.removeAttribute("data-has-errors"),this.parentRule&&this.parentRule.onErrorStateChanged())}},{key:"getParentRule",value:function(){return this.parentRule}},{key:"withParentRule",value:function(t){return this.parentRule=t,this}},{key:"setActive",value:function(t){return this.active=!!t,this.active?this.rootDOMNode.setAttribute("data-selected",""):this.rootDOMNode.removeAttribute("data-selected"),this}},{key:"isActive",value:function(){return this.active}}]),t}();function un(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}v()(sn,"IDENTIFIER_CHARS","abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_0123456789"),v()(sn,"UID",0);var cn=function(t){l()(n,t);var e=un(n);function n(){var t;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),v()(u()(t),"rules",[]),t}return a()(n,[{key:"addRule",value:function(t){this.rules.length;return this.rules.push(t),this.trigger("change"),t}},{key:"deleteRule",value:function(t){for(var e=0,n=this.rules.length;e<n;e++)if(this.rules[e]===t){var r=this.rules.splice(e,1)[0];return this.trigger("change"),r}return null}},{key:"setSelectedRule",value:function(t){for(var e=0,n=this.rules.length;e<n;e++)this.rules[e]===t?this.rules[e].setSelected(!0):this.rules[e].isSelected()&&this.rules[e].setSelected(!1)}},{key:"getSelectedRule",value:function(){for(var t=0,e=this.rules.length;t<e;t++)if(this.rules[t].isSelected())return this.rules[t];return null}},{key:"getRuleByUniqueId",value:function(t){for(var e=0,n=this.rules.length;e<n;e++)if(this.rules[e].getUniqueId()===t)return this.rules[e];return null}},{key:"getRules",value:function(){return this.rules}},{key:"getJQLConfiguration",value:function(){for(var t=[],e=0,n=this.rules.length;e<n;e++){for(var r={actions:[],eventType:this.rules[e].getEventTypeId(),controlId:this.rules[e].getControlId()},i=0,o=this.rules[e].getActions(),a=o.length;i<a;i++)r.actions.push({controlId:o[i].getControlId(),jql:o[i].getSQL()});t.push(r)}return t}},{key:"moveRuleUp",value:function(t){var e=null;if(!(this.rules.length<2)){for(var n=0,r=this.rules.length;n<r;n++)if(this.rules[n]===t){e=n;break}if(0!==e&&null!==e){this.rules.splice(e,1);var i=t.getRootDOMNode().previousSibling;t.getRootDOMNode().parentNode.removeChild(t.getRootDOMNode()),this.rules.splice(e-1,0,t),i.parentNode.insertBefore(t.getRootDOMNode(),i)}}}},{key:"moveRuleDown",value:function(t){var e=null;if(!(this.rules.length<2)){for(var n=0,r=this.rules.length;n<r;n++)if(this.rules[n]===t){e=n;break}if(e!==this.rules.length-1&&null!==e){this.rules.splice(e,1);var i=t.getRootDOMNode().nextSibling;t.getRootDOMNode().parentNode.removeChild(t.getRootDOMNode()),this.rules.splice(e+1,0,t),i.parentNode.insertBefore(t.getRootDOMNode(),i.nextSibling)}}}}],[{key:"createFromJQLFormRulesConfiguration",value:function(t,e,r,i,o){for(var a=new n,s=0,u=t.length;s<u;s++){var c=a.addRule(new an(e));c.withControlId(t[s].controlId).withEventTypeId(t[s].eventType);for(var l=0,h=(t[s].actions||[]).length;l<h;l++){c.addAction(new sn(e,r,i,o)).withSQL(t[s].actions[l].jql).withControlId(t[s].actions[l].controlId)}}return setTimeout((function(){for(var t=0,e=a.getRules(),n=e.length;t<n;t++)e[t].onErrorStateChanged()}),100),a}}]),n}(m.a),ln=function(){function t(e){i()(this,t),v()(this,"app",void 0),v()(this,"csvParserOptions",{endOfLineCharacter:"\r\n",columnsEnclosedBy:'"',columnsTerminatedBy:",",fieldsEscapedBy:"",autoTrimAllFields:!0,allColumnsAreEnclosed:!1}),this.app=e}return a()(t,[{key:"setApplicationEnabledStateAction",value:function(t){var e,n,r;e=this.app.getJQuery(),n=this.app,r=this.app,this.app.getResourceManager(),e.ajax("/sf_applications_actions.php",{type:"POST",data:{someaction:"applications_csvconnector_enable_disable",appid:String(r.getApplicationId()),formid:String(r.getFormId()),a_enabled:t?"1":"0"}}).then((function(e){"OK"===String(e||"").trim()&&(t?n.createNotification("Virtual Database & SQL Manager application settings saved successfully",!1,Ge.i.SUCCESS,!0):n.createNotification("Virtual Database & SQL Manager application was successfully disabled for this form",!1,Ge.i.SUCCESS,!0))})).fail((function(){n.createNotification("Failed to change Virtual Database & SQL Manager enabled state",!1,Ge.i.ERROR,!0)}))}},{key:"createNewTableAction",value:function(){var t,e,n,r;t=this.app.getJQuery(),e=this.app,this.app,n=this.app.getResourceManager(),r=this,n.get("/modules/RulesV3/resources/create-new-table-action.html").then((function(n){var i=new Ze.a(n),o=null,a=e.createDialog("Create new table",[{type:Ge.f.CREATE,callback:function(){try{var n={csvFile:o,tableName:t(a.body).find("label[data-role=database-name] input").val(),tableNamespace:t(a.body).find("label[data-role=database-global-flag] input").is(":checked")?y.e.GLOBAL:y.e.FORM,tableAccessMode:t(a.body).find("label[data-role=table-write-access] input").is(":checked")?y.c.READ_WRITE:y.c.READ,tableStorageEngine:t(a.body).find("label[data-role=table-storage-engine] input").is(":checked")?y.f.REMOTE:y.f.IN_MEMORY,csvFieldEnclosure:r.csvParserOptions.columnsEnclosedBy,csvEncloseAllFields:r.csvParserOptions.allColumnsAreEnclosed,csvFieldDelimiter:r.csvParserOptions.columnsTerminatedBy,csvEscapeCharacter:r.csvParserOptions.fieldsEscapedBy,csvAutoTrim:r.csvParserOptions.autoTrimAllFields,csvLineTerminator:r.csvParserOptions.endOfLineCharacter};if(!n.tableName)throw new Error("Please input a Database table name");if(!o)throw new Error("Please select a CSV file first");if(!o.size)throw new Error("Selected file is empty. Please select a non-empty file");if(!/^([\s\S]+)\.csv$/i.test(o.name))throw new Error('Selected file seems not to be a csv file ("'+o.type+'"). Please select a CSV file');if(o.size>15728640)throw new Error("Selected file size is greater than 15Mb, which is the maximum csv file size");r.app.getDatabase().createTableFromCSVFile(n).then((function(){e.alert("Table created","Table '"+n.tableName+"' was successfully created!",(function(){a.close()}))})).catch((function(t){e.alert("Failed to create table",'There was an error encountered while trying to create your table. Please inspect if the "Advanced options" settings are set up correctly.')}))}catch(i){e.alert("Error creating database table",String(i||"").replace(/^Error: /g,""))}}},{type:Ge.f.CANCEL,callback:function(){a.close()}}],{width:"600px"});a.body.innerHTML=i.parse({}),a.body.setAttribute("data-dialog-role","csv-connector-create-table-dialog"),t(a.body).each((function(){t(this).on("click","label[data-role=database-source] a",(function(){r.editAdvancedCSVSettingsPreferencesAction()})),t(this).find("label[data-role=csv-file] input[type=file]").on("change",(function(){o=this.files[0],t(a.body).find("label[data-role=csv-file]").addClass("has-file").find("span.file-name").text(o.name),this.value=null})),t(this).find("label[data-role=csv-file] a").on("click",(function(){t(a.body).find("label[data-role=csv-file]").removeClass("has-file").find("span.file-name").text(""),o=null}))}))})).fail((function(t){e.createNotification('Failed to load "modules/RulesV3/resources/create-new-table-action.html',!1,Ge.i.ERROR,!0)}))}},{key:"editAdvancedCSVSettingsPreferencesAction",value:function(){var t,e,n,r;t=this.app.getJQuery(),e=this.app,this.app,n=this.app.getResourceManager(),r=this,n.get("/modules/RulesV3/resources/edit-csv-import-file-options.html").then((function(n){var i=new Ze.a(n),o=JSON.parse(JSON.stringify(r.csvParserOptions)),a=e.createDialog("Advanced options",[{type:Ge.f.DONE,callback:function(){t(a.body).each((function(){t(this).find("label[data-role=auto-trim-all-fields] input").each((function(){r.csvParserOptions.autoTrimAllFields=this.checked})),t(this).find("label[data-role=enclose-all-fields] input").each((function(){r.csvParserOptions.allColumnsAreEnclosed=this.checked})),t(this).find("label[data-role=end-of-line] select").each((function(){r.csvParserOptions.endOfLineCharacter=r.html2RawString(this.value)})),t(this).find("label[data-role=columns-terminated-by] select").each((function(){r.csvParserOptions.columnsTerminatedBy=r.html2RawString(this.value)})),t(this).find("label[data-role=fields-escaped-by] select").each((function(){r.csvParserOptions.fieldsEscapedBy=r.html2RawString(this.value)})),t(this).find("label[data-role=columns-enclosed-by] select").each((function(){r.csvParserOptions.columnsEnclosedBy=r.html2RawString(this.value)}))})),a.close()}},{type:Ge.f.CANCEL,callback:function(){a.close()}}],{width:"700px"});a.body.innerHTML=i.parse(o),a.body.setAttribute("data-dialog-role","csv-connector-edit-csv-options"),t(a.body).each((function(){t(this).find("label[data-role=auto-trim-all-fields] input").each((function(){this.checked=o.autoTrimAllFields})),t(this).find("label[data-role=enclose-all-fields] input").each((function(){this.checked=o.allColumnsAreEnclosed})),t(this).find("label[data-role=end-of-line] select").each((function(){this.value=r.rawString2HTML(o.endOfLineCharacter)})),t(this).find("label[data-role=columns-terminated-by] select").each((function(){this.value=r.rawString2HTML(o.columnsTerminatedBy)})),t(this).find("label[data-role=fields-escaped-by] select").each((function(){this.value=r.rawString2HTML(o.fieldsEscapedBy)})),t(this).find("label[data-role=columns-enclosed-by] select").each((function(){this.value=r.rawString2HTML(o.columnsEnclosedBy)})),t(this).find("form").on("submit",(function(t){t.preventDefault(),t.stopPropagation()}))}))})).fail((function(t){e.createNotification('Failed to load "modules/RulesV3/resources/edit-csv-import-file-options.html',!0,Ge.i.ERROR,!0)}))}},{key:"exploreDatabasesAction",value:function(){var t,e,n,r,i;t=this.app.getJQuery(),e=this.app,n=this.app,r=this.app.getResourceManager(),i=this,r.get("/modules/RulesV3/resources/explore-database-dialog.html").then((function(r){var o,a,s={tables:function(){for(var t=[],e=n.getDatabase().enumerateTables(),r=0,i=e.length;r<i;r++){var o=n.getDatabase().getTable(e[r].name);t.push({name:e[r].name,isRemote:o.isRemote(),isInMemory:!o.isRemote()&&!o.isVirtual(),isVirtual:o.isVirtual(),isTransactional:o.isTransactional(),isIndexable:o.isIndexable()})}return t}()},u=new Ze.a(r),c=e.createDialog("Explore database",[],{width:"920px",height:"600px"});c.body.innerHTML=u.parse(s),c.dialog.setAttribute("data-dialog-role","explore-database-dialog"),t(c.body).on("click","[data-role=table]",(function(){!function(e){console.warn("set view: ",e),e!==a&&(t(c.dialog).attr("data-has-selected-table",""),t(c.body).find("[data-role=tables-list] > [data-role=table]").each((function(){t(this).attr("data-selected",this.getAttribute("data-name")===e?"":null)})),a=e,o=o||new Xe(i.app.getJQuery()).withSortingEnabled(!0),window.g=o,t(c.body).find("[data-role=selected-table]").each((function(){this.appendChild(o.getRootDOMNode()),n.getDatabase().getTable(e).isVirtual()?o.withCollection(new on(t,e,n.getDatabase())).withEmptyStateHTML("Table <b>"+e+"</b> is a virtual table, which is only available in <b>view form</b> mode."):o.withCollection(new nn(t,e,n.getDatabase())).withEmptyStateHTML("There are no items to show in this view")})))}(this.getAttribute("data-name"))})),t(c.body).on("click","[data-role=tables-operations] button[data-role=drop-database]",(function(){var n=null;t(c.body).find("[data-role=tables-list] > [data-role=table][data-selected]").each((function(){n=this.getAttribute("data-name")})),n&&e.prompt("Confirm table deletion",'Are you sure you want to delete table "'+n+'"?',(function(){i.app.getDatabase().dropTable(n,{applicationConfig:btoa(i.app.getDatabase().getApplicationConfig())}).then((function(){t(c.body).find("[data-role=tables-list] > [data-role=table][data-selected]").remove(),o&&o.getRootDOMNode()&&o.getRootDOMNode().parentNode.removeChild(o.getRootDOMNode()),t(c.dialog).attr("data-has-selected-table",null)})).catch((function(t){e.alert("Failed to delete table",'Failed to delete table "'+a+'"')}))}))})).on("click","[data-role=tables-operations] button[data-role=download-database]",(function(){var r=null;t(c.body).find("[data-role=tables-list] > [data-role=table][data-selected]").each((function(){r=this.getAttribute("data-name")})),r&&(n.getDatabase().getTable(r).isVirtual()?e.alert("Table not exportable",'Table "'+r+'" is a virtual table, and cannot be exported to CSV!'):i.app.getDatabase().downloadTableAsCSV(r,{applicationConfig:btoa(i.app.getDatabase().getApplicationConfig())}).then((function(t){"string"===typeof t?$e.a.download(t,r+".csv","text/csv"):"object"===Fe()(t)&&t.value?$e.a.download(t.value,r+".csv","text/csv"):e.alert("Table export failed!","There was an error exporting your table as CSV!")})).catch((function(t){e.alert("Table export failed!","There was an error exporting your table as CSV!"),console.error(t)})))})).on("click","[data-role=tables-operations] button[data-role=database-indexes]",(function(){var e=null;t(c.body).find("[data-role=tables-list] > [data-role=table][data-selected]").each((function(){e=this.getAttribute("data-name")})),e&&i.editTableIndexes(e)}))})).fail((function(t){e.createNotification('Failed to load "modules/RulesV3/resources/explore-database-dialog.html"',!0,Ge.i.ERROR,!0)}))}},{key:"editFormRulesAction",value:function(){var t,e,n,r,i;t=this.app.getJQuery(),e=this.app,n=this.app,r=this.app.getResourceManager(),i=this,t.when(r.get("/modules/RulesV3/resources/edit-rules-dialog.html")).then((function(r){n.getDatabase().getJQLFormConfiguration({applicationConfig:btoa(n.getDatabase().getApplicationConfig())}).then((function(o){var a,s,u,c=new Ze.a(r),l=cn.createFromJQLFormRulesConfiguration(o||[],n.getFormControlsList(),n.getDatabase(),t,i),h=e.createDialog("Edit SQL rules",[{type:Ge.f.SAVE,callback:function(){n.getDatabase().saveJQLFormConfiguration(l.getJQLConfiguration(),{applicationConfig:btoa(n.getDatabase().getApplicationConfig())}).then((function(){h.close()})).catch((function(){e.alert("Error saving configuration","There was an error saving configuration. Please fix errors, and try again")}))}},{type:Ge.f.CANCEL,callback:function(){h.close()}}],{width:"800px",height:"800px"});h.dialog.setAttribute("data-dialog-role","edit-sql-rules"),h.body.innerHTML=c.parse({});var f=function(t){for(;u.firstChild;)u.removeChild(u.firstChild);if(t){u.setAttribute("data-rule-uid",String(t.getUniqueId()));for(var e=t.getActions(),n=e.length,r=0;r<n;r++)u.appendChild(e[r].getRootDOMNode()),e[r].asyncInitCodeMirrorEditor();t.setSelectedAction(t.getActions()[0]||null)}else u.removeAttribute("data-rule-id")};t(h.body).find("[data-role=rules]").each((function(){t(a=this).on("click","> [data-role=rule]",(function(){var t=~~this.getAttribute("data-rule-uid"),e=l.getRuleByUniqueId(t);l.setSelectedRule(e),f(e)}))})),t(h.body).find("[data-role=actions]").each((function(){t(u=this).on("mousedown","> [data-role=action]",(function(){var t=l.getSelectedRule();t.setSelectedAction(t.getActionByUniqueId(~~this.getAttribute("data-action-uid")))}))})),t(h.body).find("[data-role=rules-toolbar]").each((function(){s=this})),t(h.body).find("[data-role=actions-toolbar]").each((function(){t(this).on("click","button[data-role=create-action]",(function(){var e,r,o=~~u.getAttribute("data-rule-uid"),a=l.getRuleByUniqueId(o);e=a,r=new sn(n.getFormControlsList(),n.getDatabase(),t,i),e.addAction(r),u.appendChild(r.getRootDOMNode()),r.asyncInitCodeMirrorEditor(),e.setSelectedAction(r),e.onErrorStateChanged()})).on("click","button[data-role=delete-action]",(function(){var t=~~u.getAttribute("data-rule-uid"),n=l.getRuleByUniqueId(t);if(n){var r,i,o=n.getSelectedAction();o&&(r=n,i=o,e.prompt("Delete action","Are you sure you want to delete this action?",(function(){u.removeChild(i.getRootDOMNode()),r.deleteAction(i),r.setSelectedAction(null),r.onErrorStateChanged()})))}})).on("click","button[data-role=move-up]",(function(){var t=l.getSelectedRule();if(t){var e=t.getSelectedAction();e&&t.moveActionUp(e)}})).on("click","button[data-role=move-down]",(function(){var t=l.getSelectedRule();if(t){var e=t.getSelectedAction();e&&t.moveActionDown(e)}}))})),t(s).on("click","button[data-role=create-rule]",(function(){var t;t=new an(n.getFormControlsList()),l.addRule(t),a.appendChild(t.getRootDOMNode()),l.setSelectedRule(t),f(t)})).on("click","button[data-role=delete-rule]",(function(){var t=l.getSelectedRule();t&&function(t){e.prompt("Delete rule","Are you sure you want to delete this rule containing "+t.getActions().length+" actions?",(function(){for(l.deleteRule(t),a.removeChild(t.getRootDOMNode());u.firstChild;)u.removeChild(u.firstChild)}))}(t)})).on("click","button[data-role=move-up]",(function(){l.moveRuleUp(l.getSelectedRule())})).on("click","button[data-role=move-down]",(function(){l.moveRuleDown(l.getSelectedRule())})),function(){for(;a.firstChild;)a.removeChild(a.firstChild);for(var t=0,e=l.getRules(),n=e.length;t<n;t++)a.appendChild(e[t].getRootDOMNode());if(l.getRules().length){var r=l.getRules()[0];l.setSelectedRule(r),f(r)}}()})).catch((function(t){throw t}))}))}},{key:"getTestConnectionButton",value:function(){return this.app.getJQuery()("[data-role=csv-remote-connection-dialog] #connection-test-button")}},{key:"getConnectionDialogFormSerializedData",value:function(){return btoa(this.app.getJQuery()("#form-connection-dialog").serialize())}},{key:"getDialogSaveButton",value:function(){return this.app.getJQuery()(".ui-dialog .ui-buttons button.btn-secondary-cta")}},{key:"disableDialogSaveButton",value:function(){var t=this.getDialogSaveButton();t&&t.attr("disabled","disabled")}},{key:"enableDialogSaveButton",value:function(){var t=this.getDialogSaveButton();t&&t.removeAttr("disabled")}},{key:"disableDialogTestConnectionButton",value:function(){var t=this.getTestConnectionButton();t&&t.attr("disabled","disabled")}},{key:"enableDialogTestConnectionButton",value:function(){var t=this.getTestConnectionButton();t&&t.removeAttr("disabled")}},{key:"setTextConnectionValue",value:function(t){this.getObjectConnectionTestInput().val(t)}},{key:"testConnection",value:function(){var t,e,n=this,r=(this.getTestConnectionButton(),this.getObjectTestConnectionMessageContainer()),i=this.getObjectTestConnectionMessageExtraDetailsContainer(),o=this.getObjectTestConnectionLoaderContainer(),a=this.getConnectionDialogFormSerializedData();this.disableDialogTestConnectionButton(),t=this.app.getJQuery(),this.app,e=this.app,this.app.getResourceManager(),r.hide(),r.removeClass("errorInDialog"),i.html(""),o.show(),t.when(t.ajax("/sf_applications_actions.php",{type:"POST",data:{someaction:"applications_csvconnector_remote_test_connection",formid:String(e.getFormId()),appid:String(e.getApplicationId()),application_service:"36",formData:a}})).then((function(t,e){n.enableDialogTestConnectionButton();var a=JSON.parse(t);o.hide(),a.success?(r.removeClass("errorInDialog"),i.html(""),n.setTextConnectionValue(1),n.enableDialogSaveButton(),n.disableDialogTestConnectionButton()):(r.addClass("errorInDialog"),i.html(a.errorDetails),n.setTextConnectionValue(0),n.disableDialogSaveButton(),n.enableDialogTestConnectionButton()),r.show(),r.html(a.message)})).fail((function(t){o.hide(),r.show(),r.html(t.toString),n.enableDialogTestConnectionButton()}))}},{key:"getObjectTestConnectionLoaderContainer",value:function(){return this.app.getJQuery()(".ui-dialog .ui-body  [data-role=test-connection-loader]")}},{key:"getObjectTestConnectionMessageContainer",value:function(){return this.app.getJQuery()(".ui-dialog .ui-body  [data-role=csv-remote-test-connection-message]")}},{key:"getObjectTestConnectionMessageExtraDetailsContainer",value:function(){return this.app.getJQuery()(".ui-dialog .ui-body  [data-role=csv-remote-test-connection-message-extra-details]")}},{key:"getObjectConnectionTestInput",value:function(){return this.app.getJQuery()("#connection-test")}},{key:"isConnectionTested",value:function(){return Boolean(1==this.getObjectConnectionTestInput().val())}},{key:"applyOriginalState",value:function(){this.setTextConnectionValue(0),this.getObjectTestConnectionMessageContainer().hide(),this.disableDialogSaveButton(),this.enableDialogTestConnectionButton(),this.getObjectTestConnectionMessageContainer().attr("title","")}},{key:"fillConnectionFields",value:function(){var t={};try{t=JSON.parse(window["CSVConnectorApplicationBox"+String(this.app.getApplicationId())].getConfig())}catch(e){}t&&t.connection&&(t.connection.dbType&&this.app.getJQuery()('form[name="form-connection-dialog"] #connection-type').val(t.connection.dbType),t.connection.host&&this.app.getJQuery()('form[name="form-connection-dialog"] #connection-host').val(t.connection.host),t.connection.port&&this.app.getJQuery()('form[name="form-connection-dialog"] #connection-port').val(t.connection.port),t.connection.user&&this.app.getJQuery()('form[name="form-connection-dialog"] #connection-username').val(t.connection.username),t.connection.dbname&&this.app.getJQuery()('form[name="form-connection-dialog"] #connection-database-name').val(t.connection.dbname),t.connection.isPublicConnection&&this.app.getJQuery()('form[name="form-connection-dialog"] #connection-is-public').val(t.connection.isPublicConnection))}},{key:"useExternalDbAction",value:function(){var t,e,n,r=this;t=this.app.getJQuery(),e=this.app,n=this.app,this.app.getResourceManager().get("/modules/RulesV3/resources/connect-external-db-dialog.html").then((function(i){var o=e.createDialog("Connect to external database",[{type:Ge.f.SAVE,callback:function(){if(r.isConnectionTested()){var e=r.getConnectionDialogFormSerializedData();t.when(t.ajax("/sf_applications_actions.php",{type:"POST",data:{someaction:"applications_csvconnector_remote_save_connection",formid:String(n.getFormId()),appid:String(n.getApplicationId()),application_service:"36",formData:e}})).then((function(e,r){var i=JSON.parse(e);i&&i.data&&i.data.useRemoteDatabaseText&&t("#CSVAppBoxConnectionSetExternalDBText-"+String(n.getApplicationId())).html(i.data.useRemoteDatabaseText),window["CSVConnectorApplicationBox"+String(n.getApplicationId())].withConfig(i.config),window["CSVConnectorApplicationBox"+String(n.getApplicationId())].updateRulesV3Data(i),window["CSVConnectorApplicationBox"+String(n.getApplicationId())].applyUseConnectionExternalDB(),o.close()})).fail((function(t){}))}}},{type:Ge.f.CANCEL,callback:function(){o.close()}}],{width:"600px"});o.body.innerHTML=i,r.applyOriginalState(),r.fillConnectionFields()}))}},{key:"removeApplicationAction",value:function(){var t,e,n;t=this.app.getJQuery(),e=this.app,n=this.app,this.app.getResourceManager().get("/modules/RulesV3/resources/remove-application-dialog.html").then((function(r){var i=e.createDialog("Remove application",[{type:Ge.f.DELETE,callback:function(){var e=t(i.body).find("[name=delete-sql-rules]").is(":checked");t.when(t.ajax("/sf_applications_actions.php",{type:"POST",data:{someaction:"applications_remove",formid:String(n.getFormId()),application_id:String(n.getApplicationId()),application_service:"36",withRules:e}}),n.getDatabase().deleteAllAssociatedSettingsAndAllTables({applicationconfig:btoa(n.getDatabase().getApplicationConfig())})).then((function(t,e){i.close()})).fail((function(t){}))}},{type:Ge.f.CANCEL,callback:function(){i.close()}}],{width:"500px"});i.body.innerHTML=r}))}},{key:"rawString2HTML",value:function(t){return JSON.stringify(t||"").replace(/(^"|"$)/g,"").replace(/^\\\\$/g,"\\").replace(/^\\"$/g,'"')}},{key:"html2RawString",value:function(t){return'"'===t?'"':JSON.parse('"'+t.replace(/^\\$/g,"\\\\")+'"')}},{key:"convertJQLColumnTypeToGridColumnType",value:function(t){switch(t){case y.d.STRING:return Ge.e.STRING;case y.d.NUMBER:return Ge.e.NUMBER;case y.d.BOOLEAN:return Ge.e.BOOLEAN;case y.d.NULL:default:return Ge.e.UNKNOWN}}},{key:"editTableIndexes",value:function(t){var e,n,r,i;e=this.app.getJQuery(),n=this.app,r=this.app,i=this.app.getResourceManager(),r.getDatabase().getTable(t).isIndexable()?i.get("/modules/RulesV3/resources/edit-table-indexes-dialog.html").then((function(i){var o,a=r.getDatabase().getTable(t),s=new Ze.a(i),u=n.createDialog("Edit indexes",[{type:Ge.f.SAVE,callback:function(){for(var e=[],i=0,a=o.getRows(),s=a.length;i<s;i++)(a[i].getDataAt(2)||a[i].getDataAt(3))&&e.push({autoIncrement:a[i].getDataAt(3),unique:a[i].getDataAt(2),name:a[i].getDataAt(0)});r.getDatabase().getTable(t).alterIndexes(e).then((function(){u.close()})).catch((function(t){console.error(t),n.alert("Error modifying indexes","There was an error while trying to modify the table indexes!")}))}},{type:Ge.f.CANCEL,callback:function(){u.close()}}],{width:"500px",height:"500px"});u.dialog.setAttribute("data-dialog-role","edit-table-indexes"),u.body.innerHTML=s.parse({}),(o=new Xe(e).withSortingEnabled(!1)).createColumn().withColumnName("Column").withColumnType(Ge.e.STRING).withEditable(!1).withWidth(165),o.createColumn().withColumnName("Type").withColumnType(Ge.e.STRING).withEditable(!1).withWidth(70),o.createColumn().withColumnName("Unique").withColumnType(Ge.e.BOOLEAN).withEditable(!0).withWidth(60).withValueRenderer((function(t){return t?'<span class="i-md i123-key icon"></span>':""})),o.createColumn().withColumnName("Auto").withColumnType(Ge.e.BOOLEAN).withEditable(!0).withWidth(60).withValueRenderer((function(t){return t?'<span class="i-md i123-input_number icon"></span>':""}));for(var c=0,l=a.describe(),h=l.length;c<h;c++){var f=function(t){for(var e=[!1,!1],n=0,r=a.getIndexes(),i=r.length;n<i;n++){var o=r[n].getDescriptors();if(1===o.length&&o[0].name===t){e[0]=r[n].isUnique(),e[1]=r[n].isAutoIncrement();break}}return e}(l[c].name);o.createRow([l[c].name,l[c].type,f[0],f[1]]).withRowIndex(c+1)}o.on("row-updated",(function(t,e,r,i){if(3===e)if(t.getDataAt(1)===y.d.NUMBER){if(r){t.setDataAt(2,!0);for(var a=0,s=o.getRows(),u=s.length;a<u;a++)s[a]!==t&&s[a].getDataAt(3)&&s[a].setDataAt(3,!1)}}else r&&(t.setDataAt(3,!1),n.alert("Not supported","Only columns of type number can be Auto Incremented"))})),u.body.appendChild(o.getRootDOMNode())})):n.alert("Table not indexable",'Table "'+t+'" does not support indexes!')}},{key:"browserForDatabaseTablesDialog",value:function(){return t=this.app.getJQuery(),e=this.app.getDatabase(),n=this.app.getResourceManager(),r=this.app,t.Deferred((function(i){n.get("/modules/RulesV3/resources/browse-for-database-table-dialog.html").then((function(n){var o=new Ze.a(n),a=r.createDialog("Insert table in SQL query",[{type:Ge.f.OK,callback:function(){a.close();var t=s.getSelectedIndex();if(-1!==t){var e=s.getRows()[t].getDataAt(0);i.resolve(e)}else i.reject(new Error("Canceled"))}},{type:Ge.f.CANCEL,callback:function(){a.close(),i.reject(new Error("Close button pressed"))}}],{width:"500px",height:"500px",onCloseButtonClick:function(){i.reject(new Error("Dialog closed by user"))}});a.dialog.setAttribute("data-dialog-role","browse-for-table-dialog"),a.body.innerHTML=o.parse({});var s=new Xe(t).withEmptyStateHTML("There are no database tables created").withSortingEnabled(!1);a.body.appendChild(s.getRootDOMNode()),s.createColumn().withColumnName("table").withWidth(300).withColumnType(Ge.e.STRING);for(var u=0,c=e.enumerateTables(),l=c.length;u<l;u++)s.createRow([c[u].name])}))})).promise();var t,e,n,r}},{key:"browserForDatabaseTableColumnsDialog",value:function(){return t=this.app.getJQuery(),e=this.app.getDatabase(),n=this.app.getResourceManager(),r=this.app,t.Deferred((function(i){n.get("/modules/RulesV3/resources/browse-for-database-table-dialog.html").then((function(n){var o=new Ze.a(n),a=r.createDialog("Insert table column in SQL query",[{type:Ge.f.OK,callback:function(){a.close();var t=s.getSelectedIndex();if(-1!==t){var e=s.getRows()[t].getDataAt(1);i.resolve(e)}else i.reject(new Error("Canceled"))}},{type:Ge.f.CANCEL,callback:function(){a.close(),i.reject(new Error("Close button pressed"))}}],{width:"500px",height:"500px",onCloseButtonClick:function(){i.reject(new Error("Dialog closed by user"))}});a.dialog.setAttribute("data-dialog-role","browse-for-table-dialog"),a.body.innerHTML=o.parse({});var s=new Xe(t).withEmptyStateHTML("There are no database tables created").withSortingEnabled(!1);a.body.appendChild(s.getRootDOMNode()),s.createColumn().withColumnName("table").withWidth(100).withColumnType(Ge.e.STRING),s.createColumn().withColumnName("column").withWidth(150).withColumnType(Ge.e.STRING),s.createColumn().withColumnName("type").withWidth(100).withColumnType(Ge.e.STRING);for(var u=0,c=e.enumerateTables(),l=c.length;u<l;u++)for(var h=e.getTable(c[u].name).describe(),f=0,d=h.length;f<d;f++)s.createRow([c[u].name,h[f].name,h[f].type])}))})).promise();var t,e,n,r}},{key:"browseForFormsControlDialog",value:function(){return t=this.app.getJQuery(),e=this.app.getFormControlsList(),n=this.app.getResourceManager(),r=this.app,t.Deferred((function(i){n.get("/modules/RulesV3/resources/browse-for-form-control-dialog.html").then((function(n){var o=new Ze.a(n),a=r.createDialog("Insert control in SQL query",[{type:Ge.f.OK,callback:function(){a.close();var e=s.getSelectedIndex();if(-1!==e){var n=s.getRows()[e].getDataAt(0),r=t(a.body).find("input[name=insert-as-binding]").is(":checked");i.resolve((r?":":"")+n)}else i.reject(new Error("Canceled"))}},{type:Ge.f.CANCEL,callback:function(){a.close(),i.reject(new Error("Close button pressed"))}}],{width:"500px",height:"500px",onCloseButtonClick:function(){i.reject(new Error("Dialog closed by user"))}});a.dialog.setAttribute("data-dialog-role","browse-for-control-dialog"),a.body.innerHTML=o.parse({});var s=new Xe(t).withEmptyStateHTML("There are no database tables created").withSortingEnabled(!1);t(a.body).find("[data-role=grid-placeholder]").get(0).appendChild(s.getRootDOMNode()),s.createColumn().withColumnName("control_id").withColumnCaption("ID").withWidth(180).withColumnType(Ge.e.STRING),s.createColumn().withColumnName("control_label").withColumnCaption("Label").withWidth(200).withColumnType(Ge.e.STRING);for(var u=0,c=e.length;u<c;u++)s.createRow([e[u].id,e[u].name])}))})).promise();var t,e,n,r}},{key:"queryDatabaseAction",value:function(){var t,e,n;t=this.app.getJQuery(),e=this.app,n=this.app,this.app.getResourceManager().get("/modules/RulesV3/resources/query-database-dialog.html").then((function(r){var i,o,a=new Ze.a(r),s=e.createDialog("Database console",[],{width:"800px"});s.dialog.setAttribute("data-dialog-role","database-console"),s.body.innerHTML=a.parse({});var u=function(e){var r=+new Date;t(s.body).find("[data-role=query-result]").each((function(){var i;(i=this).innerHTML="<div data-role=loading>Loading</div>",t(s.body).find("[data-role=query-statistics]").each((function(){!function(a){a.innerHTML="";try{var s=n.getDatabase().createStatement(e);n.getDatabase().executeStatement(s,{}).then((function(e){i.innerHTML="";var n=+new Date;switch(s.getStatementType()){case y.p.SELECT:!function(e,n,r,i){if(o?o.dispose():o=new Xe(t).withSortingEnabled(!1).withEmptyStateHTML("Query returned no rows"),e.appendChild(o.getRootDOMNode()),r.getRows().length){var a=r.getRows()[0],s=0;for(var u in a)o.createColumn().withColumnName("col_"+s).withColumnCaption(u).withWidth(100).withColumnType(Ge.e.UNKNOWN),s++;for(var c=0,l=r.getRowsAsArray().length,h=r.getRowsAsArray(),f=0,d=h.length;f<d;f++)if(o.createRow(h[f]).withRowIndex(f+1),f>=49){c=d-50;break}t(n).append('<div data-role="info">'+l+" row(s) found in "+(i/1e3).toFixed(3)+" seconds</div>"),0!=c&&t(n).append('<div data-role="info">'+c+" row(s) were not displayed</div>")}}(i,a,e,n-r);break;case y.p.DELETE:case y.p.UPDATE:case y.p.INSERT:!function(e,n,r){t(e).append('<div data-role="info">'+n.getAffectedRows()+" row(s) affected in "+(r/1e3).toFixed(3)+" seconds</div>")}(a,e,n-r)}})).catch((function(t){var e;i.innerHTML="",e=T()(t,Error)?String(t):"string"===typeof t?t:JSON.stringify(t,void 0,4);var n=document.createElement("div");n.setAttribute("data-role","error"),n.textContent=e.replace(/^Error: /g,""),i.appendChild(n)}))}catch(c){i.innerHTML="";var u=document.createElement("div");u.setAttribute("data-role","error"),u.textContent=c.toString().replace(/^Error: /g,""),i.appendChild(u)}}(this)}))}))};t(s.body).find("[data-role=query-builder]").each((function(){var t,e;null===(e=i=null===(t=CodeMirror)||void 0===t?void 0:t(this,{value:"",mode:"text/x-mariadb",lineNumbers:!0}))||void 0===e||e.setSize("100%","80px")})),t(s.body).on("click","button[data-role=run-query]",(function(){var t,e,n=null!==(t=null===(e=i)||void 0===e?void 0:e.getValue())&&void 0!==t?t:"";u(n)}))}))}},{key:"onChangeConnectionCredentials",value:function(){this.applyOriginalState()}}]),t}(),hn=n(42),fn=function(){function t(e){i()(this,t),v()(this,"jq",void 0),v()(this,"i18n",void 0),this.jq=e,this.i18n=new hn.a,this.i18n.setTranslations({myforms_UI_btn_SAVE:"Save",myforms_UI_btn_CANCEL:"Cancel",myforms_UI_btn_OK:"Ok",myforms_UI_btn_CLOSE:"Close",myforms_UI_btn_YES:"Yes",myforms_UI_btn_NO:"No",applications_UI_btn_CREATE:"Create",applications_UI_btn_DONE:"Done",myforms_UI_btn_DELETE:"Delete"})}return a()(t,[{key:"getI18n",value:function(){return this.i18n}},{key:"getJQuery",value:function(){return this.jq}}]),t}(),dn=function(){function t(){i()(this,t)}return a()(t,null,[{key:"create",value:function(t){return _e.a.createVirtualTable([{name:"index",type:y.d.NUMBER,default:0},{name:"name",type:y.d.STRING,default:0},{name:"label",type:y.d.STRING,default:""},{name:"readOnly",type:y.d.BOOLEAN,default:!1},{name:"disabled",type:y.d.BOOLEAN,default:!1},{name:"value",type:y.d.STRING,default:""},{name:"checked",type:y.d.BOOLEAN,default:!1},{name:"visible",type:y.d.BOOLEAN,default:!1},{name:"calculated",type:y.d.BOOLEAN,default:!1}])}}]),t}(),pn=function(){function t(){i()(this,t)}return a()(t,null,[{key:"create",value:function(t){return _e.a.createVirtualTable([{name:"userId",type:y.d.NUMBER,default:0},{name:"userEmail",type:y.d.STRING,default:""}])}}]),t}();function gn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var vn=function(t){l()(n,t);var e=gn(n);function n(t,r,o,a,s){var c,l,h;return i()(this,n),c=e.call(this,new fn(o),o,null,null),v()(u()(c),"applicationId",void 0),v()(u()(c),"formId",void 0),v()(u()(c),"jq",void 0),v()(u()(c),"db",void 0),v()(u()(c),"resourceManager",void 0),v()(u()(c),"formControlsList",[]),v()(u()(c),"commandDispatcher",void 0),v()(u()(c),"onApplicationEnableCheckboxClick",void 0),v()(u()(c),"onCreateNewDatabaseButtonClick",void 0),v()(u()(c),"onExploreDatabaseButtonClick",void 0),v()(u()(c),"onCreateSQLRuleButtonClick",void 0),v()(u()(c),"onRemoveApplicationButtonClick",void 0),v()(u()(c),"onQueryDatabaseButtonClick",void 0),v()(u()(c),"sessionVirtualTable","session"),v()(u()(c),"controlsVirtualTable","controls"),c.jq=o,c.db=a,c.resourceManager=new Ye.a(c.jq,{}),c.applicationId=t,c.formId=r,c.formControlsList=s,c.commandDispatcher=new ln(u()(c)),l=u()(c),h=c.jq,l.db.hasTable("controls")||l.db.withTable("controls",dn.create(l.db)),l.db.hasTable("session")||l.db.withTable("session",pn.create(l.db)),l.onApplicationEnableCheckboxClick=function(t){l._onApplicationEnableCheckboxClick(this)},l.onCreateNewDatabaseButtonClick=function(t){l._onCreateNewTableButtonClick(this)},l.onExploreDatabaseButtonClick=function(t){l._onExploreDatabaseButtonClick(this)},l.onCreateSQLRuleButtonClick=function(t){l._onCreateSQLRuleButtonClick(this)},l.onRemoveApplicationButtonClick=function(t){l._onRemoveApplicationButtonClick(this)},l.onQueryDatabaseButtonClick=function(t){l._onQueryDatabaseButtonClick(this)},h(document).on("click","#app_isenabled_".concat(l.applicationId),l.onApplicationEnableCheckboxClick).on("click","#csvConnectorAppCreateDatabaseButton-".concat(l.applicationId),l.onCreateNewDatabaseButtonClick).on("click","#csvConnectorAppExploreDatabaseButton-".concat(l.applicationId),l.onExploreDatabaseButtonClick).on("click","#csvConnectorAppCustomizeButton-".concat(l.applicationId),l.onCreateSQLRuleButtonClick).on("click","#csvConnectorAppRemoveButton-".concat(l.applicationId),l.onRemoveApplicationButtonClick).on("click","#csvConnectorAppQueryDatabaseButton-".concat(l.applicationId),l.onQueryDatabaseButtonClick).on("click","#csvConnectorAppUseExternalDBButton-".concat(l.applicationId),l._onUseExternalDbButtonClick.bind(l)).on("click","[data-role=csv-remote-connection-dialog] #connection-test-button",l._onTestConnectionButtonClick.bind(l)),h(document).on("change",".ui-dialog select[name=connection-type]",l._onChangeConnectionCredentials.bind(l)).on("change",".ui-dialog input[name=connection-host]",l._onChangeConnectionCredentials.bind(l)).on("change",".ui-dialog input[name=connection-port]",l._onChangeConnectionCredentials.bind(l)).on("change",".ui-dialog input[name=connection-username]",l._onChangeConnectionCredentials.bind(l)).on("change",".ui-dialog input[name=connection-password]",l._onChangeConnectionCredentials.bind(l)).on("change",".ui-dialog input[name=connection-database-name]",l._onChangeConnectionCredentials.bind(l)),c}return a()(n,[{key:"getApplicationId",value:function(){return this.applicationId}},{key:"getFormId",value:function(){return this.formId}},{key:"getResourceManager",value:function(){return this.resourceManager}},{key:"getJQuery",value:function(){return this.jq}},{key:"getDatabase",value:function(){return this.db}},{key:"getFormControlsList",value:function(){return this.formControlsList}},{key:"destroy",value:function(){var t,e;t=this.jq,e=this,t(document).off("click","#app_isenabled_"+e.applicationId,e.onApplicationEnableCheckboxClick).off("click","#csvConnectorAppCreateDatabaseButton-"+e.applicationId,e.onCreateNewDatabaseButtonClick).off("click","#csvConnectorAppExploreDatabaseButton-"+e.applicationId,e.onExploreDatabaseButtonClick).off("click","#csvConnectorAppCustomizeButton-"+e.applicationId,e.onCreateSQLRuleButtonClick).off("click","#csvConnectorAppRemoveButton-"+e.applicationId,e.onRemoveApplicationButtonClick),this.db=null,this.jq=null}},{key:"_onApplicationEnableCheckboxClick",value:function(t){this.commandDispatcher.setApplicationEnabledStateAction(t.checked)}},{key:"_onCreateNewTableButtonClick",value:function(t){this.commandDispatcher.createNewTableAction()}},{key:"_onExploreDatabaseButtonClick",value:function(t){this.commandDispatcher.exploreDatabasesAction()}},{key:"_onCreateSQLRuleButtonClick",value:function(t){this.commandDispatcher.editFormRulesAction()}},{key:"_onRemoveApplicationButtonClick",value:function(t){this.commandDispatcher.removeApplicationAction()}},{key:"_onQueryDatabaseButtonClick",value:function(t){this.commandDispatcher.queryDatabaseAction()}},{key:"_onUseExternalDbButtonClick",value:function(){this.commandDispatcher.useExternalDbAction()}},{key:"_onTestConnectionButtonClick",value:function(){this.commandDispatcher.testConnection()}},{key:"_onChangeConnectionCredentials",value:function(){this.commandDispatcher.onChangeConnectionCredentials()}},{key:"createNotification",value:function(t){arguments.length>2&&void 0!==arguments[2]||Ge.i.DEFAULT;console.warn("NOTIFICATION: ",t);try{messages_to_user_push_message(t,0,this.applicationId)}catch(e){}return null}},{key:"getVirtualTables",value:function(){this.db.hasTable(this.controlsVirtualTable)||this.db.withTable(this.controlsVirtualTable,dn.create(this.db)),this.db.hasTable(this.sessionVirtualTable)||this.db.withTable(this.sessionVirtualTable,pn.create(this.db))}}]),n}(je.a),mn=function(){function t(){i()(this,t)}return a()(t,null,[{key:"initDatabaseFunctions",value:function(t){return t.hasLocalFunction("DATE_DIFF")||t.withFunction("DATE_DIFF",Ue.a.DATE_DIFF,!0,!1),t.hasLocalFunction("DATE_BETWEEN")||t.withFunction("DATE_BETWEEN",Ue.a.DATE_BETWEEN,!0,!1),t.hasLocalFunction("DATE_GET_NUMBER_OF_DAYS")||t.withFunction("DATE_GET_NUMBER_OF_DAYS",Ue.a.DATE_GET_NUMBER_OF_DAYS,!0,!1),t.hasLocalFunction("TIME_GET_NUMBER_OF_MINUTES")||t.withFunction("TIME_GET_NUMBER_OF_MINUTES",Ue.a.TIME_GET_NUMBER_OF_MINUTES,!0,!1),t.hasLocalFunction("DATE_FORMAT")||t.withFunction("DATE_FORMAT",Ue.a.DATE_FORMAT,!0,!1),t.hasLocalFunction("CURRENT_DATE")||t.withFunction("CURRENT_DATE",Ue.a.CURRENT_DATE,!0,!1),t.hasLocalFunction("DATE_COMPARE")||t.withFunction("DATE_COMPARE",Ue.a.DATE_COMPARE,!0,!1),t.hasLocalFunction("TIME_COMPARE")||t.withFunction("TIME_COMPARE",Ue.a.TIME_COMPARE,!0,!1),t.hasLocalFunction("DATE_ADD_INTERVAL")||t.withFunction("DATE_ADD_INTERVAL",Ue.a.DATE_ADD_INTERVAL,!0,!1),t.hasLocalFunction("CONCAT")||t.withFunction("CONCAT",Ue.a.CONCAT,!0,!0),t.hasLocalFunction("SUM")||t.withFunction("SUM",Ue.a.SUM,!0,!1),t.hasLocalFunction("EQUALS")||t.withFunction("EQUALS",Ue.a.EQUALS,!0,!1),t.hasLocalFunction("COMPARE")||t.withFunction("COMPARE",Ue.a.COMPARE,!0,!1),t.hasLocalFunction("IF")||t.withFunction("IF",Ue.a.IF,!0,!1),t.hasLocalFunction("BOOL")||t.withFunction("BOOL",Ue.a.BOOL,!0,!1),t.hasLocalFunction("INT")||t.withFunction("INT",Ue.a.INT,!0,!1),t.hasLocalFunction("FLOAT")||t.withFunction("FLOAT",Ue.a.FLOAT,!0,!1),t.hasLocalFunction("STRING")||t.withFunction("STRING",Ue.a.STRING,!0,!1),t.hasLocalFunction("ALERT")||t.withFunction("ALERT",Ue.a.ALERT,!0,!1),t.hasLocalFunction("DATE_UID")||t.withFunction("DATE_UID",Ue.a.UNIQUE_ID_BASED_ON_DATE_MILISECOND,!0,!1),t.hasLocalFunction("WORKING_DAYS_BETWEEN")||t.withFunction("WORKING_DAYS_BETWEEN",null,!1,!0),t.hasLocalFunction("RESERVATION_DATE_INTERSECT")||t.withFunction("RESERVATION_DATE_INTERSECT",null,!1,!0),t.hasLocalFunction("FROM_BASE64")||t.withFunction("FROM_BASE64",Ue.a.FROM_BASE64,!0,!0),t.hasLocalFunction("TO_BASE64")||t.withFunction("TO_BASE64",Ue.a.TO_BASE64,!0,!0),t.hasLocalFunction("REPLACE")||t.withFunction("REPLACE",Ue.a.REPLACE,!0,!0),t}}]),t}(),yn=function(){function t(){i()(this,t),v()(this,"queries",{}),v()(this,"active",!1)}return a()(t,[{key:"setActive",value:function(t){return this.active=t,this.active||(this.queries={}),this}},{key:"isActive",value:function(){return this.active}},{key:"isQueryDuplicate",value:function(t){if(!this.active)return!1;if("number"===typeof this.queries[t]&&+new Date-this.queries[t]<50)return!0;return!1}},{key:"storeQuery",value:function(t){this.active&&(this.queries[t]=+new Date)}}]),t}(),En=function(){function t(){i()(this,t),v()(this,"enabled",!1);try{window.localStorage&&window.localStorage.getItem&&window.localStorage.getItem("FormRulesDebugging")?(console.log("Rules v3 Logger enabled"),this.enabled=!0):console.log("Rules v3 Logger disabled")}catch(e){console.log("Rules v3 Logger disabled")}}return a()(t,[{key:"log",value:function(){if(!this.enabled&&!window.FormRulesDebugging)return this;for(var t=new Date,e=["[LOG]["+t.getDate()+"."+(t.getMonth()+1)+"."+t.getFullYear()+"@"+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+","+t.getMilliseconds()+"]"],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var o=0,a=r.length;o<a;o++)e.push("string"===typeof r[o]?r[o]:JSON.stringify(r[o]));return console.log(e.join(" ")),this}}]),t}();function Tn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}n.d(e,"a",(function(){return Nn}));var Nn=function(t){l()(n,t);var e=Tn(n);function n(){var t;return i()(this,n),t=e.call(this),v()(u()(t),"jq",void 0),v()(u()(t),"rpcEndpointName",void 0),v()(u()(t),"rpcEndpointSalesforceName",void 0),v()(u()(t),"authorizationToken",void 0),v()(u()(t),"authorizationTokenSalesforce",void 0),v()(u()(t),"db",void 0),v()(u()(t),"adminApplication",void 0),v()(u()(t),"rules",[]),v()(u()(t),"domAbstractionLayer",void 0),v()(u()(t),"logger",void 0),v()(u()(t),"initialized",!1),v()(u()(t),"previouslySubmittedData",null),v()(u()(t),"duplicateQueryDiscarder",void 0),v()(u()(t),"salesforceAffectedControlsTriggers",void 0),v()(u()(t),"salesforceAffectedControls",void 0),v()(u()(t),"statementCache",{}),v()(u()(t),"applicationConfig",void 0),t.db=mn.initDatabaseFunctions(new xe),t.logger=new En,t.duplicateQueryDiscarder=new yn,t}return a()(n,[{key:"getDatabase",value:function(){return this.db}},{key:"withJQuery",value:function(t){return this.jq=t,this.db.initPlanner(),this}},{key:"withRPCEndpointName",value:function(t){return this.db.withRPCEndpointName(this.rpcEndpointName=t),this}},{key:"withRPCEndpointSalesforceName",value:function(t){return this.db.withRPCEndpointSalesforceName(this.rpcEndpointSalesforceName=t),this}},{key:"withAuthorizationToken",value:function(t){return this.db.withAuthorizationToken(this.authorizationToken=t),this}},{key:"withApplicationConfig",value:function(t){return this.db.withApplicationConfig(this.applicationConfig=t),this}},{key:"withAuthorizationTokenSalesforce",value:function(t){return this.db.withAuthorizationTokenSalesforce(this.authorizationTokenSalesforce=t),this}},{key:"withJQLBackendTables",value:function(t){if(null===t)return this;for(var e=this.db.enumerateTables(),n=0,r=e.length;n<r;n++)this.db.unmountTable(e[n].name);return this.db.withTablesList(t),this}},{key:"withJQLTable",value:function(t,e){return this.db.withTable(t,e),this}},{key:"exploreDatabase",value:function(t){if(!this.domAbstractionLayer)throw new Error("This operation is only available in view-form page!");new ln(t).exploreDatabasesAction()}},{key:"bootstrapCSVConnectorApplication",value:function(t,e,n){var r=/^applications_box_([\d]+)$/.exec(t);if(r){var i=parseInt(r[1]);if(!isNaN(i)){if(this.adminApplication){if(this.adminApplication.getApplicationId()===i&&this.adminApplication.getFormId()===e)return void this.adminApplication.getVirtualTables();this.adminApplication.destroy()}this.adminApplication=new vn(i,e,window.$||window.$x,this.getDatabase(),n),console.warn("Bootstrapped admin application #".concat(i))}}}},{key:"withDOMAbstractionLayer",value:function(t){return this.domAbstractionLayer=t,this}},{key:"getRules",value:function(){return this.rules}},{key:"resetRules",value:function(t){this.rules=t}},{key:"withRules",value:function(t){for(var e=0,n=(t||[]).length;e<n;e++)this.rules.push(t[e]);return this.logger.log("Added ".concat((t||[]).length," rules in RulesV3 engine")),this}},{key:"initializeInFormViewMode",value:function(){var t=this;if(this.initialized)throw new Error("RulesV3: Engine already initialized!");if(!this.domAbstractionLayer)throw new Error("Cannot initialize RulesV3 engine: No DOMAbstraction layer provided at this point!");return this.domAbstractionLayer.on("control-event",(function(e,n,r,i){t.dispatchControlEvent(e,r,n,i)})),this.domAbstractionLayer.trigger("initialize"),this.initialized=!0,this.logger.log("Initialized RulesV3 in view form mode"),this.markUsedSalesforceControls(),this}},{key:"dispatchControlEvent",value:function(t,e,n,r){var i=this,o=e;if(t===y.a.REINITIALIZE&&this.initializeControlValueWithPreviouslySubmittedData(e,n,r),this.rules&&this.rules.length){var a=null,s=null,u=null;n&&(!function(t){try{var e=t(n).parents('div[data-type="repeatable-group"]')[0];a=t(e).data("repeatable-path")}catch(r){}}(window.jQuery||window.$||window.$x),a&&(u="".concat(e,"_rp").concat(String(a)),s=n.value));for(var c=0,l=this.rules.length;c<l;c++)null!==(e="undefined"!==typeof this.rules[c].repeatablePath&&a?u:o)&&this.areTheSameControlIDs(String(this.rules[c].controlId),e)&&null!==t&&(t===this.rules[c].eventType||y.a.ALL_EVENTS===this.rules[c].eventType&&y.a.REINITIALIZE!==t||y.a.INIT===t&&this.rules[c].isRule)&&null!==this.rules[c].actions&&this.rules[c].actions.length&&this.executeControlEventActions(this.rules[c].actions,(function(){return s||i.domAbstractionLayer.getControlValueById(e)}),r,t,a);this.trigger("dispatch",e)}}},{key:"initializeControlValueWithPreviouslySubmittedData",value:function(t,e,n){null!==this.domAbstractionLayer&&this.domAbstractionLayer.initializeControlValueWhenTheFormIsPrefillingASubmission(t,n)}},{key:"areTheSameControlIDs",value:function(t,e){return t.replace(/^control_/g,"")===e.replace(/^control_/g,"")}},{key:"executeControlEventActions",value:function(t,e,n,r,i){var o=this;i=i||null;for(var a,s,u,c=+new Date,l=0,h=t.length;l<h;l++)if((a=t[l].jql)&&!/^([\s]+)?$/.test(a))if(this.duplicateQueryDiscarder.isQueryDuplicate(a))this.logger.log("DISCARD: ",a),setTimeout((function(){o.db.triggerNextQuery()}));else if(this.duplicateQueryDiscarder.storeQuery(a),!t[l].controlId||this.domAbstractionLayer.controlExistsInForm(String(t[l].controlId))){s=function(){return{this:r!==y.a.REINITIALIZE?e():n}},this.logger.log("SQL: ".concat(a));try{var f=a+t[l].controlId;(u=this.statementCache[f])||(u=this.db.createStatement(a),this.statementCache[f]=u),function(t,e){o.db.executeStatement(t,s).then((function(n){var r=+new Date;t.getStatementType()===y.p.SELECT?(o.logger.log("".concat(t.getStatementType()," statement (").concat(((r-c)/1e3).toFixed(3),"s): "),JSON.stringify(n.getRowsAsArray()),"to control: ",String(e.controlId)),o.domAbstractionLayer.setControlValueById(String(e.controlId),n.getRowsAsArray(),null,i)):o.logger.log("".concat(t.getStatementType()," statement (").concat(((r-c)/1e3).toFixed(3),"s): "),n.getAffectedRows(),"rows were affected")})).catch((function(t){console.warn("SQL failed: ".concat(String(a),": ").concat(t.toString())),console.error(t)}))}(u,t[l])}catch(d){this.logger.log("JQL failed: ","".concat(String(a),": ").concat(d.toString())),console.error(d)}}else console.warn("SKIP QUERY: ","".concat(a," => control id ").concat(JSON.stringify(t[l].controlId)," not found in form")),setTimeout((function(){o.db.triggerNextQuery()}));else setTimeout((function(){o.db.triggerNextQuery()}))}},{key:"getLogger",value:function(){return this.logger}},{key:"getDOMAbstractionLayer",value:function(){return this.domAbstractionLayer}},{key:"getPreviouslySubmittedFormData",value:function(){return this.previouslySubmittedData}},{key:"getSubmissionValueForControlId",value:function(t){return null!==this.previouslySubmittedData&&t&&this.previouslySubmittedData.hasOwnProperty(t)?this.previouslySubmittedData[t]:null}},{key:"createDOMAbstractionLayer",value:function(t){switch(t){case Me.LEGACY_EDITOR:return new Ve(this.jq,this);case Me.LATEST_EDITOR_VERSION:return new window.AbstractionLayerV2(arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]);default:throw new Error("Sorry, but RulesV3 engine don't know how to create a DOM Abstraction layer of type ".concat(JSON.stringify(this.domAbstractionLayer)))}}},{key:"getDuplicateQueryDiscarder",value:function(){return this.duplicateQueryDiscarder}},{key:"markUsedSalesforceControls",value:function(){for(var t=[],e=[],n=0,r=this.rules||[],i=r.length;n<i;n++)if(r[n].isSalesforce){t.push(r[n].controlId);for(var o=0,a=r[n].actions||[],s=a.length;o<s;o++)e.push(a[o].controlId)}this.salesforceAffectedControlsTriggers=t,this.salesforceAffectedControls=e}},{key:"getSalesforceAffectedControlsTriggers",value:function(){return this.salesforceAffectedControlsTriggers}},{key:"getSalesforceAffectedControls",value:function(){return this.salesforceAffectedControls}},{key:"hasSalesforceRule",value:function(){return this.rules.some((function(t){return!0===t.isSalesforce}))}},{key:"isSalesforceWithPrefillTriggerRule",value:function(){var t=[y.a.REINITIALIZE,y.a.CHANGE];return this.rules.every((function(e){return t.includes(e.eventType)}))}},{key:"shouldShowLoaderOnSalesforce",value:function(){return this.hasSalesforceRule&&!this.isSalesforceWithPrefillTriggerRule()}},{key:"shouldShowLoader",value:function(){return 0!==this.rules.length&&(this.rules.length>n.SHOW_LOADER_RULES_COUNT||this.shouldShowLoaderOnSalesforce())}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new n)}}]),n}(m.a);v()(Nn,"SHOW_LOADER_RULES_COUNT",100),v()(Nn,"instance",void 0)},187:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(5),i=n.n(r),o=n(6),a=n.n(o),s=n(3),u=n.n(s),c=n(7),l=n.n(c),h=n(8),f=n.n(h),d=n(4),p=n.n(d),g=n(0),v=n.n(g);function m(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var y=function(t){l()(n,t);var e=m(n);function n(t,r){var o;if(i()(this,n),o=e.call(this),v()(u()(o),"jq",void 0),v()(u()(o),"cache",{}),v()(u()(o),"started",{}),v()(u()(o),"loadedJS",{}),o.jq=t,r)for(var a in r)r.hasOwnProperty(a)&&o.preloadResource(a,r[a]);return o}return a()(n,[{key:"preloadResource",value:function(t,e){this.cache[t]=e}},{key:"isPageNotFoundBuffer",value:function(t){return t&&"string"===typeof t&&t.indexOf('data-page-name="404error">')>-1}},{key:"getWithPromise",value:function(t){var e=this;return new Promise((function(n,r){e.get(t).then((function(t){n(t)})).fail((function(t){r(t)}))}))}},{key:"get",value:function(t){if(!t||"string"!==typeof t)throw new Error("Invalid argument: non-empty string expected!");return e=this,n=this.jq,void 0!==e.cache[t]?n.Deferred((function(n){n.resolve(e.cache[t])})).promise():e.started[t]?n.Deferred((function(n){e.on("fetch_".concat(t),(function(){n.resolve(e.cache[t])})),e.on("error_".concat(t),(function(){n.reject(new Error('Failed fetching resource: "'.concat(t,'"')))}))})).promise():(e.started[t]=(new Date).toString(),n.Deferred((function(r){var i=-1===t.indexOf("?")?"".concat(t,"?_=").concat(+new Date):"".concat(t,"&_=").concat(+new Date);n.get(i).then((function(n){if(e.isPageNotFoundBuffer(n))return r.reject(new Error("Resource ".concat(t," seems to be a not-found page!"))),e.trigger("error_".concat(t)),e.off("fetch_".concat(t)),void e.off("error_".concat(t));e.cache[t]=n,delete e.started[t],r.resolve(e.cache[t]),e.trigger("fetch_".concat(t)),e.off("fetch_".concat(t)),e.off("error_".concat(t))})).fail((function(){window.CFTracker&&window.CFTracker.event("editor_load_resource_error"),r.reject(new Error('Failed fetching resource: "'.concat(t,'"'))),e.trigger("error_".concat(t)),e.off("fetch_".concat(t)),e.off("error_".concat(t))}))})).promise());var e,n}},{key:"loadJavascript",value:function(t){return e=this.jq,this.loadedJS[t]?e.Deferred((function(t){t.resolve(!0)})).promise():e.Deferred((function(e){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",t),n.onload=function(){e.resolve(!0)},n.onerror=function(){CFTracker&&CFTracker.event("editor_load_resource_error"),e.reject(new Error('Failed to load external javascript: "'.concat(t,'"')))},document.getElementsByTagName("head")[0].appendChild(n)})).promise();var e}}]),n}(n(29).a)},255:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(20),i=n.n(r),o=n(5),a=n.n(o),s=n(6),u=n.n(s),c=n(0),l=n.n(c),h=n(9),f=function(){function t(e,n,r,i){a()(this,t),l()(this,"app",void 0),l()(this,"jq",void 0),l()(this,"notificationsAreaContainer",void 0),l()(this,"mainApplicationNode",void 0),this.app=e,this.jq=n,this.notificationsAreaContainer=r,this.mainApplicationNode=i}return u()(t,[{key:"alert",value:function(t,e,n,r){var o=this.createDialog(String(t||this.app.getI18n().translateText("myforms_UI_dlg_title_ALERT")),[{type:h.f.OK,callback:function(t,e){n&&i()(n,Function)&&n(),e.close()}}],{width:r&&r.width?r.width:"500px",height:r&&r.height?r.height:void 0});o.body.textContent=String(e||"")||this.app.getI18n().translateText("myforms_UI_dlg_title_ALERT"),o.body.setAttribute("data-dialog-role","system-dialog")}},{key:"legacyAlert",value:function(t,e){var n=window.IEpromptbeta;n?n(t):alert(e)}},{key:"prompt",value:function(t,e,n,r){var o=this.createDialog(String(t||this.app.getI18n().translateText("myforms_UI_dlg_title_QUESTION")),[{type:h.f.YES,callback:function(t,e){n&&i()(n,Function)&&n(),e.close()}},{type:h.f.NO,callback:function(t,e){r&&i()(r,Function)&&(r(),h.f.DOWNLOAD),e.close()}}],{width:"600px"});o.body.textContent=String(e||"")||this.app.getI18n().translateText("myforms_UI_dlg_title_QUESTION"),o.body.setAttribute("data-dialog-role","system-dialog")}},{key:"createDialog",value:function(e,n,r){return function(i,o){var a=document.createElement("div"),s=document.createElement("div"),u=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div"),f=document.createElement("div"),d=document.createElement("div");a.tabIndex=0,a.className="ui-modal",s.className="ui-dialog",u.className="ui-titlebar",u.textContent=e,c.className="ui-titlebody",f.className="ui-body",d.className="ui-buttons bootstrap-iso",l.className="ui-close i123-close",a.appendChild(s),u.appendChild(c),u.appendChild(l),s.appendChild(u),s.appendChild(f);var p=!1;function g(t){var e;t.preventDefault(),t.stopPropagation(),o(d).find("> button").each((function(){switch(parseInt(o(this).attr("data-role").replace(/^button-type-/,""))){case h.f.OK:case h.f.YES:case h.f.SAVE:case h.f.FORM_MIGRATE:e||(e=this)}})),e&&o(e).click()}var v={close:function(){p||(o(f).find("form").off("submit",g),a.parentNode.removeChild(a),p=!0)},body:f,titlebody:c,dialog:s,setHTML:function(t){f.innerHTML=t,o(f).find("form").on("submit",g)},clearInlineErrors:function(){o(f).find("label.error").text("")},hide:function(){o(a).addClass("hidden")},show:function(){o(a).removeClass("hidden")},isClosed:function(){return p}};l.onclick=function(){if(r&&r.onCloseButtonClick)try{r.onCloseButtonClick()}catch(t){}v.close()},a.addEventListener("keyup",(function(t){27==(t.keyCode||t.charCode)&&(v.close(),r&&r.onCloseButtonClick&&r.onCloseButtonClick())}),!1);for(var m=0,y=n.length;m<y;m++)!function(e){var n=document.createElement("button");n.textContent=i.getDialogButtonLabel(e.type),d.appendChild(n),n.setAttribute("data-role","button-type-".concat(e.type)),n.className="btn ".concat(t.getDialogButtonClass(e.type)),n.onclick=function(){e.callback(e.type,v)}}(n[m]);return s.appendChild(d),r&&(r.width&&(s.style.width=r.width),r.height&&(s.style.height=r.height)),document.body.appendChild(a),a.focus(),a.addEventListener("keydown",(function(t){var e=t.target||t.srcElement;e&&-1===["input","select","textarea"].indexOf(e.nodeName.toLowerCase())&&(e.hasAttribute("data-allow-keyboard")||t.stopPropagation())}),!0),a.addEventListener("keypress",(function(t){var e=t.target||t.srcElement;e&&-1===["input","select","textarea"].indexOf(e.nodeName.toLowerCase())&&t.stopPropagation()}),!0),a.addEventListener("keyup",(function(t){var e=t.target||t.srcElement;e&&-1===["input","select","textarea"].indexOf(e.nodeName.toLowerCase())&&t.stopPropagation()}),!0),v}(this,this.jq)}},{key:"getDialogButtonLabel",value:function(t){switch(t){case h.f.OK:return this.app.getI18n().translateText("myforms_UI_btn_OK");case h.f.YES:return this.app.getI18n().translateText("myforms_UI_btn_YES");case h.f.ABORT:return this.app.getI18n().translateText("myforms_UI_btn_ABORT");case h.f.RETRY:return this.app.getI18n().translateText("myforms_UI_btn_RETRY");case h.f.CANCEL:return this.app.getI18n().translateText("myforms_UI_btn_CANCEL");case h.f.IGNORE:return this.app.getI18n().translateText("myforms_UI_btn_IGNORE");case h.f.NO:return this.app.getI18n().translateText("myforms_UI_btn_NO");case h.f.SAVE:return this.app.getI18n().translateText("myforms_UI_btn_SAVE");case h.f.CHANGE:return this.app.getI18n().translateText("myforms_UI_btn_CHANGE");case h.f.DELETE:return this.app.getI18n().translateText("myforms_UI_btn_DELETE");case h.f.DOWNLOAD:return this.app.getI18n().translateText("myforms_UI_btn_DOWNLOAD");case h.f.CLOSE:return this.app.getI18n().translateText("myforms_UI_btn_CLOSE");case h.f.ENABLE_COMPLIANCE:return this.app.getI18n().translateText("myformsHipaaChangeStatusTitle0");case h.f.DISABLE_COMPLIANCE:return this.app.getI18n().translateText("myformsHipaaChangeStatusTitle1");case h.f.CREATE:return this.app.getI18n().translateText("applications_UI_btn_CREATE");case h.f.DONE:return this.app.getI18n().translateText("applications_UI_btn_DONE");case h.f.TRY_FORM:return this.app.getI18n().translateText("oldEditor_TryFormBtn");case h.f.NO_THANKS:return this.app.getI18n().translateText("editForm_noThanksButton");case h.f.UPDATE:return this.app.getI18n().translateText("Update");case h.f.MAYBE_LATER:return this.app.getI18n().translateText("wix_popupMaybeLater");case h.f.UPGRADE_NOW:return this.app.getI18n().translateText("LinkUpdateNowTitle");case h.f.UPGRADE_NOW_PAYWALL:return this.app.getI18n().translateText("paywall_upgrade_button_1");case h.f.CONTINUE:return this.app.getI18n().translateText("userServeyPopup_continue");case h.f.KEEP_EDITING_FORM:return this.app.getI18n().translateText("edt_UI_btn_keep_editing_form");case h.f.CLOSE_EDITOR:return this.app.getI18n().translateText("edt_UI_btn_close_editor");case h.f.IMPORT:return this.app.getI18n().translateText("edt_UI_btn_import");case h.f.ADD_DOMAIN:return this.app.getI18n().translateText("js_iep_domainalias05");case h.f.VALIDATE:return this.app.getI18n().translateText("edt_UI_btn_validate_smtp");case h.f.FORM_MIGRATE:return"Migrate";case h.f.REQUEST_A_DEMO_CORPORATE_PAYWALL:return this.app.getI18n().translateText("paywall_request_a_demo");case h.f.UPGRADE_TO_ENTERPRISE:return this.app.getI18n().translateText("paywall_upgrade_button_2");case h.f.CONTACT_SUPPORT:return this.app.getI18n().translateText("paywalls_contact_support");default:throw new Error("Invalid button type: ".concat(JSON.stringify(t),". Please use one of EDialogButtonType types"))}}},{key:"getCurrentNotification",value:function(){return this.notificationsAreaContainer.firstElementChild}},{key:"createNotification",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.i.DEFAULT,i=arguments.length>3?arguments[3]:void 0,o=document.createElement("div");if(o.className="notification",o.innerHTML=n?t.escapeHTML(e):e,i||void 0===i){var a=document.createElement("div");a.className="close",o.appendChild(a)}switch(this.notificationsAreaContainer.innerHTML="",r){case h.i.DEFAULT:break;case h.i.ERROR:this.jq(o).prepend('<span class="i123-warning"></span>'),this.jq(o).addClass("ERROR");break;case h.i.SUCCESS:this.jq(o).prepend('<span class="i123-check"></span>'),this.jq(o).addClass("SUCCESS")}return this.notificationsAreaContainer.appendChild(o),this.jq(this.mainApplicationNode).addClass("with-notification"),o}},{key:"createResponsiveNotification",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.i.DEFAULT,i=arguments.length>3?arguments[3]:void 0,o=document.createElement("div"),a=n?t.escapeHTML(e):e;if(o.className="notification",o.innerHTML='<span class="notification-content">'.concat(a,"</span>"),i||void 0===i){var s=document.createElement("div");s.className="close",o.appendChild(s)}switch(this.notificationsAreaContainer.innerHTML="",r){case h.i.DEFAULT:break;case h.i.ERROR:this.jq(o).prepend('<span class="i123-warning"></span>'),this.jq(o).addClass("ERROR");break;case h.i.SUCCESS:this.jq(o).prepend('<span class="i123-check"></span>'),this.jq(o).addClass("SUCCESS")}return this.notificationsAreaContainer.appendChild(o),this.jq(this.mainApplicationNode).addClass("with-notification"),o}},{key:"closeAllNotifications",value:function(){this.jq(this.mainApplicationNode).removeClass("with-notification"),this.notificationsAreaContainer.innerHTML=""}},{key:"getRootNode",value:function(){return this.mainApplicationNode}}],[{key:"getDialogButtonClass",value:function(t){switch(t){case h.f.OK:case h.f.YES:case h.f.SAVE:case h.f.CHANGE:case h.f.DOWNLOAD:case h.f.ENABLE_COMPLIANCE:case h.f.CREATE:case h.f.DONE:case h.f.TRY_FORM:case h.f.UPDATE:case h.f.UPGRADE_NOW:case h.f.UPGRADE_NOW_PAYWALL:case h.f.CONTINUE:case h.f.KEEP_EDITING_FORM:case h.f.IMPORT:case h.f.ADD_DOMAIN:case h.f.VALIDATE:case h.f.FORM_MIGRATE:case h.f.REQUEST_A_DEMO_CORPORATE_PAYWALL:case h.f.UPGRADE_TO_ENTERPRISE:case h.f.CONTACT_SUPPORT:return"btn-secondary-cta";case h.f.DELETE:case h.f.DISABLE_COMPLIANCE:return"btn-secondary-red";default:return"btn-outline"}}},{key:"escapeHTML",value:function(e){t.HTMLEscaper.textContent=e;var n=t.HTMLEscaper.innerHTML;return t.HTMLEscaper.textContent="",n}}]),t}();l()(f,"HTMLEscaper",document.createElement("div"))},28:function(t,e,n){"use strict";var r,i=n(5),o=n.n(i),a=n(6),s=n.n(a),u=n(0),c=n.n(u);!function(t){t[t.TOKEN_VAR=0]="TOKEN_VAR",t[t.TOKEN_IF=1]="TOKEN_IF",t[t.TOKEN_ELSE=2]="TOKEN_ELSE",t[t.TOKEN_UNLESS=3]="TOKEN_UNLESS",t[t.TOKEN_EACH=4]="TOKEN_EACH",t[t.TOKEN_END=5]="TOKEN_END",t[t.TOKEN_TEXT=6]="TOKEN_TEXT",t[t.TOKEN_WITH=7]="TOKEN_WITH",t[t.TOKEN_COMMENT=8]="TOKEN_COMMENT",t[t.TOKEN_EQUALS=9]="TOKEN_EQUALS"}(r||(r={}));var l=n(20),h=n.n(l),f=function(){function t(e,n,r){o()(this,t),c()(this,"model",void 0),c()(this,"parent",null),c()(this,"helpers",void 0),this.model=e,this.parent=n||null,this.helpers=r||[]}return s()(t,[{key:"getModel",value:function(){return this.model}},{key:"get",value:function(t){if("this"===t)return this.model;var e,n=t.split("/"),r=n.length;return null===(e=r>1?this.cd(n.slice(0,r-1).join("/")).get(n[r-1]):".."==n[0]?this.getParent().getModel():this.model[n[0]])||void 0===e?"":e}},{key:"getHelper",value:function(t){for(var e=0,n=this.helpers.length;e<n;e++)if(this.helpers[e].name===t)return this.helpers[e];throw new Error('HELPER "'.concat(t,'" not found!'))}},{key:"isNotEmpty",value:function(t){var e=this.get(t);return!!e&&(!h()(e,Array)||0!==e.length)}},{key:"equals",value:function(t,e){return this.get(t)===this.get(e)}},{key:"cd",value:function(e){for(var n=e.split("/"),r=this,i=0,o=n.length;".."==e[i];){if(!r.getParent())throw new Error("Illegal path: ".concat(n.join("/")));r=r.getParent(),i++}for(;i<o;){if(".."==n[i]){if(!r.getParent())throw new Error("Illegal path: ".concat(n.join("/")));r=r.getParent()}else if("this"==n[i]&&0==i);else{if(!h()(r.getModel(),Object)||void 0==r.getModel()[n[i]])throw new Error("Illegal path: ".concat(n.join("/")));r=new t(r.getModel()[n[i]],this,this.helpers)}i++}return r}},{key:"each",value:function(e,n){var r=this.get(e)||[];if(r&&h()(r,Array))for(var i=0,o=r.length;i<o;i++)n(new t(r[i],this,this.helpers))}},{key:"getParent",value:function(){if(this.parent)return this.parent;throw new Error("Failed to get context parent!")}}]),t}(),d=n(3),p=n.n(d),g=n(7),v=n.n(g),m=n(8),y=n.n(m),E=n(4),T=n.n(E),N=function(){function t(e,n){o()(this,t),c()(this,"parent",null),c()(this,"type",void 0),c()(this,"params",void 0),this.type=e,this.params=n}return s()(t,[{key:"withParent",value:function(t){return this.parent=t,this}},{key:"getParent",value:function(){return this.parent}},{key:"getBlockType",value:function(){return this.type}},{key:"getParam",value:function(t){return this.params&&this.params[t]||null}},{key:"setParam",value:function(t,e){this.params[t]=e}}]),t}();function R(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=T()(t);if(e){var i=T()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}var b=function(t){v()(n,t);var e=R(n);function n(t){var i;if(o()(this,n),i=e.call(this,r.TOKEN_IF,[]),c()(p()(i),"elseAppended",!1),c()(p()(i),"trueBranchChildren",[]),c()(p()(i),"falseBranchChildren",[]),i.params[0]=H.normalizePath(t[0]),null===i.params[0])throw new Error("Illegal IF variable: ".concat(t[0]));return i}return s()(n,[{key:"append",value:function(t){if(t.getBlockType()===r.TOKEN_ELSE){if(this.elseAppended)throw new Error("Else appended!");return this.elseAppended=!0,t}return this.elseAppended?this.falseBranchChildren.push(t):this.trueBranchChildren.push(t),t.withParent(this)}},{key:"allowChildren",value:function(){return!0}},{key:"parse",value:function(t){var e="";if(t.isNotEmpty(this.getParam(0)))for(var n=0,r=this.trueBranchChildren.length;n<r;n++)e=e.concat(this.trueBranchChildren[n].parse(t));else for(var i=0,o=this.falseBranchChildren.length;i<o;i++)e=e.concat(this.falseBranchChildren[i].parse(t));return e}}]),n}(N);function S(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=T()(t);if(e){var i=T()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}var w=function(t){v()(n,t);var e=S(n);function n(t){var i;if(o()(this,n),i=e.call(this,r.TOKEN_UNLESS,[]),c()(p()(i),"elseAppended",!1),c()(p()(i),"trueBranchChildren",[]),c()(p()(i),"falseBranchChildren",[]),i.params[0]=H.normalizePath(t[0]),null===i.params[0])throw new Error("Illegal UNLESS variable: ".concat(t[0]));return i}return s()(n,[{key:"append",value:function(t){if(t.getBlockType()===r.TOKEN_ELSE){if(this.elseAppended)throw new Error("Else appended!");this.elseAppended=!0}else this.elseAppended?this.falseBranchChildren.push(t):this.trueBranchChildren.push(t);return t.withParent(this)}},{key:"allowChildren",value:function(){return!0}},{key:"parse",value:function(t){var e="";if(t.isNotEmpty(this.getParam(0)))for(var n=0,r=this.falseBranchChildren.length;n<r;n++)e=e.concat(this.falseBranchChildren[n].parse(t));else for(var i=0,o=this.trueBranchChildren.length;i<o;i++)e=e.concat(this.trueBranchChildren[i].parse(t));return e}}]),n}(N);function O(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=T()(t);if(e){var i=T()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}var _=function(t){v()(n,t);var e=O(n);function n(){return o()(this,n),e.call(this,r.TOKEN_END,null)}return s()(n,[{key:"allowChildren",value:function(){return!1}},{key:"parse",value:function(t){return""}},{key:"append",value:function(t){throw new Error("Cannot append something into a END block!")}}]),n}(N);function I(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=T()(t);if(e){var i=T()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}var D=function(t){v()(n,t);var e=I(n);function n(t){var i;return o()(this,n),i=e.call(this,r.TOKEN_TEXT,null),c()(p()(i),"text",void 0),i.text=t,i}return s()(n,[{key:"allowChildren",value:function(){return!1}},{key:"parse",value:function(t){return this.text}},{key:"append",value:function(t){throw new Error("Method not allowed.")}}]),n}(N);function C(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=T()(t);if(e){var i=T()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}var A=function(t){v()(n,t);var e=C(n);function n(t,i){var a;if(o()(this,n),a=e.call(this,r.TOKEN_VAR,[]),c()(p()(a),"isEscaped",void 0),a.params.push(H.normalizePath(t[0])),null===a.params[0])throw new Error("Illegal variable: ".concat(t[0]));for(var s=1,u=t.length;s<u;s++)a.params.push(t[s]);return a.isEscaped=i,a}return s()(n,[{key:"allowChildren",value:function(){return!1}},{key:"parse",value:function(t){for(var e=String(t.get(this.getParam(0))),n=1,r=this.params.length;n<r;n++)e=t.getHelper(this.params[n]).func(e);return this.isEscaped?e.replace(/"/g,"&quot;").replace(/>/g,"&gt;").replace(/</g,"&lt;"):e}},{key:"append",value:function(t){throw new Error("A VAR block does not allow insertion")}}]),n}(N);function k(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=T()(t);if(e){var i=T()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}var L=function(t){v()(n,t);var e=k(n);function n(t){var i;if(o()(this,n),i=e.call(this,r.TOKEN_WITH,[]),c()(p()(i),"children",[]),i.params.push(H.normalizePath(t[0])),null===i.params[0])throw new Error("Illegal WITH argument");return i}return s()(n,[{key:"allowChildren",value:function(){return!0}},{key:"parse",value:function(t){for(var e=t.cd(this.getParam(0)),n="",r=0,i=this.children.length;r<i;r++)n=n.concat(this.children[r].parse(e));return n}},{key:"append",value:function(t){return this.children.push(t.withParent(this)),t}}]),n}(N);function M(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=T()(t);if(e){var i=T()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}var x=function(t){v()(n,t);var e=M(n);function n(){return o()(this,n),e.call(this,r.TOKEN_ELSE,null)}return s()(n,[{key:"allowChildren",value:function(){return!1}},{key:"parse",value:function(t){throw new Error("Should never be parsed")}},{key:"append",value:function(t){throw new Error("Cannot have children")}},{key:"withParent",value:function(t){if(!t||t.getBlockType()!==r.TOKEN_IF&&t.getBlockType()!==r.TOKEN_UNLESS)throw new Error("Invalid ELSE block parent: Expected IF or UNLESS!");return this}}]),n}(N);function P(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=T()(t);if(e){var i=T()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}var F=function(t){v()(n,t);var e=P(n);function n(t){var i;if(o()(this,n),i=e.call(this,r.TOKEN_EACH,[]),c()(p()(i),"children",void 0),i.children=[],i.params.push(H.normalizePath(t[0])),null===i.params[0])throw new Error("Illegal each argument!");return i}return s()(n,[{key:"allowChildren",value:function(){return!0}},{key:"parse",value:function(t){var e,n="";return e=this,t.each(e.getParam(0),(function(t){for(var r=0,i=e.children.length;r<i;r++)n=n.concat(e.children[r].parse(t))})),n}},{key:"append",value:function(t){return this.children.push(t.withParent(this)),t}}]),n}(N);function U(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=T()(t);if(e){var i=T()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}var B=function(t){v()(n,t);var e=U(n);function n(t){var i;if(o()(this,n),i=e.call(this,r.TOKEN_EQUALS,[]),c()(p()(i),"children",[]),i.params[0]=H.normalizePath(t[0]),i.params[1]=H.normalizePath(t[1]),null===i.params[0])throw new Error("Illegal EQUALS variable: ".concat(t[0]));if(null===i.params[1])throw new Error("Illegal EQUALS variable: ".concat(t[1]));return i}return s()(n,[{key:"append",value:function(t){return this.children.push(t),t.withParent(this)}},{key:"allowChildren",value:function(){return!0}},{key:"parse",value:function(t){var e="";if(t.equals(this.getParam(0),this.getParam(1)))for(var n=0,r=this.children.length;n<r;n++)e=e.concat(this.children[n].parse(t));return e}}]),n}(N);n.d(e,"a",(function(){return H}));var H=function(){function t(e){o()(this,t),c()(this,"instructions",void 0),c()(this,"helpers",[]),this.instructions=t.tokenize(e);for(var n=0,r=t.GLOBAL_HELPERS.length;n<r;n++)this.helpers.push(t.GLOBAL_HELPERS[n])}return s()(t,[{key:"parse",value:function(t){for(var e=[],n=new f(t,null,this.helpers),r=0,i=this.instructions.length;r<i;r++)e.push(this.instructions[r].parse(n));return e.join("")}},{key:"withHelper",value:function(t){if(!t)throw new Error("Invalid argument!");for(var e=0,n=this.helpers.length;e<n;e++)if(this.helpers[e].name===t.name)throw new Error('Helper "'.concat(t.name,'" already added!'));return this.helpers.push(t),this}}],[{key:"createEmptyBlockText",value:function(){return{token:r.TOKEN_TEXT,params:null,settings:null,text:""}}},{key:"tokenize",value:function(e){for(var n,i,o,a,s,u=0,c=e.length,l=null,h=[],f=[];u<c;)(i="{"===(n=e.charAt(u))?this.readToken(u,c,e):null)?(l&&h.push(l),l={text:i.text,token:i.token,params:i.params,settings:i.settings},h.push(l),u+=o=l.text.length,o,l=null):((l=l||t.createEmptyBlockText()).text+=n,u++);if(l&&h.push(l),!h.length)return[];for(var d=0,p=h.length;d<p;d++)if(h[d].token===r.TOKEN_END){if(!s)throw new Error("Unexpected TOKEN END!");s=s.getParent()}else a=this.createInstructionFromBlock(h[d]),s?(s.append(a),a.withParent(s)):(f.push(a),a.withParent(null)),a.allowChildren()&&(s=a);return f}},{key:"readToken",value:function(t,e,n){if("{"!==n.charAt(t)||"{"!==n.charAt(t+1))return null;var r,i,o=!0,a=t+2,s=[],u=!1,c="",l=0,h=!1;for("{"===n.charAt(t+2)?(o=!1,a++,c="{{{"):c="{{";!u;)c+=l>=1&&h?this.repeat(" ",i=this.readPipeAndSpaces(n,a)):this.repeat(" ",i=this.readSpaces(n,a)),a+=i,(i=(r=this.readArgument(n,a)).length)?(c+=r,a+=i,a+=i=this.readSpaces(n,a),c+=this.repeat(" ",i),s.push(r),1===++l&&(h=!this.isReservedKeyword(r))):u=!0;return t=a,"}"===n.charAt(t)&&"}"===n.charAt(t+1)?(c+="}}",o?s.length>0?this.convertArgsToToken(s,o,c):null:"}"===n.charAt(t+2)&&s.length?(c+="}",this.convertArgsToToken(s,o,c)):null):void 0}},{key:"readPipeAndSpaces",value:function(t,e){for(var n,r=0,i=0;(n=t.charAt(e))&&(" "===n||"\n"===n||"\r"===n||"\t"===n||"|"===n);)r++,"|"===n&&i++,e++;return 1===i?r:0}},{key:"readSpaces",value:function(t,e){for(var n,r=0;(n=t.charAt(e))&&(" "===n||"\n"===n||"\r"===n||"\t"===n);)r++,e++;return r}},{key:"readArgument",value:function(e,n){for(var r,i="";(r=e.charAt(n))&&t.ARGUMENT_VALID_CHARS.indexOf(r)>-1;)i+=r,n++;return i}},{key:"convertArgsToToken",value:function(t,e,n){var i=t.length;if(0===i)return null;if(1===i)return this.isReservedKeyword(t[0])?"#end"===t[0]||"#else"===t[0]?{text:n,params:null,token:"#end"===t[0]?r.TOKEN_END:r.TOKEN_ELSE,settings:null}:null:{text:n,params:t,token:r.TOKEN_VAR,settings:{escaped:e}};if(!this.isReservedKeyword(t[0]))return{text:n,params:t,token:r.TOKEN_VAR,settings:{escaped:e}};if(!e)return null;switch(t[0]){case"#if":case"#unless":return 2===i&&this.isValidContextPath(t[1])?{token:"#if"===t[0]?r.TOKEN_IF:r.TOKEN_UNLESS,params:[t[1]],text:n,settings:{negated:"#unless"===t[0]}}:null;case"#equals":return 3===i&&this.isValidContextPath(t[1])&&this.isValidContextPath(t[2])?{token:r.TOKEN_EQUALS,params:[t[1],t[2]],text:n,settings:null}:null;case"#each":return 2===i&&this.isValidContextPath(t[1])?{token:r.TOKEN_EACH,params:[t[1]],text:n,settings:null}:4===i&&"in"===t[2]&&this.isValidContextPath(t[1])&&this.isValidVariableName(t[3])?{token:r.TOKEN_EACH,params:[t[1],t[3]],text:n,settings:null}:null;case"#with":return 2===i&&this.isValidContextPath(t[1])?{token:r.TOKEN_WITH,params:[t[1]],text:n,settings:null}:null;default:throw new Error("Invalid keyword: ".concat(t[0]))}}},{key:"isReservedKeyword",value:function(t){return"#if"===t||"#each"===t||"#unless"===t||"#else"===t||"#end"===t||"#with"===t||"#equals"===t}},{key:"isValidContextPath",value:function(t){if(!t)return!1;for(var e=t.split("/"),n=0,r=e.length;n<r;n++)if("."!==e[n]&&".."!==e[n]&&!this.isValidVariableName(e[n]))return!1;return!0}},{key:"isValidVariableName",value:function(e){if(e){for(var n=e.split("."),r=0,i=n.length;r<i;r++){if(!(t.VAR_START_CHAR.indexOf(n[r].charAt(0))>-1))return!1;for(var o=1,a=n[r].length;o<a;o++)if(-1===t.VAR_OTHER_CHARS.indexOf(n[r].charAt(o)))return!1}return!0}return!1}},{key:"repeat",value:function(t,e){for(var n="",r=0;r<e;r++)n+=t;return n}},{key:"createInstructionFromBlock",value:function(t){switch(t.token){case r.TOKEN_IF:return new b(t.params);case r.TOKEN_UNLESS:return new w(t.params);case r.TOKEN_END:return new _;case r.TOKEN_TEXT:return new D(t.text);case r.TOKEN_VAR:return new A(t.params,t.settings.escaped);case r.TOKEN_EACH:return new F(t.params);case r.TOKEN_WITH:return new L(t.params);case r.TOKEN_ELSE:return new x;case r.TOKEN_EQUALS:return new B(t.params);default:throw new Error("Unknown block type: ".concat(JSON.stringify(t)))}}},{key:"normalizePath",value:function(t){if(t){for(var e,n=t.split("/"),r=[],i=0,o=0,a=n.length;o<a;o++)if("."!==n[o]&&""!==n[o])if(".."===n[o])i>0&&".."!==r[i-1]?(i--,r.pop()):(i++,r.push(".."));else for(var s=0,u=(e=n[o].split(".")).length;s<u;s++){if(""===e[s])return null;r.push(e[s]),i++}for(var c=i-1;c>-1;c--)"this"===r[c]&&c>1&&(r.splice(c,1),i--);return i?r.join("/"):null}return t}},{key:"addHelper",value:function(t){if(!t)throw new Error("Invalid argument!");for(var e=0,n=this.GLOBAL_HELPERS.length;e<n;e++)if(this.GLOBAL_HELPERS[e].name===t.name)throw new Error('Helper "'.concat(t.name,'" already added!'));this.GLOBAL_HELPERS.push(t)}}]),t}();c()(H,"GLOBAL_HELPERS",[{name:"upper",func:function(t){return String(t).toUpperCase()}},{name:"lower",func:function(t){return String(t).toLowerCase()}}]),c()(H,"ARGUMENT_VALID_CHARS","abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789./_$#"),c()(H,"VAR_START_CHAR","$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_"),c()(H,"VAR_OTHER_CHARS","$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_0123456789")},29:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(5),i=n.n(r),o=n(6),a=n.n(o),s=n(0),u=n.n(s),c=function(){function t(){i()(this,t),u()(this,"isEventTriggeringDisabled",!1),u()(this,"isInSyncMode",!1),u()(this,"events",void 0)}return a()(t,[{key:"isEventTriggeringEnabled",value:function(){return!this.isEventTriggeringDisabled}},{key:"on",value:function(t,e){return void 0===this.events&&(this.events={}),void 0===this.events[t]&&(this.events[t]=[]),this.events[t].push(e),this}},{key:"off",value:function(t,e){if(void 0===this.events)return this;if(void 0===this.events[t])return this;if(void 0===e)delete this.events[t];else{for(var n=0,r=this.events[t].length;n<r;n++)if(this.events[t][n]===e){this.events[t].splice(n,1);break}0===this.events[t].length&&delete this.events[t]}return this}},{key:"disableEvents",value:function(){return this.isEventTriggeringDisabled=!0,this}},{key:"enableEvents",value:function(){return this.isEventTriggeringDisabled=!1,this}},{key:"enableSyncMode",value:function(){return this.isInSyncMode=!0,this}},{key:"disableSyncMode",value:function(){return this.isInSyncMode=!1,this}},{key:"trigger",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.isEventTriggeringDisabled||void 0===this.events||void 0!==this.events[t]&&function(e){for(var r=0,i=e.events[t].length;r<i;r++)e.isInSyncMode?e.events[t][r].apply(e,n):function(t){setTimeout((function(){t.apply(e,n)}))}(e.events[t][r])}(this),this}}]),t}()},308:function(t,e,n){"use strict";var r=n(5),i=n.n(r),o=n(6),a=n.n(o),s=n(12),u=n(7),c=n.n(u),l=n(8),h=n.n(l),f=n(4),d=n.n(f),p=n(0),g=n.n(p),v=function(){function t(e,n){i()(this,t),g()(this,"descriptors",void 0),g()(this,"table",void 0),this.table=e,this.descriptors=(n||[]).slice(0)}return a()(t,[{key:"getDescriptors",value:function(){return this.descriptors}},{key:"getTable",value:function(){return this.table}}]),t}();function m(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var y=function(t){c()(n,t);var e=m(n);function n(t,r){return i()(this,n),e.call(this,t,[r])}return a()(n,[{key:"isUnique",value:function(){return!0}},{key:"isAutoIncrement",value:function(){return null}},{key:"getNextAutoIncrementValue",value:function(){return null}},{key:"index",value:function(){}}]),n}(v),E=n(3),T=n.n(E);function N(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var R=function(t){c()(n,t);var e=N(n);function n(t,r){var o;return i()(this,n),o=e.call(this,t,[r]),g()(T()(o),"unique",void 0),g()(T()(o),"autoIncrement",void 0),g()(T()(o),"values",void 0),g()(T()(o),"maxAutoIncrement",0),o.unique=!!r.unique,o.autoIncrement=!!r.autoIncrement,o}return a()(n,[{key:"isUnique",value:function(){return this.unique}},{key:"isAutoIncrement",value:function(){return this.autoIncrement}},{key:"getNextAutoIncrementValue",value:function(){if(this.autoIncrement)return this.maxAutoIncrement+1;throw new Error("Index is not auto-increment!")}},{key:"index",value:function(){this.values=[];var t,e,n=this.table.createIterator();for(this.maxAutoIncrement=0;t=n.next();){var r=t.getColumnValue(this.descriptors[0].name);if(null!==r){var i=String(r).toLowerCase();if(this.values.indexOf(e=i)>-1)throw new Error("Duplicate key "+JSON.stringify(this.descriptors[0].name)+" found with value "+JSON.stringify(e)+" found!");this.values.push(e),this.autoIncrement&&(this.maxAutoIncrement=Math.max(this.maxAutoIncrement,Number(e)))}}}}]),n}(v);n.d(e,"a",(function(){return b}));var b=function(){function t(){i()(this,t)}return a()(t,null,[{key:"createFromIndexDescriptor",value:function(t,e){return t.getStorageEngine()===s.f.IN_MEMORY?new R(t,e):new y(t,e)}}]),t}()},34:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(5),i=n.n(r),o=n(6),a=n.n(o),s=function(){function t(){i()(this,t)}return a()(t,null,[{key:"create",value:function(t,e){var n=null;return function(r){clearTimeout(n),n=setTimeout((function(){t(r)}),e)}}}]),t}()},41:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(38),i=n.n(r),o=n(5),a=n.n(o),s=n(6),u=n.n(s),c=n(0),l=n.n(c),h=n(12),f=function(){function t(){a()(this,t)}return u()(t,null,[{key:"getType",value:function(t){if(void 0===t)return null;if(null===t)return h.d.NULL;var e=i()(t);return"number"===e?isFinite(t)?h.d.NUMBER:null:"boolean"===e?h.d.BOOLEAN:"string"===e?h.d.STRING:"object"===e?h.d.OBJECT:null}},{key:"isNumeric",value:function(t){var e=this.getType(t);return e===h.d.NUMBER||e===h.d.STRING&&"-"!==t&&"+"!==t&&/^([\-+])?(0|[1-9]([0-9]+)?)?(\.[0-9]+)?/.test(t)}},{key:"getColumnDefinitions",value:function(t){for(var e,n=Object.create(null),r=0,i=(t||[]).length;r<i&&0===r;r++)for(var o in t[r])t[r].hasOwnProperty(o)&&(e=this.getType(t[r][o]),n[o]=e);var a=[];for(var s in n)null!==n[s]&&a.push({type:n[s],name:s});return a}},{key:"isReservedKeyword",value:function(t){return this.RESERVED_KEYWORDS.indexOf(String(t||""))>-1}},{key:"shuffleArray",value:function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=[t[n],t[e]];t[e]=r[0],t[n]=r[1]}return t}},{key:"compare",value:function(t,e){var n,r,i=this.getType(t),o=this.getType(e);if(null===i&&null===o)return 0;if(null===i||null===o)return null===i?-1:1;if(i===o)switch(i){case h.d.BOOLEAN:case h.d.NUMBER:case h.d.NULL:return t==e?0:t<e?-1:1;case h.d.STRING:n=String(t).toLowerCase(),r=String(e).toLowerCase()}else n=i!==h.d.STRING?i===h.d.NUMBER?String(t):i===h.d.NULL?"":t?"1":"0":String(t).toLowerCase(),r=o!==h.d.STRING?o===h.d.NUMBER?String(e):o===h.d.NULL?"":e?"1":"0":String(t).toLowerCase();return n===r?0:n<r?-1:1}},{key:"parseString",value:function(t){for(var e,n,r="",i=0,o=t.length;i<o;i++)if("\\"===(e=t.charAt(i)))switch(n=t.charAt(i+1),i++,n){case"r":r+="\r";break;case"n":r+="\n";break;case"t":r+="\t";break;case"\\":case"":r+="\\";break;default:r+=n}else r+=e;return r}},{key:"castToString",value:function(t){return!0===t?"1":!1===t?"0":String(t||"")}},{key:"compareAsStrings",value:function(t,e){var n=this.castToString(t).toLowerCase(),r=this.castToString(e).toLowerCase();return n===r?0:n>r?-1:1}},{key:"encodeData",value:function(t){return Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")}},{key:"makeRequest",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.REQUEST_METHOD_GET,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.REQUEST_CONTENT_TYPE_PLAIN,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=new XMLHttpRequest;return a&&(s.withCredentials=!0),new Promise((function(a,u){s.onreadystatechange=function(){if(4===s.readyState)if(s.status>=200&&s.status<300){var e;switch(s.responseType){case t.REQUEST_RESPONSE_TYPE_TEXT:e=s.responseText;break;case t.REQUEST_RESPONSE_TYPE_JSON:case t.REQUEST_RESPONSE_TYPE_BLOB:case t.REQUEST_RESPONSE_TYPE_BUFFER:default:e="string"==typeof s.response?JSON.parse(s.response):s.response}a(e)}else u(s.statusText)},s.ontimeout=function(){u(s.statusText)},s.open(n,e,!0),i&&(s.responseType=i),r&&s.setRequestHeader("Content-Type",r),s.send(o)}))}}]),t}();l()(f,"REQUEST_METHOD_POST","POST"),l()(f,"REQUEST_METHOD_GET","GET"),l()(f,"REQUEST_CONTENT_TYPE_PLAIN","text/plain"),l()(f,"REQUEST_CONTENT_TYPE_HTML","text/html"),l()(f,"REQUEST_CONTENT_TYPE_JSON","application/json"),l()(f,"REQUEST_CONTENT_TYPE_MULTIPART","multipart/form-data"),l()(f,"REQUEST_CONTENT_TYPE_X_WWW_FORM_URLENCODED","application/x-www-form-urlencoded"),l()(f,"REQUEST_RESPONSE_TYPE_BUFFER","arraybuffer"),l()(f,"REQUEST_RESPONSE_TYPE_BLOB","blob"),l()(f,"REQUEST_RESPONSE_TYPE_TEXT","text"),l()(f,"REQUEST_RESPONSE_TYPE_JSON","json"),l()(f,"RESERVED_KEYWORDS",["select","from","where","in","limit","order","by","asc","update","table","set","insert","into","values","delete","like"])},42:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(20),i=n.n(r),o=n(5),a=n.n(o),s=n(6),u=n.n(s),c=n(0),l=n.n(c),h=n(96);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p=function(){function t(){a()(this,t),l()(this,"translations",{}),l()(this,"intlWarnings",{}),l()(this,"htmlDOMNode",document.createElement("span")),window.lang&&(this.translations=window.lang)}return u()(t,[{key:"escapeHTML",value:function(t){this.htmlDOMNode.textContent=t||"";var e=this.htmlDOMNode.innerHTML;return this.htmlDOMNode.textContent="",e}},{key:"translateText",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(t){if(!this.translations)return null;var i="undefined"!==typeof this.translations[t=String(t)]&&null!==this.translations[t]?this.translations[t]:("undefined"==typeof(a=this).intlWarnings[t]&&(console.warn("I18n: key ".concat(JSON.stringify(t),"' is not defined!")),a.intlWarnings[t]=!0),t);i=i.replace(/\$([\s]+)?{([\d]+)}/g,(function(){var t=~~(arguments.length<=2?void 0:arguments[2]);return String(n[t]||"${".concat(t,"}"))}));var o=0;return i=i.replace(/%([sd])/g,(function(){var t=String(n[o]||(arguments.length<=0?void 0:arguments[0]));return o++,t}))}return t;var a}},{key:"translateTextDefault",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=this.translateText.apply(this,[t].concat(r));return t&&o&&o!==t?o:e}},{key:"translateHTMLText",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t||"",i=r.replace(/\[\[([a-zA-Z0-9_$\-]+)(!)?]]/g,(function(){return(arguments.length<=2?void 0:arguments[2])?e.translateText(arguments.length<=1?void 0:arguments[1]):e.escapeHTML(e.translateText(arguments.length<=1?void 0:arguments[1]))}));n&&(i=i.replace(/<!--[^\-]+-->/g,""));for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];return Object(h.a)(a,(function(t){i=i.replace("%s",t)})),i}},{key:"setTranslations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.translations=d({},this.translations,{},t)}},{key:"translateDOMNode",value:function(t){var e=this;Object(h.a)(t.querySelectorAll("[data-i18n-text]"),(function(t){var n=e.translateText(t.getAttribute("data-i18n-text"));n&&(t.textContent=n)})),Object(h.a)(t.querySelectorAll("[data-i18n-placeholder]"),(function(t){var n=t.getAttribute("data-i18n-placeholder"),r=e.translateText(n);r&&r!==n&&i()(t,HTMLInputElement)&&(t.placeholder=r)}))}}]),t}()},67:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(38),i=n.n(r),o=n(5),a=n.n(o),s=n(6),u=n.n(s),c=n(0),l=n.n(c),h=n(92),f=function(){function t(){a()(this,t)}return u()(t,[{key:"NOT",value:function(t){return!t}}],[{key:"DATE_DIFF",value:function(e,n,r){void 0===r&&(r=t.DEFAULT_JQL_DATE_FORMAT);var i=t.timeUtils.parseDate(e,r),o=t.timeUtils.parseDate(n,r),a=i.getTime(),s=o.getTime();return Math.ceil(Math.abs(s-a)/864e5)}},{key:"DATE_BETWEEN",value:function(e,n,r,i){void 0===i&&(i=t.DEFAULT_JQL_DATE_FORMAT);var o=t.timeUtils.parseDate(n,i),a=t.timeUtils.parseDate(r,i),s=t.timeUtils.parseDate(e,i),u=o.getTime(),c=a.getTime(),l=s.getTime();return l>=Math.min(u,c)&&l<=Math.max(u,c)}},{key:"DATE_FORMAT",value:function(e,n,r){void 0===n&&(n=t.DEFAULT_JQL_DATE_FORMAT),void 0===r&&(r=t.DEFAULT_JQL_DATE_FORMAT),""===e&&(e=r.replace("%Y","1970").replace("%m","01").replace("%d","01"));var i=t.timeUtils.parseDate(e,r);return t.timeUtils.formatTime(Math.floor(i.getTime()/1e3),n)}},{key:"DATE_GET_NUMBER_OF_DAYS",value:function(e,n){void 0===n&&(n=t.DEFAULT_JQL_DATE_FORMAT);try{var r=e?t.timeUtils.parseDate(e,n):new Date;if(!r)return 0;var i=r.getMonth(),o=r.getDate(),a=r.getFullYear(),s=0===a%4;return 365*(a-1)+~~(a/4)+t.DAYS_MAPPINGS[i]+o+(s&&i<2?-1:0)}catch(u){return 0}}},{key:"TIME_GET_NUMBER_OF_MINUTES",value:function(e,n){void 0===n&&(n=t.DEFAULT_JQL_TIME_FORMAT);var r=e?t.timeUtils.parseDate(e,n):new Date;return r?60*r.getHours()+r.getMinutes():0}},{key:"CURRENT_DATE",value:function(e){var n=new Date;return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),t.timeUtils.formatTime(Math.floor(n.getTime()/1e3),e||t.DEFAULT_JQL_DATE_FORMAT)}},{key:"DATE_COMPARE",value:function(e,n,r){var i=t.timeUtils.parseDate(e,r||t.DEFAULT_JQL_DATE_FORMAT),o=t.timeUtils.parseDate(n,r||t.DEFAULT_JQL_DATE_FORMAT),a=i.getTime(),s=o.getTime();return a===s?0:a<s?-1:1}},{key:"TIME_COMPARE",value:function(e,n,r){if(""===e)return-1;var i=t.timeUtils.stringToTime(e,r||t.DEFAULT_JQL_DATE_FORMAT),o=t.timeUtils.stringToTime(n,r||t.DEFAULT_JQL_DATE_FORMAT),a=i.getTime(),s=o.getTime();return a===s?0:a<s?-1:1}},{key:"DATE_ADD_INTERVAL",value:function(e,n,r){var i,o,a,s=t.timeUtils.parseDate(e,r||t.DEFAULT_JQL_DATE_FORMAT),u=0,c=null,l=null,h=null,f=null,d=null,p=null,g=null,v=String(n||"").toLowerCase();for(["-","+"].indexOf(i=v.substr(0,1))>-1&&(u="-"===i?-1:1,v=v.substr(1));o=/^([\s]+)?([1-9]([\d]+)?)([\s]+)?(day(s)?|month(s)?|year(s)?|hour(s)?|minute(s)?|second(s)?|millisecond(s)?)([\s]+)?/.exec(v);)switch(v=v.substr(o[0].length),a=~~o[2],o[5]){case"day":case"days":c=null===c?a:c+a;break;case"month":case"months":l=null===l?a:l+a;break;case"year":case"years":h=null===h?a:h+a;break;case"hour":case"hours":f=null===f?a:f+a;break;case"minute":case"minutes":d=null===d?a:d+a;break;case"second":case"seconds":p=null===p?a:p+a;break;case"millisecond":case"milliseconds":g=null===g?a:g+a}return null!==g&&s.setMilliseconds(s.getMilliseconds()+u*g),null!==p&&s.setSeconds(s.getSeconds()+u*p),null!==d&&s.setMinutes(s.getMinutes()+u*d),null!==f&&s.setHours(s.getHours()+u*f),null!==c&&s.setDate(s.getDate()+u*c),null!==l&&s.setMonth(s.getMonth()+u*l),null!==h&&s.setFullYear(s.getFullYear()+u*h),t.timeUtils.formatTime(Math.floor(s.getTime()/1e3),r||t.DEFAULT_JQL_DATE_FORMAT)}},{key:"CONCAT",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e?e.join(""):""}},{key:"SUM",value:function(){for(var t,e=0,n=0,r=arguments.length;n<r;n++)t=parseFloat(n<0||arguments.length<=n?void 0:arguments[n]),!isNaN(t)&&isFinite(t)&&(e+=t);return e}},{key:"EQUALS",value:function(t,e){return t==e}},{key:"COMPARE",value:function(t,e){var n,r,o,a,s,u,c;return null===t&&null===e?0:null===t?-2:(!1===t&&(t="0"),!1!==e&&null!==e||(e="0"),!0===t&&(t="1"),!0===e&&(e="1"),"string"===(r=i()(t))||"string"===(o=i()(e))?(a="string"===r?t.toLowerCase():String(t).toLowerCase(),s="string"===o?e.toLowerCase():String(e).toLowerCase(),u=parseFloat(a),c=parseFloat(s),n=isFinite(u)&&isFinite(c)?u===c?0:u<c?-1:1:a===s?0:a<s?-1:1):n=t===e?0:t<e?-1:1,n)}},{key:"IF",value:function(t,e,n){return t?e:n}},{key:"BOOL",value:function(t){return"0"!==t&&t!==1/0||(t=~~t),!!t}},{key:"INT",value:function(e){if(t.BOOL(e)){var n=parseInt(String(e));return!isNaN(n)&&isFinite(n)?n:0}return 0}},{key:"FLOAT",value:function(e){if(t.BOOL(e)){var n=parseFloat(String(e));return!isNaN(n)&&isFinite(n)?n:0}return 0}},{key:"STRING",value:function(t){switch(t){case!1:return"false";case null:return"null";case 0:return"0";default:return String(t||"")}}},{key:"FROM_BASE64",value:function(t){return atob(t)}},{key:"TO_BASE64",value:function(t){return btoa(t)}},{key:"REPLACE",value:function(t,e,n){if(!e)return t;var r=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),i=new RegExp(r,"ig");return String(t).replace(i,String(n))}},{key:"ALERT",value:function(){for(var e=[],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var o=0,a=r.length;o<a;o++)(r[o]||0===r[o])&&e.push(String(r[o]));return e.length&&t.INTERFACE_ENABLED&&setTimeout((function(){alert(e.join(" "))}),100),e.length?e.join(" "):null}},{key:"UNIQUE_ID_BASED_ON_DATE_MILISECOND",value:function(){return(+new Date).toString(36)}},{key:"IN",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o;if(!r||!(o=r.length))return!1;for(var a=0;a<o;a++)if(0===t.COMPARE(e,r[a]))return!0;return!1}},{key:"onInterfaceEnabled",value:function(){t.INTERFACE_ENABLED=!0}}]),t}();l()(f,"timeUtils",void 0),l()(f,"DEFAULT_JQL_DATE_FORMAT","%Y-%m-%d"),l()(f,"DEFAULT_JQL_TIME_FORMAT","%H:%i:%s"),l()(f,"INTERFACE_ENABLED",!1),l()(f,"DAYS_MAPPINGS",[0,31,59,90,120,151,181,212,243,273,304,334]),f.timeUtils=h.a.createInstanceInNonSingletonModeWithoutInternationalizationSupport()},9:function(t,e,n){"use strict";var r,i,o,a,s,u,c,l,h,f,d,p,g,v,m,y,E,T,N;n.d(e,"f",(function(){return r})),n.d(e,"i",(function(){return i})),n.d(e,"g",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"h",(function(){return s})),n.d(e,"k",(function(){return c})),n.d(e,"m",(function(){return l})),n.d(e,"l",(function(){return f})),n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return g})),n.d(e,"d",(function(){return v})),n.d(e,"j",(function(){return m})),n.d(e,"n",(function(){return T})),n.d(e,"a",(function(){return N})),function(t){t[t.OK=0]="OK",t[t.CANCEL=1]="CANCEL",t[t.YES=2]="YES",t[t.NO=3]="NO",t[t.ABORT=4]="ABORT",t[t.RETRY=5]="RETRY",t[t.IGNORE=6]="IGNORE",t[t.SAVE=7]="SAVE",t[t.CHANGE=8]="CHANGE",t[t.DELETE=9]="DELETE",t[t.DOWNLOAD=10]="DOWNLOAD",t[t.CLOSE=11]="CLOSE",t[t.ENABLE_COMPLIANCE=12]="ENABLE_COMPLIANCE",t[t.DISABLE_COMPLIANCE=13]="DISABLE_COMPLIANCE",t[t.CREATE=14]="CREATE",t[t.DONE=15]="DONE",t[t.TRY_FORM=16]="TRY_FORM",t[t.NO_THANKS=17]="NO_THANKS",t[t.MAYBE_LATER=18]="MAYBE_LATER",t[t.UPDATE=19]="UPDATE",t[t.UPGRADE_NOW=20]="UPGRADE_NOW",t[t.UPGRADE_NOW_PAYWALL=21]="UPGRADE_NOW_PAYWALL",t[t.CONTINUE=22]="CONTINUE",t[t.KEEP_EDITING_FORM=23]="KEEP_EDITING_FORM",t[t.CLOSE_EDITOR=24]="CLOSE_EDITOR",t[t.IMPORT=25]="IMPORT",t[t.ADD_DOMAIN=26]="ADD_DOMAIN",t[t.VALIDATE=27]="VALIDATE",t[t.FORM_MIGRATE=28]="FORM_MIGRATE",t[t.UPGRADE_TO_ENTERPRISE=29]="UPGRADE_TO_ENTERPRISE",t[t.REQUEST_A_DEMO_CORPORATE_PAYWALL=30]="REQUEST_A_DEMO_CORPORATE_PAYWALL",t[t.CONTACT_SUPPORT=31]="CONTACT_SUPPORT"}(r||(r={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.SUCCESS=1]="SUCCESS",t[t.ERROR=2]="ERROR"}(i||(i={})),function(t){t[t.VIDEO=0]="VIDEO",t[t.AUDIO=1]="AUDIO",t[t.DOCUMENT=2]="DOCUMENT",t[t.PICTURE=3]="PICTURE",t[t.OTHER=4]="OTHER"}(o||(o={})),function(t){t[t.STRING=0]="STRING",t[t.NUMBER=1]="NUMBER",t[t.BOOLEAN=2]="BOOLEAN",t[t.UNKNOWN=3]="UNKNOWN"}(a||(a={})),function(t){t[t.UNAUTHORISED=401]="UNAUTHORISED",t[t.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED"}(s||(s={})),function(t){t[t.ALL=0]="ALL",t[t.JS_STRINGS_ONLY=1]="JS_STRINGS_ONLY",t[t.VIEW_FORM_SUBSET=2]="VIEW_FORM_SUBSET"}(u||(u={})),function(t){t[t.GENERIC_UPGRADE_REASON=0]="GENERIC_UPGRADE_REASON",t[t.CONTROL_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=1]="CONTROL_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.VALIDATOR_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=2]="VALIDATOR_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.NUMBER_OF_FIELDS_EXCEEDED_IN_CURRENT_USER_PLAN=3]="NUMBER_OF_FIELDS_EXCEEDED_IN_CURRENT_USER_PLAN",t[t.CREATE_NEW_FORM_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=4]="CREATE_NEW_FORM_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.RULES_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=5]="RULES_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.PAYMENTS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=6]="PAYMENTS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.SMS_NOTIFICATIONS_ARE_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=7]="SMS_NOTIFICATIONS_ARE_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.ENCRIPTION_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=8]="ENCRIPTION_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.HTML_BLOCK_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=9]="HTML_BLOCK_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.SUBMISSIONS_EXPORT_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=10]="SUBMISSIONS_EXPORT_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.LIMIT_NUMBER_OF_TIME_OPTIONS_CAN_BE_CHOSEN=11]="LIMIT_NUMBER_OF_TIME_OPTIONS_CAN_BE_CHOSEN",t[t.QUIZ_OPTIONS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=12]="QUIZ_OPTIONS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.GET_MORE_USERS=13]="GET_MORE_USERS",t[t.MAXIMUM_NUMBER_OF_TRANSLATIONS_REACHED=14]="MAXIMUM_NUMBER_OF_TRANSLATIONS_REACHED",t[t.MAXIMUM_NUMBER_OF_LIKERT_STATEMENTS_IN_CURRENT_USER_PLAN=15]="MAXIMUM_NUMBER_OF_LIKERT_STATEMENTS_IN_CURRENT_USER_PLAN",t[t.SSL_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=16]="SSL_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.DOMAIN_ALIAS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=17]="DOMAIN_ALIAS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.MAXIMUM_NUMBER_OF_SMS_NOTIFICATIONS_REACHED=18]="MAXIMUM_NUMBER_OF_SMS_NOTIFICATIONS_REACHED",t[t.MAXIMUM_NUMBER_OF_EMAIL_RECIPIENTS_REACHED=19]="MAXIMUM_NUMBER_OF_EMAIL_RECIPIENTS_REACHED",t[t.MAXIMUM_NUMBER_OF_EMAIL_NOTIFICATIONS_REACHED=20]="MAXIMUM_NUMBER_OF_EMAIL_NOTIFICATIONS_REACHED",t[t.ATTACHMENTS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=21]="ATTACHMENTS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.NOTIFICATIONS_ADD_SUBMISSION_PDF_ATTACHMENTS=22]="NOTIFICATIONS_ADD_SUBMISSION_PDF_ATTACHMENTS",t[t.NOTIFICATIONS_ADD_FORM_LAYOUT_ATTACHMENTS=23]="NOTIFICATIONS_ADD_FORM_LAYOUT_ATTACHMENTS",t[t.EDIT_NOTIFICATION_TEMPLATE_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=24]="EDIT_NOTIFICATION_TEMPLATE_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.NOTIFICATIONS_ADD_RULES=25]="NOTIFICATIONS_ADD_RULES",t[t.SMTP_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=26]="SMTP_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.SALESFORCE_COMMUNITY_SHARING_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=27]="SALESFORCE_COMMUNITY_SHARING_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.SALESFORCE_PREFILL_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=28]="SALESFORCE_PREFILL_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.GET_IN_TOUCH_FOR_CORPORATE_UPGRADE=29]="GET_IN_TOUCH_FOR_CORPORATE_UPGRADE",t[t.GET_HELP_WITH_SETUP=30]="GET_HELP_WITH_SETUP",t[t.SALESFORCE_LOOKUP_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=31]="SALESFORCE_LOOKUP_NOT_SUPPORTED_IN_CURRENT_USER_PLAN",t[t.SALESFORCE_QUERY_NOT_SUPPORTED_IN_CURRENT_USER_PLAN=32]="SALESFORCE_QUERY_NOT_SUPPORTED_IN_CURRENT_USER_PLAN"}(c||(c={})),function(t){t.USER_PLAN_FREE="Free",t.USER_PLAN_STARTER="Starter",t.USER_PLAN_SILVER="Silver",t.USER_PLAN_GOLD="Gold",t.USER_PLAN_PLATINUM="Platinum",t.USER_PLAN_PROFESSIONAL="Professional",t.USER_PLAN_CORPORATE="Corporate"}(l||(l={})),function(t){t[t.USER_FIELDS_PLAN_FREE=10]="USER_FIELDS_PLAN_FREE",t[t.USER_FIELDS_PLAN_STARTER=30]="USER_FIELDS_PLAN_STARTER",t[t.USER_FIELDS_PLAN_SILVER=30]="USER_FIELDS_PLAN_SILVER"}(h||(h={})),function(t){t[t.BASIC=0]="BASIC",t[t.GOLD=1]="GOLD",t[t.PLATINUM=2]="PLATINUM",t[t.PROFESSIONAL=3]="PROFESSIONAL",t[t.CORPORATE=4]="CORPORATE"}(f||(f={})),function(t){t[t.BY_SETTING_THE_VALUE_ATTRIBUTE=0]="BY_SETTING_THE_VALUE_ATTRIBUTE",t[t.BY_SETTING_THE_CHECKED_ATTRIBUTE=1]="BY_SETTING_THE_CHECKED_ATTRIBUTE",t[t.BY_SETTING_OPTIONS_AND_THEN_VALUE=2]="BY_SETTING_OPTIONS_AND_THEN_VALUE",t[t.BY_CUSTOM_PLUGIN_WHICH_CAN_FAIL=3]="BY_CUSTOM_PLUGIN_WHICH_CAN_FAIL",t[t.BY_USING_PROPRIETARY_DOM_ABSTRACTION_LAYER_METHOD=4]="BY_USING_PROPRIETARY_DOM_ABSTRACTION_LAYER_METHOD"}(d||(d={})),function(t){t[t.LEGACY_EDITOR=0]="LEGACY_EDITOR",t[t.LATEST_EDITOR_VERSION=1]="LATEST_EDITOR_VERSION",t[t.LEGACY_SALESFORCE_EDITOR=2]="LEGACY_SALESFORCE_EDITOR",t[t.LATEST_SALESFORCE_EDITOR_VERSION=3]="LATEST_SALESFORCE_EDITOR_VERSION"}(p||(p={})),function(t){t.PUBLISH_EMBED="page_view_publish_embed",t.JAVASCRIPT="javascript-publish-method",t.SHOPIFY_PLATFORM="PublishPlatformsOnShopify",t.SHOPIFY_PUBLISH="shopify-publish-method",t.BIG_COMMERCE_PLATFORM="PublishPlatformsOnBigCommerce",t.BIG_COMMERCE_PUBLISH="bigcommerce-publish-method",t.FACEBOOK_PLATFORM="PublishFacebook",t.FACEBOOK_PUBLISH="facebook-publish-method",t.BLOGGER="blogger-publish-method",t.WORDPRESS="wordpress-publish-method",t.JOOMLA="joomla-publish-method",t.SALESFORCE="salesforce-publish-method",t.SALESFORCE_COMMUNITY="salesforce-community-publish-method",t.UNBOUNCE="unbounce-publish-method",t.GOOGLE="google-sites-publish-method",t.TWITTER="twitter-publish-method",t.WIX="wix-publish-method"}(g||(g={})),function(t){t.COOKIE_SAME_SITE_STRICT="Strict",t.COOKIE_SAME_SITE_LAX="Lax",t.COOKIE_SAME_SITE_NONE="None"}(v||(v={})),function(t){t.WEEBLY="weebly",t.SALESFORCE="salesforce",t.SHOPIFY="shopify",t.BIG_COMMERCE="bigcommerce",t.WIX="wix",t.MAIN="123"}(m||(m={})),function(t){t[t.NONE=0]="NONE",t[t.VIEW=1]="VIEW",t[t.EDIT=2]="EDIT"}(y||(y={})),function(t){t[t.SETTINGS=0]="SETTINGS",t[t.SUBMISSIONS=1]="SUBMISSIONS",t[t.REPORTS=2]="REPORTS",t[t.FORM_EDITOR=3]="FORM_EDITOR"}(E||(E={})),function(t){t[t.STANDARD_USER=0]="STANDARD_USER",t[t.ADMINISTRATOR=1]="ADMINISTRATOR",t[t.VIEWER=2]="VIEWER",t[t.GROUP_ADMIN=3]="GROUP_ADMIN"}(T||(T={})),function(t){t.FORM="form.123formbuilder.com",t.FORM_EU="form-eu.123formbuilder.com"}(N||(N={}))},92:function(t,e,n){"use strict";var r,i,o=n(20),a=n.n(o),s=n(5),u=n.n(s),c=n(6),l=n.n(c),h=n(0),f=n.n(h);!function(t){t.NATIVE="123",t.WIX="wix",t.WEEBLY="weebly"}(r||(r={})),function(t){t.TODAY="today",t.YESTERDAY="yesterday",t.THE_DAY_BEFORE_YESTERDAY="the_day_before_yesterday",t.THIS_WEEK="this_week",t.PREVIOUS_WEEK="previous_week",t.TWO_WEEKS_AGO="two_weeks_ago",t.THIS_MONTH="this_month",t.PREVIOUS_MONTH="previous_month",t.TWO_MONTHS_AGO="two_months_ago"}(i||(i={}));var d=n(42);n.d(e,"a",(function(){return p}));var p=function(){function t(e){u()(this,t),f()(this,"_tempDate",new Date),f()(this,"_i18nDate",void 0),f()(this,"_weekDays",void 0),f()(this,"_monthNames",void 0),f()(this,"_i18nTime",void 0),f()(this,"_shortDayNames_us",["Su","Mo","Tu","We","Th","Fr","Sa"]),f()(this,"_shortMonthNames_us",["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),f()(this,"_longMonthNames_us",["January","February","March","April","May","June","July","August","September","Octomber","November","December"]),f()(this,"_friendlyTimeFormatWhenYearIsCurrentYear","%d %M"),f()(this,"_friendlyTimeFormatWhenYearIsDifferentThanCurrentYear","%d %M, %Y"),f()(this,"_i18nTimeFormat",{fewSecondsAgo:"Few seconds ago",fewMinutesAgo:"Few minutes ago",xMinutesAgo:"%t% minutes ago",xHoursAgo:"%t% hours ago",yesterday:"Yesterday"}),f()(this,"COMMON_TIME_STRINGS",{yesterday:"-1d",today:"now",tomorrow:"+1d",overmorrow:"+2d"}),f()(this,"i18n",void 0),this.i18n=e,this.setI18nService()}return l()(t,[{key:"setI18nService",value:function(){return this._friendlyTimeFormatWhenYearIsCurrentYear=this.getTranslatedTextIfExistsOrNullOtherwise(this.i18n,"LOGS_DateFormatWhenYearIsCurrentYear")||"%d %M",this._friendlyTimeFormatWhenYearIsDifferentThanCurrentYear=this.getTranslatedTextIfExistsOrNullOtherwise(this.i18n,"LOGS_DateFormatWhenYearIsDifferentThanCurrentYear")||"%d %M, %Y",this._i18nDate=(this.i18n.translateText("LOGS_DateInternationalization")||"Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|January|February|March|April|May|June|July|August|September|October|November|December").split("|"),this._weekDays=this._i18nDate.slice(0,7),this._monthNames=this._i18nDate.slice(7),this._i18nTime=(this.i18n.translateText("LOGS_TimeInternationalization")||"Few seconds ago|Few minutes ago|%t% minutes ago|%t% hours ago|Yesterday").split("|"),this._i18nTimeFormat.fewSecondsAgo=this._i18nTime[0],this._i18nTimeFormat.fewMinutesAgo=this._i18nTime[1],this._i18nTimeFormat.xMinutesAgo=this._i18nTime[2],this._i18nTimeFormat.xHoursAgo=this._i18nTime[3],this._i18nTimeFormat.yesterday=this._i18nTime[4],this}},{key:"_formatI18nTime",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._i18nTimeFormat[t].replace(/%t%/g,String(e||""))}},{key:"_padNumber",value:function(t,e){var n=String(~~t);for(e=~~e;n.length<e;)n="0"+n;return n}},{key:"formatTimeFriendly",value:function(t){if(0===(t=~~t))return" ";var e=+new Date/1e3-t;switch(this._tempDate.setTime(1e3*t),!0){case e<60:return this._formatI18nTime("fewSecondsAgo",e);case e<300:return this._formatI18nTime("fewMinutesAgo",~~(e/60));case e<3600:return this._formatI18nTime("xMinutesAgo",~~(e/60));case e<86400:return this._tempDate.getDay()!=(new Date).getDay()?this._formatI18nTime("yesterday")+", "+this._padNumber(this._tempDate.getHours(),2)+":"+this._padNumber(this._tempDate.getMinutes(),2):this._formatI18nTime("xHoursAgo",Math.round(e/3600));case e<=518400:return this._weekDays[this._tempDate.getDay()];default:return this._tempDate.getFullYear()===(new Date).getFullYear()?this.formatTime(t,this._friendlyTimeFormatWhenYearIsCurrentYear):this.formatTime(t,this._friendlyTimeFormatWhenYearIsDifferentThanCurrentYear)}}},{key:"getKey",value:function(t,e){for(var n,r=t.toLowerCase(),i=0;i<e.length;i++)if(n=e[i].toString().toLowerCase(),r.substr(0,n.length)==n)return i;throw new Error("Date.prototype: Unparsable string: key not found (str="+t+", arr=["+e.join(",")+")!")}},{key:"unpadDigitsFromString",value:function(t){if(""==t)return 0;for(var e,n=t.toString(),r=0;r<n.length&&"0"==n.charAt(r);)r++;return e=parseInt(n.substr(r)),isNaN(e)?0:e}},{key:"readNumberFromAString",value:function(t,e,n,r){var i=t.toString();if(i.length<e)throw new Error("TimeUtils: cannot parse string: not enough length");for(var o,a=i.substr(0,e),s=e;s<n&&(o=i.charAt(s),-1!=="0123456789".indexOf(o))&&parseInt(String(this.unpadDigitsFromString(a.concat(o))))<=r;)a=a.concat(o),s++;if(parseInt(a)>r)throw new Error("TimeUtils: invalid number: max allowed number is "+r+", got: "+a);return a}},{key:"parseDate",value:function(t,e){var n=new Date;if(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),"undefined"==typeof t||!t)return n;for(var r,i,o,a,s,u,c,l=null,h=null,f=null,d=null,p=null,g=null,v=null,m=String(t||""),y=String(e||""),E=0,T=!1,N=0,R=y.length;N<R;N++)try{if(m=m.substr(E),"%"==y.charAt(N)){if(++N>=y.length)throw new Error("unterminated date expression at position "+N+" in string "+y);switch(y.charAt(N)){case"a":E+=this._shortDayNames_us[this.getKey(m,this._shortDayNames_us)].length;break;case"b":p=this.getKey(m,this._shortMonthNames_us),E=this._shortMonthNames_us[p].length;break;case"c":p=~~(s=this.readNumberFromAString(m,1,2,12)),E=s.length,p-=1;break;case"d":g=~~(u=this.readNumberFromAString(m,2,2,31)),E=u.length;break;case"e":g=~~(u=this.readNumberFromAString(m,1,2,31)),E=u.length;break;case"H":l=~~(r=this.readNumberFromAString(m,2,2,23)),E=r.length;break;case"h":case"I":l=~~(r=this.readNumberFromAString(m,2,2,12)),E=r.length;break;case"i":h=~~(i=this.readNumberFromAString(m,2,2,59)),E=i.length;break;case"k":l=~~(r=this.readNumberFromAString(m,1,2,23)),E=r.length;break;case"l":l=~~(r=this.readNumberFromAString(m,1,2,12)),E=r.length;break;case"M":p=this.getKey(m,this._longMonthNames_us),E=this._longMonthNames_us[p].length;break;case"m":p=~~(s=this.readNumberFromAString(m,2,2,12)),E=s.length,p=this.unpadDigitsFromString(s)-1;break;case"p":v=this.getKey(m,["AM","PM"]),E=2;break;case"s":case"S":f=~~(o=this.readNumberFromAString(m,2,2,59)),E=o.length;break;case"Y":d=~~(a=this.readNumberFromAString(m,4,4,2100)),E=a.length;break;case"U":if(null===(c=/^(\-)?([\d]+)/.exec(m)))throw new Error("Could not parse %U modifier: invalid unix timestamp!");return n.setTime(1e3*parseInt((c[1]||"").concat(c[2]))),n;default:throw T=!0,new Error('Unsupported token "%'+y.charAt(N)+'" while parsing date')}}else if(E=1,m.charAt(0)!==y.charAt(N))throw T=!0,new Error("Unexpected character: "+JSON.stringify(m.charAt(0))+", expected: "+y.charAt(N))}catch(b){if(T)throw b;return null}if(g=null===g?null:this.unpadDigitsFromString(String(g)),p=null===p?null:this.unpadDigitsFromString(String(p)),d=null===d?null:this.unpadDigitsFromString(String(d)),l=null===l?null:this.unpadDigitsFromString(String(l)),h=null===h?null:this.unpadDigitsFromString(String(h)),f=null===f?null:this.unpadDigitsFromString(String(f)),1===v&&null!==l&&(l+=12)>23)throw new Error('Date.prototype: invalid hour : "'+l+'"');return null!==p&&n.setMonth(p),null!==g&&n.setDate(g),null!==p&&n.setMonth(p),null!==d&&n.setFullYear(d),null!==l&&n.setHours(l),null!==h&&n.setMinutes(h),null!==f&&n.setSeconds(f),12===n.getHours()&&0===v&&n.setHours(0),n}},{key:"intToTime",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"%H:%i:%s",r="",i=0,o="",a=n.length,s=new Date;for(s.setHours(0),s.setMinutes(0),s.setSeconds(t);i<a;){switch(o=n.charAt(i)){case"%":if(++i==a)return r;switch(o=n.charAt(i)){case"H":r=r.concat(this._padNumber(s.getHours(),2));break;case"h":case"I":e=s.getHours(),r=r.concat(0==e?"12":e<=12?this._padNumber(e,2):this._padNumber(e-12,2));break;case"i":r=r.concat(this._padNumber(s.getMinutes(),2));break;case"k":r=r.concat(String(s.getHours()));break;case"l":e=s.getHours(),r=r.concat(0==e?"12":e<=12?e:e-12);break;case"p":e=s.getHours(),r=r.concat(e<12?"AM":"PM");break;case"r":e=s.getHours(),r=r.concat(this._padNumber(0==e?"12":e<12?e:e-12,2),":",this._padNumber(s.getMinutes(),2),":",this._padNumber(s.getSeconds(),2)," ",s.getHours()<12?"AM":"PM");break;case"s":case"S":r=r.concat(this._padNumber(s.getSeconds(),2));break;case"T":r=r.concat(this._padNumber(s.getHours(),2),":",this._padNumber(s.getMinutes(),2),":",this._padNumber(s.getSeconds(),2));break;case"%":r=r.concat("%");break;default:throw new Error("The %"+o+" specifier is not supported!")}break;default:r=r.concat(o)}i++}return r}},{key:"formatTime",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"%Y-%m-%d %H:%i:%s",r="",i=0,o="",a=n.length,s=new Date;for(s.setTime(1e3*t);i<a;){switch(o=n.charAt(i)){case"%":if(++i==a)return r;switch(o=n.charAt(i)){case"a":r=r.concat(this._weekDays[s.getDay()].substr(0,3));break;case"b":r=r.concat(this._monthNames[s.getMonth()].substr(0,3));break;case"c":r=r.concat(String(s.getMonth()+1));break;case"d":r=r.concat(this._padNumber(s.getDate(),2));break;case"e":r=r.concat(String(s.getDate()));break;case"H":r=r.concat(this._padNumber(s.getHours(),2));break;case"h":case"I":e=s.getHours(),r=r.concat(0==e?"12":e<=12?this._padNumber(e,2):this._padNumber(e-12,2));break;case"i":r=r.concat(this._padNumber(s.getMinutes(),2));break;case"k":r=r.concat(String(s.getHours()));break;case"l":e=s.getHours(),r=r.concat(0==e?"12":e<=12?e:e-12);break;case"M":r=r.concat(this._monthNames[s.getMonth()]);break;case"m":r=r.concat(this._padNumber(s.getMonth()+1,2));break;case"p":e=s.getHours(),r=r.concat(e<12?"AM":"PM");break;case"r":e=s.getHours(),r=r.concat(this._padNumber(0==e?"12":e<12?e:e-12,2),":",this._padNumber(s.getMinutes(),2),":",this._padNumber(s.getSeconds(),2)," ",s.getHours()<12?"AM":"PM");break;case"s":case"S":r=r.concat(this._padNumber(s.getSeconds(),2));break;case"T":r=r.concat(this._padNumber(s.getHours(),2),":",this._padNumber(s.getMinutes(),2),":",this._padNumber(s.getSeconds(),2));break;case"W":r=r.concat(this._weekDays[s.getDay()]);break;case"w":r=r.concat(String(s.getDay()));break;case"Y":r=r.concat(String(s.getFullYear()));break;case"y":r=r.concat(String(s.getFullYear()).substr(2));break;case"U":r=r.concat(String(Math.floor(s.getTime()/1e3)));break;case"%":r=r.concat("%");break;default:throw new Error("The %"+o+" specifier is not supported!")}break;default:r=r.concat(o)}i++}return r}},{key:"getMonthNamesLong",value:function(){return this._monthNames}},{key:"getMonthNamesShort",value:function(){for(var t=[],e=0,n=this._monthNames.length;e<n;e++)t.push(this._monthNames[e].substr(0,3));return t}},{key:"getWeekNumber",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=new Date(t?+t:+new Date);return e.setHours(0,0,0,0),e.setDate(e.getDate()+4-(e.getDay()||7)),~~(((e.getTime()-new Date(e.getFullYear(),0,1).getTime())/864e5+1)/7)}},{key:"getFriendlyIntervalName",value:function(t){switch(t){case i.TODAY:return this.i18n.translateText("dashboard_activityDateToday")||"Today";case i.YESTERDAY:return this.i18n.translateText("dashboard_activityDateYesterday")||"Yesterday";case i.THE_DAY_BEFORE_YESTERDAY:return this.i18n.translateText("dashboard_activityDateTwoDaysAgo")||"Two days ago";case i.THIS_WEEK:return this.i18n.translateText("dashboard_activityDateThisWeek")||"This week";case i.PREVIOUS_WEEK:return this.i18n.translateText("dashboard_activityDateLastWeek")||"Last week";case i.TWO_WEEKS_AGO:return this.i18n.translateText("dashboard_activityDateTwoWeeksAgo")||"Two weeks ago";case i.THIS_MONTH:return this.i18n.translateText("dashboard_activityDateThisMonth")||"This month";case i.PREVIOUS_MONTH:return this.getMonthName(1)||"Last month";case i.TWO_MONTHS_AGO:return this.getMonthName(2)||"Two months ago";default:return}}},{key:"getMonthName",value:function(t){var e=new Date;return e.setMonth(e.getMonth()-t),this._monthNames[e.getMonth()]}},{key:"dateAdd",value:function(t,e){if(""===(t=String(t||"")))return null;var n,r,i,o="-"===t.charAt(0),s="+"===t.charAt(0)||null,u=null,c=null,l=null,h=null,f=null,d=null,p=null,g=null,v=new Date,m=!1;for((o||s)&&(t=t.substr(1)),null===s&&(s=!0),e&&a()(e,Date)&&v.setTime(e.getTime()),i=o?-1:1;""!==t&&(r=/^([1-9]([\d]+)?)(HH|MM|SS|MS|D|W|M|Y)/i.exec(t));){switch(n=~~r[1],m=!0,r[3].toLowerCase()){case"hh":if(null!==u)return null;u=n;break;case"mm":if(null!==h)return null;h=n;break;case"ss":if(null!==c)return null;c=n;break;case"ms":if(null!==l)return null;l=n;break;case"y":if(null!==p)return null;p=n;break;case"m":if(null!==d)return null;d=n;break;case"w":if(null!==g)return null;g=n;break;case"d":if(null!==f)return null;f=n;break;default:return null}t=t.substr(r[0].length)}return m&&""===t?(null!==p&&v.setFullYear(v.getFullYear()+i*p),null!==d&&v.setMonth(v.getMonth()+i*d),null!==g&&v.setDate(v.getDate()+7*i*g),null!==f&&v.setDate(v.getDate()+i*f),null!==u&&v.setHours(v.getHours()+i*u),null!==h&&v.setMinutes(v.getMinutes()+i*h),null!==c&&v.setSeconds(v.getSeconds()+i*c),null!==l&&v.setMilliseconds(v.getMilliseconds()+i*l),v):null}},{key:"stringToTime",value:function(e,n){if(""===(e=String(e||"").toLowerCase())||"now"===e)return new Date;e=this.COMMON_TIME_STRINGS[e]||e;var r=this.dateAdd(e);if(null!==r)return r;for(var i=t.DATE_FORMAT_MAPPINGS_FOR_STRING_TO_TIME_FUNCTION[n||"datemmddyyyy"]||t.DATE_FORMAT_MAPPINGS_FOR_STRING_TO_TIME_FUNCTION.datemmddyyyy,o=0,a=i.length;o<a;o++)try{if(r=this.parseDate(e,i[o]))return r}catch(s){}try{if(r=this.parseDate(e,"%H:%i:%S"))return r}catch(s){}try{if(r=this.parseDate(e,"%h:%i:%S %p"))return r}catch(s){}try{if(r=this.parseDate(e,"%H:%i %p"))return r}catch(s){}try{if(r=this.parseDate(e,"%H:%i"))return r}catch(s){}return null}},{key:"isHumanDateString",value:function(t){var e=String(t||"").toLowerCase();return"now"===e||void 0!==this.COMMON_TIME_STRINGS[e]}},{key:"getTranslatedTextIfExistsOrNullOtherwise",value:function(t,e){var n=t.translateText(e);return n===e?null:n}}],[{key:"createInstanceInNonSingletonModeWithoutInternationalizationSupport",value:function(){var e=new d.a;return e.setTranslations({LOGS_DateInternationalization:"Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|January|February|March|April|May|June|July|August|September|October|November|December",LOGS_TimeInternationalization:"Few seconds ago|Few minutes ago|%t% minutes ago|%t% hours ago|Yesterday",dashboard_activityDateToday:"Today",dashboard_activityDateBeforeYesterday:"The day before yesterday",dashboard_activityDateThisWeek:"This week",dashboard_activityDateWeekBefore:"The week before",dashboard_activityDateThisMonth:"This month",dashboard_activityDateWeekXBefore:"Week%d"}),new t(e)}},{key:"dateEquals",value:function(t,e){return t===e||!(!t&&e||!e&&t)&&t.getTime()===e.getTime()}},{key:"createDateFromUTCTimestamp",value:function(t){var e=new Date,n=6e4*e.getTimezoneOffset();return null===t?e.setTime(e.getTime()+n):e.setTime(1e3*t+n),e}},{key:"getDateTimestampWithAppliedUTCCorrection",value:function(t){return t?Math.round((t.getTime()-6e4*t.getTimezoneOffset())/1e3):null}}]),t}();f()(p,"DATE_FORMAT_MAPPINGS_FOR_STRING_TO_TIME_FUNCTION",{dateyyyymmdd:["%Y/%m/%d","%Y-%m-%d","%Y.%m.%d"],dateddmmyyyy:["%d/%m/%Y","%d-%m-%Y","%d.%m.%Y"],datemmddyyyy:["%m/%d/%Y","%m-%d-%Y","%m.%d.%Y"],datemmyyyy:["%m/%Y","%m-%Y","%m.%Y"]})},93:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(5),i=n.n(r),o=n(6),a=n.n(o),s=n(0),u=n.n(s),c=n(12),l=function(){function t(e,n,r){i()(this,t),u()(this,"numColumns",void 0),u()(this,"columns",{}),u()(this,"data",[]),u()(this,"rowIndex",void 0),this.numColumns=e.length;for(var o=0;o<this.numColumns;o++)this.columns[e[o].name]={type:e[o].type,index:o};this.data=n,this.rowIndex=r}return a()(t,[{key:"withIndex",value:function(t){return this.rowIndex=t,this}},{key:"withRowData",value:function(t){return this.data=t,this}},{key:"getDataAsArray",value:function(){return this.data}},{key:"getColumnValue",value:function(t){return this.data[this.columns[t].index]}},{key:"setColumnValue",value:function(t,e){this.data[this.columns[t].index]=e}},{key:"toObject",value:function(){var t,e=Object.create(null);for(var n in this.columns)void 0===(t=this.data[this.columns[n].index])&&(t=null),e[n]=t;return e}},{key:"getRowIndex",value:function(){return this.rowIndex}}],[{key:"createFromObject",value:function(e){var n=[],r=[];for(var i in e)n.push({type:c.d.NULL,name:i}),r.push(e[i]);return new t(n,r,0)}},{key:"createFromTable",value:function(e){return new t(e.describe(),e.createEmptyRow(),void 0)}}]),t}()}}]);