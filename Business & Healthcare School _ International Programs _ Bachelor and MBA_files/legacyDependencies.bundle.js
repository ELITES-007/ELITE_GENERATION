!function(e){function t(t){for(var i,o,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(u&&u(t);p.length;)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={2:0},a=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;a.push([598,1,0]),n()}([,function(e,t,n){"use strict";var i,r,a,o,s,l,c,u,d,p,h,_,g,m,f,E,y,T,v,O,b,C,I,R,P,N,A,S,L,D,w,k,M,x,U,F,B,Y,V,H,G,W,j,K,z,X,Z,q,J,Q,$,ee,te,ne,ie,re,ae,oe,se,le,ce,ue,de,pe,he,_e,ge,me,fe,Ee,ye,Te,ve,Oe,be,Ce,Ie,Re,Pe,Ne,Ae,Se,Le,De,we,ke,Me,xe,Ue,Fe;n.d(t,"r",(function(){return i})),n.d(t,"o",(function(){return r})),n.d(t,"db",(function(){return a})),n.d(t,"I",(function(){return o})),n.d(t,"L",(function(){return s})),n.d(t,"M",(function(){return l})),n.d(t,"B",(function(){return c})),n.d(t,"A",(function(){return u})),n.d(t,"mb",(function(){return d})),n.d(t,"z",(function(){return p})),n.d(t,"G",(function(){return h})),n.d(t,"p",(function(){return _})),n.d(t,"m",(function(){return g})),n.d(t,"O",(function(){return m})),n.d(t,"N",(function(){return f})),n.d(t,"l",(function(){return E})),n.d(t,"F",(function(){return y})),n.d(t,"J",(function(){return T})),n.d(t,"K",(function(){return v})),n.d(t,"E",(function(){return O})),n.d(t,"h",(function(){return b})),n.d(t,"g",(function(){return C})),n.d(t,"vb",(function(){return I})),n.d(t,"wb",(function(){return R})),n.d(t,"eb",(function(){return P})),n.d(t,"i",(function(){return A})),n.d(t,"j",(function(){return S})),n.d(t,"k",(function(){return L})),n.d(t,"tb",(function(){return D})),n.d(t,"e",(function(){return w})),n.d(t,"lb",(function(){return k})),n.d(t,"s",(function(){return M})),n.d(t,"n",(function(){return x})),n.d(t,"C",(function(){return U})),n.d(t,"W",(function(){return F})),n.d(t,"c",(function(){return Y})),n.d(t,"kb",(function(){return V})),n.d(t,"f",(function(){return H})),n.d(t,"D",(function(){return W})),n.d(t,"P",(function(){return j})),n.d(t,"b",(function(){return K})),n.d(t,"a",(function(){return z})),n.d(t,"H",(function(){return X})),n.d(t,"ob",(function(){return Z})),n.d(t,"x",(function(){return q})),n.d(t,"sb",(function(){return J})),n.d(t,"rb",(function(){return Q})),n.d(t,"v",(function(){return $})),n.d(t,"y",(function(){return ee})),n.d(t,"nb",(function(){return te})),n.d(t,"q",(function(){return ne})),n.d(t,"yb",(function(){return ie})),n.d(t,"zb",(function(){return re})),n.d(t,"cb",(function(){return ae})),n.d(t,"ab",(function(){return oe})),n.d(t,"Z",(function(){return se})),n.d(t,"S",(function(){return ce})),n.d(t,"R",(function(){return de})),n.d(t,"U",(function(){return pe})),n.d(t,"T",(function(){return he})),n.d(t,"pb",(function(){return fe})),n.d(t,"V",(function(){return Ee})),n.d(t,"Q",(function(){return ve})),n.d(t,"qb",(function(){return Oe})),n.d(t,"ub",(function(){return be})),n.d(t,"fb",(function(){return Ie})),n.d(t,"ib",(function(){return Re})),n.d(t,"u",(function(){return Pe})),n.d(t,"xb",(function(){return Ne})),n.d(t,"Y",(function(){return Ae})),n.d(t,"d",(function(){return Se})),n.d(t,"jb",(function(){return Le})),n.d(t,"gb",(function(){return De})),n.d(t,"hb",(function(){return we})),n.d(t,"X",(function(){return ke})),n.d(t,"t",(function(){return Me})),n.d(t,"bb",(function(){return xe})),n.d(t,"w",(function(){return Fe})),function(e){e[e.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL=0]="LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL",e[e.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD=1]="LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD",e[e.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL=2]="LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL",e[e.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD=3]="LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD",e[e.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL=4]="LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL",e[e.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD=5]="LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD",e[e.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD=6]="LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD",e[e.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD=7]="LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD",e[e.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD=8]="LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD",e[e.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD=9]="LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD",e[e.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD=10]="LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD",e[e.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD=11]="LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD",e[e.CUSTOM_CONTROL_RENDERER=12]="CUSTOM_CONTROL_RENDERER"}(i||(i={})),function(e){e[e.TOP=0]="TOP",e[e.RIGHT=1]="RIGHT",e[e.BOTTOM=2]="BOTTOM",e[e.LEFT=3]="LEFT"}(r||(r={})),function(e){e[e.NONE=0]="NONE",e[e.TOP_AND_BOTTOM=1]="TOP_AND_BOTTOM",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_ONLY=3]="TOP_ONLY",e[e.LEFT_ONLY=4]="LEFT_ONLY",e[e.RIGHT_ONLY=5]="RIGHT_ONLY",e[e.BOTTOM_ONLY=6]="BOTTOM_ONLY",e[e.ALL=7]="ALL"}(a||(a={})),function(e){e[e.FULL=0]="FULL",e[e.THIRD=1]="THIRD",e[e.HALF=2]="HALF",e[e.QUARTER=3]="QUARTER",e[e.FILL=4]="FILL",e[e.ONE_UNIT=5]="ONE_UNIT",e[e.TWO_UNITS=6]="TWO_UNITS",e[e.THREE_UNITS=7]="THREE_UNITS",e[e.FOUR_UNITS=8]="FOUR_UNITS"}(o||(o={})),function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.TOP_TO_BOTTOM=1]="TOP_TO_BOTTOM"}(s||(s={})),function(e){e[e.EDITOR_PLATFORM_DETAILS=0]="EDITOR_PLATFORM_DETAILS",e[e.PAYMENT_PROCESSORS_LIST=1]="PAYMENT_PROCESSORS_LIST",e[e.SELECTED_PAYMENT_PROCESSOR_TYPE_ID=2]="SELECTED_PAYMENT_PROCESSOR_TYPE_ID",e[e.SELECTED_PAYMENT_PROCESSOR_EXTRA_DATA=3]="SELECTED_PAYMENT_PROCESSOR_EXTRA_DATA",e[e.INITIAL_QUIZ_TIMER=4]="INITIAL_QUIZ_TIMER",e[e.CURRENT_QUIZ_TIMER=5]="CURRENT_QUIZ_TIMER",e[e.SESSION_ID=6]="SESSION_ID",e[e.I18N=7]="I18N",e[e.USER_INTERFACE=8]="USER_INTERFACE",e[e.SKIP_CAPTCHA=9]="SKIP_CAPTCHA",e[e.TRANSLATIONS_LANGUAGE_CODES=10]="TRANSLATIONS_LANGUAGE_CODES",e[e.CURRENT_EDITABLE_ELEMENT=11]="CURRENT_EDITABLE_ELEMENT",e[e.DEFAULT_USER_PREFERENCES=12]="DEFAULT_USER_PREFERENCES",e[e.VIEW_FORM_CONTEXT=13]="VIEW_FORM_CONTEXT",e[e.SUBMISSION_XML_DATETIME_START=14]="SUBMISSION_XML_DATETIME_START",e[e.PAYMENTS_COUPON_CODE_CONFIGURATION=15]="PAYMENTS_COUPON_CODE_CONFIGURATION",e[e.SUBMISSION_ID=16]="SUBMISSION_ID",e[e.FORM_SETTINGS=17]="FORM_SETTINGS",e[e.SHOW_REALTIME_CALCULATIONS=18]="SHOW_REALTIME_CALCULATIONS",e[e.DETAILED_INVOICE_OPTIONS=19]="DETAILED_INVOICE_OPTIONS",e[e.LAST_CALCULATION_HTML_MARKUP=20]="LAST_CALCULATION_HTML_MARKUP",e[e.SHOW_DOWNGRADE_NOTIFICATION=21]="SHOW_DOWNGRADE_NOTIFICATION",e[e.UNDO_SERVICE=22]="UNDO_SERVICE",e[e.FONTS_MANAGER=23]="FONTS_MANAGER",e[e.GEOLOCATION_USER_COUNTRY_CODE=24]="GEOLOCATION_USER_COUNTRY_CODE",e[e.WIX_AUTHORIZED_REQUEST_DETAILS=25]="WIX_AUTHORIZED_REQUEST_DETAILS",e[e.THEME_STRATEGY=26]="THEME_STRATEGY",e[e.EXTERNAL_THEME_INITIAL_PROPERTIES=27]="EXTERNAL_THEME_INITIAL_PROPERTIES",e[e.EDITOR_SETTINGS_PANEL=28]="EDITOR_SETTINGS_PANEL",e[e.IS_HIPAA_FORM=29]="IS_HIPAA_FORM",e[e.DIFFERENCE_BETWEEN_CLIENT_AND_SERVER_TIME=30]="DIFFERENCE_BETWEEN_CLIENT_AND_SERVER_TIME",e[e.RULES_QUERY_BUILDER=31]="RULES_QUERY_BUILDER",e[e.VIEW_FORM_CONTEXT_OPTIONS=32]="VIEW_FORM_CONTEXT_OPTIONS",e[e.EDITOR_HEADER=33]="EDITOR_HEADER",e[e.IS_WORKFLOWS_VIEW_FORM_EMBED=34]="IS_WORKFLOWS_VIEW_FORM_EMBED",e[e.WORKFLOWS_USERS_LIST=35]="WORKFLOWS_USERS_LIST",e[e.POPUP_NOTIFICATIONS=36]="POPUP_NOTIFICATIONS",e[e.USER_FEATURES=37]="USER_FEATURES",e[e.DISABLED_MOBILE_INTERACTION=38]="DISABLED_MOBILE_INTERACTION",e[e.USER_PLAN_NAME=39]="USER_PLAN_NAME",e[e.DEFAULT_NOTIFICATIONS_PREFERENCES=40]="DEFAULT_NOTIFICATIONS_PREFERENCES",e[e.USER_DETAILS=41]="USER_DETAILS",e[e.SHOULD_SHOW_PAYMENT_SUMMARY=42]="SHOULD_SHOW_PAYMENT_SUMMARY",e[e.HAS_ENABLED_PAYMENT_PROCESSORS=43]="HAS_ENABLED_PAYMENT_PROCESSORS",e[e.HAS_CALCULATE_BUTTON=44]="HAS_CALCULATE_BUTTON"}(l||(l={})),function(e){e[e.VIEW=0]="VIEW",e[e.EDIT=1]="EDIT"}(c||(c={})),function(e){e[e.LEFT_ALIGNED=0]="LEFT_ALIGNED",e[e.TOP_ALIGNED=1]="TOP_ALIGNED",e[e.RIGHT_ALIGNED=2]="RIGHT_ALIGNED"}(u||(u={})),function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT",e[e.CENTER=2]="CENTER",e[e.JUSTIFY=3]="JUSTIFY"}(d||(d={})),function(e){e[e.BELOW_LABEL=0]="BELOW_LABEL",e[e.BELOW_FIELD=1]="BELOW_FIELD"}(p||(p={})),function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT"}(h||(h={})),function(e){e[e.CONTROL=0]="CONTROL",e[e.CONTAINER=1]="CONTAINER"}(_||(_={})),function(e){e[e.NONE=0]="NONE",e[e.ELEMENT_RESIZE=1]="ELEMENT_RESIZE",e[e.LABEL_RESIZE=2]="LABEL_RESIZE",e[e.DRAG=3]="DRAG",e[e.SELECT=4]="SELECT"}(g||(g={})),function(e){e[e.MOUSE_MOVE=0]="MOUSE_MOVE",e[e.MOUSE_DOWN=1]="MOUSE_DOWN",e[e.MOUSE_UP=2]="MOUSE_UP"}(m||(m={})),function(e){e[e.NONE=0]="NONE",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.BOTH=3]="BOTH"}(f||(f={})),function(e){e[e.STARTED_FROM_EDITOR_PANEL=0]="STARTED_FROM_EDITOR_PANEL",e[e.STARTED_FROM_FORM=1]="STARTED_FROM_FORM"}(E||(E={})),function(e){e[e.SUBMIT=0]="SUBMIT",e[e.UPDATE=1]="UPDATE",e[e.SWITCH_PAGE=2]="SWITCH_PAGE",e[e.SAVE_FOR_LATER=3]="SAVE_FOR_LATER",e[e.SUBMIT_QUIZ=4]="SUBMIT_QUIZ",e[e.APPROVE=5]="APPROVE",e[e.REJECT=6]="REJECT",e[e.CALCULATE_QUIZ_SCORE=7]="CALCULATE_QUIZ_SCORE"}(y||(y={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.FIXED_AMOUNT=1]="FIXED_AMOUNT",e[e.PRODUCT=2]="PRODUCT",e[e.PRODUCT_DISCOUNT=3]="PRODUCT_DISCOUNT",e[e.PRODUCT_TAX=4]="PRODUCT_TAX",e[e.INVOICE_COUPON=5]="INVOICE_COUPON",e[e.INVOICE_DISCOUNT=6]="INVOICE_DISCOUNT",e[e.INVOICE_TAX=7]="INVOICE_TAX",e[e.SUBTOTAL=8]="SUBTOTAL",e[e.INVOICE_FEE=9]="INVOICE_FEE",e[e.PRODUCT_FORMULA=10]="PRODUCT_FORMULA"}(T||(T={})),function(e){e[e.PERCENT=0]="PERCENT",e[e.FIXED=1]="FIXED"}(v||(v={})),function(e){e[e.SHOW_TEXT=0]="SHOW_TEXT",e[e.REDIRECT=1]="REDIRECT",e[e.TEXT_AND_REDIRECT=2]="TEXT_AND_REDIRECT",e[e.SHOW_REPORT=3]="SHOW_REPORT",e[e.SHOW_QUIZ_RESULTS=4]="SHOW_QUIZ_RESULTS",e[e.SHOW_HTML=5]="SHOW_HTML",e[e.VALIDATION_SUCCESSFUL=6]="VALIDATION_SUCCESSFUL"}(O||(O={})),function(e){e[e.NONE=0]="NONE",e[e.HUE=1]="HUE",e[e.SATURATION=2]="SATURATION",e[e.LIGHT=3]="LIGHT",e[e.ALPHA=4]="ALPHA"}(b||(b={})),function(e){e[e.RGBA=0]="RGBA",e[e.HSLA=1]="HSLA"}(C||(C={})),function(e){e[e.VIEW_FORM=0]="VIEW_FORM",e[e.EDIT_FORM=1]="EDIT_FORM",e[e.EDIT_SUBMISSION=2]="EDIT_SUBMISSION",e[e.APPROVAL=3]="APPROVAL",e[e.QUIZ=4]="QUIZ",e[e.SAVE_FOR_LATER=5]="SAVE_FOR_LATER",e[e.PDF_EXPORT=6]="PDF_EXPORT",e[e.EDIT_LATER=7]="EDIT_LATER",e[e.VIEW_FORM_OFFLINE=8]="VIEW_FORM_OFFLINE"}(I||(I={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.MOBILE_APP=1]="MOBILE_APP",e[e.MOBILE_APP_OFFLINE=2]="MOBILE_APP_OFFLINE"}(R||(R={})),function(e){e[e.SHOW_CONTROL=0]="SHOW_CONTROL",e[e.HIDE_CONTROL=1]="HIDE_CONTROL",e[e.CALCULATE=2]="CALCULATE"}(P||(P={})),function(e){e[e.DISPLAY_ONLY_AS_RADIO=0]="DISPLAY_ONLY_AS_RADIO",e[e.DISPLAY_BOTH_AS_RADIO_AND_AS_DROPDOWN=1]="DISPLAY_BOTH_AS_RADIO_AND_AS_DROPDOWN",e[e.DISPLAY_ONLY_AS_DROPDOWN=2]="DISPLAY_ONLY_AS_DROPDOWN"}(N||(N={})),function(e){e[e.DAY=0]="DAY",e[e.MONTH=1]="MONTH",e[e.YEAR=2]="YEAR",e[e.HOUR_24=3]="HOUR_24",e[e.HOUR_12=4]="HOUR_12",e[e.MINUTE=5]="MINUTE",e[e.SECOND=6]="SECOND",e[e.MILLISECOND=7]="MILLISECOND",e[e.AM_PM=8]="AM_PM"}(A||(A={})),function(e){e[e.DAY=0]="DAY",e[e.MONTH=1]="MONTH",e[e.YEAR=2]="YEAR",e[e.TIME=3]="TIME"}(S||(S={})),function(e){e[e.SUNDAY=0]="SUNDAY",e[e.MONDAY=1]="MONDAY"}(L||(L={})),function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.PROGRESS=1]="PROGRESS",e[e.SUCCESS=2]="SUCCESS",e[e.REMOVED=3]="REMOVED",e[e.ERROR=4]="ERROR"}(D||(D={})),function(e){e[e.ALWAYS=0]="ALWAYS",e[e.RESERVED=1]="RESERVED",e[e.NONE=2]="NONE",e[e.DAILY=3]="DAILY",e[e.SMART=4]="SMART",e[e.RECAPTCHA=5]="RECAPTCHA"}(w||(w={})),function(e){e[e.STARS=0]="STARS",e[e.ADULTS=1]="ADULTS",e[e.CHILDREN=2]="CHILDREN"}(k||(k={})),function(e){e[e.SHOWN=0]="SHOWN",e[e.HIDDEN=1]="HIDDEN",e[e.REMOVED=2]="REMOVED",e[e.COMPACT=3]="COMPACT",e[e.OTHER=4]="OTHER"}(M||(M={})),function(e){e[e.NO_ACCESS=0]="NO_ACCESS",e[e.VIEW_ONLY=1]="VIEW_ONLY",e[e.FULL_EDIT=2]="FULL_EDIT"}(x||(x={})),function(e){e[e.NONE=0]="NONE",e[e.STEPS=1]="STEPS",e[e.PERCENTAGE=2]="PERCENTAGE",e[e.PAGE_NUMBERS=3]="PAGE_NUMBERS"}(U||(U={})),function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(F||(F={})),function(e){e[e.PIXELS=0]="PIXELS",e[e.PERCENTS=1]="PERCENTS"}(B||(B={})),function(e){e[e.ADDRESS_1=0]="ADDRESS_1",e[e.ADDRESS_2=1]="ADDRESS_2",e[e.CITY=2]="CITY",e[e.ZONE=3]="ZONE",e[e.ZIP_CODE=4]="ZIP_CODE",e[e.COUNTRY=5]="COUNTRY",e[e.ALL=6]="ALL"}(Y||(Y={})),function(e){e[e.GOOGLE_PLUS=0]="GOOGLE_PLUS",e[e.LINKEDIN=1]="LINKEDIN",e[e.TWITTER=2]="TWITTER",e[e.FACEBOOK_LIKE=3]="FACEBOOK_LIKE",e[e.FACEBOOK_SHARE=4]="FACEBOOK_SHARE"}(V||(V={})),function(e){e[e.CHECKBOX=0]="CHECKBOX",e[e.RADIO=1]="RADIO",e[e.DROPDOWN=2]="DROPDOWN",e[e.SCALE=3]="SCALE"}(H||(H={})),function(e){e[e.NEW_LINE=0]="NEW_LINE",e[e.SEMICOLON=1]="SEMICOLON",e[e.COMMA=2]="COMMA",e[e.TAB=3]="TAB"}(G||(G={})),function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(W||(W={})),function(e){e[e.INITIALS=0]="INITIALS",e[e.MIDDLE_NAME=1]="MIDDLE_NAME",e[e.TITLE=2]="TITLE"}(j||(j={})),function(e){e[e.APPROVE=0]="APPROVE",e[e.CALCULATE=1]="CALCULATE",e[e.PREVIEW=2]="PREVIEW",e[e.PRINT=3]="PRINT",e[e.RESET=4]="RESET",e[e.SAVE_FOR_LATER=5]="SAVE_FOR_LATER",e[e.PURCHASE=6]="PURCHASE"}(K||(K={})),function(e){e[e.APPROVE=0]="APPROVE",e[e.CALCULATE=1]="CALCULATE",e[e.PREVIEW=2]="PREVIEW",e[e.PRINT=3]="PRINT",e[e.RESET=4]="RESET",e[e.SAVE_FOR_LATER=5]="SAVE_FOR_LATER",e[e.SHOW_SUMMARY=6]="SHOW_SUMMARY",e[e.SUBMIT=7]="SUBMIT",e[e.NEXT_PAGE=8]="NEXT_PAGE",e[e.PREVIOUS_PAGE=9]="PREVIOUS_PAGE"}(z||(z={})),function(e){e[e.UNFILLED=0]="UNFILLED",e[e.ERROR=1]="ERROR",e[e.FILLED=2]="FILLED"}(X||(X={})),function(e){e[e.AM=0]="AM",e[e.PM=1]="PM"}(Z||(Z={})),function(e){e[e.UPLOAD=0]="UPLOAD",e[e.DOWNLOAD=1]="DOWNLOAD"}(q||(q={})),function(e){e[e.YOUTUBE_VIDEO=0]="YOUTUBE_VIDEO",e[e.VIMEO_VIDEO=1]="VIMEO_VIDEO",e[e.TED_TALKS_VIDEO=2]="TED_TALKS_VIDEO",e[e.NFB_VIDEO=3]="NFB_VIDEO",e[e.KICKSTARTER_VIDEO=4]="KICKSTARTER_VIDEO",e[e.DAILYMOTION_VIDEO=5]="DAILYMOTION_VIDEO",e[e.WORDPRESS_TV_VIDEO=6]="WORDPRESS_TV_VIDEO",e[e.TWITCH_VIDEO=7]="TWITCH_VIDEO",e[e.SOUNDCLOUD_AUDIO=8]="SOUNDCLOUD_AUDIO",e[e.MIXCLOUD_AUDIO=9]="MIXCLOUD_AUDIO",e[e.FACEBOOK_POST=10]="FACEBOOK_POST",e[e.FACEBOOK_PAGE=11]="FACEBOOK_PAGE",e[e.PDF_FILE=12]="PDF_FILE",e[e.MOBILE_EMBED=13]="MOBILE_EMBED"}(J||(J={})),function(e){e[e.ANY=0]="ANY",e[e.VIDEO_OR_AUDIO=1]="VIDEO_OR_AUDIO",e[e.PDF=2]="PDF",e[e.FACEBOOK=3]="FACEBOOK"}(Q||(Q={})),function(e){e[e.NONE=0]="NONE",e[e.ROOT_NODE=1]="ROOT_NODE",e[e.LABEL_NODE=2]="LABEL_NODE",e[e.ERROR_NODE=4]="ERROR_NODE",e[e.OTHER=8]="OTHER"}($||($={})),function(e){e[e.FONT_FAMILY=0]="FONT_FAMILY",e[e.FONT_SIZE=1]="FONT_SIZE",e[e.FONT_WEIGHT=2]="FONT_WEIGHT",e[e.FONT_STYLE=3]="FONT_STYLE",e[e.FONT_LINE_HEIGHT=4]="FONT_LINE_HEIGHT"}(ee||(ee={})),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.WIX_THEME=1]="WIX_THEME",e[e.WIX_THEME_MANAGED_BY_WIX=2]="WIX_THEME_MANAGED_BY_WIX"}(te||(te={})),function(e){e[e.UP=-1]="UP",e[e.DOWN=1]="DOWN"}(ne||(ne={})),function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(ie||(ie={})),function(e){e[e.IDLE=0]="IDLE",e[e.START=1]="START",e[e.RUN=2]="RUN",e[e.DROP=3]="DROP"}(re||(re={})),function(e){e[e.LINK=1]="LINK",e[e.EMBED_JAVASCRIPT=2]="EMBED_JAVASCRIPT",e[e.PUBLISH_PLATFORMS=3]="PUBLISH_PLATFORMS",e[e.PLATFORM_BLOGGER=4]="PLATFORM_BLOGGER",e[e.PLATFORM_FACEBOOK=5]="PLATFORM_FACEBOOK",e[e.PLATFORM_WORDPRESS=6]="PLATFORM_WORDPRESS",e[e.PLATFORM_GOOGLE_SITES=7]="PLATFORM_GOOGLE_SITES",e[e.PLATFORM_TWITTER=8]="PLATFORM_TWITTER",e[e.PLATFORM_JOOMLA=9]="PLATFORM_JOOMLA",e[e.PLATFORM_SALESFORCE=10]="PLATFORM_SALESFORCE",e[e.PLATFORM_UNBOUNCE=11]="PLATFORM_UNBOUNCE",e[e.LEGACY_PUBLISH=12]="LEGACY_PUBLISH",e[e.PLATFORM_SHOPIFY=13]="PLATFORM_SHOPIFY",e[e.PLATFORM_BIG_COMMERCE=14]="PLATFORM_BIG_COMMERCE",e[e.PLATFORM_WEEBLY=15]="PLATFORM_WEEBLY",e[e.PLATFORM_SALESFORCE_COMMUNITY=16]="PLATFORM_SALESFORCE_COMMUNITY",e[e.PLATFORM_WIX=17]="PLATFORM_WIX"}(ae||(ae={})),function(e){e.PUBLISH_PLATFORMS="platforms-publish-method",e.LINK="link-publish-method",e.EMBED_JAVASCRIPT="embed-publish-method",e.PLATFORM_SHOPIFY="shopify-publish-method",e.PLATFORM_BIG_COMMERCE="bigcommerce-publish-method",e.PLATFORM_FACEBOOK="facebook-publish-method",e.PLATFORM_BLOGGER="blogger-publish-method",e.PLATFORM_WORDPRESS="wordpress-publish-method",e.PLATFORM_JOOMLA="joomla-publish-method",e.PLATFORM_SALESFORCE="salesforce-publish-method",e.PLATFORM_SALESFORCE_COMMUNITY="salesforce-community-publish-method",e.PLATFORM_UNBOUNCE="unbounce-publish-method",e.PLATFORM_GOOGLE_SITES="google-sites-publish-method",e.PLATFORM_TWITTER="twitter-publish-method",e.PLATFORM_WEEBLY="weebly-publish-method",e.PLATFORM_WIX="wix-publish-method"}(oe||(oe={})),function(e){e[e.LINK=0]="LINK",e[e.JAVASCRIPT=1]="JAVASCRIPT",e[e.IFRAME=2]="IFRAME",e[e.EMBED_HTML_TEXT=3]="EMBED_HTML_TEXT",e[e.EMBED_HTML_IMAGE=4]="EMBED_HTML_IMAGE",e[e.LIGHTBOX_TEXT_LINK=5]="LIGHTBOX_TEXT_LINK",e[e.LIGHTBOX_IMAGE_LINK=6]="LIGHTBOX_IMAGE_LINK",e[e.LIGHTBOX_FLOATING_BUTTON=7]="LIGHTBOX_FLOATING_BUTTON",e[e.LIGHTBOX_AUTO_POPUP=8]="LIGHTBOX_AUTO_POPUP",e[e.EMBED_INLINE_HTML=9]="EMBED_INLINE_HTML",e[e.APP_FACEBOOK=10]="APP_FACEBOOK",e[e.APP_BLOGGER=11]="APP_BLOGGER",e[e.APP_WORDPRESS=12]="APP_WORDPRESS",e[e.APP_JOOMLA=13]="APP_JOOMLA",e[e.APP_SALESFORCE=14]="APP_SALESFORCE",e[e.APP_UNBOUNCE=15]="APP_UNBOUNCE",e[e.APP_GOOGLE=16]="APP_GOOGLE",e[e.APP_TWITTER=17]="APP_TWITTER",e[e.APP_BIGCOMMERCE=18]="APP_BIGCOMMERCE",e[e.APP_SHOPIFY=19]="APP_SHOPIFY"}(se||(se={})),function(e){e.AUTO="auto",e.NONE="none",e.SSL="ssl",e.TLS="tls"}(le||(le={})),function(e){e.NEW_TEMPLATE="new-template",e.EDIT_TEMPLATES="edit-templates"}(ce||(ce={})),function(e){e.SEND_TO_SELECTED_RECIPIENTS="to_recipients",e.SEND_ACCORDING_TO_RULES="according_to_rules"}(ue||(ue={})),function(e){e.EMAIL="email",e.PHONE="phoneNumber",e.CONTROL_ID="controlId",e.CUSTOM="custom"}(de||(de={})),function(e){e.FILE="file",e.HTML_TO_PDF="html_to_pdf",e.FORM_LAYOUT="form_layout"}(pe||(pe={})),function(e){e.EMAIL="email"}(he||(he={})),function(e){e.DEFAULT="default",e.DRAFT="draft"}(_e||(_e={})),function(e){e.USER_EMAIL="userEmail",e.USER_PHONE="userPhone"}(ge||(ge={})),function(e){e.DELETE_NOTIFICATION="delete-notification-from-list",e.LOAD_ALL_NOTIFICATIONS="load-all-notifications",e.DUPLICATE_NOTIFICATION="duplicate-notification-from-list",e.SAVE_EMAIL_NOTIFICATION="notification-email-save-new",e.UPDATE_EMAIL_NOTIFICATION="notification-email-save-update",e.NEW_EMAIL="notification-new-email"}(me||(me={})),function(e){e.ERROR="error",e.SUCCESS="success"}(fe||(fe={})),function(e){e.HTML="html",e.PLAIN_TEXT="text"}(Ee||(Ee={})),function(e){e.CLOSE_ALL_PANELS="close-all-panels"}(ye||(ye={})),function(e){e.LEFT="left",e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom"}(Te||(Te={})),function(e){e.SPAN="SPAN",e.BR="BR"}(ve||(ve={})),function(e){e.DISABLED="disabled",e.ENABLED="enabled",e.FULLY_DISABLED="fully-disabled"}(Oe||(Oe={})),function(e){e.ENTRY_ID=":entryId:",e.IP=":ip:",e.COUNTRY_CODE=":countryCode:",e.BROWSER=":browser:",e.DEVICE_TYPE=":deviceType:",e.REFERRER=":referer:",e.FORM_HOST=":formHost:",e.REFERENCE_ID=":referenceId:",e.EDIT_SUBMISSION_LINK=":editSubmissionLink:",e.QUIZ_SCORE=":quizScore:",e.APPROVAL_LINK=":approvalLink:",e.APPROVALS_HISTORY=":approvalsHistory:",e.PAYMENT_SUMMARY=":paymentSummary:",e.PAYMENT_LINK=":paymentLink:",e.PAYMENT_AMOUNT=":paymentAmount:",e.PAYMENT_CURRENCY=":paymentCurrency:",e.PAYMENT_STATUS=":paymentStatus:",e.PAYMENT_PROCESSOR_NAME=":paymentProcessorName:",e.PAYMENT_COUPON=":paymentCoupon:",e.SUBMISSION_STATUS=":submissionStatus:",e.SUBMISSION_SUMMARY=":submissionSummary:",e.LANGUAGE=":language:",e.QUIZ_SUMMARY=":quizSummary:",e.SUBMISSION_DATE=":submissionDate:",e.SUBMISSION_DATE_TIME=":submissionDateTime:",e.SUBMISSION_TIME=":submissionTime:",e.FORM_NAME=":formName:"}(be||(be={})),function(e){e.EXPRESSION="expression",e.CONTROL="control",e.OPERATOR="operator",e.EXTRA="extra",e.LOGICAL="logical",e.VALUE="value"}(Ce||(Ce={})),function(e){e.ADD="add",e.REMOVE="remove",e.BOTH="both",e.NONE="none"}(Ie||(Ie={})),function(e){e.INDEX="index",e.DESCRIPTION="description",e.UNIT_PRICE="unitPrice",e.QUANTITY="quantity",e.TOTAL_PRICE="totalPrice"}(Re||(Re={})),function(e){e.BLUR="blur",e.INPUT="input"}(Pe||(Pe={})),function(e){e.SHOW="show",e.HIDE="hide"}(Ne||(Ne={})),function(e){e.SHOW_SUMMARY_AFTER_SUBMIT="showSummaryAfterSubmit",e.SHOW_REALTIME_SUMMARY="showRealTimeSummary",e.COLUMNS="columns"}(Ae||(Ae={})),function(e){e.NOTIFICATIONS="notifications_v2",e.OLD_NOTIFICATIONS="notifications_v1",e.TRANSLATIONS="translations",e.EDITOR="editor",e.THEMES="options",e.PUBLISH_GET_LINK="publish_get_link",e.PAYMENTS="payments",e.PUBLISH="publish-form",e.PAYMENTS_V1="payments_v1",e.PUBLISH_PLATFORMS="PublishPlatforms",e.PUBLISH_EMBED_CODE="PublishEmbedCode",e.PUBLISH_FACEBOOK="PublishFacebook",e.PUBLISH_BLOGGER="PublishBlogger",e.PUBLISH_WORDPRESS="PublishWordpress",e.PUBLISH_JOOMLA="PublishJoomla",e.PUBLISH_SALESFORCE="PublishSalesforce",e.PUBLISH_SALESFORCE_COMMUNITY="PublishSalesforceCommunity",e.PUBLISH_SALESFORCE_PLATFORMS="PublishSalesforcePlatforms",e.PUBLISH_UNBOUNCE="PublishUnbounce",e.PUBLISH_GOOGLE_SITES="PublishGoogleSites",e.PUBLISH_TWITTER="PublishTwitter",e.PUBLISH_PLATFORM_BIG_COMMERCE="PublishPlatformBigCommerce",e.PUBLISH_PLATFORM_SHOPIFY="PublishPlatformShopify",e.PUBLISH_PLATFORM_WEEBLY="PublishPlatformWeebly",e.PUBLISH_WEEBLY="PublishOnWeebly",e.PUBLISH_WEEBLY_LINK="PublishLinkOnWeebly",e.PUBLISH_WEEBLY_LIGHTBOX="PublishLightboxOnWeebly",e.PUBLISH_WEEBLY_PLATFORMS="PublishPlatformsOnWeebly",e.PUBLISH_WIX_PLATFORMS="PublishPlatformsOnWix",e.PUBLISH_SHOPIFY="PublishShopify",e.PUBLISH_SHOPIFY_LINK="PublishLinkShopify",e.PUBLISH_SHOPIFY_LIGHTBOX="PublishLightboxShopify",e.PUBLISH_SHOPIFY_PLATFORMS="PublishPlatformsOnShopify",e.PUBLISH_BIG_COMMERCE="PublishBigCommerce",e.PUBLISH_BIG_COMMERCE_LINK="PublishLinkBigCommerce",e.PUBLISH_BIG_COMMERCE_LIGHTBOX="PublishLightboxBigCommerce",e.PUBLISH_BIG_COMMERCE_PLATFORMS="PublishPlatformsOnBigCommerce",e.PUBLISH_V1="Publish_V1"}(Se||(Se={})),function(e){e.OLD_NOTIFICATIONS="notifications_v1",e.APPLICATIONS="applications",e.SECURITY="security",e.RULES="rules",e.ADVANCED="advanced",e.THANK_YOU_PAGE="thank_you_page",e.PAYMENTS_V1="payments_v1",e.CHAIN_APPROVALS="chain_approvals",e.PUBLISH_V1="Publish_V1"}(Le||(Le={})),function(e){e.SALESFORCE_MAPPING="mapping",e.SALESFORCE_MAPPING_V3="mappingV3",e.SALESFORCE_PREFILL="prefill",e.SALESFORCE_LOOKUP="lookup",e.SALESFORCE_QUERY="query",e.SALESFORCE_SETTINGS="settings"}(De||(De={})),function(e){e[e.MAPPING=1]="MAPPING",e[e.LOOKUP=3]="LOOKUP",e[e.SETTINGS=4]="SETTINGS",e[e.PREFILL=5]="PREFILL",e[e.QUERY=6]="QUERY"}(we||(we={})),function(e){e.SETTINGS="settings",e.SALESFORCE="salesforce_objects",e.SALESFORCE_MAPPING_V3="salesforce-mapping",e.PUBLISH="publish",e.SUBMISSIONS="submissions",e.REPORTS="reports",e.INSIGHTS="insights",e.EDITOR="edit_fields"}(ke||(ke={})),function(e){e.DEBUG="debug",e.INFO="info",e.NOTICE="notice",e.WARNING="warning",e.ERROR="error",e.CRITICAL="critical",e.ALERT="alert",e.EMERGENCY="emergency"}(Me||(Me={})),function(e){e.PUBLISH_WEEBLY="weebly-embed-in-page-publish-method",e.PUBLISH_WEEBLY_LINK="weebly-link-to-form-publish-method",e.PUBLISH_WEEBLY_LIGHTBOX="weebly-lightbox-publish-method",e.PUBLISH_BIG_COMMERCE="bigcommerce-embed-in-page-publish-method",e.PUBLISH_BIG_COMMERCE_LINK="bigcommerce-link-to-form-publish-method",e.PUBLISH_BIG_COMMERCE_LIGHTBOX="bigcommerce-lightbox-publish-method",e.PUBLISH_SHOPIFY="shopify-embed-in-page-publish-method",e.PUBLISH_SHOPIFY_LINK="shopify-link-to-form-publish-method",e.PUBLISH_SHOPIFY_LIGHTBOX="shopify-lightbox-publish-method",e.PUBLISH_EMBED_CODE="embed-publish-method",e.PUBLISH_BLOGGER="blogger-publish-method",e.PUBLISH_FACEBOOK="facebook-publish-method",e.PUBLISH_GOOGLE_SITES="google-sites-publish-method",e.PUBLISH_JOOMLA="joomla-publish-method",e.PUBLISH_SALESFORCE="salesforce-publish-method",e.PUBLISH_SALESFORCE_COMMUNITY="salesforce-community-publish-method",e.PUBLISH_TWITTER="twitter-publish-method",e.PUBLISH_UNBOUNCE="unbounce-publish-method",e.PUBLISH_WORDPRESS="wordpress-publish-method",e.PUBLISH_PLATFORMS="platforms-publish-method",e.PUBLISH_PLATFORM_BIG_COMMERCE="bigcommerce-publish-method",e.PUBLISH_PLATFORM_SHOPIFY="shopify-publish-method",e.PUBLISH_PLATFORM_WEEBLY="weebly-publish-method",e.PUBLISH_PLATFORM_WIX="wix-publish-method",e.PUBLISH_LINK="link-publish-method"}(xe||(xe={})),function(e){e.FILE_UPLOAD="file_upload_control",e.REPEATABLE="repeatable_container",e.PASSWORD="password_control",e.FORMULA="formula_control",e.FEE="fee_control",e.COUPON="coupon_code_control"}(Ue||(Ue={})),function(e){e.ESSENTIALS="essentials",e.CONTACT_DETAILS="contact-details",e.MEDIA_STRUCTURE="media-structure",e.UPLOADS_CONSENT="uploads-consent",e.DATE_TIME="date-time",e.RATING_SCALES="rating-scales",e.CALCULATION="calculation"}(Fe||(Fe={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(5),r=n.n(i),a=n(0),o=n.n(a),s=function e(){r()(this,e)};o()(s,"ELEMENT_NOT_SUPPORTED",-2),o()(s,"ELEMENT_TYPE_FORM",-1),o()(s,"CONTAINER_TYPE_ROW",0),o()(s,"CONTROL_TYPE_ADDRESS",1),o()(s,"CONTROL_TYPE_CHECKBOX",2),o()(s,"CONTROL_TYPE_DATE",3),o()(s,"CONTROL_TYPE_DROPDOWN",4),o()(s,"CONTROL_TYPE_EMAIL",5),o()(s,"CONTROL_TYPE_FILE",6),o()(s,"CONTROL_TYPE_HEADING",7),o()(s,"CONTROL_TYPE_HTML_BLOCK",8),o()(s,"CONTROL_TYPE_IMAGE",9),o()(s,"CONTROL_TYPE_LIKERT_SCALE",10),o()(s,"CONTROL_TYPE_MAP",11),o()(s,"CONTROL_TYPE_NAME",12),o()(s,"CONTROL_TYPE_NUMBER",13),o()(s,"CONTROL_TYPE_PAGE_BREAK",14),o()(s,"CONTROL_TYPE_PASSWORD",15),o()(s,"CONTROL_TYPE_PHONE",16),o()(s,"CONTROL_TYPE_PRICE",17),o()(s,"CONTROL_TYPE_RADIO",18),o()(s,"CONTROL_TYPE_SIGNATURE",19),o()(s,"CONTROL_TYPE_SOCIAL",20),o()(s,"CONTROL_TYPE_STAR_RATING",21),o()(s,"CONTROL_TYPE_TERMS_OF_SERVICE",22),o()(s,"CONTROL_TYPE_TEXT",23),o()(s,"CONTROL_TYPE_TEXTAREA",24),o()(s,"CONTROL_TYPE_TIME",25),o()(s,"CONTROL_TYPE_WEBSITE",26),o()(s,"CONTROL_TYPE_FORM_HEADER",27),o()(s,"CONTROL_TYPE_CAPTCHA",28),o()(s,"CONTROL_TYPE_ACTION_BAR",29),o()(s,"CONTROL_TYPE_WIDGET_VIDEO",30),o()(s,"CONTROL_TYPE_WIDGET_FACEBOOK",31),o()(s,"CONTROL_TYPE_WIDGET_PDF",32),o()(s,"CONTROL_TYPE_FORMULA",33),o()(s,"CONTROL_TYPE_FEE",34),o()(s,"CONTROL_TYPE_COUPON",100),o()(s,"CONTROL_TYPE_SEPARATOR",9999),o()(s,"VIRTUAL_SELECTION_CONTROL",1e4),o()(s,"CONTAINER_TYPE_DIV",9e4),o()(s,"CONTAINER_TYPE_PAGE",90001),o()(s,"CONTAINER_TYPE_LIKERT_WRAPPER",90002),o()(s,"CONTAINER_TYPE_REPEATABLE",90003),o()(s,"CONTAINER_TYPE_REPEATABLE_GROUP",90004),o()(s,"CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE",91001),o()(s,"LAYOUT_TYPE_FIELDSET",null)},,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(20),r=n.n(i),a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(0),u=n.n(c),d=n(1),p=function(){function e(){o()(this,e)}return l()(e,null,[{key:"getAttributeOrder",value:function(e){return this.ATTRIBUTES_ORDER.includes(e)?this.ATTRIBUTES_ORDER.indexOf(e):this.ORDER_UNKNOWN_ATTRIBUTE}},{key:"getSortedElementProperties",value:function(t){var n=t.enumerateProperties(),i=this;n.sort((function(n,r){var a=i.getHardcodedPropertyAttributeName(n.name,t),o=i.getHardcodedPropertyAttributeName(r.name,t),s=n.name.split(".")[1]||"",l=r.name.split(".")[1]||"",c=e.getAttributeOrder(a),u=e.getAttributeOrder(o);return c===u?s<l?-1:s===l?0:1:c-u}));for(var r,a,o,s,l,c=null,u=t.getTypeId(),d=0,p=n.length;d<p;d++)if(s=i.getHardcodedPropertyAttributeName(n[d].name,t),(r=this.getAttributeOrder(s))!==c){c=r,o=a=d;for(var h=d+1;h<p&&(l=i.getHardcodedPropertyAttributeName(n[h].name,t),this.getAttributeOrder(l)===c);h++)o=h,d=h;o-a>0&&this.sortPropertiesByRange(n,a,o,c,u)}return n}},{key:"searchPropertyInRange",value:function(e,t,n,i){for(var r=n;r<=i;r++)if(t===e[r].name.split(".")[1])return r;return null}},{key:"sortPropertiesByRange",value:function(e,t,n,i,r){for(var a,o,s=0,l=this.hardcodedPropertyOrder.length;s<l;s++)if(this.hardcodedPropertyOrder[s].attributeOrder===i){if("number"===typeof this.hardcodedPropertyOrder[s].elementTypes){if(this.hardcodedPropertyOrder[s].elementTypes!==r)continue}else if(null!==this.hardcodedPropertyOrder[s].elementTypes&&-1===this.hardcodedPropertyOrder[s].elementTypes.indexOf(r))continue;null!==(a=this.searchPropertyInRange(e,this.hardcodedPropertyOrder[s].propertyName,t,n))&&null!==(o=this.searchPropertyInRange(e,this.hardcodedPropertyOrder[s].referencePropertyName,t,n))&&this.moveArrayElement(e,a,o,this.hardcodedPropertyOrder[s].relativePosition)}}},{key:"moveArrayElement",value:function(e,t,n,i){if(t!==n){var r=e.splice(t,1)[0];n>t&&n--,i===d.D.AFTER&&n++,e.splice(n,0,r)}}},{key:"setPropertyOrder",value:function(e,t,n,i,a){if(null!==e)switch(!0){case"number"===typeof e:break;case r()(e,Array):if(!e.length)throw new Error("Invalid argument: elementTypeIdOrElementTypesList: int|int[1..n] expected!");for(var o=0,s=e.length;o<s;o++)if("number"!==typeof e[o])throw new Error("Invalid argument: elementTypeIdOrElementTypesList: int|int[1..n] expected!");break;default:throw new Error("Invalid argument: elementTypeIdOrElementTypesList: int|int[1..n] expected!")}this.hardcodedPropertyOrder.push({propertyName:i,attributeOrder:this.getAttributeOrder(t),referencePropertyName:n,elementTypes:e,relativePosition:a})}},{key:"setPropertyGroup",value:function(e,t,n){if(null!==e&&"number"!==typeof e){if(!r()(e,Array))throw new Error("Invalid argument: int|int[] expected");if(!e.length)throw new Error("Invalid argument: empty arrays are not supported!");for(var i=0,a=e.length;i<a;i++)if("number"!==typeof e[i])throw new Error("Invalid argument: int|int[] expected!")}if("string"!==typeof t)throw new Error("Invalid argument: string expected!");var o=t.split(".");if(2!==o.length||""===o[0]||""===o[1])throw new Error("Invalid argument: propertyFQN: invalid property name!");switch(o[0]){case this.ATTRIBUTE_OPTIONS:case this.ATTRIBUTE_SIZE:case this.ATTRIBUTE_SYNCHRONIZE:case this.ATTRIBUTE_PROPAGATE:case this.ATTRIBUTE_CONFIGURATION:case this.ATTRIBUTE_VALUE:case this.ATTRIBUTE_VALIDATION:case this.ATTRIBUTE_INSTRUCTIONS:case this.ATTRIBUTE_LABEL:case this.ATTRIBUTE_CHOICES:case this.ATTRIBUTE_LAYOUT:case this.ATTRIBUTE_LAYOUT_SIZE:case this.ATTRIBUTE_NAME:case this.ATTRIBUTE_DEFAULT_VALUE:case this.ATTRIBUTE_SCALE:case this.ATTRIBUTE_STATEMENTS:case this.ATTRIBUTE_ACCEPTED_DATES:case this.ATTRIBUTE_AGREEMENT_TEXT:case this.ATTRIBUTE_TEXT:case this.ATTRIBUTE_HTML_CONTENT:case this.ATTRIBUTE_IMAGE:case this.ATTRIBUTE_PAGE_TITLE:case this.ATTRIBUTE_BUTTONS:case this.ATTRIBUTE_FACEBOOK_SHARE:case this.ATTRIBUTE_DEFAULT_MAP:case this.ATTRIBUTE_SUBMIT_BUTTON:case this.ATTRIBUTE_RESET_BUTTON:case this.ATTRIBUTE_FIELD_NAME:case this.ATTRIBUTE_ALT_TEXT:case this.ATTRIBUTE_PAYMENTS:case this.ATTRIBUTE_URL:case this.ATTRIBUTE_CALCULATIONS:case this.ATTRIBUTE_ADD_BUTTON:case this.ATTRIBUTE_MAPS_API_KEY:case this.ATTRIBUTE_FEE_DETAILS:case this.ATTRIBUTE_QUICK_SETUP:case this.ATTRIBUTE_QUIZ:break;default:throw new Error("Invalid argument: attribute "+JSON.stringify(o[0])+" does not exist!")}if("string"!==typeof n)throw new Error("Invalid argument: attributeName: string expected!");switch(n){case this.ATTRIBUTE_OPTIONS:case this.ATTRIBUTE_SIZE:case this.ATTRIBUTE_SYNCHRONIZE:case this.ATTRIBUTE_PROPAGATE:case this.ATTRIBUTE_CONFIGURATION:case this.ATTRIBUTE_VALUE:case this.ATTRIBUTE_VALIDATION:case this.ATTRIBUTE_INSTRUCTIONS:case this.ATTRIBUTE_LABEL:case this.ATTRIBUTE_CHOICES:case this.ATTRIBUTE_LAYOUT:case this.ATTRIBUTE_NAME:case this.ATTRIBUTE_SCALE:case this.ATTRIBUTE_STATEMENTS:case this.ATTRIBUTE_TEXT:case this.ATTRIBUTE_IMAGE:case this.ATTRIBUTE_BUTTONS:case this.ATTRIBUTE_LAYOUT_SIZE:case this.ATTRIBUTE_DEFAULT_VALUE:case this.ATTRIBUTE_ACCEPTED_DATES:case this.ATTRIBUTE_AGREEMENT_TEXT:case this.ATTRIBUTE_HTML_CONTENT:case this.ATTRIBUTE_PAGE_TITLE:case this.ATTRIBUTE_FACEBOOK_SHARE:case this.ATTRIBUTE_DEFAULT_MAP:case this.ATTRIBUTE_SUBMIT_BUTTON:case this.ATTRIBUTE_RESET_BUTTON:case this.ATTRIBUTE_FIELD_NAME:case this.ATTRIBUTE_ALT_TEXT:case this.ATTRIBUTE_PAYMENTS:case this.ATTRIBUTE_URL:case this.ATTRIBUTE_CALCULATIONS:case this.ATTRIBUTE_ADD_BUTTON:case this.ATTRIBUTE_MAPS_API_KEY:case this.ATTRIBUTE_FEE_DETAILS:case this.ATTRIBUTE_FEE_PRICE:case this.ATTRIBUTE_VERIFICATION:case this.ATTRIBUTE_QUICK_SETUP:case this.ATTRIBUTE_QUIZ:break;default:throw new Error("Invalid argument: attribute "+JSON.stringify(n)+" does not exist!")}if(n===o[0])throw new Error("Setting conflict: propertyFQN and attributeName have the same attribute!");this.hardcodedPropertyAttributes.push({elementTypes:e,propertyFQN:t,attributeName:n})}},{key:"getHardcodedPropertyAttributeName",value:function(e,t){for(var n,i=e.split(".")[0]||null,a=t.getTypeId(),o=0,s=this.hardcodedPropertyAttributes.length;o<s;o++)if(n=!1,null===this.hardcodedPropertyAttributes[o].elementTypes||a===this.hardcodedPropertyAttributes[o].elementTypes?n=!0:r()(this.hardcodedPropertyAttributes[o].elementTypes,Array)&&(n=this.hardcodedPropertyAttributes[o].elementTypes.indexOf(a)>-1),n&&e===this.hardcodedPropertyAttributes[o].propertyFQN)return this.hardcodedPropertyAttributes[o].attributeName;return i}}]),e}();u()(p,"ATTRIBUTE_OPTIONS","options"),u()(p,"ATTRIBUTE_SIZE","size"),u()(p,"ATTRIBUTE_SYNCHRONIZE","synchronize"),u()(p,"ATTRIBUTE_PROPAGATE","propagate"),u()(p,"ATTRIBUTE_CONFIGURATION","configuration"),u()(p,"ATTRIBUTE_VALUE","value"),u()(p,"ATTRIBUTE_VALIDATION","validation"),u()(p,"ATTRIBUTE_INSTRUCTIONS","instructions"),u()(p,"ATTRIBUTE_LABEL","label"),u()(p,"ATTRIBUTE_CHOICES","choices"),u()(p,"ATTRIBUTE_LAYOUT","layout"),u()(p,"ATTRIBUTE_LAYOUT_SIZE","layoutSize"),u()(p,"ATTRIBUTE_NAME","name"),u()(p,"ATTRIBUTE_DEFAULT_VALUE","defaultValue"),u()(p,"ATTRIBUTE_SCALE","scale"),u()(p,"ATTRIBUTE_STATEMENTS","statements"),u()(p,"ATTRIBUTE_ACCEPTED_DATES","acceptedDates"),u()(p,"ATTRIBUTE_AGREEMENT_TEXT","agreementText"),u()(p,"ATTRIBUTE_TEXT","text"),u()(p,"ATTRIBUTE_HTML_CONTENT","htmlContent"),u()(p,"ATTRIBUTE_IMAGE","image"),u()(p,"ATTRIBUTE_PAGE_TITLE","pageTitle"),u()(p,"ATTRIBUTE_BUTTONS","buttons"),u()(p,"ATTRIBUTE_FACEBOOK_SHARE","facebookShare"),u()(p,"ATTRIBUTE_DEFAULT_MAP","defaultMap"),u()(p,"ATTRIBUTE_SUBMIT_BUTTON","submitButton"),u()(p,"ATTRIBUTE_RESET_BUTTON","resetButton"),u()(p,"ATTRIBUTE_URL","url"),u()(p,"ATTRIBUTE_FIELD_NAME","fieldName"),u()(p,"ATTRIBUTE_ALT_TEXT","altText"),u()(p,"ATTRIBUTE_PAYMENTS","payments"),u()(p,"ATTRIBUTE_COUPONS","coupons"),u()(p,"ATTRIBUTE_CALCULATIONS","calculations"),u()(p,"ATTRIBUTE_ADD_BUTTON","addButton"),u()(p,"ATTRIBUTE_MAPS_API_KEY","mapsApiKey"),u()(p,"ATTRIBUTE_FEE_DETAILS","feeDetails"),u()(p,"ATTRIBUTE_FEE_PRICE","feePrice"),u()(p,"ATTRIBUTE_VERIFICATION","verification"),u()(p,"ATTRIBUTE_QUICK_SETUP","quickSetup"),u()(p,"ATTRIBUTE_QUIZ","quiz"),u()(p,"ORDER_UNKNOWN_ATTRIBUTE",50),u()(p,"ATTRIBUTES_ORDER",[p.ATTRIBUTE_VERIFICATION,p.ATTRIBUTE_QUICK_SETUP,p.ATTRIBUTE_CHOICES,p.ATTRIBUTE_MAPS_API_KEY,p.ATTRIBUTE_AGREEMENT_TEXT,p.ATTRIBUTE_SCALE,p.ATTRIBUTE_STATEMENTS,p.ATTRIBUTE_CALCULATIONS,p.ATTRIBUTE_COUPONS,p.ATTRIBUTE_VALIDATION,p.ATTRIBUTE_ACCEPTED_DATES,p.ATTRIBUTE_DEFAULT_VALUE,p.ATTRIBUTE_DEFAULT_MAP,p.ATTRIBUTE_FEE_PRICE,p.ATTRIBUTE_TEXT,p.ATTRIBUTE_BUTTONS,p.ATTRIBUTE_FACEBOOK_SHARE,p.ATTRIBUTE_OPTIONS,p.ATTRIBUTE_LAYOUT,p.ATTRIBUTE_PAYMENTS,p.ATTRIBUTE_QUIZ,p.ATTRIBUTE_HTML_CONTENT,p.ATTRIBUTE_IMAGE,p.ATTRIBUTE_PAGE_TITLE,p.ATTRIBUTE_SIZE,p.ATTRIBUTE_NAME,p.ATTRIBUTE_CONFIGURATION,p.ATTRIBUTE_LAYOUT_SIZE,p.ATTRIBUTE_SYNCHRONIZE,p.ATTRIBUTE_PROPAGATE,p.ATTRIBUTE_VALUE,p.ATTRIBUTE_SUBMIT_BUTTON,p.ATTRIBUTE_RESET_BUTTON,p.ATTRIBUTE_ALT_TEXT,p.ATTRIBUTE_URL,p.ATTRIBUTE_FIELD_NAME,p.ATTRIBUTE_ADD_BUTTON]),u()(p,"hardcodedPropertyOrder",[]),u()(p,"hardcodedPropertyAttributes",[])},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var i=n(38),r=n.n(i),a=n(20),o=n.n(a),s=n(5),l=n.n(s),c=n(6),u=n.n(c),d=n(0),p=n.n(d),h=n(1),_=n(51),g=n(35),m=n(80),f=n(32),E=n(9),y=n(24),T=n(2),v=n(64),O=n(172),b=n(68),C=n(63),I=n(96),R=n(400),P=n(46),N=function(){function e(){l()(this,e)}return u()(e,null,[{key:"isImageURL",value:function(e){return/^((http(s)?:)?\/\/([^\/]+))?([^:]+)([^\/.]+)(\.(png|gif|jpg|jpeg|tiff|bmp))(\?(.*)?|#(.*)?)?$/i.test(String(e||""))}},{key:"getNormalizedCSSColorNotationFromString",value:function(e){if(!e||"string"!==typeof e)return null;if(/^#[0-9a-f]{3}$/i.test(e))return"#".concat(e.charAt(1)).concat(e.charAt(1)).concat(e.charAt(2)).concat(e.charAt(2)).concat(e.charAt(3)).concat(e.charAt(3));if(e.match(/^(#(?:[0-9a-f]{2}){2,4}|#[0-9a-f]{3}|(?:rgba?|hsla?)\((?:\d+%?(?:deg|rad|grad|turn)?(?:,|\s)+){2,3}[\s\/]*[\d\.]+%?\))$/i))return e;var t=e.toLowerCase();return"undefined"!==typeof b.a.standardHTMLColors[t]?b.a.standardHTMLColors[t]:null}},{key:"shuffle",value:function(e,t){for(var n,i,r=void 0===t?e.length:Math.min(t,e.length);0!==r;)i=Math.floor(Math.random()*r),n=e[--r],e[r]=e[i],e[i]=n;return e}},{key:"computeDistance",value:function(e,t){return~~Math.sqrt(Math.pow(t.left-e.left,2)+Math.pow(t.top-e.top,2))}},{key:"rectangleIntersects",value:function(e,t){return!(e.left+e.width<t.left||e.left>t.left+t.width||e.top+e.height<t.top||e.top>t.top+t.height)}},{key:"nullFunction",value:function(){return null}},{key:"padString",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.W.RIGHT,r=String(e||""),a=r.length,o=String(t||""),s=o.length,l=~~n;if(0===s)return e;for(;a<l;)r=i===h.W.RIGHT?r.concat(o):o.concat(r),a+=s;return r}},{key:"scrollIntoView",value:function(e){e&&(e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView&&e.scrollIntoView())}},{key:"synchronizeControlValue",value:function(e,t){var n,i,r,a=(i=o()(e,v.a))?e.getValue():(n="input"===e.nodeName.toLowerCase()&&["radio","checkbox"].indexOf(e.type)>-1)?e.checked:String(e.value);(r=!0===a||!1===a?!!t:0===t?"0":String(t||""))!==a&&(i?e.setValue(r):e[n?"checked":"value"]=r)}},{key:"getComputedStyle",value:function(e){try{return window.getComputedStyle(e)}catch(t){return null}}},{key:"areTheSame",value:function(e,t){if(e===t)return!0;var n,i;if((n=r()(e))===r()(t)){if("object"===n){if(o()(e,Array)){if(o()(t,Array)){if((i=e.length)===t.length){for(var a=0;a<i;a++)if(!this.areTheSame(e[a],t[a]))return!1;return!0}return!1}return!1}if(e){if(t){var s=[];for(var l in e)if(e.hasOwnProperty(l)&&(s.push(l),!this.areTheSame(e[l],t[l])))return!1;for(var c in t)if(t.hasOwnProperty(c)&&-1===s.indexOf(c))return!1;return!0}return!1}}return!1}return!1}},{key:"getImageURLAntiCache",value:function(e){return e?"string"!==typeof e||/^data\:/.test(e)?e:-1===e.indexOf("?")?"".concat(e,"?_=").concat(+new Date):"".concat(e,"&_=").concat(+new Date):e}},{key:"getTextNumberOfWords",value:function(e){var t=String(e||"").replace(/(^[\s]+|[\s]+$)/g,"");return""===t?0:t.split(/[\s]+/).length}},{key:"getURLEmbedIframeSource",value:function(e){switch(e.type){case h.sb.YOUTUBE_VIDEO:return"https://www.youtube.com/embed/".concat(e.identifier,"?enablejsapi=1");case h.sb.VIMEO_VIDEO:return"https://player.vimeo.com/video/".concat(e.identifier);case h.sb.WORDPRESS_TV_VIDEO:return"https://videopress.com/embed/".concat(e.identifier);case h.sb.TED_TALKS_VIDEO:return"https://embed.ted.com/talks/".concat(e.identifier);case h.sb.DAILYMOTION_VIDEO:return"https://www.dailymotion.com/embed/video/".concat(e.identifier);case h.sb.MIXCLOUD_AUDIO:return"https://www.mixcloud.com/widget/iframe/?feed=https://www.mixcloud.com/".concat(e.identifier);case h.sb.SOUNDCLOUD_AUDIO:return"https://w.soundcloud.com/player/?url=https://api.soundcloud.com/tracks/".concat(e.identifier,"&auto_play=false&visual=true");case h.sb.NFB_VIDEO:return"https://www.nfb.ca/film/".concat(e.identifier,"/embed/player/");case h.sb.KICKSTARTER_VIDEO:return"https://www.kickstarter.com/projects/".concat(e.identifier,"/widget/video.html");case h.sb.TWITCH_VIDEO:return"https://player.twitch.tv/?video=".concat(e.identifier);case h.sb.PDF_FILE:return e.url;case h.sb.FACEBOOK_POST:return"https://www.facebook.com/plugins/post.php?href=https://www.facebook.com/".concat(e.identifier);case h.sb.FACEBOOK_PAGE:return"https://www.facebook.com/plugins/page.php?href=https://www.facebook.com/".concat(e.identifier,"&tabs=timeline&small_header=false&adapt_container_width=true&show_facepile=true&width=500px");case h.sb.MOBILE_EMBED:return"https://docs.google.com/gview?url=".concat(e.url,"&embedded=true");default:return null}}},{key:"getFormTotalPoints",value:function(e){for(var t=0,n=e.flatten(),i=0,r=n.length;i<r;i++)if(n[i].hasProperty("choices.values"))for(var a=n[i].getProperty("choices.values"),o=0,s=a.length;o<s;o++)if(a[o].isCorrect){t+=a[o].quizPoints;break}return t}},{key:"getFormPointsWithoutElements",value:function(e,t){for(var n=0,i=e.flatten(),r=0,a=i.length;r<a;r++)if(i[r].hasProperty("choices.values")&&-1==t.indexOf(i[r].getHash()))for(var o=i[r].getProperty("choices.values"),s=0,l=o.length;s<l;s++)if(o[s].isCorrect){n+=o[s].quizPoints;break}return n}},{key:"scrollElementIntoView",value:function(t,n){setTimeout((function(){try{if(g.a.isIE()){var i=t.getBoundingClientRect(),r=i.top,a=i.height;document.documentElement.scrollTop=r-a}else t.scrollIntoView(n)}catch(s){}try{if(void 0===e.iframeID){var o=Object(f.p)(window.location.search.substr(1));e.iframeID=o&&o._iframeID_?o._iframeID_:null}}catch(s){}}),10),setTimeout((function(){try{null!==e.iframeID&&window.parent.postMessage({command:"scroll-into-view",iframeId:e.iframeID,top:t.getBoundingClientRect().top},"*")}catch(n){}}),100)}},{key:"refreshFrameHeightOnWix",value:function(){if(window.Wix){var e=document.getElementById("form");if(e){var t=e.parentElement,n=e.getAttribute("data-loader-type"),i=t.getAttribute("data-wix-user-token");if("viewer"===n&&!i)return}var r=void 0!==e?e.offsetHeight:document.body.offsetHeight;window.Wix.setHeight(r)}}},{key:"getUserSessionTokenForWix",value:function(){var e=window.Wix;e&&e.Activities.getUserSessionToken((function(e){document.body.setAttribute("data-wix-user-token",e)}))}},{key:"addEditorModeChangeEventListenerForWix",value:function(t){var n=window.Wix;n&&(n.addEventListener(n.Events.EDIT_MODE_CHANGE,(function(t){t&&void 0!==t.editMode&&(document.body.setAttribute("data-wix-edit-mode",t.editMode),e.refreshFrameHeightOnWix())})),n.addEventListener(n.Events.COMPONENT_DELETED,(function(){t.ajax({type:"POST",url:"/ajax_call.php",data:{module:"modules/wixNew/class.WixFunctions.php",class:"wixFunctions",function:"deleteWixInstance",iframeInstance:n.Utils.getInstanceId(),iframeInstanceCompid:n.Utils.getCompId(),iframeInstanceUserID:n.Utils.getUid(),iframeInstanceSiteOwnerId:n.Utils.getSiteOwnerId()}})})))}},{key:"isRealCSSUrl",value:function(e,t){return function(t,n){return e?t.validate(e,y.a.VALIDATOR_TYPE_URL_WEB_PAGE)?n.Deferred((function(t){var n=window.document.createElement("link"),i=document.createElement("iframe");i.setAttribute("contenteditable","true"),i.style.width=i.style.height="1px",n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),n.addEventListener("load",(function(){document.body.removeChild(i),t.resolve(!0)})),n.addEventListener("error",(function(){document.body.removeChild(i),t.resolve(!1)})),document.body.appendChild(i),(i.contentWindow.document||i.contentDocument).getElementsByTagName("head")[0].appendChild(n)})).promise():n.Deferred((function(e){e.resolve(!1)})).promise():n.Deferred((function(e){e.resolve(!1)}))}(t.getValidator(),t.getJQuery())}},{key:"clone",value:function(e){var t;if(null===e)return null;switch(r()(e)){case"boolean":case"number":case"string":case"function":return e;case"object":if(Array.isArray(e)){t=[];for(var n=0,i=e.length;n<i;n++)t.push(this.clone(e[n]))}else{if(!e)return null;for(var a in t={},e)e.hasOwnProperty(a)&&e.propertyIsEnumerable(a)&&(t[a]=this.clone(e[a]))}return t}}},{key:"merge",value:function(e,t){var n=[];if(Array.isArray(e))for(var i=0,r=e.length;i<r;i++)n.push(e[i]);if(Array.isArray(t))for(var a=0,o=t.length;a<o;a++)n.push(t[a]);return n}},{key:"scrollElementIntoViewOnWix",value:function(){window.Wix&&window.Wix.getBoundingRectAndOffsets((function(e){window.Wix.scrollTo(e.offsets.x,e.offsets.y)}))}},{key:"isMobile",value:function(){return""===g.a.meetsRequirements("* * mobile * *")}},{key:"isIOS",value:function(){return""===g.a.meetsRequirements("* * mobile safari *")}},{key:"isMAC",value:function(){return""===g.a.meetsRequirements("mac * desktop safari *")}},{key:"isFirefox",value:function(){return""===g.a.meetsRequirements("* * * firefox *")}},{key:"isIE",value:function(){return!!window.MSInputMethodContext&&!!document.documentMode}},{key:"getRepeatableContainerParent",value:function(t){return t.getParent()?t.getParent().getTypeId()!==T.a.CONTAINER_TYPE_REPEATABLE?e.getRepeatableContainerParent(t.getParent()):t.getParent():null}},{key:"htmlEntities",value:function(e){this.escaper.textContent=String(0===e?"0":e||"");var t=this.escaper.innerHTML;return this.escaper.textContent="",t}},{key:"htmlEntitiesWithBR",value:function(e){for(var t=String(0===e?"0":e||"").split("\n"),n=0,i=t.length;n<i;n++)t[n]=this.htmlEntities(t[n]);return t.join("<br />")}},{key:"getRootPanelComponent",value:function(t){return t.getParent()?e.getRootPanelComponent(t.getParent()):t}},{key:"getIframeID",value:function(){try{if(void 0===e.iframeID){var t=Object(f.p)(window.location.search.substr(1));e.iframeID=t&&t._iframeID_?t._iframeID_:null}}catch(n){}return e.iframeID||null}},{key:"scrollToTopOfFormWhenFormIsEmbeddedUnderIOS",value:function(){try{window.parent&&this.getIframeID()&&g.a.isIOS()&&window.parent.postMessage({iframeId:e.getIframeID(),top:10,command:"scroll-into-view"},"*")}catch(t){}}},{key:"getDefaultLabelValue",value:function(t){if(!t)return"";switch(t.getTypeId()){case T.a.CONTROL_TYPE_LIKERT_SCALE:return e.getUiTranslatedString("edt_notifications_undefined_statement","Undefined statement");default:return e.getUiTranslatedString("edt_notifications_undefined_label","Undefined label")}}},{key:"getLabelOfFormControl",value:function(t){var n=t.getProperty("label.labelText")?t.getProperty("label.labelText"):e.getDefaultLabelValue(t);return t?this.getUiTranslatedString(t.getProperty("label.i18nLabelKey"),m.a.toPlainText(n)):e.getUiTranslatedString("edt_notifications_deleted_field",_.a.DELETED_FIELD)}},{key:"getUiTranslatedString",value:function(e,t){for(var n,i,r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];return i=(n=window.UI.getI18n()).translateText.apply(n,[e].concat(a)),e&&i&&i!==e?i:t}},{key:"allBrowsersCompatibleScrollIntoView",value:function(t,n){var i=t.getBoundingClientRect(),r=i.top,a=i.height;(g.a.isIOS()||g.a.isMAC())&&window.Wix?window.Wix.getBoundingRectAndOffsets((function(e){window.Wix.scrollTo(e.offsets.x,e.offsets.y+r-a)})):g.a.isMAC()&&window.parentIFrame?window.parentIFrame.scrollToOffset(0,r-a):g.a.isIE()?document.documentElement.scrollTop=r-a:(setTimeout((function(){n?t.scrollIntoView(n):t.scrollIntoView();try{if(void 0===e.iframeID){var i=Object(f.p)(window.location.search.substr(1));e.iframeID=i&&i._iframeID_?i._iframeID_:null}}catch(r){}}),10),setTimeout((function(){try{null!==e.iframeID&&window.parent.postMessage({command:"scroll-into-view",iframeId:e.iframeID,top:t.getBoundingClientRect().top},"*")}catch(n){}}),100))}},{key:"addNoFollowOnLinks",value:function(e){var t=document.createElement("div"),n=t.getElementsByTagName("a");return t.innerHTML=e,Array.prototype.forEach.call(n,(function(e){return e.setAttribute("rel","nofollow ugc")})),t.innerHTML}},{key:"getVariablesFromText",value:function(t,n,i){var r=t.match(/(\:([a-zA-Z0-9_\-]+)\:|(controlId:repeatable:)([0-9]+)|(controlId:)([0-9]+)(:[a-zA-Z0-9]+)?)/gm),a=i?e.generateFormVariables(n,void 0,void 0,!0):e.generateFormVariables(n),o=[];if(r)for(var s=0,l=r.length;s<l;s++){var c=e.getVariableInfoByCode(a,r[s]),u=t.split(r[s])[0].trim();if(u&&o.push({type:P.a.TEXT,value:u,caption:u,isRegularTag:!0}),c){var d={type:P.a.TAG,value:c.value,caption:c.text};c.id&&(d.id=c.id),o.push(d)}else o.push(Object(_.c)(r[s]));t=t.slice(t.indexOf(r[s])+r[s].length)}return t&&o.push({type:P.a.TEXT,value:t,caption:t,isRegularTag:!0}),o}},{key:"generateFormVariables",value:function(t,n,i,r){var a=this,o=0;n||(n=[T.a.CONTROL_TYPE_TEXT,T.a.CONTROL_TYPE_TEXTAREA,T.a.CONTROL_TYPE_DROPDOWN,T.a.CONTROL_TYPE_NAME,T.a.CONTROL_TYPE_RADIO,T.a.CONTROL_TYPE_CHECKBOX,T.a.CONTROL_TYPE_FILE,T.a.CONTROL_TYPE_NUMBER,T.a.CONTROL_TYPE_EMAIL,T.a.CONTROL_TYPE_LIKERT_SCALE,T.a.CONTROL_TYPE_ADDRESS,T.a.CONTROL_TYPE_PHONE,T.a.CONTROL_TYPE_DATE,T.a.CONTROL_TYPE_TIME,T.a.CONTROL_TYPE_PRICE,T.a.CONTROL_TYPE_WEBSITE,T.a.CONTROL_TYPE_PASSWORD,T.a.CONTROL_TYPE_SIGNATURE,T.a.CONTROL_TYPE_STAR_RATING,T.a.CONTROL_TYPE_TERMS_OF_SERVICE,T.a.CONTROL_TYPE_FORMULA,T.a.CONTROL_TYPE_COUPON,T.a.CONTROL_TYPE_FEE,T.a.CONTAINER_TYPE_REPEATABLE]);var s=[],l=void 0!==i?i:e.getExtraVariables();return t.forEach((function(t){var i=[];if(n.indexOf(t.getTypeId())>-1&&(!e.getRepeatableContainerParent(t)||r&&e.getRepeatableContainerParent(t))){switch(t.getTypeId()){case T.a.CONTROL_TYPE_NAME:i=a.nameControlFields(t);break;case T.a.CONTROL_TYPE_ADDRESS:i=e.addressControlFields(t);break;case T.a.CONTROL_TYPE_RADIO:i=e.singleChoiceControlFields(t);break;case T.a.CONTROL_TYPE_CHECKBOX:i=e.multipleChoiceControlFields(t);break;default:t.getId()?s.push({text:e.getLabelOfFormControl(t),value:"controlId:".concat(t.getId()),id:t.getId()}):t.getTypeId()===T.a.CONTAINER_TYPE_REPEATABLE&&s.push({text:e.getLabelOfFormControl(t),value:"controlId:repeatable:".concat(o++)})}i.length&&(s=s.concat(i))}})),l.forEach((function(e){s.push(e)})),s}},{key:"nameControlFields",value:function(t){var n=[],i=e.getLabelOfFormControl(t);return n.push({text:i,value:"controlId:".concat(t.getId()),id:t.getId()}),n.push({text:"".concat(i," - ").concat(e.getUiTranslatedString("notifications_first","First")),value:"controlId:".concat(t.getId(),":first"),id:t.getId()}),n.push({text:"".concat(i," - ").concat(e.getUiTranslatedString("notifications_last","Last")),value:"controlId:".concat(t.getId(),":last"),id:t.getId()}),t.hasProperty("configuration.fieldMiddleName")&&t.getProperty("configuration.fieldMiddleName")&&n.push({text:"".concat(i," - ").concat(e.getUiTranslatedString("notifications_middle","Middle")),value:"controlId:".concat(t.getId(),":middle"),id:t.getId()}),t.hasProperty("configuration.fieldInitials")&&t.getProperty("configuration.fieldInitials")&&n.push({text:"".concat(i," - ").concat(e.getUiTranslatedString("notifications_initials","Initials")),value:"controlId:".concat(t.getId(),":initials"),id:t.getId()}),t.hasProperty("configuration.fieldTitle")&&t.getProperty("configuration.fieldTitle")&&n.push({text:"".concat(i," - ").concat(e.getUiTranslatedString("notifications_title","Title")),value:"controlId:".concat(t.getId(),":title"),id:t.getId()}),n}},{key:"addressControlFields",value:function(t){var n=[],i=e.getLabelOfFormControl(t);return n.push({text:i,value:"controlId:".concat(t.getId()),id:t.getId()}),t.hasProperty("configuration.fieldAddress1")&&t.getProperty("configuration.fieldAddress1")&&n.push({text:"".concat(i," - ").concat(e.getUiTranslatedString("notifications_street_address","Street Address")),value:"controlId:".concat(t.getId(),":fieldAddress1"),id:t.getId()}),t.hasProperty("configuration.fieldAddress2")&&t.getProperty("configuration.fieldAddress2")&&n.push({text:"".concat(i," - ").concat(e.getUiTranslatedString("notifications_street_address_line2","Street Address Line 2")),value:"controlId:".concat(t.getId(),":fieldAddress2"),id:t.getId()}),t.hasProperty("configuration.fieldCity")&&t.getProperty("configuration.fieldCity")&&n.push({text:"".concat(i," - ").concat(e.getUiTranslatedString("notifications_city","City")),value:"controlId:".concat(t.getId(),":city"),id:t.getId()}),t.hasProperty("configuration.fieldZone")&&t.getProperty("configuration.fieldZone")&&n.push({text:"".concat(i," - ").concat(e.getUiTranslatedString("notifications_region_state","Region/State")),value:"controlId:".concat(t.getId(),":region"),id:t.getId()}),t.hasProperty("configuration.fieldZipCode")&&t.getProperty("configuration.fieldZipCode")&&n.push({text:"".concat(i," - ").concat(e.getUiTranslatedString("notifications_zip_code","Zip code")),value:"controlId:".concat(t.getId(),":zipcode"),id:t.getId()}),t.hasProperty("configuration.fieldCountry")&&t.getProperty("configuration.fieldCountry")&&n.push({text:"".concat(i," - ").concat(e.getUiTranslatedString("notifications_country","Country")),value:"controlId:".concat(t.getId(),":country"),id:t.getId()}),n}},{key:"singleChoiceControlFields",value:function(t){var n=[],i=e.getLabelOfFormControl(t);return n.push({text:i,value:"controlId:".concat(t.getId()),id:t.getId()}),t.hasProperty("choices.allowOther")&&t.getProperty("choices.allowOther")&&n.push({text:"".concat(i," - ").concat(e.getUiTranslatedString("notifications_other","Other")),value:"controlId:".concat(t.getId(),":other"),id:t.getId()}),n}},{key:"multipleChoiceControlFields",value:function(t){var n=[],i=e.getLabelOfFormControl(t);(n.push({text:i,value:"controlId:".concat(t.getId()),id:t.getId()}),t.hasProperty("choices.values")&&t.getProperty("choices.values").length)&&t.getProperty("choices.values").forEach((function(r,a){n.push({text:"".concat(i," - ").concat(e.getUiTranslatedString(r.i18nLabel,r.text)),value:"controlId:".concat(t.getId(),":").concat(a),id:t.getId()})}));return t.hasProperty("choices.allowOther")&&t.getProperty("choices.allowOther")&&n.push({text:"".concat(i," - ").concat(e.getUiTranslatedString("notifications_other","Other")),value:"controlId:".concat(t.getId(),":other"),id:t.getId()}),n}},{key:"getExtraVariables",value:function(){return[{text:e.getUiTranslatedString("notifications_entry_id","Entry ID"),value:h.ub.ENTRY_ID},{text:e.getUiTranslatedString("notifications_ip","IP"),value:h.ub.IP},{text:e.getUiTranslatedString("notifications_country","Country"),value:h.ub.COUNTRY_CODE},{text:e.getUiTranslatedString("notifications_browser","Browser"),value:h.ub.BROWSER},{text:e.getUiTranslatedString("notifications_device_type","Device type"),value:h.ub.DEVICE_TYPE},{text:e.getUiTranslatedString("notifications_referrer","Referrer"),value:h.ub.REFERRER},{text:e.getUiTranslatedString("notifications_form_host","Form Host"),value:h.ub.FORM_HOST},{text:e.getUiTranslatedString("notifications_reference_id","Reference ID"),value:h.ub.REFERENCE_ID},{text:e.getUiTranslatedString("notifications_edit_submission_link","Edit submission link"),value:h.ub.EDIT_SUBMISSION_LINK},{text:e.getUiTranslatedString("notifications_quiz_score","Quiz score"),value:h.ub.QUIZ_SCORE},{text:e.getUiTranslatedString("notifications_approval_link","Approval Link"),value:h.ub.APPROVAL_LINK},{text:e.getUiTranslatedString("notifications_approval_history","Approval History"),value:h.ub.APPROVALS_HISTORY},{text:e.getUiTranslatedString("notifications_payment_summary","Payment Summary"),value:h.ub.PAYMENT_SUMMARY},{text:e.getUiTranslatedString("notifications_payment_link","Payment Link"),value:h.ub.PAYMENT_LINK},{text:e.getUiTranslatedString("notifications_payment_amount","Payment Amount"),value:h.ub.PAYMENT_AMOUNT},{text:e.getUiTranslatedString("notifications_payment_currency","Payment Currency"),value:h.ub.PAYMENT_CURRENCY},{text:e.getUiTranslatedString("notifications_payment_status","Payment Status"),value:h.ub.PAYMENT_STATUS},{text:e.getUiTranslatedString("notifications_payment_processor_name","Payment Processor Name"),value:h.ub.PAYMENT_PROCESSOR_NAME},{text:e.getUiTranslatedString("notifications_coupon_codes","Coupon codes"),value:h.ub.PAYMENT_COUPON},{text:e.getUiTranslatedString("notifications_submission_status","Submission Status"),value:h.ub.SUBMISSION_STATUS},{text:e.getUiTranslatedString("notifications_submission_summary","Submission Summary"),value:h.ub.SUBMISSION_SUMMARY},{text:e.getUiTranslatedString("notifications_submission_language","Submission Language"),value:h.ub.LANGUAGE},{text:e.getUiTranslatedString("notifications_quiz_summary","Quiz Summary"),value:h.ub.QUIZ_SUMMARY},{text:e.getUiTranslatedString("notifications_submission_date","Submission Date"),value:h.ub.SUBMISSION_DATE},{text:e.getUiTranslatedString("notifications_submission_date_time","Submission Date and Time"),value:h.ub.SUBMISSION_DATE_TIME},{text:e.getUiTranslatedString("notifications_submission_time","Submission Time"),value:h.ub.SUBMISSION_TIME},{text:e.getUiTranslatedString("notifications_form_name","Form Name"),value:h.ub.FORM_NAME}]}},{key:"getVariableInfoByCode",value:function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n].value===t)return e[n];return null}},{key:"setAndRemoveMessageOnElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.pb.SUCCESS;e.textContent=t,e.setAttribute("data-is-".concat(n,"-message"),""),e.setAttribute("data-show-message",""),e.setAttribute("data-is-visible",""),setTimeout((function(){e.removeAttribute("data-show-message"),setTimeout((function(){e.removeAttribute("data-is-".concat(n,"-message")),e.removeAttribute("data-is-visible"),e.textContent=""}),500)}),5e3)}},{key:"isMobileInteractionActive",value:function(){return document.body.hasAttribute("data-mobile-interactions")}},{key:"isElementASpace",value:function(e){return e.textContent===String.fromCharCode(O.a.THIN_SPACE_CHAR_CODE)}},{key:"getRandomID",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,i=Math.floor(Math.random()*n)+t;return 1e3===e.randomGeneratedIDs.length?NaN:-1!==e.randomGeneratedIDs.indexOf(i)?e.getRandomID():(e.randomGeneratedIDs.push(i),i)}},{key:"removeRandomID",value:function(t){-1!==e.randomGeneratedIDs.indexOf(t)&&e.randomGeneratedIDs.splice(t,1)}},{key:"removeAllRandomIDs",value:function(){for(;e.randomGeneratedIDs.length>0;)e.randomGeneratedIDs.pop()}},{key:"isInputTextSelected",value:function(e){if("number"==typeof e.selectionStart)return 0==e.selectionStart&&e.selectionEnd==e.value.length}},{key:"trimChoices",value:function(e){var t=[];return Object(I.a)(e,(function(e){e.text=e.text.trim(),t.push(e)})),t}},{key:"computeFormPublishDomain",value:function(){return"app.123formbuilder.com"===location.hostname?"form.123formbuilder.com":"app-eu.123formbuilder.com"===location.hostname?"form-eu.123formbuilder.com":location.hostname}},{key:"computeFormPrefix",value:function(){return"app.123formbuilder.com"===location.hostname||"app-eu.123formbuilder.com"===location.hostname?"":"form-"}},{key:"computeFormPrefixByDomainAliasURL",value:function(e){return e===E.a.FORM||e===E.a.FORM_EU?"":"form-"}},{key:"getFieldsCategories",value:function(e){return[{name:h.w.ESSENTIALS,title:"Essentials",i18nTitle:"fieldsCategory_essentials",fields:e.filter((function(e){return e.category===h.w.ESSENTIALS}))},{name:h.w.CONTACT_DETAILS,title:"Contact details",i18nTitle:"fieldsCategory_contactDetails",fields:e.filter((function(e){return e.category===h.w.CONTACT_DETAILS}))},{name:h.w.MEDIA_STRUCTURE,title:"Media & structure",i18nTitle:"fieldsCategory_mediaStructure",fields:e.filter((function(e){return e.category===h.w.MEDIA_STRUCTURE}))},{name:h.w.UPLOADS_CONSENT,title:"Uploads & consent",i18nTitle:"fieldsCategory_uploadsConsent",fields:e.filter((function(e){return e.category===h.w.UPLOADS_CONSENT}))},{name:h.w.DATE_TIME,title:"Date & time",i18nTitle:"fieldsCategory_dateTime",fields:e.filter((function(e){return e.category===h.w.DATE_TIME}))},{name:h.w.RATING_SCALES,title:"Rating scales",i18nTitle:"fieldsCategory_ratingScales",fields:e.filter((function(e){return e.category===h.w.RATING_SCALES}))},{name:h.w.CALCULATION,title:"Calculation",i18nTitle:"fieldsCategory_calculation",fields:e.filter((function(e){return e.category===h.w.CALCULATION}))}]}},{key:"getThemesCategories",value:function(e){return[{name:C.a.CATEGORY_QUICK_SETUP,i18n:C.a.CATEGORY_QUICK_SETUP_I18N,properties:this.computeQuickSetupThemeProperties(e),testId:"categoryQuickSetup"},{name:C.a.CATEGORY_LAYOUT,i18n:C.a.CATEGORY_LAYOUT_I18N,testId:"categoryLayout",subcategories:[{name:"Form",i18n:"themeSubcategory_form",testId:"subcategoryLayoutForm",properties:e.filter((function(e){return e.subcategory===C.a.SUBCATEGORY_LAYOUT_FORM}))},{name:"Page",i18n:"themeSubcategory_page",testId:"subcategoryLayoutPage",properties:e.filter((function(e){return e.subcategory===C.a.SUBCATEGORY_LAYOUT_PAGE}))}]},{name:C.a.CATEGORY_BACKGROUND,i18n:C.a.CATEGORY_BACKGROUND_I18N,testId:"categoryBackground",subcategories:[{name:"Form",i18n:"themeSubcategory_form",testId:"subcategoryBackgroundForm",properties:e.filter((function(e){return e.subcategory===C.a.SUBCATEGORY_BACKGROUND_FORM}))},{name:"Page",i18n:"themeSubcategory_page",testId:"subcategoryBackgroundPage",properties:e.filter((function(e){return e.subcategory===C.a.SUBCATEGORY_BACKGROUND_PAGE}))}]},{name:C.a.CATEGORY_FIELDS,i18n:C.a.CATEGORY_FIELDS_I18N,testId:"categoryFields",subcategories:[{name:"Label",i18n:"themeSubcategory_label",testId:"subcategoryFieldsLabel",properties:e.filter((function(e){return e.subcategory===C.a.SUBCATEGORY_FIELDS_LABEL}))},{name:"Instructions",i18n:"themeSubcategory_instructions",testId:"subcategoryFieldsInstructions",properties:e.filter((function(e){return e.subcategory===C.a.SUBCATEGORY_FIELDS_INSTRUCTIONS}))},{name:"Input",i18n:"themeSubcategory_input",testId:"subcategoryFieldsInput",properties:e.filter((function(e){return e.subcategory===C.a.SUBCATEGORY_FIELDS_INPUT}))},{name:"Field",i18n:"themeSubcategory_field",testId:"subcategoryFieldsField",properties:e.filter((function(e){return e.subcategory===C.a.SUBCATEGORY_FIELDS_FIELD}))},{name:"Field Hover",i18n:"themeSubcategory_field_hover",testId:"subcategoryFieldsFieldHover",properties:e.filter((function(e){return e.subcategory===C.a.SUBCATEGORY_FIELDS_HOVER}))},{name:"Field Focus",i18n:"themeSubcategory_field_focus",testId:"subcategoryFieldsFieldFocus",properties:e.filter((function(e){return e.subcategory===C.a.SUBCATEGORY_FIELDS_FOCUS}))},{name:"Error",i18n:"themeSubcategory_error",testId:"subcategoryFieldsError",properties:e.filter((function(e){return e.subcategory===C.a.SUBCATEGORY_FIELDS_ERROR}))},{name:"Choices",i18n:"themeSubcategory_choices",testId:"subcategoryFieldsChoices",properties:e.filter((function(e){return e.subcategory===C.a.SUBCATEGORY_FIELDS_CHOICES}))}]},{name:C.a.CATEGORY_BUTTONS,i18n:C.a.CATEGORY_BUTTONS_I18N,testId:"categoryButton",subcategories:[{name:"Button",i18n:"themeSubcategory_button",testId:"subcategoryButtonButton",properties:e.filter((function(e){return e.subcategory===C.a.SUBCATEGORY_BUTTONS_BUTTON}))},{name:"Primary button",i18n:"themeSubcategory_button_primary",testId:"subcategoryButtonButtonPrimary",properties:e.filter((function(e){return e.subcategory===C.a.SUBCATEGORY_BUTTONS_PRIMARY}))},{name:"Secondary button",i18n:"themeSubcategory_button_secondary",testId:"subcategoryButtonButtonSecondary",properties:e.filter((function(e){return e.subcategory===C.a.SUBCATEGORY_BUTTONS_SECONDARY}))}]}]}},{key:"computeQuickSetupThemeProperties",value:function(t){if(!t.length)return[];var n=["options.masterFontFamily","options.masterTextColor","button.primary.normal.background.color","button.primary.normal.color","page.background.color"],i=Object(R.a)(t).filter((function(e){return n.includes(e.name)})),r=i.findIndex((function(e){return e.name===n[0]})),a=i.findIndex((function(e){return e.name===n[1]})),o=i.findIndex((function(e){return e.name===n[2]})),s=i.findIndex((function(e){return e.name===n[3]})),l=i.findIndex((function(e){return e.name===n[4]}));return i[r].i18n="edt_theme_UI_property_form_font_family",i[r].tooltip=e.getUiTranslatedString("edt_theme_UI_property_quick_setup_font_family_tooltip","This font applies to Label, Instructions, Input, Error, Button"),i[a].i18n="edt_theme_UI_property_quick_setup_text_color",i[a].tooltip=e.getUiTranslatedString("edt_theme_UI_property_quick_setup_text_color_tooltip","This text color applies to Label, Instructions, Input, Secondary Button and Heading"),i[o].i18n="edt_theme_UI_property_quick_setup_button_color",i[o].tooltip=e.getUiTranslatedString("edt_theme_UI_property_quick_setup_button_color_tooltip","This color applies to Primary button"),i[s].i18n="edt_theme_UI_property_quick_setup_button_text_color",i[s].tooltip=e.getUiTranslatedString("edt_theme_UI_property_quick_setup_button_text_color_tooltip","This text color applies to Primary button"),i[l].i18n="edt_theme_UI_property_quick_setup_background_color",i[l].tooltip=e.getUiTranslatedString("edt_theme_UI_property_quick_setup_background_color_tooltip","This color applies to the form background"),[i[r],i[a],i[o],i[s],i[l]]}},{key:"controlSupportsButtonChoices",value:function(e){return e===T.a.CONTROL_TYPE_RADIO||e===T.a.CONTROL_TYPE_CHECKBOX}}]),e}();p()(N,"iframeID",void 0),p()(N,"randomGeneratedIDs",[]),p()(N,"escaper",document.createElement("div"))},function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.ADD_EMAIL_NOTIFICATION="create_email_form_notification_configuration",e.ADD_SMS_NOTIFICATION="create_sms_form_notification_configuration",e.ADD_EMAIL_NOTIFICATION_ATTACHMENT="add_email_form_notification_attachment",e.ADD_NOTIFICATION_RECIPIENT="add_form_notification_recipient",e.CREATE_EMAIL_NOTIFICATION_RULE="create_email_form_notification_rule",e.USE_SMTP_EMAIL_NOTIFICATIONS="use_smtp_server_for_email_form_notification",e.CUSTOMIZE_EMAIL_NOTIFICATION_TEMPLATE="edit_email_form_notification_template",e.VIRTUAL_DATABASE_APP="virtual_database_app",e.TOGGLE_DATA_ENCRYPTION="enable_data_encryption",e.SALESFORCE_MARKETING_CLOUD_APP="sales_force_marketing_cloud_app",e.ADD_FORM_REPORT="create_form_report",e.EDIT_SUBMISSION="edit_submission",e.DOWNLOAD_SUBMISSION_AS_PLAIN_PDF="download_submission_as_plain_pdf",e.DOWNLOAD_SUBMISSION_AS_FORM_LAYOUT_PDF="download_submission_as_form_layout_pdf",e.EXPORT_SUBMISSIONS_EXCEL_CSV="export_submissions_excel_csv",e.API_CONNECTOR_APP="api_connector_app",e.SALESFORCE_APP="sales_force_app",e.ENABLE_FORM_DOMAIN_ALIASING="enable_form_domain_aliasing",e.PUBLISH_FORM_ON_SALESFORCE_COMMUNITY="publish_form_on_salesforce_community",e.USE_FORM_PREFILL="use_form_prefill",e.USE_OBJECT_MAPPING="salesforce_object_mapping_app",e.SHOW_FAVICON="show_favicon",e.ENABLE_CHAIN_APPROVALS="use_chain_approval",e.MAXIMUM_USERS_COUNT="maximum_users_count",e.MAXIMUM_FORM_COUNT="maximum_form_count",e.MAXIMUM_MONTHLY_SUBMISSION_COUNT="maximum_monthly_submission_count",e.UPLOAD_STORAGE="upload_storage",e.HIDE_BACKLINK="hide_back_link",e.RECEIVE_API_CALL_DAILY_LIMIT="receive_api_call_daily_limit",e.CREATE_FORM_FIELD="create_form_field",e.CREATE_FORM_RULE="create_form_rule",e.ADD_CUSTOM_EMAIL_IN_NOTIFICATONS="add_custom_email_in_notifications",e.FILE_UPLOAD_CONTROL="file_upload_control",e.ENABLE_FORM_PAYMENTS="enable_form_payments",e.USE_SALESFORCE_LOOKUP_OBJECTS="salesforce_lookup_objects_app",e.USE_SALESFORCE_QUERY="salesforce_query_app",e.MAIL_CHIMP_APP="mail_chimp_app",e.WEB_HOOKS_APP="web_hooks_app",e.GOOGLE_GROUPS_APP="google_groups_app",e.TWITTER_APP="twitter_app",e.ICONTACT_APP="icontact_app",e.UNBOUNCE_APP="unbounce_app",e.BIG_CONTACTS_APP="big_contacts_app",e.GOOGLE_DRIVE_APP="google_drive_app",e.SMARTSHEET_APP="smartsheet_app",e.ACTIVE_CAMPAIGN_APP="active_campaign_app",e.CAMPAIGN_MONITOR_APP="campaign_monitor_app",e.EGNYTE_APP="egnyte_app",e.EVERNOTE_APP="evernote_app",e.GET_RESPONSE_APP="get_response_app",e.MARKETO_APP="marketo_app",e.WORDPRESS_POSTS_APP="wordpress_posts_app",e.VERTICAL_RESPONSE_APP="vertical_response_app",e.TOP_PRODUCER_APP="top_producer_app",e.A_WEBER_APP="a_weber_app",e.PIPELINE_DEALS_APP="pipeline_deals_app",e.ZENDESK_APP="zendesk_app",e.ZOHO_CRM_APP="zoho_crm_app",e.CONSTANT_CONTACT_APP="constant_contact_app",e.DROPBOX_APP="dropbox_app",e.GOOGLE_CALENDAR_APP="google_calendar_app",e.ENORMAIL_APP="enormail_app",e.COUPON_CODE_CONTROL="coupon_code_control",e.REPEATABLE_CONTAINER="repeatable_container",e.PASSWORD_CONTROL="password_control",e.FORMULA_CONTROL="formula_control",e.FEE_CONTROL="fee_control",e.HTML_BLOCK_CONTROL="html_block_control",e.FIELD_VALIDATION_CONTROL_OPTION="field_validation_control_option",e.LIMIT_CHOICES_CONTROL_OPTION="limit_choices_control_option",e.QUIZ_CONTROL_OPTION="quiz_control_option",e.ADD_FORM_LANGUAGE="add_form_language",e.LIKERT_SCALE_CONTROL="likert_scale_control",e.SELF_UPGRADE="self_upgrade"}(i||(i={}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(196),u=n(197),d=n(198),p=n(199),h=n(200),_=n(201),g=n(202),m=n(203),f=n(204),E=n(205),y=n(206),T=n(207),v=n(208),O=n(209),b=n(210),C=n(211),I=n(212),R=n(213),P=n(214),N=function(){function e(){r()(this,e)}return o()(e,null,[{key:"getAllSettingTypeIds",value:function(){return[e.PAYMENT_PRODUCTS_EDITOR_SETTING,e.PAYMENT_COUPON_CODES_EDITOR_SETTING,e.PAYMENT_SUMMARY_EDITOR_SETTING,e.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING,e.PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING,e.PAYMENT_PROCESSOR_PAYPAL_PAYFLOW_EDITOR_SETTING,e.PAYMENT_PROCESSOR_PAYPAL_PRO_EDITOR_SETTING,e.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING,e.PAYMENT_PROCESSOR_STRIPE_CHECKOUT_EDITOR_SETTING,e.PAYMENT_PROCESSOR_BRAINTREE_EDITOR_SETTING,e.PAYMENT_PROCESSOR_PAYU_EDITOR_SETTING,e.PAYMENT_PROCESSOR_SQUARE_EDITOR_SETTING,e.PAYMENT_PROCESSOR_SISOW_EDITOR_SETTING,e.PAYMENT_PROCESSOR_PAYFAST_EDITOR_SETTING,e.PAYMENT_PROCESSOR_WORLDPAY_EDITOR_SETTING,e.PAYMENT_PROCESSOR_AUTHORIZE_EDITOR_SETTING,e.PAYMENT_PROCESSOR_SAGEPAY_EDITOR_SETTING,e.PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING,e.PAYMENT_PROCESSOR_CIVICA_EDITOR_SETTING]}},{key:"getSettingClassByTypeId",value:function(e){switch(e){case this.PAYMENT_PRODUCTS_EDITOR_SETTING:return c.a;case this.PAYMENT_SUMMARY_EDITOR_SETTING:return u.a;case this.PAYMENT_COUPON_CODES_EDITOR_SETTING:return d.a;case this.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING:return p.a;case this.PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING:return h.a;case this.PAYMENT_PROCESSOR_PAYPAL_PRO_EDITOR_SETTING:return _.a;case this.PAYMENT_PROCESSOR_PAYPAL_PAYFLOW_EDITOR_SETTING:return g.a;case this.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING:return m.a;case this.PAYMENT_PROCESSOR_STRIPE_CHECKOUT_EDITOR_SETTING:return f.a;case this.PAYMENT_PROCESSOR_SQUARE_EDITOR_SETTING:return E.a;case this.PAYMENT_PROCESSOR_BRAINTREE_EDITOR_SETTING:return y.a;case this.PAYMENT_PROCESSOR_PAYU_EDITOR_SETTING:return T.a;case this.PAYMENT_PROCESSOR_SISOW_EDITOR_SETTING:return v.a;case this.PAYMENT_PROCESSOR_PAYFAST_EDITOR_SETTING:return O.a;case this.PAYMENT_PROCESSOR_WORLDPAY_EDITOR_SETTING:return b.a;case this.PAYMENT_PROCESSOR_AUTHORIZE_EDITOR_SETTING:return C.a;case this.PAYMENT_PROCESSOR_SAGEPAY_EDITOR_SETTING:return I.a;case this.PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING:return R.a;case this.PAYMENT_PROCESSOR_CIVICA_EDITOR_SETTING:return P.a;default:return null}}}]),e}();l()(N,"PAYMENT_PRODUCTS_EDITOR_SETTING","setting_payment_products"),l()(N,"PAYMENT_COUPON_CODES_EDITOR_SETTING","setting_payment_coupons"),l()(N,"PAYMENT_SUMMARY_EDITOR_SETTING","setting_payment_summary"),l()(N,"PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING","setting_payment_processor_paypal"),l()(N,"PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING","setting_payment_processor_paypal_checkout"),l()(N,"PAYMENT_PROCESSOR_PAYPAL_PAYFLOW_EDITOR_SETTING","setting_payment_processor_paypal_payflow"),l()(N,"PAYMENT_PROCESSOR_PAYPAL_PRO_EDITOR_SETTING","setting_payment_processor_paypal_pro"),l()(N,"PAYMENT_PROCESSOR_BRAINTREE_EDITOR_SETTING","setting_payment_processor_braintree"),l()(N,"PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING","setting_payment_processor_stripe"),l()(N,"PAYMENT_PROCESSOR_STRIPE_CHECKOUT_EDITOR_SETTING","setting_payment_processor_stripe_checkout"),l()(N,"PAYMENT_PROCESSOR_PAYU_EDITOR_SETTING","setting_payment_processor_payu"),l()(N,"PAYMENT_PROCESSOR_SQUARE_EDITOR_SETTING","setting_payment_processor_square"),l()(N,"PAYMENT_PROCESSOR_SISOW_EDITOR_SETTING","setting_payment_processor_sisow"),l()(N,"PAYMENT_PROCESSOR_PAYFAST_EDITOR_SETTING","setting_payment_processor_payfast"),l()(N,"PAYMENT_PROCESSOR_WORLDPAY_EDITOR_SETTING","setting_payment_processor_worldpay"),l()(N,"PAYMENT_PROCESSOR_AUTHORIZE_EDITOR_SETTING","setting_payment_processor_authorize"),l()(N,"PAYMENT_PROCESSOR_SAGEPAY_EDITOR_SETTING","setting_payment_processor_sagepay"),l()(N,"PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING","setting_payment_processor_freshbooks"),l()(N,"PAYMENT_PROCESSOR_CIVICA_EDITOR_SETTING","setting_payment_processor_civica")},,function(e,t,n){"use strict";var i,r,a,o,s,l,c,u,d,p,h,_,g,m,f,E;n.d(t,"m",(function(){return i})),n.d(t,"e",(function(){return r})),n.d(t,"l",(function(){return a})),n.d(t,"i",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"j",(function(){return c})),n.d(t,"n",(function(){return u})),n.d(t,"k",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"b",(function(){return _})),n.d(t,"o",(function(){return g})),n.d(t,"a",(function(){return m})),n.d(t,"g",(function(){return f})),n.d(t,"f",(function(){return E})),function(e){e.NOTIFICATIONS="v2/notifications",e.TEMPLATES="v2/notifications/templates",e.NOTIFICATIONS_EMAIL_LIST="list/email",e.SMTP_PROTOCOLS="protocols",e.SMTP_PROTOCOLS_TEST="protocols/smtp/test",e.SMTP_PROTOCOLS_VERIFY="protocols/verify",e.SMTP_STATUS="status"}(i||(i={})),function(e){e.EMAIL_TEXT="(no subject)",e.EMAIL_I18N_KEY="edt_notifications_no_subject"}(r||(r={})),function(e){e.EMAIL="email"}(a||(a={})),function(e){e.TO_RECIPIENTS="to_recipients",e.ACCORDING_TO_RULES="according_to_rules",e.ACCORDING_TO_APPROVALS="according_to_approvals"}(o||(o={})),function(e){e.DEFAULT="default",e.DRAFT="draft"}(s||(s={})),function(e){e.HTML="html",e.PLAIN_TEXT="text"}(l||(l={})),function(e){e.EMAIL="email",e.PHONE="phoneNumber",e.CONTROL_ID="controlId",e.CUSTOM="custom"}(c||(c={})),function(e){e.EXPRESSION="expression",e.CONTROL="control",e.OPERATOR="operator",e.EXTRA="extra",e.LOGICAL="logical",e.VALUE="value"}(u||(u={})),function(e){e.SUBMIT="submit",e.SUBMIT_DELAY="submit_delay",e.PAYMENT_DONE="payment_done",e.PAYMENT_DONE_DELAY="payment_done_delay",e.APPROVE="approve",e.REJECT="reject"}(d||(d={})),function(e){e.FILE="file",e.HTML_TO_PDF="html_to_pdf",e.FORM_LAYOUT="form_layout"}(p||(p={})),function(e){e.SIDEBAR="sidebar",e.BODY="body",e.BOTH="both",e.NONE="none"}(h||(h={})),function(e){e.NEW_EMAIL="new_email",e.SAVE_EMAIL="save_email",e.UPDATE_EMAIL="update_email",e.DELETE_EMAIL="delete_email",e.DUPLICATE_EMAIL="duplicate_email"}(_||(_={})),function(e){e.AUTO="auto",e.NONE="none",e.SSL="ssl",e.TLS="tls"}(g||(g={})),function(e){e.USER_EMAIL="userEmail",e.USER_PHONE="userPhone"}(m||(m={})),function(e){e[e.MAX_EMAIL_RECIPIENTS=3]="MAX_EMAIL_RECIPIENTS",e[e.MAX_ATTACHMENT_FILE_SIZE=5242880]="MAX_ATTACHMENT_FILE_SIZE",e[e.VALIDATION_TAG_LIMIT=10]="VALIDATION_TAG_LIMIT"}(f||(f={})),function(e){e[e.ERR_ATTACHMENT_EXCEEDS_MAX_SIZE=57]="ERR_ATTACHMENT_EXCEEDS_MAX_SIZE"}(E||(E={}))},function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.SILVER="silver",e.NEW_SILVER="new-silver",e.GOLD="gold",e.PLATINUM="platinum",e.PROFESSIONAL="professional",e.CORPORATE="corporate",e.INDIVIDUAL="individual",e.TEAM="team",e.STARTER="starter",e.NEW_STARTER="new-starter",e.SF_PROFESSIONAL="salesforce-professional",e.CONTACT_US="contact-us",e.ENTERPRISE="enterprise",e.SF_ENTERPRISE="salesforce-enterprise",e.SF_ENTERPRISE_TRIAL="salesforce-enterprise-trial",e.USERS_BUNDLE="users",e.FORMS_BUNDLE="forms",e.GET_HELP="get-help"}(i||(i={}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(20),r=n.n(i),a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(0),u=n.n(c),d=function(){function e(){o()(this,e)}return l()(e,null,[{key:"withI18n",value:function(e){return this.i18n=e,this}},{key:"addHardcodedPropertyName",value:function(e,t,n,i){if(null!==e&&"number"!==typeof e){if(!e||!r()(e,Array))throw new Error("Invalid argument: number|number[] expected!");for(var a=0,o=e.length;a<o;a++)if("number"!==typeof e[a])throw new Error("Invalid argument: number|number[] expected!")}if("string"!==typeof t||""===t)throw new Error("Invalid argument: string not empty expected!");if("string"!==typeof n||""===n)throw new Error("Invalid argument: string not empty expected!");this.hardcodings.push({hardcodedPropertyName:n,propertyFQN:t,elementTypeIdOrElementTypeIdList:e,hardcodedPropertyNameI18n:i})}},{key:"getHardcodedPropertyLabel",value:function(e,t){for(var n=0,i=this.hardcodings.length;n<i;n++)if((null===this.hardcodings[n].elementTypeIdOrElementTypeIdList||this.hardcodings[n].elementTypeIdOrElementTypeIdList===e||r()(this.hardcodings[n].elementTypeIdOrElementTypeIdList,Array)&&this.hardcodings[n].elementTypeIdOrElementTypeIdList.indexOf(e)>-1)&&this.hardcodings[n].propertyFQN===t)return this.i18n.translateText(this.hardcodings[n].hardcodedPropertyNameI18n)&&this.i18n.translateText(this.hardcodings[n].hardcodedPropertyNameI18n)!==this.hardcodings[n].hardcodedPropertyNameI18n?this.i18n.translateText(this.hardcodings[n].hardcodedPropertyNameI18n):this.hardcodings[n].hardcodedPropertyName;return null}},{key:"addHardcodedAttributeName",value:function(e,t,n){if("string"!==typeof e||!e)throw new Error("Invalid argument: string not empty expected!");if("string"!==typeof t||!t)throw new Error("Invalid argument: string not empty expected!");this.attributeHardcodings.push({hardcodedAttributeName:t,attributeFQN:e,hardcodedAttributeNameI18n:n})}},{key:"getHardcodedAttributeLabel",value:function(e){for(var t=0,n=this.attributeHardcodings.length;t<n;t++)if(this.attributeHardcodings[t].attributeFQN===e)return this.i18n.translateText(this.attributeHardcodings[t].hardcodedAttributeNameI18n)&&this.i18n.translateText(this.attributeHardcodings[t].hardcodedAttributeNameI18n)!==this.attributeHardcodings[t].hardcodedAttributeNameI18n?this.i18n.translateText(this.attributeHardcodings[t].hardcodedAttributeNameI18n):this.attributeHardcodings[t].hardcodedAttributeName;return null}}]),e}();u()(d,"hardcodings",[]),u()(d,"attributeHardcodings",[]),u()(d,"i18n",void 0)},function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return r})),n.d(t,"i",(function(){return a})),n.d(t,"B",(function(){return o})),n.d(t,"j",(function(){return s})),n.d(t,"p",(function(){return l})),n.d(t,"r",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"w",(function(){return p})),n.d(t,"s",(function(){return h})),n.d(t,"t",(function(){return _})),n.d(t,"q",(function(){return g})),n.d(t,"g",(function(){return m})),n.d(t,"y",(function(){return f})),n.d(t,"o",(function(){return E})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return T})),n.d(t,"x",(function(){return v})),n.d(t,"v",(function(){return O})),n.d(t,"k",(function(){return b})),n.d(t,"A",(function(){return C})),n.d(t,"u",(function(){return I})),n.d(t,"n",(function(){return R})),n.d(t,"b",(function(){return P})),n.d(t,"l",(function(){return N})),n.d(t,"z",(function(){return A})),n.d(t,"m",(function(){return S})),function(e){e.NAVIGATE="navigate",e.SET_FORM_ID="setFormId",e.SET_PUBLISH_TAB="setPublishTab",e.INIT_FORM_CONTROLS="initFormControls",e.INIT_SERIALISED_FORM_DATA="setInitialSerialisedFormData",e.UPDATE_CONTROL_PROPERTY="updateControlProperty",e.SET_FORM_HIPAA="setFormHipaa",e.SET_FORM_NAME="setFormName",e.INIT_FORM_OPTIONS="initFormOptions",e.UPDATE_FORM_OPTION="updateFormOption",e.APPEND_CONTROL="appendControl",e.APPEND_UNIQUE_CONTROL="appendUniqueControl",e.UPDATE_CONTROLS_IDS="updateControlIds",e.UPDATE_CONTROL_HASH="updateControlHash",e.REMOVE_CONTROLS="removeControls",e.UPDATE_PAYMENT_ACTIVE_STATE="updatePaymentActiveState",e.UPDATE_APPROVAL_OF_SUBMISSION="updateApprovalOfSubmission",e.SET_EMAIL_NOTIFICATIONS="setEmailNotifications",e.SET_SMS_NOTIFICATIONS="setSMSNotifications",e.ADD_NOTIFICATION="addNotification",e.REMOVE_NOTIFICATION="removeNotification",e.UPDATE_NOTIFICATION="updateNotification",e.SET_SELECTED_CONTROL="setSelectedControl",e.UNSELECT_ALL_CONTROLS="unselectAllControls",e.INIT_THEME_PROPERTIES="initThemeProperties",e.UPDATE_THEME_PROPERTY="updateThemeProperty",e.INIT_BUILDER="initBuilder",e.SET_BUILDER_LOADING_STATE="setBuilderLoadingState",e.ENABLE_HOTSPOT="enableHotspot",e.DISABLE_HOTSPOT="disableHotspot"}(i||(i={}));var r=function(e){return{type:i.ENABLE_HOTSPOT,payload:e}},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:i.INIT_THEME_PROPERTIES,payload:e}},o=function(e,t){return{type:i.UPDATE_THEME_PROPERTY,payload:{name:e,value:t}}},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:i.NAVIGATE,payload:e}},l=function(e){return{type:i.SET_FORM_ID,payload:e}},c=function(e){return{type:i.SET_PUBLISH_TAB,payload:e}},u=function(e){return{type:i.INIT_SERIALISED_FORM_DATA,payload:e}},d=function(e){return{type:i.INIT_FORM_CONTROLS,payload:e}},p=function(e,t,n){return{type:i.UPDATE_CONTROL_PROPERTY,payload:{controlId:e,propertyName:t,propertyValue:n}}},h=function(e,t){return{type:i.SET_SELECTED_CONTROL,payload:{id:e,isSelected:t}}},_=function(){return{type:i.UNSELECT_ALL_CONTROLS,payload:{}}},g=function(e){return{type:i.SET_FORM_NAME,payload:e}},m=function(e){return{type:i.INIT_FORM_OPTIONS,payload:e}},f=function(e,t){return{type:i.UPDATE_FORM_OPTION,payload:{name:e,value:t}}},E=function(e){return{type:i.SET_FORM_HIPAA,payload:e}},y=function(e){return{type:i.APPEND_CONTROL,payload:e}},T=function(e){return{type:i.APPEND_UNIQUE_CONTROL,payload:e}},v=function(e){return{type:i.UPDATE_CONTROLS_IDS,payload:e}},O=function(e,t,n){return{type:i.UPDATE_CONTROL_HASH,payload:{nodeTypeId:e,properties:t,hash:n}}},b=function(e){return{type:i.REMOVE_CONTROLS,payload:e}},C=function(e){return{type:i.UPDATE_PAYMENT_ACTIVE_STATE,payload:e}},I=function(e){return{type:i.UPDATE_APPROVAL_OF_SUBMISSION,payload:e}},R=function(e){return{type:i.SET_EMAIL_NOTIFICATIONS,payload:e}},P=function(e){return{type:i.ADD_NOTIFICATION,payload:e}},N=function(e,t){return{type:i.REMOVE_NOTIFICATION,payload:{id:e,type:t}}},A=function(e){return{type:i.UPDATE_NOTIFICATION,payload:e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:i.SET_BUILDER_LOADING_STATE,payload:e}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(225),u=n(194),d=n(283),p=n(35),h=n(284),_=n(173),g=n(285),m=n(286),f=n(287),E=n(288),y=n(290),T=function(){function e(){r()(this,e)}return o()(e,null,[{key:"createElement",value:function(t,n){switch(t){case e.ELEMENT_TYPE_TAGS:return new c.a(n);case e.ELEMENT_TYPE_TAGS_LIST:return new u.a(n);case e.ELEMENT_TYPE_SINGLE_TAGS_LIST:return new d.a(n);case e.ELEMENT_TYPE_SEARCHABLE_DROPDOWN:return""===p.a.meetsRequirements("* * desktop * *")?new h.a:new _.a;case e.ELEMENT_TYPE_DROPDOWN:return new _.a;case e.ELEMENT_TYPE_COLOR:return new g.a;case e.ELEMENT_TYPE_DATE:return new m.a;case e.ELEMENT_TYPE_TIME:return new f.a;case e.ELEMENT_TYPE_FILE:return new E.a;case e.ELEMENT_TYPE_STAR_RATING:return new y.a;default:throw new Error("Unrecognized UI element type: ".concat(JSON.stringify(t)))}}},{key:"withJQuery",value:function(t){e.jq=t}},{key:"getJQuery",value:function(){return e.jq}},{key:"withI18n",value:function(t){e.i18n=t}},{key:"getI18n",value:function(){return e.i18n}},{key:"withResourceManager",value:function(e){this.resourceManager=e}},{key:"getResourceManager",value:function(){return this.resourceManager}},{key:"upgradeDOMNodeFromForm",value:function(t){(window.jQuery||window.$||window.$x)(t).find("select").each((function(){var t=e.createElement(e.ELEMENT_TYPE_DROPDOWN),n=this.options;t.setAttribute("data-role","i123-input");for(var i=0,r=n.length;i<r;i++)t.add(n[i].cloneNode(!0));this.parentNode.insertBefore(t.getRootNode(),this),this.parentNode.removeChild(this);for(var a=t.getRootNode().querySelector("select"),o=0,s=this.attributes.length;o<s;o++)a.setAttribute(this.attributes[o].name,this.attributes[o].value);a.setAttribute("data-secondary","")}))}}]),e}();l()(T,"ELEMENT_TYPE_SEARCHABLE_DROPDOWN","searchable-dropdown"),l()(T,"ELEMENT_TYPE_DROPDOWN","dropdown"),l()(T,"ELEMENT_TYPE_COLOR","color"),l()(T,"ELEMENT_TYPE_DATE","date"),l()(T,"ELEMENT_TYPE_TIME","time"),l()(T,"ELEMENT_TYPE_FILE","file"),l()(T,"ELEMENT_TYPE_STAR_RATING","star-rating"),l()(T,"ELEMENT_TYPE_TAGS","tags"),l()(T,"ELEMENT_TYPE_TAGS_LIST","tags-list"),l()(T,"ELEMENT_TYPE_SINGLE_TAGS_LIST","single-tags-list"),l()(T,"ELEMENT_TYPE_TAG","tag"),l()(T,"ELEMENT_TYPE_COLLECTION",[T.ELEMENT_TYPE_SEARCHABLE_DROPDOWN,T.ELEMENT_TYPE_DROPDOWN,T.ELEMENT_TYPE_COLOR,T.ELEMENT_TYPE_DATE,T.ELEMENT_TYPE_TIME,T.ELEMENT_TYPE_FILE,T.ELEMENT_TYPE_STAR_RATING,T.ELEMENT_TYPE_TAGS,T.ELEMENT_TYPE_TAGS_LIST,T.ELEMENT_TYPE_SINGLE_TAGS_LIST,T.ELEMENT_TYPE_TAG]),l()(T,"jq",void 0),l()(T,"i18n",void 0),l()(T,"resourceManager",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(1),u=n(47),d=function(){function e(t,n,i){r()(this,e),l()(this,"config",void 0),l()(this,"i18n",void 0),l()(this,"phoneUtils",void 0),l()(this,"capabilities",void 0),l()(this,"userService",void 0),this.i18n=t,this.capabilities=n,this.phoneUtils=i,this.userService=u.a.getInstance()}return o()(e,[{key:"enumerateValidators",value:function(){return void 0===this.config&&(this.config=[{name:"none",id:"",isSupported:!0,i18n:"edt_UI_validator_type_none"},{name:"email",id:e.VALIDATOR_TYPE_EMAIL,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_EMAIL),i18n:"edt_UI_validator_type_email"},{name:"password",id:e.VALIDATOR_TYPE_PASSWORD,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PASSWORD),i18n:"edt_UI_validator_type_password"},{name:"integer",id:e.VALIDATOR_TYPE_UNSIGNED_INTEGER,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_UNSIGNED_INTEGER),i18n:"edt_UI_validator_type_unsigned_integer"},{name:"alpha",id:e.VALIDATOR_TYPE_ALPHA,isSupported:this.userService.canUseValidator(e.VALIDATOR_TYPE_ALPHA),i18n:"edt_UI_validator_type_alpha"},{name:"alpha numeric",id:e.VALIDATOR_TYPE_ALPHANUMERIC,isSupported:this.userService.canUseValidator(e.VALIDATOR_TYPE_ALPHANUMERIC),i18n:"edt_UI_validator_type_alphanumeric"},{name:"alpha space",id:e.VALIDATOR_TYPE_ALPHASPACE,isSupported:this.userService.canUseValidator(e.VALIDATOR_TYPE_ALPHASPACE),i18n:"edt_UI_validator_type_alphaspace"},{name:"alpha numeric space",id:e.VALIDATOR_TYPE_ALPHANUMERICSPACE,isSupported:this.userService.canUseValidator(e.VALIDATOR_TYPE_ALPHANUMERICSPACE),i18n:"edt_UI_validator_type_alphanumericspace"},{name:"numeric",id:e.VALIDATOR_TYPE_NUMERIC,isSupported:this.userService.canUseValidator(e.VALIDATOR_TYPE_NUMERIC),i18n:"edt_UI_validator_type_numeric"},{name:"numeric plus",id:e.VALIDATOR_TYPE_NUMERICPLUS,isSupported:this.userService.canUseValidator(e.VALIDATOR_TYPE_NUMERICPLUS),i18n:"edt_UI_validator_type_numericplus"},{name:"Url Web Page",id:e.VALIDATOR_TYPE_URL_WEB_PAGE,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_URL_WEB_PAGE),i18n:"edt_UI_validator_type_web_page"},{name:"Url Image",id:e.VALIDATOR_TYPE_URL_IMAGE,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_URL_IMAGE),i18n:"edt_UI_validator_type_url_image"},{name:"yy/mm/dd",id:e.VALIDATOR_TYPE_DATE_YYYYMMDD,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_DATE_YYYYMMDD),i18n:"edt_UI_validator_type_date_yyyymmdd"},{name:"dd/mm/yyyy",id:e.VALIDATOR_TYPE_DATE_DDMMYYYY,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_DATE_DDMMYYYY),i18n:"edt_UI_validator_type_date_ddmmyyyy"},{name:"mm/dd/yyyy",id:e.VALIDATOR_TYPE_DATE_MMDDYYYY,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_DATE_MMDDYYYY),i18n:"edt_UI_validator_type_date_mmddyyyy"},{name:"mm/yyyy",id:e.VALIDATOR_TYPE_DATE_MMYYYY,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_DATE_MMYYYY),i18n:"edt_UI_validator_type_date_mmyyyy"},{name:"Time",id:e.VALIDATOR_TYPE_TIME,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_TIME),i18n:"edt_UI_validator_type_time"},{name:"Time AM/PM",id:e.VALIDATOR_TYPE_TIME_AMPM,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_TIME_AMPM),i18n:"edt_UI_validator_type_time_ampm"},{name:"full name",id:e.VALIDATOR_TYPE_FULL_NAME,isSupported:this.userService.canUseValidator(e.VALIDATOR_TYPE_FULL_NAME),i18n:"edt_UI_validator_type_full_name"},{name:"regular expression",id:e.VALIDATOR_TYPE_REGEX,isSupported:this.userService.canUseValidator(e.VALIDATOR_TYPE_REGEX),i18n:"edt_UI_validator_type_regex"},{name:"custom",id:e.VALIDATOR_TYPE_CUSTOM,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_CUSTOM),i18n:"edt_UI_validator_type_custom"},{name:"blank",id:e.VALIDATOR_TYPE_PASSWORD_ANY_COMPLEXITY_INCLUDING_BLANK_PASSWORDS,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PASSWORD_ANY_COMPLEXITY_INCLUDING_BLANK_PASSWORDS),i18n:"edt_UI_validator_type_password_any_complexity_including_blank"},{name:"any",id:e.VALIDATOR_TYPE_PASSWORD_ANY_COMPLEXITY,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PASSWORD_ANY_COMPLEXITY),i18n:"edt_UI_validator_type_password_any_complexity"},{name:"minimal",id:e.VALIDATOR_TYPE_PASSWORD_MIN_COMPLEXITY,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PASSWORD_MIN_COMPLEXITY),i18n:"edt_UI_validator_type_password_min_complexity"},{name:"medium",id:e.VALIDATOR_TYPE_PASSWORD_MED_COMPLEXITY,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PASSWORD_MED_COMPLEXITY),i18n:"edt_UI_validator_type_password_med_complexity"},{name:"corporate",id:e.VALIDATOR_TYPE_PASSWORD_CORPORATE_COMPLEXITY,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PASSWORD_CORPORATE_COMPLEXITY),i18n:"edt_UI_validator_type_password_corporate_complexity"},{name:"extra-low",id:e.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_EXTRA_LOW,isSupported:this.isValidatorSupported(String(e.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_EXTRA_LOW)),i18n:"edt_UI_validator_type_signature_complexity_extra_low"},{name:"low",id:e.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_LOW,isSupported:this.isValidatorSupported(String(e.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_LOW)),i18n:"edt_UI_validator_type_signature_complexity_low"},{name:"medium",id:e.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_AVERAGE,isSupported:this.isValidatorSupported(String(e.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_AVERAGE)),i18n:"edt_UI_validator_type_signature_complexity_average"},{name:"high",id:e.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_HIGH,isSupported:this.isValidatorSupported(String(e.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_HIGH)),i18n:"edt_UI_validator_type_signature_complexity_high"},{name:"2-2-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_2_2_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_2_2_4),i18n:""},{name:"2-3-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_2_3_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_2_3_4),i18n:""},{name:"2-3-8",id:e.VALIDATOR_TYPE_PHONE_FORMAT_2_3_8,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_2_3_8),i18n:""},{name:"2-4-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_2_4_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_2_4_4),i18n:""},{name:"2-5-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_2_5_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_2_5_4),i18n:""},{name:"3-3-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_4),i18n:""},{name:"3-3-3",id:e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_3,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_3),i18n:""},{name:"3-3-7",id:e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_7,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_7),i18n:""},{name:"3-4-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_3_4_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_3_4_4),i18n:""},{name:"3-2-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_4),i18n:""},{name:"3-2-6",id:e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_6,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_6),i18n:""},{name:"3-2-7",id:e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_7,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_7),i18n:""},{name:"3-5-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_3_5_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_3_5_4),i18n:""},{name:"4-3-3",id:e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_3,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_3),i18n:""},{name:"4-3-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_4),i18n:""},{name:"4-3-6",id:e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_6,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_6),i18n:""},{name:"4-3-7",id:e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_7,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_7),i18n:""},{name:"4-2-8",id:e.VALIDATOR_TYPE_PHONE_FORMAT_4_2_8,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_4_2_8),i18n:""},{name:"4-4-6",id:e.VALIDATOR_TYPE_PHONE_FORMAT_4_4_6,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_4_4_6),i18n:""},{name:"5-3-3",id:e.VALIDATOR_TYPE_PHONE_FORMAT_5_3_3,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_5_3_3),i18n:""},{name:"5-4-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_5_4_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_5_4_4),i18n:""},{name:"5-6",id:e.VALIDATOR_TYPE_PHONE_FORMAT_5_6,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_5_6),i18n:""},{name:"phone-any-format",id:e.VALIDATOR_TYPE_PHONE_ANY_FORMAT,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_ANY_FORMAT),i18n:""}],this.config.sort((function(e,t){var n=e.name.toLowerCase(),i=t.name.toLowerCase();return n===i?0:n<i?-1:1}))),this.config.slice(0)}},{key:"isValidatorSupported",value:function(e){for(var t=String(e),n=0,i=this.capabilities.factory.supportedValidationTypes.length;n<i;n++)if(String(this.capabilities.factory.supportedValidationTypes[n])===t)return!0;return!1}},{key:"getValidatorById",value:function(e){void 0===this.config&&this.enumerateValidators();for(var t=0,n=this.config.length;t<n;t++)if(this.config[t].id===e||null===e&&""===this.config[t].id)return this.config[t];return null}},{key:"validate",value:function(t,n){if(!n)return!0;switch(n){case e.VALIDATOR_TYPE_EMAIL:return this.validateEmailAddress(t);case e.VALIDATOR_TYPE_URL_WEB_PAGE:return this.validateWebAddress(t);case e.VALIDATOR_TYPE_PHONE_FORMAT_2_2_4:return this.validatePhoneNumberFormat(t,[2,2,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_2_3_4:return this.validatePhoneNumberFormat(t,[2,3,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_2_3_8:return this.validatePhoneNumberFormat(t,[2,3,8]);case e.VALIDATOR_TYPE_PHONE_FORMAT_2_4_4:return this.validatePhoneNumberFormat(t,[2,4,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_2_5_4:return this.validatePhoneNumberFormat(t,[2,5,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_4:return this.validatePhoneNumberFormat(t,[3,3,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_3:return this.validatePhoneNumberFormat(t,[3,3,3]);case e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_7:return this.validatePhoneNumberFormat(t,[3,3,7]);case e.VALIDATOR_TYPE_PHONE_FORMAT_3_4_4:return this.validatePhoneNumberFormat(t,[3,4,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_4:return this.validatePhoneNumberFormat(t,[3,2,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_6:return this.validatePhoneNumberFormat(t,[3,2,6]);case e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_7:return this.validatePhoneNumberFormat(t,[3,2,7]);case e.VALIDATOR_TYPE_PHONE_FORMAT_3_5_4:return this.validatePhoneNumberFormat(t,[3,5,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_3:return this.validatePhoneNumberFormat(t,[4,3,3]);case e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_4:return this.validatePhoneNumberFormat(t,[4,3,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_6:return this.validatePhoneNumberFormat(t,[4,3,6]);case e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_7:return this.validatePhoneNumberFormat(t,[4,3,7]);case e.VALIDATOR_TYPE_PHONE_FORMAT_4_2_8:return this.validatePhoneNumberFormat(t,[4,2,8]);case e.VALIDATOR_TYPE_PHONE_FORMAT_4_4_6:return this.validatePhoneNumberFormat(t,[4,4,6]);case e.VALIDATOR_TYPE_PHONE_FORMAT_5_3_3:return this.validatePhoneNumberFormat(t,[5,3,3]);case e.VALIDATOR_TYPE_PHONE_FORMAT_5_4_4:return this.validatePhoneNumberFormat(t,[5,4,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_5_6:return this.validatePhoneNumberFormat(t,[5,6]);case e.VALIDATOR_TYPE_PHONE_ANY_FORMAT:return this.validatePhoneNumberWithAnyFormat(t);case e.VALIDATOR_TYPE_YOUTUBE_URL:return!!this.validateYoutubeVideoURL(t);case e.VALIDATOR_TYPE_VIMEO_URL:return!!this.validateVimeoVideoURL(t);case e.VALIDATOR_TYPE_WORDPRESS_TV_URL:return!!this.validateWordpressTVVideoUrl(t);case e.VALIDATOR_TYPE_TED_TALKS_URL:return!!this.validateTedTalksVideoURL(t);case e.VALIDATOR_TYPE_DAILYMOTION_URL:return!!this.validateDailyMotionVideoURL(t);case e.VALIDATOR_TYPE_MIXCLOUD_URL:return!!this.validateMixCloudAudioURL(t);case e.VALIDATOR_TYPE_SOUNDCLOUD_URL:return!!this.validateSoundCloudAudioURL(t);case e.VALIDATOR_TYPE_NFB_URL:return!!this.validateNFBVideoURL(t);case e.VALIDATOR_TYPE_KICKSTARTER_URL:return!!this.validateKickstarterVideoURL(t);case e.VALIDATOR_TYPE_TWITCH_URL:return!!this.validateTwitchVideoURL(t);case e.VALIDATOR_TYPE_PDF_URL:return!!this.validatePDFFileUrl(t);case e.FACEBOOK_POST_URL:return!!this.validateFacebookPostURL(t);case e.FACEBOOK_PAGE_URL:return!!this.validateFacebookPageURL(t);case e.VALIDATOR_TYPE_EMBEDDABLE_URL:return!!this.validateEmbeddableURL(t);case e.VALIDATOR_TYPE_EMBEDDABLE_FACEBOOK_URL:return!!this.validateEmbeddableFacebookURL(t);case e.VALIDATOR_TYPE_EMBEDDABLE_PDF_URL:return!!this.validateEmbeddablePdfURL(t);case e.VALIDATOR_TYPE_EMBEDDABLE_VIDEO_URL:return!!this.validateEmbeddableVideoURL(t);default:return!1}}},{key:"validateEmailAddress",value:function(e){return"string"===typeof e&&(""!==e&&/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e))}},{key:"validatePhoneNumberWithAnyFormat",value:function(e){return""!==e&&(!(e.toString().replace(/\D+/g,"").length<4)&&/^\+?([0-9. \- \( \)]+)$/.test(e))}},{key:"validatePhoneNumberFormat",value:function(e,t){if("string"!==typeof e)return!1;if(""===e)return!1;var n=this.phoneUtils.parsePhoneNumber(e);if(null==n)return!0;if(null==n.localPhoneNumber)return!0;var i="";return i=void 0!==t[2]?"^[0-9]{".concat(t[0]+t[1]+t[2],"}$"):"^[0-9]{".concat(t[0]+t[1],"}$"),new RegExp(i).test(n.localPhoneNumber)}},{key:"getSupportedUserPlanValidators",value:function(e){for(var t=[],n=0,i=e||[],r=i.length;n<r;n++)i[n].isSupported&&t.push(i[n]);return t.length?t:null}},{key:"validateWebAddress",value:function(e){return"string"===typeof e&&(""!==e&&/^(?:http(s)?:\/\/)[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/i.test(e))}},{key:"validateYoutubeVideoURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:y2u\.be\/|youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|v=)?)((\w|-){11})(?:\S+)?$/)&&(t={type:c.sb.YOUTUBE_VIDEO,identifier:RegExp.$1,url:e}),t}},{key:"validateVimeoVideoURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:player\.)?(?:vimeo\.com\/(?:video\/)?)((\w|-){9})(?:\S+)?$/)&&(t={type:c.sb.VIMEO_VIDEO,identifier:RegExp.$1,url:e}),t}},{key:"validateWordpressTVVideoUrl",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:videopress\.com)(?:\/embed)?\/((\w|-){8,})(?:\S+)?$/)&&(t={type:c.sb.WORDPRESS_TV_VIDEO,identifier:RegExp.$1,url:e}),t}},{key:"validateTedTalksVideoURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:embed\.)?(?:ted\.com\/talks\/)(.+)$/)&&(t={type:c.sb.TED_TALKS_VIDEO,identifier:RegExp.$1,url:e}),t}},{key:"validateDailyMotionVideoURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:dailymotion\.com)\/(?:embed\/)?(?:video\/)(.+)$/)&&(t={type:c.sb.DAILYMOTION_VIDEO,identifier:RegExp.$1,url:e}),t}},{key:"validateMixCloudAudioURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:mixcloud\.com)\/(?:widget\/iframe\/)?(?:\?feed=)(?:https?:\/\/)?(?:www\.)?(?:mixcloud\.com)\/(.+)$/)&&(t={type:c.sb.MIXCLOUD_AUDIO,identifier:RegExp.$1,url:e}),t}},{key:"validateSoundCloudAudioURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:api\.)(?:soundcloud\.com)\/(?:tracks\/)(.+)$/)&&(t={type:c.sb.SOUNDCLOUD_AUDIO,identifier:RegExp.$1,url:e}),t}},{key:"validateNFBVideoURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:nfb\.ca\/film\/)(.+)(?:\/embed\/player\/)$/)&&(t={type:c.sb.NFB_VIDEO,identifier:RegExp.$1,url:e}),t}},{key:"validateKickstarterVideoURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:kickstarter\.com\/)(?:projects\/)?(.+)(?:\/widget\/video\.html)$/)&&(t={type:c.sb.KICKSTARTER_VIDEO,identifier:RegExp.$1,url:e}),t}},{key:"validateTwitchVideoURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:player\.)?(?:twitch\.tv\/)(?:\?video=|videos\/)(.+)$/)&&(t={type:c.sb.TWITCH_VIDEO,identifier:RegExp.$1,url:e}),t}},{key:"validatePDFFileUrl",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(.*)(?:\.pdf)$/)&&(t={type:c.sb.PDF_FILE,identifier:RegExp.$1,url:e}),t}},{key:"validateFacebookPostURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:facebook\.com\/)(.*\/posts\/.*)$/)&&(t={type:c.sb.FACEBOOK_POST,identifier:RegExp.$1,url:e}),t}},{key:"validateFacebookPageURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:facebook\.com\/)(.+)(?:\/)?$/)&&(t={type:c.sb.FACEBOOK_PAGE,identifier:RegExp.$1,url:e}),t}},{key:"validateEmbeddableURL",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.rb.ANY;if(n===c.rb.VIDEO_OR_AUDIO){if(t=this.validateYoutubeVideoURL(e))return t;if(t=this.validateVimeoVideoURL(e))return t;if(t=this.validateWordpressTVVideoUrl(e))return t;if(t=this.validateTedTalksVideoURL(e))return t;if(t=this.validateDailyMotionVideoURL(e))return t;if(t=this.validateMixCloudAudioURL(e))return t;if(t=this.validateSoundCloudAudioURL(e))return t;if(t=this.validateNFBVideoURL(e))return t;if(t=this.validateKickstarterVideoURL(e))return t;if(t=this.validateTwitchVideoURL(e))return t}if(n===c.rb.PDF&&(t=this.validatePDFFileUrl(e)))return t;if(n===c.rb.FACEBOOK){if(t=this.validateFacebookPostURL(e))return t;if(t=this.validateFacebookPageURL(e))return t}return null}},{key:"validateEmbeddableVideoURL",value:function(e){return this.validateEmbeddableURL(e,c.rb.VIDEO_OR_AUDIO)}},{key:"validateEmbeddableFacebookURL",value:function(e){return this.validateEmbeddableURL(e,c.rb.FACEBOOK)}},{key:"validateEmbeddablePdfURL",value:function(e){return this.validateEmbeddableURL(e,c.rb.PDF)}}]),e}();l()(d,"VALIDATOR_TYPE_NONE",null),l()(d,"VALIDATOR_TYPE_EMAIL","email"),l()(d,"VALIDATOR_TYPE_PASSWORD","password"),l()(d,"VALIDATOR_TYPE_UNSIGNED_INTEGER","integer"),l()(d,"VALIDATOR_TYPE_ALPHA","alpha"),l()(d,"VALIDATOR_TYPE_ALPHANUMERIC","alphanumeric"),l()(d,"VALIDATOR_TYPE_ALPHASPACE","alphaspace"),l()(d,"VALIDATOR_TYPE_ALPHANUMERICSPACE","alphanumericspace"),l()(d,"VALIDATOR_TYPE_NUMERIC","numeric"),l()(d,"VALIDATOR_TYPE_NUMERICPLUS","numericplus"),l()(d,"VALIDATOR_TYPE_URL_WEB_PAGE","url"),l()(d,"VALIDATOR_TYPE_URL_IMAGE","url-image"),l()(d,"VALIDATOR_TYPE_DATE_YYYYMMDD","dateyyyymmdd"),l()(d,"VALIDATOR_TYPE_DATE_DDMMYYYY","dateddmmyyyy"),l()(d,"VALIDATOR_TYPE_DATE_MMDDYYYY","datemmddyyyy"),l()(d,"VALIDATOR_TYPE_DATE_MMYYYY","datemmyyyy"),l()(d,"VALIDATOR_TYPE_TIME","time"),l()(d,"VALIDATOR_TYPE_TIME_AMPM","time_ampm"),l()(d,"VALIDATOR_TYPE_FULL_NAME","full_name"),l()(d,"VALIDATOR_TYPE_REGEX","regex"),l()(d,"VALIDATOR_TYPE_CUSTOM","custom"),l()(d,"VALIDATOR_TYPE_PASSWORD_ANY_COMPLEXITY_INCLUDING_BLANK_PASSWORDS","password-complexity-any-inluding-blank-passwords"),l()(d,"VALIDATOR_TYPE_PASSWORD_ANY_COMPLEXITY","password-complexity-any"),l()(d,"VALIDATOR_TYPE_PASSWORD_MIN_COMPLEXITY","password-complexity-minimum"),l()(d,"VALIDATOR_TYPE_PASSWORD_MED_COMPLEXITY","password-complexity-medium"),l()(d,"VALIDATOR_TYPE_PASSWORD_CORPORATE_COMPLEXITY","password-complexity-master"),l()(d,"VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_EXTRA_LOW",0),l()(d,"VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_LOW",1),l()(d,"VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_AVERAGE",2),l()(d,"VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_HIGH",3),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_2_2_4","2-2-4"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_2_3_4","2-3-4"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_2_3_8","2-3-8"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_2_4_4","2-4-4"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_2_5_4","2-5-4"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_3_3_4","3-3-4"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_3_3_3","3-3-3"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_3_3_7","3-3-7"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_3_4_4","3-4-4"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_3_2_4","3-2-4"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_3_2_6","3-2-6"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_3_2_7","3-2-7"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_3_5_4","3-5-4"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_4_3_3","4-3-3"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_4_3_4","4-3-4"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_4_3_6","4-3-6"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_4_3_7","4-3-7"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_4_2_8","4-2-8"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_4_4_6","4-4-6"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_5_3_3","5-3-3"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_5_4_4","5-4-4"),l()(d,"VALIDATOR_TYPE_PHONE_FORMAT_5_6","5-6"),l()(d,"VALIDATOR_TYPE_PHONE_ANY_FORMAT","phone-any-format"),l()(d,"VALIDATOR_TYPE_YOUTUBE_URL","youtube-url"),l()(d,"VALIDATOR_TYPE_VIMEO_URL","vimeo-url"),l()(d,"VALIDATOR_TYPE_WORDPRESS_TV_URL","wordpress-tv-url"),l()(d,"VALIDATOR_TYPE_TED_TALKS_URL","ted-talks-url"),l()(d,"VALIDATOR_TYPE_DAILYMOTION_URL","dailymotion-url"),l()(d,"VALIDATOR_TYPE_MIXCLOUD_URL","mixcloud-url"),l()(d,"VALIDATOR_TYPE_SOUNDCLOUD_URL","soundcloud-url"),l()(d,"VALIDATOR_TYPE_NFB_URL","nfb-url"),l()(d,"VALIDATOR_TYPE_KICKSTARTER_URL","kickstarter-url"),l()(d,"VALIDATOR_TYPE_TWITCH_URL","twitch-url"),l()(d,"VALIDATOR_TYPE_PDF_URL","pdf-url"),l()(d,"FACEBOOK_POST_URL","facebook-post-url"),l()(d,"FACEBOOK_PAGE_URL","facebook-page-url"),l()(d,"VALIDATOR_TYPE_EMBEDDABLE_URL","embeddable-url"),l()(d,"VALIDATOR_TYPE_EMBEDDABLE_VIDEO_URL","embeddable-video-url"),l()(d,"VALIDATOR_TYPE_EMBEDDABLE_PDF_URL","embeddable-pdf-url"),l()(d,"VALIDATOR_TYPE_EMBEDDABLE_FACEBOOK_URL","embeddable-facebook-url")},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(5),r=n.n(i),a=n(0),o=n.n(a),s=function e(){r()(this,e)};o()(s,"ERR_TOO_FEW_CHOICES_SELECTED",100),o()(s,"ERR_TOO_MANY_CHOICES_SELECTED",101),o()(s,"ERR_TOO_MANY_CHARACTERS",102),o()(s,"ERR_TOO_FEW_CHARACTERS",103),o()(s,"ERR_TOO_MANY_WORDS",104),o()(s,"ERR_TOO_FEW_WORDS",105),o()(s,"ERR_INVALID_EMAIL",106),o()(s,"ERR_NUMBER_TOO_LONG",107),o()(s,"ERR_NUMBER_TOO_SHORT",108),o()(s,"ERR_NUMBER_TOO_BIG",109),o()(s,"ERR_NUMBER_TOO_SMALL",110),o()(s,"ERR_PRICE_TOO_MANY_DECIMALS",111),o()(s,"ERR_INVALID_URL",113),o()(s,"ERR_DATE_TOO_BIG",114),o()(s,"ERR_DATE_TOO_SMALL",115),o()(s,"ERR_TIME_NOT_COMPLETE",116),o()(s,"ERR_INVALID_PHONE_FORMAT",117),o()(s,"ERR_INTEGER_VALUE_EXPECTED",118),o()(s,"ERR_NEGATIVE_PRICE",119),o()(s,"ERR_NUMBER_EXPECTED",120),o()(s,"ERR_FILE_UPLOAD",121),o()(s,"ERR_CONTROL_VALUES_DONT_MATCH",122),o()(s,"ERR_MAX_ACCEPTED_VALUE_EXCEEDED",123),o()(s,"ERR_INVALID_DATE",124),o()(s,"ERR_INVALID_NUMBER",125),o()(s,"ERR_NOT_NUMERIC",126)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(5),r=n.n(i),a=n(0),o=n.n(a),s=function e(){r()(this,e)};o()(s,"KEY_0",48),o()(s,"KEY_1",49),o()(s,"KEY_2",50),o()(s,"KEY_3",51),o()(s,"KEY_4",52),o()(s,"KEY_5",53),o()(s,"KEY_6",54),o()(s,"KEY_7",55),o()(s,"KEY_8",56),o()(s,"KEY_9",57),o()(s,"KEY_PAD_0",96),o()(s,"KEY_PAD_1",97),o()(s,"KEY_PAD_2",98),o()(s,"KEY_PAD_3",99),o()(s,"KEY_PAD_4",100),o()(s,"KEY_PAD_5",101),o()(s,"KEY_PAD_6",102),o()(s,"KEY_PAD_7",103),o()(s,"KEY_PAD_8",104),o()(s,"KEY_PAD_9",105),o()(s,"KEY_DOT",190),o()(s,"KEY_PAD_DOT",110),o()(s,"KEY_BACKSPACE",8),o()(s,"KEY_DELETE",46),o()(s,"KEY_LEFT",37),o()(s,"KEY_RIGHT",39),o()(s,"KEY_UP",38),o()(s,"KEY_DOWN",40),o()(s,"KEY_SPACE",32),o()(s,"KEY_HOME",36),o()(s,"KEY_END",35),o()(s,"KEY_TAB",9),o()(s,"KEY_ENTER",13),o()(s,"KEY_ESC",27)},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var i=n(38),r=n.n(i),a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(3),u=n.n(c),d=n(17),p=n.n(d),h=n(7),_=n.n(h),g=n(8),m=n.n(g),f=n(4),E=n.n(f),y=n(0),T=n.n(y),v=n(1),O=n(34),b=n(2),C=n(74),I=n(13);n(478);function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var P=function(e){_()(n,e);var t=R(n);function n(e,i){var r,a,s,l;o()(this,n),l=t.call(this,e,i),T()(u()(l),"synchronizationEnabled",!0),T()(u()(l),"visible",void 0),T()(u()(l),"readOnly",void 0),T()(u()(l),"disabled",void 0),T()(u()(l),"formHasRules",!1),T()(u()(l),"changeByRulesDebouncer",void 0),T()(u()(l),"hasSuggestions",!1),l.changeByRulesDebouncer=O.a.create((function(){l.emulateUserInput()}),100),l.on("change.rules",(function(){l.changeByRulesDebouncer()}));var c=null===(r=l.getForm())||void 0===r||null===(a=r.getEngine())||void 0===a?void 0:a.getLoader(),d=null===c||void 0===c||null===(s=c.getRules())||void 0===s?void 0:s.getRules();return l.formHasRules=!!(null===d||void 0===d?void 0:d.length),l}return l()(n,[{key:"createRootNodeElement",value:function(){this.rootNode=document.createElement("div"),this.rootNode.setAttribute("data-role","control"),this.rootNode.setAttribute("data-type",this._static().nodeName),this.rootNode.setAttribute("data-hash",this.getHash()),this.rootNode.setAttribute("data-type-id",String(this.getTypeId())),this.rootNode.setAttribute("data-colspan",String(this.getColspan())),this.updateLabelItalicState(),this.updateLabelBoldState(),this.updateLabelHiddenState()}},{key:"serialize",value:function(){return[this.getTypeId(),this.getId(),this.getHash(),this.properties||null,this.errors||null,null,this.getColspan(),this.getHeight()]}},{key:"getElementKind",value:function(){return v.p.CONTROL}},{key:"withErrors",value:function(e){return p()(E()(n.prototype),"withErrors",this).call(this,e),this.updateErrorsText(),this}},{key:"addError",value:function(e,t,i,r){var a=p()(E()(n.prototype),"addError",this).call(this,e,t,i,r);return a&&this.updateErrorsText(),a}},{key:"removeError",value:function(e){var t=p()(E()(n.prototype),"removeError",this).call(this,e);return t&&this.updateErrorsText(),t}},{key:"removeAllBackendErrors",value:function(){var e=p()(E()(n.prototype),"removeAllBackendErrors",this).call(this);return e&&this.updateErrorsText(),e}},{key:"getSupportedValidators",value:function(){return null}},{key:"getResizingCapability",value:function(){return v.db.LEFT_AND_RIGHT}},{key:"getMinColspan",value:function(){return 2}},{key:"getValue",value:function(){if(this.hasAttribute("value")){for(var e,t={},n=this.enumerateProperties()||[],i=0,r=n.length;i<r;i++)(e=/^value\.(.*)$/.exec(n[i].name))&&!n[i].virtual&&(t[e[1]]=this.getProperty(n[i].name));return t}}},{key:"onValueChanged",value:function(){}},{key:"synchronizeValue",value:function(){console.warn("synchronize value")}},{key:"setValue",value:function(e){if(!this.hasAttribute("value"))throw new Error("This control does not support a value");if("object"!==r()(e))throw new Error("Invalid argument: object expected!");var t;this.synchronizationEnabled=!1;try{for(var n=this.enumerateProperties()||[],i=0,a=n.length;i<a;i++)if(t=/^value\.(.*)$/.exec(n[i].name))if(n[i].optional)void 0!==e[t[1]]?this.setProperty(n[i].name,e[t[1]]):this.setProperty(n[i].name,null);else{if(void 0===e[t[1]])throw new Error("Property ".concat(JSON.stringify(t[1])," is not present in value object!"));this.setProperty(n[i].name,e[t[1]])}}catch(o){throw this.synchronizationEnabled=!0,o}this.synchronizeValue()}},{key:"isReadOnly",value:function(e){return null===e&&(void 0===this.readOnly||!0===this.readOnly)}},{key:"setReadOnly",value:function(e,t){if(this.readOnly=!!t,this.readOnly){this.rootNode.setAttribute("data-is-readonly","");for(var n=0,i=this.rootNode.querySelectorAll("input, select, textarea"),r=i.length;n<r;n++)i[n].readOnly=!0}else{this.rootNode.removeAttribute("data-is-readonly");for(var a=0,o=this.rootNode.querySelectorAll("input, select, textarea"),s=o.length;a<s;a++)o[a].readOnly=!1}}},{key:"isDisabled",value:function(e){return null===e&&(void 0===this.disabled||!0===this.disabled)}},{key:"setDisabled",value:function(e,t){null===e&&(this.disabled=!!t,this.disabled?this.getRootNode().setAttribute("data-is-disabled",""):this.getRootNode().removeAttribute("data-is-disabled"))}},{key:"isVisible",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return void 0!==this.visible||e?void 0===this.visible||this.visible:!(this.hasProperty("options.hidden")&&this.getProperty("options.hidden"))}},{key:"setVisible",value:function(e){e=!!e,this.visible=e,this.visible?(this.getRootNode().removeAttribute("data-is-hidden"),this.getForm().getEngine().getLoader().execCommand("control-has-changed-visibility",{controlId:this.getId(),visibility:this.visible,element:this})):this.getRootNode().setAttribute("data-is-hidden",""),I.a.refreshFrameHeightOnWix()}},{key:"enumerateIndexes",value:function(){return null}},{key:"getMinInputRowWidth",value:function(){return 2}},{key:"isRenderingSupported",value:function(){return!0}},{key:"onReset",value:function(){console.warn("reset: not implemented on ",this)}},{key:"getValueInterfaceName",value:function(){try{return this._static().attributes.value.type}catch(e){return null}}},{key:"hasValueCompatibleWith",value:function(e){if(e&&v.p.CONTROL===e.getElementKind()){var t=e.getValueInterfaceName(),n=e.getTypeId(),i=e&&e.hasProperty("validation.type")&&e.getProperty("validation.type")||null;return null!==t&&(t===this.getValueInterfaceName()?n===b.a.CONTROL_TYPE_WEBSITE?this.getTypeId()===b.a.CONTROL_TYPE_WEBSITE||this.getTypeId()===b.a.CONTROL_TYPE_TEXT&&this.hasProperty("validation.type")&&!this.getProperty("validation.type"):n===b.a.CONTROL_TYPE_EMAIL?this.getTypeId()===b.a.CONTROL_TYPE_EMAIL||this.getTypeId()===b.a.CONTROL_TYPE_TEXT&&this.hasProperty("validation.type")&&!this.getProperty("validation.type"):n!==b.a.CONTROL_TYPE_TEXT||(this.getTypeId()===b.a.CONTROL_TYPE_TEXT&&i&&i===this.getProperty("validation.type")||this.hasProperty("validation.type")&&!this.getProperty("validation.type")||!i):n===b.a.CONTROL_TYPE_NUMBER?this.getTypeId()===b.a.CONTROL_TYPE_TEXT&&this.hasProperty("validation.type")&&!this.getProperty("validation.type"):n===b.a.CONTROL_TYPE_TEXT&&(this.getTypeId()===b.a.CONTROL_TYPE_NUMBER&&!i))}}},{key:"displayValidationUpgradePopupIfNeeded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.hasProperty("validation.type")){var t=this.getProperty("validation.type");if(null!==t&&t!==e){var n=this.getForm().getEngine().getValidator(),i=n.getValidatorById(t);null!==i&&(i.isSupported||(this.setProperty("validation.type",null),this.getForm().getEngine().getLoader().execCommand("show-validator-upgrade-dialog")))}}}},{key:"emulateUserInput",value:function(){}},{key:"isViewForm",value:function(){return this.getForm().getEngine().getLoader().getLoaderType()===v.B.VIEW}}]),n}(C.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(16),u=function(){function e(){r()(this,e)}return o()(e,null,[{key:"getGroupLabelTextByGroupTypeId",value:function(e){switch(e){case this.PAYMENT_PROCESSORS:return"Payment Processors";case this.PAYMENT_PROCESSORS_SANDBOX:return"Payment Processors (Testing Mode)";case this.PAYMENT_SETTINGS:return"Payments";default:return"Setting group not defined: ".concat(JSON.stringify(e))}}},{key:"getGroupLabelI18nTextByGroupTypeId",value:function(e){switch(e){case this.PAYMENT_PROCESSORS:return"edt_UI_setting_group_payment_processors";case this.PAYMENT_PROCESSORS_SANDBOX:return"edt_UI_setting_group_payment_processors_sandbox";case this.PAYMENT_SETTINGS:return"edt_UI_setting_group_payment_settings";default:return""}}},{key:"getGroupSortIndex",value:function(e){switch(e){case this.PAYMENT_SETTINGS:return 5;case this.PAYMENT_PROCESSORS:return 10;default:return 1e4}}},{key:"getGroupSettingTypeIds",value:function(e){var t=[];return c.a.getAllSettingTypeIds().forEach((function(n){c.a.getSettingClassByTypeId(n).getConfiguration().group===e&&t.push(n)})),t}}]),e}();l()(u,"PAYMENT_PROCESSORS","payment-processors"),l()(u,"PAYMENT_PROCESSORS_SANDBOX","payment-processors-sandbox"),l()(u,"PAYMENT_SETTINGS","payment-settings")},function(e,t,n){"use strict";n.d(t,"o",(function(){return s})),n.d(t,"s",(function(){return l})),n.d(t,"p",(function(){return c})),n.d(t,"i",(function(){return u})),n.d(t,"q",(function(){return d})),n.d(t,"r",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"e",(function(){return g})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return E})),n.d(t,"f",(function(){return y})),n.d(t,"j",(function(){return T})),n.d(t,"l",(function(){return v})),n.d(t,"k",(function(){return O})),n.d(t,"n",(function(){return b})),n.d(t,"b",(function(){return C})),n.d(t,"h",(function(){return I})),n.d(t,"m",(function(){return R}));var i=n(121),r=n(89),a=n(104),o=document.createElement("a"),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o.href=e,{protocol:o.protocol,hostname:o.hostname,port:o.port,pathname:o.pathname,search:o.search,hash:o.hash,host:o.host}},l=function(e){return"/"!==e.pathname.charAt(0)&&(e.pathname="/".concat(e.pathname)),"".concat(e.protocol||"","//").concat(e.hostname).concat(e.port?":".concat(e.port):"").concat(e.pathname||"/").concat(e.search||"").concat(e.hash||"")},c=function(e){for(var t,n,i,r={},a=String(e||"").split("&"),o=0,s=a.length;o<s;o++)""!==a[o]&&(-1===(i=a[o].indexOf("="))?(t=a[o],n=""):(t=a[o].substr(0,i),n=a[o].substr(i+1)),""!==t&&(r[t]=n));return r},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["p"],t=window.location.pathname,n=(window.location.search||"?").substr(1),i=t;if(n&&e){for(var r,o,s,l=[],c=n.split("&"),u={},d=0,p=c.length;d<p;d++)(s=c[d].indexOf("="))>-1?(r=c[d].substr(0,s),o=c[d].substr(s+1)):(r=c[d],o=""),u[r]=o;for(var h=0,_=e.length;h<_;h++)void 0!==u[e[h]]&&l.push("".concat(e[h],"=").concat(u[e[h]]));l.length&&(i="".concat(t,"?").concat(l.join("&")))}return Object(a.a)(i)},d=function(e){var t=/^(https?):\/\//;return t.test(e)&&(e=e.replace(t,"//")),e},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];window.location.href!==e?window.location.href=e:t&&window.location.reload()},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=e.includes("#")?e.indexOf("#"):e.length;return e.substr(t,e.length)},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=e.includes("?")?e.indexOf("?"):e.length;return e.substr(0,t)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=new i.a,n=_(e),r=new URL(e),a=new URLSearchParams(r.search),o=h(e);return a.has("openWixPicker")||(a.set("openWixPicker","1"),a.has("instance")||(a.set("instance",t.getCookie("wixParams_instance")),a.set("locale",t.getCookie("wixParams_locale")),a.set("origCompId",t.getCookie("wixParams_origCompId")),a.set("compId",t.getCookie("wixParams_compId")))),"".concat(n,"?").concat(a).concat(o)},m=function(e,t){return t&&t===r.a.YEARLY?"/index.php?p=myaccount_upgrade_step2&product=".concat(e,"&period=1"):t&&t===r.a.MONTHLY?"/index.php?p=myaccount_upgrade_step2&product=".concat(e,"&period=0"):"/index.php?p=myaccount_upgrade_step2&product=".concat(e)},f=function(e,t){return t&&t===r.a.YEARLY?"/index.php?p=myaccount_upgrade_step2&plan=".concat(e,"&skipSecondStep=true&period=1"):t&&t===r.a.MONTHLY?"/index.php?p=myaccount_upgrade_step2&plan=".concat(e,"&skipSecondStep=true&period=0"):"/index.php?p=myaccount_upgrade_step2&plan=".concat(e,"&skipSecondStep=true")},E=function(e,t){return"index.php?p=myaccount_upgrade_step2&product=".concat(e,"&mode=update&bundle=").concat(t)},y=function(){return"".concat(window.location.origin,"/index.php?p=myaccount&isClickFromSubmissionsLimitRibbon=").concat(T(),"&click_from=").concat(T(),"#account-details")},T=function(){return P("p")},v=function(){try{var e=(new i.a).getCookie("wixParams_instance"),t=null===e||void 0===e?void 0:e.substring(e.indexOf(".")+1);return JSON.parse(atob(t)).instanceId}catch(n){return""}},O=function(){var e,t=null===(e=window.BOOTSTRAP_DATA)||void 0===e?void 0:e.WIX_OAUTH_APP_ID;if(!t)return"";var n=v();return n?"https://www.wix.com/apps/upgrade/".concat(t,"?appInstanceId=").concat(n):""},b=function(){var e=O();if(!e)throw Error("Wix direct upgrade URL is invalid");window.open(e,"_blank")},C=function(){return"".concat(window.location.origin,"/facebookcanvas.php?tab=1")},I=function(){return P("id")},R=function(e){window.open(e,"_blank")},P=function(e){var t=new URLSearchParams(window.location.search);return t.has(e)?t.get(e):""}},function(e,t,n){"use strict";var i=n(55),r=n(43),a=n.n(r),o=n(112),s=n.n(o),l=n(22),c=n(608),u=n(622),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.a,t=arguments.length>1?arguments[1]:void 0,n=t.payload,r=t.type;s()(t,["payload","type"]);switch(r){case l.a.ENABLE_HOTSPOT:return Object(c.a)([].concat(a()(e),[n]));case l.a.DISABLE_HOTSPOT:var o=Object(u.a)(e,n);return a()(o);default:return a()(e)}},p=n(257),h=n(258),_=n(259),g=n(36),m=n.n(g),f=n(167),E=n(47),y=n(106),T=n(50),v=n(224),O=n(76),b=n(100),C=m.a.mark(P),I=m.a.mark(N),R=m.a.mark(A);function P(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(v.b)();case 3:return e=t.sent,t.next=6,Object(T.put)(Object(O.d)(e));case 6:t.next=14;break;case 8:return t.prev=8,t.t0=t.catch(0),console.error("Fetching the plan prices failed"),console.error(t.t0),t.next=14,Object(T.put)(Object(O.b)());case 14:case"end":return t.stop()}}),C,null,[[0,8]])}function N(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.takeLatest)(b.a.FETCH_PLAN_PRICES,P);case 2:case"end":return e.stop()}}),I)}function A(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.all)([N()]);case 2:case"end":return e.stop()}}),R)}var S=A,L=n(62),D=n(84),w=n(115),k=m.a.mark(V),M=m.a.mark(H),x=m.a.mark(G),U=m.a.mark(W),F=m.a.mark(j),B=m.a.mark(K),Y=m.a.mark(z);function V(e){var t,n;return m.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.prev=1,n=L.a.getInstance(),i.next=5,Object(T.call)([n,n.track],t.name,t.value,t.tags);case 5:i.next=9;break;case 7:i.prev=7,i.t0=i.catch(1);case 9:case"end":return i.stop()}}),k,null,[[1,7]])}function H(e){var t,n;return m.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.prev=1,n=D.a.getInstance(),i.next=5,Object(T.call)([n,n.triggerInterestInFeatureEvent],t.featureName);case 5:i.next=9;break;case 7:i.prev=7,i.t0=i.catch(1);case 9:case"end":return i.stop()}}),M,null,[[1,7]])}function G(e){var t,n;return m.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.prev=1,n=D.a.getInstance(),i.next=5,Object(T.call)([n,n.triggerEvent],t.customerEventName,t.details);case 5:i.next=9;break;case 7:i.prev=7,i.t0=i.catch(1);case 9:case"end":return i.stop()}}),x,null,[[1,7]])}function W(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(T.spawn)(V,e);case 2:case"end":return t.stop()}}),U)}function j(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(T.spawn)(H,e);case 2:case"end":return t.stop()}}),F)}function K(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(T.spawn)(G,e);case 2:case"end":return t.stop()}}),B)}function z(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.takeEvery)(w.a.TRACK,W);case 2:return e.next=4,Object(T.takeEvery)(w.a.TRACK_INTERESTED_IN_FEATURE,j);case 4:return e.next=6,Object(T.takeEvery)(w.a.TRACK_CUSTOMER_EVENT,K);case 6:case"end":return e.stop()}}),Y)}var X,Z=z;!function(e){e.RULES_SIDEBAR_BUTTON="rulesSidebarButton"}(X||(X={}));var q=n(2),J=n(610),Q=n(5),$=n.n(Q),ee=n(6),te=n.n(ee),ne=n(0),ie=n.n(ne),re=function(){function e(){$()(this,e)}return te()(e,null,[{key:"disableHotspot",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(e.isHotspotDisabled(t,n))return;var i=localStorage.getItem(e.localStorageKey),r=[];i&&(r=r.concat(JSON.parse(i))),r.push({name:t,extraParams:n}),localStorage.setItem(e.localStorageKey,JSON.stringify(r))}catch(a){}}},{key:"isHotspotDisabled",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var i=JSON.parse(localStorage.getItem(e.localStorageKey));return i.some((function(e){return e.name===t&&JSON.stringify(e.extraParams)==JSON.stringify(n)}))}catch(r){return!1}}}]),e}();ie()(re,"localStorageKey","123dismissedHotspots");var ae=n(32),oe=m.a.mark(ce),se=m.a.mark(ue),le=m.a.mark(de);function ce(e){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[q.a.CONTAINER_TYPE_LIKERT_WRAPPER,q.a.CONTROL_TYPE_ADDRESS,q.a.CONTROL_TYPE_CHECKBOX,q.a.CONTROL_TYPE_DATE,q.a.CONTROL_TYPE_DROPDOWN,q.a.CONTROL_TYPE_EMAIL,q.a.CONTROL_TYPE_FILE,q.a.CONTROL_TYPE_HEADING,q.a.CONTROL_TYPE_HTML_BLOCK,q.a.CONTROL_TYPE_IMAGE,q.a.CONTROL_TYPE_MAP,q.a.CONTROL_TYPE_NAME,q.a.CONTROL_TYPE_NUMBER,q.a.CONTROL_TYPE_PHONE,q.a.CONTROL_TYPE_RADIO,q.a.CONTROL_TYPE_TEXT,q.a.CONTROL_TYPE_TEXTAREA,q.a.CONTROL_TYPE_TIME,q.a.CONTROL_TYPE_WEBSITE,q.a.CONTROL_TYPE_WIDGET_VIDEO,q.a.CONTROL_TYPE_WIDGET_FACEBOOK,q.a.CONTROL_TYPE_WIDGET_PDF,q.a.CONTROL_TYPE_TERMS_OF_SERVICE,q.a.CONTROL_TYPE_SIGNATURE,q.a.CONTROL_TYPE_STAR_RATING],e.next=4,Object(T.select)(i.i);case 4:if(n=e.sent,!(Object(J.a)(n,(function(e){return t.includes(e.type)})).length>4)){e.next=9;break}return e.next=9,Object(T.put)(Object(l.e)(X.RULES_SIDEBAR_BUTTON));case 9:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),oe,null,[[0,12]])}function ue(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"options.hidden"!==e.payload.propertyName){t.next=4;break}return t.next=4,Object(T.put)(Object(l.e)(X.RULES_SIDEBAR_BUTTON));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),se,null,[[0,6]])}function de(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(T.call)(ae.h);case 2:if(e=t.sent,!re.isHotspotDisabled(X.RULES_SIDEBAR_BUTTON,{formId:e})){t.next=7;break}return t.next=6,Object(T.cancelled)();case 6:return t.abrupt("return");case 7:return t.next=9,Object(T.takeLatest)(l.a.APPEND_CONTROL,ce);case 9:return t.next=11,Object(T.takeLatest)(l.a.UPDATE_CONTROL_PROPERTY,ue);case 11:case"end":return t.stop()}}),le)}var pe=de,he=m.a.mark(_e);function _e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.all)([pe()]);case 2:case"end":return e.stop()}}),he)}var ge=_e,me=m.a.mark(be),fe=m.a.mark(Ce),Ee=m.a.mark(Ie),ye=m.a.mark(Re),Te=m.a.mark(Pe),ve=m.a.mark(Ne),Oe=m.a.mark(Ae);function be(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=E.a.getInstance(),t.next=4,e.getCurrentIdentity();case 4:return t.next=6,Object(T.put)(Object(l.m)(!1));case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Error init builder"),console.error(t.t0);case 12:case"end":return t.stop()}}),me,null,[[0,8]])}function Ce(e){var t,n;return m.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t=Object(y.b)(e.payload),n=Object(y.a)(e.payload),i.next=5,Object(T.put)(Object(l.f)(n));case 5:return i.next=7,Object(T.put)(Object(l.q)(t.name));case 7:return i.next=9,Object(T.put)(Object(l.g)(t.options));case 9:i.next=15;break;case 11:i.prev=11,i.t0=i.catch(0),console.error("Error deserialising builder data"),console.error(i.t0);case 15:case"end":return i.stop()}}),fe,null,[[0,11]])}function Ie(e){var t,n,i;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(T.call)(f.a,e.payload);case 3:return t=r.sent,r.next=6,Object(T.call)(f.b,e.payload);case 6:return n=r.sent,i={masterFont:t,masterTextColor:n},r.next=10,Object(T.put)(Object(l.g)(i));case 10:r.next=16;break;case 12:r.prev=12,r.t0=r.catch(0),console.error("Error deriving form options"),console.error(r.t0);case 16:case"end":return r.stop()}}),Ee,null,[[0,12]])}function Re(e){var t,n,r,a,o;return m.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,t=e.payload,s.next=4,Object(T.select)(Object(i.k)("masterTextColor"));case 4:return n=s.sent,s.next=7,Object(T.select)(Object(i.k)("masterFont"));case 7:if(r=s.sent,a=Object(f.a)(t),o=Object(f.b)(t),n===o){s.next=13;break}return s.next=13,Object(T.put)(Object(l.y)("options.masterTextColor",o));case 13:if(r===a){s.next=16;break}return s.next=16,Object(T.put)(Object(l.y)("options.masterFont",a));case 16:s.next=22;break;case 18:s.prev=18,s.t0=s.catch(0),console.error("Error recomputing master form options"),console.error(s.t0);case 22:case"end":return s.stop()}}),ye,null,[[0,18]])}function Pe(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.takeLatest)(l.a.INIT_BUILDER,be);case 2:return e.next=4,Object(T.takeLatest)(l.a.INIT_SERIALISED_FORM_DATA,Ce);case 4:return e.next=6,Object(T.takeLatest)(l.a.INIT_THEME_PROPERTIES,Ie);case 6:case"end":return e.stop()}}),Te)}function Ne(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.takeLatest)(l.a.UPDATE_THEME_PROPERTY,Re);case 2:case"end":return e.stop()}}),ve)}function Ae(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.all)([Pe(),Ne(),S(),Z(),ge()]);case 2:case"end":return e.stop()}}),Oe)}var Se=Ae,Le=n(400),De=n(238),we=n(392),ke=n.n(we);n.d(t,"c",(function(){return Me})),n.d(t,"a",(function(){return xe})),n.d(t,"b",(function(){return Ue}));var Me=function(){if(!window.builderStore){var e=Object(De.combineReducers)({navigation:i.d,form:i.c,notifications:i.g,action:i.f,activePaywall:h.a,alerts:_.a,emailValidationModal:p.a,theme:i.b,activeHotspots:d}),t=ke()(),n=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||De.compose;window.builderStore=Object(De.createStore)(e,n(Object(De.applyMiddleware)(t))),t.run(Se)}return window.builderStore},xe=function(){return Me().dispatch},Ue=function(e){var t=Me(),n=Object(Le.a)(t.getState());return e.call(null,n)}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n(20);var i,r,a,o,s,l=n(5),c=n.n(l),u=n(6),d=n.n(u),p=n(0),h=n.n(p);!function(e){e[e.ANDROID=0]="ANDROID",e[e.IOS=1]="IOS",e[e.MAC=2]="MAC",e[e.WINDOWS_MOBILE=3]="WINDOWS_MOBILE",e[e.WINDOWS=4]="WINDOWS",e[e.LINUX=5]="LINUX",e[e.UNIX=6]="UNIX",e[e.OTHER=7]="OTHER"}(i||(i={})),function(e){e[e.WIN_95=0]="WIN_95",e[e.WIN_98=1]="WIN_98",e[e.WIN_2000=2]="WIN_2000",e[e.WIN_NT=3]="WIN_NT",e[e.WIN_ME=4]="WIN_ME",e[e.WIN_XP=5]="WIN_XP",e[e.WIN_SERVER_2003=6]="WIN_SERVER_2003",e[e.WIN_VISTA=7]="WIN_VISTA",e[e.WIN_7=8]="WIN_7",e[e.WIN_8=9]="WIN_8",e[e.WIN_10=10]="WIN_10",e[e.WIN_OTHER=11]="WIN_OTHER",e[e.UNKNOWN=12]="UNKNOWN"}(r||(r={})),function(e){e[e.CHROME=0]="CHROME",e[e.FIREFOX=1]="FIREFOX",e[e.MSIE=2]="MSIE",e[e.EDGE=3]="EDGE",e[e.SAFARI=4]="SAFARI",e[e.OPERA=5]="OPERA",e[e.UNKNOWN=6]="UNKNOWN"}(a||(a={})),function(e){e[e.DESKTOP=0]="DESKTOP",e[e.MOBILE=1]="MOBILE",e[e.SMART_TV=2]="SMART_TV"}(o||(o={})),function(e){e[e.E_NONE=0]="E_NONE",e[e.E_SYNTAX_ERROR=1]="E_SYNTAX_ERROR",e[e.E_BAD_OS=2]="E_BAD_OS",e[e.E_MOBILE_APP=3]="E_MOBILE_APP",e[e.E_DESKTOP_APP=4]="E_DESKTOP_APP",e[e.E_BAD_CPU_CLASS=5]="E_BAD_CPU_CLASS",e[e.E_BROWSER_VERSION=6]="E_BROWSER_VERSION",e[e.E_BROWSER_TYPE=7]="E_BROWSER_TYPE",e[e.E_API_MISSING=8]="E_API_MISSING",e[e.E_UNKNOWN_ERROR=9]="E_UNKNOWN_ERROR"}(s||(s={}));var _=function(){function e(){c()(this,e)}return d()(e,null,[{key:"winVersionCompare",value:function(t,n){var i=e.WIN_VERSIONS_RELEASE_ORDER.indexOf(t);return e.WIN_VERSIONS_RELEASE_ORDER.indexOf(n)-i}},{key:"isTouchDevice",value:function(){return!0}},{key:"explainMissingApis",value:function(t){if(!t||!t.length)return"An error occured while detecting your browser capabilities";var n=[],i=0,r=t.length;for(i=0;i<r;i++)e.API_NAMES[t[i]]?n.push('"'.concat(t[i].toUpperCase(),'" (').concat(e.API_NAMES[t[i]],")")):n.push('"'.concat(t[i].toUpperCase(),'"'));return n.join(" or ")}},{key:"meetsRequirements",value:function(t){var n=/^(\*|win((95|98|2k|nt4|me|xp|2k3|vista|7|8|10|other)(\+)?)?|android|ios|mac|winmobile|linux|unix|other|\*) (32|64|\*) (desktop|mobile|\*) (chrome|firefox|msie|edge|opera|safari|other|\*) ([\d\.]+(\+)?|\*)( apis\=([a-z\_\,\|\d]+))?$/i.exec(String(t||""));if(!n)return"E_SYNTAX_ERROR: Invalid requirement: ".concat(JSON.stringify(t));var i=n[1],r=~~n[5],a=n[6],o=n[7],s=parseFloat(n[8])||-1,l=!!n[4],c=(l&&i.substr(0,i.length-1),n[8]&&n[8].match(/\+$/)?"gte":"eq"),u=n[11]?String(n[11]).split(","):[];if(!(n=/^(win((95|98|2k|nt4|me|xp|2k3|vista|7|8|10|other)(\+)?)?|android|ios|mac|winmobile|linux|unix|other) (32|64|\*) (desktop|mobile) (chrome|firefox|msie|edge|opera|safari|other) (.+) apis\=([a-z\_\,\d]+)$/i.exec(e.toString)))return"E_SYNTAX_ERROR: Invalid browser information: ".concat(JSON.stringify(e.toString));var d,p,h,_,g,m,f=n[1],E=~~n[5],y=n[6],T=n[7],v=parseFloat(n[8]),O=/^win/.test(f)&&"mobile"!=y,b=n[9]?String(n[9]).split(","):null;if("*"!=i){if(l&&!O)return"E_BAD_OS: Sorry, you need Windows in order to enjoy this application";if(l){if(i=i.substr(0,i.length-1),e.winVersionCompare(i,f)<0)return"E_BAD_OS:".concat(i,": Sorry, you need at least ").concat(e.WIN_VERSIONS_NAMES[i]||"an Unknown Windows (".concat(i,") version"),", but you have ").concat(e.WIN_VERSIONS_NAMES[f]||"an Unknown Windows (".concat(f,") version")," installed on your PC")}else if(i!=f)switch(i){case"win95":case"win98":case"win2k":case"winnt4":case"winme":case"winxp":case"win2k3":case"winvista":case"win7":case"win8":case"win10":case"winother":return"E_BAD_OS: This application requires the '".concat(e.WIN_VERSIONS_NAMES[f],"' operating system in order to run properly.");case"android":return"E_BAD_OS: This applicatoin requires the Android operating system in order to run properly.";case"mac":return"E_BAD_OS: This application requires the Mac OS operating system in order to run properly.";case"ios":return"E_BAD_OS: This application requires the IOS operating system in order to run properly.";case"winmobile":return"E_BAD_OS: This application requires the Windows Mobile operating system in order to run properly.";case"linux":return"E_BAD_OS: This application requires the Linux operating system in order to run properly";case"unix":return"E_BAD_OS: This application requires a Unix operating system in order to run properly";case"other":default:return"E_BAD_OS: Your operating system is not compatible with this application"}}if(0!=r&&E!=r)return"E_BAD_CPU_CLASS: This application requires a ".concat(String(r),"bit CPU in order to run properly, and we detected that you have a ").concat(String(E),"bit CPU");if("*"!=o&&T!=o)return"E_BAD_BROWSER: Sorry, you need a ".concat(e.BROWSER_NAMES[o]||"Special"," web browser in order to run this application, but we detected that you have ").concat(e.BROWSER_NAMES[T]||"Special"," web browser");if("*"!=a&&y!=a)switch(a){case"mobile":return"E_MOBILE_APP: This application is not intended to be used on desktop computers. Please try using a mobile device";case"desktop":return"E_DESKTOP_APP: This application is not intended to be used on mobile devices. Please try using a desktop computer or a laptop"}if(s>-1&&v<s&&"gte"==c)return"E_BROWSER_VERSION: You need at least ".concat(e.BROWSER_NAMES[T]||"Special"," web browser version ").concat(s.toFixed(2)," in order to run this application, but we detected that you have a lower version (").concat(v.toFixed(2),")");if(s>-1&&~~v!=~~s&&"eq"==c)return"E_BROWSER_VERSION: You need the ".concat(e.BROWSER_NAMES[T]||"Special"," web browser version ").concat(~~s," in order to run this application, but we detected that you have a different version (").concat(~~v,"), which is ").concat(v>s?"greater":"lower"," that the designed browser version of this application");if(u&&u.length)for(d=0,h=u.length;d<h;d++)if(_=(g=u[d].split("|")).length){for(m=!1,p=0;p<_;p++)if(b.indexOf(g[p])>-1){m=!0;break}if(!m)return"E_API_MISSING: Some plugins, browser capabilities or extensions, were not detected: ".concat(e.explainMissingApis(g))}return""}},{key:"getRequirementErrorCode",value:function(e){if(""==e)return s.E_NONE;var t=/^([A-Z\d\_]+)\:/.exec(e);if(!t)return s.E_NONE;switch(t[1]){case"E_SYNTAX_ERROR":return s.E_SYNTAX_ERROR;case"E_BAD_OS":return s.E_BAD_OS;case"E_MOBILE_APP":return s.E_MOBILE_APP;case"E_DESKTOP_APP":return s.E_DESKTOP_APP;case"E_BAD_CPU_CLASS":return s.E_BAD_CPU_CLASS;case"E_BROWSER_VERSION":return s.E_BROWSER_VERSION;case"E_BROWSER_TYPE":return s.E_BROWSER_TYPE;case"E_API_MISSING":return s.E_API_MISSING;default:return s.E_UNKNOWN_ERROR}}},{key:"isMobileDefaultBrowser",value:function(){return""!=e.meetsRequirements("android * mobile chrome 42+")&&""==e.meetsRequirements("android * mobile chrome *")}},{key:"isMobile",value:function(){return""===e.meetsRequirements("* * mobile * *")}},{key:"isIOS",value:function(){return""===e.meetsRequirements("* * mobile safari *")}},{key:"isMAC",value:function(){return""===e.meetsRequirements("mac * desktop safari *")}},{key:"isFirefox",value:function(){return""===e.meetsRequirements("* * firefox * *")}},{key:"isIE",value:function(){return!!window.MSInputMethodContext&&!!document.documentMode}},{key:"isIPad",get:function(){return!!navigator.userAgent.match(/iPad/i)}},{key:"isIPod",get:function(){return!!navigator.userAgent.match(/iPod/i)}},{key:"isIPhone",get:function(){return!!navigator.userAgent.match(/iPhone/i)}},{key:"isAndroid",get:function(){return!!navigator.userAgent.match(/Android/i)}},{key:"isWindowsPhone",get:function(){return!!navigator.userAgent.match(/(Windows (Phone )?8.1|Windows NT 6.3|Windows Phone [\d\.]+)/i)&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1}},{key:"isChrome",get:function(){return!!window.chrome&&/google/i.test(navigator.vendor)}},{key:"isInternetExplorer",get:function(){return"Microsoft Internet Explorer"==navigator.appName&&!!/MSIE([0-9]{1,}[\.0-9]{0,})/.test(navigator.userAgent)}},{key:"cpuClass",get:function(){var t=navigator.userAgent,n=0,i=e.CPU_64_CLASSES.length;for(n=0;n<i;n++)if(t.indexOf(e.CPU_64_CLASSES[n])>-1)return 64;return 32}},{key:"operatingSystem",get:function(){return e.isWindowsPhone?i.WINDOWS_MOBILE:e.isAndroid?i.ANDROID:e.isIPad||e.isIPhone||e.isIPod?i.IOS:navigator.userAgent.indexOf("Mac")>-1?i.MAC:navigator.userAgent.indexOf("Linux")>-1?i.LINUX:navigator.userAgent.indexOf("Windows")?i.WINDOWS:navigator.userAgent.indexOf("X11")>-1?i.UNIX:i.OTHER}},{key:"operatingSystemVersion",get:function(){if(e.operatingSystem!=i.WINDOWS)return r.UNKNOWN;switch(!0){case/(Windows 10\.0|Windows NT 10\.0)/.test(navigator.userAgent):return r.WIN_10;case/(Windows 8|Windows NT 6\.(2|3))/.test(navigator.userAgent):return r.WIN_8;case/(Windows 7|Windows NT 6\.1)/.test(navigator.userAgent):return r.WIN_7;case/Windows NT 6\.0/.test(navigator.userAgent):return r.WIN_VISTA;case/Windows NT 5\.2/.test(navigator.userAgent):return r.WIN_SERVER_2003;case/(Windows NT 5\.1|Windows XP)/.test(navigator.userAgent):return r.WIN_XP;case/(Windows NT 5\.0|Windows 2000)/.test(navigator.userAgent):return r.WIN_2000;case/(Win 9x 4\.90|Windows ME)/.test(navigator.userAgent):return r.WIN_ME;case/(Windows 98|Win98)/.test(navigator.userAgent):return r.WIN_98;case/(Windows 95|Win95|Windows_95)/.test(navigator.userAgent):return r.WIN_95;case/(Windows NT 4\.0|WinNT4\.0|WinNT|Windows NT)/.test(navigator.userAgent):return r.WIN_NT;default:return r.WIN_OTHER}}},{key:"browserType",get:function(){switch(!0){case!!navigator.userAgent.match(new RegExp("[\\s]+Edge\\/[\\d]+","i")):return a.EDGE;case navigator.userAgent.indexOf("Opera")>-1:case navigator.userAgent.indexOf("OPR")>-1:return a.OPERA;case navigator.userAgent.indexOf("MSIE")>-1:return a.MSIE;case navigator.userAgent.indexOf("Chrome")>-1:return a.CHROME;case navigator.userAgent.indexOf("Safari")>-1:return a.SAFARI;case navigator.userAgent.indexOf("Firefox")>-1:return a.FIREFOX;case navigator.userAgent.indexOf("Trident/")>-1:return a.MSIE;default:return a.UNKNOWN}}},{key:"browserVersion",get:function(){navigator.appVersion;var e,t,n,i=navigator.userAgent,r="".concat(parseFloat(navigator.appVersion));return(e=i.indexOf("Edge/"))>-1?r=i.substr(e+5):(e=i.indexOf("Opera"))>-1?(r=i.substring(e+6),-1!=(e=i.indexOf("Version"))&&(r=i.substring(e+8))):-1!=(e=i.indexOf("OPR"))?r=i.substring(e+4):-1!=(e=i.indexOf("MSIE"))?r=i.substring(e+5):-1!=(e=i.indexOf("Chrome"))?r=i.substring(e+7):-1!=(e=i.indexOf("Safari"))?(r=i.substring(e+7),-1!=(e=i.indexOf("Version"))&&(r=i.substring(e+8))):-1!=(e=i.indexOf("Firefox"))?r=i.substring(e+8):-1!=i.indexOf("Trident/")?r=i.substring(i.indexOf("rv:")+3):i.lastIndexOf(" ")+1<(e=i.lastIndexOf("/"))&&(r=i.substring(e+1)),-1!=(t=r.indexOf(";"))&&(r=r.substring(0,t)),-1!=(t=r.indexOf(" "))&&(r=r.substring(0,t)),-1!=(t=r.indexOf(")"))&&(r=r.substring(0,t)),n=parseInt("".concat(r),10),isNaN(n)&&(r="".concat(parseFloat(navigator.appVersion))),parseFloat(r)}},{key:"browserTechnologies",get:function(){var t=[],n=0,i=e.APIS_LIST.length;for(n=0;n<i;n++)try{(window[e.APIS_LIST[n]]||window["moz".concat(e.APIS_LIST[n])]||window["webkit".concat(e.APIS_LIST[n])]||window["ms".concat(e.APIS_LIST[n])]||window["o".concat(e.APIS_LIST[n])])&&t.push(e.APIS_LIST[n].toLowerCase())}catch(l){}var r=navigator.plugins||[],a=!1,o=0,s=0;for(n=0,i=r.length;n<i;n++)if(r[n].description.toString().toLowerCase().indexOf("flash")>-1)a=!0;else if("undefined"!=typeof r[n]["application/x-nmpcbrowserplugin"])t.push("nagra");else if(r[n].length)for(o=0,s=r[n].length;o<s;o++)if("application/vnd.rcsrds.secureplayer.pepper.plugin"==r[n][o].type){t.push("nagrapepper");break}return a&&t.push("flash"),t.join(",")}},{key:"toString",get:function(){if(void 0!==e.CACHED_VERSION)return e.CACHED_VERSION;var t="";switch(e.operatingSystemVersion){case r.WIN_95:t+="win95";break;case r.WIN_98:t+="win98";break;case r.WIN_2000:t+="win2k";break;case r.WIN_NT:t+="winnt4";break;case r.WIN_ME:t+="winme";break;case r.WIN_XP:t+="winxp";break;case r.WIN_SERVER_2003:t+="win2k3";break;case r.WIN_VISTA:t+="winvista";break;case r.WIN_7:t+="win7";break;case r.WIN_8:t+="win8";break;case r.WIN_10:t+="win10";break;case r.WIN_OTHER:t+="winother";break;case r.UNKNOWN:switch(e.operatingSystem){case i.ANDROID:t+="android";break;case i.IOS:t+="ios";break;case i.MAC:t+="mac";break;case i.WINDOWS_MOBILE:t+="winmobile";break;case i.WINDOWS:t+="winother";break;case i.LINUX:t+="linux";break;case i.UNIX:t+="unix";break;case i.OTHER:t+="other";break;default:t+="unknown"}break;default:t+="unknown"}switch(e.cpuClass){case 32:t+=" 32";break;case 64:t+=" 64"}switch(/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(navigator.appVersion)?t+=" mobile":t+=" desktop",e.browserType){case a.CHROME:t+=" chrome";break;case a.FIREFOX:t+=" firefox";break;case a.MSIE:t+=" msie";break;case a.EDGE:t+=" edge";break;case a.SAFARI:t+=" safari";break;case a.OPERA:t+=" opera";break;case a.UNKNOWN:t+=" other";break;default:t+=" other"}return e.CACHED_VERSION="".concat(t," ").concat(e.browserVersion.toFixed(2).replace(/[0]+$/g,"").replace(/\.$/,"")," apis=").concat(e.browserTechnologies)}}]),e}();h()(_,"CPU_64_CLASSES",["x86_64","x86-64","Win64","x64;","amd64","amd64","AMD64","WOW64","x64_64","ia64","sparc64","ppc64","IRIX64"]),h()(_,"WIN_VERSIONS_NAMES",{win95:"Windows 95",win98:"Windows 98",win2k:"Windows 2000",winnt4:"Windows NT 4.0",winme:"Windows Millenium",winxp:"Windows XP",win2k3:"Windows 2003 Server",winvista:"Windows Vista",win7:"Windows 7",win8:"Windows 8",win10:"Windows 10",winother:"Windows > 10",win:"Windows"}),h()(_,"WIN_VERSIONS_RELEASE_ORDER",["win","win95","win98","winnt4","winme","win2k","winxp","win2k3","winvista","win7","win8","win10","winother"]),h()(_,"BROWSER_NAMES",{chrome:"Google Chrome",firefox:"Mozilla Firefox",msie:"Microsoft Internet Explorer",edge:"Microsoft Edge",opera:"Opera",safari:"Safari",other:"Non Standard"}),h()(_,"APIS_LIST",["ArrayBuffer","Audio","localStorage","sessionStorage","DataView","Crypto","CryptoKey","File","FileReader","Blob","Int16Array","Int32Array","Int8Array","HTMLCanvasElement","HTMLVideoElement","HTMLAudioElement","HTMLShadowElement","CanvasRenderingContext2D","URL","MediaSource","MediaStream","AudioBuffer","Promise","Worker","postMessage","XMLHttpRequest"]),h()(_,"API_NAMES",{arraybuffer:"HTML5 ArrayBuffer API ( fixed length, raw binary data buffer )",audio:"HTML5 Audio element API ( support for playing audio )",localStorage:"HTML5 Local Storage API ( support for storing data on your browser )",sessionStorage:"HTML5 Session Storage API ( support for storing data on your browser )",dataview:"HTML5 DataView API ( low-level interface for reading data from and writing it to an ArrayBuffer )",crypto:"HTML5 Crpytography functions",cryptokey:"HTML5 Cryptography functions",file:"HTML5 File API ( provides information about files and allows to access their contents )",filereader:"HTML5 FileReader API ( lets web applications asynchronously read the contents of files / raw data buffers stored on your device or computer, using File or Blob objects to specify the file or data to read )",blob:"HTML5 Blob API ( a file-like object of immutable, raw data )",int16array:"HTML5 Int16Array API ( an array of twos-complement 16-bit signed integers in the platform byte order )",int8array:"HTML5 Int8Array API ( an array of twos-complement 8-bit signed integers )",int32array:"HTML5 Int32Array API ( an array of twos-complement 32-bit signed integers )",htmlcanvaselement:"HTML5 Canvas API ( allows application to draw 2D or 3D graphics using accelerated techniques / and your video card's hardware )",htmlvideoelement:"HTML5 Video Element API ( allows playing videos on your web browser, without the need of using external plugins )",htmlaudioelement:"HTML5 Audio Element API ( allows playing sounds on your web browser, without the need of using external plugins )",htmlshadowelement:"HTML5 Shadow DOM API ( provides encapsulation for the JavaScript, CSS and HTML support for web developers, in order to create high speed web pages )",canvasrenderingcontext2d:"HTML5 Canvas element 2D drawing routines API",url:"HTML5 URL API ( allows functions related with URL's and in-memory URL's for your web browser, including Video Streaming and Audio Streaming related ones )",mediasource:"HTLM5 MediaSource API ( technology that provides video and audio streaming for your web browser )",audiobuffer:"HTML5 AudioBuffer API ( technology that provides audio streaming and buffer for your web browser )",flash:"Adobe Flash plugin",nagra:"Encrypted video streaming support Player",nagrapepper:"Encrypted video streaming support Player Google Chrome browser extension",promise:"Asynchronous data types, which make your browser run smoothly",worker:"HTML5 Web Worker API",postmessage:"A technology used for inter-frame communication",xmlhttprequest:"HTML async transport inside browser (AJAX)"}),h()(_,"CACHED_VERSION",void 0)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(20),r=n.n(i),a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(0),u=n.n(c),d=n(1),p=n(64),h=function(){function e(){o()(this,e)}return l()(e,[{key:"clearElementDOMNodeRoot",value:function(e){for(var t=e.getRootNode();t.childNodes.length;)t.removeChild(t.firstChild)}},{key:"getSizeAttributeValue",value:function(e){switch(e){case d.I.HALF:return"half";case d.I.QUARTER:return"quarter";case d.I.THIRD:return"third";case d.I.FILL:return"fill";case d.I.ONE_UNIT:return"1u";case d.I.TWO_UNITS:return"2u";case d.I.THREE_UNITS:return"3u";case d.I.FOUR_UNITS:return"4u";case null:return null;case d.I.FULL:default:return"full"}}},{key:"getSizeInUnits",value:function(e,t){switch(t){case d.I.FULL:return~~e;case d.I.HALF:return~~(e/2)||1;case d.I.QUARTER:return~~(e/4)||1;case d.I.THIRD:return~~(e/3)||1;case d.I.ONE_UNIT:return Math.min(e,1);case d.I.TWO_UNITS:return Math.min(e,2);case d.I.THREE_UNITS:return Math.min(e,3);case d.I.FOUR_UNITS:return Math.min(e,4);default:return 0}}},{key:"getElementLayoutSize",value:function(e){var t=~~e.getColspan(),n={labelWidthInUnits:0,inputWidthInUnits:t},i=e.hasProperty("label.widthInUnits")?e.getProperty("label.widthInUnits"):null;return n.labelWidthInUnits=null!==i&&i>0?i:e.getForm().getProperty("options.labelWidthInUnits"),n.labelWidthInUnits>t&&(n.labelWidthInUnits=t),n.inputWidthInUnits-=n.labelWidthInUnits,0===n.inputWidthInUnits&&(n.inputWidthInUnits=1,n.labelWidthInUnits--),n.labelWidthInUnits+n.inputWidthInUnits>t&&(n.inputWidthInUnits>=t&&(n.inputWidthInUnits=t-1),n.labelWidthInUnits=t-n.inputWidthInUnits),n}},{key:"isLabelSuppressed",value:function(e){return e.hasProperty("label.isRemoved")&&e.getProperty("label.isRemoved")}}],[{key:"setLabelCompactFieldState",value:function(t,n,i,r){if(null!==i&&1===i.length&&i[0]&&i[0].inputs&&1===i[0].inputs.length&&i[0].inputs[0]&&i[0].inputs[0].input){var a=e.castToDOMElement(i[0].inputs[0].input);t?a.setAttribute("placeholder",r?"":String(n||"")):a.removeAttribute("placeholder")}}},{key:"castToDOMElement",value:function(e){return e&&r()(e,p.a)?e.getRootNode():e}}]),e}();u()(h,"LABEL_PLACEMENT_TOP_RENDERERS",[d.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD,d.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD,d.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD,d.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL])},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(20),r=n.n(i),a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(3),u=n.n(c),d=n(7),p=n.n(d),h=n(8),_=n.n(h),g=n(4),m=n.n(g),f=n(0),E=n.n(f),y=n(29),T=n(13),v=n(42);function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _()(this,n)}}var b=function(e){p()(n,e);var t=O(n);function n(e,i,r,a,s){var l;return o()(this,n),l=t.call(this),E()(u()(l),"runtime",void 0),E()(u()(l),"properties",void 0),E()(u()(l),"propertyDescriptors",void 0),E()(u()(l),"configuration",void 0),E()(u()(l),"document",void 0),E()(u()(l),"typescriptInterfaceName",void 0),E()(u()(l),"errors",void 0),l.properties=T.a.clone(e),l.configuration=i,l.typescriptInterfaceName=r,l.document=a,l.runtime=s,l.propertyDescriptors=l.runtime.getTypeDescriptor(l.typescriptInterfaceName).properties,n.translationService=new v.a,l}return l()(n,[{key:"getConfiguration",value:function(){return this.configuration}},{key:"hasProperty",value:function(e){return void 0!==this.properties[e]}},{key:"getProperty",value:function(e){if(!this.hasProperty(e))throw new Error("Property ".concat(JSON.stringify(e)," does not exist!"));return this.properties[e]}},{key:"setProperty",value:function(e,t){if("string"!==typeof e||!e)throw new Error("Invalid argument: propertyFQN: string not empty expected!");if(void 0===this.propertyDescriptors[e])throw new Error("Property ".concat(JSON.stringify(e)," does not exist!"));var n=this.properties[e];t!==n&&(this.properties[e]=t,this.trigger("property-change",e,t,n,this),this.document.trigger("change"))}},{key:"enumerateProperties",value:function(){var e=[];for(var t in this.propertyDescriptors)this.propertyDescriptors.propertyIsEnumerable(t)&&e.push({name:t,type:this.propertyDescriptors[t].type,optional:this.propertyDescriptors[t].optional,value:void 0===this.properties[t]?null:this.properties[t]});return e}},{key:"hasErrors",value:function(){return!!this.errors&&!!this.errors.length}},{key:"withError",value:function(e){return this.errors=void 0===this.errors?[]:this.errors,this.errors.push(e),this.document&&(this.document.trigger("change"),this.document.trigger("errors-changed",this)),this}},{key:"withoutError",value:function(e){if(void 0!==this.errors){for(var t=!1,n=this.errors.length-1;n>-1;n--)this.errors[n].code===e&&(this.errors.splice(n,1),t=!0);this.errors.length||(this.errors=void 0),t&&this.document&&(this.document.trigger("change"),this.document.trigger("errors-changed",this))}return this}},{key:"serialize",value:function(){return[this.getTypeId(),this.properties,this.errors||null]}},{key:"getForm",value:function(){return this.document}},{key:"isVisible",value:function(){return this.configuration.visible}},{key:"getErrors",value:function(){return this.errors||null}},{key:"withErrors",value:function(e){var t;if(null!==e&&!r()(e,Array))throw new Error("Invalid argument: array expected!");if(e&&(t=e.length)){for(var n,i=[],a=0;a<t;a++){if(!e[a]||"number"!==typeof e[a].code||"string"!==typeof e[a].message)throw new Error("Invalid argument: errors: ISettingError[] expected!");if(n={code:~~e[a].code,message:e[a].message,isHTML:!!e[a].isHTML},void 0!==e[a].propertyName&&null!==e[a].propertyName){if("string"!==typeof e[a].propertyName)throw new Error("Invalid argument!");n.propertyName=e[a].propertyName}i.push(n)}if(!this.errors&&!i.length)return;this.errors=i.length?i:void 0,this.document&&(this.document.trigger("change"),this.document.trigger("errors-changed",this))}else this.errors=void 0,this.document&&(this.document.trigger("change"),this.document.trigger("errors-changed",this));return this}}]),n}(y.a);E()(b,"translationService",void 0)},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=function(){function e(){r()(this,e)}return o()(e,null,[{key:"addVirtualProperty",value:function(e,t,n,i,r){if("string"!==typeof e||""===e)throw new Error("Invalid argument: string expected!");var a=e.split("."),o=a[0]||"",s=a[1]||"";if(a.length>2||""===o||""===s)throw new Error('Invalid argument: propertyFQN must be in format "attributeName.propertyName"');if("string"!==typeof t||""===t)throw new Error("Invalid argument: string expected!");this.properties.push({propertyName:e,elementList:n,runtimePropertyTypeNameHint:t,get:i,set:r})}},{key:"isVirtualProperty",value:function(e,t){if(e&&t)for(var n=t.getTypeId(),i=0,r=this.properties.length;i<r;i++)if(this.properties[i].propertyName===e){if(null===this.properties[i].elementList||this.properties[i].elementList.indexOf(n)>-1)return!0;break}return!1}},{key:"isReadableProperty",value:function(e,t){if(e&&t)for(var n=t.getTypeId(),i=0,r=this.properties.length;i<r;i++)if(this.properties[i].propertyName===e&&(null===this.properties[i].elementList||this.properties[i].elementList.indexOf(n)>-1))return!!this.properties[i].get;return!1}},{key:"isWritableProperty",value:function(e,t){if(e&&t)for(var n=t.getTypeId(),i=0,r=this.properties.length;i<r;i++)if(this.properties[i].propertyName===e&&(null===this.properties[i].elementList||this.properties[i].elementList.indexOf(n)>-1))return!!this.properties[i].set;return!1}},{key:"getPropertyReadCallback",value:function(e,t){if(e&&t)for(var n=t.getTypeId(),i=0,r=this.properties.length;i<r;i++)if(this.properties[i].propertyName===e&&(null===this.properties[i].elementList||this.properties[i].elementList.indexOf(n)>-1))return this.properties[i].get||null;return null}},{key:"getPropertyWriteCallback",value:function(e,t){if(e&&t)for(var n=t.getTypeId(),i=0,r=this.properties.length;i<r;i++)if(this.properties[i].propertyName===e&&(null===this.properties[i].elementList||this.properties[i].elementList.indexOf(n)>-1))return this.properties[i].set||null;return null}},{key:"enumerateVirtualProperties",value:function(e){if(!e)return null;for(var t=e.getTypeId(),n=[],i=0,r=this.properties.length;i<r;i++)(null===this.properties[i].elementList||this.properties[i].elementList.indexOf(t)>-1)&&n.push({name:this.properties[i].propertyName,type:this.properties[i].runtimePropertyTypeNameHint,optional:!0,virtual:!0});return n}}]),e}();l()(c,"properties",[])},function(e,t,n){"use strict";var i,r;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),function(e){e.TEXT="text",e.TAG="tag"}(i||(i={})),function(e){e.SEARCHABLE_DROPDOWN="searchable-dropdown",e.DROPDOWN="dropdown",e.COLOR="color",e.DATE="date",e.TIME="time",e.FILE="file",e.STAR_RATING="star-rating",e.TAGS="tags",e.TAGS_LIST="tags-list",e.SINGLE_TAGS_LIST="single-tags-list",e.TAG="tag"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var i=n(36),r=n.n(i),a=n(124),o=n.n(a),s=n(52),l=n.n(s),c=n(5),u=n.n(c),d=n(6),p=n.n(d),h=n(0),_=n.n(h),g=n(96),m=n(126),f=n(117),E=n(91),y=n(131),T=n(193),v=n(19),O=n(14),b=n(1),C=n(2),I=n(32),R=n(152);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(){function e(){var t;u()(this,e),_()(this,"overwrittenIdentityPromiseResponse",void 0),_()(this,"overwrittenIdentityPromise",void 0),_()(this,"apiRootAddress","".concat(null===(t=window.initData)||void 0===t?void 0:t.apiUrl)),_()(this,"api",new E.a(jQuery,this.apiRootAddress)),_()(this,"userData",y.a.getInstance()),_()(this,"errorLogger",void 0),_()(this,"upgradePlans",void 0),_()(this,"accountInfo",void 0),_()(this,"accountAbilities",void 0),_()(this,"accountDetails",void 0),this.errorLogger=T.a.getInstance()}var t,n,i,a,s,c;return p()(e,[{key:"getCurrentIdentity",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!t&&this.overwrittenIdentityPromiseResponse?new Promise((function(t){return t(e.overwrittenIdentityPromiseResponse)})):(this.overwrittenIdentityPromise||(this.overwrittenIdentityPromise=new Promise((function(t,n){Promise.all([e.api.GET("/v2/abilities",null,{"source-platform":e.userData.getServerPlatform()}),e.api.GET("/v2/me")]).then((function(n){var i=l()(n,2),r=i[0],a=r.userDetails,o=r.abilities,s=i[1],c={userDetails:N({},a,{planName:s.planName,planNameHumanReadable:s.planNameHumanReadable}),abilities:o};t(c),e.overwrittenIdentityPromise=null,e.overwrittenIdentityPromiseResponse=c})).catch((function(e){return n(e)}))}))),this.overwrittenIdentityPromise)}},{key:"getCurrentPlanName",value:function(){var e;return null===(e=this.overwrittenIdentityPromiseResponse)||void 0===e?void 0:e.userDetails.planName}},{key:"getHumanReadablePlanName",value:function(){var e;return null===(e=this.overwrittenIdentityPromiseResponse)||void 0===e?void 0:e.userDetails.planNameHumanReadable}},{key:"setApiRoot",value:function(e){this.apiRootAddress=e,this.api.setApiRootAddress(e)}},{key:"isControlSupported",value:function(e){var t=this.getFeatureByControlTypeId(e);if(!t)return!0;try{return this.isFeatureActive(t)}catch(n){return this.errorLogger.logError(this.api,"Error checking if control ".concat(e," is supported, with message: ").concat(n.toString()),b.t.WARNING,"UserService"),!0}}},{key:"isControlCountSupported",value:function(e,t){var n=this.getLimitForFeature(O.a.CREATE_FORM_FIELD),i=this.getControlTotalLimitForControlType(e),r=this.getControlCount(e,t),a=r.totalNumberOfControls,o=void 0===a?0:a,s=r.existingInstancesOfThisControl;return o<n&&(void 0===s?0:s)<i}},{key:"canAddNewFileControlCount",value:function(e){var t=this.getControlCount(C.a.CONTROL_TYPE_FILE,e),n=this.getControlTotalLimitForControlType(C.a.CONTROL_TYPE_FILE),i=t.existingInstancesOfThisControl;return(void 0===i?0:i)<n}},{key:"canAddControl",value:function(e,t){return this.isControlSupported(e)&&this.isControlCountSupported(e,t)}},{key:"getControlTypesExcludedFromPlanCounting",value:function(){return[C.a.CONTROL_TYPE_ACTION_BAR,C.a.CONTROL_TYPE_CAPTCHA,C.a.CONTROL_TYPE_FORM_HEADER,C.a.CONTROL_TYPE_LIKERT_SCALE,C.a.CONTROL_TYPE_PAGE_BREAK,C.a.CONTROL_TYPE_SEPARATOR,C.a.CONTAINER_TYPE_DIV,C.a.CONTAINER_TYPE_PAGE,C.a.CONTAINER_TYPE_REPEATABLE_GROUP,C.a.CONTAINER_TYPE_ROW]}},{key:"getControlCount",value:function(e,t){var n=0,i=0,r=this.getControlTypesExcludedFromPlanCounting();return Object(g.a)(t.form.controls,(function(t){t.type===e&&n++,r.includes(t.type)||i++})),{totalNumberOfControls:i,existingInstancesOfThisControl:n}}},{key:"getLimitForFeature",value:function(e){try{var t=this.getAvailableFeatures(),n=Object(m.a)(t,{name:e});return n&&n.value?parseInt(n.value):n&&null===n.value?1/0:0}catch(i){return 0}}},{key:"getControlTotalLimitForControlType",value:function(t){var n=this.getAvailableFeatures();switch(t){case C.a.CONTROL_TYPE_HTML_BLOCK:return e.extractControlFromAbilities(n,{name:"html_block_control"});case C.a.CONTAINER_TYPE_LIKERT_WRAPPER:return e.extractControlFromAbilities(n,{name:"likert_scale_control"});case C.a.CONTROL_TYPE_COUPON:return e.extractControlFromAbilities(n,{name:"coupon_code_control"});case C.a.CONTROL_TYPE_FILE:return 50;default:return 1/0}}},{key:"getFormReportLimit",value:function(){return this.getLimitForFeature(O.a.ADD_FORM_REPORT)}},{key:"canAddApplication",value:function(e){return this.isFeatureActive(e)}},{key:"canEnableDataEncryption",value:function(){return this.isFeatureActive(O.a.TOGGLE_DATA_ENCRYPTION)}},{key:"canUseValidator",value:function(e){return this.isFeatureActive("field_validation_control_option")}},{key:"canUseQuizOptions",value:function(){return this.isFeatureActive("quiz_control_option")}},{key:"canLimitChoices",value:function(){return this.isFeatureActive("limit_choices_control_option")}},{key:"canEditSubmission",value:function(){return this.isFeatureActive(O.a.EDIT_SUBMISSION)}},{key:"canDownloadSubmissionAsPlainPdf",value:function(){return this.isFeatureActive(O.a.DOWNLOAD_SUBMISSION_AS_PLAIN_PDF)}},{key:"canDownloadSubmissionAsFormLayoutPdf",value:function(){return this.isFeatureActive(O.a.DOWNLOAD_SUBMISSION_AS_FORM_LAYOUT_PDF)}},{key:"canExportSubmissionsExcelCsv",value:function(){return this.isFeatureActive(O.a.EXPORT_SUBMISSIONS_EXCEL_CSV)}},{key:"canCreateFormReport",value:function(){return this.getFormReportLimit()>0}},{key:"canAddLikertStatements",value:function(e){try{return e<this.getControlTotalLimitForControlType(C.a.CONTAINER_TYPE_LIKERT_WRAPPER)}catch(t){return this.errorLogger.logError(this.api,"Error checking LikertStatementNumber with message: ".concat(t.toString()),b.t.WARNING,"UserService"),!1}}},{key:"canAddNotification",value:function(e,t){switch(e){case b.T.EMAIL:return t.notifications.emails.length<this.getLimitForFeature("create_email_form_notification_configuration")}}},{key:"canAddRecipientToEmailNotification",value:function(e,t){var n=this.getLimitForFeature("add_form_notification_recipient");return e.recipients.length<n}},{key:"canAddRecipientToEmailRules",value:function(e){return e<this.getLimitForFeature("add_form_notification_recipient")}},{key:"canAddRulesToEmailNotification",value:function(e,t){var n=this.getLimitForFeature("create_email_form_notification_rule");return(e.rules?e.rules.length:9999)<n}},{key:"canAddAttachmentsToNotification",value:function(){var e=this.getAvailableFeatures();return Object(f.a)(e,{name:"add_email_form_notification_attachment"})}},{key:"canUseSMTPInNotifications",value:function(){var e=this.getAvailableFeatures();return Object(f.a)(e,{name:"use_smtp_server_for_email_form_notification"})}},{key:"canEditEmailNotificationTemplate",value:function(){var e=this.getAvailableFeatures();return Object(f.a)(e,{name:"edit_email_form_notification_template"})}},{key:"canEnableFormPayments",value:function(){return this.isFeatureActive(O.a.ENABLE_FORM_PAYMENTS)}},{key:"canEnableChainApprovals",value:function(){return this.isFeatureActive(O.a.ENABLE_CHAIN_APPROVALS)}},{key:"getUpgradeOptions",value:function(e){try{var t;return Object(m.a)(null===(t=this.overwrittenIdentityPromiseResponse)||void 0===t?void 0:t.abilities.upgrades,{name:e}).target[0]}catch(n){this.errorLogger.logError(this.api,"Error getting upgrade option for feature: ".concat(e,", with message: ").concat(n.toString()),b.t.WARNING,"UserService")}}},{key:"canUseFormDomainAliasing",value:function(){return Object(f.a)(this.getAvailableFeatures(),{name:O.a.ENABLE_FORM_DOMAIN_ALIASING})}},{key:"canPublishOnSalesforceCommunity",value:function(){return this.isFeatureActive(O.a.PUBLISH_FORM_ON_SALESFORCE_COMMUNITY)}},{key:"canAddNewTranslation",value:function(){return Object(f.a)(this.getAvailableFeatures(),{name:"add_form_language"})}},{key:"canUseFormPrefill",value:function(){return this.isFeatureActive(O.a.USE_FORM_PREFILL)}},{key:"canUseObjectMapping",value:function(){return this.isFeatureActive(O.a.USE_OBJECT_MAPPING)}},{key:"canUseLookupObjects",value:function(){return this.isFeatureActive(O.a.USE_SALESFORCE_LOOKUP_OBJECTS)}},{key:"canUseQuery",value:function(){return this.isFeatureActive(O.a.USE_SALESFORCE_QUERY)}},{key:"canHideBackLink",value:function(){return this.isFeatureActive(O.a.HIDE_BACKLINK)}},{key:"getAllUpgradeOptions",value:function(e){try{var t;return Object(m.a)(null===(t=this.overwrittenIdentityPromiseResponse)||void 0===t?void 0:t.abilities.upgrades,{name:e}).target}catch(n){this.errorLogger.logError(this.api,"Error getting upgrade options for feature: ".concat(e,", with message: ").concat(n.toString()),b.t.WARNING,"UserService")}}},{key:"canCreateUserGroups",value:function(){return Object(f.a)(this.getAvailableFeatures(),{name:"can_create_user_groups"})}},{key:"canAssignUserGroupAdmins",value:function(){return Object(f.a)(this.getAvailableFeatures(),{name:"can_assign_user_group_admins"})}},{key:"getUpgradePlans",value:(c=o()(r.a.mark((function e(){var t,n=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],this.upgradePlans&&!t||(this.upgradePlans=this.api.GET("/v2/pricing/upgrades",null,{"source-platform":this.userData.getServerPlatform()})),e.next=4,this.upgradePlans;case 4:return e.sent.sort((function(e,t){return e.index-t.index})),e.abrupt("return",this.upgradePlans);case 6:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getUpgradePlan",value:(s=o()(r.a.mark((function e(){var t,n,i,a,o=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]&&o[0],e.next=3,this.getUpgradePlans(t);case 3:return n=e.sent,i=l()(n,1),a=i[0],e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getPlanUpgradeUrl",value:(a=o()(r.a.mark((function e(){var t,n,i,a=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],e.next=3,this.getUpgradePlan(t);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:if(n=e.t0,i=n.name){e.next=10;break}return e.abrupt("return","");case 10:if(i!==v.a.NEW_STARTER){e.next=14;break}return e.abrupt("return",Object(I.e)());case 14:return e.abrupt("return",Object(I.c)(i));case 15:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getAccountInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.accountInfo&&!e||(this.accountInfo=this.api.GET("/v2/me")),this.accountInfo}},{key:"getAccountPlanKey",value:(i=o()(r.a.mark((function e(){var t,n,i,a=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],e.next=3,this.getAccountInfo(t);case 3:return n=e.sent,i=n.planName,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getAccountPlanName",value:(n=o()(r.a.mark((function e(){var t,n,i,a=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],e.next=3,this.getAccountInfo(t);case 3:return n=e.sent,i=n.planNameHumanReadable,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getAccountAbilities",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.accountAbilities&&!e||(this.accountAbilities=this.api.GET("/v2/abilities",null,{"source-platform":this.userData.getServerPlatform()})),this.accountAbilities}},{key:"canAddForm",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getLimitForFeature(O.a.MAXIMUM_FORM_COUNT);return e+t<=n}},{key:"getAccountDetails",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.accountDetails&&!e||(this.accountDetails=this.api.GET("/v2/me/account-details")),this.accountDetails}},{key:"getDiskStorageForFeature",value:function(e){try{var t=this.getAvailableFeatures(),n=Object(m.a)(t,{name:e});return n&&n.value?n.value:""}catch(i){return""}}},{key:"isFeatureActive",value:function(e){try{var t=this.getAvailableFeatures();return Object(f.a)(t,["name",e])}catch(n){return this.errorLogger.logError(this.api,"Error checking ".concat(e," with message: ").concat(n.toString()),b.t.WARNING,"UserService"),!1}}},{key:"getAvailableFeatures",value:function(){try{var e;return null===(e=this.overwrittenIdentityPromiseResponse)||void 0===e?void 0:e.abilities.features}catch(t){return this.errorLogger.logError(this.api,"Error getting list of available features with message: ".concat(t.toString()),b.t.WARNING,"UserService"),[]}}},{key:"canAddCustomEmailInNotifications",value:function(){return this.isFeatureActive(O.a.ADD_CUSTOM_EMAIL_IN_NOTIFICATONS)}},{key:"canUpgrade",value:function(){var e=this.getCurrentPlanName(),t=this.userData.isSubUser(),n=[v.a.CORPORATE,v.a.ENTERPRISE,v.a.SF_ENTERPRISE].includes(e);return!t&&!n}},{key:"isPlanIndividualTrial",value:(t=o()(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountPlanKey();case 2:if(e.sent===v.a.INDIVIDUAL){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,this.getUpgradePlans();case 7:return t=e.sent,e.abrupt("return",void 0!==t.find((function(e){return e.name===v.a.INDIVIDUAL})));case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getFeatureByControlTypeId",value:function(e){switch(e){case C.a.CONTROL_TYPE_COUPON:return O.a.COUPON_CODE_CONTROL;case C.a.CONTROL_TYPE_FILE:return O.a.FILE_UPLOAD_CONTROL;case C.a.CONTAINER_TYPE_REPEATABLE:case C.a.CONTAINER_TYPE_REPEATABLE_GROUP:return O.a.REPEATABLE_CONTAINER;case C.a.CONTROL_TYPE_PASSWORD:return O.a.PASSWORD_CONTROL;case C.a.CONTROL_TYPE_FORMULA:return O.a.FORMULA_CONTROL;case C.a.CONTROL_TYPE_FEE:return O.a.FEE_CONTROL;case C.a.CONTROL_TYPE_HTML_BLOCK:return O.a.HTML_BLOCK_CONTROL;default:return null}}},{key:"getNextUserPlan",value:function(){switch(this.getCurrentPlanName().toLowerCase()){case R.a.FREE:return v.a.GOLD;case v.a.GOLD:return v.a.PLATINUM;default:return v.a.ENTERPRISE}}}],[{key:"getInstance",value:function(){return window[e.globalIdentifier]||(window[e.globalIdentifier]=new this),window[e.globalIdentifier]}},{key:"extractControlFromAbilities",value:function(e,t){var n=Object(m.a)(e,t);return n&&null!==n.value?parseInt(n.value):n&&null===n.value?1/0:0}}]),e}();_()(A,"globalIdentifier","tadbfxdqxv")},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return P}));var i,r,a,o,s=n(5),l=n.n(s),c=n(3),u=n.n(c),d=n(6),p=n.n(d),h=n(7),_=n.n(h),g=n(8),m=n.n(g),f=n(4),E=n.n(f),y=n(0),T=n.n(y),v=n(35),O=n(123),b=n(234),C=n(29);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}!function(e){e[e.IS=0]="IS",e[e.IS_NOT=1]="IS_NOT",e[e.CONTAINS=2]="CONTAINS",e[e.DOES_NOT_CONTAIN=3]="DOES_NOT_CONTAIN",e[e.BEGINS_WITH=4]="BEGINS_WITH",e[e.ENDS_WITH=5]="ENDS_WITH",e[e.IS_GREATER_THAN=6]="IS_GREATER_THAN",e[e.IS_LESS_THAN=7]="IS_LESS_THAN",e[e.IS_CHECKED=8]="IS_CHECKED",e[e.IS_NOT_CHECKED=9]="IS_NOT_CHECKED",e[e.IS_SELECTED=10]="IS_SELECTED",e[e.IS_NOT_SELECTED=11]="IS_NOT_SELECTED"}(i||(i={})),function(e){e[e.is=i.IS]="is",e[e.is_not=i.IS_NOT]="is_not",e[e.contains=i.CONTAINS]="contains",e[e.does_not_contain=i.DOES_NOT_CONTAIN]="does_not_contain",e[e.begins_with=i.BEGINS_WITH]="begins_with",e[e.ends_with=i.ENDS_WITH]="ends_with",e[e.is_greater_than=i.IS_GREATER_THAN]="is_greater_than",e[e.is_less_than=i.IS_LESS_THAN]="is_less_than",e[e.is_checked=i.IS_CHECKED]="is_checked",e[e.is_not_checked=i.IS_NOT_CHECKED]="is_not_checked",e[e.is_selected=i.IS_SELECTED]="is_selected",e[e.is_not_selected=i.IS_NOT_SELECTED]="is_not_selected"}(r||(r={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.CHECKABLE=1]="CHECKABLE",e[e.SELECTABLE=2]="SELECTABLE",e[e.COMPARABLE=3]="COMPARABLE",e[e.MISSING=4]="MISSING"}(a||(a={})),function(e){e.ADD="add",e.REMOVE="remove",e.BOTH="both",e.NONE="none"}(o||(o={}));var P=function(e){_()(n,e);var t=R(n);function n(e,i,r){var a;l()(this,n),a=t.call(this),T()(u()(a),"CONFIGURATION",void 0),T()(u()(a),"variableValueToConfigurationMap",void 0),T()(u()(a),"rootNode",void 0),T()(u()(a),"variableNode",void 0),T()(u()(a),"operatorNode",void 0),T()(u()(a),"valueNode",void 0),T()(u()(a),"optionNode",void 0),T()(u()(a),"variableComponent",void 0),T()(u()(a),"operatorComponent",void 0),T()(u()(a),"valueComponent",void 0),T()(u()(a),"valueInput",void 0),T()(u()(a),"i18n",void 0),T()(u()(a),"onVariableChanged",void 0),T()(u()(a),"onVariableBeforeChange",void 0),T()(u()(a),"onConditionAdded",void 0),T()(u()(a),"onConditionRemoved",void 0),T()(u()(a),"canAddCondition",void 0),T()(u()(a),"canRemoveCondition",void 0),T()(u()(a),"conditionPosition",void 0),T()(u()(a),"lastSelectedVariable",void 0),T()(u()(a),"onStatementAdded",void 0),T()(u()(a),"onStatementRemoved",void 0),a.conditionPosition=e,a.onVariableChanged=i,a.CONFIGURATION=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.createDefaultConfiguration(),{},r),a.variableValueToConfigurationMap={},a.canAddCondition=!1,a.canRemoveCondition=!1,a.rootNode=document.createElement("div"),a.variableNode=document.createElement("div"),a.operatorNode=document.createElement("div"),a.valueNode=document.createElement("div"),a.optionNode=document.createElement("div"),a.variableComponent=new O.a,a.operatorComponent=new O.a,a.valueComponent=new O.a,a.valueInput=document.createElement("input"),a.variableNode.setAttribute("data-role","rules-condition-variable"),a.variableNode.onclick=function(e){e.stopPropagation()},a.variableNode.appendChild(a.variableComponent.getRoot()),a.operatorNode.setAttribute("data-role","rules-condition-operator"),a.operatorNode.onclick=function(e){e.stopPropagation()},a.operatorNode.appendChild(a.operatorComponent.getRoot()),a.valueNode.setAttribute("data-role","rules-condition-value"),a.valueNode.onclick=function(e){e.stopPropagation()},a.valueNode.appendChild(a.valueComponent.getRoot()),a.valueNode.appendChild(a.valueInput),a.optionNode.setAttribute("data-role","rules-condition-option");var s=document.createElement("span");s.setAttribute("class","i123-close"),s.setAttribute("data-role","rules-condition-remove"),s.onclick=function(e){e.stopPropagation(),a.removeCondition()};var c=document.createElement("span");return c.setAttribute("class","i123-add"),c.setAttribute("data-role","rules-condition-add"),c.onclick=function(e){e.stopPropagation(),a.addCondition()},a.optionNode.appendChild(s),a.optionNode.appendChild(c),a.updateOptionVisibility(o.NONE,!0),a.getRootNode().setAttribute("data-role","rules-condition"),a.getRootNode().appendChild(a.variableNode),a.getRootNode().appendChild(a.operatorNode),a.getRootNode().appendChild(a.valueNode),a.getRootNode().appendChild(a.optionNode),a}return p()(n,[{key:"setCanAddCondition",set:function(e){this.canAddCondition=e}},{key:"setCanRemoveCondition",set:function(e){this.canRemoveCondition=e}},{key:"getConditionPosition",get:function(){return this.conditionPosition}}]),p()(n,[{key:"withI18n",value:function(e){return this.i18n=e,this}},{key:"getRootNode",value:function(){return this.rootNode}},{key:"initialize",value:function(){var e=this;this.updateVariableComponentOptions();var t=function(){var t=e.getVariable();t.type===a.MISSING?e.variableNode.setAttribute("data-missing","true"):e.variableNode.removeAttribute("data-missing"),t.skipConditions?e.getRootNode().setAttribute("data-skip","operator"):t.type===a.CHECKABLE||t.type===a.SELECTABLE?e.getRootNode().setAttribute("data-skip","value"):e.getRootNode().setAttribute("data-skip","")},i=this.variableComponent.getSelectedIndex();if(this.variableComponent.getRoot().addEventListener("focus",(function(){i=e.variableComponent.getSelectedIndex()})),this.variableComponent.getRoot().addEventListener("change",(function(){if(!e.onVariableBeforeChange)throw new Error("onVariableBeforeChange must be assigned!");if(!e.onVariableBeforeChange())return e.variableComponent.setSelectedIndex(i),void e.trigger("count-email-rules-not-supported");t(),e.updateOperator()&&e.updateValue();var n=e.getVariable(),r=e.lastSelectedVariable.value!==n.value&&n.skipConditions||e.lastSelectedVariable.skipConditions&&e.lastSelectedVariable.value!==n.value;e.onVariableChanged&&r&&e.onVariableChanged(n.skipConditions),n.skipConditions||1!==e.conditionPosition||e.autoUpdateOptionVisibility(),e.lastSelectedVariable=n})),this.operatorComponent.getRoot().addEventListener("change",(function(){e.updateValue(!0)})),this.valueComponent.getRoot().addEventListener("change",(function(){e.valueNode.hasAttribute("data-missing")&&e.valueNode.removeAttribute("data-missing")})),t(),this.updateOperator()){var r=this.CONFIGURATION.selectedOperator;if(null!==r&&this.operatorComponent.setValue(String(r)),this.updateValue()){var o=this.CONFIGURATION.selectedValue;null!==o&&(this.getValueType()===n.VALUE_TYPE_SELECT?-1!==this.valueComponent.getValues().indexOf(o)?this.valueComponent.setValue(o):-1!==this.valueComponent.getTexts().indexOf(o)?this.valueComponent.setValueByText(o):(this.valueComponent.addOption({value:o,text:this.i18n.translateText("payments_deletedField"),isSeparator:!0,hidden:!0}),this.valueComponent.setValue(o),this.valueNode.setAttribute("data-missing","true")):this.valueInput.value=o)}}this.initEventListeners(),this.lastSelectedVariable=this.getVariable()}},{key:"initEventListeners",value:function(){var e=this;if(!v.a.isMobile()){var t=!1;this.getRootNode().onmouseenter=function(){e.getVariable().skipConditions||(t="none"===e.getRootNode().getAttribute("data-option-type"))&&e.autoUpdateOptionVisibility()},this.getRootNode().onmouseleave=function(){t&&!e.getVariable().skipConditions&&e.updateOptionVisibility(o.NONE)}}}},{key:"getOperator",value:function(){return parseInt(this.operatorComponent.getValue(),10)}},{key:"getValue",value:function(){return this.getValueType()===n.VALUE_TYPE_SELECT?this.valueComponent.getValue():this.valueInput.value}},{key:"getValueType",value:function(){return parseInt(this.getRootNode().getAttribute("data-value-type"),10)}},{key:"setValueType",value:function(e){this.getRootNode().setAttribute("data-value-type",String(e))}},{key:"updateOperator",value:function(){var e=this;if("operator"===this.getRootNode().getAttribute("data-skip"))return!1;var t=[],n=function(t,n){return e.i18n.translateTextDefault(t,n)};switch(this.getVariable().type){case a.CHECKABLE:t=[{value:i.IS_CHECKED,text:n("notifications_ROPischecked","is checked")},{value:i.IS_NOT_CHECKED,text:n("notifications_ROPisnotchecked","is not checked")}];break;case a.SELECTABLE:t=[{value:i.IS_SELECTED,text:n("notifications_ROPisselected","is selected")},{value:i.IS_NOT_SELECTED,text:n("notifications_ROPisnotselected","is not selected")}];break;case a.COMPARABLE:t=[{value:i.IS,text:n("notifications_ROPis","is")},{value:i.IS_GREATER_THAN,text:n("reports_rulesGreaterThan","is greater than")},{value:i.IS_LESS_THAN,text:n("reports_rulesLessThan","is less than")}];break;default:t=[{value:i.IS,text:n("notifications_ROPis","is")},{value:i.IS_NOT,text:n("notifications_ROPisnot","is not")},{value:i.CONTAINS,text:n("notifications_ROPcontains","contains")},{value:i.DOES_NOT_CONTAIN,text:n("notifications_ROPdoesntcontain","does not contain")},{value:i.BEGINS_WITH,text:n("notifications_ROPbeginswith","begins with")},{value:i.ENDS_WITH,text:n("notifications_ROPendswith","ends with")},{value:i.IS_GREATER_THAN,text:n("reports_rulesGreaterThan","is greater than")},{value:i.IS_LESS_THAN,text:n("reports_rulesLessThan","is less than")}]}return this.operatorComponent.setOptions(t),!0}},{key:"updateValue",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(""!==this.getRootNode().getAttribute("data-skip"))return!1;var r=this.getVariable(),a=this.getOperator(),o=this.getValueType();return r.values?t?a!==i.IS&&a!==i.IS_NOT?o!==n.VALUE_TYPE_INPUT&&this.setValueType(n.VALUE_TYPE_INPUT):o!==n.VALUE_TYPE_SELECT&&this.setValueType(n.VALUE_TYPE_SELECT):(o!==n.VALUE_TYPE_SELECT&&this.setValueType(n.VALUE_TYPE_SELECT),this.valueComponent.clear(),this.valueInput.value="",r.values.forEach((function(t,n){e.valueComponent.addOption({value:n,text:t,isDefault:0===n})}))):t||(o!==n.VALUE_TYPE_INPUT&&this.setValueType(n.VALUE_TYPE_INPUT),this.valueInput.placeholder=r.placeholder||"",this.valueInput.value=""),!0}},{key:"selectedVariableHasGroup",value:function(){return void 0!=this.variableValueToConfigurationMap[this.getSelectedVariable()].group}},{key:"isSelectedVariableControlTypeOf",value:function(e){return this.getVariable().controlType&&this.getVariable().controlType===e}},{key:"updateVariableComponentOptions",value:function(){var e=this;this.variableComponent.clear();var t={};this.CONFIGURATION.variables.forEach((function(n){n.group?("undefined"===typeof t[n.group.id]&&(t[n.group.id]=!0,e.variableComponent.addGroup(n.group.id,n.group.name)),e.variableComponent.addOption({value:n.value,text:n.text},null,n.group.id)):e.variableComponent.addOption({value:n.value,text:n.text}),e.variableValueToConfigurationMap[n.value]=n}));var n=this.CONFIGURATION.selectedVariable;if(null!==n)if(this.variableValueToConfigurationMap.hasOwnProperty(n))this.variableComponent.getOptionByValue(n)?this.variableComponent.setValue(n):(this.variableComponent.addOption({value:this.variableValueToConfigurationMap[n].value,text:this.variableValueToConfigurationMap[n].text,isSeparator:!0}),this.variableComponent.setValue(this.variableValueToConfigurationMap[n].value));else{var i={value:n,text:this.i18n.translateText("payments_deletedField"),type:a.MISSING};this.variableValueToConfigurationMap[i.value]=i,this.variableComponent.addOption({value:i.value,text:i.text,isSeparator:!0}),this.variableComponent.setValue(i.value)}}},{key:"getVariable",value:function(){return this.variableValueToConfigurationMap[this.getSelectedVariable()]}},{key:"getVariables",value:function(){return this.CONFIGURATION.variables}},{key:"getSelectedVariable",value:function(){return this.variableComponent.getValue()}},{key:"setSelectedVariable",value:function(e){this.variableComponent.setValue(e)}},{key:"getSelectedGroup",value:function(){return this.selectedVariableHasGroup()?this.variableValueToConfigurationMap[this.getSelectedVariable()].group.id:""}},{key:"getSelectedVariableControlType",value:function(){return this.getVariable().controlType}},{key:"isSelectedVariableAnyControlTypeOf",value:function(e){for(var t=0,n=e.length;t<n;t++)if(this.isSelectedVariableControlTypeOf(e[t]))return!0;return!1}},{key:"getNotificationSelectedVariable",value:function(){return this.variableValueToConfigurationMap[this.getSelectedVariable()].value===this.getSelectedVariable()?this.variableValueToConfigurationMap[this.getSelectedVariable()].text:this.getSelectedValue()}},{key:"getNotificationSelectedValue",value:function(){return this.getValueType()===n.VALUE_TYPE_SELECT?this.valueComponent.getText():this.getSelectedValue()}},{key:"updateVariables",value:function(e){this.CONFIGURATION.variables=e,this.updateVariableComponentOptions()}},{key:"getSelectedOperator",value:function(){return this.getOperator()}},{key:"getSelectedValue",value:function(){return this.getValue()}},{key:"updateConditionPosition",value:function(e){this.conditionPosition=e}},{key:"addCondition",value:function(){if(this.canAddCondition){v.a.isMobile()||this.updateOptionVisibility(o.NONE),this.addStatement();var e=this.getVariables().filter((function(e){return!e.skipConditions})),t=this.conditionPosition<e.length?this.conditionPosition:e.length-1,i=new n(this.conditionPosition+1,this.onVariableChanged,{variables:e,selectedVariable:e[t].value,selectedOperator:null,selectedValue:null}).withI18n(this.i18n);i.onConditionAdded=this.onConditionAdded,i.onConditionRemoved=this.onConditionRemoved,i.onStatementAdded=this.onStatementAdded,i.onStatementRemoved=this.onStatementRemoved,i.onVariableBeforeChange=this.onVariableBeforeChange,i.initialize(),this.onConditionAdded&&this.onConditionAdded(i),v.a.isMobile()&&this.autoUpdateOptionVisibility()}}},{key:"removeCondition",value:function(){this.canRemoveCondition&&(v.a.isMobile()||this.updateOptionVisibility(o.NONE),this.removeStatement(),this.onConditionRemoved&&this.onConditionRemoved(this),v.a.isMobile()&&this.autoUpdateOptionVisibility())}},{key:"autoUpdateOptionVisibility",value:function(){this.canAddCondition&&this.canRemoveCondition?this.updateOptionVisibility(o.BOTH):this.canAddCondition?this.updateOptionVisibility(o.ADD):this.canRemoveCondition?this.updateOptionVisibility(o.REMOVE):this.updateOptionVisibility(o.NONE,!0)}},{key:"updateOptionVisibility",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!t&&v.a.isMobile()&&e===o.NONE||this.getRootNode().setAttribute("data-option-type",e)}},{key:"addStatement",value:function(e){var t=new b.b(this.conditionPosition,e).withI18n(this.i18n);t.initialize(),this.onStatementAdded&&this.onStatementAdded(t)}},{key:"removeStatement",value:function(){if(this.onStatementRemoved){var e=this.getConditionPosition>1?this.getConditionPosition-2:0;this.onStatementRemoved(e)}}}],[{key:"createDefaultConfiguration",value:function(){return{variables:[],selectedVariable:null,selectedOperator:null,selectedValue:null}}}]),n}(C.a);T()(P,"MAX_NR_OF_CONDITIONS",10),T()(P,"VALUE_TYPE_INPUT",1),T()(P,"VALUE_TYPE_SELECT",2)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(5),r=n.n(i),a=n(0),o=n.n(a),s=function e(){r()(this,e)};o()(s,"ALLOW_I18N_DROPDOWN_SELECTOR",!0),o()(s,"ALLOW_QUIZ_TIMER",!0),o()(s,"ENABLE_SUBMISSION_PREVENTION_ON_QUIZ_TIMER_EXPIRATION",!0),o()(s,"ALLOW_PAYMENTS_SELECTOR",!0),o()(s,"ALLOW_THEME_ADVANCED_SETTINGS",!1),o()(s,"ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL",!1),o()(s,"ALLOW_COUPON_CODES_ON_LAST_PAGE_FOOTER",!0),o()(s,"ALLOW_REAL_TIME_CALCULATIONS",!0),o()(s,"ALLOW_PAYMENTS_SUMMARY",!0),o()(s,"VERBOSE_CONSOLE",!1),o()(s,"ALLOW_CSS_OPTIMIZATIONS",!0)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"f",(function(){return I})),n.d(t,"n",(function(){return R})),n.d(t,"m",(function(){return N})),n.d(t,"e",(function(){return A})),n.d(t,"h",(function(){return S})),n.d(t,"k",(function(){return L})),n.d(t,"j",(function(){return D})),n.d(t,"i",(function(){return k})),n.d(t,"d",(function(){return M})),n.d(t,"b",(function(){return x})),n.d(t,"g",(function(){return Y})),n.d(t,"c",(function(){return V})),n.d(t,"l",(function(){return G}));var i=n(20),r=n.n(i),a=n(5),o=n.n(a),s=n(0),l=n.n(s),c=n(126),u=n(96),d=n(608),p=(n(195),n(24)),h=n(65),_=n(154),g=n(46),m=n(13),f=n(1),E=n(48),y=n(116),T=n(234),v=n(177),O=n(171),b=n(18),C=function e(){o()(this,e)};l()(C,"CONTROL_VARIABLE_PREFIX","controlId:"),l()(C,"COMPANY_NAME","123FormBuilder"),l()(C,"NO_REPLAY_EMAIL","noreply@123formbuilder.com"),l()(C,"DELETED_FIELD","Deleted field"),l()(C,"PROTECTED_FIELD","Protected field"),l()(C,"CONTROL_HIPAA_POSTFIX","(HIPAA)");var I=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var a=e[i],o=void 0,s=void 0;a.type&&(a.type===g.a.TAG&&(a.value.indexOf(C.CONTROL_VARIABLE_PREFIX)>-1?(o=b.j.CONTROL_ID,s=a.value.split(":")[1]):R(a.value,t)?(o=b.j.EMAIL,s=a.value):P(a.value,t)?(o=b.j.PHONE,s=a.value):a.value!==b.a.USER_EMAIL&&a.value!==b.a.USER_PHONE||(o=b.j.CUSTOM,s=a.value)),n.push({type:o,value:s}))}return n},R=function(e,t){return t.getEngine().getValidator().validate(e,p.a.VALIDATOR_TYPE_EMAIL)},P=function(e,t){return t.getEngine().getValidator().validate(e,p.a.VALIDATOR_TYPE_PHONE_ANY_FORMAT)},N=function(e,t){var n=[];if(null==e)return n;for(var i=0,r=e.length;i<r;i++)switch(e[i].type){case b.j.EMAIL:var a=e[i].value?e[i].value:"";n.push({type:g.a.TAG,value:a,caption:a,isRegularTag:!0});break;case b.j.PHONE:n.push({type:g.a.TAG,value:e[i].value?e[i].value:"",caption:e[i].value?e[i].value:"",isRegularTag:!0});break;case b.j.CONTROL_ID:if(!e[i].isDeleted&&t.getElementById(~~e[i].value)){var o=m.a.getLabelOfFormControl(t.getElementById(~~e[i].value));n.push({type:g.a.TAG,value:C.CONTROL_VARIABLE_PREFIX+e[i].value,caption:o||C.CONTROL_VARIABLE_PREFIX+e[i].value,isRegularTag:!o})}else n.push(V(C.CONTROL_VARIABLE_PREFIX+e[i].value));break;case b.j.CUSTOM:n.push({type:g.a.TAG,value:e[i].value,caption:B(e[i])});break;default:console.warn("Invalid type for Recipient or Sender component: ".concat(e[i].type,"."))}return n},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=[h.a.CONTROL_TYPE_EMAIL,h.a.CONTROL_TYPE_TEXT,h.a.CONTROL_TYPE_TEXTAREA],r=[];r.push({text:m.a.getUiTranslatedString("edt_notifications_my_email","My Email"),value:b.a.USER_EMAIL});for(var a=0,o=e.controls.length;a<o;a++)if(i.includes(e.controls[a].type)&&!H(e.controls,e.controls[a])){var s=e.controls[a].label;t&&e.controls[a].isHipaa&&e.settings.isHipaa&&(s="".concat(s," ").concat(C.CONTROL_HIPAA_POSTFIX)),r.push({text:s,value:"".concat(C.CONTROL_VARIABLE_PREFIX).concat(e.controls[a].id),disabled:t&&e.controls[a].isHipaa&&e.settings.isHipaa&&n})}return r},S=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=[];e&&i.push({value:"0",text:n.translateText("notifications_allSubmissions"),type:E.c.DEFAULT,skipConditions:!0});for(var a=k(v.a.RULE_ALLOWED_EXTRA,m.a.getExtraVariables()),o=t.flatten(),s=function(e,t){var a=o[e],s=a.getTypeId();if(!a.getLabelDOMNode()||-1==v.a.RULE_ALLOWED_CONTROL_TYPES.indexOf(s)||m.a.getRepeatableContainerParent(a))return"continue";var l=String(a.getId()),c=a.getLabelDOMNode().innerText,u=a.getInputDOMNodes();switch(s){case h.a.CONTROL_TYPE_NAME:case h.a.CONTROL_TYPE_ADDRESS:for(var d=0,p=u.length;d<p;d++)for(var _=u[d].inputs,g=0,f=_.length;g<f;g++){var y=_[g],T=r()(y.input,HTMLElement)?y.input:y.input.getRootNode(),O=T.hasAttribute("data-i18n-placeholder")?T.getAttribute("data-i18n-placeholder"):$("input[data-i18n-placeholder]",T).attr("data-i18n-placeholder");i.push({value:"".concat(l,"-").concat(T.getAttribute("data-index")),text:n.translateText(O),type:E.c.DEFAULT,controlType:s,group:{id:l,name:c}})}break;case h.a.CONTROL_TYPE_RADIO:case h.a.CONTROL_TYPE_CHECKBOX:case h.a.CONTROL_TYPE_TERMS_OF_SERVICE:for(var b=0,C=u.length;b<C;b++)for(var I=u[b].inputs,R=0,P=I.length;R<P;R++){var N=I[R],A=N.input.querySelector("input[data-index]"),S=!!Number(A.getAttribute("data-is-other"));i.push({value:"".concat(l,"-").concat(A.getAttribute("data-index")),text:N.input.textContent,type:S?E.c.DEFAULT:E.c.CHECKABLE,controlType:s,group:{id:l,name:c}})}break;case h.a.CONTROL_TYPE_LIKERT_SCALE:for(var L=0,D=u.length;L<D;L++)for(var w=u[L].inputs,k=0,M=w.length;k<M;k++){var x=w[k];[].slice.call(x.input.querySelectorAll("input[data-index]")).forEach((function(e){i.push({value:"".concat(l,"-").concat(e.getAttribute("data-index")),text:e.getAttribute("value"),type:E.c.CHECKABLE,controlType:s,group:{id:l,name:c}})}))}break;default:var U={value:l,text:c,type:E.c.DEFAULT,controlType:s};s===h.a.CONTROL_TYPE_DROPDOWN?(U.values=[],[].slice.call(a.getRootNode().querySelectorAll("option[data-index]")).forEach((function(e){U.values.push(e.textContent)}))):s===h.a.CONTROL_TYPE_DATE?U.placeholder="mm/dd/yyyy":s===h.a.CONTROL_TYPE_TIME&&(U.placeholder="hh:mm"),i.push(U)}},l=0,c=o.length;l<c;l++)s(l,c);for(var u=0,d=a.length;u<d;u++){var p=a[u],g=p.value.substr(1,p.value.length-2);switch(p.value){case f.ub.LANGUAGE:var T=t.getEngine().getLoader().getLoaderDependency(f.M.TRANSLATIONS_LANGUAGE_CODES);T&&function(){var e=m.a.getUiTranslatedString("applications_locale","Language");T.forEach((function(t){var n=_.a.getLanguageObjectByCode(t);n&&i.push({value:n.code2?n.code2:n.code3,text:n.name,type:E.c.SELECTABLE,controlType:y.a.LANGUAGE,group:{id:e,name:e}})}))}();break;case f.ub.PAYMENT_COUPON:i.push({value:y.a.COUPON_CODE,text:p.text,type:E.c.DEFAULT,controlType:y.a.COUPON_CODE});break;case f.ub.QUIZ_SCORE:i.push({value:y.a.QUIZ_SCORE,text:p.text,type:E.c.COMPARABLE,controlType:y.a.QUIZ_SCORE});break;default:i.push({value:g,text:p.text,type:E.c.DEFAULT,controlType:g})}}return i},L=function(e,t,n,i){for(var r=[],a=function(a,o){r.push({ruleRecipientConfiguration:{emailValuesList:A(t),defaultTagValues:N(e[a].recipients,n),selectedValue:e[a].sendToOnly?{hookType:O.a.TRIGGER_ONLY_SEND_TO}:{hookType:O.a.TRIGGER_SEND_TO}},ruleConditionConfigurations:[],ruleStatementConfigurations:[]});var s=-1;!function e(t){for(var o=0,l=t.length;o<l;o++){var c=t[o];switch(c.type){case b.n.EXPRESSION:e(c.value);break;case b.n.EXTRA:if(-1==v.a.RULE_EXTRA_VARIABLES.indexOf(c.value))return console.warn("Invalid extra 'value' value: ".concat(c.value,". Only one of ").concat(v.a.RULE_EXTRA_VARIABLES," supported")),null;if(!t[o+2])return console.warn("Malformed rule expression. Rule language expression missing value"),null;r[a].ruleConditionConfigurations.push({variables:S(!0,n,i)}),s++;var u=E.a[t[o+1].value];c.value===y.a.LANGUAGE?(u===E.b.IS?u=E.b.IS_SELECTED:u===E.b.IS_NOT&&(u=E.b.IS_NOT_SELECTED),r[a].ruleConditionConfigurations[s].selectedVariable=t[o+2].value):(r[a].ruleConditionConfigurations[s].selectedVariable=t[o].value,r[a].ruleConditionConfigurations[s].selectedValue=t[o+2].value),r[a].ruleConditionConfigurations[s].selectedOperator=u,o+=2;break;case b.n.CONTROL:if(r[a].ruleConditionConfigurations.push({variables:S(!0,n,i)}),s++,U(c.value,r[a].ruleConditionConfigurations[s].variables)){r[a].ruleConditionConfigurations[s].selectedVariable=F(c.value,t[o+2].value,r[a].ruleConditionConfigurations[s].variables);var d=E.a[t[o+1].value];d===E.b.IS?d=E.b.IS_CHECKED:d===E.b.IS_NOT&&(d=E.b.IS_NOT_CHECKED),r[a].ruleConditionConfigurations[s].selectedOperator=d,o+=2}else r[a].ruleConditionConfigurations[s].selectedVariable=c.value;break;case b.n.LOGICAL:"and"===c.value||"or"===c.value?r[a].ruleStatementConfigurations.push({selectedStatement:T.a[c.value]}):r[a].ruleConditionConfigurations[s].selectedOperator=E.a[c.value];break;case b.n.VALUE:r[a].ruleConditionConfigurations[s]?r[a].ruleConditionConfigurations[s].selectedValue=c.value:r[a].ruleConditionConfigurations.push({variables:S(!0,n,i),selectedVariable:"0"});break;default:console.warn("Invalid rule expression 'type' type: ".concat(c.type))}}}(e[a].expression)},o=0,s=e.length;o<s;o++)a(o);return r},D=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){for(var a=[],o=e[i].getRuleConditionList(),s=e[i].getRuleStatementList(),l=0,c=o.length;l<c;l++){if("0"===o[l].getSelectedVariable())a.push({type:b.n.VALUE,value:!0});else if(o[l].isSelectedVariableAnyControlTypeOf([y.a.LANGUAGE])){var u=o[l].getSelectedOperator()===E.b.IS_SELECTED?E.a[E.b.IS]:E.a[E.b.IS_NOT];w(a,b.n.EXTRA,o[l].getSelectedVariableControlType(),u,o[l].getSelectedVariable())}else if(o[l].isSelectedVariableAnyControlTypeOf([y.a.COUPON_CODE,y.a.QUIZ_SCORE]))w(a,b.n.EXTRA,o[l].getSelectedVariableControlType(),E.a[o[l].getSelectedOperator()],o[l].getSelectedValue());else if(o[l].isSelectedVariableAnyControlTypeOf([h.a.CONTROL_TYPE_DROPDOWN])){var d=o[l].getSelectedOperator(),p=d===E.b.IS||d===E.b.IS_NOT?o[l].getNotificationSelectedValue():o[l].getSelectedValue();w(a,b.n.CONTROL,o[l].getSelectedVariable(),E.a[o[l].getSelectedOperator()],p)}else if(o[l].isSelectedVariableAnyControlTypeOf([h.a.CONTROL_TYPE_RADIO,h.a.CONTROL_TYPE_LIKERT_SCALE])){var _=o[l].getSelectedOperator()===E.b.IS_CHECKED?E.a[E.b.IS]:E.a[E.b.IS_NOT];w(a,b.n.CONTROL,o[l].getSelectedGroup(),_,o[l].getNotificationSelectedVariable())}else o[l].isSelectedVariableAnyControlTypeOf([h.a.CONTROL_TYPE_CHECKBOX])?w(a,b.n.CONTROL,o[l].getSelectedVariable(),E.a[o[l].getSelectedOperator()]):w(a,b.n.CONTROL,o[l].getSelectedVariable(),E.a[o[l].getSelectedOperator()],o[l].getSelectedValue());s[l]&&a.push({type:b.n.LOGICAL,value:T.a[s[l].getSelectedStatement()]})}var g=I(e[i].getRuleRecipients(),t);0===g.length&&(g=null),n.push({recipients:g,sendToOnly:e[i].getSendToOnly(),expression:a})}return n},w=function(e,t,n,i,r){e.push({type:b.n.EXPRESSION,value:[]});var a=e.length-1;e[a].value.push({type:t,value:n}),e[a].value.push({type:b.n.LOGICAL,value:i}),void 0!==r&&e[a].value.push({type:b.n.VALUE,value:r})},k=function(e,t){for(var n=[],i=0,r=t.length;i<r;i++)e.indexOf(t[i].value)>-1&&n.push(t[i]);return n},M=function(e,t){return{text:e,value:t||e}},x=function(e){for(var t,n="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(e),a=r.byteLength,o=a%3,s=a-o,l=0;l<s;l+=3)n+=i[(16515072&(t=r[l]<<16|r[l+1]<<8|r[l+2]))>>18]+i[(258048&t)>>12]+i[(4032&t)>>6]+i[63&t];return 1==o?(t=r[s],n+="".concat(i[(252&t)>>2]+i[(3&t)<<4],"==")):2==o&&(t=r[s]<<8|r[s+1],n+="".concat(i[(64512&t)>>10]+i[(1008&t)>>4]+i[(15&t)<<2],"=")),n},U=function(e,t){for(var n=0,i=t.length;n<i;n++)if(t[n].group&&t[n].group.id===e)return!0;return!1},F=function(e,t,n){for(var i=e,r=0,a=n.length;r<a;r++)if(n[r].group&&n[r].group.id===e&&n[r].text===t){i=n[r].value;break}return i},B=function(e){if(e){var t;switch(e.value){case b.a.USER_PHONE:t=m.a.getUiTranslatedString("edt_notifications_my_phone","My phone number");break;case b.a.USER_EMAIL:t=m.a.getUiTranslatedString("edt_notifications_my_email","My Email")}return t}},Y=function(e){for(var t="",n=0,i=e.length;n<i;n++)e[n].type===g.a.TAG?t="".concat(t).concat(e[n].value.trim()," "):t+=e[n].caption?e[n].caption.trim():e[n].value?e[n].value.trim():"";return t.trim()},V=function(e){return{type:g.a.TAG,value:e,caption:m.a.getUiTranslatedString("edt_notifications_deleted_field",C.DELETED_FIELD),isDeleted:!0,isRegularTag:!1}},H=function e(t,n){if(!n||!n.parent)return!1;var i=n.parent,r=Object(c.a)(t,(function(e){return e.hash===i})),a=[h.a.CONTAINER_TYPE_REPEATABLE,h.a.CONTAINER_TYPE_REPEATABLE_GROUP];return!(!r||!a.includes(r.type))||e(t,r)},G=function(){var e=document.querySelectorAll('[data-role="rules-email-overlay"] [data-type="tags"] > [data-role="values"] > [data-type="tag"]'),t=[];return Object(u.a)(e,(function(e){e.hasAttribute("data-value")&&t.push(e.getAttribute("data-value"))})),Object(d.a)(t)}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(35),u=function(){function e(){r()(this,e)}return o()(e,null,[{key:"getMouseButtonFromEvent",value:function(e){return this.isSafariOnMac?e.which:e.buttons}},{key:"init",value:function(){this.isSafariOnMac=""===c.a.meetsRequirements("mac * desktop safari *"),this.mobileOnAndroid=""===c.a.meetsRequirements("android * * * *"),""===c.a.meetsRequirements("* * mobile * *")?this.mobile=!0:this.mobile=!1}},{key:"isMobile",value:function(){return this.mobile}},{key:"isAndroid",value:function(){return this.mobileOnAndroid}},{key:"setCanMakeResize",value:function(e){this._canMakeResize=e}},{key:"canMakeResize",get:function(){return this._canMakeResize}}]),e}();l()(u,"isSafariOnMac",void 0),l()(u,"mobile",void 0),l()(u,"mobileOnAndroid",void 0),l()(u,"_canMakeResize",!0),u.init()},function(e,t,n){"use strict";var i=n(43),r=n.n(i),a=n(0),o=n.n(a),s=n(112),l=n.n(s),c=n(1),u=n(18),d=n(22),p=n(106),h=n(257),_=n(258),g=n(259),m=n(400),f=n(617),E=n(621),y=n(390);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0,n=t.payload,i=t.type;l()(t,["payload","type"]);switch(i){case d.a.INIT_THEME_PROPERTIES:return v({},e,{properties:v({},e.properties,{},n)});case d.a.UPDATE_THEME_PROPERTY:var r=n.name,a=n.value,o=Object(m.a)(e.properties);return Object(E.a)(o,r,a,Object),v({},e,{properties:v({},o)});default:return v({},e)}};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return I})),n.d(t,"q",(function(){return R})),n.d(t,"e",(function(){return S})),n.d(t,"d",(function(){return L})),n.d(t,"c",(function(){return D})),n.d(t,"f",(function(){return w})),n.d(t,"g",(function(){return k})),n.d(t,"n",(function(){return M})),n.d(t,"j",(function(){return x})),n.d(t,"m",(function(){return U})),n.d(t,"i",(function(){return F})),n.d(t,"h",(function(){return B})),n.d(t,"o",(function(){return Y})),n.d(t,"l",(function(){return V})),n.d(t,"p",(function(){return H})),n.d(t,"k",(function(){return G})),n.d(t,"b",(function(){return O}));var I=[],R={properties:{}},P={origin:null,activeState:null},N={id:null,controls:[],settings:{isHipaa:!1,isApprovalOffSubmissionChecked:!1},isActivePaymentEnabled:!1,isLoading:!0,name:"",options:{direction:c.G.LEFT_TO_RIGHT}},A={emails:[],isSMTPActive:!1},S={navigation:P,form:N,notifications:A,action:{type:null,payload:null},activePaywall:_.b,alerts:g.b,emailValidationModal:h.b,theme:R,activeHotspots:I},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0,n=t.payload,i=t.type;l()(t,["payload","type"]);switch(i){case d.a.NAVIGATE:return C({},e,{origin:e.activeState,activeState:n});default:return C({},e)}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0,n=t.payload,i=t.type;l()(t,["payload","type"]);switch(i){case d.a.SET_BUILDER_LOADING_STATE:return C({},e,{isLoading:!!n});case d.a.SET_FORM_ID:return C({},e,{id:n});case d.a.SET_FORM_NAME:return C({},e,{name:n});case d.a.INIT_FORM_OPTIONS:var a=Object(m.a)(e.options);return C({},e,{options:Object(f.a)(a,n)});case d.a.UPDATE_FORM_OPTION:var o=n.name,s=n.value,c=Object(m.a)(e);return Object(E.a)(c,o,s,Object),C({},c);case d.a.SET_FORM_HIPAA:return C({},e,{settings:C({},e.settings,{isHipaa:n})});case d.a.INIT_FORM_CONTROLS:return C({},e,{controls:n});case d.a.UPDATE_CONTROL_PROPERTY:var u=Object(p.i)(e.controls,n);return C({},e,{controls:r()(u)});case d.a.SET_SELECTED_CONTROL:var h=e.controls.map((function(e){return e.id===n.id?C({},e,{isSelected:n.isSelected}):e}));return C({},e,{controls:h});case d.a.UNSELECT_ALL_CONTROLS:var _=e.controls.map((function(e){return C({},e,{isSelected:!1})}));return C({},e,{controls:_});case d.a.APPEND_CONTROL:var g=Object(p.d)(n);return C({},e,{controls:[].concat(r()(e.controls),r()(g))});case d.a.APPEND_UNIQUE_CONTROL:if(Object(p.c)(n,e))return C({},e);var y=Object(p.d)(n);return C({},e,{controls:[].concat(r()(e.controls),r()(y))});case d.a.UPDATE_CONTROLS_IDS:var T=Object(p.h)(e.controls,n);return C({},e,{controls:r()(T)});case d.a.UPDATE_CONTROL_HASH:var v=Object(p.g)(e.controls,n);return C({},e,{controls:r()(v)});case d.a.REMOVE_CONTROLS:var O=Object(p.e)(e.controls,n);return C({},e,{controls:r()(O)});case d.a.UPDATE_PAYMENT_ACTIVE_STATE:return C({},e,{isActivePaymentEnabled:n});case d.a.UPDATE_APPROVAL_OF_SUBMISSION:return C({},e,{settings:C({},e.settings,{isApprovalOffSubmissionChecked:n})});default:return C({},e)}},w=function(){var e=arguments.length>1?arguments[1]:void 0;return e},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,n=t.payload,i=t.type;l()(t,["payload","type"]);switch(i){case d.a.SET_EMAIL_NOTIFICATIONS:return C({},e,{emails:r()(n)});case d.a.ADD_NOTIFICATION:switch(n.type){case u.l.EMAIL:return C({},e,{emails:[].concat(r()(e.emails),[n])})}case d.a.UPDATE_NOTIFICATION:var a=Object(p.j)(e,n);return C({},e,{emails:a.emails});case d.a.REMOVE_NOTIFICATION:var o=Object(p.f)(e,n);return C({},e,{emails:o.emails});default:return C({},e)}},M=function(e){return e.form.settings.isHipaa},x=function(e){return e.form.id},U=function(e){return e.form.isActivePaymentEnabled},F=function(e){return e.form.controls},B=function(e){return e.navigation.activeState},Y=function(e){return e.action},V=function(e){return e.form.settings.isApprovalOffSubmissionChecked},H=function(e){return function(t){return Object(y.a)(t.theme.properties,e,null)}},G=function(e){return function(t){return Object(y.a)(t.form.options,e,null)}}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n(52),r=n.n(i),a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(79),u=n(1),d=n(9),p=n(71),h=n(131),_=n(13),g=function(){function e(){o()(this,e)}return l()(e,null,[{key:"setNewUrl",value:function(t,n){var i,r=e.getUrlVars(),a=r.tabid||null,o=r.startup_panel||null;i=o?window.location.href.replace("&startup_panel=".concat(o),"&startup_panel=".concat(t)):"".concat(window.location.href,"&startup_panel=").concat(t),a?i=n&&e.getPublishTabIdByTagName(n)?i.replace("&tabid=".concat(a),"&tabid=".concat(e.getPublishTabIdByTagName(n))):i.replace("&tabid=".concat(a),""):n&&e.getPublishTabIdByTagName(n)&&(i="".concat(i,"&tabid=").concat(e.getPublishTabIdByTagName(n))),history.pushState(null,null,i),window.onpopstate=function(e){location.reload()}}},{key:"getUrlVars",value:function(e){var t=e||window.location.href,n={};return t.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(e,t,i){n[t]=i})),n}},{key:"getPublishRoute",value:function(){var e=p.a.getInstance(),t=h.a.getInstance();return e.isPublishV2Active()?t.isWeeblyPlatform()?u.d.PUBLISH_WEEBLY:t.isSalesforcePlatform()?u.d.PUBLISH_SALESFORCE:t.isShopifyPlatform()?u.d.PUBLISH_SHOPIFY:t.isBigCommercePlatform()?u.d.PUBLISH_BIG_COMMERCE:t.isWixPlatform()?u.d.PUBLISH_WIX_PLATFORMS:u.d.PUBLISH_GET_LINK:u.jb.PUBLISH_V1}},{key:"getPublishTabIdByTagName",value:function(e){var t=1;switch(e){case d.b.PUBLISH_EMBED:case d.b.JAVASCRIPT:t=2;break;case d.b.SHOPIFY_PLATFORM:case d.b.SHOPIFY_PUBLISH:t=13;break;case d.b.BIG_COMMERCE_PLATFORM:case d.b.BIG_COMMERCE_PUBLISH:t=14;break;case d.b.FACEBOOK_PLATFORM:case d.b.FACEBOOK_PUBLISH:t=5;break;case d.b.BLOGGER:t=4;break;case d.b.WORDPRESS:t=6;break;case d.b.JOOMLA:t=9;break;case d.b.SALESFORCE:t=10;break;case d.b.SALESFORCE_COMMUNITY:t=16;break;case d.b.UNBOUNCE:t=11;break;case d.b.GOOGLE:t=7;break;case d.b.TWITTER:t=8;break;case d.b.WIX:t=17}return t}},{key:"computeStaticUrl",value:function(e,t,n){switch(e){case u.d.EDITOR:return"index.php?p=edit_fields&id=".concat(t,"&startup_panel=editor&click_from=").concat(n);case u.d.THEMES:return"index.php?p=edit_fields&id=".concat(t,"&startup_panel=options&click_from=").concat(n);case u.d.TRANSLATIONS:return"index.php?p=edit_fields&id=".concat(t,"&startup_panel=translations&click_from=").concat(n);case u.d.PUBLISH_GET_LINK:case u.d.PUBLISH_WEEBLY:return"index.php?p=edit_fields&id=".concat(t,"&startup_panel=publish-form&click_from=").concat(n,"&tabid=1");case u.d.PUBLISH_WIX_PLATFORMS:return"index.php?p=edit_fields&id=".concat(t,"&startup_panel=publish-form&click_from=").concat(n,"&tabid=").concat(u.cb.PLATFORM_WIX);case u.d.PUBLISH_SALESFORCE:return"index.php?p=edit_fields&id=".concat(t,"&startup_panel=publish-form&click_from=").concat(n,"&tabid=10");case u.d.PUBLISH_SHOPIFY:case u.d.PUBLISH_BIG_COMMERCE:return"index.php?p=edit_fields&id=".concat(t,"&startup_panel=publish-form&click_from=").concat(n);case u.jb.PUBLISH_V1:return"index.php?tabid=1&p=publish&id=".concat(t,"&click_from=").concat(n);case u.d.PAYMENTS:return"index.php?p=edit_fields&id=".concat(t,"&startup_panel=payments&click_from=").concat(n);case u.jb.PAYMENTS_V1:return"index.php?p=settings&id=".concat(t,"&tab=").concat(c.a.PAYMENTS,"&click_from=").concat(n);case u.jb.ADVANCED:return"index.php?p=settings&id=".concat(t,"&tab=").concat(c.a.ADVANCED,"&click_from=").concat(n);case u.jb.THANK_YOU_PAGE:return"index.php?p=settings&id=".concat(t,"&tab=").concat(c.a.THANK_YOU_PAGE,"&click_from=").concat(n);case u.jb.APPLICATIONS:return"index.php?p=settings&id=".concat(t,"&tab=").concat(c.a.APPLICATIONS,"&click_from=").concat(n);case u.jb.RULES:return"index.php?p=settings&id=".concat(t,"&tab=").concat(c.a.RULES,"&click_from=").concat(n);case u.jb.SECURITY:return"index.php?p=settings&id=".concat(t,"&tab=").concat(c.a.SECURITY,"&click_from=").concat(n);case u.d.NOTIFICATIONS:return"index.php?p=edit_fields&id=".concat(t,"&startup_panel=notifications&click_from=").concat(n);case u.jb.OLD_NOTIFICATIONS:return"index.php?p=settings&id=".concat(t,"&tab=").concat(c.a.NOTIFICATIONS,"&click_from=settings");case u.gb.SALESFORCE_MAPPING:return"index.php?p=salesforce_objects&id=".concat(t,"&tab=").concat(u.hb.MAPPING,"&click_from=").concat(n);case u.gb.SALESFORCE_MAPPING_V3:return"index.php?p=salesforce-mapping&id=".concat(t,"&click_from=").concat(n);case u.gb.SALESFORCE_PREFILL:return"index.php?p=salesforce_objects&id=".concat(t,"&tab=").concat(u.hb.PREFILL,"&click_from=").concat(n);case u.gb.SALESFORCE_LOOKUP:return"index.php?p=salesforce_objects&id=".concat(t,"&tab=").concat(u.hb.LOOKUP,"&click_from=").concat(n);case u.gb.SALESFORCE_QUERY:return"index.php?p=salesforce_objects&id=".concat(t,"&tab=").concat(u.hb.QUERY,"&click_from=").concat(n);case u.gb.SALESFORCE_SETTINGS:return"index.php?p=salesforce_objects&id=".concat(t,"&tab=").concat(u.hb.SETTINGS,"&click_from=").concat(n);case u.jb.CHAIN_APPROVALS:return"index.php?p=settings&id=".concat(t,"&tab=").concat(c.a.CHAIN_APPROVALS,"&click_from=").concat(n);default:return"index.php?p=dashboard&click_from=".concat(n)}}},{key:"computePreviewUrl",value:function(){var t=_.a.computeFormPublishDomain(),n=e.getUrlVars(),i=location.protocol,r="form-";return t!==d.a.FORM&&t!==d.a.FORM_EU||(r=""),"".concat(i,"//").concat(t,"/").concat(r).concat(n.id,"/")}},{key:"setRawUrl",value:function(e){window.location.href=e}},{key:"serializeObject",value:function(e){return Object.entries(e).map((function(e){var t=r()(e,2),n=t[0],i=t[1];return"".concat(n,"=").concat(encodeURIComponent(i))})).join("&")}}]),e}()},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(20),r=n.n(i),a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(0),u=n.n(c),d=function(){function e(){o()(this,e)}return l()(e,null,[{key:"makePropertyHiddenInInspectorPanel",value:function(e,t,n){switch(!0){case null===e:break;case"string"===typeof e:if(""===e)throw new Error("Invalid argument: propertyFQN! Empty strings not allowed!");break;case r()(e,RegExp):break;default:throw new Error("Invalid argument: propertyFQN: string|RegExp expected!")}switch(!0){case null===t:break;case"string"===typeof t:if(""===t)throw new Error("Invalid argument: propertyType! Empty strings not allowed!");break;case r()(t,RegExp):break;default:throw new Error("Invalid argument: propertyFQN: string|RegExp expected!")}switch(!0){case null===n:case"number"===typeof n:break;case r()(n,Array):if(!n.length)throw new Error("Invalid argument: int[] expected!");break;default:throw new Error("Invalid argument: int|int[]|null expected!")}this.hiddenProperties.push({propertyName:e,propertyType:t,elementList:n})}},{key:"isPropertyEditable",value:function(e,t){for(var n,i,a,o,s,l=t.getTypeId(),c=0,u=this.hiddenProperties.length;c<u;c++){if(null!==(a=this.hiddenProperties[c].elementList)){if("number"===typeof a&&a!==l)continue;if(r()(a,Array)&&-1===a.indexOf(l))continue}if(o=!1,s=!1,null!==(n=this.hiddenProperties[c].propertyName)?"string"===typeof n?o=n===e.name:r()(n,RegExp)&&(o=n.test(e.name)):o=!0,null!==(i=this.hiddenProperties[c].propertyType)?"string"===typeof i?s=i===e.type:r()(i,RegExp)&&(s=i.test(e.type)):s=!0,o&&s)return!1}return!0}}]),e}();u()(d,"hiddenProperties",[])},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(121),u=function(){function e(){r()(this,e),l()(this,"tracker",void 0),l()(this,"isDebugOn",!1),l()(this,"cookieService",void 0),this.cookieService=new c.a,window.CFTracker?(this.tracker=window.CFTracker,this.checkDebugger()):(this.tracker={track:function(){return!1}},console.error("CFTracker is not defined"))}return o()(e,[{key:"track",value:function(e,t,n){this.tracker.track(e,t,n),this.debugEvent(e,t,n)}},{key:"checkDebugger",value:function(){("local.123contactform.com"===location.hostname||this.cookieService.checkCookie("123MetricsDebug"))&&(this.isDebugOn=!0)}},{key:"debugEvent",value:function(e,t,n){this.isDebugOn&&(console.info("Tracking event: ".concat(e)),t&&console.info("Event has value: ".concat(JSON.stringify(t))),n&&console.info("Event has tags: ".concat(JSON.stringify(n))))}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();l()(u,"instance",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=function(){function e(){r()(this,e)}return o()(e,null,[{key:"getDecoratedFormProperty",value:function(e,t){var n=this.deduceLabelFromPropertyName(e.name),i={name:e.name,type:e.type,isColor:!1,category:"form",categoryI18n:this.CATEGORY_FORM_I18N,isAdvanced:!1,keywords:this.deduceKeywordsFromPropertyName(e.name),label:n,target:this.CATEGORY_FORM,value:t,i18n:this.deduceI18nPropertyLabelTranslation(e.name),keywordsI18n:this.deduceI18nPropertyKeywordsTranslation(e.name)};switch(e.name){case"options.widthUnit":case"options.widthInPixels":case"options.widthInPercents":case"options.direction":i.category=this.CATEGORY_LAYOUT,i.subcategory=this.SUBCATEGORY_LAYOUT_FORM,i.categoryI18n=this.CATEGORY_LAYOUT_I18N;break;case"options.labelTextAlignment":case"options.labelPlacement":i.category=this.CATEGORY_FIELDS,i.categoryI18n=this.CATEGORY_FIELDS_I18N,i.subcategory=this.SUBCATEGORY_FIELDS_LABEL;break;case"options.instructionsPlacement":case"options.instructionsTextAlignment":i.category=this.CATEGORY_FIELDS,i.categoryI18n=this.CATEGORY_FIELDS_I18N,i.subcategory=this.SUBCATEGORY_FIELDS_INSTRUCTIONS;break;case"options.labelWidthInUnits":i.category=this.CATEGORY_FIELDS,i.categoryI18n=this.CATEGORY_FIELDS_I18N,i.subcategory=this.SUBCATEGORY_FIELDS_FIELD}return i}},{key:"getDecoratedThemeProperty",value:function(e){var t={name:e.name,isColor:e.isColor,value:e.value,category:null,categoryI18n:null,isAdvanced:null,keywords:null,label:null,target:"theme",type:"string",i18n:null,keywordsI18n:null};switch(!0){case this.LAYOUT_FORM_PROPERTIES_IN_THEME.includes(e.name):t.category=this.CATEGORY_LAYOUT,t.subcategory=this.SUBCATEGORY_LAYOUT_FORM,t.categoryI18n=this.CATEGORY_LAYOUT_I18N,t.isAdvanced=!1;break;case this.LAYOUT_PAGE_PROPERTIES_IN_THEME.includes(e.name):t.category=this.CATEGORY_LAYOUT,t.subcategory=this.SUBCATEGORY_LAYOUT_PAGE,t.categoryI18n=this.CATEGORY_LAYOUT_I18N,t.isAdvanced=!1;break;case this.BACKGROUND_FORM_PROPERTIES_IN_THEME.includes(e.name):t.category=this.CATEGORY_BACKGROUND,t.subcategory=this.SUBCATEGORY_BACKGROUND_FORM,t.categoryI18n=this.CATEGORY_BACKGROUND_I18N,t.isAdvanced=!1;break;case this.BACKGROUND_PAGE_PROPERTIES_IN_THEME.includes(e.name):t.category=this.CATEGORY_BACKGROUND,t.subcategory=this.SUBCATEGORY_BACKGROUND_PAGE,t.categoryI18n=this.CATEGORY_BACKGROUND_I18N,t.isAdvanced=!1;break;case this.FIELDS_LABEL_PROPERTIES_IN_THEME.includes(e.name):t.category=this.CATEGORY_FIELDS,t.subcategory=this.SUBCATEGORY_FIELDS_LABEL,t.categoryI18n=this.CATEGORY_FIELDS_I18N,t.isAdvanced=!1;break;case this.FIELDS_INSTRUCTIONS_PROPERTIES_IN_THEME.includes(e.name):t.category=this.CATEGORY_FIELDS,t.subcategory=this.SUBCATEGORY_FIELDS_INSTRUCTIONS,t.categoryI18n=this.CATEGORY_FIELDS_I18N,t.isAdvanced=!1;break;case this.FIELDS_INPUT_PROPERTIES_IN_THEME.includes(e.name):t.category=this.CATEGORY_FIELDS,t.subcategory=this.SUBCATEGORY_FIELDS_INPUT,t.categoryI18n=this.CATEGORY_FIELDS_I18N,t.isAdvanced=!1;break;case this.FIELDS_FIELD_PROPERTIES_IN_THEME.includes(e.name):t.category=this.CATEGORY_FIELDS,t.subcategory=this.SUBCATEGORY_FIELDS_FIELD,t.categoryI18n=this.CATEGORY_FIELDS_I18N,t.isAdvanced=!1;break;case this.FIELDS_HOVER_PROPERTIES_IN_THEME.includes(e.name):t.category=this.CATEGORY_FIELDS,t.subcategory=this.SUBCATEGORY_FIELDS_HOVER,t.categoryI18n=this.CATEGORY_FIELDS_I18N,t.isAdvanced=!1;break;case this.FIELDS_FOCUS_PROPERTIES_IN_THEME.includes(e.name):t.category=this.CATEGORY_FIELDS,t.subcategory=this.SUBCATEGORY_FIELDS_FOCUS,t.categoryI18n=this.CATEGORY_FIELDS_I18N,t.isAdvanced=!1;break;case this.FIELDS_ERROR_PROPERTIES_IN_THEME.includes(e.name):t.category=this.CATEGORY_FIELDS,t.subcategory=this.SUBCATEGORY_FIELDS_ERROR,t.categoryI18n=this.CATEGORY_FIELDS_I18N,t.isAdvanced=!1;break;case this.FIELDS_CHOICES_PROPERTIES_IN_THEME.includes(e.name):t.category=this.CATEGORY_FIELDS,t.subcategory=this.SUBCATEGORY_FIELDS_CHOICES,t.categoryI18n=this.CATEGORY_FIELDS_I18N,t.isAdvanced=!1;break;case this.BUTTONS_BUTTON_PROPERTIES_IN_THEME.includes(e.name):t.category=this.CATEGORY_BUTTONS,t.subcategory=this.SUBCATEGORY_BUTTONS_BUTTON,t.categoryI18n=this.CATEGORY_BUTTONS_I18N,t.isAdvanced=!1;break;case this.BUTTONS_PRIMARY_PROPERTIES_IN_THEME.includes(e.name):t.category=this.CATEGORY_BUTTONS,t.subcategory=this.SUBCATEGORY_BUTTONS_PRIMARY,t.categoryI18n=this.CATEGORY_BUTTONS_I18N,t.isAdvanced=!1;break;case this.BUTTONS_SECONDARY_PROPERTIES_IN_THEME.includes(e.name):t.category=this.CATEGORY_BUTTONS,t.subcategory=this.SUBCATEGORY_BUTTONS_SECONDARY,t.categoryI18n=this.CATEGORY_BUTTONS_I18N,t.isAdvanced=!1}return t.i18n=this.deduceI18nPropertyLabelTranslation(t.name),t.keywordsI18n=this.deduceI18nPropertyKeywordsTranslation(t.name),t.label=this.deduceLabelFromPropertyName(t.name),t.keywords=this.deduceKeywordsFromPropertyName(t.name),t.name=t.name.replace(/_/g,"."),t}},{key:"deduceKeywordsFromPropertyName",value:function(e){return this.THEME_PROPERTIES_LABEL_NAMES[e]&&this.THEME_PROPERTIES_LABEL_NAMES[e].keywords?this.THEME_PROPERTIES_LABEL_NAMES[e].keywords:e.split("_").join(" ")}},{key:"deduceLabelFromPropertyName",value:function(e){if(void 0!==this.THEME_PROPERTIES_LABEL_NAMES[e]&&this.THEME_PROPERTIES_LABEL_NAMES[e].text)return this.THEME_PROPERTIES_LABEL_NAMES[e].text;for(var t=e.split("_"),n=0,i=t.length;n<i;n++)t[n]=String(t[n].charAt(0)||"").toUpperCase()+t[n].slice(1);return t.join(" ")}},{key:"getThemeCategoryIndex",value:function(e){switch(e){case this.CATEGORY_FORM:return this.INDEX_CATEGORY_FORM;case this.CATEGORY_PAGE:return this.INDEX_CATEGORY_PAGE;case this.CATEGORY_LABEL:return this.INDEX_CATEGORY_LABEL;case this.CATEGORY_INSTRUCTIONS:return this.INDEX_CATEGORY_INSTRUCTIONS;case this.CATEGORY_INPUT:return this.INDEX_CATEGORY_INPUT;case this.CATEGORY_FIELD:return this.INDEX_CATEGORY_FIELD;case this.CATEGORY_FIELD_HOVER:return this.INDEX_CATEGORY_FIELD_HOVER;case this.CATEGORY_FIELD_FOCUS:return this.INDEX_CATEGORY_FIELD_FOCUS;case this.CATEGORY_ERROR:return this.INDEX_CATEGORY_ERROR;case this.CATEGORY_BUTTON:return this.INDEX_CATEGORY_BUTTON;case this.CATEGORY_PRIMARY_BUTTON:return this.INDEX_CATEGORY_PRIMARY_BUTTON;case this.CATEGORY_SECONDARY_BUTTON:return this.INDEX_CATEGORY_SECONDARY_BUTTON;case this.CATEGORY_CHOICES:return this.INDEX_CATEGORY_CHOICES;case this.CATEGORY_EDITOR:return this.INDEX_CATEGORY_EDITOR;case this.CATEGORY_TABLE:return this.INDEX_CATEGORY_TABLE;case this.CATEGORY_OTHER:default:return this.INDEX_CATEGORY_OTHER}}},{key:"getSortedDecoratedThemeProperties",value:function(e){return t=this,e.sort((function(e,n){var i=t.getThemeCategoryIndex(e.category),r=t.getThemeCategoryIndex(n.category);if(i!==r)return i-r;var a=e.name.replace(/\./g,"_"),o=n.name.replace(/\./g,"_");return~~(t.THEME_PROPERTIES_LABEL_NAMES[a]||t.THEME_PROPERTIES_LABEL_NAMES[e.name]||{index:null}).index-~~(t.THEME_PROPERTIES_LABEL_NAMES[o]||t.THEME_PROPERTIES_LABEL_NAMES[n.name]||{index:null}).index}));var t}},{key:"deduceI18nPropertyLabelTranslation",value:function(e){return this.THEME_PROPERTIES_LABEL_NAMES[e].i18n||e}},{key:"deduceI18nPropertyKeywordsTranslation",value:function(e){return this.THEME_PROPERTIES_LABEL_NAMES[e].keywordsI18n||e}}]),e}();l()(c,"i18n",void 0),l()(c,"CATEGORY_QUICK_SETUP","quick setup"),l()(c,"CATEGORY_QUICK_SETUP_I18N","themeCategory_quickSetup"),l()(c,"CATEGORY_LAYOUT","layout"),l()(c,"CATEGORY_LAYOUT_I18N","themeCategory_layout"),l()(c,"CATEGORY_BACKGROUND","background"),l()(c,"CATEGORY_BACKGROUND_I18N","themeCategory_background"),l()(c,"CATEGORY_FIELDS","fields"),l()(c,"CATEGORY_FIELDS_I18N","themeCategory_fields"),l()(c,"CATEGORY_BUTTONS","buttons"),l()(c,"CATEGORY_BUTTONS_I18N","themeCategory_buttons"),l()(c,"SUBCATEGORY_LAYOUT_FORM","layout-form"),l()(c,"SUBCATEGORY_LAYOUT_PAGE","layout-page"),l()(c,"SUBCATEGORY_BACKGROUND_FORM","background-form"),l()(c,"SUBCATEGORY_BACKGROUND_PAGE","background-page"),l()(c,"SUBCATEGORY_FIELDS_LABEL","fields-label"),l()(c,"SUBCATEGORY_FIELDS_INSTRUCTIONS","fields-instructions"),l()(c,"SUBCATEGORY_FIELDS_INPUT","fields-input"),l()(c,"SUBCATEGORY_FIELDS_FIELD","fields-field"),l()(c,"SUBCATEGORY_FIELDS_HOVER","fields-hover"),l()(c,"SUBCATEGORY_FIELDS_FOCUS","fields-focus"),l()(c,"SUBCATEGORY_FIELDS_ERROR","fields-error"),l()(c,"SUBCATEGORY_FIELDS_CHOICES","fields-choices"),l()(c,"SUBCATEGORY_BUTTONS_BUTTON","buttons-button"),l()(c,"SUBCATEGORY_BUTTONS_PRIMARY","buttons-primary"),l()(c,"SUBCATEGORY_BUTTONS_SECONDARY","buttons-secondary"),l()(c,"CATEGORY_FORM","form"),l()(c,"CATEGORY_FORM_I18N","edt_theme_UI_category_form"),l()(c,"INDEX_CATEGORY_FORM",1),l()(c,"CATEGORY_PAGE","page"),l()(c,"CATEGORY_PAGE_I18N","edt_theme_UI_category_page"),l()(c,"INDEX_CATEGORY_PAGE",2),l()(c,"CATEGORY_LABEL","label"),l()(c,"CATEGORY_LABEL_I18N","edt_theme_UI_category_label"),l()(c,"INDEX_CATEGORY_LABEL",3),l()(c,"CATEGORY_INSTRUCTIONS","instructions"),l()(c,"CATEGORY_INSTRUCTIONS_I18N","edt_theme_UI_category_instructions"),l()(c,"INDEX_CATEGORY_INSTRUCTIONS",4),l()(c,"CATEGORY_INPUT","input"),l()(c,"CATEGORY_INPUT_I18N","edt_theme_UI_category_input"),l()(c,"INDEX_CATEGORY_INPUT",5),l()(c,"CATEGORY_FIELD","field"),l()(c,"CATEGORY_FIELD_I18N","edt_theme_UI_category_field"),l()(c,"INDEX_CATEGORY_FIELD",6),l()(c,"CATEGORY_FIELD_HOVER","field hover"),l()(c,"CATEGORY_FIELD_HOVER_I18N","edt_theme_UI_category_field_hover"),l()(c,"INDEX_CATEGORY_FIELD_HOVER",7),l()(c,"CATEGORY_FIELD_FOCUS","field focus"),l()(c,"CATEGORY_FIELD_FOCUS_I18N","edt_theme_UI_category_field_focus"),l()(c,"INDEX_CATEGORY_FIELD_FOCUS",8),l()(c,"CATEGORY_ERROR","error"),l()(c,"CATEGORY_ERROR_I18N","edt_theme_UI_category_error"),l()(c,"INDEX_CATEGORY_ERROR",9),l()(c,"CATEGORY_BUTTON","button"),l()(c,"CATEGORY_BUTTON_I18N","edt_theme_UI_category_button"),l()(c,"INDEX_CATEGORY_BUTTON",10),l()(c,"CATEGORY_PRIMARY_BUTTON","primary button"),l()(c,"CATEGORY_PRIMARY_BUTTON_I18N","edt_theme_UI_category_primary_button"),l()(c,"INDEX_CATEGORY_PRIMARY_BUTTON",11),l()(c,"CATEGORY_SECONDARY_BUTTON","secondary button"),l()(c,"CATEGORY_SECONDARY_BUTTON_I18N","edt_theme_UI_category_secondary_button"),l()(c,"INDEX_CATEGORY_SECONDARY_BUTTON",12),l()(c,"CATEGORY_CHOICES","choices"),l()(c,"CATEGORY_CHOICES_I18N","edt_theme_UI_category_choices"),l()(c,"INDEX_CATEGORY_CHOICES",13),l()(c,"CATEGORY_EDITOR","editor"),l()(c,"CATEGORY_EDITOR_I18N","edt_theme_UI_category_editor"),l()(c,"INDEX_CATEGORY_EDITOR",14),l()(c,"CATEGORY_TABLE","table"),l()(c,"CATEGORY_TABLE_I18N","edt_theme_UI_category_table"),l()(c,"INDEX_CATEGORY_TABLE",16),l()(c,"CATEGORY_OTHER","other"),l()(c,"CATEGORY_OTHER_I18N","edt_theme_UI_category_other"),l()(c,"INDEX_CATEGORY_OTHER",15),l()(c,"THEME_PROPERTIES_LABEL_NAMES",{"options.widthUnit":{text:"Form width in",index:1,i18n:"edt_theme_UI_property_options_widthUnit",keywords:"form width",keywordsI18n:"edt_theme_UI_keywords_options_widthUnit"},"options.widthInPixels":{text:"Form width (px)",index:1,i18n:"edt_theme_UI_property_options_widthInPixels",keywords:"form width",keywordsI18n:"edt_theme_UI_keywords_options_widthInPixels"},"options.widthInPercents":{text:"Form width (%)",index:1,i18n:"edt_theme_UI_property_options_widthInPercents",keywords:"form width",keywordsI18n:"edt_theme_UI_keywords_options_widthInPercents"},"options.masterFontFamily":{text:"Font",index:1,i18n:"edt_theme_UI_property_form_font_family",keywords:"font",keywordsI18n:"edt_theme_UI_keywords_form_font_family"},"options.masterTextColor":{text:"Text color",index:1,i18n:"edt_theme_UI_property_label_normal_color",keywords:"text color",keywordsI18n:"edt_theme_UI_keywords_label_normal_color"},page_padding_top:{text:"Header padding",index:2,i18n:"edt_theme_UI_property_page_padding_top",keywords:"form header padding",keywordsI18n:"edt_theme_UI_keywords_page_padding_top"},page_padding_bottom:{text:"Footer padding",index:3,i18n:"edt_theme_UI_property_page_padding_bottom",keywords:"form footer padding",keywordsI18n:"edt_theme_UI_keywords_page_padding_bottom"},page_padding_left:{text:"Left padding",index:4,i18n:"edt_theme_UI_property_page_padding_left",keywords:"form left padding",keywordsI18n:"edt_theme_UI_keywords_page_padding_left"},page_padding_right:{text:"Right padding",index:5,i18n:"edt_theme_UI_property_page_padding_right",keywords:"form right padding",keywordsI18n:"edt_theme_UI_keywords_page_padding_right"},"options.direction":{text:"Form direction",index:6,i18n:"edt_theme_UI_property_options_direction",keywords:"form text direction alignment",keywordsI18n:"edt_theme_UI_keywords_options_direction"},page_background_color:{text:"Background",index:7,i18n:"edt_theme_UI_property_page_background_color",keywords:"form background color",keywordsI18n:"edt_theme_UI_keywords_page_background_color"},page_background_image:{text:"Background image",index:8,i18n:"edt_theme_UI_property_page_background_image",keywords:"page background image",keywordsI18n:"edt_theme_UI_keywords_page_background_image"},page_background_size:{text:"Background size",index:9,i18n:"edt_theme_UI_property_page_background_size",keywords:"page background size",keywordsI18n:"edt_theme_UI_keywords_page_background_size"},page_background_position:{text:"Background position",index:10,i18n:"edt_theme_UI_property_page_background_position",keywords:"page background position",keywordsI18n:"edt_theme_UI_keywords_page_background_position"},page_background_repeat:{text:"Background repeat",index:11,i18n:"edt_theme_UI_property_page_background_repeat",keywords:"page background repeat",keywordsI18n:"edt_theme_UI_keywords_page_background_repeat"},page_background_attachment:{text:"Background fix position",index:12,i18n:"edt_theme_UI_property_page_background_attachment",keywords:"page background scroll",keywordsI18n:"edt_theme_UI_keywords_page_background_attachment"},page_border_color:{text:"Border",index:13,i18n:"edt_theme_UI_property_page_border_color",keywords:"form border color",keywordsI18n:"edt_theme_UI_keywords_page_border_color"},page_border_style:{text:"Border style",index:14,i18n:"edt_theme_UI_property_page_border_style",keywords:"form border style",keywordsI18n:"edt_theme_UI_keywords_page_border_style"},page_border_width:{text:"Border thickness",index:15,i18n:"edt_theme_UI_property_page_border_width",keywords:"form border thickness width",keywordsI18n:"edt_theme_UI_keywords_page_border_width"},page_shadow_visibility:{text:"Shadow",index:16,i18n:"edt_theme_UI_property_page_shadow_visibility",keywords:"form shadow",keywordsI18n:"edt_theme_UI_keywords_page_shadow_visibility"},form_color:{text:"Headings color",index:17,i18n:"edt_theme_UI_property_form_color",keywords:"form headings text font color",keywordsI18n:"edt_theme_UI_keywords_form_color"},colors_selected_color:{text:"Decorations color",index:18,i18n:"edt_theme_UI_property_colors_selected_color",keywords:"form decorations color",keywordsI18n:"edt_theme_UI_keywords_colors_selected_color"},page_margin_top:{text:"Top padding",index:1,i18n:"edt_theme_UI_property_page_margin_top",keywords:"page top padding",keywordsI18n:"edt_theme_UI_keywords_page_margin_top"},page_margin_bottom:{text:"Bottom padding",index:2,i18n:"edt_theme_UI_property_page_margin_bottom",keywords:"page bottom padding",keywordsI18n:"edt_theme_UI_keywords_page_margin_bottom"},form_background_color:{text:"Background",index:3,i18n:"edt_theme_UI_property_form_background_color",keywords:"page background color",keywordsI18n:"edt_theme_UI_keywords_form_background_color"},form_background_image:{text:"Background image",index:4,i18n:"edt_theme_UI_property_form_background_image",keywords:"page background image",keywordsI18n:"edt_theme_UI_keywords_form_background_image"},form_background_size:{text:"Background size",index:5,i18n:"edt_theme_UI_property_form_background_size",keywords:"page background size",keywordsI18n:"edt_theme_UI_keywords_form_background_size"},form_background_position:{text:"Background position",index:6,i18n:"edt_theme_UI_property_form_background_position",keywords:"page background position",keywordsI18n:"edt_theme_UI_keywords_form_background_position"},form_background_repeat:{text:"Background repeat",index:7,i18n:"edt_theme_UI_property_form_background_repeat",keywords:"page background repeat",keywordsI18n:"edt_theme_UI_keywords_form_background_repeat"},form_background_attachment:{text:"Background fix position",index:8,i18n:"edt_theme_UI_property_form_background_attachment",keywords:"page background fix position",keywordsI18n:"edt_theme_UI_keywords_form_background_attachment"},"options.labelPlacement":{text:"Placement",index:1,i18n:"edt_theme_UI_property_options_labelPlacement",keywords:"labels label placement",keywordsI18n:"edt_theme_UI_keywords_options_labelPlacement"},"options.labelTextAlignment":{text:"Alignment",index:2,i18n:"edt_theme_UI_property_options_labelTextAlignment",keywords:"labels label alignment",keywordsI18n:"edt_theme_UI_keywords_options_labelTextAlignment"},form_font_family:{text:"Font",index:3,i18n:"edt_theme_UI_property_form_font_family",keywords:"labels label headings text font",keywordsI18n:"edt_theme_UI_keywords_form_font_family"},form_font_weight:{text:"Font weight",index:4,i18n:"edt_theme_UI_property_form_font_weight",keywords:"labels label headings text font weight",keywordsI18n:"edt_theme_UI_keywords_form_font_weight"},form_font_style:{text:"Font style",index:5,i18n:"edt_theme_UI_property_form_font_style",keywords:"labels label headings text font style",keywordsI18n:"edt_theme_UI_keywords_form_font_style"},form_font_size:{text:"Font size",index:6,i18n:"edt_theme_UI_property_form_font_size",keywords:"labels label headings text font size",keywordsI18n:"edt_theme_UI_keywords_form_font_size"},form_font_line_height:{text:"Font line height",index:7,i18n:"edt_theme_UI_property_form_font_line_height",keywords:"labels label headings text font line height",keywordsI18n:"edt_theme_UI_keywords_form_font_line_height"},label_normal_color:{text:"Color",index:8,i18n:"edt_theme_UI_property_label_normal_color",keywords:"labels label text font color",keywordsI18n:"edt_theme_UI_keywords_label_normal_color"},label_padding_top:{text:"Top margin",index:9,i18n:"edt_theme_UI_property_label_padding_top",keywords:"labels label top margin",keywordsI18n:"edt_theme_UI_keywords_label_padding_top"},label_padding_bottom:{text:"Bottom margin",index:10,i18n:"edt_theme_UI_property_label_padding_bottom",keywords:"labels label bottom margin",keywordsI18n:"edt_theme_UI_keywords_label_padding_bottom"},label_margin_top:{text:"Advanced margin top",index:11,i18n:"edt_theme_UI_property_label_margin_top",keywords:"labels label advanced top margin",keywordsI18n:"edt_theme_UI_keywords_label_margin_top"},label_margin_bottom:{text:"Advanced margin bottom",index:12,i18n:"edt_theme_UI_property_label_margin_bottom",keywords:"labels label advanced bottom margin",keywordsI18n:"edt_theme_UI_keywords_label_margin_bottom"},control_required_star_color:{text:"Required star color",index:13,i18n:"edt_theme_UI_property_control_required_star_color",keywords:"labels label required star color",keywordsI18n:"edt_theme_UI_keywords_control_required_star_color"},"options.instructionsPlacement":{text:"Placement",index:1,i18n:"edt_theme_UI_property_options_instructionsPlacement",keywords:"instruction instructions placement",keywordsI18n:"edt_theme_UI_keywords_options_instructionsPlacement"},"options.instructionsTextAlignment":{text:"Alignment",index:2,i18n:"edt_theme_UI_property_options_instructionsTextAlignment",keywords:"instruction instructions alignment",keywordsI18n:"edt_theme_UI_keywords_options_instructionsTextAlignment"},instructions_font_family:{text:"Font",index:3,i18n:"edt_theme_UI_property_instructions_font_family",keywords:"instruction instructions font",keywordsI18n:"edt_theme_UI_keywords_instructions_font_family"},instructions_font_weight:{text:"Font weight",index:4,i18n:"edt_theme_UI_property_instructions_font_weight",keywords:"instruction instructions font weight",keywordsI18n:"edt_theme_UI_keywords_instructions_font_weight"},instructions_font_style:{text:"Font style",index:5,i18n:"edt_theme_UI_property_instructions_font_style",keywords:"instruction instructions font style",keywordsI18n:"edt_theme_UI_keywords_instructions_font_style"},instructions_font_size:{text:"Font size",index:6,i18n:"edt_theme_UI_property_instructions_font_size",keywords:"instruction instructions font size",keywordsI18n:"edt_theme_UI_keywords_instructions_font_size"},instructions_font_line_height:{text:"Font line height",index:7,i18n:"edt_theme_UI_property_instructions_font_line_height",keywords:"instruction instructions font line height",keywordsI18n:"edt_theme_UI_keywords_instructions_font_line_height"},instructions_normal_color:{text:"Color",index:8,i18n:"edt_theme_UI_property_instructions_normal_color",keywords:"instruction instructions text font color",keywordsI18n:"edt_theme_UI_keywords_instructions_normal_color"},instructions_padding_top:{text:"Top margin",index:9,i18n:"edt_theme_UI_property_instructions_padding_top",keywords:"instruction instructions top margin",keywordsI18n:"edt_theme_UI_keywords_instructions_padding_top"},instructions_padding_bottom:{text:"Bottom margin",index:10,i18n:"edt_theme_UI_property_instructions_padding_bottom",keywords:"instruction instructions bottom margin",keywordsI18n:"edt_theme_UI_keywords_instructions_padding_bottom"},instructions_margin_top:{text:"Advanced margin top",index:11,i18n:"edt_theme_UI_property_instructions_margin_top",keywords:"labels label advanced top margin",keywordsI18n:"edt_theme_UI_keywords_instructions_margin_top"},instructions_margin_bottom:{text:"Advanced margin bottom",index:12,i18n:"edt_theme_UI_property_instructions_margin_bottom",keywords:"labels label advanced bottom margin",keywordsI18n:"edt_theme_UI_keywords_instructions_margin_bottom"},input_normal_background_color:{text:"Background",index:1,i18n:"edt_theme_UI_property_input_normal_background_color",keywords:"inputs input background color",keywordsI18n:"edt_theme_UI_keywords_input_normal_background_color"},input_normal_border_color:{text:"Border",index:2,i18n:"edt_theme_UI_property_input_normal_border_color",keywords:"inputs input border color",keywordsI18n:"edt_theme_UI_keywords_input_normal_border_color"},input_border_style:{text:"Border style",index:3,i18n:"edt_theme_UI_property_input_border_style",keywords:"inputs input border style",keywordsI18n:"edt_theme_UI_keywords_input_border_style"},input_border_width:{text:"Border thickness",index:4,i18n:"edt_theme_UI_property_input_border_width",keywords:"inputs input border thickness width",keywordsI18n:"edt_theme_UI_keywords_input_border_width"},input_border_radius:{text:"Border radius",index:5,i18n:"edt_theme_UI_property_input_border_radius",keywords:"inputs input border radius shape",keywordsI18n:"edt_theme_UI_keywords_input_border_radius"},input_font_family:{text:"Font",index:6,i18n:"edt_theme_UI_property_input_font_family",keywords:"inputs input font",keywordsI18n:"edt_theme_UI_keywords_input_font_family"},input_font_weight:{text:"Font weight",index:7,i18n:"edt_theme_UI_property_input_font_weight",keywords:"inputs input font weight",keywordsI18n:"edt_theme_UI_keywords_input_font_weight"},input_font_style:{text:"Font style",index:8,i18n:"edt_theme_UI_property_input_font_style",keywords:"inputs input font style",keywordsI18n:"edt_theme_UI_keywords_input_font_style"},input_font_size:{text:"Font size",index:9,i18n:"edt_theme_UI_property_input_font_size",keywords:"inputs input font size",keywordsI18n:"edt_theme_UI_keywords_input_font_size"},input_font_line_height:{text:"Font line height",index:10,i18n:"edt_theme_UI_property_input_font_line_height",keywords:"inputs input font line height",keywordsI18n:"edt_theme_UI_keywords_input_font_line_height"},input_normal_color:{text:"Text color",index:11,i18n:"edt_theme_UI_property_input_normal_color",keywords:"inputs input text font color",keywordsI18n:"edt_theme_UI_keywords_input_normal_color"},input_padding_horizontal:{text:"Horizontal padding",index:12,i18n:"edt_theme_UI_property_input_padding_horizontal",keywords:"inputs input horizontal padding",keywordsI18n:"edt_theme_UI_keywords_input_padding_horizontal"},input_padding_vertical:{text:"Vertical padding",index:13,i18n:"edt_theme_UI_property_input_padding_vertical",keywords:"inputs input vertical padding",keywordsI18n:"edt_theme_UI_keywords_input_padding_vertical"},container_padding_vertical:{text:"Vertical padding",index:1,i18n:"edt_theme_UI_property_container_padding_vertical",keywords:"fields field vertical padding",keywordsI18n:"edt_theme_UI_keywords_container_padding_vertical"},container_padding_horizontal:{text:"Horizontal padding",index:2,i18n:"edt_theme_UI_property_container_padding_horizontal",keywords:"fields field horizontal padding",keywordsI18n:"edt_theme_UI_keywords_container_padding_horizontal"},input_margin_vertical:{text:"Fields spacing",index:3,i18n:"edt_theme_UI_property_input_margin_vertical",keywords:"fields field fields spacing",keywordsI18n:"edt_theme_UI_keywords_input_margin_vertical"},"options.labelWidthInUnits":{text:"Default label width",index:4,i18n:"edt_theme_UI_property_options_labelWidthInUnits",keywords:"fields field default label width",keywordsI18n:"edt_theme_UI_keywords_options_labelWidthInUnits"},input_hover_background_color:{text:"Input background",index:1,i18n:"edt_theme_UI_property_input_hover_background_color",keywords:"fields field input background color",keywordsI18n:"edt_theme_UI_keywords_input_hover_background_color"},input_hover_border_color:{text:"Input border",index:2,i18n:"edt_theme_UI_property_input_hover_border_color",keywords:"fields field input border color",keywordsI18n:"edt_theme_UI_keywords_input_hover_border_color"},input_hover_color:{text:"Input text color",index:3,i18n:"edt_theme_UI_property_input_hover_color",keywords:"fields field input text font color",keywordsI18n:"edt_theme_UI_keywords_input_hover_color"},label_hover_color:{text:"Label color",index:4,i18n:"edt_theme_UI_property_label_hover_color",keywords:"fields field label text font color",keywordsI18n:"edt_theme_UI_keywords_label_hover_color"},instructions_hover_color:{text:"Instructions color",index:5,i18n:"edt_theme_UI_property_instructions_hover_color",keywords:"fields field instructions text font color",keywordsI18n:"edt_theme_UI_keywords_instructions_hover_color"},input_focused_background_color:{text:"Input background",index:1,i18n:"edt_theme_UI_property_input_focused_background_color",keywords:"fields field focus input background color",keywordsI18n:"edt_theme_UI_keywords_input_focused_background_color"},input_focused_border_color:{text:"Input border",index:2,i18n:"edt_theme_UI_property_input_focused_border_color",keywords:"fields field focus input border color",keywordsI18n:"edt_theme_UI_keywords_input_focused_border_color"},input_focused_color:{text:"Input text color",index:3,i18n:"edt_theme_UI_property_input_focused_color",keywords:"fields field focus input text font color",keywordsI18n:"edt_theme_UI_keywords_input_focused_color"},label_focused_color:{text:"Label color",index:4,i18n:"edt_theme_UI_property_label_focused_color",keywords:"fields field focus label text font color",keywordsI18n:"edt_theme_UI_keywords_label_focused_color"},instructions_focused_color:{text:"Instructions color",index:5,i18n:"edt_theme_UI_property_instructions_focused_color",keywords:"fields field focus instructions text font color",keywordsI18n:"edt_theme_UI_keywords_instructions_focused_color"},error_font_family:{text:"Font",index:1,i18n:"edt_theme_UI_property_error_font_family",keywords:"errors error font",keywordsI18n:"edt_theme_UI_keywords_error_font_family"},error_font_weight:{text:"Font weight",index:2,i18n:"edt_theme_UI_property_error_font_weight",keywords:"errors error font weight",keywordsI18n:"edt_theme_UI_keywords_error_font_weight"},error_font_style:{text:"Font style",index:3,i18n:"edt_theme_UI_property_error_font_style",keywords:"errors error font style",keywordsI18n:"edt_theme_UI_keywords_error_font_style"},error_font_size:{text:"Font size",index:4,i18n:"edt_theme_UI_property_error_font_size",keywords:"errors error font size",keywordsI18n:"edt_theme_UI_keywords_error_font_size"},error_font_line_height:{text:"Font line height",index:5,i18n:"edt_theme_UI_property_error_font_line_height",keywords:"errors error font line height",keywordsI18n:"edt_theme_UI_keywords_error_font_line_height"},error_normal_color:{text:"Color",index:6,i18n:"edt_theme_UI_property_error_normal_color",keywords:"errors error text font color",keywordsI18n:"edt_theme_UI_keywords_error_normal_color"},error_padding_top:{text:"Top margin",index:7,i18n:"edt_theme_UI_property_error_padding_top",keywords:"errors error top margin",keywordsI18n:"edt_theme_UI_keywords_error_padding_top"},error_padding_bottom:{text:"Bottom margin",index:8,i18n:"edt_theme_UI_property_error_padding_bottom",keywords:"errors error bottom margin",keywordsI18n:"edt_theme_UI_keywords_error_padding_bottom"},input_error_background_color:{text:"Input background",index:9,i18n:"edt_theme_UI_property_input_error_background_color",keywords:"errors error input background color",keywordsI18n:"edt_theme_UI_keywords_input_error_background_color"},input_error_border_color:{text:"Input border",index:10,i18n:"edt_theme_UI_property_input_error_border_color",keywords:"errors error input border color",keywordsI18n:"edt_theme_UI_keywords_input_error_border_color"},input_error_color:{text:"Input text color",index:11,i18n:"edt_theme_UI_property_input_error_color",keywords:"errors error input text font color",keywordsI18n:"edt_theme_UI_keywords_input_error_color"},label_error_color:{text:"Label color",index:12,i18n:"edt_theme_UI_property_label_error_color",keywords:"errors error label text font color",keywordsI18n:"edt_theme_UI_keywords_label_error_color"},instructions_error_color:{text:"Instructions color",index:13,i18n:"edt_theme_UI_property_instructions_error_color",keywords:"errors error instructions text font color",keywordsI18n:"edt_theme_UI_keywords_instructions_error_color"},button_border_style:{text:"Border style",index:1,i18n:"edt_theme_UI_property_button_border_style",keywords:"buttons button primary secondary border style",keywordsI18n:"edt_theme_UI_keywords_button_border_style"},button_border_width:{text:"Border thickness",index:2,i18n:"edt_theme_UI_property_button_border_width",keywords:"buttons button primary secondary border thickness width",keywordsI18n:"edt_theme_UI_keywords_button_border_width"},button_border_radius:{text:"Border radius",index:3,i18n:"edt_theme_UI_property_button_border_radius",keywords:"buttons button primary secondary border radius shape",keywordsI18n:"edt_theme_UI_keywords_button_border_radius"},button_font_family:{text:"Font",index:4,i18n:"edt_theme_UI_property_button_font_family",keywords:"buttons button primary secondary font",keywordsI18n:"edt_theme_UI_keywords_button_font_family"},button_font_weight:{text:"Font weight",index:5,i18n:"edt_theme_UI_property_button_font_weight",keywords:"buttons button primary secondary font weight",keywordsI18n:"edt_theme_UI_keywords_button_font_weight"},button_font_style:{text:"Font style",index:6,i18n:"edt_theme_UI_property_button_font_style",keywords:"buttons button primary secondary font style",keywordsI18n:"edt_theme_UI_keywords_button_font_style"},button_font_size:{text:"Font size",index:7,i18n:"edt_theme_UI_property_button_font_size",keywords:"buttons button primary secondary font size",keywordsI18n:"edt_theme_UI_keywords_button_font_size"},button_font_line_height:{text:"Font line height",index:8,i18n:"edt_theme_UI_property_button_font_line_height",keywords:"buttons button primary secondary font line height",keywordsI18n:"edt_theme_UI_keywords_button_font_line_height"},button_padding_horizontal:{text:"Horizontal padding",index:9,i18n:"edt_theme_UI_property_button_padding_horizontal",keywords:"buttons button primary secondary horizontal padding",keywordsI18n:"edt_theme_UI_keywords_button_padding_horizontal"},button_padding_vertical:{text:"Vertical padding",index:10,i18n:"edt_theme_UI_property_button_padding_vertical",keywords:"buttons button primary secondary vertical padding",keywordsI18n:"edt_theme_UI_keywords_button_padding_vertical"},button_primary_normal_background_color:{text:"Background",index:1,i18n:"edt_theme_UI_property_button_primary_normal_background_color",keywords:"buttons button primary background color",keywordsI18n:"edt_theme_UI_keywords_button_primary_normal_background_color"},button_primary_normal_border_color:{text:"Border",index:2,i18n:"edt_theme_UI_property_button_primary_normal_border_color",keywords:"buttons button primary border color",keywordsI18n:"edt_theme_UI_keywords_button_primary_normal_border_color"},button_primary_normal_color:{text:"Text color",index:3,i18n:"edt_theme_UI_property_button_primary_normal_color",keywords:"buttons button primary text font color",keywordsI18n:"edt_theme_UI_keywords_button_primary_normal_color"},button_primary_hover_background_color:{text:"Hover background",index:4,i18n:"edt_theme_UI_property_button_primary_hover_background_color",keywords:"buttons button primary hover background color",keywordsI18n:"edt_theme_UI_keywords_button_primary_hover_background_color"},button_primary_hover_border_color:{text:"Hover border",index:5,i18n:"edt_theme_UI_property_button_primary_hover_border_color",keywords:"buttons button primary hover border color",keywordsI18n:"edt_theme_UI_keywords_button_primary_hover_border_color"},button_primary_hover_color:{text:"Hover text color",index:6,i18n:"edt_theme_UI_property_button_primary_hover_color",keywords:"buttons button primary hover text font color",keywordsI18n:"edt_theme_UI_keywords_button_primary_hover_color"},button_secondary_normal_background_color:{text:"Background",index:1,i18n:"edt_theme_UI_property_button_secondary_normal_background_color",keywords:"buttons button secondary background color",keywordsI18n:"edt_theme_UI_keywords_button_secondary_normal_background_color"},button_secondary_normal_border_color:{text:"Border",index:2,i18n:"edt_theme_UI_property_button_secondary_normal_border_color",keywords:"buttons button secondary border color",keywordsI18n:"edt_theme_UI_keywords_button_secondary_normal_border_color"},button_secondary_normal_color:{text:"Text color",index:3,i18n:"edt_theme_UI_property_button_secondary_normal_color",keywords:"buttons button secondary text font color",keywordsI18n:"edt_theme_UI_keywords_button_secondary_normal_color"},button_secondary_hover_background_color:{text:"Hover background",index:4,i18n:"edt_theme_UI_property_button_secondary_hover_background_color",keywords:"buttons button secondary hover background color",keywordsI18n:"edt_theme_UI_keywords_button_secondary_hover_background_color"},button_secondary_hover_border_color:{text:"Hover border",index:5,i18n:"edt_theme_UI_property_button_secondary_hover_border_color",keywords:"buttons button secondary hover border color",keywordsI18n:"edt_theme_UI_keywords_button_secondary_hover_border_color"},button_secondary_hover_color:{text:"Hover text color",index:6,i18n:"edt_theme_UI_property_button_secondary_hover_color",keywords:"buttons button secondary hover text font color",keywordsI18n:"edt_theme_UI_keywords_button_secondary_hover_color"},radio_appearance:{text:"Radio shape",index:1,i18n:"edt_theme_UI_property_radio_appearance",keywords:"choice choices radio shape",keywordsI18n:"edt_theme_UI_keywords_radio_appearance"},radio_width:{text:"Radio width",index:2,i18n:"edt_theme_UI_property_radio_width",keywords:"choice choices radio width",keywordsI18n:"edt_theme_UI_keywords_radio_width"},radio_height:{text:"Radio height",index:3,i18n:"edt_theme_UI_property_radio_height",keywords:"choice choices radio height",keywordsI18n:"edt_theme_UI_keywords_radio_height"},radio_margin:{text:"Radio right margin",index:4,i18n:"edt_theme_UI_property_radio_margin",keywords:"choice choices radio right margin",keywordsI18n:"edt_theme_UI_keywords_radio_margin"},checkbox_width:{text:"Checkbox width",index:5,i18n:"edt_theme_UI_property_checkbox_width",keywords:"choice choices checkbox width",keywordsI18n:"edt_theme_UI_keywords_checkbox_width"},checkbox_height:{text:"Checkbox height",index:6,i18n:"edt_theme_UI_property_checkbox_height",keywords:"choice choices checkbox height",keywordsI18n:"edt_theme_UI_keywords_checkbox_height"},checkbox_margin:{text:"Checkbox right margin",index:7,i18n:"edt_theme_UI_property_checkbox_margin",keywords:"choice choices checkbox right margin",keywordsI18n:"edt_theme_UI_keywords_checkbox_margin"},button_primary_disabled_background_color:{text:"",index:999,i18n:"",keywords:""},button_primary_disabled_border_color:{text:"",index:999,i18n:"",keywords:""},button_primary_disabled_color:{text:"",index:999,i18n:"",keywords:""},button_secondary_disabled_background_color:{text:"",index:999,i18n:"",keywords:""},button_secondary_disabled_border_color:{text:"",index:999,i18n:"",keywords:""},button_secondary_disabled_color:{text:"",index:999,i18n:"",keywords:""},control_border_radius:{text:"",index:999,i18n:"",keywords:""},control_border_style:{text:"",index:999,i18n:"",keywords:""},control_border_width:{text:"",index:999,i18n:"",keywords:""},control_disabled_background_color:{text:"",index:999,i18n:"",keywords:""},control_disabled_border_color:{text:"",index:999,i18n:"",keywords:""},control_error_background_color:{text:"",index:999,i18n:"",keywords:""},control_error_border_color:{text:"",index:999,i18n:"",keywords:""},control_focused_background_color:{text:"",index:999,i18n:"",keywords:""},control_focused_border_color:{text:"",index:999,i18n:"",keywords:""},control_hover_background_color:{text:"",index:999,i18n:"",keywords:""},control_hover_border_color:{text:"",index:999,i18n:"",keywords:""},control_normal_background_color:{text:"",index:999,i18n:"",keywords:""},control_normal_border_color:{text:"",index:999,i18n:"",keywords:""},control_selected_background_color:{text:"",index:999,i18n:"",keywords:""},control_selected_border_color:{text:"",index:999,i18n:"",keywords:""},input_disabled_background_color:{text:"",index:999,i18n:"",keywords:""},input_disabled_border_color:{text:"",index:999,i18n:"",keywords:""},input_disabled_color:{text:"",index:999,i18n:"",keywords:""},input_selected_background_color:{text:"",index:999,i18n:"",keywords:""},input_selected_border_color:{text:"",index:999,i18n:"",keywords:""},input_selected_color:{text:"",index:999,i18n:"",keywords:""},input_normal_placeholderColor:{text:"",index:999,i18n:"",keywords:""},instructions_disabled_color:{text:"",index:999,i18n:"",keywords:""},instructions_selected_color:{text:"",index:999,i18n:"",keywords:""},label_disabled_color:{text:"",index:999,i18n:"",keywords:""},label_selected_color:{text:"",index:999,i18n:"",keywords:""},table_header_background_color:{text:"Header background",index:1,i18n:"edt_theme_UI_property_table_header_background_color",keywords:"table header background color",keywordsI18n:"edt_theme_UI_keywords_table_header_background_color"}}),l()(c,"FORM_CATEGORY_PROPERTIES_IN_THEME",["page_padding_top","page_padding_bottom","page_padding_left","page_padding_right","page_background_color","page_border_color","page_border_style","page_border_width","page_shadow_visibility","form_color","colors_selected_color","page_background_image","page_background_position","page_background_repeat","page_background_size","page_background_attachment"]),l()(c,"PAGE_CATEGORIES_PROPERTIES_IN_THEME",["page_margin_top","page_margin_bottom","form_background_color","form_background_image","form_background_position","form_background_size","form_background_repeat","form_background_attachment"]),l()(c,"LABEL_CATEGORIES_PROPERTIES_IN_THEME",["label_placement","form_font_family","form_font_weight","form_font_style","form_font_size","form_font_line_height","label_normal_color","label_padding_top","label_padding_bottom","control_required_star_color"]),l()(c,"LABEL_ADVANCED_CATEGORIES_PROPERTIES_IN_THEME",["label_margin_bottom","label_margin_top"]),l()(c,"INSTRUCTIONS_CATEGORIES_PROPERTIES_IN_THEME",["instructions_font_family","instructions_font_weight","instructions_font_style","instructions_font_size","instructions_font_line_height","instructions_normal_color","instructions_padding_top","instructions_padding_bottom"]),l()(c,"INSTRUCTIONS_ADVANCED_CATEGORIES_PROPERTIES_IN_THEME",["instructions_margin_bottom","instructions_margin_top"]),l()(c,"INPUT_CATEGORIES_PROPERTIES_IN_THEME",["input_normal_background_color","input_normal_border_color","input_border_style","input_border_width","input_border_radius","input_font_family","input_font_weight","input_font_style","input_font_size","input_font_line_height","input_normal_color","input_padding_horizontal","input_padding_vertical"]),l()(c,"FIELD_CATEGORIES_PROPERTIES_IN_THEME",["container_padding_vertical","container_padding_horizontal","input_margin_vertical","label_width"]),l()(c,"FIELD_HOVER_CATEGORIES_PROPERTIES_IN_THEME",["input_hover_background_color","input_hover_border_color","input_hover_color","label_hover_color","instructions_hover_color"]),l()(c,"FIELD_FOCUS_CATEGORIES_PROPERTIES_IN_THEME",["input_focused_background_color","input_focused_border_color","input_focused_color","label_focused_color","instructions_focused_color"]),l()(c,"ERROR_CATEGORIES_PROPERTIES_IN_THEME",["error_font_family","error_font_weight","error_font_style","error_font_size","error_font_line_height","error_normal_color","error_padding_top","error_padding_bottom","input_error_background_color","input_error_border_color","input_error_color","label_error_color","instructions_error_color"]),l()(c,"BUTTON_CATEGORIES_PROPERTIES_IN_THEME",["button_border_style","button_border_width","button_font_family","button_font_weight","button_font_style","button_font_size","button_font_line_height","button_padding_horizontal","button_padding_vertical","button_border_radius"]),l()(c,"BUTTON_PRIMARY_PROPERTIES_IN_THEME",["button_primary_normal_background_color","button_primary_normal_border_color","button_primary_normal_color","button_primary_hover_background_color","button_primary_hover_border_color","button_primary_hover_color"]),l()(c,"BUTTON_SECONDARY_PROPERTIES_IN_THEME",["button_secondary_normal_background_color","button_secondary_normal_border_color","button_secondary_normal_color","button_secondary_hover_background_color","button_secondary_hover_border_color","button_secondary_hover_color"]),l()(c,"CHOICES_PROPERTIES_IN_THEME",["radio_appearance","radio_width","radio_height","radio_margin","checkbox_width","checkbox_height","checkbox_margin"]),l()(c,"EDITOR_PROPERTIES_IN_THEME",["button_primary_disabled_background_color","button_primary_disabled_border_color","button_primary_disabled_color","button_secondary_disabled_background_color","button_secondary_disabled_border_color","button_secondary_disabled_color","control_border_radius","control_border_style","control_border_width","control_disabled_background_color","control_disabled_border_color","control_error_background_color","control_error_border_color","control_focused_background_color","control_focused_border_color","control_hover_background_color","control_hover_border_color","control_normal_background_color","control_normal_border_color","control_selected_background_color","control_selected_border_color","input_disabled_background_color","input_disabled_border_color","input_disabled_color","input_selected_background_color","input_selected_border_color","input_selected_color","input_normal_placeholderColor","instructions_disabled_color","instructions_selected_color","label_disabled_color","label_selected_color"]),l()(c,"TABLE_PROPERTIES_IN_THEME",["table_header_background_color"]),l()(c,"LAYOUT_FORM_PROPERTIES_IN_THEME",["page_padding_top","page_padding_bottom","page_padding_left","page_padding_right"]),l()(c,"LAYOUT_PAGE_PROPERTIES_IN_THEME",["page_margin_top","page_margin_bottom"]),l()(c,"BACKGROUND_FORM_PROPERTIES_IN_THEME",["page_background_color","page_background_image","page_background_size","page_background_position","page_background_repeat","page_background_attachment","page_border_color","page_border_style","page_border_width","page_shadow_visibility"]),l()(c,"BACKGROUND_PAGE_PROPERTIES_IN_THEME",["form_background_color","form_background_image","form_background_size","form_background_position","form_background_repeat","form_background_attachment"]),l()(c,"FIELDS_LABEL_PROPERTIES_IN_THEME",["label_placement","form_font_family","form_font_weight","form_font_style","form_font_size","form_font_line_height","label_normal_color","label_padding_top","label_padding_bottom","control_required_star_color"]),l()(c,"FIELDS_INSTRUCTIONS_PROPERTIES_IN_THEME",["instructions_font_family","instructions_font_weight","instructions_font_style","instructions_font_size","instructions_font_line_height","instructions_normal_color","instructions_padding_top","instructions_padding_bottom"]),l()(c,"FIELDS_INPUT_PROPERTIES_IN_THEME",["input_normal_background_color","input_normal_border_color","input_border_style","input_border_width","input_border_radius","input_font_family","input_font_weight","input_font_style","input_font_size","input_font_line_height","input_normal_color","input_padding_horizontal","input_padding_vertical"]),l()(c,"FIELDS_FIELD_PROPERTIES_IN_THEME",["container_padding_vertical","container_padding_horizontal","input_margin_vertical","label_width"]),l()(c,"FIELDS_HOVER_PROPERTIES_IN_THEME",["input_hover_background_color","input_hover_border_color","input_hover_color","label_hover_color","instructions_hover_color"]),l()(c,"FIELDS_FOCUS_PROPERTIES_IN_THEME",["input_focused_background_color","input_focused_border_color","input_focused_color","label_focused_color","instructions_focused_color"]),l()(c,"FIELDS_ERROR_PROPERTIES_IN_THEME",["error_font_family","error_font_weight","error_font_style","error_font_size","error_font_line_height","error_normal_color","error_padding_top","error_padding_bottom","input_error_background_color","input_error_border_color","input_error_color","label_error_color","instructions_error_color"]),l()(c,"FIELDS_CHOICES_PROPERTIES_IN_THEME",["radio_appearance","radio_width","radio_height","radio_margin","checkbox_width","checkbox_height","checkbox_margin"]),l()(c,"BUTTONS_BUTTON_PROPERTIES_IN_THEME",["button_border_style","button_border_width","button_font_family","button_font_weight","button_font_style","button_font_size","button_font_line_height","button_padding_horizontal","button_padding_vertical","button_border_radius"]),l()(c,"BUTTONS_PRIMARY_PROPERTIES_IN_THEME",["button_primary_normal_background_color","button_primary_normal_border_color","button_primary_normal_color","button_primary_hover_background_color","button_primary_hover_border_color","button_primary_hover_color"]),l()(c,"BUTTONS_SECONDARY_PROPERTIES_IN_THEME",["button_secondary_normal_background_color","button_secondary_normal_border_color","button_secondary_normal_color","button_secondary_hover_background_color","button_secondary_hover_border_color","button_secondary_hover_color"])},function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(0),m=n.n(g),f=n(29),E=n(153);function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var T=function(e){u()(n,e);var t=y(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div";return r()(this,n),i=t.call(this),m()(l()(i),"elementTypeName",void 0),m()(l()(i),"rootNode",void 0),m()(l()(i),"disabled",!1),m()(l()(i),"readOnly",!1),i.elementTypeName=e,i.rootNode=document.createElement(a),i.rootNode.setAttribute("data-ui-role","ui-element"),i.rootNode.setAttribute("data-type",e),i.rootNode.tabIndex=0,i.enableSyncMode(),i}return o()(n,[{key:"getElementTypeName",value:function(){return this.elementTypeName}},{key:"getRootNode",value:function(){return this.rootNode}},{key:"isDisabled",value:function(){return this.disabled}},{key:"setDisabled",value:function(e){if((e=!!e)!==this.disabled)switch(this.disabled=e,this.disabled){case!0:this.rootNode.setAttribute("disabled","disabled"),this.rootNode.tabIndex=null;break;case!1:this.rootNode.removeAttribute("disabled"),this.rootNode.tabIndex=0}}},{key:"isReadOnly",value:function(){return this.readOnly}},{key:"setReadOnly",value:function(e){if((e=!!e)!==this.readOnly)switch(this.readOnly=e,this.readOnly){case!0:this.rootNode.setAttribute("readonly","readonly");break;case!1:this.rootNode.removeAttribute("readonly")}}},{key:"getAttribute",value:function(e){return this.rootNode.getAttribute(e)}},{key:"setAttribute",value:function(e,t){this.rootNode.setAttribute(e,t)}},{key:"hasAttribute",value:function(e){return this.rootNode.hasAttribute(e)}},{key:"removeAttribute",value:function(e){this.rootNode.removeAttribute(e)}},{key:"getId",value:function(){return this.rootNode.id}},{key:"setId",value:function(e){this.rootNode.id=String(e||"")}},{key:"append",value:function(e,t){switch(t){case n.APPEND_POSITION_BEFORE:e.insertAdjacentElement("beforebegin",this.rootNode);break;case n.APPEND_POSITION_AFTER:e.insertAdjacentElement("afterend",this.rootNode);break;case n.APPEND_POSITION_INSIDE:default:e.insertAdjacentElement("beforeend",this.rootNode)}this.trigger("append")}},{key:"replace",value:function(e){e.parentNode.replaceChild(this.rootNode,e),this.trigger("replace")}},{key:"insert",value:function(e){for(var t=e.childNodes,i=new E.a(e).position(),r=null,a=0,o=t.length;a<o;a++){var s=t[a].textContent.length;if(!(i>=s)){r=t[a];break}i-=s}if(null!==r){if(this.disableEvents(),r.nodeType===Node.TEXT_NODE){this.replace(r);var l=r.textContent.substr(0,i),c=r.textContent.substr(i);void 0===t[a-1]||t[a-1].nodeType!==Node.TEXT_NODE?(this.rootNode.insertAdjacentText("beforebegin",l),a++):t[a-1].nodeType===Node.TEXT_NODE&&(t[a-1].nodeValue=l+t[a-1].nodeValue),void 0===t[a+1]||t[a+1].nodeType!==Node.TEXT_NODE?this.rootNode.insertAdjacentText("afterend",c):t[a+1].nodeType===Node.TEXT_NODE&&(t[a+1].nodeValue+=c)}else this.append(r,n.APPEND_POSITION_BEFORE);this.enableEvents()}else this.append(e,n.APPEND_POSITION_INSIDE);this.trigger("insert")}},{key:"delete",value:function(){this.rootNode.parentNode&&this.rootNode.parentNode.removeChild(this.rootNode),this.trigger("delete")}}]),n}(f.a);m()(T,"APPEND_POSITION_INSIDE",0),m()(T,"APPEND_POSITION_BEFORE",1),m()(T,"APPEND_POSITION_AFTER",2),m()(T,"APPEND_POSITION_REPLACE",3),m()(T,"APPEND_POSITION_AT_CURSOR",4)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(5),r=n.n(i),a=n(0),o=n.n(a),s=function e(){r()(this,e)};o()(s,"ELEMENT_NOT_SUPPORTED",-2),o()(s,"ELEMENT_TYPE_FORM",-1),o()(s,"CONTAINER_TYPE_ROW",0),o()(s,"CONTROL_TYPE_ADDRESS",1),o()(s,"CONTROL_TYPE_CHECKBOX",2),o()(s,"CONTROL_TYPE_DATE",3),o()(s,"CONTROL_TYPE_DROPDOWN",4),o()(s,"CONTROL_TYPE_EMAIL",5),o()(s,"CONTROL_TYPE_FILE",6),o()(s,"CONTROL_TYPE_HEADING",7),o()(s,"CONTROL_TYPE_HTML_BLOCK",8),o()(s,"CONTROL_TYPE_IMAGE",9),o()(s,"CONTROL_TYPE_LIKERT_SCALE",10),o()(s,"CONTROL_TYPE_MAP",11),o()(s,"CONTROL_TYPE_NAME",12),o()(s,"CONTROL_TYPE_NUMBER",13),o()(s,"CONTROL_TYPE_PAGE_BREAK",14),o()(s,"CONTROL_TYPE_PASSWORD",15),o()(s,"CONTROL_TYPE_PHONE",16),o()(s,"CONTROL_TYPE_PRICE",17),o()(s,"CONTROL_TYPE_RADIO",18),o()(s,"CONTROL_TYPE_SIGNATURE",19),o()(s,"CONTROL_TYPE_SOCIAL",20),o()(s,"CONTROL_TYPE_STAR_RATING",21),o()(s,"CONTROL_TYPE_TERMS_OF_SERVICE",22),o()(s,"CONTROL_TYPE_TEXT",23),o()(s,"CONTROL_TYPE_TEXTAREA",24),o()(s,"CONTROL_TYPE_TIME",25),o()(s,"CONTROL_TYPE_WEBSITE",26),o()(s,"CONTROL_TYPE_FORM_HEADER",27),o()(s,"CONTROL_TYPE_CAPTCHA",28),o()(s,"CONTROL_TYPE_ACTION_BAR",29),o()(s,"CONTROL_TYPE_WIDGET_VIDEO",30),o()(s,"CONTROL_TYPE_WIDGET_FACEBOOK",31),o()(s,"CONTROL_TYPE_WIDGET_PDF",32),o()(s,"CONTROL_TYPE_FORMULA",33),o()(s,"CONTROL_TYPE_FEE",34),o()(s,"CONTROL_TYPE_COUPON",100),o()(s,"CONTROL_TYPE_SEPARATOR",9999),o()(s,"VIRTUAL_SELECTION_CONTROL",1e4),o()(s,"CONTAINER_TYPE_DIV",9e4),o()(s,"CONTAINER_TYPE_PAGE",90001),o()(s,"CONTAINER_TYPE_LIKERT_WRAPPER",90002),o()(s,"CONTAINER_TYPE_REPEATABLE",90003),o()(s,"CONTAINER_TYPE_REPEATABLE_GROUP",90004),o()(s,"CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE",91001),o()(s,"LAYOUT_TYPE_FIELDSET",null)},function(e,t,n){"use strict";var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(33),u=n(1),d=n(3),p=n.n(d),h=n(7),_=n.n(h),g=n(8),m=n.n(g),f=n(4),E=n.n(f),y=n(151);function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var v=function(e){_()(n,e);var t=T(n);function n(){var e;r()(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),l()(p()(e),"currentAbilities",[]),e}return o()(n,[{key:"setAbilities",value:function(e){this.currentAbilities=e}},{key:"flushAbilities",value:function(){this.currentAbilities=[]}},{key:"can",value:function(e){return-1!==this.currentAbilities.indexOf(e)}}]),n}(y.a),O=n(126);function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var C,I=function(e){_()(n,e);var t=b(n);function n(){var e,i;r()(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o)),l()(p()(i),"upgrades",void 0),l()(p()(i),"abilityToUpgradeMap",(e={},l()(e,C.ADD_FILE_ATTACHMENTS,"add_email_form_notification_attachment"),l()(e,C.ADD_FORM_LAYOUT_ATTACHMENTS,"add_email_form_notification_attachment"),l()(e,C.ADD_SUBMISSION_PDF_ATTACHMENTS,"add_email_form_notification_attachment"),l()(e,C.COUNT_EMAIL_RECIPIENTS,"add_form_notification_recipient"),l()(e,C.COUNT_EMAIL_RULES,"create_email_form_notification_rule"),l()(e,C.NEW_EMAIL,"create_email_form_notification_configuration"),l()(e,C.USE_SMTP,"use_smtp_server_for_email_form_notification"),l()(e,C.CUSTOMIZE_EMAIL_TEMPLATES,"edit_email_form_notification_template"),e)),i}return o()(n,[{key:"setUpgrades",value:function(e){this.upgrades=e}},{key:"getUpgradeDetails",value:function(e){var t=this.abilityToUpgradeMap[e],n=Object(O.a)(this.upgrades,{name:t});if(n&&n.target)return n.target[0]}}]),n}(y.a),R=n(62),P=n(47),N=n(76),A=n(400),S=n(14);n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return L})),function(e){e.NEW_SMS="notifications_new_sms",e.NEW_EMAIL="notifications_new_email",e.COUNT_EMAIL_RECIPIENTS="notifications_count_email_recipients",e.COUNT_EMAIL_RULES="notifications_count_email_rules",e.ADD_FILE_ATTACHMENTS="notifications_add_file_attachments",e.ADD_SUBMISSION_PDF_ATTACHMENTS="notifications_add_submission_pdf_attachments",e.ADD_FORM_LAYOUT_ATTACHMENTS="notifications_add_form_layout_attachments",e.CUSTOMIZE_EMAIL_TEMPLATES="notifications_customize_email_templates",e.USE_SMTP="notifications_use_smtp"}(C||(C={}));var L=function(){function e(){r()(this,e),l()(this,"paywallService",void 0),l()(this,"abilityService",void 0),l()(this,"currentUser",void 0),l()(this,"metricsService",void 0),l()(this,"accountUpgradeService",void 0),l()(this,"userService",void 0),l()(this,"availableFeatures",void 0),l()(this,"store",void 0),l()(this,"payableAbilities",[C.NEW_EMAIL,C.NEW_SMS,C.COUNT_EMAIL_RECIPIENTS,C.COUNT_EMAIL_RULES,C.ADD_FILE_ATTACHMENTS,C.ADD_SUBMISSION_PDF_ATTACHMENTS,C.ADD_FORM_LAYOUT_ATTACHMENTS,C.CUSTOMIZE_EMAIL_TEMPLATES,C.USE_SMTP]),this.abilityService=v.getInstance(),this.paywallService=window.Paywall.getInstance(),this.metricsService=R.a.getInstance(),this.accountUpgradeService=I.getInstance(),this.userService=P.a.getInstance(),this.store=Object(c.c)()}return o()(e,[{key:"setup",value:function(e){this.currentUser=e.userDetails,this.currentUser.serverPlatform||(this.currentUser.serverPlatform=window.UserData.serverPlatform),this.availableFeatures=e.abilities.features,this.setUpgrades(e.abilities.upgrades)}},{key:"setUpgrades",value:function(e){this.accountUpgradeService.setUpgrades(e)}},{key:"can",value:function(e,t){return!!this.isFeatureActive(e,t)||this.checkForPayableAbility(e)}},{key:"has",value:function(e,t){return this.isFeatureActive(e,t)}},{key:"isFeatureActive",value:function(e,t){var n=Object(A.a)(this.store.getState());switch(e){case C.ADD_FILE_ATTACHMENTS:case C.ADD_FORM_LAYOUT_ATTACHMENTS:case C.ADD_SUBMISSION_PDF_ATTACHMENTS:return this.userService.canAddAttachmentsToNotification();case C.COUNT_EMAIL_RECIPIENTS:return this.userService.canAddRecipientToEmailNotification(t,n);case C.COUNT_EMAIL_RULES:return this.userService.canAddRulesToEmailNotification(t,n);case C.NEW_EMAIL:return this.userService.canAddNotification(u.T.EMAIL,n);case C.USE_SMTP:return this.userService.canUseSMTPInNotifications();case C.CUSTOMIZE_EMAIL_TEMPLATES:return this.userService.canEditEmailNotificationTemplate()}return!0}},{key:"checkForPayableAbility",value:function(e){return this.isAbilityPayable(e)&&this.triggerPaywall(e),!1}},{key:"isAbilityPayable",value:function(e){return-1!==this.payableAbilities.indexOf(e)}},{key:"mapAbilityToFeature",value:function(e){switch(e){case C.NEW_EMAIL:return S.a.ADD_EMAIL_NOTIFICATION;case C.NEW_SMS:return S.a.ADD_SMS_NOTIFICATION;case C.COUNT_EMAIL_RECIPIENTS:return S.a.ADD_NOTIFICATION_RECIPIENT;case C.COUNT_EMAIL_RULES:return S.a.CREATE_EMAIL_NOTIFICATION_RULE;case C.ADD_FILE_ATTACHMENTS:return S.a.ADD_EMAIL_NOTIFICATION_ATTACHMENT;case C.ADD_SUBMISSION_PDF_ATTACHMENTS:return S.a.DOWNLOAD_SUBMISSION_AS_PLAIN_PDF;case C.ADD_FORM_LAYOUT_ATTACHMENTS:return S.a.DOWNLOAD_SUBMISSION_AS_FORM_LAYOUT_PDF;case C.CUSTOMIZE_EMAIL_TEMPLATES:return S.a.CUSTOMIZE_EMAIL_NOTIFICATION_TEMPLATE;case C.USE_SMTP:return S.a.USE_SMTP_EMAIL_NOTIFICATIONS}}},{key:"triggerPaywall",value:function(e){var t=this.accountUpgradeService.getUpgradeDetails(e),n={feature:this.mapAbilityToFeature(e),target:t},i=Object(N.e)(n);Object(c.a)()(i)}},{key:"getTotalLimit",value:function(e){switch(e){case C.COUNT_EMAIL_RECIPIENTS:return this.userService.getLimitForFeature("add_form_notification_recipient");case C.COUNT_EMAIL_RULES:return this.userService.getLimitForFeature("create_email_form_notification_rule")}return 0}}]),e}()},,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=function(){function e(){r()(this,e)}return o()(e,null,[{key:"HSVtoRGB",value:function(e){var t,n,i,r,a,o,s,l,c=e[1],u=e[2],d=e[0];switch(o=u*(1-c),s=u*(1-(a=6*d-(r=6*d|0))*c),l=u*(1-(1-a)*c),r%6){case 0:t=u,n=l,i=o;break;case 1:t=s,n=u,i=o;break;case 2:t=o,n=u,i=l;break;case 3:t=o,n=s,i=u;break;case 4:t=l,n=o,i=u;break;case 5:t=u,n=o,i=s}return[255*t|0,255*n|0,255*i|0,void 0===e[3]?1:e[3]]}},{key:"diffc",value:function(e,t,n){return(t-e)/6/n+.5}},{key:"RGBtoHSV",value:function(e){var t,n,i,r,a,o=e[0]/255,s=e[1]/255,l=e[2]/255,c=Math.max(o,s,l),u=c-Math.min(o,s,l);return 0==u?r=a=0:(a=u/c,t=this.diffc(o,c,u),n=this.diffc(s,c,u),i=this.diffc(l,c,u),o===c?r=i-n:s===c?r=1/3+t-i:l===c&&(r=2/3+n-t),r<0?r+=1:r>1&&(r-=1)),[r,a,c,void 0===e[3]?1:e[3]]}},{key:"strPad",value:function(e){return e.length<2?"0".concat(e):e}},{key:"RGBToString",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0===t[3]||t[3]>.99){var i="#".concat(this.strPad(t[0].toString(16))).concat(e.strPad(t[1].toString(16))).concat(e.strPad(t[2].toString(16)));if(n)for(var r in this.standardHTMLColors)if(this.standardHTMLColors[r]===i)return r;return i}return 0===t[3]?"transparent":"rgba(".concat(t[0],",").concat(t[1],",").concat(t[2],",").concat(t[3].toFixed(2).replace(/^0\./,".").replace(/\.00$/,"").replace(/[0]+$/,"").replace(/^\.$/,"")||"0",")")}},{key:"HSVToString",value:function(t){return e.RGBToString(e.HSVtoRGB(t))}},{key:"stringToRGB",value:function(t){var n,i=[0,0,0,1],r=String(t||"").toLowerCase();switch(!0){case"transparent"===r:i[3]=0;break;case void 0!==e.standardHTMLColors[r]:return e.stringToRGB(e.standardHTMLColors[r]);case!!(n=/^#[a-f0-9]{3}$/.exec(r)):i[0]=parseInt(r[1]+r[1],16),i[1]=parseInt(r[2]+r[2],16),i[2]=parseInt(r[3]+r[3],16);break;case!!(n=/^#[a-f0-9]{6}$/.exec(r)):i[0]=parseInt(r[1]+r[2],16),i[1]=parseInt(r[3]+r[4],16),i[2]=parseInt(r[5]+r[6],16);break;case!!(n=/^rgb\(([\s]+)?([\d]+)([\s]+)?,([\s]+)?([\d]+)([\s]+)?,([\s]+)?([\d]+)([\s]+)?\)$/.exec(r)):if(i[0]=parseInt(n[2]),i[1]=parseInt(n[5]),i[2]=parseInt(n[8]),i[0]>255||i[1]>255||i[2]>255)return null;break;case!!(n=/^rgba\(([\s]+)?([\d]+)([\s]+)?,([\s]+)?([\d]+)([\s]+)?,([\s]+)?([\d]+)([\s]+)?,([\s]+)?([\d\.]+)([\s]+)?\)$/.exec(r)):if(i[0]=parseInt(n[2]),i[1]=parseInt(n[5]),i[2]=parseInt(n[8]),i[3]=parseFloat(n[11]),i[0]>255||i[1]>255||i[2]>255||isNaN(i[3])||!isFinite(i[3])||i[3]>1)return null;break;default:return null}return i}},{key:"areEqualRGBColors",value:function(e,t){return!(!e||!t)&&(e===t||e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3])}},{key:"removeAlpha",value:function(e){var t=e.slice(0,3);return t.push(1),t}}]),e}();l()(c,"standardHTMLColors",{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred  ":"#cd5c5c","indigo   ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(1),u=n(92),d=n(23),p=function(){function e(t,n){switch(r()(this,e),l()(this,"min",void 0),l()(this,"max",void 0),l()(this,"padLength",void 0),l()(this,"role",void 0),l()(this,"input",void 0),l()(this,"root",void 0),l()(this,"disabled",void 0),l()(this,"readOnly",void 0),l()(this,"value",void 0),this.role=t,this.input=n,this.root=document.createElement("div"),this.root.setAttribute("data-role","date-part"),this.root.setAttribute("data-part",this.getDatePartRoleName(t)),this.root.setAttribute("aria-labelledby","date-".concat(this.input.getHash(),"-").concat(this.getDatePartRoleName(t))),this.disabled=!1,this.readOnly=!1,t){case c.i.DAY:this.min=1,this.max=31,this.padLength=2;break;case c.i.MONTH:this.min=1,this.max=12,this.padLength=2;break;case c.i.YEAR:this.min=0,this.max=9999,this.padLength=4;break;case c.i.HOUR_24:this.min=0,this.max=23,this.padLength=2;break;case c.i.HOUR_12:this.min=0,this.max=12,this.padLength=2;break;case c.i.MINUTE:case c.i.SECOND:this.min=0,this.max=59,this.padLength=2;break;case c.i.MILLISECOND:this.min=0,this.max=999,this.padLength=3;break;case c.i.AM_PM:this.min=0,this.max=1,this.padLength=1}}return o()(e,[{key:"withDisabled",value:function(e){return this.disabled=!!e,this.disabled?this.root.setAttribute("disabled",""):this.root.removeAttribute("disabled"),this}},{key:"isDisabled",value:function(){return this.disabled}},{key:"withReadOnly",value:function(e){return this.readOnly=!!e,this.readOnly?this.root.setAttribute("readonly",""):this.root.removeAttribute("readonly"),this}},{key:"extractDatePartFrom",value:function(e){if(null===e)this.value=null;else switch(this.role){case c.i.DAY:this.value=e.getDate();break;case c.i.MONTH:this.value=e.getMonth()+1;break;case c.i.YEAR:this.value=e.getFullYear();break;case c.i.HOUR_24:this.value=e.getHours();break;case c.i.HOUR_12:this.value=e.getHours()>12?e.getHours()-12:e.getHours();break;case c.i.MINUTE:this.value=e.getMinutes();break;case c.i.SECOND:this.value=e.getSeconds();break;case c.i.MILLISECOND:this.value=e.getMilliseconds();break;case c.i.AM_PM:this.value=e.getHours()>=12?1:0}return this.render(),this}},{key:"render",value:function(){if(null===this.value){this.root.setAttribute("data-is-null","");var e=this.getPlaceholder();this.root.textContent=e.text,e.intlKey&&this.root.setAttribute("data-i18n-text",e.intlKey)}else if(this.root.removeAttribute("data-is-null"),this.root.removeAttribute("data-i18n-text"),this.role===c.i.AM_PM)this.root.textContent=0===this.value?"AM":"PM";else{for(var t=String(this.value);t.length<this.padLength;)t="0".concat(t);this.root.textContent=t}}},{key:"getPlaceholder",value:function(){var e,t;switch(this.role){case c.i.DAY:e="dd",t="textdef_63";break;case c.i.MONTH:e="mm",t="textdef_62";break;case c.i.YEAR:e="yyyy",t="textdef_64";break;case c.i.HOUR_24:case c.i.HOUR_12:e="hh",t="textdef_65";break;case c.i.MINUTE:e="mm",t="textdef_66";break;case c.i.SECOND:e="ss";break;case c.i.MILLISECOND:e="ms";break;case c.i.AM_PM:e="AM"}return t?{text:d.a.getI18n()?d.a.getI18n().translateText(t):e,intlKey:t}:{text:e,intlKey:""}}},{key:"getDatePartRoleName",value:function(e){switch(e){case c.i.DAY:return"day";case c.i.MONTH:return"month";case c.i.YEAR:return"year";case c.i.HOUR_24:return"hour-24";case c.i.HOUR_12:return"hour-12";case c.i.MINUTE:return"minute";case c.i.SECOND:return"second";case c.i.MILLISECOND:return"millisecond";case c.i.AM_PM:return"am-pm";default:return"invalid"}}},{key:"addDigit",value:function(e){var t;if(null===e)t=null;else if((null===this.value||(t=10*this.value+e)>this.max)&&(t=e),String(t).length>this.padLength&&(t=~~String(t).substr(1)),t<this.min||t>this.max)return;this.value=t,this.input.rebuildDateFromParts(),this.input.trigger("date-part-changed"),this.render()}},{key:"incDec",value:function(e){var t=this.value;null===t?t=1===e?this.min:this.max:(t+=e)>this.max?t=this.min:t<this.min&&(t=this.max),this.value=t,this.input.rebuildDateFromParts(),this.input.trigger("date-part-changed"),this.render()}},{key:"handleKeyEvent",value:function(e){if(!this.disabled&&!this.readOnly){var t=0|(e.keyCode||e.charCode),n=this.input.getDateValue(),i=!1;switch(0|t){case 37:this.input.focusPreviousDatePartGroup(),e.preventDefault(),e.stopPropagation();break;case 38:this.incDec(1),i=!0,e.preventDefault(),e.stopPropagation();break;case 39:this.input.focusNextDatePartGroup(),e.preventDefault(),e.stopPropagation();break;case 40:this.incDec(-1),i=!0,e.preventDefault(),e.stopPropagation();break;case 8:case 46:this.addDigit(null),i=!0,e.preventDefault(),e.stopPropagation();break;case 48:case 96:this.addDigit(0),i=!0,e.preventDefault(),e.stopPropagation();break;case 49:case 97:this.role!==c.i.AM_PM&&(this.addDigit(1),i=!0,e.preventDefault(),e.stopPropagation());break;case 50:case 98:this.role!==c.i.AM_PM&&(this.addDigit(2),i=!0,e.preventDefault(),e.stopPropagation());break;case 51:case 99:this.role!==c.i.AM_PM&&(this.addDigit(3),i=!0,e.preventDefault(),e.stopPropagation());break;case 52:case 100:this.role!==c.i.AM_PM&&(this.addDigit(4),i=!0,e.preventDefault(),e.stopPropagation());break;case 53:case 101:this.role!==c.i.AM_PM&&(this.addDigit(5),i=!0,e.preventDefault(),e.stopPropagation());break;case 54:case 102:this.role!==c.i.AM_PM&&(this.addDigit(6),i=!0,e.preventDefault(),e.stopPropagation());break;case 55:case 103:this.role!==c.i.AM_PM&&(this.addDigit(7),i=!0,e.preventDefault(),e.stopPropagation());break;case 56:case 104:this.role!==c.i.AM_PM&&(this.addDigit(8),i=!0,e.preventDefault(),e.stopPropagation());break;case 57:case 105:this.role!==c.i.AM_PM&&(this.addDigit(9),i=!0,e.preventDefault(),e.stopPropagation());break;case 65:this.role===c.i.AM_PM&&(this.addDigit(0),i=!0,e.preventDefault(),e.stopPropagation());break;case 80:this.role===c.i.AM_PM&&(this.addDigit(1),i=!0,e.preventDefault(),e.stopPropagation());break;case 9:e.shiftKey?this.input.focusPreviousDatePartGroup():this.input.focusNextDatePartGroup(),this.getRootNode().hasAttribute("data-is-focused")||(e.preventDefault(),e.stopPropagation())}if(i){var r;try{r=this.input.getDateValue()}catch(e){r=null}u.a.dateEquals(r,n)||d.a.getJQuery()(this.input.getRootNode()).trigger("input")}}}},{key:"getRootNode",value:function(){return this.root}},{key:"getRole",value:function(){return this.role}},{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){this.value=e,this.input.rebuildDateFromParts(),this.render()}}]),e}()},,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=function(){function e(){r()(this,e),l()(this,"currentFeatures",[]),window.activeToggles&&this.setFeatures(window.activeToggles)}return o()(e,[{key:"setFeatures",value:function(e){this.currentFeatures=e}},{key:"isWizardToggleActive",value:function(){return this.currentFeatures&&this.currentFeatures.includes("RED_WIZARD_FORM_BUILDER")}},{key:"isNotificationsV2Active",value:function(){return this.currentFeatures&&this.currentFeatures.includes("EDT_NOTIFICATIONS_V2")}},{key:"isNotificationsV1Active",value:function(){return!this.isNotificationsV2Active()}},{key:"isPublishV2Active",value:function(){return this.currentFeatures&&this.currentFeatures.includes("EDT_PUBLISH_NEW_EDITOR")}},{key:"isPublishV1Active",value:function(){return!this.isPublishV2Active()}},{key:"isPaymentsV2Active",value:function(){return this.currentFeatures&&this.currentFeatures.includes("AMP_PAYMENTS_NEW_EDITOR")}},{key:"isPaymentsV1Active",value:function(){return!this.isPaymentsV2Active()}},{key:"isBuilderSidebarExperimentActive",value:function(){return this.currentFeatures&&this.currentFeatures.includes("RED_SWITCHER_NAVIGATION_WITH_CURRENT_HEADER_123")}},{key:"isChainApprovalActive",value:function(){return this.currentFeatures&&this.currentFeatures.includes("RED_SHOW_APPROVALS_TAB")}},{key:"isNewFormSwitcherExperimentActive",value:function(){return this.currentFeatures&&this.currentFeatures.includes("NEW_FORM_SWITCHER")}},{key:"isPaywallsV2Active",value:function(){return this.currentFeatures&&this.currentFeatures.includes("RED_PAYWALLS_V2")}},{key:"isSwitcherNavigationWithNewHeaderActive",value:function(){return this.currentFeatures&&this.currentFeatures.includes("RED_SWITCHER_NAVIGATION_WITH_NEW_HEADER_123")}},{key:"canSeeNewPlans",value:function(){var e;return null===(e=window.BOOTSTRAP_DATA)||void 0===e?void 0:e.seeNewPlans}},{key:"isBuilderOnboardingActive",value:function(){return this.currentFeatures&&this.currentFeatures.includes("RED_BUILDER_ONBOARDING")}},{key:"isForceNewEditorActive",value:function(){return this.currentFeatures&&this.currentFeatures.includes("FORCE_NEW_EDITOR")}},{key:"isDefaultThemeV2Active",value:function(){return this.currentFeatures&&this.currentFeatures.includes("RED_DEFAULT_THEME_V2")}},{key:"isPaywalls2022Active",value:function(){return this.currentFeatures&&this.currentFeatures.includes("PAYWALLS_2022")}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();l()(c,"instance",void 0)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(335),u=n.n(c),d=function(){function e(){r()(this,e)}return o()(e,null,[{key:"sanitizeHTML",value:function(e){return u()(e,{allowedTags:this.HTML_TAGS,allowedAttributes:this.ALLOWED_ATTRIBUTES})}},{key:"sanitizeHTMLUsingUserRights",value:function(e){return u()(e,{allowedTags:this.HTML_TAGS.concat(this.USER_HTML_TAGS),allowedAttributes:this.ALLOWED_ATTRIBUTES})}}]),e}();l()(d,"HTML_TAGS",["a","abbr","acronym","address","area","article","aside","b","bdi","bdo","big","blockquote","br","button","canvas","caption","center","cite","code","col","colgroup","datalist","dd","del","details","dfn","dir","div","dl","dt","em","fieldset","figcaption","font","footer","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","img","input","ins","kbd","legend","li","nav","ol","p","pre","q","rp","rt","s","samp","small","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","tt","u","ul","wbr"]),l()(d,"ALLOWED_ATTRIBUTES",{a:["href","name","target","rel","type"],iframe:["src","width","height","sandbox","allow","allowfullscreen","frameborder"],img:["src","width","height","alt"],font:["font-size"],p:["align"],table:["bgcolor","width","border","align","cellpadding","summary"],td:["align","valign","bgcolor","char","charoff","colspan","rowspan","width","height","nowrap"],tr:["align","valign","bgcolor","char","charoff"],ul:["compact","type"],"*":["style","id","class","tabindex","title"]}),l()(d,"USER_HTML_TAGS",[])},function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var i=n(20),r=n.n(i),a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(3),u=n.n(c),d=n(7),p=n.n(d),h=n(8),_=n.n(h),g=n(4),m=n.n(g),f=n(0),E=n.n(f),y=n(33),T=n(73),v=n(42),O=n(1),b=n(29),C=n(80),I=n(2),R=n(45),P=n(37),N=n(103),A=n(13);function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _()(this,n)}}var L=function(e){p()(n,e);var t=S(n);function n(e,i){var r;for(o()(this,n),r=t.call(this),E()(u()(r),"store",void 0),E()(u()(r),"height",void 0),E()(u()(r),"colspan",void 0),E()(u()(r),"form",void 0),E()(u()(r),"parent",void 0),E()(u()(r),"id",void 0),E()(u()(r),"hash",void 0),E()(u()(r),"attached",void 0),E()(u()(r),"properties",{}),E()(u()(r),"rootNode",void 0),E()(u()(r),"errors",void 0),E()(u()(r),"rendererType",void 0),E()(u()(r),"labelDOMNode",void 0),E()(u()(r),"errorDOMNode",void 0),E()(u()(r),"instructionsDOMNode",void 0),E()(u()(r),"hasAccessibilityEnabled",void 0),r.form=e,void 0!==i&&null!==i&&(r.properties=i),r.store=Object(y.c)(),r.colspan=r.getDefaultColspan(),n.HASH_UID++,r.hash=n.HASH_UID.toString(16);8>r.hash.length;)r.hash="0".concat(r.hash);return r.createRootNodeElement(),null!==r.colspan&&r.rootNode&&r.rootNode.setAttribute("data-colspan",String(r.colspan)),r.hasAccessibilityEnabled=null===e||void 0===e?void 0:e.getConfiguration().getProperty("hasAccessibilityEnabled",!1),n.translationService=new v.a,r}return l()(n,[{key:"getHeight",value:function(){return void 0!==this.height?this.height:null}},{key:"getMinHeight",value:function(){return 0}},{key:"withHeight",value:function(e){null!==e&&e<this.getMinHeight()&&(e=this.getMinHeight()),0===e&&(e=null);var t=e!==this.height;return this.height=e,t&&this.form&&this.isAttached()&&this.form.trigger("node-attribute-changed",this,"height",this.height),t&&(this.getRootNode().style.height=e?"".concat(String(~~e),"px"):""),this}},{key:"getColspan",value:function(){return void 0!==this.colspan?this.colspan:null}},{key:"withColspan",value:function(e){null!==e&&(e>this.getMaxColspan()&&(e=this.getMaxColspan()),e<this.getMinColspan()&&(e=this.getMinColspan()));var t=this.colspan!==e;return null!==this.colspan?t&&this.getRootNode().setAttribute("data-colspan",String(e)):t&&this.getRootNode().removeAttribute("data-colspan"),this.colspan=e,t&&this.form&&this.isAttached()&&this.form.trigger("node-attribute-changed",this,"colspan",e),t&&this.isRenderingSupported()&&this.reRender(),this}},{key:"getForm",value:function(){return this.form||null}},{key:"getParent",value:function(){return this.parent||null}},{key:"withParent",value:function(e){return this.parent=e||null,this}},{key:"getNextSibling",value:function(){if(this.parent)for(var e=this.parent.getChildren(),t=0,n=e.length-1;t<n;t++)if(this===e[t])return e[t+1];return null}},{key:"getPreviousSibling",value:function(){if(this.parent)for(var e=this.parent.getChildren(),t=1,n=e.length;t<n;t++)if(this===e[t])return e[t-1];return null}},{key:"flatten",value:function(){return[this]}},{key:"getId",value:function(){return this.id||null}},{key:"withId",value:function(e){return this.id=e||null,null!==this.id?(this.getRootNode().setAttribute("data-id",String(this.id)),this.setupI18n()):this.getRootNode().removeAttribute("data-id"),this.form&&this.isAttached()&&this.form.trigger("node-attribute-changed",this,"id",this.id),this}},{key:"getHash",value:function(){return this.hash}},{key:"_static",value:function(){var e=this.constructor,t=this;return{getSupportedValidators:this.getSupportedValidators?function(){return t.getSupportedValidators(t)}:null,attributes:e.attributes,runtime:e.runtime,nodeName:e.nodeName,getConfiguration:e.getConfiguration,getDropDestinationCSSSelector:"function"===typeof this.constructor.getDropDestinationCSSSelector?this.constructor.getDropDestinationCSSSelector:A.a.nullFunction,getDropSupportedEdges:"function"===typeof this.constructor.getDropSupportedEdges?this.constructor.getDropSupportedEdges:A.a.nullFunction}}},{key:"hasAttribute",value:function(e){var t=this._static();return!("string"!==typeof e||!e||!t.attributes.hasOwnProperty(e))}},{key:"getAttributeType",value:function(e){var t=this._static();return this.hasAttribute(e)&&t.attributes[e].type||null}},{key:"hasAttributeProperty",value:function(e,t){var n=this._static();return"string"===typeof t&&t&&n.attributes[e].properties.hasOwnProperty(t)&&void 0!==n.attributes[e].properties[t]}},{key:"getAttributePropertyDescriptor",value:function(e,t){return this._static().attributes[e].properties[t]}},{key:"getProperty",value:function(e){var t,n=String(e||"").split("."),i=n[0]||"",r=n[1]||"";if(""===i||""===r||2!==n.length)throw new Error("Illegal attribute accessor: ".concat(JSON.stringify(e)));if(this.hasAttribute(i)){if(!this.hasAttributeProperty(i,r)){if(null!==(t=R.a.getPropertyReadCallback(e,this)))return t.call(this);if(R.a.isVirtualProperty(e,this))return;throw new Error("Property ".concat(JSON.stringify(r)," does not exist on a attribute of type ").concat(JSON.stringify(this.getAttributeType(i))))}return void 0===this.properties[i]||void 0===this.properties[i][r]?this._static().attributes[i].properties[r].defaultValue:this.properties[i][r]}if(null!==(t=R.a.getPropertyReadCallback(e,this)))return t.call(this);if(!R.a.isVirtualProperty(e,this))throw new Error("Property ".concat(JSON.stringify(r)," does not exist on a attribute of type ").concat(JSON.stringify(this.getAttributeType(i))))}},{key:"hasProperty",value:function(e){var t=String(e||"").split("."),n=t[0]||"",i=t[1]||"";return""!==n&&""!==i&&2===t.length&&(this.hasAttribute(n)&&!!this.hasAttributeProperty(n,i)||R.a.isVirtualProperty(e,this))}},{key:"setProperty",value:function(e,t){var n,i,r,a,o=String(e||"").split("."),s=o[0]||"",l=o[1]||"",c=this._static(),u=!1;if(""===s||""===l||2!==o.length)throw new Error("Illegal attribute accessor: ".concat(JSON.stringify(e)));if(!this.hasAttribute(s)){if(null===(a=R.a.getPropertyWriteCallback(e,this)))throw new Error("Attribute ".concat(JSON.stringify(s)," was not found"));a.call(this,t),u=!0}if(!u&&!this.hasAttributeProperty(s,l)){if(null===(a=R.a.getPropertyWriteCallback(e,this)))throw new Error("Property ".concat(JSON.stringify(l)," does not exist on a attribute of type ").concat(JSON.stringify(this.getAttributeType(s))));a.call(this,t),u=!0}if(u||void 0!==this.properties[s]||(this.properties[s]={}),u)r&&this.isAttached()&&(r.trigger("node-property-changed",this,e,t,null),r.trigger("change"));else{if(n=this.getAttributePropertyDescriptor(s,l),null===t&&!n.optional)switch(n.type){case"string":t="";break;case"number":case"int":case"float":t=0;break;case"boolean":case"bool":t=!1}if(!(null===t&&n.optional||c.runtime.isTypeOf(t,n.type)))throw new Error("Value ".concat(JSON.stringify(t)," is not of type ").concat(JSON.stringify(n)));i=this.properties[s][l],this.properties[s][l]=t,(r=this.getForm())&&!A.a.areTheSame(i,t)&&this.isAttached()&&(r.trigger("node-property-changed",this,e,t,i),r.trigger("change"))}return this}},{key:"enumerateProperties",value:function(){var e,t=[],n=this._static(),i=this.getParent()?this.getParent().enumerateDisabledProperties():null;for(var r in n.attributes)if(n.attributes.hasOwnProperty(r))for(var a in n.attributes[r].properties)n.attributes[r].properties.hasOwnProperty(a)&&t.push({name:"".concat(r,".").concat(a),type:n.attributes[r].properties[a].type,optional:n.attributes[r].properties[a].optional,virtual:!1});if(null!==(e=R.a.enumerateVirtualProperties(this)))for(var o=0,s=e.length;o<s;o++)t.push(e[o]);if(i)for(var l=t.length-1;l>=0;l--)i.indexOf(t[l].name)>-1&&t.splice(l,1);return t}},{key:"getRootNode",value:function(){return this.rootNode}},{key:"isAttached",value:function(){return void 0!==this.attached&&this.attached}},{key:"onCreated",value:function(){}},{key:"withProperties",value:function(e){return this.properties=e,this}},{key:"getDefaultColspan",value:function(){return 20}},{key:"setAttached",value:function(e){this.attached=e}},{key:"getComputedProperties",value:function(){var e=this._static(),t={};for(var n in e.attributes)if(e.attributes.hasOwnProperty(n))for(var i in t[n]={},e.attributes[n].properties)e.attributes[n].properties.hasOwnProperty(i)&&(t[n][i]=this.getProperty("".concat(n,".").concat(i)));return t}},{key:"isRemovable",value:function(){return!0}},{key:"isDuplicatable",value:function(){return!0}},{key:"isResizable",value:function(){return!0}},{key:"isDragable",value:function(){return!0}},{key:"isSelectable",value:function(){var e=this.getTypeId()===I.a.CONTAINER_TYPE_PAGE,t=this.form.getNumberOfPages()<2;return!e||!t}},{key:"getErrors",value:function(){return this.errors||null}},{key:"withErrors",value:function(e){var t;if(null!==e&&!r()(e,Array))throw new Error("Invalid argument: array expected!");if(e&&(t=e.length)){for(var n,i=[],a=0;a<t;a++){if(!e[a]||"number"!==typeof e[a].code||"string"!==typeof e[a].message)throw new Error("Invalid argument: errors: IElementError[] expected!");if(n={code:~~e[a].code,message:e[a].message},void 0!==e[a].propertyName&&null!==e[a].propertyName){if("string"!==typeof e[a].propertyName)throw new Error("Invalid argument!");n.propertyName=e[a].propertyName}if(void 0!==e[a].fieldName&&null!==e[a].fieldName){if("string"!==typeof e[a].propertyName)throw new Error("Invalid argument!");n.fieldName=e[a].fieldName}i.push(n)}if(!this.errors&&!i.length)return;this.errors=i.length?i:void 0,this.errors?this.getRootNode().setAttribute("data-has-errors","1"):this.getRootNode().removeAttribute("data-has-errors"),this.isAttached()&&(this.form.trigger("change"),this.form.trigger("errors-changed",this))}else this.errors=void 0,this.getRootNode().removeAttribute("data-has-errors"),this.isAttached()&&(this.form.trigger("change"),this.form.trigger("errors-changed",this));return this}},{key:"addError",value:function(e,t,n,i){var r;if("number"!==typeof e)throw new Error("Invalid argument: int expected!");if(e=~~e,"string"!==typeof t)throw new Error("Invalid arugment: string expected!");if(r={code:e,message:t},void 0!==n&&null!==n){if("string"!==typeof n)throw new Error("Invalid argument: undefined|string expected");r.propertyName=n}if(void 0!==i&&null!==i){if("string"!==typeof i)throw new Error("Invalid argument: undefined|string expected");r.fieldName=i}if(void 0===this.errors)return this.errors=[r],this.getRootNode().setAttribute("data-has-errors","1"),this.isAttached()&&(this.form.trigger("change"),this.form.trigger("errors-changed",this)),!0;for(var a=0,o=this.errors.length;a<o;a++)if(this.errors[a].code===e&&this.errors[a].fieldName===r.fieldName&&this.errors[a].propertyName===r.propertyName)return this.errors[a].message!==t&&(this.errors[a].message=t,this.isAttached()&&(this.form.trigger("change"),this.form.trigger("errors-changed",this)),!0);return this.errors.push(r),1===this.errors.length&&this.getRootNode().setAttribute("data-has-errors","1"),this.isAttached()&&(this.form.trigger("change"),this.form.trigger("errors-changed",this)),!0}},{key:"getErrorByCode",value:function(e){if(this.errors)for(var t=0,n=this.errors.length;t<n;t++)if(this.errors[t].code===e)return{code:this.errors[t].code,message:this.errors[t].message};return null}},{key:"removeError",value:function(e,t,n){if(this.errors)for(var i=0,r=this.errors.length;i<r;i++)if(e===this.errors[i].code&&t===this.errors[i].propertyName&&n===this.errors[i].fieldName)return this.errors.splice(i,1),0===this.errors.length&&(this.errors=void 0,this.getRootNode().removeAttribute("data-has-errors")),this.isAttached()&&(this.form.trigger("change"),this.form.trigger("errors-changed",this)),!0;return!1}},{key:"removeAllBackendErrors",value:function(){var e=!1;if(this.errors)for(var t=this.errors.length-1;t>=0;t--)n.ALL_BACKEND_ERRORS.indexOf(this.errors[t].code)>-1&&(this.errors.splice(t,1),e=!0,0===this.errors.length&&(this.errors=void 0,this.getRootNode().removeAttribute("data-has-errors")));return e&&this.isAttached()&&(this.getForm().trigger("change"),this.getForm().trigger("errors-changed",this)),e}},{key:"getResizingCapability",value:function(){return O.db.NONE}},{key:"getParentPage",value:function(){return this.parent?this.parent.getParentPage():null}},{key:"getMinColspan",value:function(){return 0}},{key:"getMaxColspan",value:function(){return this.parent?this.parent.getMaxColspan():20}},{key:"getFirstParentContainer",value:function(){var e=this;do{if(e&&e.getElementKind()===O.p.CONTAINER&&e.getTypeId()!==I.a.CONTAINER_TYPE_ROW&&e.getTypeId()!==I.a.CONTAINER_TYPE_PAGE&&e.getTypeId()!==I.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE&&e.getTypeId()!==I.a.ELEMENT_TYPE_FORM&&e.getTypeId()!==I.a.CONTAINER_TYPE_LIKERT_WRAPPER)break;e=e.getParent()}while(e);return e||null}},{key:"cloneNode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=A.a.clone(this.properties),i=this.getForm().getEngine().createElement(this.getTypeId(),n,this.getForm());return e&&(i.withColspan(this.getColspan()),t&&i.withId(this.getId()),i.withHeight(this.getHeight())),this.getElementKind()===O.p.CONTAINER&&function(n,i){if(n.getTypeId()===I.a.CONTAINER_TYPE_REPEATABLE){var r=n.getChildren();i.appendChild(r[0].cloneNode(!0,!1))}else for(var a=0,o=n.getChildren(),s=o.length;a<s;a++)i.appendChild(o[a].cloneNode(e,t))}(this,i),i}},{key:"onDuplicate",value:function(){if(this.hasProperty("label.labelText")){var e=String(this.getProperty("label.labelText")||"").replace(/(^[\s]+|[\s]+$)/g,"");e="Copy of ".concat(e||this.getElementName()),this.setProperty("label.labelText",e),this.updateLabelText()}}},{key:"hasError",value:function(e){if(void 0!==this.errors&&this.errors&&this.errors.length){for(var t=0,n=this.errors.length;t<n;t++)if(this.errors[t].code===e)return!0;return!1}return!1}},{key:"isRenderingSupported",value:function(){return!1}},{key:"setRendererType",value:function(e){if("number"!=typeof e)throw new Error("Invalid argument: newRendererType: EControlRendererType expected");this.rendererType!==e&&(this.rendererType=e,N.a.getRendererByType(this.rendererType).updateRootNode(this))}},{key:"getRendererType",value:function(){return void 0===this.rendererType?null:this.rendererType}},{key:"getRenderedLabelPlacement",value:function(){var e=this.getRendererType();if(null===e||!this.isRenderingSupported())return null;switch(e){case O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD:case O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:case O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL:case O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:return O.A.LEFT_ALIGNED;case O.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD:case O.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:case O.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL:case O.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:return O.A.RIGHT_ALIGNED;case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD:case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL:case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:return O.A.TOP_ALIGNED;default:return null}}},{key:"reRender",value:function(){this.rendererType=void 0,this.setRendererType(N.a.getSuggestedRenderer(this,this.getForm().getLabelPlacement(),this.getForm().getInstructionsPlacement()))}},{key:"getInputDOMNodes",value:function(){return null}},{key:"getLabelDOMNode",value:function(){return this.labelDOMNode||null}},{key:"getInstructionsDOMNode",value:function(){return this.instructionsDOMNode||null}},{key:"getErrorDOMNode",value:function(){return this.errorDOMNode||null}},{key:"updateLabelText",value:function(){if(void 0!==this.labelDOMNode&&this.hasProperty("label.labelText")){var e=this.getProperty("label.labelText"),t=this.hasProperty("label.isRemoved")&&this.getProperty("label.isRemoved"),n=t||this.hasProperty("label.isCompactField")&&this.getProperty("label.isCompactField");null===e||""===e?(this.labelDOMNode.setAttribute("data-is-empty","1"),this.labelDOMNode.textContent="",this.isCompactFieldPlaceholderSupported()&&n&&P.a.setLabelCompactFieldState(!0,"",this.getInputDOMNodes(),t)):(this.labelDOMNode.removeAttribute("data-is-empty"),this.labelDOMNode.innerHTML=T.a.sanitizeHTML(C.a.parse(e)),this.isCompactFieldPlaceholderSupported()&&n&&(e=C.a.toPlainText(e),P.a.setLabelCompactFieldState(!0,e,this.getInputDOMNodes(),t)))}}},{key:"updateInstructionsText",value:function(){if(void 0!==this.instructionsDOMNode&&this.hasProperty("instructions.text")){var e=this.getProperty("instructions.text");null===e||""===e?(this.instructionsDOMNode.setAttribute("data-is-empty","1"),this.instructionsDOMNode.textContent=""):(this.instructionsDOMNode.removeAttribute("data-is-empty"),this.instructionsDOMNode.innerHTML=T.a.sanitizeHTML(C.a.parse(e)))}}},{key:"updateShowInstructionsOnClick",value:function(){this.hasProperty("instructions.showInstructionsOnClick")&&this.getProperty("instructions.showInstructionsOnClick")?this.rootNode.setAttribute("data-instructions-on-click","1"):this.rootNode.removeAttribute("data-instructions-on-click")}},{key:"updateErrorsText",value:function(){if(void 0!==this.errorDOMNode){var e=this.getErrors();null===e?(this.errorDOMNode.setAttribute("data-is-empty","1"),this.errorDOMNode.textContent=""):(this.errorDOMNode.removeAttribute("data-is-empty"),this.errorDOMNode.innerHTML=function(){for(var t=[],n=0,i=e.length;n<i;n++)(void 0===e[n].propertyName||/^value\./.test(e[n].propertyName))&&-1===t.indexOf(e[n].message)&&t.push(e[n].message);return t.join("; ")}())}}},{key:"updateLabelBoldState",value:function(){this.hasProperty("label.isBold")&&(this.getProperty("label.isBold")?this.getRootNode().setAttribute("data-label-is-bold","1"):this.getRootNode().removeAttribute("data-label-is-bold"))}},{key:"updateLabelItalicState",value:function(){this.hasProperty("label.isItalic")&&(this.getProperty("label.isItalic")?this.getRootNode().setAttribute("data-label-is-italic","1"):this.getRootNode().removeAttribute("data-label-is-italic"))}},{key:"updateLabelHiddenState",value:function(){this.hasProperty("label.isHidden")&&(this.getProperty("label.isHidden")?this.getRootNode().setAttribute("data-label-is-hidden","1"):this.getRootNode().removeAttribute("data-label-is-hidden"))}},{key:"updateRequiredState",value:function(){this.hasProperty("options.required")&&this.getProperty("options.required")?this.getRootNode().setAttribute("data-is-required","1"):this.getRootNode().removeAttribute("data-is-required")}},{key:"setupDefaults",value:function(){return this}},{key:"updateHiddenAttribute",value:function(){this.hasProperty("options.hidden")&&this.getProperty("options.hidden")?this.rootNode.setAttribute("data-is-hidden","1"):this.rootNode.removeAttribute("data-is-hidden")}},{key:"onBlur",value:function(){console.warn("blur: not implemented")}},{key:"isCompactFieldPlaceholderSupported",value:function(){return!0}},{key:"getVisibilityMode",value:function(){var e=this.hasProperty("label.isHidden")&&this.getProperty("label.isHidden"),t=this.hasProperty("label.isRemoved")&&this.getProperty("label.isRemoved"),n=this.hasProperty("label.isCompactField")&&this.getProperty("label.isCompactField");switch(!0){case!e&&!t&&!n:return O.s.SHOWN;case e&&!t&&!n:return O.s.HIDDEN;case t&&!e&&!n:return O.s.REMOVED;case n&&!e&&!t:return O.s.COMPACT;default:return O.s.OTHER}}},{key:"setVisibilityMode",value:function(e){switch(e){case O.s.HIDDEN:this.hasProperty("label.isHidden")&&this.setProperty("label.isHidden",!0),this.hasProperty("label.isRemoved")&&this.setProperty("label.isRemoved",!1),this.hasProperty("label.isCompactField")&&this.setProperty("label.isCompactField",!1);break;case O.s.REMOVED:this.hasProperty("label.isHidden")&&this.setProperty("label.isHidden",!1),this.hasProperty("label.isRemoved")&&this.setProperty("label.isRemoved",!0),this.hasProperty("label.isCompactField")&&this.setProperty("label.isCompactField",!1);break;case O.s.COMPACT:this.hasProperty("label.isHidden")&&this.setProperty("label.isHidden",!1),this.hasProperty("label.isRemoved")&&this.setProperty("label.isRemoved",!1),this.hasProperty("label.isCompactField")&&this.setProperty("label.isCompactField",!0);break;case O.s.OTHER:break;case O.s.SHOWN:default:this.hasProperty("label.isHidden")&&this.setProperty("label.isHidden",!1),this.hasProperty("label.isRemoved")&&this.setProperty("label.isRemoved",!1),this.hasProperty("label.isCompactField")&&this.setProperty("label.isCompactField",!1)}}},{key:"setupI18n",value:function(){if(this.id){if(this.hasProperty("label.isCompactField")&&this.getProperty("label.isCompactField")){var e=this.getRootNode().querySelector("input, textarea");e&&(e.setAttribute("data-i18n-placeholder","control_label_".concat(this.id)),e.setAttribute("data-i18n-markdown-text",""))}else this.labelDOMNode&&this.labelDOMNode.setAttribute("data-i18n-text","control_label_".concat(this.id));this.instructionsDOMNode&&this.instructionsDOMNode.setAttribute("data-i18n-text","control_instructions_".concat(this.id))}return this}},{key:"onEnterSelection",value:function(){this.rootNode&&this.rootNode.setAttribute("data-is-selected","1")}},{key:"onLeaveSelection",value:function(){this.rootNode&&this.rootNode.removeAttribute("data-is-selected")}},{key:"updateAccessibilityTabIndexes",value:function(){var e=this._static().getConfiguration();if(e&&O.v.NONE!==e.accessibilityFields&&O.v.OTHER!==e.accessibilityFields&&null!==e.accessibilityFields){var t=this.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1);(e.accessibilityFields&O.v.ROOT_NODE)===O.v.ROOT_NODE&&(t?this.rootNode&&(this.rootNode.tabIndex=0):this.rootNode&&this.rootNode.removeAttribute("tabindex")),(e.accessibilityFields&O.v.ERROR_NODE)===O.v.ERROR_NODE&&(t?this.errorDOMNode&&(this.errorDOMNode.tabIndex=0):this.errorDOMNode&&this.errorDOMNode.removeAttribute("tabindex"))}}},{key:"onFocusEnter",value:function(){}},{key:"onFocusLeave",value:function(){}},{key:"enumerateTranslations",value:function(){return[]}},{key:"isChildOf",value:function(e,t){if(t&&this.getTypeId()===e)return!0;for(var n=this.getParent();n&&n.getTypeId()!==I.a.ELEMENT_TYPE_FORM;){if(n.getTypeId()===e)return!0;n=n.getParent()}return!1}},{key:"getFirstParentOfType",value:function(e){for(var t=this.getParent();t&&t.getTypeId()!==I.a.ELEMENT_TYPE_FORM;){if(t.getTypeId()===e)return t;t=t.getParent()}return null}},{key:"resetLimitChoicesProperty",value:function(){var e="options.isNumberOfTimesAnOptionCanBeChosen";this.hasProperty(e)&&this.getProperty(e)&&this.setProperty(e,!1)}},{key:"resetQuizOptionsProperty",value:function(){var e,t=this.getTypeId();try{e=this.getProperty("options.quizOptions")}catch(n){return}t===I.a.CONTAINER_TYPE_LIKERT_WRAPPER?e.forEach((function(e){return e.map((function(e){return[e.quizPoints=0,e.isCorrect=!1]}))})):e.map((function(e){return[e.quizPoints=0,e.isCorrect=!1]})),this.setProperty("options.quizOptions",e)}},{key:"isViewForm",value:function(){return this.getForm().getEngine().getLoader().getLoaderType()===O.B.VIEW}}]),n}(b.a);E()(L,"BACKEND_ERR_INVALID_SETTINGS",1e3),E()(L,"BACKEND_ERR_VALUE_IS_REQUIRED",1001),E()(L,"BACKEND_ERR_INVALID_VALUE_FORMAT",1002),E()(L,"BACKEND_ERR_INVALID_VALUE",1003),E()(L,"BACKEND_ERR_FATAL_FORM_GENERIC_EXCEPTION",2e3),E()(L,"BACKEND_ERR_FATAL_FORM_IS_INACTIVE",2001),E()(L,"BACKEND_ERR_FATAL_FORM_IS_UNAVAILABLE",2002),E()(L,"BACKEND_ERR_FATAL_INVALID_FORM_DOMAIN",2003),E()(L,"BACKEND_ERR_FATAL_FORM_GENERAL_MAINTENANCE",2004),E()(L,"BACKEND_ERR_UNKNOWN_LEGACY",1e4),E()(L,"NET_ERR_FATAL_SUBMISSION_BAD_RESPONSE",2099),E()(L,"translationService",void 0),E()(L,"ALL_BACKEND_ERRORS",[L.BACKEND_ERR_INVALID_SETTINGS,L.BACKEND_ERR_VALUE_IS_REQUIRED,L.BACKEND_ERR_INVALID_VALUE_FORMAT,L.BACKEND_ERR_INVALID_VALUE,L.BACKEND_ERR_FATAL_FORM_GENERIC_EXCEPTION,L.BACKEND_ERR_FATAL_FORM_IS_INACTIVE,L.BACKEND_ERR_FATAL_FORM_IS_UNAVAILABLE,L.BACKEND_ERR_FATAL_INVALID_FORM_DOMAIN,L.BACKEND_ERR_FATAL_FORM_GENERAL_MAINTENANCE,L.NET_ERR_FATAL_SUBMISSION_BAD_RESPONSE,L.BACKEND_ERR_UNKNOWN_LEGACY]),E()(L,"HASH_UID",0)},,function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return l}));var i=n(100),r=function(e){return{type:i.a.SET_ACTIVE_PAYWALL,payload:e}},a=function(){return{type:i.a.CLOSE_PAYWALL,payload:null}},o=function(){return{type:i.a.FETCH_PLAN_PRICES,payload:null}},s=function(e){return{type:i.a.FETCH_PLAN_PRICES_SUCCESS,payload:e}},l=function(){return{type:i.a.FETCH_PLAN_PRICES_FAILURE,payload:null}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n(43),r=n.n(i),a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(0),u=n.n(c),d=n(137),p=n(101),h=n(215),_=n(226),g=n(9),m=n(16),f=n(2),E=n(13),y=n(605),T=n(28),v=(n(482),function(){function e(){o()(this,e),u()(this,"unitType",[{unitTypeIndex:p.a.PERCENTAGE,unitTypeName:"percentage",unitTypeSymbol:"%"},{unitTypeIndex:p.a.FIXED_VALUE,unitTypeName:"fixed_value",unitTypeSymbol:"$"}]),u()(this,"model",void 0),u()(this,"engine",void 0),u()(this,"ui",void 0),u()(this,"i18n",void 0),u()(this,"dispatcher",void 0),u()(this,"resourceManager",void 0),u()(this,"settings",void 0),u()(this,"productsToRemove",[]),u()(this,"jq",void 0),u()(this,"temporaryControlsData",void 0),u()(this,"selectedCurrency",void 0)}return l()(e,[{key:"open",value:function(t,n){var i=this;n&&(this.engine=n),t&&(this.jq=t),this.ui=this.engine.getLoader().getUI(),this.i18n=this.engine.getLoader().getI18n(),this.dispatcher=this.engine.getLoader().getCommandDispatcher(),this.resourceManager=this.engine.getResourceManager(),this.settings=this.engine.getDocument().getForm().getEditorSettingByTypeId(m.a.PAYMENT_PRODUCTS_EDITOR_SETTING),this.temporaryControlsData={};var r=this;return this.jq.Deferred((function(t){i.jq.when(r.resourceManager.get("/modules/Typescript/Form/resources/editor/Payments/ProductsDialog/payments-products-dialog.html"),r.resourceManager.get("/modules/Typescript/Form/resources/editor/Payments/ProductsDialog/payments-products-dialog-table-headings.html"),r.resourceManager.get("/modules/Typescript/Form/resources/editor/Payments/ProductsDialog/payments-products-dialog-discount-on-total.html")).done((function(n,i,a){var o=r.settings.getProperty("currencyId")||e.DEFAULT_CURRENCY_ID;r.updateModel(o);var s=r.ui.createDialog(r.i18n.translateText("edt_UI_property_payments_products_dialog_title")||"Products",[{type:g.f.CANCEL,callback:function(){s.close(),t.reject(new Error("User closed the dialog by pressing the Cancel button"))}},{type:g.f.SAVE,callback:function(){r.engine.getLoader().trigger("products_dialog_on_save"),r.saveProductRemovalFromDialog(),r.currencyOnSaveHandler(),s.close(),t.resolve(r.model)}}],{width:"900px",height:"615px"});s.dialog.classList.add("products-dialog"),0!==r.model.controls.length||r.model.fixedAmount?r.showDefaultState(s,n,i,a):r.showEmptyState(s,n,i,a)})).fail((function(e){console.error("Failed to open Payment Calculations Settings. Error is displayed below",e)}))})).promise()}},{key:"updateModel",value:function(e){var t,n;this.model={currencyId:e,currencySymbol:this.engine.getCurrency().getCurrencySymbolById(e),onTotalDiscountValue:this.generateGenericPriceFormatFromInputValue(null===(t=this.settings)||void 0===t?void 0:t.getProperty("discountValue")),onTotalDiscountUnitType:this.settings.getProperty("discountType")||0,onTotalTaxValue:this.generateGenericPriceFormatFromInputValue(null===(n=this.settings)||void 0===n?void 0:n.getProperty("taxValue")),onTotalTaxUnitType:this.settings.getProperty("taxType")||0,unitType:this.unitType,controls:this.getControlsDataForSalvage()},this.model.controls=this.model.controls.filter((function(e){return null!==e})),null!==this.settings.getProperty("fixedAmount")&&(this.model.fixedAmount=this.settings.getProperty("fixedAmount").toFixed(2)),this.unitType[p.a.FIXED_VALUE].unitTypeSymbol=this.model.currencySymbol}},{key:"showEmptyState",value:function(e,t,n,i){var a=this,o=e.dialog.getElementsByClassName("ui-buttons")[0],s=r()(o.children).filter((function(e){return e.dataset.role==="button-type-".concat(g.f.SAVE.toString())}))[0];o.removeChild(s);var l=document.createElement("div");l.classList.add("empty-state-container");var c=document.createElement("p");c.innerHTML=this.i18n.translateText("payments_dialog_empty_state_description"),c.dataset.testid="paymentsDialogEmptyStateDescription",l.appendChild(c);var u=document.createElement("button");u.innerText=this.i18n.translateText("payments_dialog_empty_state_add_product_button"),u.dataset.testid="paymentsDialogEmptyStateAddProductButton",u.classList.add("btn","add-products"),u.onclick=function(){o.appendChild(s),a.showDefaultState(e,t,n,i)},l.appendChild(u),e.body.appendChild(l)}},{key:"showDefaultState",value:function(e,t,n,i){var r=this,a=new T.a(t),o=function(){var t=e.body.getElementsByClassName("add-new-product");0!=t.length?r.jq(t).find('[data-role="text-dropdown"]').trigger("click"):r.renderAddProductRow(r.jq,e,a)},s=e.dialog.getElementsByClassName("ui-titlebar")[0],l=new T.a(n),c=document.createElement("div");c.dataset.testid="paymentsHeaderButtonsContainer";var u=new h.a({label:this.i18n.translateTextDefault("payments_dialog_add_product_button","Add product"),title:this.i18n.translateTextDefault("payments_dialog_add_product_button_title","Add the form fields that will be used as products"),classList:"add-product-button",testId:"paymentsDialogHeaderAddProductBtn",onClick:o});c.appendChild(u.getElement());var d=this.getCurrencyDropdown();d.on("change",(function(){r.selectedCurrency=d.getSelectedOption();var t=r.selectedCurrency.id;r.updateCurrency(r.jq,t,e,a,_)})),c.appendChild(d.getNode()),s.appendChild(c);s.insertAdjacentHTML("beforeend",l.parse({tableHeaders:[{name:"name"},{name:"price"},{name:"quantity"},{name:"discount"},{name:"tax"}]})),this.ui.upgrade(s);var p=e.dialog.getElementsByClassName("ui-buttons")[0],_=new T.a(i);this.renderDiscountOnTotal(p,_),this.renderDialogBody(this.jq,e,a),0!==this.model.controls.length||this.model.fixedAmount||o()}},{key:"updateFeeControl",value:function(){var e=this,t=document.querySelectorAll("#form [data-role=control][data-type=fee]"),n=document.querySelectorAll(".form-currency-container > a[data-plugin=currency-editor]"),i=document.querySelectorAll("#item .fee-base-price-container > input");t&&(t.forEach((function(t){var n=t.getAttribute("data-hash");e.engine.getDocument().getElementByHash(n).updatePriceFee()})),n&&(n.forEach((function(t){t.innerText=e.engine.getCurrency().getCurrencyById(e.model.currencyId).isoCode})),i&&i.forEach((function(t){t.value=t.value.replace(/[^0-9.]/g,""),t.value=e.model.currencySymbol+t.value}))))}},{key:"getCurrencyDropdown",value:function(){var t=this,n=document.createElement("div");n.dataset.testid="currencyDropdownContainer";var i=this.settings.getProperty("currencyId")||e.DEFAULT_CURRENCY_ID,r=this.engine.getCurrency().enumerateCurrencies().map((function(e){return{id:e.id,label:t.i18n.translateText(e.i18n)}}));r=Object(y.a)(r,["label"],["asc"]);var a={placeholder:"",selected:i};return new _.a(this.jq).init(n,r,a)}},{key:"currencyOnSaveHandler",value:function(){this.selectedCurrency&&(this.engine.getLoader().execCommand("track-event","payments_currency_change"),this.engine.getLoader().trigger("payments_currency_change",this.selectedCurrency))}},{key:"updateCurrency",value:function(e,t,n,i,r){this.model.currencyId=t,this.model.currencySymbol=this.engine.getCurrency().getCurrencySymbolById(t),this.unitType[p.a.FIXED_VALUE].unitTypeSymbol=this.model.currencySymbol;for(var a=n.dialog.getElementsByClassName("ui-buttons")[0],o=a.getElementsByClassName("payments-products-dialog-row"),s=0,l=o.length;s<l;s++)a.removeChild(o[0]);this.renderDiscountOnTotal(a,r),this.ui.upgrade(a),this.renderDialogBody(this.jq,n,i)}},{key:"renderDiscountOnTotal",value:function(e,t){e.insertAdjacentHTML("afterbegin",t.parse(this.model)),this.ui.upgrade(e)}},{key:"renderAddProductRow",value:function(t,n,i){var r=this,a=n.body.querySelector('[data-role="edit-products-options"]'),o=document.createElement("div"),s=a.getElementsByClassName("payments-products-dialog-row"),l=0!=s.length?s[s.length-1].nextSibling:a.firstChild,c=document.createElement("select"),u=document.createElement("div"),d=this.getCompatibleProductControls();o.classList.add("payments-products-dialog-row"),o.classList.add("add-new-product"),c.setAttribute("data-appearance","text");var h=document.createElement("option");if(h.value="",h.text=r.i18n.translateText("edt_UI_property_payments_products_dialog_select product_label"),c.add(h),!this.model.fixedAmount){var _=document.createElement("option");_.value="1",_.text=r.i18n.translateText("edt_UI_property_payments_products_dialog_fixed_amount_label"),c.add(_)}for(var g=0,m=d.length;g<m;g++){var f=document.createElement("option");f.value=d[g].id.toString(),f.text=d[g].label,c.add(f)}o.appendChild(c),u.classList.add("payments-products-dialog-column"),u.classList.add("i-lg"),u.classList.add("i123-close"),u.setAttribute("data-role","control-delete"),o.appendChild(u),a.insertBefore(o,l),this.ui.upgrade(a.parentNode),a.parentNode.scrollTop=a.offsetHeight-a.parentNode.offsetHeight;var E=document.querySelector('.add-new-product [data-role="text-dropdown"]');E.addEventListener("click",(function(a){if(a.target.hasAttribute("data-value")){var o=parseInt(a.target.getAttribute("data-value").replace(/"/g,"")),s=a.target.innerHTML;if(1===o)r.model.fixedAmount=r.generateGenericPriceFormatFromInputValue("0");else{var l=r.engine.getDocument().getElementById(o);l.hasProperty("payments")&&l.setProperty("payments.isProduct",!0);var c=r.getControlHasQuantity(l);r.model.controls.push({rowIndex:r.model.controls.length,controlId:o,name:s,customName:null,hasMultiplePrices:e.CONTROLS_WITH_MULTIPLE_PRICES.indexOf(l.getTypeId())>-1,hasVariablePrice:e.CONTROLS_WITH_VARIABLE_PRICE.indexOf(l.getTypeId())>-1,price:r.getControlSinglePrice(l),hasQuantity:c,quantity:null,quantityControls:c?r.getCompatibleQuantityControls(o):null,discountValue:r.generateGenericPriceFormatFromInputValue("0"),discountUnitType:p.a.PERCENTAGE,taxValue:r.generateGenericPriceFormatFromInputValue("0"),taxUnitType:p.a.PERCENTAGE})}r.renderDialogBody(t,n,i),a.stopPropagation(),r.engine.getLoader().execCommand("track-event","payments_products_add")}}),!0),E.click()}},{key:"renderDialogBody",value:function(e,t,n){t.body.innerHTML=n.parse(this.model),this.i18n.translateDOMNode(t.body),this.dispatcher.addPerfectScrollbar(t.body),this.ui.upgrade(t.body),this.attachDialogEvents(t)}},{key:"getControlHasQuantity",value:function(e){return e.getTypeId()!==f.a.CONTROL_TYPE_FEE}},{key:"getControlsDataForSalvage",value:function(){var t=this,n=this.settings.getProperty("productsData"),i=0;return null===n?[]:n.map((function(n){var r=t.engine.getDocument().getElementById(n.controlId);if(!r)return null;var a=t.getControlHasQuantity(r);return{rowIndex:i++,controlId:n.controlId,name:t.getControlName(r),customName:n.details,hasMultiplePrices:e.CONTROLS_WITH_MULTIPLE_PRICES.indexOf(r.getTypeId())>-1,hasVariablePrice:e.CONTROLS_WITH_VARIABLE_PRICE.indexOf(r.getTypeId())>-1,price:t.getControlSinglePrice(r),hasQuantity:a,quantity:n.quantityControlId,quantityControls:a?t.getCompatibleQuantityControls(r.getId()):null,discountValue:t.generateGenericPriceFormatFromInputValue(String(n.discount)),discountUnitType:n.discountType,taxValue:t.generateGenericPriceFormatFromInputValue(String(n.tax)),taxUnitType:n.taxType}}))}},{key:"attachDialogEvents",value:function(e){var t=this;e.dialog.hasAttribute("events-attached")||($(e.dialog).on("click",'[data-role="control-price"][data-price-literal], [data-role="control-discount"], [data-role="control-tax"]',(function(){t.removeClickedState($),this.setAttribute("data-has-click",""),$(this).find('input:not([type="hidden"])').each((function(){this.focus()}))})).on("click",'[data-role="control-price"][data-price-multiple]',(function(){var n=t.engine.getLoader().getI18n(),i=+$(this).closest("[data-control-identifier]").attr("data-control-identifier"),r=t.engine.getDocument().getElementById(i),a="undefined"!==typeof t.temporaryControlsData[i]?E.a.clone(t.temporaryControlsData[i]):E.a.clone(r.getProperty("choices.values"))||[],o=new d.a;e.hide(),o.setCurrentSelectedControl(t.engine,r),o.setDialogOptions({editingContext:"PAYMENTS_VALUES",itemType:"CHOICE",container:null,choices:a,defaultOptionInputType:0,dialogTitle:n.translateText("edt_UI_property_payments_value"),newChoiceText:n.translateText("edt_text_new_choice"),editorUserInterface:t.ui,useDifferentValuesPerStatement:!1}),o.editChoices().then((function(n){t.temporaryControlsData[i]=E.a.clone(n),e.show()})).fail((function(t){e.show(),console.warn("Failed to save options. Error is displayed below"),console.error(t)}))})).on("change",'[data-role="control-name"] input:not([type="hidden"])',(function(){var e=$(this).parents(".payments-products-dialog-row"),n=t.engine.getDocument().getElementById(parseInt(e.attr("data-control-identifier"))),i=parseInt(e.attr("data-index"));t.updateControlConfigurationInsideModel(i,"customName",this.value),e.find('[data-role="control-name"]').attr("title",t.getControlName(n))})).on("change",'[data-role="control-price"][data-price-literal] input:not([type="hidden"])',(function(){var e=$(this),n=t.generateGenericPriceFormatFromInputValue(this.value),i=e.parents(".payments-products-dialog-row"),r=i.find('.payments-products-dialog-column[data-role="control-price"][data-price-literal] span'),a=parseInt(i.attr("data-index"));-1===a?t.model.fixedAmount=n:t.updateControlConfigurationInsideModel(a,"price",n),e.attr("title",t.model.currencySymbol+this.value),r.text(t.model.currencySymbol+n),this.value=n})).on("input",'[data-role="control-price"][data-price-literal] input:not([type="hidden"])',(function(){var e=$(this).parents(".payments-products-dialog-row"),n=e.attr("data-control-identifier"),i=t.generateGenericPriceFormatFromInputValue(this.value);$('[data-control-identifier="'.concat(n,'"]')).each((function(){var n=$(this);if(e.get(0)!==n.get(0)){var r=n.find('.payments-products-dialog-column[data-role="control-price"][data-price-literal] input'),a=n.find('.payments-products-dialog-column[data-role="control-price"][data-price-literal] span');t.updateControlConfigurationInsideModel(parseInt(n.attr("data-index")),"price",i),r.attr("title",t.model.currencySymbol+i),a.text(t.model.currencySymbol+i),n.val(i)}}))})).on("change",'[data-role="control-discount"] input:not([type="hidden"])',(function(){var e=$(this),n=e.parents(".payments-products-dialog-row"),i=e.parents(".payments-products-dialog-column"),r=i.find("span"),a=parseInt(n.attr("data-index")),o=this.value,s=!1,l="- ";isNaN(a)?(t.engine.getLoader().execCommand("track-event","payments_products_discount_total_value_change"),0===t.model.onTotalDiscountUnitType&&(s=!0),o=t.generateGenericPriceFormatFromInputValue(this.value,s),t.model.onTotalDiscountValue=o,l+=t.generateDiscountAndTaxValue(o,t.model.onTotalDiscountUnitType)):(t.engine.getLoader().execCommand("track-event","payments_products_discount_value_change"),0===t.model.controls[a].discountUnitType&&(s=!0),o=t.generateGenericPriceFormatFromInputValue(this.value,s),t.updateControlConfigurationInsideModel(a,"discountValue",o),l+=t.generateDiscountAndTaxValue(o,t.model.controls[a].discountUnitType)),i.attr("title",l),r.text(l),e.val(o)})).on("change",'[data-role="control-tax"] input:not([type="hidden"])',(function(){var e=$(this),n=e.parents(".payments-products-dialog-row"),i=e.parents(".payments-products-dialog-column"),r=i.find("span"),a=parseInt(n.attr("data-index")),o=this.value,s="+ ";isNaN(a)?(t.engine.getLoader().execCommand("track-event","payments_products_tax_total_value_change"),o=t.generateGenericPriceFormatFromInputValue(this.value),t.model.onTotalTaxValue=o,s+=t.generateDiscountAndTaxValue(o,t.model.onTotalTaxUnitType)):(t.engine.getLoader().execCommand("track-event","payments_products_tax_value_change"),o=t.generateGenericPriceFormatFromInputValue(this.value),t.updateControlConfigurationInsideModel(a,"taxValue",o),s+=t.generateDiscountAndTaxValue(o,t.model.controls[a].taxUnitType)),i.attr("title",s),r.text(s),e.val(o)})).on("click",'.ui-body .payments-products-dialog-row [data-role="control-delete"]',(function(){var e=$(this).parents(".payments-products-dialog-row");t.engine.getLoader().execCommand("track-event","payments_products_delete");var n=parseInt(e.attr("data-index")),i=parseInt(e.attr("data-control-identifier"));if(t.productsToRemove.push(i),-1===n)t.model.fixedAmount=null;else for(var r=0,a=t.model.controls.length;r<a;r++)if(n===t.model.controls[r].rowIndex){t.model.controls.splice(r,1);break}$(this).parent().remove()})),e.dialog.setAttribute("events-attached","1")),$('[data-role="control-quantity"] [data-role="text-dropdown"]').each((function(){this.addEventListener("click",(function(e){var n=$(e.target);if(n.attr("data-value")){var i=parseInt(n.parents(".payments-products-dialog-row").attr("data-index")),r=parseInt(n.attr("data-value").replace(/"/g,""))||null;t.updateControlConfigurationInsideModel(i,"quantity",r)}}),!0)})),$('[data-role="control-discount"] [data-role="text-dropdown"]').each((function(){this.addEventListener("click",(function(e){var n=$(e.target);if(n.attr("data-value")){var i=n.parents(".payments-products-dialog-row"),r=n.parents(".payments-products-dialog-column"),a=r.find("span"),o=r.find('input:not([type="hidden"])'),s=parseInt(i.attr("data-index")),l=parseInt(JSON.parse(n.attr("data-value"))),c=0===l,u=t.generateGenericPriceFormatFromInputValue(o.val(),c),d="- ";isNaN(s)?(t.engine.getLoader().execCommand("track-event","payments_products_discount_total_type_change"),t.model.onTotalDiscountUnitType=l,t.model.onTotalDiscountValue=u,d+=t.generateDiscountAndTaxValue(u,t.model.onTotalDiscountUnitType)):(t.engine.getLoader().execCommand("track-event","payments_products_discount_type_change"),t.updateControlConfigurationInsideModel(s,"discountUnitType",l),t.updateControlConfigurationInsideModel(s,"discountValue",u),d+=t.generateDiscountAndTaxValue(u,t.model.controls[s].discountUnitType)),r.attr("title",d),a.text(d),o.val(u),t.removeClickedState($)}}),!0)})),$('[data-role="control-tax"] [data-role="text-dropdown"]').each((function(){this.addEventListener("click",(function(e){var n=$(e.target);if(n.attr("data-value")){var i=n.parents(".payments-products-dialog-row"),r=n.parents(".payments-products-dialog-column"),a=r.find("span"),o=r.find('input:not([type="hidden"])'),s=parseInt(i.attr("data-index")),l=parseInt(JSON.parse(n.attr("data-value"))),c=t.generateGenericPriceFormatFromInputValue(o.val()),u="+ ";isNaN(s)?(t.engine.getLoader().execCommand("track-event","payments_products_tax_total_type_change"),t.model.onTotalTaxUnitType=l,t.model.onTotalTaxValue=c,u+=t.generateDiscountAndTaxValue(c,t.model.onTotalTaxUnitType)):(t.engine.getLoader().execCommand("track-event","payments_products_tax_type_change"),t.updateControlConfigurationInsideModel(s,"taxUnitType",l),t.updateControlConfigurationInsideModel(s,"taxValue",c),u+=t.generateDiscountAndTaxValue(c,t.model.controls[s].taxUnitType)),r.attr("title",u),a.text(u),o.val(c),t.removeClickedState($)}}),!0)})),e.dialog.addEventListener("click",(function(e){var n=$(e.target),i=n.parents('[data-role="control-price"][data-price-literal]'),r=n.parents('[data-role="control-discount"]'),a=n.parents('[data-role="control-tax"]');0===i.length&&0===r.length&&0===a.length&&t.removeClickedState($)}),!0)}},{key:"generateGenericPriceFormatFromInputValue",value:function(e,t){return t=void 0!==t&&t,e=e||"0",parseFloat(e)<0&&(e="0"),parseFloat(e)>100&&!0===t&&(e="100"),(Math.round(100*parseFloat(e||"0"))/100).toFixed(2)}},{key:"generateDiscountAndTaxValue",value:function(e,t){var n=e+this.unitType[p.a.PERCENTAGE].unitTypeSymbol;return 1===t&&(n=this.model.currencySymbol+e),n}},{key:"removeClickedState",value:function(e){e(".payments-products-dialog-row [data-has-click]").each((function(){this.removeAttribute("data-has-click")}))}},{key:"updateControlConfigurationInsideModel",value:function(e,t,n){for(var i=0,r=this.model.controls.length;i<r;i++)if(e===this.model.controls[i].rowIndex){this.model.controls[i][t]=n;break}}},{key:"getCompatibleProductControls",value:function(){var t=this,n=this.engine.getDocument().getControlsList(),i=[];return n.forEach((function(n){null!==n.getId()&&(e.COMPATIBLE_QUANTITY_CONTROLS_WITHOUT_VALUE.indexOf(n.getTypeId())>-1||n.hasProperty("payments.value"))&&i.push({id:n.getId(),label:t.getControlName(n)})})),i}},{key:"getCompatibleQuantityControls",value:function(t){for(var n=this.engine.getDocument().getControlsList(),i=[],r=0,a=n.length;r<a;r++)if(null!==n[r].getId()&&t!==n[r].getId())if(e.COMPATIBLE_QUANTITY_CONTROLS_WITHOUT_VALUE.indexOf(n[r].getTypeId())>-1)i.push({id:n[r].getId(),label:this.getControlName(n[r])});else if(n[r].hasProperty("payments.value")){var o=n[r].getProperty("payments.value");null!==o&&o.length>=1&&0!==o.reduce((function(e,t){return e+t}),0)&&i.push({id:n[r].getId(),label:this.getControlName(n[r])})}return i}},{key:"getControlName",value:function(e){return e.hasProperty("label.labelText")&&""!==e.getProperty("label.labelText")?e.getProperty("label.labelText"):"Control #".concat(e.getId())}},{key:"getControlSinglePrice",value:function(t){if(!t.hasProperty("payments.value"))return null;var n=t.getProperty("payments.value")||["0"];return-1===e.CONTROLS_WITH_MULTIPLE_PRICES.indexOf(t.getTypeId())&&-1===e.CONTROLS_WITH_VARIABLE_PRICE.indexOf(t.getTypeId())?this.generateGenericPriceFormatFromInputValue(n[0]):null}},{key:"saveProductRemovalFromDialog",value:function(){var e={},t={},n=this;if(n.productsToRemove.forEach((function(t){e[t]=(e[t]||0)+1})),null==n.settings.getProperty("productsData"))var i=[];else i=n.settings.getProperty("productsData").map((function(e){return e.controlId}));i.forEach((function(e){t[e]=(t[e]||0)+1})),n.productsToRemove.map((function(i){if(!isNaN(i)&&(e[i]===t[i]||e[i]>=1&&void 0===t[i])){var r=n.engine.getDocument().getElementById(i);r.hasProperty("payments")&&r.setProperty("payments.isProduct",!1)}}))}},{key:"saveData",value:function(t){var n=this,i=document.getElementById("item"),r=this.engine.getDocument().getElementByHash(i.getAttribute("data-target-element")),a=[],o=[];(this.settings.getProperty("productsData")||[]).forEach((function(e){a.push(e.controlId)})),this.settings.setProperty("currencyId",t.currencyId),void 0!==t.fixedAmount&&null!==t.fixedAmount?(this.settings.setProperty("fixedAmount",parseFloat(t.fixedAmount)),this.engine.getLoader().getCommandDispatcher().trackFirstValueSaved()):this.settings.setProperty("fixedAmount",null),this.settings.setProperty("discountValue",parseFloat(t.onTotalDiscountValue)),this.settings.setProperty("discountType",t.onTotalDiscountUnitType),this.settings.setProperty("taxValue",parseFloat(t.onTotalTaxValue)),this.settings.setProperty("taxType",t.onTotalTaxUnitType),this.settings.setProperty("productsData",t.controls.map((function(t){var a,s=t.controlId,l=n.engine.getDocument().getElementById(s),c=n.engine.getLoader(),u=l.getForm().getEditorSettingByTypeId(m.a.PAYMENT_PRODUCTS_EDITOR_SETTING).getProperty("productsData"),p=window.location.href.replace("p=edit_fields","p=settings&tab=4"),h=c.getI18n().translateText("edt_UI_msg_payments_products_first_add_notification",p),_=n.engine.getDocument().getConfiguration().getProperty("hasProcessorsInjected");if(u&&0!==u.length||_||c.getUI().createNotification(h,!1,g.i.DEFAULT,!0),-1===e.CONTROLS_WITH_MULTIPLE_PRICES.indexOf(l.getTypeId())&&-1===e.CONTROLS_WITH_VARIABLE_PRICE.indexOf(l.getTypeId())&&(l.setProperty("payments.value",[parseFloat(t.price||"0")]),n.updateFeeControl(),n.engine.getLoader().getCommandDispatcher().trackFirstValueSaved(),n.engine.getLoader().execCommand("track-event","payments_products_price_change"),c.trigger("payments_products_price_change"),r&&r.getId()===s)){var f=i.querySelector('[data-role="attribute-group"][data-name="payments"] [data-role="property"][data-property-name="payments-virtualValue"] input[type="number"]');null!==f&&(f.value=String(t.price))}e.CONTROLS_WITH_MULTIPLE_PRICES.indexOf(l.getTypeId())>-1&&((a=void 0===n.temporaryControlsData[s]?l.getProperty("choices.values"):n.temporaryControlsData[s]).forEach((function(e){"undefined"!==typeof e.paymentsValue&&null!==e.paymentsValue||(e.paymentsValue=0)})),(new d.a).updateControlChoicesAndDOM(l,a,n.engine.getJQuery()));return o.push(s),l.hasProperty("payments.hasProductsSettingsEntry")&&l.setProperty("payments.hasProductsSettingsEntry",!0),{controlId:s,details:t.customName,quantityControlId:t.quantity||null,tax:parseFloat(t.taxValue),taxType:t.taxUnitType,discount:parseFloat(t.discountValue),discountType:t.discountUnitType}}))),this.engine.getLoader().getCommandDispatcher().reloadVisiblePanel(),a.forEach((function(e){if(-1===o.indexOf(e)){var t=n.engine.getDocument().getElementById(e);t&&t.hasProperty("payments.hasProductsSettingsEntry")&&t.setProperty("payments.hasProductsSettingsEntry",!1)}}))}}],[{key:"openFromExternalSource",value:function(){var t=new e,n=window.ed;t.open(n.getJQuery(),n.getEngine()).done((function(e){t.saveData(e)})).fail((function(e){console.warn(e.message)}))}}]),e}());u()(v,"DEFAULT_CURRENCY_ID",1),u()(v,"COMPATIBLE_QUANTITY_CONTROLS_WITHOUT_VALUE",[f.a.CONTROL_TYPE_TEXT,f.a.CONTROL_TYPE_NUMBER,f.a.CONTROL_TYPE_STAR_RATING,f.a.CONTROL_TYPE_PRICE,f.a.CONTROL_TYPE_FORMULA]),u()(v,"CONTROLS_WITH_MULTIPLE_PRICES",[f.a.CONTROL_TYPE_DROPDOWN,f.a.CONTROL_TYPE_CHECKBOX,f.a.CONTROL_TYPE_RADIO,f.a.CONTROL_TYPE_LIKERT_SCALE]),u()(v,"CONTROLS_WITH_VARIABLE_PRICE",[f.a.CONTROL_TYPE_FORMULA]),u()(v,"CURRENCY_DIALOG_TITLE","Form currency")},,function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e[e.NOTIFICATIONS=1]="NOTIFICATIONS",e[e.APPLICATIONS=3]="APPLICATIONS",e[e.PAYMENTS=4]="PAYMENTS",e[e.SECURITY=5]="SECURITY",e[e.RULES=6]="RULES",e[e.ADVANCED=8]="ADVANCED",e[e.CHAIN_APPROVALS=9]="CHAIN_APPROVALS",e[e.THANK_YOU_PAGE=10]="THANK_YOU_PAGE"}(i||(i={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=function(){function e(t,n){r()(this,e),l()(this,"buffer",void 0),l()(this,"result",void 0),l()(this,"plugins",void 0),this.buffer=t,this.plugins=n,this.result=""}return o()(e,[{key:"parse",value:function(){if("^"===this.buffer.substr(0,1))return this.escapeHTML(this.buffer.substr(1));var e=String(this.buffer||"").replace(/(^[ ]{1,}|[ ]{1,}$)/g," ").replace(/\r\n/g,"\n").replace(/\r/g,"\n");return this.parseLine(e,!1)}},{key:"readUntil",value:function(e,t,n){for(var i=n,r=e.length;i<r;i++)if(e[i]===t)return{result:e.substr(n,i-n),consume:i-n+1};return null}},{key:"readLink",value:function(e,t){var n,i={url:"",anchor:"",consume:0};return(n=this.readUntil(e,"]",t+1))?(i.anchor=n.result,t=t+1+n.consume,i.consume+=1+n.consume,"("!==e[t]?null:(t++,(n=this.readUntil(e,")",t))?(i.url=n.result,i.consume+=n.consume,i):null)):null}},{key:"escapeHTML",value:function(e){for(var t,n="",i=0,r=e.length;i<r;i++)switch(t=e[i]){case'"':n+="&quot;";break;case"<":n+="&lt;";break;case">":n+="&gt;";break;default:n+=t}return n}},{key:"parseLine",value:function(e,t){for(var n,i,r,a="",o=!this.plugins||(void 0===this.plugins.bold||this.plugins.bold),s=!this.plugins||(void 0===this.plugins.italic||this.plugins.italic),l=!this.plugins||(void 0===this.plugins.underline||this.plugins.underline),c=!this.plugins||(void 0===this.plugins.strike||this.plugins.strike),u=!this.plugins||(void 0===this.plugins.link||this.plugins.link),d=0,p=e.length;d<p;d++)switch(n=e.charAt(d)){case"*":o&&null!==(i=this.readUntil(e,"*",d+1))?(a+="<b>".concat(this.parseLine(i.result,!1),"</b>"),d+=i.consume):a+="*";break;case"_":s&&null!==(i=this.readUntil(e,"_",d+1))?(a+="<i>".concat(this.parseLine(i.result,!1),"</i>"),d+=i.consume):a+="_";break;case"+":l&&null!==(i=this.readUntil(e,"+",d+1))?(a+="<u>".concat(this.parseLine(i.result,!1),"</u>"),d+=i.consume):a+="+";break;case"-":c&&null!==(i=this.readUntil(e,"-",d+1))?(a+="<strike>".concat(this.parseLine(i.result,!1),"</strike>"),d+=i.consume):a+="-";break;case"[":u&&null!==(r=this.readLink(e,d))?(a+='<a href="'.concat(this.escapeHTML(r.url),'" target="_blank" rel="nofollow ugc">').concat(this.parseLine(r.anchor,!1),"</a>"),d+=r.consume):a+="[";break;case'"':a+="&quot;";break;case"<":a+="&lt;";break;case">":a+="&gt;";break;case"\n":a+="<br />";break;default:a+=n}return a+(t?"<br/>":"")}}],[{key:"parse",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new e(t,n).parse().replace(/%(ST|UN|PL|MI)%/g,(function(e){switch(e){case"%ST%":return"*";case"%UN%":return"_";case"%PL%":return"+";case"%MI%":return"-";default:return e}}))}},{key:"toPlainText",value:function(e){this.unescaper.innerHTML=this.parse(e);var t=this.unescaper.textContent;return this.unescaper.innerHTML="",t}}]),e}();l()(c,"unescaper",document.createElement("span"))},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var i=n(5),r=n.n(i),a=n(0),o=n.n(a),s=function e(){r()(this,e)};o()(s,"NOTIFICATIONS_PANEL_ID","notifications"),o()(s,"NOTIFICATIONS_EDITOR_EMPTY_ID","notifications-editor-empty");var l=function e(){r()(this,e)};o()(l,"COMPONENT_TYPE_SEND_TO","send-to"),o()(l,"COMPONENT_TYPE_WHEN","when"),o()(l,"COMPONENT_TYPE_FROM_NAME","from-name"),o()(l,"COMPONENT_TYPE_FROM_EMAIL","from-email"),o()(l,"COMPONENT_TYPE_REPLY_TO_EMAIL","reply-to-email"),o()(l,"COMPONENT_TYPE_SUBJECT","subject"),o()(l,"COMPONENT_TYPE_BODY","body"),o()(l,"COMPONENT_TYPE_ADD_ATTACHMENT","add-attachment"),o()(l,"COMPONENT_TYPE_PDF_NAME","pdf-name"),o()(l,"COMPONENT_TYPE_ADD_RULES_BUTTON","add-rule-button"),o()(l,"COMPONENT_TYPE_HIDE_EMPTY_FIELDS","hide-empty-fields")},,function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(17),u=n.n(c),d=n(7),p=n.n(d),h=n(8),_=n.n(h),g=n(4),m=n.n(g),f=n(0),E=n.n(f),y=n(1),T=n(65);function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _()(this,n)}}var O=function(e){p()(n,e);var t=v(n);function n(){var e;r()(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),E()(l()(e),"children",[]),e}return o()(n,[{key:"getDOMInsertionNode",value:function(){return this.rootNode}},{key:"hasChild",value:function(e){for(var t=0,n=this.children.length;t<n;t++)if(this.children[t]===e)return!0;return!1}},{key:"appendChild",value:function(e){if(!e)throw new Error("Attempted to append a invalid element!");var t=!1;if(null!==e.getParent()&&e.getParent().hasChild(e)){for(var n=0,i=this.children.length;n<i;n++)if(e===this.children[n]){this.children.splice(n,1),t=!0;break}t||e.getParent().removeChild(e)}return this.children.push(e),e.withParent(this),this.getDOMInsertionNode().appendChild(e.getRootNode()),!t&&this.isAttached()&&this.getForm().trigger("node-insertion",e),t||this.getRootNode().setAttribute("data-num-children",String(this.children.length)),e}},{key:"removeChild",value:function(e){for(var t,n=!1,i=0,r=this.children.length;i<r;i++)if(this.children[i]===e){this.children.splice(i,1),n=!0;break}if(!n)throw new Error("Attempted to remove a non-existent element!");return e.withParent(null),(t=e.getRootNode()).parentNode&&t.parentNode.removeChild(t),this.isAttached()&&this.getForm().trigger("node-removal",e),this.getRootNode().setAttribute("data-num-children",String(this.children.length)),e}},{key:"getChildren",value:function(){return this.children.slice(0)}},{key:"getLayoutDirection",value:function(){return y.L.TOP_TO_BOTTOM}},{key:"createRootNodeElement",value:function(){this.rootNode=document.createElement("div"),this.rootNode.setAttribute("data-role","container"),this.rootNode.setAttribute("data-type",this._static().nodeName),this.rootNode.setAttribute("data-hash",this.getHash()),this.rootNode.setAttribute("data-type-id",String(this.getTypeId())),this.updateLabelItalicState(),this.updateLabelBoldState(),this.updateLabelHiddenState()}},{key:"insertBefore",value:function(e,t){if(!t)throw new Error('Invalid argument "child": IFormElement expected!');if(e===t)throw new Error("Invalid argument: reference and child are the same!");for(var n=!1,i=0,r=this.children.length;i<r;i++)if(this.children[i]===t){this.children.splice(i,1),n=!0;break}for(var a=-1,o=0,s=this.children.length;o<s;o++)if(this.children[o]===e){a=o;break}if(-1===a)throw new Error("Insertion failed: reference child is not contained by it's parent");return this.children.splice(a,0,t),n||null===t.getParent()||t.getParent().removeChild(t),t.withParent(this),this.getDOMInsertionNode().insertBefore(t.getRootNode(),e.getRootNode()),!n&&this.isAttached()&&this.getForm().trigger("node-insertion",t),n||this.getRootNode().setAttribute("data-num-children",String(this.children.length)),t}},{key:"insertAfter",value:function(e,t){if(!t)throw new Error('Invalid argument "child": IFormElement expected!');if(e===t)throw new Error("Invalid argument: reference and child are the same!");for(var n=!1,i=0,r=this.children.length;i<r;i++)if(this.children[i]===t){this.children.splice(i,1),n=!0;break}for(var a=-1,o=0,s=this.children.length;o<s;o++)if(this.children[o]===e){a=o;break}if(-1===a)throw new Error("Insertion failed: reference child is not contained by it's parent");return this.children.splice(a+1,0,t),n||null===t.getParent()||t.getParent().removeChild(t),t.withParent(this),this.getDOMInsertionNode().insertBefore(t.getRootNode(),e.getRootNode().nextSibling),!n&&this.isAttached()&&this.getForm().trigger("node-insertion",t),n||this.getRootNode().setAttribute("data-num-children",String(this.children.length)),t}},{key:"getFirstChild",value:function(){return this.children[0]||null}},{key:"getLastChild",value:function(){return this.children[this.children.length-1]||null}},{key:"flatten",value:function(){for(var e=[this],t=0,n=this.children.length;t<n;t++)for(var i=0,r=this.children[t].flatten(),a=r.length;i<a;i++)e.push(r[i]);return e}},{key:"serialize",value:function(){var e=null;if(null!==this.children){e=[];for(var t=0,n=this.children.length;t<n;t++)for(var i=this.children[t].serialize(),r=0,a=i.length;r<a;r++)e.push(i[r])}return[this.getTypeId(),this.getId(),this.getHash(),this.properties||null,this.errors||null,e,this.getColspan(),this.getHeight()]}},{key:"getElementKind",value:function(){return y.p.CONTAINER}},{key:"removeAllChildren",value:function(){this.getDOMInsertionNode().innerHTML="",this.children.splice(0,this.children.length)}},{key:"withColspan",value:function(e){if(null===e||this.getTypeId()===T.a.CONTAINER_TYPE_PAGE||this.getTypeId()===T.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE||this.getTypeId()===T.a.CONTAINER_TYPE_ROW||this.getTypeId()===T.a.ELEMENT_TYPE_FORM)return u()(m()(n.prototype),"withColspan",this).call(this,e);for(var t,i=null,r=0,a=this.children.length;r<a;r++)t=this.children[r].getMinColspan(),(null===i||t>i)&&(i=t);if(i>e)return this;for(var o=0,s=this.children.length;o<s;o++)this.children[o].withColspan(e);return u()(m()(n.prototype),"withColspan",this).call(this,e)}},{key:"enumerateDisabledProperties",value:function(){return this.getParent()?this.getParent().enumerateDisabledProperties():null}}]),n}(n(74).a)},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return O}));var i,r=n(5),a=n.n(r),o=n(6),s=n.n(o),l=n(3),c=n.n(l),u=n(7),d=n.n(u),p=n(8),h=n.n(p),_=n(4),g=n.n(_),m=n(0),f=n.n(m),E=n(91),y=n(151),T=n(131);function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=g()(e);if(t){var r=g()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}!function(e){e.EDITED_FORM="Edited form",e.HIT_PAYWALL="Hit paywall",e.SHARE_LINK="Generated share link",e.REFRESH_ACCOUNT_STATUS="Refresh account status",e.CLOSE_PAYWALL="Close paywall"}(i||(i={}));var O=function(e){d()(n,e);var t=v(n);function n(){var e;return a()(this,n),e=t.call(this),f()(c()(e),"userDataService",void 0),f()(c()(e),"api",void 0),e.userDataService=T.a.getInstance(),e.api=new E.a(window.jQuery,""),e}return s()(n,[{key:"triggerEvent",value:function(e,t){var n={theToken:window.theToken,eventName:e};t&&(n.details=t),this.api.POST("/ajax-call.php?service=customerEvent",n).fail((function(){console.error("Failed to post on customerEvent")}))}},{key:"triggerInterestInFeatureEvent",value:function(e){var t="interested_in_".concat(e);this.triggerEvent(t)}},{key:"sendParametersToUserTrackingTools",value:function(){this.sendParametersToHotjar(),this.sendParametersToGetSiteControls()}},{key:"sendParametersToHotjar",value:function(){var e=this.getUserParameters(),t=parseInt(this.userDataService.getUserId());window.hj=window.hj||function(){(window.hj.q=window.hj.q||[]).push(arguments)},window.hj("identify",t,e)}},{key:"sendParametersToGetSiteControls",value:function(){var e=this.getUserParameters();window.gsc=window.gsc||function(){(window.gsc.q=window.gsc.q||[]).push(arguments)},window.gsc("params",e)}},{key:"getUserParameters",value:function(){var e="",t="";try{e=this.userDataService.getUserRegDate()?new Date("".concat(this.userDataService.getUserRegDate()," UTC-4")).toISOString():"",t=this.userDataService.getUserStartDate()?new Date("".concat(this.userDataService.getUserStartDate()," UTC")).toISOString():""}catch(n){}return{userId:parseInt(this.userDataService.getUserId()),userLimitedStatus:this.userDataService.getUserLimited(),userPlatform:this.userDataService.getUserPlatform(),userRegistrationDate:e,userPaidStartDate:t,userPlanName:this.userDataService.getUserPlanName(),submissionsLastMonth:this.userDataService.getSubmissionsLastMonth(),billingCycle:this.userDataService.getBillingCycle(),totalForms:this.userDataService.getTotalForms()}}}]),n}(y.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=function(){function e(){r()(this,e),l()(this,"values",void 0)}return o()(e,[{key:"getValues",value:function(){return this.values}},{key:"getTranslationForText",value:function(e){for(var t=this.getValues()||[],n=0,i=t.length;n<i;n++)if(t[n].text===e)return t[n].i18n||null;return null}}]),e}()},,function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(28),u=n(1),d=n(117),p=n(96),h=n(606),_=n(607),g=n(126),m=n(73),f=n(80),E=function(){function e(t){r()(this,e),l()(this,"engine",void 0),this.engine=t}return o()(e,null,[{key:"salvageHelperTwoDecimals",value:function(e){for(var t=String(e||"0").split("."),n=t[0]||"0",i=t[1]||"";i.length<2;)i="".concat(i,"0");return"".concat(n,".").concat(i)}},{key:"salvageHelperToPrice",value:function(e){var t=String(e||"0").split("."),n=t[0]||"0",i=t[1]||"";if(i.length>2)i=String(parseFloat("0.".concat(i)).toFixed(2)).slice(2);else for(;i.length<2;)i="".concat(i,"0");return"".concat(n,".").concat(i)}},{key:"salvageHelperToAbsPrice",value:function(e){var t=String(Math.abs(parseFloat(String(e||"0")))).split("."),n=t[0]||"0",i=t[1]||"";if(i.length>2)i=String(parseFloat("0.".concat(i)).toFixed(2)).slice(2);else for(;i.length<2;)i="".concat(i,"0");return"".concat(n,".").concat(i)}},{key:"salvageHelperGetValueSign",value:function(e){var t=parseFloat(String(e||"0"));return t<0?"-":t>0?"+":""}},{key:"addSalvageHelpers",value:function(){c.a.addHelper({name:"twoDecimals",func:e.salvageHelperTwoDecimals}),c.a.addHelper({name:"toPrice",func:e.salvageHelperToPrice}),c.a.addHelper({name:"toAbsPrice",func:e.salvageHelperToAbsPrice}),c.a.addHelper({name:"getValueSign",func:e.salvageHelperGetValueSign})}},{key:"createInstance",value:function(t){!e.instance&&t&&(e.instance=new e(t))}},{key:"getInstance",value:function(){return e.instance||e.createInstance(window.Engine),e.instance}}]),o()(e,[{key:"computeLastCalculationHTMLMarkup",value:function(t,n,i){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!n||!n.invoiceObject||!n.invoiceObject.items||!n.invoiceObject.items.length)return null;var o=this.engine.getDocument().getConfiguration().getProperty("hasAccessibilityEnabled",!1),s=this.engine.getLoader().getLoaderDependency(u.M.HAS_ENABLED_PAYMENT_PROCESSORS),l=!!i.showDiscountAndTax,g=!!i.showQuantityColumn,m=!!i.showIndexColumn,f=Object(d.a)(n.invoiceObject.items,["type",u.J.PRODUCT])||Object(d.a)(n.invoiceObject.items,["type",u.J.FIXED_AMOUNT]),E=0,y=0,T=[];Object(p.a)(n.invoiceObject.items,(function(t){var i=t.type===u.J.PRODUCT||t.type===u.J.FIXED_AMOUNT;i&&(y=t.number);var a=Object(h.a)(e.additionalItemTypes,t.type)>-1,o=t.type===u.J.INVOICE_COUPON,s=t.type===u.J.INVOICE_DISCOUNT||t.type===u.J.PRODUCT_DISCOUNT,c=t.type===u.J.INVOICE_FEE,d=i||(t.type===u.J.PRODUCT_DISCOUNT||t.type===u.J.PRODUCT_TAX)&&t.number===y,p=t.type===u.J.SUBTOTAL,_=t.type===u.J.INVOICE_TAX||t.type===u.J.PRODUCT_TAX,g=_||s||o,m=!(!(t.type!==u.J.INVOICE_DISCOUNT&&t.type!==u.J.INVOICE_TAX||l)||t.type===u.J.SUBTOTAL&&!f),v=(d?0:1e4)+t.number,O=/\[\[\[\[(.*)\]\]\]\]/.exec(t.description),b={options:{isAdditionalItem:a,isDiscount:s,isFee:c,isProduct:i,isProductRow:d,isRowWithValueSign:g,isSubtotal:p,isTax:_,isVisible:m},order:v,orderVisible:i?++E:0,price:t.totalPrice,primaryDescription:O?t.description.replace(O[0],""):t.description,quantity:t.quantity,secondaryDescription:s||_?"".concat(t.valueType===u.K.FIXED?n.currencyHTML:"").concat(t.value).concat(t.valueType===u.K.PERCENT?"%":""):"",total:t.quantity*t.totalPrice,type:t.type};T.push(b),O&&T.push(r.getFormulaItem(O,v))})),T=Object(_.a)(T,"order",(function(t){return e.orderIndexByType[t.type]}));var v={index:this.getColumnLabel(i.columns,u.ib.INDEX,"textdef_255"),description:this.getColumnLabel(i.columns,u.ib.DESCRIPTION,"textdef_147"),price:this.getColumnLabel(i.columns,u.ib.UNIT_PRICE,"textdef_148"),quantity:this.getColumnLabel(i.columns,u.ib.QUANTITY,"textdef_165"),total:this.getColumnLabel(i.columns,u.ib.TOTAL_PRICE,"textdef_256")},O={currency:n.currencyHTML,items:T,options:{hasAccessibilityEnabled:o,hasPaymentProcessors:s,hasProductItems:f,isEditFormView:a,showDiscountAndTax:l,showQuantityColumn:g,showIndexColumn:m},total:n.invoiceObject.total,columnsName:v},b=new c.a(t);return b.parse(O)}},{key:"getColumnLabel",value:function(e,t,n){var i=Object(g.a)(e,(function(e){return e.name===t}));return""!==i.label?i.label:this.engine.getLoader().getI18n().translateText(n)}},{key:"getFormulaItem",value:function(e,t){return{options:{isAdditionalItem:!0,isDiscount:!1,isFee:!1,isFormula:!0,isProduct:!1,isProductRow:!0,isRowWithValueSign:!1,isSubtotal:!1,isTax:!1,isVisible:!0},order:t,orderVisible:null,price:null,primaryDescription:e[1],quantity:null,secondaryDescription:null,total:null,type:u.J.PRODUCT_FORMULA}}},{key:"setupI18n",value:function(){var t=this.engine.getLoader(),n=this.engine.getLoader().getLoaderDependency(u.M.DETAILED_INVOICE_OPTIONS);if(n){var i=n.columns;this.engine.getLoader().getLoaderType()===u.B.VIEW&&t.getCurrentLanguage()===t.getDefaultLanguage()&&Object(p.a)(i,(function(t){if(t.label){var n=e.getPaymentSummaryColumn(t.name);if(!n||!n.length)return;Object(p.a)(n,(function(e){e.innerHTML=m.a.sanitizeHTML(f.a.parse(t.label))}))}}))}}}],[{key:"getPaymentSummaryColumn",value:function(e){var t=[],n=document.querySelectorAll(".detailed-invoice-container");if(n.length)return n.forEach((function(n){var i=n.querySelector(".invoice-wrapper > .detailed-invoice-container > .invoice-header");if(i){var r;switch(e){case u.ib.INDEX:r=i.querySelector(".invoice-index > span");break;case u.ib.DESCRIPTION:r=i.querySelector(".invoice-item > span");break;case u.ib.UNIT_PRICE:r=i.querySelector(".invoice-price > span");break;case u.ib.QUANTITY:r=i.querySelector(".invoice-quantity > span");break;case u.ib.TOTAL_PRICE:r=i.querySelector(".invoice-total > span")}r&&t.push(r)}})),t}}]),e}();l()(E,"instance",void 0),l()(E,"orderIndexByType",{PRODUCT:0,PRODUCT_FORMULA:1,PRODUCT_DISCOUNT:2,PRODUCT_TAX:3,FIXED_AMOUNT:0,SUBTOTAL:4,INVOICE_FEE:5,INVOICE_COUPON:6,INVOICE_DISCOUNT:7,INVOICE_TAX:8,UNKNOWN:9}),l()(E,"additionalItemTypes",[u.J.PRODUCT_DISCOUNT,u.J.PRODUCT_TAX,u.J.PRODUCT_FORMULA])},,function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.MONTHLY="monthly",e.YEARLY="yearly"}(i||(i={}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var i=n(20),r=n.n(i),a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(0),u=n.n(c),d=n(32);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(){function e(t,n){o()(this,e),u()(this,"jwt",null),u()(this,"jq",void 0),u()(this,"apiRootAddress",void 0),u()(this,"lastAPIErrors",null),this.jq=t,this.apiRootAddress=n}return l()(e,[{key:"logIn",value:function(){return null===(t=this).jwt?(t.jq.ajaxSetup({headers:{theToken:t.getCSRFToken()}}),t.jq.post("/ajax-my-forms.php",{do:"auth"}).then((function(e){t.jwt=e})).fail((function(){e.THROW_REQUEST_ERRORS_IN_CONSOLE&&t.throwError(new Error("Failed to authenticate in API"))}))):t.jq.Deferred((function(e){e.resolve(t.jwt)})).promise();var t}},{key:"checkJWTExpired",value:function(t){return n=this,t.then((function(){for(var t,i={},r=n.jwt.split("."),a=0,o=r.length;a<o;a++)try{if(t=JSON.parse(atob(r[a])))for(var s in t)t.hasOwnProperty(s)&&(i[s]=t[s])}catch(l){}return n.jq.Deferred((function(t){var r=!1;if(i.exp&&~~(+new Date/1e3)+60*(new Date).getTimezoneOffset()-i.exp>-21600&&(r=!0),r)return n.jq.post("/ajax-my-forms.php",{do:"auth-regen"}).then((function(e){n.jwt=e})).fail((function(){e.THROW_REQUEST_ERRORS_IN_CONSOLE&&n.throwError(new Error("Failed to check if JWT is expired!"))}));t.resolve(n.jwt)}))})).promise();var n}},{key:"decorateRequestArguments",value:function(e){return e.JWT=this.jwt,e}},{key:"decorateURLWithArguments",value:function(e){var t=Object(d.o)(e);return t.search?t.search+="&JWT=".concat(encodeURIComponent(this.jwt)):t.search="?JWT=".concat(encodeURIComponent(this.jwt)),Object(d.s)(t)}},{key:"GET",value:function(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=+new Date;return(n=this).jq.Deferred((function(o){n.checkJWTExpired(n.logIn()).then((function(){n.jq.ajax({url:n.apiRootAddress+t,data:n.decorateRequestArguments(i||{}),type:"GET",crossDomain:!0,headers:r}).then((function(e,i,r){var s=+new Date-a;n.notifyCFTrackerFromAjax(r,{method:"get",endpoint:t},"timing",s),o.resolve(e)})).fail((function(r){e.THROW_REQUEST_ERRORS_IN_CONSOLE&&n.throwError(new Error("Failed to GET: ".concat(t,", args: ").concat(JSON.stringify(i)))),n.notifyCFTrackerFromAjax(r,{method:"get",endpoint:t},"error");try{n.initializeLastErrorFromAPIResponse(r)}catch(a){o.reject(a)}o.reject(new Error("Failed to GET: ".concat(t)))}))})).fail((function(){o.reject(new Error("Failed to login with JWT!"))}))})).promise()}},{key:"mergeObjects",value:function(e,t){var n={};for(var i in t=t||{},e=e||{})e.hasOwnProperty(i)&&(n[i]=e[i]);for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}},{key:"DRAIN",value:function(t,n){return(i=this).jq.Deferred((function(a){var o=null,s=1,l={data:[],meta:{pagination:{current_page:0,count:0,per_page:e.FETCH_NUMBER_OF_ITEMS_PER_PAGE,total:0,total_pages:0}},status_code:200};function c(e,t){for(var n=0,i=e.data.length;n<i;n++)t.data.push(e.data[n])}function u(e){if(!e)throw new Error("Response is not a object!");if(void 0===e.data)throw new Error('Missing "data" property from API response!');if(!r()(e.data,Array))throw new Error('The "data" property of API response is not of type Array!');if(void 0===e.meta)throw new Error('Missing "meta" property from API response!');if(void 0===e.status_code)throw new Error('Missing "status_code" property from API response!');if(void 0===e.meta.pagination)throw new Error('Missing "meta.pagination" property from API response!')}!function r(){if(null===o)i.GET(t,i.mergeObjects(n,{per_page:e.FETCH_NUMBER_OF_ITEMS_PER_PAGE,page:s})).then((function(e){try{u(e),l.meta.pagination.total_pages=e.meta.pagination.total_pages,l.meta.pagination.current_page=e.meta.pagination.current_page,l.meta.pagination.count=e.meta.pagination.count,l.meta.pagination.per_page=e.meta.pagination.per_page,l.meta.pagination.total=e.meta.pagination.total,o=l.meta.pagination.total_pages,c(e,l),s++,r()}catch(t){a.reject(t)}})).fail((function(e){a.reject(e)}));else{if(s>o)return void a.resolve(l);i.GET(t,i.mergeObjects(n,{per_page:e.FETCH_NUMBER_OF_ITEMS_PER_PAGE,page:s})).then((function(e){try{u(e),c(e,l),l.meta.pagination.total_pages=e.meta.pagination.total_pages,o=l.meta.pagination.total_pages,s++,r()}catch(t){a.reject(t)}})).fail((function(e){a.reject(e)}))}}()})).promise();var i}},{key:"POST",value:function(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=+new Date;return(n=this).jq.Deferred((function(a){n.checkJWTExpired(n.logIn()).then((function(){n.jq.ajax({type:"POST",url:n.apiRootAddress+t,data:n.decorateRequestArguments(i||{}),crossDomain:!0}).then((function(e,i,o){var s=+new Date-r;n.notifyCFTrackerFromAjax(o,{method:"post",endpoint:t},"timing",s),a.resolve(e)})).fail((function(r){e.THROW_REQUEST_ERRORS_IN_CONSOLE&&n.throwError(new Error("Failed to POST: ".concat(t,", args: ").concat(JSON.stringify(i)))),n.notifyCFTrackerFromAjax(r,{method:"post",endpoint:t},"error");try{n.initializeLastErrorFromAPIResponse(r)}catch(o){a.reject(o)}a.reject(new Error("Failed to POST: ".concat(t)))}))})).fail((function(){a.reject(new Error("Failed to login with JWT!"))}))})).promise()}},{key:"PUT",value:function(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=+new Date;return(n=this).jq.Deferred((function(a){n.checkJWTExpired(n.logIn()).then((function(){n.jq.ajax({url:n.apiRootAddress+t,data:n.decorateRequestArguments(i||{}),type:"PUT",crossDomain:!0}).then((function(e,i,o){var s=+new Date-r;n.notifyCFTrackerFromAjax(o,{method:"put",endpoint:t},"timing",s),a.resolve(e)})).fail((function(r){e.THROW_REQUEST_ERRORS_IN_CONSOLE&&n.throwError(new Error("Failed to PUT: ".concat(t,", args: ").concat(JSON.stringify(i)))),n.notifyCFTrackerFromAjax(r,{method:"put",endpoint:t},"error");try{n.initializeLastErrorFromAPIResponse(r)}catch(o){a.reject(o)}a.reject(new Error("Failed to PUT: ".concat(t)))}))})).fail((function(){a.reject(new Error("Failed to login with JWT!"))}))})).promise()}},{key:"PUT_JSON",value:function(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=+new Date;return(n=this).jq.Deferred((function(a){n.checkJWTExpired(n.logIn()).then((function(){n.jq.ajax({url:n.decorateURLWithArguments(n.apiRootAddress+t),data:JSON.stringify(i),type:"PUT",crossDomain:!0,contentType:"application/json"}).then((function(e,i,o){var s=+new Date-r;n.notifyCFTrackerFromAjax(o,{method:"put",endpoint:t},"timing",s),a.resolve(e)})).fail((function(r){e.THROW_REQUEST_ERRORS_IN_CONSOLE&&n.throwError(new Error("Failed to PUT_JSON: ".concat(t,", args: ").concat(JSON.stringify(i)))),n.notifyCFTrackerFromAjax(r,{method:"put",endpoint:t},"error");try{n.initializeLastErrorFromAPIResponse(r)}catch(o){a.reject(o)}a.reject(new Error("Failed to PUT_JSON: ".concat(t)))}))})).fail((function(){a.reject(new Error("Failed to login with JWT!"))}))})).promise()}},{key:"POST_JSON",value:function(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=+new Date;return(n=this).jq.Deferred((function(a){n.checkJWTExpired(n.logIn()).then((function(){n.jq.ajax({url:n.decorateURLWithArguments(n.apiRootAddress+t),data:JSON.stringify(i),type:"POST",crossDomain:!0,contentType:"application/json"}).then((function(e,i,o){var s=+new Date-r;n.notifyCFTrackerFromAjax(o,{method:"put",endpoint:t},"timing",s),a.resolve(e)})).fail((function(r){e.THROW_REQUEST_ERRORS_IN_CONSOLE&&n.throwError(new Error("Failed to PUT_JSON: ".concat(t,", args: ").concat(JSON.stringify(i)))),n.notifyCFTrackerFromAjax(r,{method:"put",endpoint:t},"error");try{n.initializeLastErrorFromAPIResponse(r)}catch(o){a.reject(o)}a.reject(new Error("Failed to PUT_JSON: ".concat(t)))}))})).fail((function(){a.reject(new Error("Failed to login with JWT!"))}))})).promise()}},{key:"POST_CUSTOM",value:function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(a,o){var s=performance.now();n.checkJWTExpired(n.logIn()).then((function(){n.jq.ajax(h({url:n.decorateURLWithArguments(n.apiRootAddress+t),data:i,type:"POST",crossDomain:!0},r)).then((function(e,i,r){var o=performance.now()-s;n.notifyCFTrackerFromAjax(r,{method:"post_custom",endpoint:t},"timing",o),a(e)})).fail((function(r){if(e.THROW_REQUEST_ERRORS_IN_CONSOLE&&n.throwError(new Error("Failed to POST_CUSTOM: ".concat(t,", args: ").concat(JSON.stringify(i)))),n.notifyCFTrackerFromAjax(r,{method:"post_custom",endpoint:t},"error"),400===r.status)o(r.responseJSON);else{try{n.initializeLastErrorFromAPIResponse(r)}catch(a){o(new Error(a))}o(new Error("Failed to POST_CUSTOM: ".concat(t)))}}))})).fail((function(){o(new Error("Failed to login with JWT!"))}))}))}},{key:"DELETE",value:function(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=+new Date;return(n=this).jq.Deferred((function(a){n.checkJWTExpired(n.logIn()).then((function(){n.jq.ajax({url:n.apiRootAddress+t,data:n.decorateRequestArguments(i||{}),type:"DELETE",crossDomain:!0}).then((function(e,i,o){var s=+new Date-r;n.notifyCFTrackerFromAjax(o,{method:"delete",endpoint:t},"timing",s),a.resolve(e)})).fail((function(r){e.THROW_REQUEST_ERRORS_IN_CONSOLE&&n.throwError(new Error("Failed to DELETE: ".concat(t,", args: ").concat(JSON.stringify(i)))),n.notifyCFTrackerFromAjax(r,{method:"delete",endpoint:t},"error");try{n.initializeLastErrorFromAPIResponse(r)}catch(o){a.reject(o)}a.reject(new Error("Failed to DELETE: ".concat(t)))}))})).fail((function(){a.reject(new Error("Failed to login with JWT!"))}))})).promise()}},{key:"initializeLastErrorFromAPIResponse",value:function(e){try{var t=JSON.parse(e.responseText);t&&t.errorCodes?this.lastAPIErrors=t.errorCodes:this.lastAPIErrors=null}catch(n){throw new Error(n)}}},{key:"getLastAPIErrors",value:function(){var e=this.lastAPIErrors;return this.lastAPIErrors=null,e}},{key:"sendCFTrackerEvent",value:function(e,t){window.CFTracker&&window.CFTracker.event(e,t)}},{key:"sendCFTrackerTiming",value:function(e,t,n){window.CFTracker&&window.CFTracker.timing(e,t,n)}},{key:"notifyCFTrackerFromAjax",value:function(e,t,n,i){var r=e.status,a=t.method,o=this.getApiEndPointFromGivenPath(t.endpoint);switch(n){case"error":this.sendCFTrackerEvent("api_ajax_error",{method:a,endpoint:o,http_status:r});break;case"timing":this.sendCFTrackerTiming("api_ajax_duration",Math.ceil(i),{method:a,endpoint:o,http_status:r});break;default:throw new Error('Invalid argument trackerType: "error"|"timing" expected!')}}},{key:"getApiEndPointFromGivenPath",value:function(e){var t;return(t=/^((http(s)?\:\/\/)?[^\/]+\/(api\/v2\/)?|\/)?([^\/\?\#]+)/.exec(e))?String(t[5]||"unknown"):"unknown"}},{key:"getApiRootAddress",value:function(){return this.apiRootAddress}},{key:"setApiRootAddress",value:function(e){this.apiRootAddress=e}},{key:"throwError",value:function(e){if(r()(e,Error))setTimeout((function(){throw e}),0);else{var t=String(e||"").substr(0,2048);setTimeout((function(){throw new Error(t)}))}}},{key:"getCSRFToken",value:function(){return window.theToken||""}},{key:"GET_JSON",value:function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=+new Date;return new Promise((function(o,s){n.checkJWTExpired(n.logIn()).then((function(){n.jq.getJSON(h({url:"".concat(n.apiRootAddress).concat(t),data:n.decorateRequestArguments(i||{}),crossDomain:!0},r)).then((function(e,i,r){var s=+new Date-a;n.notifyCFTrackerFromAjax(r,{method:"get",endpoint:t},"timing",s),o(e)})).catch((function(r){e.THROW_REQUEST_ERRORS_IN_CONSOLE&&n.throwError(new Error("Failed to GET: ".concat(t,", args: ").concat(JSON.stringify(i)))),n.notifyCFTrackerFromAjax(r,{method:"get",endpoint:t},"error");try{n.initializeLastErrorFromAPIResponse(r)}catch(a){s(a)}s(r)}))})).catch((function(){s(new Error("Failed to login with JWT!"))}))}))}}]),e}();u()(_,"THROW_REQUEST_ERRORS_IN_CONSOLE",!1),u()(_,"FETCH_NUMBER_OF_ITEMS_PER_PAGE",100)},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return f}));var i,r=n(5),a=n.n(r),o=n(6),s=n.n(o),l=n(0),c=n.n(l),u=n(292),d=n(293),p=n(294),h=n(295),_=n(296),g=n(297),m=n(298);!function(e){e[e.DEGREES_OF_AGREEMENT=0]="DEGREES_OF_AGREEMENT",e[e.DEGREES_OF_IMPORTANCE=1]="DEGREES_OF_IMPORTANCE",e[e.DEGREES_OF_PROBABILITY=2]="DEGREES_OF_PROBABILITY",e[e.DEGREES_OF_SATISFACTION=3]="DEGREES_OF_SATISFACTION",e[e.DEGREES_OF_QUALITY=4]="DEGREES_OF_QUALITY",e[e.DAYS_OF_WEEK=5]="DAYS_OF_WEEK",e[e.MONTHS_OF_YEAR=6]="MONTHS_OF_YEAR"}(i||(i={}));var f=function(){function e(){a()(this,e),c()(this,"providers",[]),this.providers.push(new d.a),this.providers.push(new p.a),this.providers.push(new h.a),this.providers.push(new g.a),this.providers.push(new _.a),this.providers.push(new u.a),this.providers.push(new m.a)}return s()(e,[{key:"getDatasetByType",value:function(e){return this.providers[e]||null}}]),e}()},function(e,t,n){"use strict";var i=n(245),r=n(11),a=n.n(r),o=n(72),s=n.n(o),l=n(15),c=n.n(l),u=n(110),d=function(e){var t=e.tabId,n=e.tabPanelId,i=e.onClick,r=e.children,o=e.testid,s=Object(u.b)(),l=s.setActiveTab,c=s.activeTab,d=s.setIndicatorCoords,p=c===t;return a()("button",{type:"button",className:"tabs__tab",id:t,role:"tab","aria-selected":p,"aria-controls":n,onClick:function(e){e.preventDefault(),d({width:e.currentTarget.offsetWidth,left:e.currentTarget.offsetLeft}),l(t),i&&i()},"data-testid":o},void 0,r)},p=n(52),h=n.n(p),_=n(53),g=n.n(_),m=function(){var e=Object(u.b)(),t=e.indicatorCoords,n=e.activeTab,i=Object(l.useState)(!1),r=h()(i,2),o=r[0],s=r[1],c=g()("tabs__indicator","".concat(n),{"tabs__indicator--with-transition":o});return Object(l.useEffect)((function(){var e=setTimeout((function(){s(!0)}));return function(){s(!1),clearTimeout(e)}}),[]),a()("div",{className:c,"data-testid":"tabsTabIndicator",style:{width:"".concat(t.width,"px"),transform:"translateX(".concat(t.left,"px)")}})},f=a()(m,{}),E=function(e){var t=e.children,n=Object(u.b)(),i=n.generateTabId,r=n.generateTabPanelId,o=n.instanceCount;return a()("div",{className:"tabs__list",role:"tablist","aria-orientation":"horizontal"},void 0,c.a.Children.map(t,(function(e,t){var n=e.props.children,a=i(o,t),l=r(o,t);return c.a.createElement(d,s()({key:a,tabId:a,tabPanelId:l},e.props),n)})),f)},y=function(e){var t=e.tabId,n=e.tabPanelId,i=e.children,r=Object(u.b)().activeTab===t;return a()("div",{className:"tabs__panel",id:n,role:"tabpanel","aria-labelledby":t,hidden:!r},void 0,i)},T=function(e){var t=e.children,n=Object(u.b)(),i=n.generateTabId,r=n.generateTabPanelId,o=n.instanceCount;return a()("div",{className:"tabs__panels"},void 0,c.a.Children.map(t,(function(e,t){var n=e.props.children,s=i(o,t),l=r(o,t);return a()(y,{tabId:s,tabPanelId:l},l,n)})))};n.d(t,"e",(function(){return i.b})),n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return T})),n.d(t,"c",(function(){return y}))},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=function(){function e(t,n,i){r()(this,e),l()(this,"attrs",{text:"",value:""}),l()(this,"host",void 0),this.host=t,this.attrs.text=i,this.attrs.value=n}return o()(e,[{key:"setAttribute",value:function(e,t){this.attrs[e]=t}},{key:"getAttribute",value:function(e){return void 0===this.attrs[e]?null:this.attrs[e]}},{key:"removeAttribute",value:function(e){delete this.attrs[e]}},{key:"hasAttribute",value:function(e){return void 0!==this.attrs[e]}},{key:"convertToHTMLOptionElement",value:function(){var e=document.createElement("option");for(var t in e.text=this.attrs.text,e.value=this.attrs.value,this.attrs)"text"!==t&&"value"!==t&&this.attrs.hasOwnProperty(t)&&this.attrs.propertyIsEnumerable(t)&&e.setAttribute(t,this.attrs[t]);return e}},{key:"text",get:function(){return this.attrs.text},set:function(e){this.attrs.text=String(e||"")}},{key:"value",get:function(){return this.attrs.value},set:function(e){this.attrs.value=String(e||"")}}],[{key:"create",value:function(t,n,i){return new e(t,n,i)}},{key:"createFromHTMLOptionElement",value:function(t,n){for(var i=e.create(t,n.value,n.text),r=n.attributes,a=r.length,o=0;o<a;o++)i.setAttribute(r[o].name,r[o].value);return i}}]),e}()},function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.SET_ACTIVE_PAYWALL="setActivePaywall",e.CLOSE_PAYWALL="closePaywall",e.FETCH_PLAN_PRICES="fetchPlanPrices",e.FETCH_PLAN_PRICES_SUCCESS="fetchPlanPricesSuccess",e.FETCH_PLAN_PRICES_FAILURE="fetchPlanPricesFailure"}(i||(i={}))},function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e[e.PERCENTAGE=0]="PERCENTAGE",e[e.FIXED_VALUE=1]="FIXED_VALUE"}(i||(i={}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(1),u=n(270),d=n(271),p=n(272),h=n(273),_=n(274),g=n(275),m=n(276),f=n(277),E=n(278),y=n(279),T=n(280),v=n(281),O=n(282),b=function(){function e(){r()(this,e),l()(this,"CUSTOM_CONTROL_RENDERER",null),l()(this,"LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL",null),l()(this,"LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD",null),l()(this,"LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL",null),l()(this,"LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD",null),l()(this,"LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL",null),l()(this,"LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD",null),l()(this,"LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD",null),l()(this,"LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD",null),l()(this,"LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD",null),l()(this,"LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD",null),l()(this,"LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD",null),l()(this,"LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD",null),this.CUSTOM_CONTROL_RENDERER=new u.a,this.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL=new d.a,this.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD=new p.a,this.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL=new h.a,this.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD=new g.a,this.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL=new _.a,this.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD=new m.a,this.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD=new f.a,this.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD=new E.a,this.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD=new y.a,this.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD=new T.a,this.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD=new v.a,this.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD=new O.a}return o()(e,null,[{key:"getInstance",value:function(){return void 0===e.instance?e.instance=new e:e.instance}},{key:"getRendererByType",value:function(t){switch(t){case c.r.CUSTOM_CONTROL_RENDERER:return e.getInstance().CUSTOM_CONTROL_RENDERER;case c.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL:return e.getInstance().LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL;case c.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD:return e.getInstance().LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD;case c.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL:return e.getInstance().LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL;case c.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD:return e.getInstance().LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD;case c.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL:return e.getInstance().LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL;case c.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD:return e.getInstance().LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD;case c.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:return e.getInstance().LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD;case c.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:return e.getInstance().LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD;case c.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:return e.getInstance().LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD;case c.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:return e.getInstance().LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD;case c.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:return e.getInstance().LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD;case c.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:return e.getInstance().LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD;default:throw new Error("Renderers Factory: Unknown renderer type "+JSON.stringify(t))}}},{key:"getSuggestedRenderer",value:function(e,t,n){var i=e.hasProperty("label.isRemoved")&&e.getProperty("label.isRemoved")||e.hasProperty("label.isCompactField")&&e.getProperty("label.isCompactField");switch(t){case c.A.TOP_ALIGNED:switch(n){case c.z.BELOW_FIELD:return i?c.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:c.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD;case c.z.BELOW_LABEL:default:return i?c.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:c.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL}case c.A.RIGHT_ALIGNED:switch(n){case c.z.BELOW_FIELD:return i?c.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:c.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD;case c.z.BELOW_LABEL:default:return i?c.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:c.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL}case c.A.LEFT_ALIGNED:default:switch(n){case c.z.BELOW_FIELD:return i?c.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:c.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD;case c.z.BELOW_LABEL:default:return i?c.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:c.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL}}}}]),e}();l()(b,"instance",void 0)},,,function(e,t,n){"use strict";var i=n(96),r=n(391),a=[n(2).a.CONTAINER_TYPE_LIKERT_WRAPPER],o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=!!(n&&n.options&&n.options.hipaaField)&&n.options.hipaaField,s=n&&n.label&&n.label.labelText?n.label.labelText:"";return{id:t,type:e,properties:n,parent:r,hash:i,isHipaa:o,label:s,isSelected:a}},s=function(e){var t,n=e.getTypeId(),i=e.getId(),r=e.getComputedProperties(),a=e.getHash(),s=null===(t=e.getParent())||void 0===t?void 0:t.getHash();return o(n,i,r,a,s)},l=function(e){var t=[],n=e.getTypeId();return t.push(s(e)),a.includes(n)&&Object(i.a)(e.getChildren(),(function(e){t.push(s(e))})),t},c=function(e,t){return Object(r.a)(t.controls,["hash",e.getHash()])>-1},u=n(43),d=n.n(u),p=function(e){var t=e[6];return h(t)},h=function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=[],a=[],s=Math.ceil(t.length/n),l=0;l<s;l++){var c=l*n,u=o(t[c],t[c+1],t[c+3],t[c+2],i);r.push(u),a=t[c+5]?e(t[c+5],n,t[c+2]):[],r=[].concat(d()(r),d()(a))}return d()(r)},_=function(e){var t=e[4];return{name:t.name.value,options:t.options}},g=n(610),m=function(e,t){var n=[];return Object(i.a)(t,(function(e){n.push(e.getId())})),Object(g.a)(e,(function(e){return!n.includes(e.id)}))},f=n(18),E=n(609),y=function(e,t){var n,i=e.emails,r=void 0===i?[]:i;return t.type===f.l.EMAIL&&(n=r),Object(E.a)(n,(function(e){return e.id===t.id})),{emails:t.type===f.l.EMAIL?n:r}},T=n(52),v=n.n(T),O=n(112),b=n.n(O),C=n(126),I=function(e,t){var n=t.controlId,i=void 0===n?null:n,r=t.propertyName,a=void 0===r?null:r,o=t.propertyValue,s=void 0===o?null:o;b()(t,["controlId","propertyName","propertyValue"]);if(!i||!a)return e;var l=Object(C.a)(e,(function(e){return e.id===i}));switch(a){case"options.hipaaField":l.isHipaa=s,l.properties.options.hipaaField=s,P(e,l,a,s);break;case"label.labelText":l.label=s,l.properties.label.labelText=s}return e},R=function(e,t){for(var n=function(){var t=v()(r[i],2),n=t[0],a=t[1],o=Object(C.a)(e,(function(e){return e.hash===n}));o&&a.id&&(o.id=a.id)},i=0,r=Object.entries(t);i<r.length;i++)n();return e},P=function(e,t,n,r){if(a.includes(t.type)){var o=Object(g.a)(e,(function(e){return e.parent===t.hash}));Object(i.a)(o,(function(t){var i={controlId:t.id,propertyName:n,propertyValue:r};I(e,i)}))}},N=function(e,t){var n=Object(C.a)(e,(function(e){var n,i,r,a;return null===e.hash&&e.type===t.nodeTypeId&&(null===(n=e.properties)||void 0===n||null===(i=n.label)||void 0===i?void 0:i.labelText)===(null===(r=t.properties)||void 0===r||null===(a=r.label)||void 0===a?void 0:a.labelText)}));return n&&(n.hash=t.hash),e},A=function(e,t){var n,i=e.emails,r=void 0===i?[]:i;return t.type===f.l.EMAIL&&(n=r),Object(E.a)(n,(function(e){return e.id===t.id})),{emails:t.type===f.l.EMAIL?[].concat(d()(n),[t]):r}};n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return _})),n.d(t,"i",(function(){return I})),n.d(t,"d",(function(){return l})),n.d(t,"h",(function(){return R})),n.d(t,"g",(function(){return N})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return c})),n.d(t,"j",(function(){return A})),n.d(t,"f",(function(){return y}))},,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));var i=n(15),r=Object(i.createContext)(void 0),a=function(){var e=Object(i.useContext)(r);if(!e)throw new Error("Out of context: Tab components cannot be used outside the TabsContext");return e};t.a=r},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(0),m=n.n(g),f=n(77),E=n(1),y=n(301),T=n(34),v=n(71),O=n(47),b=n(2),C=n(49),I=n(83),R=n(154),P=n(173),N=n(13),A=n(28);n(486);function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var L=function(e){u()(n,e);var t=S(n);function n(e,i){var a;return r()(this,n),a=t.call(this,e,i),m()(l()(a),"index",void 0),m()(l()(a),"lastPage",void 0),m()(l()(a),"header",void 0),m()(l()(a),"footer",void 0),m()(l()(a),"body",void 0),m()(l()(a),"separator",void 0),m()(l()(a),"emptyPageContainer",void 0),m()(l()(a),"backLinkContainer",void 0),m()(l()(a),"actionBarButtonsVisibilityStates",[]),m()(l()(a),"featureService",void 0),m()(l()(a),"userService",void 0),m()(l()(a),"updateActionBarButtonsThrottled",void 0),a.featureService=v.a.getInstance(),a.userService=O.a.getInstance(),a.header=document.createElement("div"),a.header.setAttribute("data-role","page-header"),a.rootNode.appendChild(a.header),a.body=document.createElement("div"),a.body.setAttribute("data-role","page-body"),a.rootNode.appendChild(a.body),a.emptyPageContainer=document.createElement("div"),a.emptyPageContainer.setAttribute("data-role","empty-state-view"),a.rootNode.appendChild(a.emptyPageContainer),a.footer=document.createElement("div"),a.footer.setAttribute("data-role","page-footer"),a.rootNode.appendChild(a.footer),a.separator=document.createElement("div"),a.separator.setAttribute("data-role","page-break"),a.separator.innerHTML='<div data-role="merge-pages"><div data-role="page-separator-line"></div><button data-role="merge-pages-button" data-i18n-text="edt_text_merge_button">Merge pages</button><div data-role="page-separator-line"></div></div>',a.updateActionBarButtonsThrottled=T.a.create((function(){a.updateActionBarButtonsInImmediateMode()}),50),a}return o()(n,[{key:"getDOMInsertionNode",value:function(){return this.body}},{key:"getTypeId",value:function(){return b.a.CONTAINER_TYPE_PAGE}},{key:"getElementName",value:function(){return"Page"}},{key:"createRootNodeElement",value:function(){this.rootNode=document.createElement("div"),this.rootNode.setAttribute("data-role","page"),this.rootNode.setAttribute("data-type",this._static().nodeName),this.rootNode.setAttribute("data-hash",this.getHash()),this.rootNode.setAttribute("data-type-id",String(this.getTypeId()))}},{key:"onCreated",value:function(){var e;this.renderHeader(),this.renderFooter(),this.rootNode.appendChild(this.getForm().getEngine().getTheme().getGridContainerElement().cloneNode(!0)),e=this,setTimeout((function(){e.loadEmptyStateMarkup(),e.renderHeader(),e.renderFooter()}),10)}},{key:"getIndex",value:function(){return this.index}},{key:"withIndex",value:function(e){return this.index=~~e,this.rootNode.setAttribute("data-page-index",String(this.index)),this.separator.setAttribute("data-page-index",String(this.index)),0===e?this.rootNode.setAttribute("data-is-first-page","1"):this.rootNode.removeAttribute("data-is-first-page"),this}},{key:"isLastPage",value:function(){return Boolean(this.lastPage)}},{key:"withIsLastPage",value:function(e){return this.lastPage=Boolean(e),this.lastPage?(this.rootNode.setAttribute("data-is-last-page","yes"),this.separator.setAttribute("data-is-last-page","yes")):(this.rootNode.removeAttribute("data-is-last-page"),this.separator.removeAttribute("data-is-last-page")),this}},{key:"addRealtimeCalculationsToPageHeader",value:function(){var e=document.createElement("div");e.setAttribute("data-role","control"),e.setAttribute("data-type","realtime-calculations");var t="...";if(this.getLoaderType()===E.B.VIEW){e.setAttribute("data-is-empty","1"),e.setAttribute("data-page","viewer"),e.setAttribute("aria-labelledby","floating-payments-header-text floating-payments-header-calculation-total");var i=this.getForm().getLastCalculationServerResponse();this.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1)?e.tabIndex=0:e.removeAttribute("tabindex"),i&&(t=i.currencyHTML+String(i.invoiceObject.total))}else if(this.getLoaderType()===E.B.EDIT){e.setAttribute("data-page","editor");var r=this.getForm().getEngine().getLoader().getSelectedCurrencyId()||f.a.DEFAULT_CURRENCY_ID,a=this.getForm().getEngine().getCurrency().getCurrencySymbolById(r);t="".concat(a).concat(n.DUMMY_VALUE_FOR_RTS_RIBBON)}e.innerHTML='<span data-i18n-text="realtime_summary_total" id="floating-payments-header-text">\n                Total:\n            </span>\n            <span data-role="calculation-total" id="floating-payments-header-calculation-total">\n                '.concat(t,"\n            </span>"),this.getForm().getEngine().getI18n().translateDOMNode(e),this.header.appendChild(e)}},{key:"getLoaderType",value:function(){return this.getForm().getEngine().getLoader().getLoaderType()}},{key:"addPaymentsSummaryToPageFooter",value:function(){var e=this.getForm().getEngine().getLoader().getLoaderDependency(E.M.DETAILED_INVOICE_OPTIONS);if(e&&e.showPaymentsSummaryBelowForm){var t=document.createElement("div");t.setAttribute("data-type","payment-summary"),this.getForm().getEngine().getLoader().getLoaderDependency(E.M.SHOULD_SHOW_PAYMENT_SUMMARY)||t.setAttribute("data-is-empty","1"),t.innerHTML=this.getForm().getEngine().getLoader().getLoaderDependency(E.M.LAST_CALCULATION_HTML_MARKUP)||"",this.getForm().getEngine().getLoader().execCommand("add-payment-summary-listeners",t),this.footer.appendChild(t)}}},{key:"selectPaymentSummaryContainer",value:function(){this.getForm().getEngine().getJQuery()("[data-type=payment-summary]").children(":first").attr("data-is-selected",1)}},{key:"unselectPaymentSummaryContainer",value:function(){this.getForm().getEngine().getJQuery()("[data-type=payment-summary]").children(":first").removeAttr("data-is-selected")}},{key:"addLanguageSelectorToPageHeader",value:function(){if(this.getForm().getEngine().getLoader().getLoaderType()!==E.B.EDIT||0===this.getIndex()){var e=document.createElement("div");e.setAttribute("data-role","control"),e.setAttribute("data-type","language-selector"),this.header.appendChild(e),function(t,n,i,r,a,o){n.get("/modules/Typescript/Form/resources/language-selector.html").then((function(n){var a=t.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1),s=r?r.getLanguageCode():null,l={languages:[],hasAccessibilityEnabled:a},c=R.a.getLanguagesList();if(t.getForm().getEngine().getLoader().getLoaderType()===E.B.VIEW){for(var u=0,d=c.length;u<d;u++)(i.indexOf(c[u].code3)>-1||c[u].code2&&i.indexOf(c[u].code2)>-1)&&l.languages.push({code:c[u].code2||c[u].code3,name:c[u].name,nativeName:c[u].native_name,selected:s===c[u].code3||c[u].code2&&s===c[u].code2});l.languages.sort((function(e,t){if(~~e.selected!==~~t.selected)return~~t.selected-~~e.selected;var n=e.nativeName.toLowerCase(),i=t.nativeName.toLowerCase();return n===i?0:n<i?-1:1}))}else l.languages.push({code:"",name:"Default",nativeName:"Default",selected:!0}),e.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),setTimeout((function(){try{t.getForm().getEngine().getLoader().getEditorPanelGroup().setActivePanel("translations")}catch(e){}}),100)}),!0);var p=new A.a(n);e.innerHTML=p.parse(l),o(e).find("select").each((function(){P.a.upgradeDropdown(this).getRootNode().setAttribute("data-role","i123-input")})),r&&r.translateDOMNode(e)}))}(this,this.getForm().getEngine().getResourceManager(),this.getForm().getEngine().getLoader().getLoaderDependency(E.M.TRANSLATIONS_LANGUAGE_CODES),this.getForm().getEngine().getLoader().getLoaderDependency(E.M.I18N),this.getForm().getEngine().getGeolocation(),this.getForm().getEngine().getJQuery())}}},{key:"addPaginationToPageHeader",value:function(e){var t=window.document.createElement("div"),n={pagination:{isNone:!1,isSteps:!1,isPercentage:!1,isPageNumbers:!1},pages:[],numPages:0,moreThan5Pages:!1},i=this.getForm(),r=i.getNumberOfPages(),a=100/r,o=this.getPageTitlesVisibility();n.numPages=r,n.moreThan5Pages=r>5,n.isAccessibilityEnabled=this.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1);for(var s=0,l=r;s<l;s++)n.pages.push({index:s,paddedOrder:N.a.padString(String(s+1),"0",2,E.W.LEFT),order:String(s+1),isCurrent:s===this.index,title:String(i.getPageByIndex(s).getProperty("label.labelText")||"Untitled Page"),percent:String(Math.round((s+1)*a)),unitPercent:"".concat(a.toFixed(2),"%"),showTitle:o,numPages:r,isAccessibilityEnabled:n.isAccessibilityEnabled});switch(t.setAttribute("data-role","pagination"),e){case E.C.STEPS:n.pagination.isSteps=!0,t.setAttribute("data-type","steps");break;case E.C.PERCENTAGE:n.pagination.isPercentage=!0,t.setAttribute("data-type","percents");break;case E.C.PAGE_NUMBERS:n.pagination.isPageNumbers=!0,t.setAttribute("data-type","page-numbers");break;default:n.pagination.isNone=!0,t.setAttribute("data-type","none")}this.header.appendChild(t),function(e,i,r){e.get("/modules/Typescript/Form/resources/pagination.html").then((function(e){var i=new A.a(e);t.innerHTML=i.parse(n),y.a.init(r)})).fail((function(e){var n=window.document.createElement("span");n.setAttribute("data-role","error"),n.textContent=String(e||"Error occured fetching pagination"),t.appendChild(n)}))}(this.getForm().getEngine().getResourceManager(),this.getForm().getEngine().getLoader().getLoaderDependency(E.M.I18N),this.getForm().getEngine().getJQuery())}},{key:"renderHeader",value:function(){for(;this.header.firstChild;)this.header.removeChild(this.header.firstChild);var e=this.getForm().getEngine().getLoader(),t=this.getForm();if(this.isAttached()){var n=t.getNumberOfPages(),i=t.getProperty("options.paginationType");n>1&&i!==E.C.NONE&&this.getTypeId()!==b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE&&this.addPaginationToPageHeader(i),C.a.ALLOW_QUIZ_TIMER&&(null!==e.getLoaderDependency(E.M.INITIAL_QUIZ_TIMER)?(this.addQuizTimerContainerToPageHeader(),this.header.setAttribute("data-has-quiz-timer","")):this.header.removeAttribute("data-has-quiz-timer")),C.a.ALLOW_REAL_TIME_CALCULATIONS&&(e.getLoaderDependency(E.M.SHOW_REALTIME_CALCULATIONS)?(this.addRealtimeCalculationsToPageHeader(),this.header.setAttribute("data-has-realtime-calculations","")):this.header.removeAttribute("data-has-realtime-calculations")),C.a.ALLOW_I18N_DROPDOWN_SELECTOR&&(null!==e.getLoaderDependency(E.M.TRANSLATIONS_LANGUAGE_CODES)&&1<e.getLoaderDependency(E.M.TRANSLATIONS_LANGUAGE_CODES).length?(this.addLanguageSelectorToPageHeader(),this.header.setAttribute("data-has-language-selector","")):this.header.removeAttribute("data-has-language-selector")),this.header.appendChild(t.getHeader().getRootNode().cloneNode(!0))}}},{key:"addQuizTimerContainerToPageHeader",value:function(){var e=document.createElement("div");e.setAttribute("data-role","quiz-timer"),this.header.appendChild(e),this.getForm().getEngine().getResourceManager().get("/modules/Typescript/Form/resources/quiz-timer.html").then((function(t){e.innerHTML=t}))}},{key:"addPaymentProcessorsToPageFooter",value:function(){var e=this.getForm().getEngine().getLoader().getLoaderDependency(E.M.PAYMENT_PROCESSORS_LIST),t=this.getForm().getEngine().getLoader().getLoaderDependency(E.M.DETAILED_INVOICE_OPTIONS);if(t&&t.showPaymentsSummaryBelowForm&&null!==e){var n={processors:function(){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n].pictures.slice(1).length?e[n].pictures.slice(1):e[n].pictures.slice(0);t.push({typeId:e[n].typeId,name:e[n].name,brandLogo:e[n].pictures[0]||null,creditCardLogos:btoa(JSON.stringify(r)),isDefault:e[n].isDefault,frontendPluginTypeId:e[n].frontendPluginTypeId||null})}return t}(),hasAccessibilityEnabled:this.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1)},i=document.createElement("div");i.setAttribute("id","paymentProcessorsWrapper"),i.setAttribute("data-role","control"),i.setAttribute("data-type","payments-selector"),i.setAttribute("data-renderer-type","tln"),this.footer.appendChild(i),function(e,t,n,r){e.get("/modules/Typescript/Form/resources/payments-choose-processor.html").then((function(e){var a=new A.a(e);t.innerHTML=a.parse(n),r.getI18n().translateDOMNode(t),r.trigger("plugin-rendered","payments-selector",i),N.a.refreshFrameHeightOnWix()})).fail((function(e){t.textContent=String(e||"Error fetching /modules/Typescript/Form/resources/payments-choose-processor.html")}))}(this.getForm().getEngine().getResourceManager(),i,n,this.getForm().getEngine().getLoader())}}},{key:"addCaptchaControlToPageFooter",value:function(){var e,t;!0!==(t=(e=this).getForm().getEngine().getLoader()).getLoaderDependency(E.M.SKIP_CAPTCHA)&&E.vb.EDIT_SUBMISSION!==t.getLoaderDependency(E.M.VIEW_FORM_CONTEXT)&&e.footer.appendChild(e.getForm().getCaptcha().getParent().getRootNode())}},{key:"addActionBarControlToPageFooter",value:function(){var e,t;t=(e=this).getForm().getActionBar().getRootNode().cloneNode(!0),e.updateActionBarButtonsVisibilityStates(t),e.footer.appendChild(t),e.getForm().getEngine().getResourceManager().get("/modules/Typescript/Form/resources/action-bar.html").then((function(n){var i=e.getForm().getEngine().getLoader(),r=new A.a(n),a={isFirstPage:0===e.getIndex(),isLastPage:e.isLastPage(),index:e.getIndex(),hasNextPage:!e.isLastPage()&&e.getTypeId()!==b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE,hasPreviousPage:e.getIndex()>0&&e.getTypeId()!==b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE,nextPageIndex:e.getIndex()+1,previousPageIndex:e.getIndex()-1,isPaymentSummaryPage:e.getTypeId()===b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE,properties:e.getForm().getActionBar().getComputedProperties()};e.getForm().getEngine().getLoader().getLoaderType()===E.B.VIEW?e.getForm().getEngine().getLoader().isEnabledAutoSubmit()&&(a.properties.autosubmit=!0):!0===e.getForm().getEngine().getLoader().getFormSettings().autoSubmit&&(a.properties.autosubmit=!0),t.innerHTML=r.parse(a),e.isViewForm()&&(i.getI18n().translateDOMNode(t),i.appendAbuseDisclaimerToPageFooter())})).fail((function(e){t.textContent=String(e||"Error fetching /modules/Typescript/Form/resources/action-bar.html")}))}},{key:"addPaymentCouponCodeControlToPageFooter",value:function(){var e=this.getForm().getCouponCode();e&&this.footer.appendChild(e.getRootNode())}},{key:"renderFooter",value:function(){for(;this.footer.firstChild;)this.footer.removeChild(this.footer.firstChild);this.isAttached()&&(this.isLastPage()&&(C.a.ALLOW_COUPON_CODES_ON_LAST_PAGE_FOOTER&&this.addPaymentCouponCodeControlToPageFooter(),C.a.ALLOW_PAYMENTS_SELECTOR&&this.addPaymentProcessorsToPageFooter(),C.a.ALLOW_PAYMENTS_SUMMARY&&this.addPaymentsSummaryToPageFooter(),this.addCaptchaControlToPageFooter()),this.addActionBarControlToPageFooter())}},{key:"isRemovable",value:function(){return!1}},{key:"getParentPage",value:function(){return this}},{key:"getMaxColspan",value:function(){return 20}},{key:"getColspan",value:function(){return 20}},{key:"split",value:function(e,t){if(t!==E.o.TOP&&t!==E.o.BOTTOM)throw new Error("Invalid argument: referenceRowEdge: EElementEdge.TOP || EElementEdge.BOTTOM expected!");for(var n=null,i=0,r=this.children.length;i<r;i++)this.children[i]===e&&(n=i);if(null===n)throw new Error("Invalid reference row!");t===E.o.BOTTOM&&n++;var a=this.getForm().getEngine().createElement(b.a.CONTAINER_TYPE_PAGE);for(this.getParent().insertAfter(this,a);this.children.length-1>=n;)a.appendChild(this.children[n])}},{key:"mergeWith",value:function(e){for(var t=e.getChildren().slice(0),n=0,i=t.length;n<i;n++)this.appendChild(t[n]);e.getParent().removeChild(e)}},{key:"getPageSeparatorDOMNode",value:function(){return this.separator}},{key:"isDragable",value:function(){return!1}},{key:"isDuplicatable",value:function(){return!1}},{key:"getHeaderContainerDOMNode",value:function(){return this.header}},{key:"getPaginationType",value:function(){return this.getForm().getProperty("options.paginationType")}},{key:"setPaginationType",value:function(e){switch(e){case E.C.NONE:case E.C.PAGE_NUMBERS:case E.C.PERCENTAGE:case E.C.STEPS:console.warn("set pagination type: ",e),this.getForm().setProperty("options.paginationType",e);break;default:this.getForm().setProperty("options.paginationType",E.C.NONE)}}},{key:"getPageTitlesVisibility",value:function(){return this.getForm().getProperty("options.showPageTitles")}},{key:"setPageTitlesVisibility",value:function(e){this.getForm().setProperty("options.showPageTitles",!!e)}},{key:"loadEmptyStateMarkup",value:function(){var e=this;this.getForm().getEngine().getResourceManager().get("/modules/Typescript/Form/resources/empty-state-page.html").then((function(t){e.emptyPageContainer.innerHTML=t,e.getForm().getEngine().getI18n().translateDOMNode(e.emptyPageContainer)}))}},{key:"setActionBarButtonVisibility",value:function(e,t){if(null!==e){for(var n=0,i=this.actionBarButtonsVisibilityStates.length;n<i;n++)if(this.actionBarButtonsVisibilityStates[n].button===e)return null===t?this.actionBarButtonsVisibilityStates.splice(n,1):this.actionBarButtonsVisibilityStates[n].visible=t,void this.updateActionBarButtonsThrottled();null!==t&&this.actionBarButtonsVisibilityStates.push({button:e,visible:t}),this.updateActionBarButtonsThrottled()}}},{key:"getActionBarButtonVisibility",value:function(e){for(var t=0,n=this.actionBarButtonsVisibilityStates.length;t<n;t++)if(this.actionBarButtonsVisibilityStates[t].button===e)return this.actionBarButtonsVisibilityStates[t].visible;return null}},{key:"updateActionBarButtonsVisibilityStates",value:function(e){if(e){for(var t,i,r=Array.prototype.slice.call(e.attributes,0),a=r.length,o=0;o<a;o++)n.isActionBarDOMAttributeName(r[o].name)&&(t=n.getActionBarButtonFromDOMAttributeName(r[o].name),e.setAttribute(r[o].name,this.getActionBarButtonVisibility(t)?"1":"0"));for(var s=0,l=this.actionBarButtonsVisibilityStates.length;s<l;s++)i=n.getActionBarDOMAttributeNameFromButtonType(this.actionBarButtonsVisibilityStates[s].button),e.hasAttribute(i)||e.setAttribute(i,this.actionBarButtonsVisibilityStates[s].visible?"1":"0")}}},{key:"updateActionBarButtonsInImmediateMode",value:function(){this.updateActionBarButtonsVisibilityStates(this.footer.querySelector("div[data-role=control][data-type=form-action-bar]"))}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"";return t&&e.push({key:"page_".concat(this.getIndex(),"_label"),sourceText:t}),e}}],[{key:"getConfiguration",value:function(){return{category:"containers",icon:"i123-date",isContainer:!0,keywords:"page",name:"Page",typeId:b.a.CONTAINER_TYPE_PAGE,isVirtual:!0,index:99999,accessibilityFields:E.v.NONE}}},{key:"isActionBarDOMAttributeName",value:function(e){return n.ACTIONBAR_DOM_NODE_ATTRIBUTE_NAMES.indexOf(e)>-1}},{key:"getActionBarButtonFromDOMAttributeName",value:function(e){switch(e){case"data-button-submit":return E.a.SUBMIT;case"data-button-calculate":return E.a.CALCULATE;case"data-button-show-summary":return E.a.SHOW_SUMMARY;case"data-button-next-page":return E.a.NEXT_PAGE;case"data-button-previous-page":return E.a.PREVIOUS_PAGE;case"data-button-approve":return E.a.APPROVE;case"data-button-preview":return E.a.PREVIEW;case"data-button-print":return E.a.PRINT;case"data-button-reset":return E.a.RESET;case"data-button-save-for-later":return E.a.SAVE_FOR_LATER;default:return null}}},{key:"getActionBarDOMAttributeNameFromButtonType",value:function(e){switch(e){case E.a.SUBMIT:return"data-button-submit";case E.a.CALCULATE:return"data-button-calculate";case E.a.SHOW_SUMMARY:return"data-button-show-summary";case E.a.NEXT_PAGE:return"data-button-next-page";case E.a.PREVIOUS_PAGE:return"data-button-previous-page";case E.a.APPROVE:return"data-button-approve";case E.a.PREVIEW:return"data-button-preview";case E.a.PRINT:return"data-button-print";case E.a.RESET:return"data-button-reset";case E.a.SAVE_FOR_LATER:return"data-button-save-for-later";default:return null}}}]),n}(I.a);m()(L,"ACTIONBAR_DOM_NODE_ATTRIBUTE_NAMES",["data-button-submit","data-button-calculate","data-button-show-summary","data-button-next-page","data-button-previous-page","data-button-approve","data-button-preview","data-button-print","data-button-reset","data-button-save-for-later"]),m()(L,"nodeName","page"),m()(L,"attributes",{}),m()(L,"runtime",null),m()(L,"DUMMY_VALUE_FOR_RTS_RIBBON","99")},,function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return o})),function(e){e.TRACK="track",e.TRACK_INTERESTED_IN_FEATURE="trackInterestedInFeature",e.TRACK_CUSTOMER_EVENT="trackCustomerEvent"}(i||(i={}));var r=function(e,t,n){return{type:i.TRACK,payload:{name:e,value:t,tags:n}}},a=function(e){return{type:i.TRACK_INTERESTED_IN_FEATURE,payload:{featureName:e}}},o=function(e,t){return{type:i.TRACK_CUSTOMER_EVENT,payload:{customerEventName:e,details:t}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return R}));var i,r=n(43),a=n.n(r),o=n(5),s=n.n(o),l=n(3),c=n.n(l),u=n(6),d=n.n(u),p=n(7),h=n.n(p),_=n(8),g=n.n(_),m=n(4),f=n.n(m),E=n(0),y=n.n(E),T=n(35),v=n(2),O=n(48),b=n(1),C=n(29);function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return g()(this,n)}}!function(e){e.LANGUAGE="language",e.COUPON_CODE="couponCode",e.QUIZ_SCORE="quizScore"}(i||(i={}));var R=function(e){h()(n,e);var t=I(n);function n(e,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s()(this,n),r=t.call(this),y()(c()(r),"cloneDivRuleContainer",void 0),y()(c()(r),"rootNode",void 0),y()(c()(r),"ruleConditionConfigurations",void 0),y()(c()(r),"ruleStatementConfigurations",void 0),y()(c()(r),"i18n",void 0),y()(c()(r),"divRuleContent",void 0),y()(c()(r),"divRuleCondition",void 0),y()(c()(r),"divRuleStatement",void 0),y()(c()(r),"ruleConditionList",void 0),y()(c()(r),"nrOfConditions",void 0),y()(c()(r),"ruleStatementList",void 0),y()(c()(r),"nrOfStatements",void 0),y()(c()(r),"rulePosition",void 0),y()(c()(r),"isRuleSelected",void 0),y()(c()(r),"ruleDuplicateBtn",void 0),y()(c()(r),"ruleDeleteBtn",void 0),y()(c()(r),"canTrackMetrics",!0),y()(c()(r),"onRuleConditionVariableChanged",void 0),y()(c()(r),"onRuleSelected",void 0),y()(c()(r),"onRuleDeselected",void 0),y()(c()(r),"onDeselectAllRules",void 0),y()(c()(r),"onRuleDuplicated",void 0),y()(c()(r),"onRuleDeleted",void 0),y()(c()(r),"onStatementChanged",void 0),y()(c()(r),"onSendToFocus",void 0),y()(c()(r),"onSendToVariableOpen",void 0),y()(c()(r),"onSendToVariableInsert",void 0),r.cloneDivRuleContainer=e,r.rootNode=r.cloneDivRuleContainer.cloneNode(!0),r.rulePosition=i,o.ruleConditionConfigurations&&o.ruleConditionConfigurations.length>0?r.ruleConditionConfigurations=a()(o.ruleConditionConfigurations):r.ruleConditionConfigurations=[],o.ruleStatementConfigurations&&o.ruleStatementConfigurations.length>0?r.ruleStatementConfigurations=a()(o.ruleStatementConfigurations):r.ruleStatementConfigurations=[],r}return d()(n,[{key:"getRootNode",value:function(){return this.rootNode}},{key:"getRuleConditionList",value:function(){return this.ruleConditionList}},{key:"getRuleStatementList",value:function(){return this.ruleStatementList}},{key:"getCanTrackMetrics",value:function(){return this.canTrackMetrics}},{key:"getNrOfConditions",get:function(){return this.nrOfConditions}},{key:"getRulePosition",get:function(){return this.rulePosition}},{key:"getIsRuleSelected",get:function(){return this.isRuleSelected}}]),d()(n,[{key:"withI18n",value:function(e){return this.i18n=e,this}},{key:"initialize",value:function(){this.initVars(),this.initRuleComponent(),this.initEventListeners()}},{key:"initVars",value:function(){this.isRuleSelected=!1,this.ruleConditionList=[],this.nrOfConditions=0,this.ruleStatementList=[],this.nrOfStatements=0,this.divRuleContent=this.getRootNode().querySelector(n.QUERY_SELECTOR_RULE_CONTENT),this.ruleDuplicateBtn=this.getRootNode().querySelector(n.QUERY_SELECTOR_RULE_DUPLICATE),this.ruleDeleteBtn=this.getRootNode().querySelector(n.QUERY_SELECTOR_RULE_DELETE),this.divRuleCondition=this.divRuleContent.querySelector(n.QUERY_SELECTOR_RULE_CONDITION),this.divRuleStatement=this.divRuleContent.querySelector(n.QUERY_SELECTOR_RULE_STATEMENT),this.divRuleContent.removeChild(this.divRuleCondition),this.divRuleContent.removeChild(this.divRuleStatement)}},{key:"initRuleComponent",value:function(){var e=this;if(this.getRootNode().querySelector(n.QUERY_SELECTOR_RULE_POSITION).textContent="#".concat(this.rulePosition.toString()),this.getRootNode().setAttribute("data-rule-position",this.rulePosition.toString()),this.initCustomRuleComponent(),0===this.ruleConditionConfigurations.length){var t={variables:this.getRuleConditionConfigVariables(!0)};this.rulePosition>1&&(t.selectedVariable=t.variables[1].value),this.ruleConditionConfigurations.push(t)}this.ruleConditionConfigurations.forEach((function(t,n){t.variables||(t.variables=e.getRuleConditionConfigVariables(!0),e.rulePosition>1&&(t.selectedVariable=t.variables[1].value)),e.nrOfConditions++;var i=new O.d(e.nrOfConditions,e.onConditionVariableChanged.bind(e),t).withI18n(e.i18n);e.ruleConditionList.push(i),i.onConditionAdded=e.onConditionAdded.bind(e),i.onConditionRemoved=e.onConditionRemoved.bind(e),i.onStatementAdded=e.onStatementAdded.bind(e),i.onStatementRemoved=e.onStatementRemoved.bind(e),i.onVariableBeforeChange=e.onVariableBeforeChange.bind(e),i.initialize(),e.onConditionVariableChanged(!0);var r=e.divRuleCondition.cloneNode(!0);r.appendChild(i.getRootNode()),e.divRuleContent.appendChild(r),i.on("count-email-rules-not-supported",(function(){e.trigger("count-email-rules-not-supported")})),i.updateOptionVisibility(b.fb.NONE),e.ruleStatementConfigurations[n]&&i.addStatement(e.ruleStatementConfigurations[n])})),this.updateRuleConditionOptions(),1===this.getRuleConditionList()[0].getVariables().length&&this.getRuleConditionList()[0].getVariable().skipConditions&&(this.ruleDuplicateBtn.style.pointerEvents="none",this.ruleDuplicateBtn.style.color="rgba(170, 170, 170, 0.5)")}},{key:"initCustomRuleComponent",value:function(){}},{key:"initEventListeners",value:function(){var e=this;T.a.isMobile()?(this.ruleDuplicateBtn.ontouchend=this.ruleDuplicateBtn.ontouchcancel=function(){setTimeout((function(){e.ruleDuplicateBtn.classList.remove("ruleHasHover")}),300)},this.ruleDuplicateBtn.ontouchstart=function(){e.ruleDuplicateBtn.classList.add("ruleHasHover")}):(this.getRootNode().onmouseenter=function(){e.divRuleContent.setAttribute("data-role-hover","rule-content"),[e.ruleDuplicateBtn,e.ruleDeleteBtn].forEach((function(e){e.style.display="block"}))},this.getRootNode().onmouseleave=function(){e.divRuleContent.removeAttribute("data-role-hover"),[e.ruleDuplicateBtn,e.ruleDeleteBtn].forEach((function(e){e.style.display="none"}))}),this.ruleDuplicateBtn.onclick=function(t){t.stopPropagation(),e.onDuplicateBtnClick()},this.ruleDeleteBtn.onclick=function(t){t.stopPropagation(),e.deleteRule()}}},{key:"onDuplicateBtnClick",value:function(){this.duplicateRule()}},{key:"getRuleConditionConfigVariables",value:function(e){return[{value:"test",text:"Test",type:O.c.DEFAULT}]}},{key:"getRuleContainerInstance",value:function(e,t){return new n(this.cloneDivRuleContainer,this.rulePosition,{ruleConditionConfigurations:e,ruleStatementConfigurations:t}).withI18n(this.i18n)}},{key:"onConditionVariableChanged",value:function(e){this.onRuleConditionVariableChanged&&this.onRuleConditionVariableChanged(!e,this.getRulePosition),this.updateRuleConditionOptions()}},{key:"onConditionAdded",value:function(e){this.nrOfConditions++;var t=this.divRuleCondition.cloneNode(!0);t.appendChild(e.getRootNode()),e.getConditionPosition===this.nrOfConditions?(this.divRuleContent.appendChild(t),this.ruleConditionList.push(e)):(this.divRuleContent.insertBefore(t,this.ruleStatementList[e.getConditionPosition-1].getRootNode().parentElement),this.ruleConditionList.splice(e.getConditionPosition-1,0,e)),this.updateConditionsPosition(),2===this.nrOfConditions&&this.ruleConditionList[0].getVariables()[0].skipConditions&&this.resetFirstCondition(),this.updateRuleConditionOptions()}},{key:"onConditionRemoved",value:function(e){this.nrOfConditions--,this.divRuleContent.removeChild(e.getRootNode().parentElement),this.ruleConditionList.splice(e.getConditionPosition-1,1),this.updateConditionsPosition(),1===this.nrOfConditions&&this.resetFirstCondition(!0),this.updateRuleConditionOptions()}},{key:"onStatementAdded",value:function(e){this.nrOfStatements++;var t=this.divRuleStatement.cloneNode(!0);t.appendChild(e.getRootNode()),e.getStatementPosition===this.nrOfStatements?(this.divRuleContent.appendChild(t),this.ruleStatementList.push(e)):(this.divRuleContent.insertBefore(t,this.ruleStatementList[e.getStatementPosition-1].getRootNode().parentElement),this.ruleStatementList.splice(e.getStatementPosition-1,0,e)),this.updateStatementsPosition(),this.onStatementChanged&&this.onStatementChanged()}},{key:"onStatementRemoved",value:function(e){this.nrOfStatements--,this.divRuleContent.removeChild(this.ruleStatementList[e].getRootNode().parentElement),this.ruleStatementList.splice(e,1),this.updateStatementsPosition(),this.onStatementChanged&&this.onStatementChanged()}},{key:"updateRuleConditionOptions",value:function(){if(this.ruleConditionList[0].getVariable().skipConditions)this.ruleConditionList[0].setCanAddCondition=!1,this.ruleConditionList[0].setCanRemoveCondition=!1;else for(var e=0;e<this.nrOfConditions;e++)this.nrOfConditions<2?(this.ruleConditionList[e].setCanAddCondition=!0,this.ruleConditionList[e].setCanRemoveCondition=!1):this.nrOfConditions<O.d.MAX_NR_OF_CONDITIONS?(this.ruleConditionList[e].setCanAddCondition=!0,this.ruleConditionList[e].setCanRemoveCondition=!0):(this.ruleConditionList[e].setCanAddCondition=!1,this.ruleConditionList[e].setCanRemoveCondition=!0),T.a.isMobile()&&this.ruleConditionList[e].autoUpdateOptionVisibility();T.a.isMobile()||(this.nrOfConditions<O.d.MAX_NR_OF_CONDITIONS?this.ruleConditionList[this.nrOfConditions-1].autoUpdateOptionVisibility():this.ruleConditionList[this.nrOfConditions-1].updateOptionVisibility(b.fb.NONE))}},{key:"updateConditionsPosition",value:function(){for(var e=0;e<this.nrOfConditions;e++)this.ruleConditionList[e].updateConditionPosition(e+1)}},{key:"updateStatementsPosition",value:function(){for(var e=0;e<this.nrOfStatements;e++)this.ruleStatementList[e].updateStatementPosition(e+1)}},{key:"getRuleConditionAt",value:function(e){return this.ruleConditionList[e]}},{key:"updateRuleConditionVariables",value:function(e){this.ruleConditionList[0].updateVariables(this.getRuleConditionConfigVariables(e))}},{key:"updateRulePosition",value:function(e){this.rulePosition=e,this.getRootNode().querySelector(n.QUERY_SELECTOR_RULE_POSITION).textContent="#".concat(this.rulePosition.toString()),this.getRootNode().setAttribute("data-rule-position",this.rulePosition.toString())}},{key:"selectRule",value:function(){this.isRuleSelected||(this.divRuleContent.classList.add("ruleContentSelected"),this.isRuleSelected=!0,this.onRuleSelected&&this.onRuleSelected(this))}},{key:"deselectRule",value:function(){this.isRuleSelected&&(this.divRuleContent.classList.remove("ruleContentSelected"),this.isRuleSelected=!1,this.onRuleDeselected&&this.onRuleDeselected(this))}},{key:"duplicateRule",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.canTrackMetrics=e;var t=[];this.ruleConditionList.forEach((function(e){var n=e.getVariable().skipConditions?e.getVariables()[1].value:e.getSelectedVariable(),i=e.getVariable().skipConditions?null:e.getSelectedOperator(),r=e.getVariable().skipConditions?null:e.getSelectedValue();t.push({variables:e.getVariables(),selectedVariable:n,selectedOperator:i,selectedValue:r})}));var n=[];this.ruleStatementList.forEach((function(e){n.push({selectedStatement:e.getSelectedStatement()})}));var i=this.getRuleContainerInstance(t,n);i.initialize(),i.onRuleConditionVariableChanged=this.onRuleConditionVariableChanged,i.onRuleSelected=this.onRuleSelected,i.onRuleDeselected=this.onRuleDeselected,i.onDeselectAllRules=this.onDeselectAllRules,i.onRuleDuplicated=this.onRuleDuplicated,i.onRuleDeleted=this.onRuleDeleted,i.onStatementChanged=this.onStatementChanged,this.deselectRule(),this.onRuleDuplicated&&this.onRuleDuplicated(i),this.onConditionVariableChanged(!0)}},{key:"deleteRule",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.canTrackMetrics=e,this.deselectRule(),this.onRuleDeleted&&this.onRuleDeleted(this),this.onConditionVariableChanged(!1)}},{key:"onVariableBeforeChange",value:function(){return!0}},{key:"resetFirstCondition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.ruleConditionList[0].getSelectedVariable();this.updateRuleConditionVariables(e),this.ruleConditionList[0].setSelectedVariable(t)}}]),n}(C.a);y()(R,"RULE_ALLOWED_CONTROL_TYPES",[v.a.CONTROL_TYPE_TEXT,v.a.CONTROL_TYPE_TEXTAREA,v.a.CONTROL_TYPE_DROPDOWN,v.a.CONTROL_TYPE_RADIO,v.a.CONTROL_TYPE_CHECKBOX,v.a.CONTROL_TYPE_NUMBER,v.a.CONTROL_TYPE_FORMULA,v.a.CONTROL_TYPE_EMAIL,v.a.CONTROL_TYPE_LIKERT_SCALE,v.a.CONTROL_TYPE_NAME,v.a.CONTROL_TYPE_ADDRESS,v.a.CONTROL_TYPE_PHONE,v.a.CONTROL_TYPE_DATE,v.a.CONTROL_TYPE_TIME,v.a.CONTROL_TYPE_PRICE,v.a.CONTROL_TYPE_WEBSITE,v.a.CONTROL_TYPE_PASSWORD,v.a.CONTROL_TYPE_STAR_RATING,v.a.CONTROL_TYPE_TERMS_OF_SERVICE,v.a.CONTROL_TYPE_COUPON]),y()(R,"RULE_EXTRA_VARIABLES",[i.LANGUAGE,i.COUPON_CODE,i.QUIZ_SCORE]),y()(R,"RULE_ALLOWED_EXTRA",[b.ub.LANGUAGE,b.ub.PAYMENT_COUPON,b.ub.QUIZ_SCORE]),y()(R,"QUERY_SELECTOR_RULE_CONTENT",'div[data-role="rule-content"]'),y()(R,"QUERY_SELECTOR_RULE_POSITION",'div[data-role="rule-position"]'),y()(R,"QUERY_SELECTOR_RULE_DUPLICATE",'div[data-role="rule-duplicate"]'),y()(R,"QUERY_SELECTOR_RULE_DELETE",'div[data-role="rule-delete"]'),y()(R,"QUERY_SELECTOR_RULE_CONDITION",'div[data-role="placeholder"][data-control-name="rule-condition"]'),y()(R,"QUERY_SELECTOR_RULE_STATEMENT",'div[data-role="placeholder"][data-control-name="rule-statement"]')},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(9),l=function(){function e(){r()(this,e)}return o()(e,[{key:"setCookie",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s.d.COOKIE_SAME_SITE_LAX,o=new Date,l=60*r*1e3+24*i*60*60*1e3,c=e.computeSameSiteDirective(a);o.setTime(o.getTime()+l),e.browserSetCookie("".concat(t,"=").concat(n,";expires=").concat(o.toUTCString(),";SameSite=").concat(c,";path=/"))}},{key:"setSessionCookie",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.d.COOKIE_SAME_SITE_LAX,r=e.computeSameSiteDirective(i);e.browserSetCookie("".concat(t,"=").concat(n,";SameSite=").concat(r,";path=/"))}},{key:"deleteCookie",value:function(t){e.browserSetCookie("".concat(t,"=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/"))}},{key:"getCookie",value:function(e){for(var t="".concat(e,"="),n=document.cookie.split("; "),i=0;i<n.length;i++){var r=n[i];if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}},{key:"checkCookie",value:function(e){return""!==this.getCookie(e)}}],[{key:"browserSetCookie",value:function(e){document.cookie=e}},{key:"computeSameSiteDirective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.d.COOKIE_SAME_SITE_LAX;return e===s.d.COOKIE_SAME_SITE_NONE?"".concat(s.d.COOKIE_SAME_SITE_NONE,";Secure"):e}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(9),u=n(23),d=function(){function e(){r()(this,e),l()(this,"allowedUserFileExtensions",void 0),l()(this,"forbiddenUserFileExtensions",void 0),l()(this,"ui",void 0),l()(this,"resourceManager",void 0)}return o()(e,[{key:"getAllowedUserFileExtensions",value:function(){return this.allowedUserFileExtensions}},{key:"getForbiddenUserFileExtensions",value:function(){return this.forbiddenUserFileExtensions}},{key:"withAllowedUserFileExtensions",value:function(e){return this.allowedUserFileExtensions=(e||[]).sort(),this}},{key:"withForbiddenUserFileExtensions",value:function(e){return this.forbiddenUserFileExtensions=(e||[]).sort(),this}},{key:"withUI",value:function(e){return this.ui=e,this}},{key:"withResourceManager",value:function(e){return this.resourceManager=e,this}},{key:"createExtensionDialog",value:function(e,t,n,i){return function(r,a){return a.Deferred((function(a){r.resourceManager.get(t).then((function(t){var o=r.ui.createDialog(e,[{type:c.f.OK,callback:function(){n(o)}},{type:c.f.CANCEL,callback:function(){i(o)}}],{width:"500px",onCloseButtonClick:function(){i(o)}});o.body.innerHTML=t,a.resolve(o)}))})).promise()}(this,u.a.getJQuery())}},{key:"isValidExtensionName",value:function(e){return/^[a-z0-9\-]{1,10}$/.test(e)}},{key:"canAddFileExtension",value:function(e){return!(this.forbiddenUserFileExtensions.indexOf(e)>-1)&&!(this.allowedUserFileExtensions.indexOf(e)>-1)}},{key:"addUserFileExtension",value:function(){return function(e,t){return e.Deferred((function(n){var i=function(t,n){var i=document.createElement("span");i.setAttribute("data-role","error"),i.textContent=n,e(t.body).find("input[name=extension]").after(i)},r=function(t){e(t.body).find("span[data-role=error]").remove()};t.createExtensionDialog("Add user file extension","/modules/Typescript/Form/resources/add-allowed-file-extension-dialog.html",(function(a){r(a);var o=e(a.body).find("input[name=extension]").val().toLowerCase();o?t.isValidExtensionName(o)?t.canAddFileExtension(o)?e.post("/modules/FormEditor/ajax-user-extension-service.php",{do:"add-user-extension",extension:o}).then((function(){a.close(),t.allowedUserFileExtensions.push(o),t.allowedUserFileExtensions.sort(),n.resolve(o)})).fail((function(){t.ui.alert("Error adding extension",'Failed to add extension "'.concat(o,'" on server!'))})):i(a,"".concat(JSON.stringify(o)," extension cannot be added. Check if the extension is not already added in your supported extensions list, and if the extension is supported")):i(a,"".concat(JSON.stringify(o)," is not a supported file extension!")):i(a,"Please specify a non-empty file extension!")}),(function(e){e.close(),n.reject(new Error("User aborted operation"))})).then((function(t){t.body.setAttribute("data-dialog-type","add-file-extension"),e(t.body).on("input","input[name=extension]",(function(){r(t)}))}))})).promise()}(u.a.getJQuery(),this)}}],[{key:"getInstance",value:function(){return void 0===this.instance?this.instance=new e:this.instance}}]),e}();l()(d,"instance",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(126),u=n(117),d=function(){function e(){r()(this,e),l()(this,"rootNode",void 0),l()(this,"dropdown",void 0),this.rootNode=document.createElement("div"),this.rootNode.setAttribute("data-role","dropdown-component"),this.dropdown=document.createElement("select"),this.rootNode.appendChild(this.dropdown),this.rootNode.appendChild(document.createElement("div"))}return o()(e,[{key:"getRoot",value:function(){return this.rootNode}},{key:"getSelectedIndex",value:function(){return this.dropdown.selectedIndex}},{key:"setSelectedIndex",value:function(e){return this.dropdown.selectedIndex=e,this}},{key:"addGroup",value:function(e,t){var n=document.createElement("optgroup");return n.setAttribute("data-id",e),n.setAttribute("label",t),this.dropdown.appendChild(n),this}},{key:"addOption",value:function(e,t,n,i){var r=document.createElement("option");if(r.text=e.text,r.value=e.value,r.disabled=!!e.isSeparator||!!e.disabled,r.hidden=!!e.hidden,r.setAttribute("data-is-default",e.isDefault),i)this.dropdown.add(r,i.previousSibling);else if(t)this.dropdown.add(r,t.nextSibling);else if(n){var a=this.dropdown.querySelector('optgroup[data-id="'.concat(n,'"]'));a&&a.appendChild(r)}else this.dropdown.add(r);return this}},{key:"getOptionByValue",value:function(e){return Object(c.a)(this.dropdown.options,(function(t){return t.value===e}))}},{key:"getOptionAt",value:function(e){return this.dropdown.options.item(e)}},{key:"removeOption",value:function(e){return this.dropdown.remove(e),this}},{key:"getValue",value:function(){return this.dropdown.value}},{key:"setValue",value:function(e){return this.dropdown.value=e,this}},{key:"hasValue",value:function(e){return Object(u.a)(this.dropdown.options,(function(t){return t.value===e}))}},{key:"getValues",value:function(){for(var e=[],t=0,n=this.dropdown.options.length;t<n;t++)e.push(this.dropdown.options[t].value);return e}},{key:"getTexts",value:function(){for(var e=[],t=0,n=this.dropdown.options.length;t<n;t++)e.push(this.dropdown.options[t].text);return e}},{key:"setValueByText",value:function(e){for(var t=0,n=this.dropdown.options.length;t<n;t++)if(this.dropdown.options[t].text===e){this.dropdown.selectedIndex=t;break}}},{key:"getText",value:function(){return this.dropdown.options[this.dropdown.selectedIndex].text}},{key:"clear",value:function(){for(;this.dropdown.options.length;)this.dropdown.remove(0);for(var e=this.dropdown.getElementsByTagName("optgroup");e.length;)this.dropdown.removeChild(e[0]);return this}},{key:"setOptions",value:function(e){this.clear();for(var t=0,n=e.length;t<n;t++)this.addOption(e[t]);return this}},{key:"setSelectedOptionByValue",value:function(e){this.dropdown.value=e}}]),e}()},,function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var i=n(20),r=n.n(i),a=n(38),o=n.n(a),s=n(5),l=n.n(s),c=n(6),u=n.n(c),d=n(3),p=n.n(d),h=n(7),_=n.n(h),g=n(8),m=n.n(g),f=n(4),E=n.n(f),y=n(0),T=n.n(y),v=n(33),O=n(1),b=n(29),C=n(35),I=n(104),R=n(34),P=n(22),N=n(28),A=n(237),S=n(49),L=n(13);function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var w=function(e){_()(n,e);var t=D(n);function n(e,i){var r;return l()(this,n),r=t.call(this),T()(p()(r),"engine",void 0),T()(p()(r),"mobileLayout",void 0),T()(p()(r),"wasThemeRenderedAtLeastOnce",!1),T()(p()(r),"cssExpressionParser",void 0),T()(p()(r),"dirtyThemeThumbnailUpdater",void 0),T()(p()(r),"lastThemeSnapshot",null),T()(p()(r),"needsToTriggerChangeWhenEnteringEditMode",!1),T()(p()(r),"savedThemeCurrentId",null),T()(p()(r),"savedThemeCurrentName",null),T()(p()(r),"themeTemplate",void 0),T()(p()(r),"properties",void 0),T()(p()(r),"computedProperties",{grid:{pageWidth:0,pageWidthWithoutPadding:0,columnWidth:0,columnSpacing:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,isEnabled:!0,spaceReservedForColumnSpacing:0},container:{computedHorizontalPadding:0},other:{forcePagebreaks:!1},device:{isMobile:!1,isDesktop:!0},backlink:{marginBottom:12,padding:8}}),T()(p()(r),"styleElement",void 0),T()(p()(r),"themeThumbnailsStyleElement",void 0),T()(p()(r),"formCustomCSSText",void 0),T()(p()(r),"formCustomCSSFromUrl",void 0),T()(p()(r),"lastThemeThumbnailsStyleElementCSSText",""),T()(p()(r),"gridContainer",void 0),T()(p()(r),"cssTemplateText",null),T()(p()(r),"recompute",void 0),T()(p()(r),"columnSizes",[]),T()(p()(r),"onThemeSettingsChangedDeferred",void 0),T()(p()(r),"currentSelectedThemeId",null),T()(p()(r),"isMobilePlatform",void 0),T()(p()(r),"externalTheme",null),r.dirtyThemeThumbnailUpdater=R.a.create((function(){r.updateThemeThumbnailsCSSOnlyForCurrentTheme()}),100),r.engine=e,r.externalTheme=i,r.styleElement=document.createElement("style"),r.themeThumbnailsStyleElement=document.createElement("style"),r.formCustomCSSFromUrl=document.createElement("link"),r.formCustomCSSFromUrl.setAttribute("rel","stylesheet"),r.formCustomCSSFromUrl.setAttribute("type","text/css"),r.formCustomCSSText=document.createElement("style"),r.themeThumbnailsStyleElement.setAttribute("data-role","theme-thumbnails-style"),r.cssExpressionParser=new A.b,r.isMobilePlatform=""===C.a.meetsRequirements("* * mobile * *"),r.properties=r.externalTheme.getDefaultThemeProperties(),r.createDefaultTheme(),r.init(),setTimeout((function(){Object(v.a)()(Object(P.i)(r.properties))})),r}return u()(n,[{key:"getEngine",value:function(){return this.engine}},{key:"getStyleElement",value:function(){return this.styleElement}},{key:"getFormCustomCSSTextStyleElement",value:function(){return this.formCustomCSSText}},{key:"getFormCustomCSSFromUrlElement",value:function(){return this.formCustomCSSFromUrl}},{key:"getThemeThumbnailsStyleElement",value:function(){return this.themeThumbnailsStyleElement}},{key:"getGridContainerElement",value:function(){return this.gridContainer}},{key:"mergeObject",value:function(e,t){if(e)for(var n in e)if(e.hasOwnProperty(n)&&e.propertyIsEnumerable(n))if(e[n].constructor&&e[n].constructor===Object){if(void 0===t[n])t[n]={};else if(!t[n].constructor||t[n].constructor!==Object)throw new Error('Failed to merge property "'.concat(n,'" in ').concat(JSON.stringify(t),": property is already defined, but is not of type object!"));this.mergeObject(e[n],t[n])}else{if(void 0!==t[n])throw new Error('Failed to merge property "'.concat(n,'" in ').concat(JSON.stringify(t),": property is already defined"));t[n]=e[n]}}},{key:"getMergedProperties",value:function(){var e={};return this.mergeObject(this.properties,e),this.mergeObject(this.computedProperties,e),e.cols=this.columnSizes,this.externalTheme.overrideExternalManagedThemeProperties(e),e}},{key:"parseCalcExpressionToMatchCorrectNumberOfBrackets",value:function(e){for(var t=1,n=e.substr(0,5),i=5,r=e.length;i<r;i++)if("("===e[i])t++,n+="(";else if(")"===e[i]){if(n+=")",0===--t)return n}else n+=e[i];return e}},{key:"optimizeCSS",value:function(e){var t,n=this;return S.a.VERBOSE_CONSOLE&&(t=e.length),e=e.replace(/(calc\([\s\S]+?\))([\s]+)?(;|$|\})/g,(function(e){var t=n.parseCalcExpressionToMatchCorrectNumberOfBrackets(e),i=e.substr(t.length);return n.cssExpressionParser.simplifyCSSCalcExpression(t)+i})).replace(/[\s]+/g," ").replace(/\/\*([\s\S]+?)\*\//g,""),S.a.VERBOSE_CONSOLE&&console.warn("minify: ",t,"=>",e.length,t-e.length),e}},{key:"recomputeInImmediateMode",value:function(){if(null!==this.cssTemplateText){this.wasThemeRenderedAtLeastOnce||this.engine.trigger("theme-before-render"),console.log("theme: recompute"),this.themeTemplate=this.themeTemplate||new N.a(this.cssTemplateText),this.recomputeDynamicPropertiesInImmediateMode();var e=this.getMergedProperties();S.a.ALLOW_CSS_OPTIMIZATIONS?this.styleElement.textContent=this.optimizeCSS(this.themeTemplate.parse(e)):this.styleElement.textContent=this.themeTemplate.parse(e),this.wasThemeRenderedAtLeastOnce||(this.engine.trigger("theme-ready"),this.wasThemeRenderedAtLeastOnce=!0),L.a.refreshFrameHeightOnWix()}}},{key:"init",value:function(){var e;(e=this).initializeGridDOMElementAndColumnsStructure(),e.recompute=R.a.create((function(){e.recomputeInImmediateMode()}),0),e.externalTheme.on("change",(function(){e.recompute(),e.trigger("repaint-only")})),e.onThemeSettingsChangedDeferred=R.a.create((function(){console.log("theme-settings-changed-throttler"),e.onThemeSettingsChanged()}),0),e.engine.getResourceManager().get("/modules/Typescript/Form/resources/theme.template.txt").then((function(t){e.cssTemplateText=t,e.recomputeInImmediateMode()})).fail((function(e){console.error("Failed to initialize Form Theme"),console.error(e)})),e.on("load",(function(){e.updateThemeThumbnailsCSS()})),setTimeout((function(){e.engine.getDocument().getConfiguration().on("change",(function(t,n){"customCssFromUrl"===t&&e.updateCustomFormCSSFromUrl(),"customCss"===t&&e.updateCustomFormCSSText()}))}),50),N.a.addHelper({name:"LABEL_STATE_FORMATTER",func:function(e){return e.replace(/([\s]+)(Disabled|Error|Focused|Hover|Normal|Selected)([\s]+)/gi,' <span class="state">$2</span> ')}})}},{key:"recomputeDynamicPropertiesInImmediateMode",value:function(){this.computedProperties.grid.paddingBottom=~~parseInt(this.properties.page.padding.bottom),this.computedProperties.grid.paddingLeft=~~parseInt(this.properties.page.padding.left),this.computedProperties.grid.paddingRight=~~parseInt(this.properties.page.padding.right),this.computedProperties.grid.paddingTop=~~parseInt(this.properties.page.padding.top),this.computedProperties.device.isMobile=this.isMobilePlatform,this.computedProperties.device.isDesktop=!this.isMobilePlatform;var e=this.engine.getDocument().getPageWidth(),t=e-this.computedProperties.grid.paddingLeft-this.computedProperties.grid.paddingRight;t<0&&(t=0);var n=~~parseInt(this.properties.container.padding.horizontal),i=2*n,r=t-20*i;this.computedProperties.grid.isEnabled=r>=200;var a,o,s,l=~~(r/20),c=l+i;this.computedProperties.grid.spaceReservedForColumnSpacing=r,this.computedProperties.grid.pageWidth=e-t%c,this.computedProperties.grid.pageWidthWithoutPadding=t-t%c,this.computedProperties.container.computedHorizontalPadding=n,this.computedProperties.grid.columnWidth=~~l,this.computedProperties.grid.columnSpacing=i;for(var u=0;u<20;u++)this.columnSizes[u].width=this.columnSizes[u].colspan*c,this.columnSizes[u].widthWithoutPadding=this.columnSizes[u].width-i,s=~~(this.columnSizes[u].colspan/4),a=~~(this.columnSizes[u].colspan/3),o=~~(this.columnSizes[u].colspan/2),this.columnSizes[u].full=this.columnSizes[u].colspan*c-i,this.columnSizes[u].quarter=s*c-i,this.columnSizes[u].third=a*c-i,this.columnSizes[u].half=o*c-i;!this.computedProperties.grid.isEnabled!==this.mobileLayout&&(this.mobileLayout=!this.computedProperties.grid.isEnabled,this.engine.reconfigureLayoutInImmediateMode(),this.engine.getForm().setAttribute("data-layout-type",this.mobileLayout?"mobile":"desktop")),this.computedProperties.other.forcePagebreaks=~~parseInt(this.properties.page.margin.bottom)+~~parseInt(this.properties.page.margin.top)<36}},{key:"isGridEnabled",value:function(){return this.computedProperties.grid.isEnabled}},{key:"initializeGridDOMElementAndColumnsStructure",value:function(){var e,t;this.gridContainer=document.createElement("div"),this.gridContainer.setAttribute("data-role","grid"),(t=document.createElement("div")).setAttribute("data-role","edge"),t.setAttribute("data-edge","top"),this.gridContainer.appendChild(t),(t=document.createElement("div")).setAttribute("data-role","edge"),t.setAttribute("data-edge","left"),this.gridContainer.appendChild(t),(t=document.createElement("div")).setAttribute("data-role","edge"),t.setAttribute("data-edge","right"),this.gridContainer.appendChild(t),(t=document.createElement("div")).setAttribute("data-role","edge"),t.setAttribute("data-edge","bottom"),this.gridContainer.appendChild(t);for(var n=0;n<20;n++)this.columnSizes.push({colspan:n+1,width:0,quarter:0,third:0,half:0,full:0,widthWithoutPadding:0,additionalCSSClass:["1u","2u","3u","4u"][n]||void 0}),(e=document.createElement("div")).setAttribute("data-index",String(n+1)),e.setAttribute("data-role","col"),e.textContent=String(n+1),this.gridContainer.appendChild(e)}},{key:"enumerateProperties",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=[];this.flatten(this.properties,[],i,t);for(var r=0,a=n.virtualProperties.length;r<a;r++)e={name:n.virtualProperties[r].name,isColor:n.virtualProperties[r].isColor,value:void 0},Object.defineProperty(e,"value",{get:n.virtualProperties[r].getter.bind(this),set:n.virtualProperties[r].setter.bind(this)}),i.push(e);return i.sort((function(e,t){var n=e.name.toLowerCase(),i=t.name.toLowerCase();return n===i?0:n<i?-1:1})),i}},{key:"setProperty",value:function(e,t){if("string"!==typeof e)return null;n.PROPERTIES_THAT_TRIGGER_DIRTY_THEME_THUMBNAIL_UPDATE.indexOf(e)>-1&&this.dirtyThemeThumbnailUpdater(),this.onThemeSettingsChangedDeferred();for(var i=e.split("_"),r=this.properties,a=i.length,s=0,l=a-1;s<l;s++){if(!i[s])return console.warn("Invalid propertyFQN: ".concat(JSON.stringify(e))),this;if(!r.hasOwnProperty(i[s]))return console.warn("Invalid propertyFQN: ".concat(JSON.stringify(e))),this;r=r[i[s]]}return"object"===o()(r[i[a-1]])||"undefined"===typeof r[i[a-1]]?(console.warn("Theme: Invalid propertyFQN: ".concat(JSON.stringify(e),". Property ignored")),this):(r[i[a-1]]=t,null===this.lastThemeSnapshot?(this.trigger("property-changed",e,t),this.trigger("change")):(this.trigger("repaint-only"),this.needsToTriggerChangeWhenEnteringEditMode=!0),/_font_family$/.test(e)&&t&&(e===n.THUMBNAIL_PROPERTY_NAME_FONT_FAMILY&&this.trigger("theme-font-changed",t),this.getEngine().getLoader().getLoaderDependency(O.M.FONTS_MANAGER).loadFont(t).then((function(){console.log("Font loaded:".concat(t))}))),this.externalTheme.isPropertyManaged(e)&&this.externalTheme.setProperty(e,t),"page_background_color"===e&&this.onPageBackgroundColorChanged(),this)}},{key:"flatten",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e&&"object"===o()(e))for(var r in e)if(e.hasOwnProperty(r)){if(t.push(r),"object"===o()(e[r]))this.flatten(e[r],t,n,i);else{var a=L.a.getNormalizedCSSColorNotationFromString(e[r]),s=!!a,l={name:t.join("_"),value:s?a:e[r]};i&&(l.isColor=s),n.push(l)}t.pop()}}},{key:"getThemesList",value:function(){for(var e,t=[],i=Object(I.a)(JSON.stringify(this.enumerateProperties(!1))),r=0,a=n.availableThemes.length;r<a;r++)e=Object(I.a)(n.availableThemes[r].value),t.push({id:n.availableThemes[r].id,userId:n.availableThemes[r].userId,name:n.availableThemes[r].name,isCurrentTheme:i===e});return t}},{key:"onThemeSettingsChanged",value:function(){for(var e=null,t=this.getThemesList(),n=0,i=t.length;n<i;n++)if(t[n].isCurrentTheme){e=t[n].id;break}e!==this.currentSelectedThemeId&&(this.currentSelectedThemeId=e,this.trigger("theme-changed",e))}},{key:"getThemeById",value:function(e){if(null===e&&this.lastThemeSnapshot)return this.lastThemeSnapshot;for(var t=0,i=n.availableThemes.length;t<i;t++)if(n.availableThemes[t].id===e)return n.availableThemes[t];return null}},{key:"applyTheme",value:function(e){if(null!==e)try{if(!r()(e,Object))throw new Error("Object expected!");if("number"!==typeof e.id&&"null"!==e.id&&null!==e.id)throw new Error("Integer expected!");if("string"!==typeof e.value)throw new Error("String expected!");var t;try{t=JSON.parse(e.value)}catch(h){throw new Error("Failed to decode theme! The theme.value is not a valid JSON structure!")}if(!r()(t,Array))throw new Error("Decoded theme value as JSON is not of type Array!");for(var n=0,i=t.length;n<i;n++){if(!r()(t[n],Object))throw new Error("Failed to apply theme. Theme property #".concat(n,' is not of type "Object"'));if("string"!==typeof t[n].name)throw new Error("Failed to apply theme. At index ".concat(n,' the property "name" is missing or is not of type "string"'));if(void 0===o()(t[n].value))throw new Error("Failed to apply theme. At index ".concat(n,' the property "value" is undefined!'))}this.disableEvents();for(var a=0,s=t.length;a<s;a++){var l=t[a].name,c=t[a].value;try{this.setProperty(l,c),console.log(l,c)}catch(h){console.warn("Apply Theme: Failed to apply theme property ".concat(JSON.stringify(l)," value ").concat(JSON.stringify(c),": Either property does not exist, or has a invalid value"))}}if(this.enableEvents(),null===this.lastThemeSnapshot){this.engine.getDocument().getConfiguration().withProperty("themeCurrentId",e.id).withProperty("themeCurrentName",e.name),this.trigger("change");for(var u=0,d=this.enumerateProperties(),p=d.length;u<p;u++)this.trigger("property-changed",d[u].name,d[u].value)}else this.savedThemeCurrentId=e.id,this.savedThemeCurrentName=e.name,this.trigger("repaint-only"),this.needsToTriggerChangeWhenEnteringEditMode=!0;this.externalTheme.trigger("theme-id-changed",e.id)}catch(h){console.warn('We could not apply your theme correctly! Please contact "http://www.123contactform.com" support for more information about this error!'),console.error(h)}}},{key:"getCurrentThemeId",value:function(){return this.currentSelectedThemeId}},{key:"isMobileLayout",value:function(){return this.mobileLayout||!1}},{key:"getComputedColumnWidth",value:function(){return this.computedProperties.grid.columnWidth}},{key:"getComputedColumnSpacing",value:function(){return this.computedProperties.grid.columnSpacing}},{key:"getCSSExpressionParser",value:function(){return this.cssExpressionParser}},{key:"createDefaultTheme",value:function(){var e=this;void 0===n.defaultTheme&&(setTimeout((function(){e.engine.getLoader().getLoaderDependency(O.M.FONTS_MANAGER).loadFont("Lato")})),n.defaultTheme={id:0,userId:null,value:JSON.stringify(this.enumerateProperties(!1)),name:"Default",customCSSText:null,customCSSUrl:null},n.availableThemes=[n.defaultTheme],n.PROPERTIES_THAT_TRIGGER_DIRTY_THEME_THUMBNAIL_UPDATE=[n.FORM_BACKGROUND_COLOR,n.PAGE_BORDER_COLOR,n.PAGE_BORDER_STYLE,n.PAGE_BACKGROUND_COLOR,n.INPUT_NORMAL_BORDER_COLOR,n.INPUT_NORMAL_BACKGROUND_COLOR,n.LABEL_NORMAL_COLOR,n.BUTTON_PRIMARY_NORMAL_BORDER_COLOR,n.BUTTON_PRIMARY_NORMAL_BACKGROUND_COLOR,n.THUMBNAIL_PROPERTY_NAME_FONT_FAMILY],this.updateThemeThumbnailsCSS())}},{key:"updateThemeThumbnailsCSS",value:function(){var e,t="/** THEME THUMBNAILS (Theme::updateThemeThumbnailsCSS) **/\n";e=this.getThemeThumbnailSettings({id:"null",value:JSON.stringify(this.enumerateProperties(!1))}),t+=this.generateThumbnailCSSText(e);for(var i=0,r=n.availableThemes.length;i<r;i++)e=this.getThemeThumbnailSettings(n.availableThemes[i]),t+=this.generateThumbnailCSSText(e);this.lastThemeThumbnailsStyleElementCSSText=t,this.themeThumbnailsStyleElement.textContent=t}},{key:"updateThemeThumbnailsCSSOnlyForCurrentTheme",value:function(){var e,t=this.lastThemeThumbnailsStyleElementCSSText.indexOf("/** DELIMITER **/ "),n=-1===t?this.lastThemeThumbnailsStyleElementCSSText:this.lastThemeThumbnailsStyleElementCSSText.substr(t+17);e=this.generateThumbnailCSSText(this.getThemeThumbnailSettings({id:"null",value:this.lastThemeSnapshot?this.lastThemeSnapshot.value:JSON.stringify(this.enumerateProperties(!1))})),this.lastThemeThumbnailsStyleElementCSSText=e+n,this.themeThumbnailsStyleElement.textContent=this.lastThemeThumbnailsStyleElementCSSText}},{key:"generateThumbnailCSSText",value:function(e){var t,n="";return t='div[data-role=theme][data-theme-id="'+e.theme_id+'"] > .thumbnail ',n+="".concat(t," {\n            background-color: ").concat(e.formBackgroundColor,";\n        }\n        ").concat(t," .thumbnail__form {\n            background-color: ").concat(e.pageBackgroundColor,";\n            border-color: ").concat("none"===e.pageBorderStyle?"transparent":e.pageBorderColor,";\n        }\n        ").concat(t," .thumbnail__form-title {\n            color: ").concat(e.labelNormalColor,";\n        }\n        ").concat(t," .thumbnail__form-field {\n            background-color: ").concat(e.inputNormalBackgroundColor,";\n            border-color: ").concat(e.inputNormalBorderColor,";\n        }\n        ").concat(t," .thumbnail__form-button {\n            background-color: ").concat(e.buttonPrimaryNormalBackgroundColor,";\n            border-color: ").concat(e.buttonPrimaryNormalBorderColor,";\n        }"),n+=" /** DELIMITER **/ "}},{key:"getThemeThumbnailSettings",value:function(e){for(var t=this.engine.getLoader().getLoaderDependency(O.M.FONTS_MANAGER),i=JSON.parse(e.value),r={theme_id:String(e.id),userId:e.userId,formBackgroundColor:"#fff",pageBorderColor:"transparent",pageBorderStyle:"0",pageBackgroundColor:"#fff",labelNormalColor:"#4c4c4c",inputNormalBorderColor:"#ddd",inputNormalBackgroundColor:"#fff",buttonPrimaryNormalBorderColor:"transparent",buttonPrimaryNormalBackgroundColor:"#4c4c4c",font_family:"Open Sans",webfont_class:null},a=0,o=i.length;a<o;a++)switch(i[a].name){case n.FORM_BACKGROUND_COLOR:r.formBackgroundColor=i[a].value;break;case n.PAGE_BORDER_COLOR:r.pageBorderColor=i[a].value;break;case n.PAGE_BORDER_STYLE:r.pageBorderStyle=i[a].value;break;case n.PAGE_BACKGROUND_COLOR:r.pageBackgroundColor=i[a].value;break;case n.LABEL_NORMAL_COLOR:r.labelNormalColor=i[a].value;break;case n.INPUT_NORMAL_BORDER_COLOR:r.inputNormalBorderColor=i[a].value;break;case n.INPUT_NORMAL_BACKGROUND_COLOR:r.inputNormalBackgroundColor=i[a].value;break;case n.BUTTON_PRIMARY_NORMAL_BORDER_COLOR:r.buttonPrimaryNormalBorderColor=i[a].value;break;case n.BUTTON_PRIMARY_NORMAL_BACKGROUND_COLOR:r.buttonPrimaryNormalBackgroundColor=i[a].value;break;case n.THUMBNAIL_PROPERTY_NAME_FONT_FAMILY:r.font_family=i[a].value;try{var s=t.getFontByName(i[a].value);r.webfont_class=t.isSystemFont(i[a].value)||null===s?null:s.cssClassAaBbCc}catch(l){r.webfont_class=null}}return r}},{key:"getCurrentThemeName",value:function(){for(var e=this.engine.getDocument().getConfiguration().getProperty("themeCurrentId",0),t=this.engine.getDocument().getConfiguration().getProperty("themeCurrentName",n.defaultTheme.name),i=0,r=n.availableThemes.length;i<r;i++)if(n.availableThemes[i].id===e)return n.availableThemes[i].name;return t}},{key:"enterPreviewMode",value:function(){if(!this.lastThemeSnapshot){console.warn("Theme: ENTER PREVIEW MODE"),this.needsToTriggerChangeWhenEnteringEditMode=!1;var e={name:this.getCurrentThemeName(),id:null,userId:null,value:JSON.stringify(this.enumerateProperties(!1)),customCSSText:null,customCSSUrl:null};this.lastThemeSnapshot=e,this.updateThemeThumbnailsCSSOnlyForCurrentTheme(),this.trigger("enter-preview-mode")}}},{key:"enterEditMode",value:function(){null!==this.lastThemeSnapshot&&(console.warn("Theme: ENTER EDIT MODE"),this.lastThemeSnapshot=null,this.trigger("enter-edit-mode"),this.needsToTriggerChangeWhenEnteringEditMode&&(this.trigger("change"),null!==this.savedThemeCurrentId&&(this.engine.getDocument().getConfiguration().withProperty("themeCurrentName",this.savedThemeCurrentName),this.engine.getDocument().getConfiguration().withProperty("themeCurrentId",this.savedThemeCurrentId)),this.needsToTriggerChangeWhenEnteringEditMode=!1),this.updateThemeThumbnailsCSSOnlyForCurrentTheme())}},{key:"updateCustomFormCSSText",value:function(){this.engine.getLoader().getLoaderType()===O.B.VIEW?this.formCustomCSSText.textContent=this.engine.getDocument().getConfiguration().getProperty("customCss")||"":function(e,t){var n=e.engine.getDocument().getConfiguration().getProperty("customCss");n?t.ajax({url:"/modules/CSSProxy/inline_css/",data:{css:Object(I.c)(n)},type:"POST",cache:!1}).then((function(t){e.formCustomCSSText.textContent=t,e.getEngine().getLoader().getCommandDispatcher().updateCustomCSSErrorDOMNodes(!1,"custom-css")})).fail((function(t){e.formCustomCSSText.textContent="",e.getEngine().getLoader().getCommandDispatcher().updateCustomCSSErrorDOMNodes(!0,"custom-css")})):e.formCustomCSSText.textContent=""}(this,this.engine.getJQuery())}},{key:"updateCustomFormCSSFromUrl",value:function(){var e=this.engine.getDocument().getConfiguration().getProperty("customCssFromUrl");if(e)if(this.engine.getLoader().getLoaderType()===O.B.VIEW)this.formCustomCSSFromUrl.setAttribute("href",e||"");else{var t="/modules/CSSProxy/url/".concat(Object(I.c)(e),"/");t?this.formCustomCSSFromUrl.setAttribute("href",t||""):this.formCustomCSSFromUrl.removeAttribute("href")}else this.formCustomCSSFromUrl.removeAttribute("href")}},{key:"getExternalTheme",value:function(){return this.externalTheme}},{key:"onPageBackgroundColorChanged",value:function(){"transparent"===this.properties.page.background.color?this.engine.getDocument().getRootNode().setAttribute("data-page-background-transparent","1"):this.engine.getDocument().getRootNode().removeAttribute("data-page-background-transparent")}}],[{key:"addVirtualProperty",value:function(e,t,n,i){this.virtualProperties.push({name:e,isColor:i,getter:t,setter:n})}},{key:"getDefaultTheme",value:function(){return this.defaultTheme}}]),n}(b.a);T()(w,"FORM_BACKGROUND_COLOR","form_background_color"),T()(w,"PAGE_BACKGROUND_COLOR","page_background_color"),T()(w,"PAGE_BORDER_COLOR","page_border_color"),T()(w,"PAGE_BORDER_STYLE","page_border_style"),T()(w,"LABEL_NORMAL_COLOR","label_normal_color"),T()(w,"INPUT_NORMAL_BORDER_COLOR","input_normal_border_color"),T()(w,"INPUT_NORMAL_BACKGROUND_COLOR","input_normal_background_color"),T()(w,"BUTTON_PRIMARY_NORMAL_BORDER_COLOR","button_primary_normal_border_color"),T()(w,"BUTTON_PRIMARY_NORMAL_BACKGROUND_COLOR","button_primary_normal_background_color"),T()(w,"THUMBNAIL_PROPERTY_NAME_FONT_FAMILY","form_font_family"),T()(w,"PROPERTIES_THAT_TRIGGER_DIRTY_THEME_THUMBNAIL_UPDATE",[]),T()(w,"defaultTheme",void 0),T()(w,"virtualProperties",[]),T()(w,"availableThemes",[])},,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(9),u=function(){function e(){r()(this,e),l()(this,"userData",void 0),window.UserData&&this.setUserData(window.UserData)}return o()(e,[{key:"setUserData",value:function(e){this.userData=e}},{key:"getServerPlatform",value:function(){var e;return null===(e=this.userData)||void 0===e?void 0:e.serverPlatform}},{key:"isWeeblyPlatform",value:function(){var e;return(null===(e=this.userData)||void 0===e?void 0:e.serverPlatform)===c.j.WEEBLY}},{key:"isWixPlatform",value:function(){var e;return(null===(e=this.userData)||void 0===e?void 0:e.serverPlatform)===c.j.WIX}},{key:"isSalesforcePlatform",value:function(){var e;return(null===(e=this.userData)||void 0===e?void 0:e.serverPlatform)===c.j.SALESFORCE}},{key:"isShopifyPlatform",value:function(){var e;return null===(e=this.userData)||void 0===e?void 0:e.isShopifyPlatform}},{key:"isBigCommercePlatform",value:function(){var e;return null===(e=this.userData)||void 0===e?void 0:e.isBigCommercePlatform}},{key:"isWhiteLabel",value:function(){var e;return null===(e=this.userData)||void 0===e?void 0:e.isWhiteLabel}},{key:"isFreeUser",value:function(){var e;return(null===(e=this.userData)||void 0===e?void 0:e.userPlan)===c.l.BASIC}},{key:"isGoldUser",value:function(){var e;return(null===(e=this.userData)||void 0===e?void 0:e.userPlan)===c.l.GOLD}},{key:"isPlatinumUser",value:function(){var e;return(null===(e=this.userData)||void 0===e?void 0:e.userPlan)===c.l.PLATINUM}},{key:"isProfessionalUser",value:function(){var e;return(null===(e=this.userData)||void 0===e?void 0:e.userPlan)===c.l.PROFESSIONAL}},{key:"isCorporateUser",value:function(){var e;return(null===(e=this.userData)||void 0===e?void 0:e.userPlan)===c.l.CORPORATE}},{key:"isFormOwner",value:function(){var e;return null===(e=this.userData)||void 0===e?void 0:e.isFormOwner}},{key:"isSubUser",value:function(){var e;return null===(e=this.userData)||void 0===e?void 0:e.isSubUser}},{key:"roleId",value:function(){var e;return null===(e=this.userData)||void 0===e?void 0:e.roleId}},{key:"getUserPlan",value:function(){var e;return null===(e=this.userData)||void 0===e?void 0:e.userPlan}},{key:"getFormPermissions",value:function(){var e;return null===(e=this.userData)||void 0===e?void 0:e.formPermissions}},{key:"isSalesforceTrial",value:function(){var e;return null===(e=this.userData)||void 0===e?void 0:e.userSFTrial}},{key:"isStandardUser",value:function(){return this.roleId()===c.n.STANDARD_USER}},{key:"isAdministrator",value:function(){return this.roleId()===c.n.ADMINISTRATOR}},{key:"isViewer",value:function(){return this.roleId()===c.n.VIEWER}},{key:"isGroupAdmin",value:function(){return this.roleId()===c.n.GROUP_ADMIN}},{key:"getUser",value:function(){var e;return null===(e=this.userData)||void 0===e?void 0:e.user}},{key:"canRenameForm",value:function(){var e;return null===(e=this.userData)||void 0===e?void 0:e.userCanRenameForm}},{key:"canUseNewPlans",value:function(){return this.userData.seeNewPlans}},{key:"canUseInsights",value:function(){return this.userData.canUseInsights}},{key:"isSalesforceMappingV3Enabled",value:function(){var e;return null===(e=this.userData)||void 0===e?void 0:e.isSalesforceMappingV3Enabled}},{key:"getBillingCycle",value:function(){var e;return null===(e=this.userData)||void 0===e?void 0:e.billingCycle}},{key:"isWeeblyUser",value:function(){var e;return(null===(e=this.userData)||void 0===e?void 0:e.userPlatform.toLowerCase())===c.j.WEEBLY}},{key:"isWixUser",value:function(){var e;return(null===(e=this.userData)||void 0===e?void 0:e.userPlatform.toLowerCase())===c.j.WIX}},{key:"getUserId",value:function(){var e;return null===(e=this.userData)||void 0===e?void 0:e.userId}},{key:"getUserLimited",value:function(){return this.userData.userLimited}},{key:"getUserStartDate",value:function(){return this.userData.userStartDate}},{key:"getSubmissionsLastMonth",value:function(){return this.userData.submissionsLastMonth}},{key:"getTotalForms",value:function(){return this.userData.totalForms}},{key:"getUserPlatform",value:function(){return this.userData.userPlatform}},{key:"getUserRegDate",value:function(){return this.userData.userRegDate}},{key:"getUserPlanName",value:function(){return this.userData.userPlanName}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();l()(u,"instance",void 0)},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=function(){function e(){r()(this,e)}return o()(e,null,[{key:"canAnchorElementToTargetBottomRight",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=document.body.getBoundingClientRect();return e.right+n+t.width<=i.width&&e.top+t.height<=window.innerHeight}},{key:"canAnchorElementToTargetTopRight",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=document.body.getBoundingClientRect();return e.right+n+t.width<=i.width&&e.top-t.height>=0}},{key:"canAnchorElementToTargetTopLeft",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.left-n+t.width>=0&&e.bottom-t.height>=0}},{key:"canAnchorElementToTargetBottomLeft",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.left-n+t.width>=0&&e.top+t.height<=window.innerHeight}},{key:"canAnchorElementToTargetCenterTop",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.left+e.width/2-t.width/2>=0&&e.top-n-t.height>=0}},{key:"canAnchorElementToTargetCenterBottom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=window.scrollY||0;return e.left+e.width/2-t.width/2>=0&&e.bottom+n+i+t.height<=window.innerHeight}},{key:"canAnchorElementToTargetCenterLeft",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.left-n-t.width>=0&&e.top+e.height/2-t.height>=0}},{key:"canAnchorElementToTargetCenterRight",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=document.body.getBoundingClientRect();return e.right+n+t.width<=i.width&&e.top+e.height/2-t.height>=0}},{key:"getAnchorPosition",value:function(t,n){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,a=0,o=r.length;a<o;a++)switch(r[a]){case"center-top":if(e.canAnchorElementToTargetCenterTop(t,n,i))return{left:t.left+t.width/2-n.width/2,top:t.top-n.height-i,mode:"center-top"};break;case"center-bottom":if(e.canAnchorElementToTargetCenterBottom(t,n,i))return{left:t.left+t.width/2-n.width/2,top:t.bottom+i,mode:"center-bottom"};break;case"center-right":if(e.canAnchorElementToTargetCenterRight(t,n,i))return{left:t.right+i,top:t.top+t.height/2-n.height/2,mode:"center-right"};break;case"center-left":if(e.canAnchorElementToTargetCenterLeft(t,n,i))return{left:t.left-i-n.width,top:t.top+t.height/2-n.height/2,mode:"center-left"};break;default:throw new Error("Positioning mode ".concat(JSON.stringify(r[a])," is not implemented"))}switch(r[0]){case"center-top":return{left:t.left+t.width/2-n.width/2,top:t.top-n.height-i,mode:"center-top"};case"center-bottom":return{left:t.left+t.width/2-n.width/2,top:t.bottom+i,mode:"center-bottom"};case"center-right":return{left:t.right+i,top:t.top+t.height/2-n.height/2,mode:"center-right"};case"center-left":return{left:t.left-i-n.width,top:t.top+t.height/2-n.height/2,mode:"center-left"};default:throw new Error("Positioning mode ".concat(JSON.stringify(r[0])," is not implemented"))}}}]),e}()},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(162),u=n(1),d=n(26),p=n(34),h=n(9),_=n(47),g=n(2),m=n(13),f=n(28),E=n(42),y=n(14),T=(n(480),function(){function e(){r()(this,e),l()(this,"currentSelectedControl",void 0),l()(this,"dialogOptions",void 0),l()(this,"userService",void 0),l()(this,"i18nService",new E.a),this.userService=_.a.getInstance()}return o()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(t,n,i){var r=this;this.setCurrentSelectedControl(i.getEngine()),t(n).find("input[type=hidden][data-plugin=text-choice-interface][data-value]").each((function(a,o){var s=o.getAttribute("data-value"),l=~~o.getAttribute("data-default-choice-type"),c=o.getAttribute("data-synchronize-other-properties"),u=o.getAttribute("data-new-choice-text")||"New Choice",p=o.getAttribute("data-new-choice-text-i18n"),h=[];r.setDialogOptions({choices:h,container:n,editorUserInterface:i,defaultOptionInputType:l,dialogTitle:"",newChoiceText:"",itemType:"",editingContext:"",useDifferentValuesPerStatement:!1}),t(o).on("reload",(function(e){try{var n=e.target,i=t(n).closest("[data-role=property]").find("div[data-role=secondary]").get(0),a=t(i).find("[data-role=container]");r.dialogOptions.choices=r.reinitializeChoicesIndexes(JSON.parse(n.value),a),r.updateChoices(n,t),r.updateContainerAttributes(i)}catch(o){}})),o.removeAttribute("data-value"),s&&(r.dialogOptions.choices=JSON.parse(s)||[]),t(o).parent().find("[data-role=secondary]").each((function(n,a){t(o).closest("label").after(a);var s=t(a).find("[data-role=container]");r.dialogOptions.choices=r.resetChoicesIndex(r.dialogOptions.choices,s),r.updateContainerAttributes(a),r.makeChoicesInInspectorSortable(t,a,o,c),t(a).on("click","a[data-role=edit-option], a[data-role=edit-more-option], button.choiceInspector__btn--openModal",(function(e){var n=e.currentTarget,l=String(n.getAttribute("data-dialog-title")),u=String(n.getAttribute("data-dialog-title-i18n")||""),d=String(n.getAttribute("data-new-choice-text")),p=String(n.getAttribute("data-new-choice-text-i18n")),_=String(n.getAttribute("data-item-type")),g=o.getAttribute("data-editing-context");r.dialogOptions.itemType=_,r.dialogOptions.editingContext=g,r.dialogOptions.useDifferentValuesPerStatement=r.currentSelectedControl.hasProperty("options.useDifferentValuesPerStatement")&&r.currentSelectedControl.getProperty("options.useDifferentValuesPerStatement"),r.dialogOptions.dialogTitle=u?i.getEngine().getI18n().translateText(u):l,r.dialogOptions.newChoiceText=p?i.getEngine().getI18n().translateText(p):d,r.editChoices().then((function(){r.currentSelectedControl.hasProperty("options.useDifferentValuesPerStatement")&&r.currentSelectedControl.setProperty("options.useDifferentValuesPerStatement",r.dialogOptions.useDifferentValuesPerStatement),h=JSON.parse(JSON.stringify(r.dialogOptions.choices)),h=r.reinitializeChoicesIndexes(h,s),r.updateContainerAttributes(a),r.updateChoices(o,t,c),r.makeChoicesInInspectorSortable(t,a,o,c),i.getEngine().getLoader().trigger("payments_products_price_change")})).fail((function(e){void 0!==e&&(console.warn("Failed to save options. Error is displayed below"),console.error(e))}))})).on("click","a[data-role=add-option]",(function(e){i.getEngine().getLoader().execCommand("track-event","edt_inspector_choice_option_add");var n=e.target,s=String(n.getAttribute("data-new-choice-text")),l=String(n.getAttribute("data-new-choice-text-i18n")),u=l?i.getEngine().getI18n().translateText(l):s,d=t(a).find('[data-role="container"]')[0],p=t(d).find('[data-role="choice"]:last-child input[data-role="secondary"]')[0];r.insertNewChoice(d,u,p,t),r.updateContainerAttributes(a),r.updateChoices(o,t,c),r.makeChoicesInInspectorSortable(t,a,o,c)})).parent().on("click","a[data-role=import-option]",(function(n){var l=n.currentTarget,u=JSON.parse(l.getAttribute("data-sets")||"[]"),d=String(l.getAttribute("data-dialog-title")||"Import choices"),p=String(l.getAttribute("data-dialog-title-i18n")||""),h=r.dialogOptions.choices;r.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER&&(h=JSON.parse(JSON.stringify(r.dialogOptions.choices[0]))),i.getSelectedDataset(u,p?i.getEngine().getI18n().translateText(p):d,h).then((function(n){s.find("[data-role=choice]").remove();for(var i=0,l=n.getValues(),u=l.length;i<u;i++){if(r.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER){for(var d=0,p=r.dialogOptions.choices.length;d<p;d++)void 0===r.dialogOptions.choices[d][i]?r.dialogOptions.choices[d].push(e.createUniqueChoice({text:l[i].text,isDefault:!1,index:i,numberOfTimesThisOptionCanBeChosen:null,numberOfTimesThisOptionHasBeenChosen:null,isCorrect:!1,quizPoints:0,paymentsValue:null},h)):r.dialogOptions.choices[d][i].text=l[i].text,i===u-1&&(r.dialogOptions.choices[d].length=u);h[i]=r.dialogOptions.choices[0][i]}else void 0===r.dialogOptions.choices[i]?r.dialogOptions.choices.push(e.createUniqueChoice({text:l[i].text,isDefault:!1,index:i,numberOfTimesThisOptionCanBeChosen:null,numberOfTimesThisOptionHasBeenChosen:null,isCorrect:!1,quizPoints:0,paymentsValue:null},h)):r.dialogOptions.choices[i].text=l[i].text,h[i]=r.dialogOptions.choices[i],i===u-1&&(r.dialogOptions.choices.length=u);s.append(r.createChoiceElement(h[i]))}r.updateContainerAttributes(a),r.updateChoices(o,t,c),r.makeChoicesInInspectorSortable(t,a,o,c)})).fail((function(e){console.warn("Failed to import choices. Error is displayed below"),console.error(e)}))})).on("input","[data-role=choice] > input[type=text][data-model-property=text]",(function(e){var n=e.target,i=~~t(n).closest("[data-role=choice]").attr("data-index");if(r.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER)for(var a=0,s=r.currentSelectedControl.getChildren().length;a<s;a++)r.dialogOptions.choices[a][i].text=n.value;else r.dialogOptions.choices[i].text=n.value;r.updateChoices(o,t,c)})).on("paste","[data-role=choice] > input[type=text][data-model-property=text]",(function(n){var i,s=n.target,l=[],u=~~t(s).closest("div[data-role=statement]").attr("data-index");try{var d=n.originalEvent||{},p=n.originalEvent.clipboardData||null;if(!p)return;i=p.getData("text/plain");var _=String(i||"").replace(/(^[\s]+|[\s]+$)/g,"");if(!(_.indexOf("\n")>-1))return;if(1===(l=_.split("\n")).length)return;d.preventDefault(),d.stopPropagation(),r.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER&&(h=h[0]);for(var m=0,f=l.length;m<f;m++){var E=e.createUniqueChoice({text:l[m],index:u+m+1},h),y=r.createChoiceElement(E);h.splice(E.index,0,E),t(y).insertAfter(t("div[data-role=choice][data-index=".concat(E.index-1,"]"))),h=r.reinitializeChoicesIndexes(h,t(a)),r.updateContainerAttributes(a)}r.updateChoices(o,t,c),r.makeChoicesInInspectorSortable(t,a,o,c)}catch(T){}})).on("click","[data-role=choice] div[data-role=remove]",(function(e){if(!(r.dialogOptions.choices.length<=1||r.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER&&r.dialogOptions.choices[0].length<=1)){i.getEngine().getLoader().execCommand("track-event","edt_inspector_choice_option_remove");var n=e.target,a=t(n).closest('[data-role="container"]'),s=t(n).closest("[data-role=choice]"),l=~~s.attr("data-index");if(r.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER)for(var u=0,d=r.dialogOptions.choices.length;u<d;u++)r.dialogOptions.choices[u].splice(l,1);else r.dialogOptions.choices.splice(l,1);r.dialogOptions.choices=r.reinitializeChoicesIndexes(r.dialogOptions.choices,t(a)),r.updateChoices(o,t,c),s.remove(),r.updateContainerAttributes(a.closest("div[data-role=secondary]")[0])}})).on("keydown","input",(function(n){if((n.keyCode||n.charCode)===d.a.KEY_ENTER&&null!==h[h.length-1].text&&""!==h[h.length-1].text){var s=n.target,l=~~t(s).parent().attr("data-index");if(h.length>e.MAX_VISIBLE_NUMBER_OF_CHOICES_IN_INSPECTOR_PANEL&&l===e.MAX_VISIBLE_NUMBER_OF_CHOICES_IN_INSPECTOR_PANEL&&t("a[data-role=edit-more-option][data-target=choices]").trigger("click"),l<e.MAX_VISIBLE_NUMBER_OF_CHOICES_IN_INSPECTOR_PANEL){var _=e.createUniqueChoice({text:p?i.getEngine().getI18n().translateText(p):u,index:h.length},h),g=r.createChoiceElement(_);h.splice(l+1,0,_),t(g).insertAfter(s.parentNode),h=r.reinitializeChoicesIndexes(h,t(a)),r.updateChoices(o,t,c),r.updateContainerAttributes(a),r.makeChoicesInInspectorSortable(t,a,o,c),t(g).find("input").focus().select()}}}))}));var _=r.getValidatedChoicesFromSet(r.dialogOptions.choices);r.dialogOptions.editorUserInterface.getEngine().getLoader().getCommandDispatcher().updateLayoutProperties(r.currentSelectedControl,_)}))}},{key:"createChoiceElement",value:function(e){var t=document.createElement("div");t.setAttribute("data-role","choice"),t.setAttribute("data-index",String(e.index)),t.classList.add("item__default-input");var n=document.createElement("input");n.setAttribute("type","text"),n.setAttribute("data-model-property","text"),n.setAttribute("data-role","secondary"),t.appendChild(n);var i=document.createElement("div");i.setAttribute("data-role","remove"),i.classList.add("choice-fields__input-action-btn"),t.appendChild(i);var r=document.createElement("div");return r.setAttribute("data-role","drag"),r.classList.add("choice-fields__input-action-btn"),t.appendChild(r),n.value=e.text,m.a.controlSupportsButtonChoices(this.currentSelectedControl.getTypeId())&&(t.classList.add("item__default-withImage","d-inline-flex"),t.append(this.createImageChoiceModalTriger(e))),t}},{key:"createImageChoiceModalTriger",value:function(e){var t=document.createElement("button");t.setAttribute("type","button"),t.classList.add("choiceInspector__btn","choiceInspector__btn--white","choiceInspector__btn--openModal","d-inline-flex"),t.dataset.dialogTitle="Edit choices",t.dataset.dialogTitleI18n="editorFields_editChoices",t.dataset.newChoiceText="New choice",t.dataset.newChoiceTextI18n="edt_text_new_choice";var n=document.createElement("i");return n.classList.add("i123-icon"),(null===e||void 0===e?void 0:e.image)?n.classList.add("i123-editicon"):n.classList.add("i123-image"),t.append(n),t}},{key:"isUniqueSetOfChoices",value:function(e){if(!e)return!0;for(var t=0,n=e.length;t<n;t++)for(var i=0;i<t;i++)if(e[t].text===e[i].text)return!1;return!0}},{key:"editChoices",value:function(){var e=this;this.dialogOptions.dialogTitle=this.dialogOptions.dialogTitle||"Edit choices",this.dialogOptions.newChoiceText=this.dialogOptions.newChoiceText||"New Choice",this.dialogOptions.itemType=this.dialogOptions.itemType||"CHOICE";var t=JSON.parse(JSON.stringify(this.dialogOptions.choices)),n=this.dialogOptions.editorUserInterface,i=this.dialogOptions.editorUserInterface.getEngine().getJQuery(),r=this.dialogOptions.editorUserInterface.getEngine().getResourceManager(),a=this.dialogOptions.editorUserInterface.getEngine().getI18n(),o=this.dialogOptions.editorUserInterface.getEngine().getLoader().getCommandDispatcher();return i.Deferred((function(s){if(!e.dialogOptions||"QUIZ_OPTIONS"!==e.dialogOptions.editingContext||e.userService.canUseQuizOptions()){var l="/modules/Typescript/Form/resources/edit-option-dialog.html",c=e.dialogOptions.choices,d=[],p=e.currentSelectedControl.getTypeId();p===g.a.CONTAINER_TYPE_LIKERT_WRAPPER&&(l="/modules/Typescript/Form/resources/edit-option-dialog-likert.html",d=e.generateStatementsForSalvageModel(),0!=e.dialogOptions.choices.length&&(c=e.dialogOptions.choices[0])),r.get(l).then((function(r){if(p!==g.a.CONTAINER_TYPE_LIKERT_WRAPPER)for(var l=0,_=c.length;l<_;l++){var E=c[l];E.isCorrect||(E.quizPoints=0),E.numberOfTimesThisOptionHasBeenChosen<0&&(E.numberOfTimesThisOptionHasBeenChosen=0)}var y,T=new f.a(r),v={choices:JSON.parse(JSON.stringify(c)),inputType:e.dialogOptions.defaultOptionInputType!==u.f.CHECKBOX,itemType:e.dialogOptions.itemType,editingContext:e.dialogOptions.editingContext,displayResetUsedChoicesOption:e.isResetButtonVisibleInEditingPanel(c),resetUsedColumnText:"Reset used choices",resetUsedColumnTextI18n:"edt_text_reset_used_choices",formTotalPointsText:"Form total points:",formTotalPointsTextI18n:"edt_text_form_total_points",formTotalPoints:m.a.getFormTotalPoints(e.dialogOptions.editorUserInterface.getEngine().getDocument()),useDifferentValuesPerStatement:e.dialogOptions.useDifferentValuesPerStatement,statements:d,disableDefaultValues:e.currentSelectedControl.hasProperty("choices.displayPlaceholderText")&&e.currentSelectedControl.getProperty("choices.displayPlaceholderText"),isImageChoiceSupported:m.a.controlSupportsButtonChoices(e.currentSelectedControl.getTypeId()),addButtonTextI18n:"edt_text_add_choices",addButtonText:"Add choices"};if((y=n.createDialog(e.dialogOptions.dialogTitle,[{type:h.f.CANCEL,callback:e.onCancelButtonPress.bind(e,t,s)},{type:h.f.SAVE,callback:e.onSaveButtonPress.bind(e,c,n,s)}],{width:"600px",height:"600px"})).body.setAttribute("data-dialog-role","edit-option"),e.dialogOptions&&"CONFIGURE_VALUES"===e.dialogOptions.editingContext){var O=document.createElement("div"),b=document.createElement("div"),C=document.createElement("div");O.setAttribute("data-role","set-all-button-container"),b.setAttribute("data-role","set-all-button"),C.setAttribute("data-i18n-text","edt_set_to_all"),C.innerText=a.translateText("edt_set_to_all"),b.appendChild(C),O.appendChild(b),y.titlebody.appendChild(O)}e.renderDialogBodyContent(y,T,v,a,o,i,c,n);for(var I=0,R=0,P=c.length;R<P;R++)if(c[R].isCorrect){I=c[R].quizPoints;break}var N=m.a.getFormTotalPoints(e.dialogOptions.editorUserInterface.getEngine().getDocument())-I;e.attachDialogEvents(i,y,n,N,c,v,T,a,o)})).fail((function(e){s.reject(e)}))}else o.triggerFeatureModal(y.a.QUIZ_CONTROL_OPTION)})).promise()}},{key:"onSaveButtonPress",value:function(e,t,n,i,r){this.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER||this.isUniqueSetOfChoices(e)?(r.close(),n.resolve(this.dialogOptions.choices)):t.alert("Error Saving Choices","You are not allowed to have 2 or more options with the same value")}},{key:"onCancelButtonPress",value:function(e,t,n,i){this.dialogOptions.choices=e,i.close(),t.reject()}},{key:"generateStatementsForSalvageModel",value:function(){for(var e=[],t=this.currentSelectedControl.getChildren(),n=0,i=t.length;n<i;n++)e.push({choices:JSON.parse(JSON.stringify(this.dialogOptions.choices[n])),text:t[n].getProperty("label.labelText"),index:n});return e}},{key:"renderDialogBodyContent",value:function(e,t,n,i,r,a,o,s){var l=this;e.body.innerHTML=t.parse(n),i.translateDOMNode(e.body),r.addPerfectScrollbar(e.body),a(e.body).find("table tbody tr").each((function(e,t){l.updateNumberOfChoicesLeft(a(t))})),("PAYMENTS_VALUES"===n.editingContext&&(this.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER&&this.currentSelectedControl.hasProperty("options.useDifferentValuesPerStatement")&&!this.currentSelectedControl.getProperty("options.useDifferentValuesPerStatement")||this.currentSelectedControl.getTypeId()!==g.a.CONTAINER_TYPE_LIKERT_WRAPPER)||"PAYMENTS_VALUES"!==n.editingContext)&&this.makeChoicesInEditPanelSortable(a,e.body),s.upgrade(e.body)}},{key:"attachDialogEvents",value:function(e,t,n,i,r,a,o,s,l){var c=this;e(t.body).on("keydown","input[name=payments-values]",(function(e){var t=e.target;t.setAttribute("data-temp-value",t.value)})).on("input","input[name=payments-values]",(function(e){var t=e.target;t.value.length&&!t.value.match(/^([0-9]+(\.[0-9]{1,2}|\.)?|\.[0-9]{1,2})$/)&&(t.value=t.getAttribute("data-temp-value"))})).on("keyup","input[name=payments-values]",(function(e){var t=e.target;setTimeout((function(){t.removeAttribute("data-temp-value")}),0)})).on("blur","input[name=payments-values]",(function(e){var t=e.target;if(t.value.indexOf(".")>-1){for(var n=t.value.split("."),i=!n[0].length||n[1].length<2;n[1].length<2;)n[1]+="0";i&&(t.value="".concat(n[0]||"0",".").concat(n[1]))}})).on("click","a[data-role=add-option]",(function(){var i=e(t.body).find('tbody [data-role="choice"]:last-child [data-role="choice-name"] input')[0],r=c.insertNewChoice(t.body,c.dialogOptions.newChoiceText,i,e);c.makeChoicesInEditPanelSortable(e,t.body),n.upgrade(r)})).on("input","td[data-role=choice-name] input[type=text]",(function(t){var n=t.target,i=n.value,r=e(n).closest("tr"),a=~~r.attr("data-statement-index"),o=~~r.attr("data-index"),s=c.dialogOptions.choices[o];if(c.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER){s=c.dialogOptions.choices[a][o];for(var l=0,u=c.dialogOptions.choices.length;l<u;l++)c.dialogOptions.choices[l][o].text=i}s.text=i})).on("click","tr[data-role=choice] td[data-role=choice-name] div[data-role=remove]",(function(n){if(!(c.dialogOptions.choices.length<=1||c.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER&&c.dialogOptions.choices[0].length<=1)){var r=n.target,a=e(r).closest("[data-role=choice]"),o=a.parent(),s=~~a.attr("data-index");if(a.remove(),c.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER)for(var l=0,u=c.dialogOptions.choices.length;l<u;l++){c.dialogOptions.choices[l].splice(s,1);for(var d=0,p=c.dialogOptions.choices[l].length;d<p;d++)c.dialogOptions.choices[l][d].isCorrect&&c.updateFormTotalPoints(i,t.body,c.dialogOptions.choices[l][d].quizPoints,e),o.find('[data-role="choice"]').get(d).setAttribute("data-index",String(d))}else{c.dialogOptions.choices.splice(s,1);for(var h=0,_=c.dialogOptions.choices.length;h<_;h++)c.dialogOptions.choices[h].isCorrect&&c.updateFormTotalPoints(i,t.body,c.dialogOptions.choices[h].quizPoints,e),o.find('[data-role="choice"]').get(h).setAttribute("data-index",String(h))}c.dialogOptions.choices=c.reinitializeChoicesIndexes(c.dialogOptions.choices)}})).on("click","td[data-role=is-default-choice] input",(function(t){var n=t.target,i=~~e(n).closest("tr").attr("data-index");if(c.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER)for(var r=0,a=c.dialogOptions.choices.length;r<a;r++)for(var o=0,s=c.dialogOptions.choices[r].length;o<s;o++){var l=!1;o!==i||c.dialogOptions.choices[r][o].isDefault||(l=!0),o===i&&(n.checked=l),c.dialogOptions.choices[r][o].isDefault=l}else for(var d=0,p=c.dialogOptions.choices.length;d<p;d++){var h=!1;(c.dialogOptions.defaultOptionInputType===u.f.CHECKBOX&&!0===c.dialogOptions.choices[d].isDefault&&d!==i||d===i&&!c.dialogOptions.choices[d].isDefault)&&(h=!0),d===i&&(n.checked=h),c.dialogOptions.choices[d].isDefault=h}})).on("keydown","input[type=text][data-role=choice-name]",(function(n){if(r=c.dialogOptions.choices[0].length>0?c.dialogOptions.choices[0]:c.dialogOptions.choices,(n.keyCode||n.charCode)===d.a.KEY_ENTER&&null!==r[r.length-1].text&&""!==r[r.length-1].text){var i=n.target;c.insertNewChoice(t.body,c.dialogOptions.newChoiceText||"New Choice",i,e),c.makeChoicesInEditPanelSortable(e,t.body)}})).on("paste","td[data-role=choice-name] input[type=text]",(function(n){var i,r=[];try{var a=n.target,o=n.originalEvent||{},s=n.originalEvent.clipboardData||null;if(!s)return;i=s.getData("text/plain");var l=String(i||"").replace(/(^[\s]+|[\s]+$)/g,"");if(!(l.indexOf("\n")>-1))return;r=l.split("\n"),o.preventDefault(),o.stopPropagation();for(var u=0,d=r.length;u<d;u++)c.insertNewChoice(t.body,r[u],a,e);c.makeChoicesInEditPanelSortable(e,t.body)}catch(p){return}})).on("input","td[data-role=total-number-of-choices] input[type=number]",(function(t){if(!(c.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER||c.dialogOptions.choices[0].length>0)){var n=t.target,i=~~e(n).closest("tr").attr("data-index");c.dialogOptions.choices[i].numberOfTimesThisOptionCanBeChosen=~~n.value,e(n).closest("tr").each((function(t,n){c.updateNumberOfChoicesLeft(e(n))}))}})).on("click","div[data-role=apply-all-button]",(function(){var n=e(t.body).find("input[type=number][name=apply-all-default-number-of-choices]").get(0),i=parseInt(n.value);if(i>=-1){e(t.body).find("table tbody tr").each((function(t,n){e(n).find("td[data-role=total-number-of-choices] input[type=number]").val(i),c.updateNumberOfChoicesLeft(e(n))}));for(var r=0;r<c.dialogOptions.choices.length;r++)c.dialogOptions.choices[r].numberOfTimesThisOptionCanBeChosen=i}})).on("click","a[data-role=reset-used-column]",(function(){if(!(c.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER||c.dialogOptions.choices[0].length>0)){for(var n=0,i=(r=c.dialogOptions.choices).length;n<i;n++)r[n].numberOfTimesThisOptionHasBeenChosen=-1;e(t.body).find("table tbody tr").each((function(t,n){var i=~~e(n).attr("data-index");e(n).find("td[data-role=used-number-of-choices] div span").text("0"),e(n).find("td[data-role=number-of-choices-left] div span").text(String(r[i].numberOfTimesThisOptionCanBeChosen||"0"))}))}})).on("click","td[data-role=quiz-correct] input",(function(n){var r=n.target,a=~~e(r).closest("tr").attr("data-index"),o=e(r).closest("tr").find("input[type=number][name=quiz-points]"),s=o.get(0);if(c.onCorrectChoiceCheckedStateModified(r,c.dialogOptions,a,s,!0,e),r.checked)setTimeout((function(){o.focus().select()}),10);else{var l=c.getQuizValue(s,e);e(t.body).find("div[data-role=form-total-points] span[data-role=form-total-points]").text(i+l)}})).on("input","td[data-role=quiz-points] input[type=number]",(function(n){if(!(c.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER||c.dialogOptions.choices[0].length>0)){r=c.dialogOptions.choices;var a=n.target,o=~~a.value;c.setQuizValue(t.body,o,e);for(var s=0,l=r.length;s<l;s++)r[s].isCorrect&&(r[s].quizPoints=o);c.updateFormTotalPoints(i,t.body,~~a.value,e)}})).on("click focus","td[data-role=quiz-points] input",(function(n){if(!(c.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER||c.dialogOptions.choices[0].length>0)){r=c.dialogOptions.choices;var a=n.target,o=e(a).closest("tr[data-role=choice]").find("td[data-role=quiz-correct] input").get(0),s=~~e(a).closest("tr").attr("data-index");o.checked=!0,c.onCorrectChoiceCheckedStateModified(o,c.dialogOptions,s,a,!1,e);for(var l=0,u=r.length;l<u;l++)r[l].isCorrect&&(r[l].quizPoints=~~a.value);c.updateFormTotalPoints(i,t.body,~~a.value,e)}})).on("input","td[data-role=payments-values] input[type=text]",(function(t){var n=t.target,i=parseFloat(n.value),r=e(n).closest("tr"),a=~~r.attr("data-statement-index"),o=~~r.attr("data-index"),s=c.dialogOptions.choices[o];c.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER&&(s=c.dialogOptions.choices[a][o]),!isNaN(i)&&i>=0?s.paymentsValue=i:s.paymentsValue=null})).on("change","input#use-different-values-per-statement",(function(i){var u=i.target,d=e(t.body).find("div[data-editing-context][data-use-different-values]");c.dialogOptions.useDifferentValuesPerStatement=u.checked,d.attr("data-use-different-values",String(u.checked)),a.useDifferentValuesPerStatement=c.dialogOptions.useDifferentValuesPerStatement,a.choices=JSON.parse(JSON.stringify(c.dialogOptions.choices[0])),a.statements=JSON.parse(JSON.stringify(c.generateStatementsForSalvageModel())),c.renderDialogBodyContent(t,o,a,s,l,e,r,n),(c.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER&&!c.dialogOptions.useDifferentValuesPerStatement||c.currentSelectedControl.getTypeId()!==g.a.CONTAINER_TYPE_LIKERT_WRAPPER)&&c.makeChoicesInEditPanelSortable(e,t.body)})).on("change","input.image-upload-trigger",(function(e){var n=e.currentTarget,i=parseInt(n.getAttribute("data-index")),r=n.files[0],a=c.dialogOptions.editorUserInterface.getEngine().getUploadsService().createUpload(r).withControlId(c.currentSelectedControl.getId()).withUploaderInstanceIndex(1).setIsImageChoice(!0);a.on("success",(function(){var e=a.getStoredFileURLFromCloud();n.value=null,c.addImageToChoice(i,e,t)})),a.on("error",(function(e){n.value=null,c.showImageContainerError(i,t,e.toString()),setTimeout((function(){return c.hideImageContainerError(i,t)}),5e3)})),a.upload()})).on("click","button.edit-choices-button__remove",(function(e){var n=parseInt(e.currentTarget.getAttribute("data-index"));c.removeImageFromChoice(n,t)})).on("click","button.edit-choices-button__replace",(function(e){var n=parseInt(e.currentTarget.getAttribute("data-index"));c.triggerImageUploadSelector(n,t)})).on("click","button.edit-choices-button__upload",(function(e){var n=parseInt(e.currentTarget.getAttribute("data-index"));c.triggerImageUploadSelector(n,t)})).on("click","button.edit-choices-button__open-actions",(function(e){var n=parseInt(e.currentTarget.getAttribute("data-index"));c.openImageChoiceActions(n,t)})),e(t.titlebody).on("click","div[data-role=set-all-button-container]",(function(){var n=e(t.body).find("div[data-role=apply-all-holder]");"none"===n.css("display")?n.css("display","inline-flex"):n.hide()}))}},{key:"openImageChoiceActions",value:function(e,t){t.body.querySelector('.choice-image-container[data-index="'.concat(e,'"]')).classList.remove("hidden")}},{key:"triggerImageUploadSelector",value:function(e,t){this.hideImageContainerError(e,t);var n=t.body.querySelector('input.image-upload-trigger[data-index="'.concat(e,'"]'));$(n).click()}},{key:"removeImageFromChoice",value:function(e,t){var n=t.body.querySelector('.choice-image-container[data-index="'.concat(e,'"]')),i=n.querySelector(".choice-image-container__preview"),r=n.querySelector(".choice-image-container__actions"),a=t.body.querySelector('button.edit-choices-button__open-actions[data-index="'.concat(e,'"]'));i.innerHTML=null,i.classList.remove("has-image"),n.classList.add("hidden"),r.classList.remove("has-image"),a.removeAttribute("disabled"),this.dialogOptions.choices[e].image=null}},{key:"addImageToChoice",value:function(e,t,n){var i=this.dialogOptions.choices[e];i.image=t;var r=n.body.querySelector('.choice-image-container[data-index="'.concat(e,'"]')),a=r.querySelector(".choice-image-container__preview"),o=r.querySelector(".choice-image-container__actions"),s=n.body.querySelector('button.edit-choices-button__open-actions[data-index="'.concat(e,'"]')),l=document.createElement("img");l.src=t,l.alt=i.text,a.classList.add("has-image"),a.innerHTML=null,a.appendChild(l),r.classList.remove("hidden"),o.classList.add("has-image"),s.setAttribute("disabled","disabled")}},{key:"updateControlChoicesAndDOM",value:function(e,t,n){t=this.getValidatedChoicesFromSet(t);var i=document.getElementById("item");if(i.getAttribute("data-target-element")===e.getHash())for(var r=i.querySelectorAll("input[type=hidden][data-plugin=text-choice-interface]"),a=t.length?JSON.stringify(t):"null",o=0,s=r.length;o<s;o++)n(r[o]).val(a).trigger("reload");else{for(var l=!1,c=[],u=0,d=t.length;u<d;u++)"undefined"!==typeof t[u].paymentsValue&&null!==t[u].paymentsValue?(l=!0,c.push(t[u].paymentsValue)):c.push(null);e.setProperty("choices.values",t),e.setProperty("payments.value",l?c.map((function(e){return Number(e)})):null),e.getForm().getEngine().getLoader().getCommandDispatcher().reloadVisiblePanel()}}},{key:"updateFormTotalPoints",value:function(e,t,n,i){var r=e+~~n;i(t).find("div[data-role=form-total-points] span[data-role=form-total-points]").text(r)}},{key:"getQuizValue",value:function(e,t){var n=0;return t(e).closest("table > tbody").find("input[type=number][name=quiz-points]").each((function(){if(0!=this.value)return n=this.value})),~~n}},{key:"setQuizValue",value:function(e,t,n){n(e).find("input[type=number][name=quiz-points]").each((function(){n(this).closest("tr").find("[name=quiz-correct]").is(":checked")&&(this.value=t)}))}},{key:"resetAllUncorrectChoicesPointsToZero",value:function(e,t,n,i){i(e).closest("table > tbody").find("input[type=number][name=quiz-points]").each((function(){if(this!==t&&!i(this).closest("tr").find("[name=quiz-correct]").is(":checked")){n.choices=n.choices;var e=~~i(this).closest("tr").attr("data-index");this.value="0",n.choices[e].isCorrect=!1,n.choices[e].quizPoints=0}}))}},{key:"insertNewChoice",value:function(t,n,i,r){var a,o="edit-option"===t.getAttribute("data-dialog-role"),s=this.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER?JSON.parse(JSON.stringify(this.dialogOptions.choices[0])):JSON.parse(JSON.stringify(this.dialogOptions.choices)),l=r(i).closest("[data-role=choice]").get(0),c=e.createUniqueChoice({text:n,isDefault:!1,index:1+~~l.getAttribute("data-index"),numberOfTimesThisOptionCanBeChosen:null,numberOfTimesThisOptionHasBeenChosen:null,isCorrect:!1,quizPoints:0,paymentsValue:null},s);s.push(c);var u=r(a=l.cloneNode(!0)).find('td[data-role="is-default-choice"] input[name="default-option"]').get(0);u&&(u.removeAttribute("checked"),u.checked=!1),r(a).insertAfter(l);var d=r(i).closest("div[data-dialog-role=edit-option]");if(d.scrollTop(d.prop("scrollHeight")),this.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER){for(var p=0,h=this.currentSelectedControl.getChildren().length;p<h;p++)if(this.dialogOptions.choices[p].push(JSON.parse(JSON.stringify(c))),!this.currentSelectedControl.hasProperty("options.useDifferentValuesPerStatement")||!this.currentSelectedControl.getProperty("options.useDifferentValuesPerStatement"))for(var _=0,m=this.dialogOptions.choices[p].length;_<m;_++)this.dialogOptions.choices[p][_].paymentsValue=this.dialogOptions.choices[0][_].paymentsValue}else this.dialogOptions.choices=JSON.parse(JSON.stringify(s));return this.dialogOptions.choices=o?this.reinitializeChoicesIndexes(this.dialogOptions.choices):this.reinitializeChoicesIndexes(this.dialogOptions.choices,r(t)),r(a).find("td[data-role=choice-name] input[type=text]").val(c.text).focus().select(),r(a).find("td[data-role=total-number-of-choices] input[type=number]").val(c.numberOfTimesThisOptionCanBeChosen),r(a).find("[data-role=used-number-of-choices] > span").text("0"),r(a).find("[data-role=number-of-choices-left] > span").text("0"),r(a).find("td[data-role=quiz-points] input[type=number]").val(c.quizPoints),r(a).find("td[data-role=payments-values] input[type=number]").val(String(c.paymentsValue||"")),r(a).find("td[data-role=payments-values] input[name=payments-values]").val(""),a.classList.contains("choice-with-image")&&(r(a).find("td[data-role=choice-name] .choice-image-container").addClass("hidden").find(".choice-image-container__preview").removeClass("has-image").text(""),r(a).find("button.edit-choices-button__open-actions").removeAttr("disabled"),r(a).find(".choice-image-container__actions").removeClass("has-image")),this.initializeNewlyInsertedRow(a,c,r),this.dialogOptions.container&&this.updateContainerAttributes(this.dialogOptions.container),a}},{key:"onCorrectChoiceCheckedStateModified",value:function(e,t,n,i,r,a){t.choices=t.choices,this.resetAllUncorrectChoicesPointsToZero(e,i,t,a);var o=this.getQuizValue(e,a);if(o>0&&a(i).val(o),r&&t.choices[n].isCorrect&&(e.checked=!1,i.value="0"),t.choices[n].isCorrect=e.checked,t.choices[n].quizPoints=~~i.value,t.defaultOptionInputType!==u.f.CHECKBOX)for(var s=0,l=t.choices.length;s<l;s++)s!=n&&(t.choices[s].isCorrect=!1)}},{key:"updateNumberOfChoicesLeft",value:function(e){null===e.find("[data-role=used-number-of-choices] > span").text()&&e.find("[data-role=used-number-of-choices] > span").text("0");var t=~~e.find("[name=total-number-of-choices]").val()-~~e.find("[data-role=used-number-of-choices] > span").text();e.find("[data-role=number-of-choices-left] > span").text(String(Math.max(0,t)))}},{key:"initializeNewlyInsertedRow",value:function(e,t,n){n(e).attr("data-index",(~~t.index).toString()).find("td[data-role=is-default-choice]").each((function(){n(this).find("input").each((function(){this.checked=t.isDefault,this.setAttribute("id","choice-editor-".concat((~~t.index).toString())),this.setAttribute("index",(~~t.index).toString())})),n(this).find("label").each((function(){this.setAttribute("for","choice-editor-".concat((~~t.index).toString()))}))})),n(e).find("td[data-role=quiz-correct]").each((function(){n(this).find("input").each((function(){this.checked=t.isCorrect,this.setAttribute("id","quiz-editor-".concat((~~t.index).toString())),this.setAttribute("index",(~~t.index).toString())})),n(this).find("label").each((function(){this.setAttribute("for","quiz-editor-".concat((~~t.index).toString()))}))})),m.a.controlSupportsButtonChoices(this.currentSelectedControl.getTypeId())&&(n(e).find("button.choiceInspector__btn").each((function(e,n){n.dataset.index=(~~t.index).toString()})),n(e).find("div.choice-image-container").each((function(e,n){n.dataset.index=(~~t.index).toString()})),n(e).find("input.image-upload-trigger").each((function(e,n){n.dataset.index=(~~t.index).toString()})))}},{key:"updateContainerAttributes",value:function(t){var n=this.dialogOptions.choices;this.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER&&(n=this.dialogOptions.choices[0]),t.setAttribute("data-truncate-options",String(~~(n.length>e.MAX_VISIBLE_NUMBER_OF_CHOICES_IN_INSPECTOR_PANEL)))}},{key:"reinitializeChoicesIndexes",value:function(e,t){return t?(t.find("[data-role=choice]").remove(),this.resetChoicesIndex(e,t)):this.resetChoicesIndex(e)}},{key:"updateChoices",value:function(e,t,n){var i=this.getValidatedChoicesFromSet(this.dialogOptions.choices);e.value=i.length?JSON.stringify(i):"null",t(e).trigger("input"),n&&t(n).val(e.value).trigger("reload"),this.dialogOptions.editorUserInterface.getEngine().getLoader().getCommandDispatcher().updateLayoutProperties(this.currentSelectedControl,i)}},{key:"getValidatedChoicesFromSet",value:function(e){for(var t,n=[],i=0,r=e.length;i<r;i++)if(Array.isArray(e[i])){var a=i;n[i]=this.getValidatedChoicesFromSet(e[a])}else{var o=e[i];t={text:window.removeDangerousHtmlAttributes(o.text)},void 0!==o.isOther&&(t.isOther=o.isOther),void 0!==o.isCorrect&&(t.isCorrect=o.isCorrect),void 0!==o.isDefault&&(t.isDefault=o.isDefault),void 0!==o.numberOfTimesThisOptionCanBeChosen&&(t.numberOfTimesThisOptionCanBeChosen=o.numberOfTimesThisOptionCanBeChosen),void 0!==o.numberOfTimesThisOptionHasBeenChosen&&(t.numberOfTimesThisOptionHasBeenChosen=o.numberOfTimesThisOptionHasBeenChosen),void 0!==o.quizPoints&&(t.quizPoints=o.quizPoints),void 0!==o.paymentsValue&&(t.paymentsValue=o.paymentsValue),o.image&&(t.image=o.image),n.push(t)}return n}},{key:"isResetButtonVisibleInEditingPanel",value:function(e){for(var t=0,n=e.length;t<n;t++)if(null!==e[t].numberOfTimesThisOptionHasBeenChosen&&e[t].numberOfTimesThisOptionHasBeenChosen>0)return!0;return!1}},{key:"makeChoicesInInspectorSortable",value:function(e,t,n,i){var r=this,a=p.a.create((function(){r.reorderOptionsInInspector(e,t,n,i)}),100);c.a.makeSortable(e,t,"div[data-role=choice] div[data-role=drag]","div[data-role=choice]",(function(e,t,n){a()}),(function(e,t,n){var i=e.parentNode;n===u.yb.BEFORE?i.insertBefore(e,t):i.insertBefore(e,t.nextSibling),a()}))}},{key:"makeChoicesInEditPanelSortable",value:function(e,t){var n=this,i=p.a.create((function(){n.reorderOptionsInEditPanel(e,t)}),100);c.a.makeSortable(e,t,"table[data-role=edit-option] tr[data-role=choice] td[data-role=choice-name] div[data-role=drag]","table[data-role=edit-option] tr[data-role=choice]",(function(e,t,n){i()}),(function(e,t,n){var r=e.parentNode;n===u.yb.BEFORE?r.insertBefore(e,t):r.insertBefore(e,t.nextSibling),i()}))}},{key:"onOptionsReorderedByDragAndDrop",value:function(e,t,n){var i=this,r=this.dialogOptions.choices,a=!1;if(e(t).find(n).each((function(e,t){var n=~~t.getAttribute("data-index");if(e!==n){if(a=!0,i.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER)for(var o=0,s=i.dialogOptions.choices.length;o<s;o++)(r=i.dialogOptions.choices[o])[n].index=e;else r[n].index=e;t.setAttribute("data-index",String(e))}})),a)if(this.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER)for(var o=0,s=this.dialogOptions.choices.length;o<s;o++)(r=this.dialogOptions.choices[o]).sort((function(e,t){return e.index-t.index}));else r.sort((function(e,t){return e.index-t.index}))}},{key:"reorderOptionsInInspector",value:function(e,t,n,i){this.onOptionsReorderedByDragAndDrop(e,t,"[data-role=choice]"),this.updateChoices(n,e,i)}},{key:"reorderOptionsInEditPanel",value:function(e,t){var n=this,i="[data-role=choice]";this.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER&&(i='div[data-editing-context="PAYMENTS_VALUES"][data-use-different-values="true"] table[data-role="edit-option"] tbody[data-role="multi-statement-choices"] '.concat(i,', div[data-editing-context="PAYMENTS_VALUES"][data-use-different-values="false"] table[data-role="edit-option"] tbody[data-role="single-statement-choices"] ').concat(i,', div:not([data-editing-context="PAYMENTS_VALUES"]) table[data-role="edit-option"] tbody[data-role="single-statement-choices"] ').concat(i)),this.onOptionsReorderedByDragAndDrop(e,t,i),e(t).find(i).each((function(t,i){var r=n.dialogOptions.choices;n.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER&&(r=n.dialogOptions.choices[0]),n.initializeNewlyInsertedRow(i,r[t],e)}))}},{key:"resetChoicesIndex",value:function(e,t){if(this.currentSelectedControl.getTypeId()===g.a.CONTAINER_TYPE_LIKERT_WRAPPER)for(var n=0,i=e.length;n<i;n++)for(var r=0,a=e[n].length;r<a;r++)e[n][r].index=r,0===n&&t&&t.append(this.createChoiceElement(e[n][r]));else for(var o=0,s=e.length;o<s;o++)e[o].index=o,t&&t.append(this.createChoiceElement(e[o]));return e}},{key:"setDialogOptions",value:function(e){e.choices=this.resetChoicesIndex(e.choices),this.dialogOptions=e}},{key:"setCurrentSelectedControl",value:function(e,t){if(void 0===t){var n=e.getLoader().getSelection().getItems();0!==n.length&&(this.currentSelectedControl=n[0])}else this.currentSelectedControl=t}},{key:"hideImageContainerError",value:function(e,t){var n=t.body.querySelector('.choice-image-container[data-index="'.concat(e,'"]')),i=null===n||void 0===n?void 0:n.querySelector(".choice-image-container__error");i&&i.innerText&&(i.innerText="")}},{key:"showImageContainerError",value:function(e,t,n){var i=t.body.querySelector('.choice-image-container[data-index="'.concat(e,'"]')),r=null===i||void 0===i?void 0:i.querySelector(".choice-image-container__error");r&&(r.innerText=n)}}],[{key:"createUniqueChoice",value:function(e,t){var n,i,r=0,a=e.text;if(!t||!t.length)return e;do{n=!0,i=0===r?a:"".concat(a," (").concat(r,")");for(var o=0,s=t.length;o<s;o++)if(t[o].text===i){n=!1,r++;break}}while(!n);return e.text=i,e}}]),e}());l()(T,"NAME","ChoicesEditorInspectorPlugin"),l()(T,"MAX_VISIBLE_NUMBER_OF_CHOICES_IN_INSPECTOR_PANEL",4)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i,r=n(5),a=n.n(r),o=n(6),s=n.n(o),l=n(3),c=n.n(l),u=n(17),d=n.n(u),p=n(7),h=n.n(p),_=n(8),g=n.n(_),m=n(4),f=n.n(m),E=n(0),y=n.n(E),T=n(1),v=n(35),O=n(34),b=n(155),C=n(30),I=n(2),R=n(37),P=n(23),N=n(96);function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return g()(this,n)}}!function(e){e.NO_API_KEY="no_api_key",e.WRONG_API_KEY="wrong_api_key",e.OTHER_ERROR="other_error"}(i||(i={}));var S=function(e){h()(n,e);var t=A(n);function n(e,i){var r;a()(this,n),r=t.call(this,e,i),y()(c()(r),"isGoogleMapsJavascriptAPILoaded",!1),y()(c()(r),"mapRendererNode",void 0),y()(c()(r),"mapOverlay",void 0),y()(c()(r),"mapSearchInput",void 0),y()(c()(r),"isMapSearchDivSet",void 0),y()(c()(r),"map",void 0),y()(c()(r),"marker",void 0),y()(c()(r),"geocoder",void 0),y()(c()(r),"updateMarkerPositionInThrottledMode",void 0),y()(c()(r),"updateMapSizeDebounced",b.a.create((function(){var e=r.labelDOMNode.offsetHeight,t=r.instructionsDOMNode.offsetHeight,i=r.errorDOMNode.offsetHeight,a=null===r.getHeight()?n.DEFAULT_MAP_HEIGHT:r.getHeight(),o=a,s=r.getForm().getEngine().getTheme(),l=~~parseInt(s.getMergedProperties().container.padding.vertical),c=~~parseInt(s.getMergedProperties().label.padding.bottom);R.a.LABEL_PLACEMENT_TOP_RENDERERS.indexOf(r.getRendererType())>-1&&r.getVisibilityMode()!==T.s.REMOVED&&(o-=e,o-=t,o-=i,o-=c),o-=2*l,r.mapRendererNode.style.height="".concat(o,"px"),r.setProperty("configuration.mapHeight",a-5),window.google&&window.google.maps&&r.map&&google.maps.event.trigger(r.map,"resize")}),200));var o=r.getHash();if(r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","googlemap-".concat(o,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","googlemap-".concat(o,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","googlemap-".concat(o,"-instr-acc")),r.mapRendererNode=document.createElement("div"),r.mapRendererNode.setAttribute("data-role","map-canvas"),r.mapRendererNode.tabIndex=null,r.mapOverlay=document.createElement("div"),r.mapOverlay.setAttribute("data-role","map-overlay"),r.getForm().getEngine().getLoader().getLoaderType()===T.B.EDIT){var s=document.createElement("div");s.setAttribute("data-role","map-overlay-text");var l=document.createElement("span");l.setAttribute("data-i18n-text","textdef_250"),l.textContent="Add your Google Maps API Key to use this field",s.appendChild(l),r.mapOverlay.appendChild(s)}return r.mapSearchInput=document.createElement("input"),r.mapSearchInput.setAttribute("type","text"),r.mapSearchInput.setAttribute("data-role","i123-input"),r.mapSearchInput.setAttribute("class","controls"),r.mapSearchInput.setAttribute("data-no-theme",""),r.mapSearchInput.placeholder="Search Address",r.rootNode.setAttribute("aria-labelledby","googlemap-".concat(o,"-acc ")+"googlemap-".concat(o,"-error-acc ")+"googlemap-".concat(o,"-instr-acc")),r.updateAccessibilityTabIndexes(),r.updateMarkerPositionInThrottledMode=O.a.create((function(){r.updateMarkerPosition()}),1500),r}return s()(n,[{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.mapRendererNode,width:T.I.FULL}]}]}},{key:"getTypeId",value:function(){return I.a.CONTROL_TYPE_MAP}},{key:"getElementName",value:function(){return"Map"}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"float[]",optional:!0};default:return null}}},{key:"setRendererType",value:function(e){d()(f()(n.prototype),"setRendererType",this).call(this,e),this.updateMapSize()}},{key:"onCreated",value:function(){var e=this;this.updateMapSize(),this.updateLabelText(),this.updateInstructionsText(),this.updateErrorsText(),this.updateShowInstructionsOnClick(),this.synchronizeValue(),this.updateApiKey(),this.initializeMapCanvas(),this.initDOMEvents(),setTimeout((function(){e.initAddressSync()}),0)}},{key:"updateApiKey",value:function(){this.getProperty("configuration.apiKey")?n.GOOGLE_MAPS_EMBED_KEY=this.getProperty("configuration.apiKey"):n.GOOGLE_MAPS_EMBED_KEY="",n.theOnlyOneGoogleMapsAPILoadRequestPromise=void 0,this.isGoogleMapsJavascriptAPILoaded=!1,window.google=void 0}},{key:"initAddressSync",value:function(){var e=this,t=this.getProperty("synchronize.withControlId");try{if(this.getForm().getEngine().getLoader().getLoaderType()===T.B.VIEW&&null!==t){var n=this.getForm().getElementById(t);n&&(setTimeout((function(){n.setMapSync(!0)}),1e3),n.setSyncronizeCallback((function(){e.geocoder.geocode({address:e.parseUserAddress(n)},(function(t,n){e.showAddressOnMap(n,t)}))})))}}catch(i){console.warn("Failed to synchronize map coordinates with control #".concat(t)),console.error(i)}}},{key:"parseUserAddress",value:function(e){var t,n=e.getValue();return null!==n.address1&&(t=n.address1),null!==n.address2&&(t+=" ".concat(n.address2)),null!==n.city&&(t+=" ".concat(n.city)),null!==n.zone&&(t+=" ".concat(n.zone)),null!==n.zipCode&&(t+=" ".concat(n.zipCode)),null!==n.country&&(t+=" ".concat(n.country)),t}},{key:"initializeMapCanvas",value:function(){var e=this;this.whenGoogleMapsAPIIsLoaded().then((function(){window.google?(e.map=new google.maps.Map(e.mapRendererNode,{center:{lat:-34.397,lng:150.644}}),e.marker=void 0,e.geocoder=new google.maps.Geocoder,e.updateMapZoomSetting(),e.updateMapInteractiveSetting(),e.updateMarkerPosition(),e.updateMapSize()):e.mapRendererNode.innerHTML=""})).fail((function(){e.mapRendererNode.appendChild(e.mapOverlay),e.updateMapSize()}))}},{key:"updateMapZoomSetting",value:function(){var e=~~this.getProperty("configuration.initialZoom")||15;e<n.GOOGLE_MAPS_MIN_ZOOM&&(e=n.GOOGLE_MAPS_MIN_ZOOM),e>n.GOOGLE_MAPS_MAX_ZOOM&&(e=n.GOOGLE_MAPS_MAX_ZOOM),this.map.setZoom(e)}},{key:"updateMapInteractiveSetting",value:function(){var e=this,t=!!this.getProperty("configuration.isInteractive"),i=~~this.getProperty("configuration.initialZoom")||15;if(i<n.GOOGLE_MAPS_MIN_ZOOM&&(i=n.GOOGLE_MAPS_MIN_ZOOM),i>n.GOOGLE_MAPS_MAX_ZOOM&&(i=n.GOOGLE_MAPS_MAX_ZOOM),t){this.map.setOptions({zoomControl:!0,panControl:!0,rotateControl:!0,minZoom:n.GOOGLE_MAPS_MIN_ZOOM,mazZoom:n.GOOGLE_MAPS_MAX_ZOOM,zoom:i,streetViewControl:!0,mapTypeControl:!0,fullscreenControl:!0,gestureHandling:"auto",keyboardShortcuts:!0,scrollwheel:!0}),this.marker&&this.marker.setOptions({draggable:!0});var r=document.createElement("div");r.appendChild(this.mapSearchInput),""===v.a.meetsRequirements("* * mobile * *")&&(this.mapSearchInput.oninput=function(){e.isMapSearchDivSet||setTimeout((function(){for(var t=document.body.getElementsByClassName("pac-container"),n=t.length,i=0;i<n;i++)if("none"!==t[i].style.display){r.appendChild(t[i]),e.isMapSearchDivSet=!0;break}}),300)});var a=new google.maps.places.SearchBox(this.mapSearchInput);this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(r),this.map.addListener("bounds_changed",(function(){a.setBounds(e.map.getBounds())})),a.addListener("places_changed",(function(){var t=a.getPlaces();0!=t.length&&t[0].geometry&&(e.marker?e.marker.position=t[0].geometry.location:e.marker=new google.maps.Marker({map:e.map,position:t[0].geometry.location,draggable:e.getProperty("configuration.isInteractive")}),e.map.setCenter(e.marker.getPosition()),""===v.a.meetsRequirements("* * mobile * *")&&setTimeout((function(){e.map.panBy(0,-25)}),500),e.onValueChanged(),e.propagateCoordinates(t[0].geometry.location.lat(),t[0].geometry.location.lng()),e.geocoder.geocode({latLng:t[0].geometry.location},(function(t){e.propagateAddress(t)})))}))}else this.map.setOptions({zoomControl:!1,panControl:!1,rotateControl:!1,minZoom:i,maxZoom:i,zoom:i,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1,gestureHandling:"none",keyboardShortcuts:!1,scrollwheel:!1}),this.marker&&this.marker.setOptions({draggable:!1}),this.map.controls[google.maps.ControlPosition.TOP_LEFT].clear()}},{key:"updateMarkerPosition",value:function(){var e=this;if(this.isGoogleMapsJavascriptAPILoaded){var t=String(this.getProperty("configuration.initialAddressText"))||null;t?this.geocoder.geocode({address:t},(function(t,n){e.showAddressOnMap(n,t),e.geocoder.geocode({latLng:t[0].geometry.location},(function(t){e.propagateAddress(t)}))})):this.marker&&this.marker.setMap(null)}}},{key:"showAddressOnMap",value:function(e,t){var n=this;this.isGoogleMapsJavascriptAPILoaded&&(e===google.maps.GeocoderStatus.OK?(this.map.setCenter(t[0].geometry.location),this.getProperty("configuration.isInteractive")&&""===v.a.meetsRequirements("* * mobile * *")&&setTimeout((function(){n.map.panBy(0,-25)}),500),this.marker?(this.marker.setPosition(t[0].geometry.location),this.marker.setMap(this.map),this.propagateCoordinates(t[0].geometry.location.lat(),t[0].geometry.location.lng())):(this.marker=new google.maps.Marker({map:this.map,position:t[0].geometry.location,draggable:this.getProperty("configuration.isInteractive")}),this.onValueChanged(),this.propagateCoordinates(t[0].geometry.location.lat(),t[0].geometry.location.lng()),google.maps.event.addListener(this.marker,"dragend",(function(e){var t=e.latLng.lat(),i=e.latLng.lng();n.map.setCenter(n.marker.getPosition()),n.getProperty("configuration.isInteractive")&&""===v.a.meetsRequirements("* * mobile * *")&&setTimeout((function(){n.map.panBy(0,-25)}),500),n.onValueChanged(),n.propagateCoordinates(t,i),n.geocoder.geocode({latLng:e.latLng},(function(e){n.propagateAddress(e)})),n.mapSearchInput.value=""})))):this.marker.setMap(null))}},{key:"propagateAddress",value:function(e){var t=this.getCombinedGeocodedAddressData(e),n=this.getProperty("synchronize.withControlId");try{if(this.getForm().getEngine().getLoader().getLoaderType()===T.B.VIEW&&null!==n&&!0===this.getProperty("synchronize.enabled")){var i=this.getForm().getElementById(n);if(null===i)return;i.setMapSync(!1),i.setValue(t),i.updateCountry(t.country),setTimeout((function(){i.setMapSync(!0)}),1e3)}}catch(r){console.warn("Failed to propagate map coordinates to control #".concat(n)),console.error(r)}}},{key:"getCombinedGeocodedAddressData",value:function(e){var t=this,n=this.getGeocodedAddressData(e[0].address_components);return Object(N.a)(e,(function(e){var i=t.getGeocodedAddressData(e.address_components);Object(N.a)(i,(function(e,t){!n[t]&&e&&(n[t]=e)}))})),n}},{key:"getGeocodedAddressData",value:function(e){var t=this.getExtractedAddressData(e,["country"]),n={address1:this.getExtractedAddressData(e,["route"]),city:this.getExtractedAddressData(e,["locality"]),zone:this.getExtractedAddressData(e,["administrative_area_level_1"]),country:t,zipCode:this.getExtractedAddressData(e,["postal_code"]),fullCountryName:t},i=this.getExtractedAddressData(e,["street_number"]);return""!==i&&(n.address2="No. ".concat(i)),n}},{key:"getExtractedAddressData",value:function(e,t){for(var n=[],i=0;i<e.length;i++)for(var r=0;r<t.length;r++)-1!=e[i].types.indexOf(t[r])&&n.push(e[i].long_name.toString());return n.join(" ")}},{key:"propagateCoordinates",value:function(e,t){var n=this.getProperty("propagate.onControlId");try{if(this.getForm().getEngine().getLoader().getLoaderType()===T.B.VIEW&&null!==n&&!0===this.getProperty("propagate.enabled")){var i=this.getForm().getElementById(n);null!==i&&i.setValue({value:"".concat(e,", ").concat(t)})}}catch(r){console.warn("Failed to propagate map coordinates to control #".concat(n)),console.error(r)}}},{key:"updateMapSize",value:function(){this.updateMapSizeDebounced()}},{key:"withHeight",value:function(e){var t=d()(f()(n.prototype),"withHeight",this).call(this,e);return this.updateMapSize(),t}},{key:"getResizingCapability",value:function(){return T.db.ALL}},{key:"whenGoogleMapsAPIIsLoaded",value:function(){var e=this,t=P.a.getJQuery();return this.isGoogleMapsJavascriptAPILoaded?t.Deferred((function(e){e.resolve()})).promise():(n.theOnlyOneGoogleMapsAPILoadRequestPromise||(n.theOnlyOneGoogleMapsAPILoadRequestPromise=t.Deferred((function(t){if(""!==n.GOOGLE_MAPS_EMBED_KEY){window.gm_authFaliure=function(){t.reject({code:i.OTHER_ERROR})};var r="//maps.googleapis.com/maps/api/js?libraries=places&key=".concat(n.GOOGLE_MAPS_EMBED_KEY);e.getForm().getEngine().getResourceManager().loadJavascript(r).done((function(){e.isGoogleMapsJavascriptAPILoaded=!0,t.resolve()})).fail((function(){t.reject(new Error("Failed to load google Maps API"))}))}else t.reject({code:i.NO_API_KEY})})).promise()),n.theOnlyOneGoogleMapsAPILoadRequestPromise)}},{key:"setupDefaults",value:function(){this.withHeight(n.DEFAULT_MAP_HEIGHT),this.setProperty("label.labelText",C.a.translationService.translateText("editorField_googleMap"));var e=this.getForm().getEngine().getLoader().getLoaderDependency(T.M.DEFAULT_USER_PREFERENCES);return e&&this.setProperty("configuration.initialAddressText",e.mapLocation),this.updateLabelText(),this}},{key:"onValueChanged",value:function(){this.marker&&this.setProperty("value.value",[this.marker.getPosition().lat(),this.marker.getPosition().lng()])}},{key:"synchronizeValue",value:function(){var e=this,t=this.getProperty("value.value");if(t&&2===t.length&&this.map){var n=new google.maps.LatLng({lat:t[0],lng:t[1]});this.map.setCenter(n),this.getProperty("configuration.isInteractive")&&""===v.a.meetsRequirements("* * mobile * *")&&setTimeout((function(){e.map.panBy(0,-25)}),500),this.marker&&this.marker.setPosition(n)}}},{key:"updateLabelText",value:function(){d()(f()(n.prototype),"updateLabelText",this).call(this),this.updateMapSize()}},{key:"updateInstructionsText",value:function(){d()(f()(n.prototype),"updateInstructionsText",this).call(this),this.updateMapSize()}},{key:"updateErrorsText",value:function(){d()(f()(n.prototype),"updateErrorsText",this).call(this),this.updateMapSize()}},{key:"initDOMEvents",value:function(){var e=this;window.addEventListener("resize",(function(){e.updateMapSize()}),!0),this.getForm().on("page-changed",(function(){e.updateMapSize()}))}},{key:"onReset",value:function(){var e=this;this.geocoder?(this.updateMarkerPosition(),this.updateMapZoomSetting(),this.onValueChanged()):(this.initializeMapCanvas(),setTimeout((function(){e.updateMarkerPosition(),e.updateMapZoomSetting(),e.onValueChanged()}),1500))}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),e}}],[{key:"getConfiguration",value:function(){return{typeId:I.a.CONTROL_TYPE_MAP,name:"Location on Google map",isContainer:!1,category:T.w.CONTACT_DETAILS,keywords:" location on google map place address",icon:"i123-editor_field_googlemaps",isVirtual:!1,i18nName:"editorField_googleMap",i18nKeywords:"edt_UI_control_type_map_keywords",index:50,accessibilityFields:T.v.ROOT_NODE+T.v.ERROR_NODE,title:C.a.translationService.translateText("editorFieldTooltip_googleMap")}}}]),n}(C.a);y()(S,"GOOGLE_MAPS_EMBED_KEY",""),y()(S,"GOOGLE_MAPS_MIN_ZOOM",1),y()(S,"GOOGLE_MAPS_MAX_ZOOM",15),y()(S,"DEFAULT_MAP_HEIGHT",300),y()(S,"theOnlyOneGoogleMapsAPILoadRequestPromise",void 0),y()(S,"attributes",{}),y()(S,"runtime",null),y()(S,"nodeName","map")},,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=function(){function e(){r()(this,e)}return o()(e,null,[{key:"init",value:function(){var t=0,n=0,i="";Object.defineProperty(e,"nextNumber",{get:function(){return t++,n=t},configurable:!1}),Object.defineProperty(e,"nextString",{get:function(){return t++,i=String(t)},configurable:!1}),Object.defineProperty(e,"lastNumber",{get:function(){return n}}),Object.defineProperty(e,"lastString",{get:function(){return i}})}}]),e}();l()(c,"nextNumber",void 0),l()(c,"nextString",void 0),l()(c,"lastNumber",void 0),l()(c,"lastString",void 0),c.init()},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=function(){function e(){r()(this,e)}return o()(e,null,[{key:"getInstance",value:function(){return this.instance||(this.instance=new this),this.instance}}]),e}();l()(c,"instance",void 0)},function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.FREE="free",e.NEW_FREE="new-free"}(i||(i={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=function(){function e(t){r()(this,e),l()(this,"element",void 0),l()(this,"isContentEditable",void 0),this.element=t,this.isContentEditable=t.hasAttribute("contenteditable")&&"true"===t.getAttribute("contenteditable")}return o()(e,[{key:"position",value:function(e){if(void 0===e)return this.getCaretPosition();this.setCaretPosition(e)}},{key:"getCaretPosition",value:function(){if(document.body.contains(this.element)){if(this.isContentEditable){this.element.focus();var e=0;if(document.getSelection().rangeCount){var t=document.getSelection().getRangeAt(0),n=t.cloneRange();n.selectNodeContents(this.element),n.setEnd(t.endContainer,t.endOffset),e=n.toString().length}return e}return this.element.selectionStart||0}}},{key:"setCaretPosition",value:function(e){if(document.body.contains(this.element))if(this.isContentEditable){this.element.focus();for(var t=this.element.childNodes,n=0,i=t.length;n<i;n++){if(!(t[n].textContent.length<e)){if(t[n].nodeType!==Node.TEXT_NODE){e=0;continue}document.getSelection().collapse(t[n],e);break}e-=t[n].textContent.length}}else this.element.setSelectionRange(e,e)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s);function c(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var d=function(){function e(){r()(this,e)}return o()(e,null,[{key:"getLanguagesList",value:function(){return this.LANGUAGES_LIST}},{key:"getLanguageObjectByCode",value:function(e){var t,n=c(this.LANGUAGES_LIST);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.code2===e||i.code3===e)return i}}catch(r){n.e(r)}finally{n.f()}return null}}]),e}();l()(d,"LANGUAGES_LIST",[{code3:"afr",code2:"af",name:"Afrikaans",native_name:"Afrikaans"},{code3:"alb",code2:"al",name:"Albanian",native_name:"Shqip"},{code3:"anp",code2:null,name:"Angika",native_name:"Angika"},{code3:"ara",code2:"sa",name:"Arabic",native_name:"\u0627\u0644\u0639\u064e\u0631\u064e\u0628\u0650\u064a\u064e\u0651\u0629"},{code3:"arm",code2:"am",name:"Armenian",native_name:" \u0540\u0561\u0575\u0565\u0580\u0565\u0576"},{code3:"asm",code2:"as",name:"Assamese",native_name:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be"},{code3:"ast",code2:null,name:"Asturian",native_name:"Asturianu"},{code3:"ave",code2:"ae",name:"Avestan",native_name:"Avestan"},{code3:"awa",code2:null,name:"Awadhi",native_name:"\u0905\u0935\u0927\u0940"},{code3:"aym",code2:"ay",name:"Aymara",native_name:"Aymar aru"},{code3:"aze",code2:"az",name:"Azerbaijani",native_name:"Az\u0259rbaycan dil"},{code3:"bam",code2:"bm",name:"Bambara",native_name:"Bambara"},{code3:"bas",code2:null,name:"Basa",native_name:"Mbene; \u0181asa\xe1"},{code3:"bak",code2:"ba",name:"Bashkir",native_name:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442 \u0442\u0435\u043b\u0435"},{code3:"baq",code2:"eu",name:"Basque",native_name:"euskara"},{code3:"bel",code2:"by",name:"Belarusian",native_name:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f \u043c\u043e\u0432\u0430"},{code3:"ben",code2:"bn",name:"Bengali",native_name:"\u09ac\u09be\u0982\u09b2\u09be"},{code3:"bho",code2:null,name:"Bhojpuri",native_name:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940"},{code3:"bih",code2:"bh",name:"Bihari languages",native_name:"Bihari languages"},{code3:"bis",code2:"bi",name:"Bislama",native_name:"Bislama"},{code3:"bos",code2:"bs",name:"Bosnian",native_name:"\u0431\u043e\u0441\u0430\u043d\u0441\u043a\u0438"},{code3:"bre",code2:"br",name:"Breton",native_name:"Brezhoneg"},{code3:"bul",code2:"bg",name:"Bulgarian",native_name:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a"},{code3:"bur",code2:null,name:"Burmese",native_name:"Burmese"},{code3:"cas",code2:null,name:"Castilian",native_name:"Castellano"},{code3:"cat",code2:"ca",name:"Catalan",native_name:"Catal\xe0"},{code3:"khm",code2:"km",name:"Central Khmer",native_name:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a"},{code3:"che",code2:"ce",name:"Chechen",native_name:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d \u043c\u043e\u0442\u0442"},{code3:"chi",code2:"cn",name:"Chinese",native_name:"\u4e2d\u6587"},{code3:"chv",code2:"cv",name:"Chuvash",native_name:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430"},{code3:"cor",code2:"kw",name:"Cornish",native_name:"Kernowek"},{code3:"cos",code2:"co",name:"Corsican",native_name:"Corsu"},{code3:"cre",code2:"cr",name:"Cree",native_name:"Cree"},{code3:"cro",code2:"hr",name:"Croatian",native_name:"Croatian"},{code3:"ces",code2:"cz",name:"Czech",native_name:"\u010de\u0161tina"},{code3:"dan",code2:"dk",name:"Danish",native_name:"Dansk"},{code3:"dut",code2:"nl",name:"Dutch",native_name:"Nederlands"},{code3:"dzo",code2:"dz",name:"Dzongkha",native_name:"Dzongkha"},{code3:"eng",code2:"en",name:"English",native_name:"English"},{code3:"epo",code2:"eo",name:"Esperanto",native_name:"Esperanto"},{code3:"est",code2:"ee",name:"Estonian",native_name:"Eesti keel"},{code3:"ewe",code2:null,name:"Ewe",native_name:"\xc8\u028begbe"},{code3:"fao",code2:"fo",name:"Faroese",native_name:"f\xf8royskt"},{code3:"fij",code2:"fj",name:"Fijian",native_name:"Na Vosa Vakaviti"},{code3:"fil",code2:"ph",name:"Filipino",native_name:"Wikang Filipino"},{code3:"fin",code2:"fi",name:"Finnish",native_name:"Suomen kieli"},{code3:"fle",code2:"be",name:"Flemish",native_name:"Flemish"},{code3:"fra",code2:"fr",name:"French",native_name:"Fran\xe7ais"},{code3:"gla",code2:"gd",name:"Gaelic; Scottish Gaelic",native_name:"G\xe0idhlig"},{code3:"glg",code2:"gl",name:"Galician",native_name:"galego"},{code3:"lug",code2:"lg",name:"Ganda",native_name:"Luganda"},{code3:"geo",code2:"ka",name:"Georgian",native_name:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8"},{code3:"deu",code2:"de",name:"German",native_name:"Deutsch"},{code3:"grc",code2:"gr",name:"Greek",native_name:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac"},{code3:"grn",code2:"gn",name:"Guarani",native_name:"Ava\xf1e'\u1ebd"},{code3:"guj",code2:"gu",name:"Gujarati",native_name:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0"},{code3:"hat",code2:"ht",name:"Haitian; Haitian Creole",native_name:"Krey\xf2l ayisyen"},{code3:"hau",code2:"ha",name:"Hausa",native_name:" \u0647\u064e\u0631\u0652\u0634\u064e\u0646"},{code3:"heb",code2:"il",name:"Hebrew",native_name:"\u05e2\u05d1\u05e8\u05d9\u05ea\u200e"},{code3:"her",code2:"hz",name:"Herero",native_name:"Otjiherero"},{code3:"hil",code2:null,name:"Hiligaynon",native_name:"Ilonggo"},{code3:"hin",code2:null,name:"Hindi-Urdu",native_name:"\u0939\u093f\u0928\u094d\u0926\u0940"},{code3:"hmo",code2:"ho",name:"Hiri Motu",native_name:"Hiri Motu"},{code3:"hun",code2:"hu",name:"Hungarian",native_name:"Magyar"},{code3:"ice",code2:"is",name:"Icelandic",native_name:"\xedslenska"},{code3:"ido",code2:"io",name:"Ido",native_name:"Ido"},{code3:"ibo",code2:"ig",name:"Igbo",native_name:"As\u1ee5s\u1ee5 Igbo"},{code3:"ind",code2:"id",name:"Indonesian",native_name:"Bahasa Indonesia"},{code3:"iku",code2:"iu",name:"Inuktitut",native_name:"Inuktitut"},{code3:"ipk",code2:"ik",name:"Inupiaq",native_name:"I\xf1upiaq"},{code3:"gle",code2:"ie",name:"Irish",native_name:"Gaeilge"},{code3:"ita",code2:"it",name:"Italian",native_name:"Italiano"},{code3:"jpn",code2:"jp",name:"Japanese",native_name:"\u65e5\u672c\u8a9e"},{code3:"jav",code2:"jv",name:"Javanese",native_name:"Javanese"},{code3:"kan",code2:"kn",name:"Kannada",native_name:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1"},{code3:"kau",code2:null,name:"Kanuri",native_name:"Kanuri"},{code3:"kas",code2:"ks",name:"Kashmiri",native_name:"\u0915\u0949\u0936\u0941\u0930 / \u0643\u0623\u0634\u064f\u0631"},{code3:"kaz",code2:"kk",name:"Kazakh",native_name:"\u049b\u0430\u0437\u0430\u049b \u0442\u0456\u043b\u0456"},{code3:"kon",code2:"kg",name:"Kongo",native_name:"Kongo"},{code3:"kor",code2:"kr",name:"Korean",native_name:"\ud55c\uad6d\uc5b4"},{code3:"kos",code2:null,name:"Kosraean",native_name:"Kosraean"},{code3:"kua",code2:"kj",name:"Kuanyama; Kwanyama",native_name:"Kuanyama"},{code3:"kur",code2:"ku",name:"Kurdish",native_name:"Kurd\xee / \u06a9\u0648\u0631\u062f\u06cc\u200e"},{code3:"lao",code2:"lo",name:"Lao",native_name:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7"},{code3:"lat",code2:"la",name:"Latin",native_name:"Lingua lat\u012bna"},{code3:"lav",code2:"lv",name:"Latvian",native_name:"Latvie\u0161u"},{code3:"lin",code2:"ln",name:"Lingala",native_name:"Lingala"},{code3:"lit",code2:"lt",name:"Lithuanian",native_name:"lietuvi\u0173 kalba"},{code3:"ltz",code2:"lu",name:"Luxembourgish; Letzeburgesch",native_name:"L\xebtzebuergesch"},{code3:"mac",code2:"mk",name:"Macedonian",native_name:"\u043c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438 \u0458\u0430\u0437\u0438\u043a"},{code3:"mlg",code2:"mg",name:"Malagasy",native_name:"Malagasy"},{code3:"may",code2:"my",name:"Malay",native_name:"Bahasa Melayu"},{code3:"mlt",code2:"mt",name:"Maltese",native_name:"Malti"},{code3:"glv",code2:"gv",name:"Manx",native_name:"Gaelg; Gailck"},{code3:"mao",code2:"mi",name:"Maori",native_name:"Te Reo M\u0101ori"},{code3:"mar",code2:null,name:"Marathi",native_name:"\u092e\u0930\u093e\u0920\u0940"},{code3:"mah",code2:"mh",name:"Marshallese",native_name:"Kajin M\u0327aje\u013c"},{code3:"mon",code2:"mn",name:"Mongolian",native_name:"\u043c\u043e\u043d\u0433\u043e\u043b \u0445\u044d\u043b"},{code3:"cnr",code2:"me",name:"Montenegrin",native_name:"c\u0446\u0440\u043d\u043e\u0433\u043e\u0440\u0441\u043a\u0438"},{code3:"nep",code2:null,name:"Nepali",native_name:"\u0928\u0947\u092a\u093e\u0932\u0940 \u092d\u093e\u0937\u093e"},{code3:"nor",code2:"no",name:"Norwegian",native_name:"Norsk"},{code3:"nob",code2:"nb",name:"Norwegian Bokm\xe5l",native_name:"Bokm\xe5l"},{code3:"nno",code2:"nn",name:"Norwegian Nynorsk",native_name:"Nynorsk"},{code3:"oji",code2:"oj",name:"Ojibwa",native_name:"Ojibwa"},{code3:"ori",code2:"or",name:"Oriya",native_name:"\u0b13\u0b21\u0b3c\u0b3f\u0b06"},{code3:"orm",code2:"om",name:"Oromo",native_name:"Afaan Oromoo"},{code3:"oss",code2:"os",name:"Ossetian; Ossetic",native_name:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433"},{code3:"pli",code2:"pi",name:"Pali",native_name:"P\u0101li"},{code3:"pas",code2:null,name:"Pashto",native_name:"\u067e\u069a\u062a\u0648"},{code3:"fas",code2:"fa",name:"Persian",native_name:"\u0641\u0627\u0631\u0633\u06cc"},{code3:"pol",code2:"pl",name:"Polish",native_name:"Polski"},{code3:"por",code2:"pt",name:"Portuguese",native_name:"Portugu\xeas"},{code3:"pun",code2:null,name:"Punjabi",native_name:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40 / \u067e\u0646\u062c\u0627\u0628\u06cc\u200e"},{code3:"que",code2:"qu",name:"Quechua",native_name:"kichwa simii"},{code3:"ron",code2:"ro",name:"Romanian",native_name:"Rom\xe2n\u0103"},{code3:"run",code2:"rn",name:"Rundi",native_name:"Ikirundi"},{code3:"rus",code2:"ru",name:"Russian",native_name:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"},{code3:"smo",code2:"sm",name:"Samoan",native_name:"Gagana fa\u02bba S\u0101moa"},{code3:"sag",code2:"sg",name:"Sango",native_name:"Y\xe2ng\xe2 t\xee s\xe4ng\xf6"},{code3:"san",code2:null,name:"Sanskrit",native_name:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d"},{code3:"srd",code2:"sc",name:"Sardinian",native_name:"Sardu"},{code3:"srp",code2:"cs",name:"Serbo/Croatian",native_name:"Serbo/Croatian"},{code3:"sna",code2:"sn",name:"Shona",native_name:"ChiShona"},{code3:"iii",code2:"ii",name:"Sichuan Yi",native_name:"Sichuan Yi"},{code3:"bla",code2:null,name:"Siksika",native_name:"Siksika"},{code3:"snd",code2:"sd",name:"Sindhi",native_name:"\u0633\u0646\u068c\u064a / \u0938\u093f\u0928\u094d\u0927\u0940 / \u0a38\u0a3f\u0a70\u0a27\u0a40"},{code3:"sin",code2:null,name:"Sinhala; Sinhalese",native_name:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd"},{code3:"slo",code2:"sk",name:"Slovak",native_name:"Sloven\u010dina"},{code3:"slv",code2:"si",name:"Slovenian",native_name:"Slovenski jezik"},{code3:"som",code2:"so",name:"Somali",native_name:"af Soomaali"},{code3:"sot",code2:"st",name:"Southern Sotho",native_name:"Sesotho [southern]"},{code3:"spa",code2:"es",name:"Spanish",native_name:"Espa\xf1ol"},{code3:"sun",code2:"su",name:"Sundanese",native_name:"Basa Sunda"},{code3:"swa",code2:"sw",name:"Swahili",native_name:"Kiswahili"},{code3:"ssw",code2:"ss",name:"Swati",native_name:"SiSwati"},{code3:"swe",code2:"se",name:"Swedish",native_name:"Svenska"},{code3:"gsw",code2:null,name:"Swiss German",native_name:"Schwiizerd\xfctsch"},{code3:"tgl",code2:"tl",name:"Tagalog",native_name:"Wikang Tagalog"},{code3:"tah",code2:"ty",name:"Tahitian",native_name:"Reo Tahiti"},{code3:"tam",code2:null,name:"Tamil",native_name:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd"},{code3:"tel",code2:null,name:"Telugu",native_name:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41"},{code3:"tha",code2:"th",name:"Thai",native_name:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22"},{code3:"bod",code2:"bo",name:"Tibetan",native_name:"Tibetan"},{code3:"tir",code2:"ti",name:"Tigrinya",native_name:"Tigrinya"},{code3:"ton",code2:"to",name:"Tonga (Tonga Islands)",native_name:"lea faka-Tonga"},{code3:"tso",code2:"ts",name:"Tsonga",native_name:"Xitsonga"},{code3:"tsn",code2:"tn",name:"Tswana",native_name:"Setswana"},{code3:"tur",code2:"tr",name:"Turkish",native_name:"T\xfcrk\xe7e"},{code3:"tuk",code2:"tk",name:"Turkmen",native_name:"T\xfcrkmen\xe7e"},{code3:"twi",code2:"tw",name:"Twi",native_name:"Twi"},{code3:"uig",code2:"ug",name:"Uighur; Uyghur",native_name:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u06d5  ; \u0626\u06c7\u064a\u063a\u06c7\u0631 \u062a\u0649\u0644\u0649"},{code3:"ukr",code2:"ua",name:"Ukrainian",native_name:"\u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430 \u043c\u043e\u0432\u0430"},{code3:"urd",code2:"ur",name:"Urdu",native_name:"\u0627\u064f\u0631\u062f\u064f\u0648\u200e"},{code3:"uzb",code2:"uz",name:"Uzbek",native_name:"\u0626\u0648\u0628\u06d0\u06a9 "},{code3:"val",code2:null,name:"Valencian",native_name:"Valenci\xe0"},{code3:"ven",code2:"ve",name:"Venda",native_name:"Tshiven\u1e13a"},{code3:"vie",code2:"vn",name:"Vietnamese",native_name:"Ti\u1ebfng Vi\u1ec7t"},{code3:"vol",code2:"vo",name:"Volap\xfck",native_name:"Volap\xfck"},{code3:"wak",code2:null,name:"Wakashan languages",native_name:"Wakashan languages"},{code3:"wln",code2:"wa",name:"Walloon",native_name:"Walon"},{code3:"cym",code2:"cy",name:"Welsh",native_name:"Cymraeg"},{code3:"wol",code2:"wo",name:"Wolof",native_name:"Wolof"},{code3:"wuu",code2:"wu",name:"Wu",native_name:"Wu"},{code3:"xho",code2:"xh",name:"Xhosa",native_name:"isiXhosa"},{code3:"yor",code2:"yo",name:"Yoruba",native_name:"\xe8d\xe8 Yor\xf9b\xe1"},{code3:"yue",code2:null,name:"Yue",native_name:"Yue"},{code3:"zha",code2:"za",name:"Zhuang; Chuang",native_name:"Vahcuengh / \u8a71\u50ee"}])},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=function(){function e(){r()(this,e)}return o()(e,null,[{key:"create",value:function(e,t){var n,i=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];var l=function(){n=void 0,r||e.apply(i,o)},c=r&&void 0===n;void 0!==n&&clearTimeout(n),n=setTimeout(l.bind(i),t),c&&e.apply(i,o)}}}]),e}()},,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(1),u=n(23),d=function(){function e(){r()(this,e),l()(this,"rootNode",void 0),l()(this,"fileNameContainer",void 0),l()(this,"fileSizeContainer",void 0),l()(this,"progressBarOuter",void 0),l()(this,"progressBarInner",void 0),l()(this,"removeButton",void 0),l()(this,"upload",void 0),l()(this,"uploadDetails",void 0),l()(this,"errorNode",void 0),l()(this,"fileUtils",void 0),l()(this,"fileSize",void 0),l()(this,"fileData",void 0),l()(this,"error",null),this.rootNode=document.createElement("div"),this.rootNode.setAttribute("data-role","upload"),this.fileNameContainer=document.createElement("div"),this.fileNameContainer.setAttribute("data-role","name"),this.rootNode.appendChild(this.fileNameContainer),this.fileSizeContainer=document.createElement("span"),this.fileSizeContainer.setAttribute("data-role","size"),this.rootNode.appendChild(this.fileSizeContainer),this.progressBarOuter=document.createElement("div"),this.progressBarOuter.setAttribute("data-role","progress-bar"),this.progressBarInner=document.createElement("div"),this.progressBarInner.setAttribute("data-role","progress"),this.progressBarOuter.appendChild(this.progressBarInner),this.removeButton=document.createElement("div"),this.removeButton.setAttribute("data-role","button-remove"),this.removeButton.setAttribute("aria-labelledby","file-control-remove-button-acc"),this.rootNode.appendChild(this.removeButton)}return o()(e,[{key:"withFileUtils",value:function(e){return this.fileUtils=e,this}},{key:"updateAccessibilityAttributes",value:function(e,t){if(this.rootNode.setAttribute("aria-labelledby","fileupload-name-".concat(e,"-acc fileupload-size-").concat(e,"-acc file-control-error-").concat(e,"-acc")),this.rootNode.setAttribute("index",e),t){var n=document.createElement("span");n.setAttribute("id","file-control-remove-button-acc"),n.appendChild(document.createTextNode("Remove Button")),n.style.display="none",this.removeButton.appendChild(n),this.rootNode.setAttribute("tabindex","0"),this.removeButton.setAttribute("tabindex","0")}else this.rootNode.removeAttribute("tabindex"),this.removeButton.removeAttribute("tabindex"),this.removeButton.textContent="";this.fileNameContainer.setAttribute("id","fileupload-name-".concat(e,"-acc")),this.fileSizeContainer.setAttribute("id","fileupload-size-".concat(e,"-acc")),this.getError()&&this.errorNode.setAttribute("id","file-control-error-".concat(e,"-acc"))}},{key:"withError",value:function(e){return this.error=e,null===e?(this.errorNode&&(this.errorNode.parentNode&&this.errorNode.removeChild(this.errorNode),this.errorNode=void 0),this.rootNode.removeAttribute("data-has-error")):(this.errorNode||(this.errorNode=document.createElement("div"),this.errorNode.setAttribute("data-role","error")),this.errorNode.textContent=String(e||"Error").replace(/^Error\: /g,""),this.rootNode.appendChild(this.errorNode),this.rootNode.setAttribute("data-has-error","")),this}},{key:"getError",value:function(){return null===this.error?null:String(this.error).replace(/^Error: /,"")}},{key:"withName",value:function(e){return this.fileNameContainer.textContent=String(e||"File"),this.uploadDetails=this.uploadDetails||{name:"",progress:0,size:0},this.uploadDetails.name=e,this}},{key:"getName",value:function(){return this.uploadDetails?this.uploadDetails.name:null}},{key:"withData",value:function(e){return this.fileData=e,this}},{key:"getData",value:function(){return this.fileData}},{key:"withUrlLinkToDownload",value:function(e,t){if(e&&t&&null!==t.getTable("session").getRowAt(0)[0]){var n=document.createElement("a");n.setAttribute("class","download-url"),n.href=e,n.textContent=this.getName()||"File",n.target="_blank",this.fileNameContainer.textContent="",this.fileNameContainer.appendChild(n)}return this}},{key:"withProgress",value:function(e){return(e=~~e)<0&&(e=0),e>100&&(e=100),this.progressBarInner.style.width="".concat(e,"%"),this.uploadDetails=this.uploadDetails||{name:"",progress:0,size:0},this.uploadDetails.progress=e,this}},{key:"withUpload",value:function(e){var t=this;return this.upload=e||null,this.upload?(this.withFileSize(this.upload.getSize()).withName(this.upload.getStoredFileNameOnServer()||this.upload.getName()).withProgress(0),this.upload.on("start",(function(){t.withError(null),t.progressBarOuter.parentNode||t.rootNode.appendChild(t.progressBarOuter)})),this.upload.on("progress",(function(e){return t.withProgress(e)})),this.upload.on("success",(function(){t.progressBarOuter.parentNode&&t.progressBarOuter.parentNode.removeChild(t.progressBarOuter),t.withName(t.upload.getStoredFileNameOnServer()||t.upload.getName())})),this.upload.on("error",(function(e){return t.withError(e)})),this.upload.on("got-file-data",(function(e){return t.withData(e)}))):this.uploadDetails&&this.withFileSize(this.uploadDetails.size||null).withName(this.uploadDetails.name).withProgress(100),this}},{key:"getUploadStatus",value:function(){return this.upload?this.upload.getState():c.tb.SUCCESS}},{key:"getRootNode",value:function(){return this.rootNode}},{key:"getSize",value:function(){return this.upload?this.upload.getSize():null}},{key:"cancel",value:function(){return function(e,t){return t.Deferred((function(t){e.upload?e.upload.remove().always((function(){t.resolve(!0)})):t.resolve(!0)})).promise()}(this,u.a.getJQuery())}},{key:"withFileSize",value:function(e){return this.fileSize=Math.max(0,~~e),this.fileUtils&&null!==this.fileSize&&void 0!==this.fileSize&&0<this.fileSize?this.fileSizeContainer.textContent="(".concat(this.fileUtils.convertFileSizeToString(this.fileSize),")"):this.fileSizeContainer.textContent="",this}},{key:"getTransferType",value:function(){return c.x.UPLOAD}},{key:"getHash",value:function(){return null}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(1),u=n(13),d=n(54),p=function(){function e(){r()(this,e)}return o()(e,null,[{key:"makeSortable",value:function(t,n,i,r,a,o){var s,l,p=c.zb.IDLE,h={left:0,top:0},_={left:0,top:0},g=!1,m=function(i){if(p===c.zb.START||p===c.zb.RUN){var a=i.target||i.srcElement;if(a===n||t.contains(n,a)){if(!g){var d={left:i.clientX,top:i.clientY};if(u.a.computeDistance(h,d)<e.MINIMUM_DISTANCE_IN_PIXELS_TO_INITIATE_A_DRAG)return i.preventDefault(),void i.stopPropagation();g=!0;var m=t(n).find("table").attr("data-editing-context"),f=s.getBoundingClientRect();l=s.cloneNode(!0),s.setAttribute("data-is-sortable-source-element",""),l.style.width="".concat(f.width,"px"),l.style.height="".concat(f.height,"px"),l.style.left="".concat(f.left,"px"),l.style.top="".concat(f.top,"px"),l.setAttribute("data-element-type","sortable-overlay"),l.setAttribute("data-editing-context",m),document.body.appendChild(l)}i.preventDefault(),i.stopPropagation(),t(n).attr("data-in-dragging-procedure",!0);var E=t(a).closest(r).get(0);if(E){var y=E.getBoundingClientRect(),T=y.top+y.height/2,v=c.yb.BEFORE;if(i.clientY>T&&(v=c.yb.AFTER),o)try{o(s,E,v)}catch(i){}}p=c.zb.RUN,_.left=i.clientX-h.left,_.top=i.clientY-h.top,l.style.transform="translate(".concat(_.left,"px, ").concat(_.top,"px)")}}},f=function e(i){if(t(n).removeAttr("data-in-dragging-procedure"),g=!1,p!==c.zb.RUN)return console.warn("RETURN (STATE IS NOT RUN)"),void(p=c.zb.IDLE);l.parentNode.removeChild(l),p=c.zb.IDLE,document.body.removeEventListener("mousemove",m,!0),document.body.removeEventListener("mouseup",e,!0),s.removeAttribute("data-is-sortable-source-element"),l=null,h.left=h.top=_.left=_.top=0,i.preventDefault(),i.stopPropagation();var o=i.target||i.srcElement;if(o!==n&&!t.contains(n,o))return console.warn("RETURN: TARGET IS NOT (A CHILD OF) SOURCE CONTAINER"),s=null,void(p=c.zb.IDLE);var u=t(o).closest(r).get(0);if(!u){if(a)try{a(s,null,c.yb.BEFORE)}catch(i){console.error("DROP CALLBACK EXCEPTION: ",i)}return s=null,u=null,console.warn("RETURN (NO TARGET DROP ELEMENT)"),void(p=c.zb.IDLE)}if(u===s)return s=null,p=c.zb.IDLE,void console.warn("RETURN (TARGET DROP ELEMENT == SOURCE ELEMENT)");var d=u.getBoundingClientRect(),f=d.top+d.height/2,E=c.yb.BEFORE;if(i.clientY>f&&(E=c.yb.AFTER),a)try{a(s,u,E)}catch(i){console.error("DROP CALLBACK EXCEPTION: ",i)}u=null,s=null,p=c.zb.IDLE};t(r).on("mousedown",(function(e){if(p===c.zb.IDLE&&d.a.getMouseButtonFromEvent(e)===c.N.LEFT){var n=e.target||e.srcElement;if(h.left=e.clientX,h.top=e.clientY,t(n).is("".concat(i,", ").concat(i," *"))){if(!(s=t(n).closest(r).get(0)))return;p=c.zb.START,document.body.addEventListener("mousemove",m,!0),document.body.addEventListener("mouseup",f,!0)}}}))}}]),e}();l()(p,"MINIMUM_DISTANCE_IN_PIXELS_TO_INITIATE_A_DRAG",5)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=function(){function e(){r()(this,e)}return o()(e,null,[{key:"prepareFileForUplod",value:function(e){null!=document.getElementById("tinymce-upload-image")&&document.getElementById("tinymce-upload-image").remove();var t=document.createElement("input");t.setAttribute("id","tinymce-upload-image"),t.setAttribute("type","file"),t.setAttribute("accept","image/*"),document.body.appendChild(t),document.getElementById("tinymce-upload-image").onchange=function(){var t=document.getElementById("tinymce-upload-image").files[0],n=new FileReader;n.onload=function(){var i="blobid".concat((new Date).getTime()),r=window.tinymce.activeEditor.editorUpload.blobCache,a=n.result.split(",")[1],o=r.create(i,t,a);r.add(o),e(o.blobUri(),{title:t.name})},n.readAsDataURL(t)},t.click()}},{key:"sendDataForUpload",value:function(e,t,n,i){var r,a;(r=new XMLHttpRequest).withCredentials=!1,r.open("POST","upload_img.php"),r.onload=function(){var n;200==r.status?(n=JSON.parse(r.responseText))&&"string"==typeof n.location?t(n.location):e("Invalid JSON: ".concat(r.responseText)):e("HTTP Error: ".concat(r.status))},(a=new FormData).append("image",n.blob()),a.append("xfid",String(i)),a.append("new_editor","1"),r.send(a)}}]),e}()},,function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.INFO="info",e.SUCCESS="success",e.WARNING="warning",e.ERROR="error",e.DEFAULT="default"}(i||(i={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var i=n(228),r=function(e){return{type:i.a.ADD_TOASTER,payload:e}},a=function(e){return{type:i.a.REMOVE_TOASTER,payload:e}}},function(e,t,n){"use strict";var i=function(e){try{var t=[e.form.font.family,e.instructions.font.family,e.input.font.family,e.error.font.family,e.button.font.family];return t.every((function(e){return e===t[0]}))?t[0]:null}catch(n){return null}},r=function(e){try{var t=[e.label.normal.color,e.instructions.normal.color,e.input.normal.color,e.button.secondary.normal.color];return t.every((function(e){return e===t[0]}))?t[0]:"transparent"}catch(n){return"transparent"}};n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}))},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return p}));var i,r=n(5),a=n.n(r),o=n(6),s=n.n(o),l=n(0),c=n.n(l);!function(e){e.TRIGGER_SEND_TO="SEND_TO",e.TRIGGER_ONLY_SEND_TO="ONLY_SEND_TO"}(i||(i={}));var u=function(){function e(){a()(this,e),c()(this,"root",void 0),c()(this,"sendToComponentValue",void 0),this.root=document.createElement("div"),this.root.setAttribute("data-role","notification-to-who-hook-type-config"),this.sendToComponentValue={hookType:i.TRIGGER_SEND_TO}}return s()(e,[{key:"getRoot",value:function(){return this.root}},{key:"getValue",value:function(){return this.sendToComponentValue}},{key:"setValue",value:function(e){this.sendToComponentValue=e}}]),e}(),d=function(){function e(){a()(this,e),c()(this,"root",void 0),c()(this,"onlySendToComponentValue",void 0),this.root=document.createElement("div"),this.root.setAttribute("data-role","notification-to-who-hook-type-config"),this.onlySendToComponentValue={hookType:i.TRIGGER_ONLY_SEND_TO}}return s()(e,[{key:"getRoot",value:function(){return this.root}},{key:"getValue",value:function(){return this.onlySendToComponentValue}},{key:"setValue",value:function(e){this.onlySendToComponentValue=e}}]),e}(),p=function(){function e(){a()(this,e),c()(this,"root",void 0),c()(this,"dropDown",void 0),c()(this,"value",void 0),this.root=document.createElement("div"),this.root.setAttribute("data-role","to-who-component"),this.dropDown=document.createElement("select"),this.dropDown.setAttribute("data-role","hook-type"),this.addDropDownEvents(),this.addDropDownOptions(),this.root.appendChild(this.dropDown),this.root.appendChild(document.createElement("div")),this.value=e.createValue(i.TRIGGER_SEND_TO),this.getRoot().appendChild(this.value.getRoot())}return s()(e,[{key:"getRoot",value:function(){return this.root}},{key:"getValue",value:function(){return this.value.getValue()}},{key:"setValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hookType:i.TRIGGER_SEND_TO};t.hookType!==this.value.getValue().hookType&&(this.value.getRoot().parentNode.removeChild(this.value.getRoot()),this.value=e.createValue(t.hookType),this.root.appendChild(this.value.getRoot())),this.value.setValue(t),this.dropDown.value=t.hookType}},{key:"addDropDownEvents",value:function(){var t=this;this.dropDown.onchange=function(){t.value.getRoot().parentNode.removeChild(t.value.getRoot()),t.value=e.createValue(t.dropDown.value),t.getRoot().appendChild(t.value.getRoot())}}},{key:"addDropDownOptions",value:function(){for(var e=[{text:"Send to",value:i.TRIGGER_SEND_TO,intlKey:"edt_notification_rules_send_to"},{text:"Only send to",value:i.TRIGGER_ONLY_SEND_TO,intlKey:"edt_notification_rules_only_send_to"}],t=0;t<e.length;t++){var n=document.createElement("option");n.text=e[t].text,n.value=e[t].value,n.setAttribute("data-i18n-text",e[t].intlKey),this.dropDown.add(n)}}}],[{key:"createValue",value:function(e){switch(e){case i.TRIGGER_SEND_TO:return new u;case i.TRIGGER_ONLY_SEND_TO:return new d;default:throw new Error("Unknown hook type")}}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var m=function(e){l()(n,e);var t=g(n);function n(e){var i;return r()(this,n),(i=t.call(this,e.componentName,"span")).rootNode.setAttribute("contenteditable","false"),i.rootNode.innerText=e.caption,i.rootNode.dataset.value=e.value,!0===e.isVariable&&i.rootNode.classList.add("is-variable"),e.isDeleted&&i.rootNode.setAttribute("data-is-deleted-field","".concat(e.isDeleted)),i.rootNode.addEventListener("click",(function(e){if(!i.rootNode.parentElement.hasAttribute("data-fully-disabled")){var t=i.rootNode.nextSibling;null!==t&&t.nodeType===Node.TEXT_NODE&&(0===t.textContent.trim().length?i.rootNode.parentNode.removeChild(i.rootNode.nextSibling):t.nodeValue=t.textContent.trim()),i.delete()}})),i.on("append",(function(){i.appendSpacesBeforeAndAfter()})),i.on("replace",(function(){i.appendSpacesBeforeAndAfter()})),i.on("insert",(function(){i.appendSpacesBeforeAndAfter()})),i}return o()(n,[{key:"getValue",value:function(){return this.rootNode.dataset.value}},{key:"setValue",value:function(e){}},{key:"appendSpacesBeforeAndAfter",value:function(){for(var e=this.rootNode.parentNode.childNodes,t=0,i=e.length;t<i;t++)if(e[t]===this.rootNode){t>0&&e[t-1].nodeType!==Node.TEXT_NODE?this.rootNode.insertAdjacentText("beforebegin",String.fromCharCode(n.THIN_SPACE_CHAR_CODE)):t>0&&e[t-1].nodeType===Node.TEXT_NODE&&e[t-1].nodeValue.charCodeAt(e[t-1].nodeValue.length-1)!==n.THIN_SPACE_CHAR_CODE&&(e[t-1].nodeValue=e[t-1].nodeValue+String.fromCharCode(n.THIN_SPACE_CHAR_CODE)),e[t+1]&&e[t+1].nodeType===Node.TEXT_NODE?e[t+1].nodeType===Node.TEXT_NODE&&e[t+1].nodeValue.charCodeAt(0)!==n.THIN_SPACE_CHAR_CODE&&(e[t+1].nodeValue=String.fromCharCode(n.THIN_SPACE_CHAR_CODE)+e[t+1].nodeValue):this.rootNode.insertAdjacentHTML("afterend",String.fromCharCode(n.THIN_SPACE_CHAR_CODE));break}0===i&&this.rootNode.insertAdjacentHTML("afterend",String.fromCharCode(n.THIN_SPACE_CHAR_CODE))}}]),n}(n(64).a);_()(m,"THIN_SPACE_CHAR_CODE",8201)},function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var i=n(20),r=n.n(i),a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(3),u=n.n(c),d=n(17),p=n.n(d),h=n(7),_=n.n(h),g=n(8),m=n.n(g),f=n(4),E=n.n(f),y=n(0),T=n.n(y),v=n(64),O=n(23),b=n(34),C=n(99);function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var R=function(e){_()(n,e);var t=I(n);function n(){var e;return o()(this,n),e=t.call(this,O.a.ELEMENT_TYPE_DROPDOWN),T()(u()(e),"nativeDropDown",void 0),T()(u()(e),"selectedOption",void 0),T()(u()(e),"updateSelectedOptionThrottled",void 0),T()(u()(e),"initSelectedIndex",null),e.nativeDropDown=document.createElement("select"),e.rootNode.appendChild(e.nativeDropDown),e.selectedOption=document.createElement("div"),e.selectedOption.setAttribute("data-role","dropdown-skin"),e.rootNode.appendChild(e.selectedOption),e.updateSelectedOptionThrottled=b.a.create((function(){e.updateSelectedOption()}),0),e.rootNode.removeAttribute("tabindex"),e.init(),e}return l()(n,[{key:"getValue",value:function(){return this.nativeDropDown.value}},{key:"setValue",value:function(e){var t=this.nativeDropDown.selectedIndex;this.nativeDropDown.value=e,this.updateSelectedOptionThrottled(),t!==this.nativeDropDown.selectedIndex&&O.a.getJQuery()(this.rootNode).trigger("change")}},{key:"getSelectedIndex",value:function(){return this.nativeDropDown.selectedIndex}},{key:"setSelectedIndex",value:function(e){this.nativeDropDown.selectedIndex=e,this.updateSelectedOptionThrottled()}},{key:"add",value:function(e,t){if(!e)throw new Error("Invalid argument: option: IUIOption|HTMLOptionElement expected!");var n=r()(e,HTMLOptionElement)?e:e.convertToHTMLOptionElement();n!==e&&(n.text=e.text,n.value=e.value),this.nativeDropDown.add(n,t),n.hasAttribute("selected")&&(this.initSelectedIndex=void 0===t?this.nativeDropDown.options.length-1:t),this.updateSelectedOptionThrottled()}},{key:"getOptions",value:function(){return this.nativeDropDown.options}},{key:"remove",value:function(e){this.nativeDropDown.remove(e),this.updateSelectedOptionThrottled()}},{key:"updateSelectedOption",value:function(){if(null!==this.initSelectedIndex&&(this.nativeDropDown.selectedIndex=this.initSelectedIndex,this.initSelectedIndex=null),-1!==this.nativeDropDown.selectedIndex){var e=this.nativeDropDown.options[this.nativeDropDown.selectedIndex];this.selectedOption.textContent=e.text}else this.selectedOption.textContent=""}},{key:"init",value:function(){!function(e,t){t.on("update",(function(){t.updateSelectedOption()})),e(t.nativeDropDown).on("change",(function(n){t.updateSelectedOptionThrottled(),e(t.rootNode).trigger("change"),n.stopPropagation()})),e(t.nativeDropDown).on("focus",(function(){e(t.rootNode).attr("data-is-focused-child-element","1")})).on("blur",(function(){e(t.rootNode).removeAttr("data-is-focused-child-element")})),Object.defineProperty(t.rootNode,"selectedIndex",{get:function(){return t.getSelectedIndex()},set:function(e){t.setSelectedIndex(e)}}),Object.defineProperty(t.rootNode,"value",{get:function(){return t.getValue()},set:function(e){t.setValue(String(e||""))}}),Object.defineProperty(t.rootNode,"disabled",{get:function(){return t.isDisabled()},set:function(e){t.setDisabled(!!e)}}),Object.defineProperty(t.rootNode,"readOnly",{get:function(){return t.isReadOnly()},set:function(e){t.setReadOnly(!!e)}}),Object.defineProperty(t.rootNode,"add",{get:function(){return function(){t.add.apply(t,arguments)}}}),Object.defineProperty(t.rootNode,"remove",{get:function(){return function(){t.remove.apply(t,arguments)}}}),Object.defineProperty(t.rootNode,"options",{get:function(){return t.getOptions()}})}(O.a.getJQuery(),this)}},{key:"setDisabled",value:function(e){p()(E()(n.prototype),"setDisabled",this).call(this,e),this.nativeDropDown.disabled=this.isDisabled()}},{key:"setReadOnly",value:function(e){p()(E()(n.prototype),"setReadOnly",this).call(this,e),this.nativeDropDown.readOnly=this.isReadOnly()}},{key:"setAttribute",value:function(e,t){switch(e){case"json-options":try{for(var i=JSON.parse(t);this.getOptions().length;)this.remove(0);if(!i||!i.length)return;for(var r=0,a=i.length;r<a;r++){var o=C.a.create(this,String(i[r].id||""),String(i[r].name||i[r].id||""));this.add(o)}}catch(l){console.warn('Failed to set UIDropdown attribute "json-options": ',l)}break;case"json-value":try{var s=JSON.parse(t||"");this.setValue(s)}catch(l){console.warn('Failed to set UIDropdown attribute "json-value": ',l)}break;default:p()(E()(n.prototype),"setAttribute",this).call(this,e,t)}}}],[{key:"upgradeDropdown",value:function(e){for(var t,i=new n,r=0,a=e.options.length;r<a;r++)t=C.a.create(i,e.options[r].value,e.options[r].text),i.add(t);return i.setValue(e.value),e.parentNode&&(e.parentNode.insertBefore(i.getRootNode(),e),e.parentNode.removeChild(e)),i}}]),n}(v.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(5),r=n.n(i),a=n(0),o=n.n(a),s=n(9),l=function e(){r()(this,e)};o()(l,"getPlanIdByPlanName",(function(e){switch(e.toLowerCase()){case s.m.USER_PLAN_GOLD.toLowerCase():return s.l.GOLD;case s.m.USER_PLAN_PLATINUM.toLowerCase():return s.l.PLATINUM;case s.m.USER_PLAN_PROFESSIONAL.toLowerCase():return s.l.PROFESSIONAL;case s.m.USER_PLAN_CORPORATE.toLowerCase():return s.l.CORPORATE;case s.m.USER_PLAN_FREE.toLowerCase():case s.m.USER_PLAN_STARTER.toLowerCase():case s.m.USER_PLAN_SILVER.toLowerCase():default:return s.l.BASIC}}))},,function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.SET_IS_OPEN="setIsOpen",e.SET_VALIDATED_EMAIL="setValidatedEmail"}(i||(i={}))},function(e,t,n){"use strict";var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(17),u=n.n(c),d=n(7),p=n.n(d),h=n(8),_=n.n(h),g=n(4),m=n.n(g),f=n(0),E=n.n(f),y=n(51),T=n(24),v=n(47),O=n(14),b=n(116),C=n(66),I=n(71),R=n(81),P=n(171),N=n(23),A=n(13);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var L=function(){function e(t){r()(this,e),E()(this,"CONFIGURATION",void 0),E()(this,"rootNode",void 0),E()(this,"toWhoComponent",void 0),E()(this,"toWhoEmailComponent",void 0),E()(this,"i18n",void 0),E()(this,"recipientEmailValidator",void 0),E()(this,"getTagsLimit",void 0),E()(this,"triggerRecipientPaywall",void 0),E()(this,"onSendToFocus",void 0),E()(this,"onSendToVariableOpen",void 0),E()(this,"onSendToVariableInsert",void 0),E()(this,"features",void 0),this.CONFIGURATION=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.createDefaultConfiguration(),{},t),this.features=I.a.getInstance()}return o()(e,[{key:"getRootNode",value:function(){return this.rootNode}}]),o()(e,[{key:"withI18n",value:function(e){return this.i18n=e,this}},{key:"withRecipientEmailValidator",value:function(e){return this.recipientEmailValidator=e,this}},{key:"initialize",value:function(){var e=this,t=this.getTagsLimit()||1/0;this.rootNode=document.createElement("div"),this.getRootNode().setAttribute("data-role","rule-recipient"),this.toWhoComponent=new P.b,this.toWhoComponent.getRoot().setAttribute("data-name","to-who"),this.toWhoComponent.getRoot().onclick=function(e){e.stopPropagation()},this.toWhoComponent.setValue(this.CONFIGURATION.selectedValue),this.i18n.translateDOMNode(this.toWhoComponent.getRoot()),this.toWhoEmailComponent=N.a.createElement(N.a.ELEMENT_TYPE_TAGS_LIST,{componentName:R.a.COMPONENT_TYPE_SEND_TO,allowText:!0,allowKeywords:!0,customErrorMessage:"Please provide a valid email address",textValidationCallback:this.recipientEmailValidator,createValuesCallback:function(){return e.CONFIGURATION.emailValuesList},placeholder:"Type an email",tagsLimit:t,canSeeNewPlans:this.features.isPaywallsV2Active(),validationError:this.i18n.translateText("notifications_recipients_limit_reached",t.toString())}),this.toWhoEmailComponent.getDropdownContainer().setAttribute("title",A.a.getUiTranslatedString("notifications_tooltip_add_fields","Add fields from the form and variables")),this.toWhoEmailComponent.getRootNode().setAttribute("data-name","to-who-email"),this.toWhoEmailComponent.on("tags-limit-reached",(function(){e.triggerRecipientPaywall()})),this.toWhoEmailComponent.on("focus",(function(){e.onSendToFocus&&e.onSendToFocus()})),this.toWhoEmailComponent.on("dropdown-open",(function(){e.onSendToVariableOpen&&e.onSendToVariableOpen()})),this.toWhoEmailComponent.on("ui_tags_container_variable_insert",(function(){e.onSendToVariableInsert&&e.onSendToVariableInsert()})),this.setTagValues(this.CONFIGURATION.defaultTagValues),this.getRootNode().appendChild(this.toWhoComponent.getRoot()),this.getRootNode().appendChild(this.toWhoEmailComponent.getRootNode())}},{key:"getEmailValuesList",value:function(){return this.CONFIGURATION.emailValuesList}},{key:"getTagValues",value:function(){for(var e=this.toWhoEmailComponent.getValue(),t=0,n=e.length;t<n;t++)e[t].value===e[t].caption&&(e[t].isRegularTag=!0);return e}},{key:"setTagValues",value:function(e){this.toWhoEmailComponent.setValue(e)}},{key:"getSelectedValue",value:function(){return this.toWhoComponent.getValue()}}],[{key:"createDefaultConfiguration",value:function(){return{emailValuesList:[],defaultTagValues:[]}}}]),e}();function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _()(this,n)}}n.d(t,"a",(function(){return k}));var k=function(e){p()(n,e);var t=w(n);function n(e,i,a,o,s){var c;return r()(this,n),c=t.call(this,e,i,a),E()(l()(c),"formDocument",void 0),E()(l()(c),"abilityService",void 0),E()(l()(c),"userService",void 0),E()(l()(c),"ruleRecipientConfiguration",void 0),E()(l()(c),"divRuleRecipient",void 0),E()(l()(c),"ruleRecipient",void 0),E()(l()(c),"currentModel",void 0),c.abilityService=o,c.currentModel=s,c.ruleRecipientConfiguration=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a.ruleRecipientConfiguration),c.userService=v.a.getInstance(),c}return o()(n,[{key:"withFormDocument",value:function(e){return this.formDocument=e,this}},{key:"initVars",value:function(){u()(m()(n.prototype),"initVars",this).call(this),this.divRuleRecipient=this.divRuleContent.querySelector(n.QUERY_SELECTOR_RULE_RECIPIENT)}},{key:"initCustomRuleComponent",value:function(){this.ruleRecipient=new L(this.ruleRecipientConfiguration).withI18n(this.i18n).withRecipientEmailValidator(this.getRecipientEmailValidator.bind(this)),this.ruleRecipient.getTagsLimit=this.getTagsLimitToRecipients.bind(this),this.ruleRecipient.triggerRecipientPaywall=this.triggerRecipientsPaywall.bind(this),this.ruleRecipient.onSendToFocus=this.onSendToFocus,this.ruleRecipient.onSendToVariableOpen=this.onSendToVariableOpen,this.ruleRecipient.onSendToVariableInsert=this.onSendToVariableInsert,this.ruleRecipient.initialize(),this.divRuleRecipient.appendChild(this.ruleRecipient.getRootNode())}},{key:"onDuplicateBtnClick",value:function(){this.currentModel&&!this.abilityService.can(C.a.COUNT_EMAIL_RULES,this.currentModel)||u()(m()(n.prototype),"onDuplicateBtnClick",this).call(this)}},{key:"getRuleConditionConfigVariables",value:function(e){return Object(y.h)(e,this.formDocument,this.i18n)}},{key:"getRuleContainerInstance",value:function(e,t){return new n(this.cloneDivRuleContainer,this.rulePosition,{ruleRecipientConfiguration:{emailValuesList:this.ruleRecipient.getEmailValuesList(),defaultTagValues:this.ruleRecipient.getTagValues(),selectedValue:this.ruleRecipient.getSelectedValue()},ruleConditionConfigurations:e,ruleStatementConfigurations:t},this.abilityService).withFormDocument(this.formDocument).withI18n(this.i18n)}},{key:"onVariableBeforeChange",value:function(){return this.abilityService.can(C.a.COUNT_EMAIL_RULES,this.currentModel)}},{key:"getRecipientEmailValidator",value:function(e){return this.formDocument.getEngine().getValidator().validate(e,T.a.VALIDATOR_TYPE_EMAIL)}},{key:"getTagsLimitToRecipients",value:function(){return this.userService.getLimitForFeature(O.a.ADD_NOTIFICATION_RECIPIENT)}},{key:"triggerRecipientsPaywall",value:function(){this.trigger("count-email-recipients-not-supported")}},{key:"getSendToOnly",value:function(){return this.ruleRecipient.getSelectedValue().hookType===P.a.TRIGGER_ONLY_SEND_TO}},{key:"getRuleRecipients",value:function(){return this.ruleRecipient.getTagValues()}},{key:"updateRuleRecipients",value:function(e){this.ruleRecipient.setTagValues(e)}}]),n}(b.b);E()(k,"QUERY_SELECTOR_RULE_RECIPIENT",'div[data-role="placeholder"][data-control-name="rule-recipient"]')},,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d);function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var _=function(e){l()(n,e);var t=h(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"logError",value:function(e,t,n,i){e.POST("/v2/logging/detailedLog",{message:t,priority:n,source:i})}}]),n}(n(151).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(26),_=n(64);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var m=function(e){l()(n,e);var t=g(n);function n(e){var i;return r()(this,n),i=t.call(this,e),$(i.valuesSection).on("keydown",(function(e){e.keyCode!==h.a.KEY_SPACE&&e.keyCode!==h.a.KEY_ENTER||(i.replaceFirstTextNodeWithTag(),e.preventDefault())})),i.valuesSection.addEventListener("blur",(function(e){i.replaceFirstTextNodeWithTag(),i.valuesSection.blur()})),i}return o()(n,[{key:"replaceFirstTextNodeWithTag",value:function(){for(var e=this.valuesSection.childNodes,t=null,n=0,i=e.length;n<i;n++)if(e[n].nodeType===Node.TEXT_NODE&&e[n].textContent.trim().length>0){t=e[n];break}if(null!==t){var r=t.textContent.trim();if(this.isTagLimitReached(r))return this.trigger("tags-limit-reached"),void this.addError(this.configuration.validationError||"");this.addTag(r,r,!1,!1,_.a.APPEND_POSITION_REPLACE,t)}}}]),n}(n(225).a)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){var o;return r()(this,n),o=t.call(this,e||n.defaultProperties,n.getConfiguration(),"IProductsSetting",i,a),$("#notifications-area").on("click","div.notification a[data-trigger=products-trigger]",(function(){i.getEngine().getLoader().execCommand("track-event","payment_processors_reminder_click")})),o}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_PRODUCTS_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_SETTINGS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!1,groups:[]}}}],[{key:"getConfiguration",value:function(){return{name:"Products settings",keywords:"",typeId:f.a.PAYMENT_PRODUCTS_EDITOR_SETTING,group:m.a.PAYMENT_SETTINGS,category:"basic",visible:!1,i18nName:"",i18nKeywords:"",icon:"i123-settings",index:20}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(0),m=n.n(g),f=n(1),E=n(40),y=n(31),T=n(16);function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var O=function(e){u()(n,e);var t=v(n);function n(e,i,a){var o;r()(this,n),o=t.call(this,e||n.defaultProperties,n.getConfiguration(),"ISummarySetting",i,a);var s=i.getForm().getEngine().getJQuery(),c=l()(o);return s("#item").off("mouseover","div[data-role=review-products-trigger] > button").on("mouseover","div[data-role=review-products-trigger] > button",(function(){s(this).addClass("_hover")})).off("mouseout","div[data-role=review-products-trigger] > button").on("mouseout","div[data-role=review-products-trigger] > button",(function(){s(this).removeClass("_hover")})).off("change, input","input").on("change, input","input",(function(e){if(s('div[id="item"][data-target-setting-id="setting_payment_summary"]').length)switch(s(this).closest("div[data-role=property]").attr("data-property-name")){case f.Y.SHOW_SUMMARY_AFTER_SUBMIT:"true"===this.value?(i.getEngine().getLoader().trigger("payments_summary_show_after_submit"),i.getEngine().getLoader().execCommand("track-event","payments_summary_show_after_submit")):(i.getEngine().getLoader().trigger("payments_summary_show_on_form"),i.getEngine().getLoader().execCommand("track-event","payments_summary_show_on_form")),i.getEngine().getLoader().trigger("payments_status_changed");break;case f.Y.SHOW_REALTIME_SUMMARY:this.checked?i.getEngine().getLoader().execCommand("track-event","payments_summary_realtime_on"):i.getEngine().getLoader().execCommand("track-event","payments_summary_realtime_off");break;case f.Y.COLUMNS:c.updateColumnName(this,f.u.INPUT);break;default:i.getEngine().getLoader().trigger("payments_status_changed")}})).off("click","button.visibility-button").on("click","button.visibility-button",(function(e){o.updateColumnVisibility(e.target)})).off("blur",'[data-property-name="columns"] .list-element > input').on("blur",'[data-property-name="columns"] .list-element > input',(function(e){o.updateColumnName(e.target,f.u.BLUR)})),o}return o()(n,[{key:"getTypeId",value:function(){return T.a.PAYMENT_SUMMARY_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return y.a.PAYMENT_SETTINGS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!1,hasProductsTrigger:!0,groups:[{name:"order details",i18nName:"edt_UI_setting_type_order_details_group_name",label:"ORDER DETAILS",properties:[{label:"Currency",type:"int",propertyFQN:"currencyId",i18nName:"edt_UI_setting_summary_currency"},{label:"Discount on total",type:"int",propertyFQN:"discountOnTotal",i18nName:"edt_UI_setting_summary_discount_on_total"},{label:"Tax on total",type:"int",propertyFQN:"taxOnTotal",i18nName:"edt_UI_setting_summary_tax_on_total"}]},{name:"rows",i18nName:"edt_UI_setting_type_rows_group_name",label:"ROWS",properties:[{label:"Show detailed formula",type:"boolean",propertyFQN:"showDetailedFormula",i18nName:"edt_UI_setting_summary_show_detailed_formula"},{label:"Show Discount & Tax",type:"boolean",propertyFQN:"showDiscountAndTax",i18nName:"edt_UI_setting_summary_show_discount_and_tax"}]},{name:"payment summary",i18nName:"edt_UI_setting_type_summary_group_name",label:"SUMMARY",properties:[{label:"Show summary",type:"boolean",propertyFQN:"showSummaryAfterSubmit",i18nName:"payment_summary_show_summary"},{label:"Show live order summary",type:"boolean",propertyFQN:"showRealTimeSummary",i18nName:"payment_summary_show_live_order_summary"}]},{name:"columns",i18nName:"edt_UI_setting_type_columns_group_name",label:"COLUMNS",properties:[{label:null,type:"array",propertyFQN:"columns",i18nName:null}]}]}}},{key:"updateColumnName",value:function(e,t){var n={name:e.parentElement.getAttribute("data-name"),value:e.value};this.document.getEngine().getLoader().trigger("payments_column_name_changed",t,n)}},{key:"updateColumnVisibility",value:function(e){var t={name:e.parentElement.getAttribute("data-name"),isVisible:"true"===e.getAttribute("data-column-is-visible")};this.document.getEngine().getLoader().trigger("payments_column_visibility_changed",t)}}],[{key:"getConfiguration",value:function(){return{name:"Payment summary",keywords:"",typeId:T.a.PAYMENT_SUMMARY_EDITOR_SETTING,group:y.a.PAYMENT_SETTINGS,category:"basic",visible:!0,i18nName:"edt_UI_setting_type_summary_name",i18nKeywords:"edt_UI_setting_type_summary_keywords",icon:"i123-setting_payment_summary",index:30}}}]),n}(E.a);m()(O,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){return r()(this,n),t.call(this,e||n.defaultProperties,n.getConfiguration(),"ICouponSettings",i,a)}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_COUPON_CODES_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_SETTINGS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,groups:[{name:"settings",i18nName:null,label:"Settings",properties:[{label:"Coupon Codes",propertyFQN:"codes",i18nName:null,type:"ICouponCodeSettings[]"}]}]}}}],[{key:"getConfiguration",value:function(){return{name:"Coupon Codes",keywords:"coupon codes payments",typeId:f.a.PAYMENT_COUPON_CODES_EDITOR_SETTING,group:m.a.PAYMENT_SETTINGS,category:"basic",visible:!1,i18nName:"edt_UI_attribute_coupons",i18nKeywords:"edt_UI_attribute_coupons",icon:"i123-field_coupon",index:10}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){var o;r()(this,n),o=t.call(this,e||n.defaultProperties,n.getConfiguration(),"IPaypalSettings",i,a);var s=i.getEngine().getLoader();return o.on("property-change",(function(e,t,n,i){var r=["useRecurrentPayment","isDonation","useDetailedInvoice"];if(r.indexOf(e)>-1){var a=!1;t?(a=!0,r.forEach((function(t){t!==e&&i.setProperty(t,!1)}))):"useRecurrentPayment"===e&&(a=!0),a&&s.getCommandDispatcher().loadEditorSettingIntoPanel(i,!0)}})),o}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){var e={hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"Account",properties:[{label:"Email address",type:"string",propertyFQN:"clientId",i18nName:"edt_UI_setting_processor_attribute_account_property_email"},{label:"Language",type:"string",propertyFQN:"language",i18nName:"edt_UI_setting_processor_attribute_account_property_language"}]},{name:"billing",i18nName:"edt_UI_setting_processor_attribute_billing_label",label:"Billing",properties:[{label:"Use recurrent payment",type:"boolean",propertyFQN:"useRecurrentPayment",i18nName:"edt_UI_setting_processor_attribute_billing_property_useRecurrentPayment"}]},{name:"shipping_information",i18nName:"edt_UI_setting_processor_attribute_shipping_label",label:"Shipping information",properties:[{label:"",type:"IPaypalShippingInformationSettings",propertyFQN:"shippingInformation",i18nName:null}]}]};return this.getProperty("useRecurrentPayment")&&(e.groups[1].properties=e.groups[1].properties.concat([{label:"Frequency",type:"int",propertyFQN:"recurrenceFrequency",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceFrequency"},{label:"Time expressed in",type:"int",propertyFQN:"recurrenceTimeUnit",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceTimeUnit"},{label:"Recurring cycles",type:"int",propertyFQN:"recurrenceCycles",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceCycles"}])),e.groups[1].properties=e.groups[1].properties.concat([{label:"Payment represents a donation",type:"boolean",propertyFQN:"isDonation",i18nName:"edt_UI_setting_processor_attribute_billing_property_isDonation"},{label:"Use detailed invoice",type:"boolean",propertyFQN:"useDetailedInvoice",i18nName:"edt_UI_setting_processor_attribute_billing_property_useDetailedInvoice"},{label:"Use shipping",type:"boolean",propertyFQN:"useShipping",i18nName:"edt_UI_setting_processor_attribute_billing_property_useShipping"}]),e}}],[{key:"getConfiguration",value:function(){var e;return{name:"PayPal",keywords:"paypal",typeId:f.a.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING,group:m.a.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_paypal",index:60,title:null===(e=g.a.translationService)||void 0===e?void 0:e.translateText("paymentProcessorTooltip_paypal")}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){return r()(this,n),t.call(this,e||n.defaultProperties,n.getConfiguration(),"IPaypalCheckoutSettings",i,a)}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"Account",properties:[{label:"Client ID",type:"string",propertyFQN:"clientId",i18nName:"edt_UI_setting_processor_attribute_account_property_clientId"},{label:"Language",type:"string",propertyFQN:"language",i18nName:"edt_UI_setting_processor_attribute_account_property_language"}]},{name:"billing",i18nName:"edt_UI_setting_processor_attribute_billing_label",label:"Billing",properties:[{label:"Use detailed invoice",type:"boolean",propertyFQN:"useDetailedInvoice",i18nName:"edt_UI_setting_processor_attribute_billing_property_useDetailedInvoice"},{label:"Use shipping",type:"boolean",propertyFQN:"useShipping",i18nName:"edt_UI_setting_processor_attribute_billing_property_useShipping"}]},{name:"shipping_information",i18nName:"edt_UI_setting_processor_attribute_shipping_label",label:"Shipping information",properties:[{label:"",type:"IPaypalShippingInformationSettings",propertyFQN:"shippingInformation",i18nName:null}]}]}}}],[{key:"getConfiguration",value:function(){var e;return{name:"PayPal Express Checkout",keywords:"paypal express checkout",typeId:f.a.PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING,group:m.a.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_paypal",index:70,title:null===(e=g.a.translationService)||void 0===e?void 0:e.translateText("paymentProcessorTooltip_paypalCheckout")}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){var o;r()(this,n),o=t.call(this,e||n.defaultProperties,n.getConfiguration(),"IPaypalProSettings",i,a);var s=i.getEngine().getLoader();return o.on("property-change",(function(e,t,n,i){"useRecurrentPayment"===e&&s.getCommandDispatcher().loadEditorSettingIntoPanel(i,!0)})),o}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_PROCESSOR_PAYPAL_PRO_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){var e={hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"Account",properties:[{label:"API Username",type:"string",propertyFQN:"apiUsername",i18nName:"edt_UI_setting_processor_attribute_account_property_apiUsername"},{label:"API Password",type:"string",propertyFQN:"apiPassword",i18nName:"edt_UI_setting_processor_attribute_account_property_apiPassword"},{label:"API Signature",type:"string",propertyFQN:"apiSignature",i18nName:"edt_UI_setting_processor_attribute_account_property_apiSignature"}]},{name:"billing",i18nName:"edt_UI_setting_processor_attribute_billing_label",label:"Billing",properties:[{label:"Use recurrent payment",type:"boolean",propertyFQN:"useRecurrentPayment",i18nName:"edt_UI_setting_processor_attribute_billing_property_useRecurrentPayment"}]}]};return this.getProperty("useRecurrentPayment")&&(e.groups[1].properties=e.groups[1].properties.concat([{label:"Frequency",type:"int",propertyFQN:"recurrenceFrequency",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceFrequency"},{label:"Time expressed in",type:"int",propertyFQN:"recurrenceTimeUnit",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceTimeUnit"},{label:"Recurring cycles",type:"int",propertyFQN:"recurrenceCycles",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceCycles"}])),e}}],[{key:"getConfiguration",value:function(){var e;return{name:"PayPal Pro",keywords:"paypal pro",typeId:f.a.PAYMENT_PROCESSOR_PAYPAL_PRO_EDITOR_SETTING,group:m.a.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_paypal",index:90,title:null===(e=g.a.translationService)||void 0===e?void 0:e.translateText("paymentProcessorTooltip_paypalPro")}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){var o;r()(this,n),o=t.call(this,e||n.defaultProperties,n.getConfiguration(),"IPaypalPayflowSetting",i,a);var s=i.getEngine().getLoader();return o.on("property-change",(function(e,t,n,i){"useRecurrentPayment"===e&&s.getCommandDispatcher().loadEditorSettingIntoPanel(i,!0)})),o}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_PROCESSOR_PAYPAL_PAYFLOW_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){var e={hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Username",type:"string",propertyFQN:"userId",i18nName:"edt_UI_setting_processor_attribute_account_property_userId"},{label:"Merchant",type:"string",propertyFQN:"merchantId",i18nName:"edt_UI_setting_processor_attribute_account_property_merchantId_paypalPayflow"},{label:"Partner",type:"string",propertyFQN:"partner",i18nName:"edt_UI_setting_processor_attribute_account_property_partner"},{label:"Password",type:"string",propertyFQN:"password",i18nName:"edt_UI_setting_processor_attribute_account_property_password"}]},{name:"billing",i18nName:"edt_UI_setting_processor_attribute_billing_label",label:"BILLING",properties:[{label:"User recurrent payment",type:"boolean",propertyFQN:"useRecurrentPayment",i18nName:"edt_UI_setting_processor_attribute_billing_property_useRecurrentPayment"}]}]};return!0===this.getProperty("useRecurrentPayment")&&(e.groups[1].properties=e.groups[1].properties.concat([{label:"Frequency",type:"int",propertyFQN:"recurrenceFrequency",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceFrequency"},{label:"Time expressed in",type:"int",propertyFQN:"recurrenceTimeUnit",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceTimeUnit"},{label:"Recurrence cycles",type:"int",propertyFQN:"recurrenceCycles",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceCycles"}])),e}}],[{key:"getConfiguration",value:function(){var e;return{name:"Paypal Payflow",keywords:"paypal payflow",typeId:f.a.PAYMENT_PROCESSOR_PAYPAL_PAYFLOW_EDITOR_SETTING,group:m.a.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_paypal",index:80,title:null===(e=g.a.translationService)||void 0===e?void 0:e.translateText("paymentProcessorTooltip_paypalPayflow")}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){var o;r()(this,n),o=t.call(this,e||n.defaultProperties,n.getConfiguration(),"IStripeSetting",i,a);var s=i.getEngine().getLoader();return o.on("property-change",(function(e,t,n,i){"useRecurrentPayment"===e&&s.getCommandDispatcher().loadEditorSettingIntoPanel(i,!0)})),o}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){var e=this.getProperty("userPubKey"),t={hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!1,isEnabled:this.getProperty("isEnabled"),needsOAuthConnect:!0,groups:[]};return null!==e&&(t.isToggleable=!0,t.groups=[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Connected Account",type:"string",propertyFQN:"userEmail",i18nName:"edt_UI_setting_processor_attribute_account_property_email_stripeCheckout"}]},{name:"billing",i18nName:"edt_UI_setting_processor_attribute_billing_label",label:"BILLING",properties:[{label:"Required billing address",type:"boolean",propertyFQN:"isBillingAddressRequired",i18nName:"edt_UI_setting_processor_attribute_billing_property_isBillingAddressRequired"},{label:"User recurrent payment",type:"boolean",propertyFQN:"useRecurrentPayment",i18nName:"edt_UI_setting_processor_attribute_billing_property_useRecurrentPayment"}]},{name:"description_information",i18nName:"edt_UI_setting_processor_attribute_description_label",label:"DESCRIPTION",properties:[{label:"",type:"string",propertyFQN:"description",i18nName:null}]}],!0===this.getProperty("useRecurrentPayment")&&(t.groups[1].properties=t.groups[1].properties.concat([{label:"Frequency",type:"int",propertyFQN:"recurrenceFrequency",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceFrequency"},{label:"Time expressed in",type:"int",propertyFQN:"recurrenceTimeUnit",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceTimeUnit"}]))),t}},{key:"oAuthDisconnect",value:function(){this.setProperty("isEnabled",!1),this.setProperty("userEmail",null),this.setProperty("userId",null),this.setProperty("userPubKey",null),this.setProperty("userSecKey",null),this.getForm().getEngine().getLoader().getCommandDispatcher().loadEditorSettingIntoPanel(this)}}],[{key:"getConfiguration",value:function(){var e;return{name:"Stripe",keywords:"stripe",typeId:f.a.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING,group:m.a.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_stripe",index:140,title:null===(e=g.a.translationService)||void 0===e?void 0:e.translateText("paymentProcessorTooltip_stripe")}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){return r()(this,n),t.call(this,e||n.defaultProperties,n.getConfiguration(),"IStripeCheckoutSetting",i,a)}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_PROCESSOR_STRIPE_CHECKOUT_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){var e=this.getProperty("userPubKey"),t={hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!1,isEnabled:this.getProperty("isEnabled"),needsOAuthConnect:!0,groups:[]};return null!==e&&(t.isToggleable=!0,t.groups=[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Connected Account",type:"string",propertyFQN:"userEmail",i18nName:"edt_UI_setting_processor_attribute_account_property_email_stripeCheckout"},{label:"Store Name",type:"string",propertyFQN:"storeName",i18nName:"edt_UI_setting_processor_attribute_account_property_storeName"},{label:"Store short description",type:"string",propertyFQN:"storeDescription",i18nName:"edt_UI_setting_processor_attribute_account_property_storeDescription"},{label:"Store image URL",type:"string",propertyFQN:"storeImage",i18nName:"edt_UI_setting_processor_attribute_account_property_storeImage"}]}]),t}},{key:"oAuthDisconnect",value:function(){this.setProperty("isEnabled",!1),this.setProperty("userEmail",null),this.setProperty("userId",null),this.setProperty("userPubKey",null),this.setProperty("userSecKey",null),this.getForm().getEngine().getLoader().getCommandDispatcher().loadEditorSettingIntoPanel(this)}}],[{key:"getConfiguration",value:function(){var e;return{name:"Stripe Checkout",keywords:"stripe checkout",typeId:f.a.PAYMENT_PROCESSOR_STRIPE_CHECKOUT_EDITOR_SETTING,group:m.a.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_stripe",index:150,title:null===(e=g.a.translationService)||void 0===e?void 0:e.translateText("paymentProcessorTooltip_stripeCheckout")}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){return r()(this,n),t.call(this,e||n.defaultProperties,n.getConfiguration(),"ISquareSettings",i,a)}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_PROCESSOR_SQUARE_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){var e={hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!1,isEnabled:this.getProperty("isEnabled"),needsOAuthConnect:!0,groups:[]};return null!==this.getProperty("oAuthToken")&&(e.isToggleable=!0,e.groups=[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Location",type:"string",propertyFQN:"locationId",i18nName:"edt_UI_setting_processor_attribute_account_property_locationId"},{label:"Locations",type:"string",propertyFQN:"locations",i18nName:"edt_UI_setting_processor_attribute_square_property_locations"}]},{name:"billing",i18nName:"edt_UI_setting_processor_attribute_billing_label",label:"BILLING",properties:[{label:"Use detailed invoice",type:"boolean",propertyFQN:"useDetailedInvoice",i18nName:"edt_UI_setting_processor_attribute_billing_property_useDetailedInvoice"}]}]),e}},{key:"oAuthDisconnect",value:function(){this.setProperty("isEnabled",!1),this.setProperty("oAuthToken",null),this.setProperty("locations",n.defaultProperties.locations),this.setProperty("locationId",null),this.setProperty("useDetailedInvoice",n.defaultProperties.useDetailedInvoice),this.getForm().getEngine().getLoader().getCommandDispatcher().loadEditorSettingIntoPanel(this)}}],[{key:"getConfiguration",value:function(){var e;return{name:"Square",keywords:"square",typeId:f.a.PAYMENT_PROCESSOR_SQUARE_EDITOR_SETTING,group:m.a.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_square",index:130,title:null===(e=g.a.translationService)||void 0===e?void 0:e.translateText("paymentProcessorTooltip_square")}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){return r()(this,n),t.call(this,e||n.defaultProperties,n.getConfiguration(),"IBraintreeSetting",i,a)}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_PROCESSOR_BRAINTREE_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Merchant ID",type:"string",propertyFQN:"merchantId",i18nName:"edt_UI_setting_processor_attribute_account_property_merchantId"},{label:"Public Key",type:"string",propertyFQN:"publicKey",i18nName:"edt_UI_setting_processor_attribute_account_property_publicKey"},{label:"Private Key",type:"string",propertyFQN:"privateKey",i18nName:"edt_UI_setting_processor_attribute_account_property_privateKey"},{label:"Plan ID",type:"string",propertyFQN:"planId",i18nName:"edt_UI_setting_processor_attribute_account_property_planId"}]},{name:"billing",i18nName:"edt_UI_setting_processor_attribute_billing_label",label:"BILLING",properties:[{label:"Settlement",type:"boolean",propertyFQN:"automaticPaymentSettlement",i18nName:"edt_UI_setting_processor_attribute_billing_property_settlement"},{label:"Billing Address",type:"boolean",propertyFQN:"requireBillingAddress",i18nName:"edt_UI_setting_processor_attribute_billing_property_billingAddress"}]}]}}}],[{key:"getConfiguration",value:function(){var e;return{name:"Braintree",keywords:"braintree",typeId:f.a.PAYMENT_PROCESSOR_BRAINTREE_EDITOR_SETTING,group:m.a.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_braintree",index:20,title:null===(e=g.a.translationService)||void 0===e?void 0:e.translateText("paymentProcessorTooltip_braintree")}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){return r()(this,n),t.call(this,e||n.defaultProperties,n.getConfiguration(),"IPayUSetting",i,a)}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_PROCESSOR_PAYU_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Merchant ID",type:"string",propertyFQN:"merchantId",i18nName:"edt_UI_setting_processor_attribute_account_property_merchantId"},{label:"Encryption Key",type:"string",propertyFQN:"encryptionKey",i18nName:"edt_UI_setting_processor_attribute_account_property_encryptionKey"},{label:"Collect VAT",type:"boolean",propertyFQN:"collectVat",i18nName:"edt_UI_setting_processor_attribute_account_property_collectVat"}]}]}}}],[{key:"getConfiguration",value:function(){var e;return{name:"PayU",keywords:"payu",typeId:f.a.PAYMENT_PROCESSOR_PAYU_EDITOR_SETTING,group:m.a.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_payu",index:100,title:null===(e=g.a.translationService)||void 0===e?void 0:e.translateText("paymentProcessorTooltip_payU")}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){return r()(this,n),t.call(this,e||n.defaultProperties,n.getConfiguration(),"ISisowSetting",i,a)}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_PROCESSOR_SISOW_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"Account",properties:[{label:"Merchant ID",type:"string",propertyFQN:"merchantId",i18nName:"edt_UI_setting_processor_attribute_account_property_merchantId"},{label:"Merchant Key",type:"string",propertyFQN:"merchantKey",i18nName:"edt_UI_setting_processor_attribute_account_property_merchantKey"}]}]}}}],[{key:"getConfiguration",value:function(){var e;return{name:"Sisow",keywords:"sisow",typeId:f.a.PAYMENT_PROCESSOR_SISOW_EDITOR_SETTING,group:m.a.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_sisow",index:120,title:null===(e=g.a.translationService)||void 0===e?void 0:e.translateText("paymentProcessorTooltip_sisow")}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){return r()(this,n),t.call(this,e||n.defaultProperties,n.getConfiguration(),"IPayfastSetting",i,a)}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_PROCESSOR_PAYFAST_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Merchant ID",type:"string",propertyFQN:"merchantId",i18nName:"edt_UI_setting_processor_attribute_account_property_merchantId"},{label:"Merchant Key",type:"string",propertyFQN:"merchantKey",i18nName:"edt_UI_setting_processor_attribute_account_property_merchantKey"}]}]}}}],[{key:"getConfiguration",value:function(){var e;return{name:"Payfast",keywords:"payfast",typeId:f.a.PAYMENT_PROCESSOR_PAYFAST_EDITOR_SETTING,group:m.a.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_payfast",index:50,title:null===(e=g.a.translationService)||void 0===e?void 0:e.translateText("paymentProcessorTooltip_payfast")}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){return r()(this,n),t.call(this,e||n.defaultProperties,n.getConfiguration(),"IWorldpaySetting",i,a)}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_PROCESSOR_WORLDPAY_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Client Key",type:"string",propertyFQN:"clientKey",i18nName:"edt_UI_setting_processor_attribute_account_property_clientKey"},{label:"Service Key",type:"string",propertyFQN:"serviceKey",i18nName:"edt_UI_setting_processor_attribute_account_property_serviceKey"}]}]}}}],[{key:"getConfiguration",value:function(){var e;return{name:"Worldpay",keywords:"worldpay",typeId:f.a.PAYMENT_PROCESSOR_WORLDPAY_EDITOR_SETTING,group:m.a.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_worldpay",index:160,title:null===(e=g.a.translationService)||void 0===e?void 0:e.translateText("paymentProcessorTooltip_worldpay")}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){return r()(this,n),t.call(this,e||n.defaultProperties,n.getConfiguration(),"IAuthorizeSetting",i,a)}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_PROCESSOR_AUTHORIZE_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"API Login ID",type:"string",propertyFQN:"apiLoginId",i18nName:"edt_UI_setting_processor_attribute_account_property_apiLoginId"},{label:"Transaction Key",type:"string",propertyFQN:"transactionKey",i18nName:"edt_UI_setting_processor_attribute_account_property_transactionKey"},{label:"Create a Customer Information Profile (CIM)",type:"boolean",propertyFQN:"cimFlag",i18nName:"edt_UI_setting_processor_attribute_account_property_cimFlag"}]}]}}}],[{key:"getConfiguration",value:function(){var e;return{name:"Authorize.Net",keywords:"authorize net",typeId:f.a.PAYMENT_PROCESSOR_AUTHORIZE_EDITOR_SETTING,group:m.a.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_authorize_net",index:10,title:null===(e=g.a.translationService)||void 0===e?void 0:e.translateText("paymentProcessorTooltip_authorize")}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){return r()(this,n),t.call(this,e||n.defaultProperties,n.getConfiguration(),"ISagepaySetting",i,a)}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_PROCESSOR_SAGEPAY_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"Account",properties:[{label:"Vendor name",type:"string",propertyFQN:"vendorName",i18nName:"edt_UI_setting_processor_attribute_account_property_vendorName"},{label:"Encryption password",type:"string",propertyFQN:"encryptionPassword",i18nName:"edt_UI_setting_processor_attribute_account_property_encryptionPassword"},{label:"Vendor email (optional)",type:"string",propertyFQN:"vendorEmail",i18nName:"edt_UI_setting_processor_attribute_account_property_vendorEmail"},{label:"Partner ID (optional)",type:"string",propertyFQN:"partnerId",i18nName:"edt_UI_setting_processor_attribute_account_property_partnerId"}]},{name:"billing",i18nName:"edt_UI_setting_processor_attribute_billing_label",label:"Billing",properties:[{label:"Customer email",type:"string",propertyFQN:"customerEmail",i18nName:"edt_UI_setting_processor_attribute_billing_property_customerEmail"}]}]}}}],[{key:"getConfiguration",value:function(){var e;return{name:"SagePay",keywords:"sagepay",typeId:f.a.PAYMENT_PROCESSOR_SAGEPAY_EDITOR_SETTING,group:m.a.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_sagepay",index:110,title:null===(e=g.a.translationService)||void 0===e?void 0:e.translateText("paymentProcessorTooltip_sagepay")}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){var o;return r()(this,n),(o=t.call(this,e||n.defaultProperties,n.getConfiguration(),"IFreshbooksSetting",i,a)).on("property-change",(function(e,t,n,r){"useOAuth"===e&&i.getEngine().getLoader().getCommandDispatcher().loadEditorSettingIntoPanel(r)})),o}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){var e={hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!1,isEnabled:this.getProperty("isEnabled"),needsOAuthConnect:!1,groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Use OAuth authorization",type:"boolean",propertyFQN:"useOAuth",i18nName:"edt_UI_setting_processor_attribute_account_property_useOAuth"}]},{name:"client_information",i18nName:"edt_UI_setting_processor_attribute_clientInformation_label",label:"CLIENT INFORMATION",properties:[{label:"",type:"IFreshbooksClientInformationSettings",propertyFQN:"clientInformation",i18nName:null},{label:"Update client if email exists",type:"boolean",propertyFQN:"updateMatchingEmailClient",i18nName:"edt_UI_setting_processor_attribute_billing_property_updateClient"}]},{name:"invoice_information",i18nName:"edt_UI_setting_processor_attribute_invoiceInformation_label",label:"INVOICE / ESTIMATE",properties:[{label:"",type:"IFreshbooksInvoiceInformationSettings",propertyFQN:"invoiceInformation",i18nName:null}]},{name:"options",i18nName:"edt_UI_setting_processor_attribute_options_label",label:"OPTIONS",properties:[{label:"Email on failure",type:"string",propertyFQN:"failureEmail",i18nName:"edt_UI_setting_processor_attribute_billing_property_failureEmail"}]}]};return this.getProperty("useOAuth")?(e.needsOAuthConnect=!0,this.getProperty("oAuthToken")&&(e.isToggleable=!0)):(e.isToggleable=!0,e.groups[0].properties.push({label:"URL",type:"string",propertyFQN:"oAuthCustomUrl",i18nName:"edt_UI_setting_processor_attribute_account_property_oAuthCustomUrl"},{label:"Token",type:"string",propertyFQN:"oAuthCustomToken",i18nName:"edt_UI_setting_processor_attribute_account_property_oAuthCustomToken"})),e}},{key:"oAuthDisconnect",value:function(){this.setProperty("isEnabled",!1),this.setProperty("oAuthToken",null),this.getForm().getEngine().getLoader().getCommandDispatcher().loadEditorSettingIntoPanel(this)}}],[{key:"getConfiguration",value:function(){var e;return{name:"FreshBooks",keywords:"freshbooks",typeId:f.a.PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING,group:m.a.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_freshbooks",index:40,title:null===(e=g.a.translationService)||void 0===e?void 0:e.translateText("paymentProcessorTooltip_feshbooks")}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(0),_=n.n(h),g=n(40),m=n(31),f=n(16);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=E(n);function n(e,i,a){return r()(this,n),t.call(this,e||n.defaultProperties,n.getConfiguration(),"ICivicaSetting",i,a)}return o()(n,[{key:"getTypeId",value:function(){return f.a.PAYMENT_PROCESSOR_CIVICA_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return m.a.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"Account",properties:[{label:"Paylink",type:"string",propertyFQN:"payLink",i18nName:"edt_UI_setting_processor_attribute_account_property_payLink"},{label:"Calling application ID",type:"string",propertyFQN:"callingApplicationId",i18nName:"edt_UI_setting_processor_attribute_account_property_callingApplicationId"},{label:"Account Reference",type:"string",propertyFQN:"accountReference",i18nName:"edt_UI_setting_processor_attribute_account_property_accountReference"},{label:"Fund code",type:"string",propertyFQN:"fundCode",i18nName:"edt_UI_setting_processor_attribute_account_property_fundCode"},{label:"VAT code (optional)",type:"string",propertyFQN:"vatCode",i18nName:"edt_UI_setting_processor_attribute_account_property_vatCode"},{label:"General ledger code (optional)",type:"string",propertyFQN:"generalLedgerCode",i18nName:"edt_UI_setting_processor_attribute_account_property_generalLedgerCode"}]},{name:"description",i18nName:"edt_UI_setting_processor_attribute_description_label",label:"Description",properties:[{label:"Description",type:"string",propertyFQN:"description",i18nName:"edt_UI_setting_processor_attribute_description_property_description_civica"}]},{name:"testing_mode",i18nName:"edt_UI_setting_processor_attribute_testing_label",label:"Testing mode",properties:[{label:"Paylink for testing",type:"string",propertyFQN:"payLinkForTesting",i18nName:"edt_UI_setting_processor_attribute_account_property_payLinkForTesting"}]}]}}}],[{key:"getConfiguration",value:function(){var e;return{name:"Civica",keywords:"civica",typeId:f.a.PAYMENT_PROCESSOR_CIVICA_EDITOR_SETTING,group:m.a.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_civica",index:30,title:null===(e=g.a.translationService)||void 0===e?void 0:e.translateText("paymentProcessorTooltip_civica")}}}]),n}(g.a);_()(y,"defaultProperties",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=function(){function e(t){r()(this,e),l()(this,"element",void 0),l()(this,"onclick",void 0),t.onClick&&(this.onclick=t.onClick),this.constructElement(),this.setState(t)}return o()(e,[{key:"constructElement",value:function(){this.element=document.createElement("button"),this.element.setAttribute("type","button"),this.element.onclick=this.clickHandler.bind(this)}},{key:"getElement",value:function(){return this.element}},{key:"setState",value:function(e){e.label&&(this.element.innerHTML=e.label),e.isDisabled?(this.element.setAttribute("disabled","disabled"),this.element.setAttribute("title",e.disabledTitle||"")):(this.element.removeAttribute("disabled"),this.element.setAttribute("title",e.title||"")),e.classList&&(this.element.className=e.classList),e.testId&&this.element.setAttribute("data-testid",e.testId)}},{key:"clickHandler",value:function(e){this.onclick&&this.onclick(e)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var i=n(11),r=n.n(i),a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(15);n(551);function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var f=r()("div",{className:"loading-bar"}),E=r()("div",{className:"loading-bar"}),y=r()("div",{className:"loading-bar"}),T=function(e){u()(n,e);var t=m(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){return r()("div",{className:this.props.isDisplayed?"app-loader":"app-loader hidden",style:this.props.style},void 0,f,E,y)}}]),n}(g.Component)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return UIMenuPopup}));var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(4),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__),core_base_EventEmitter__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(29);function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(e);if(t){var r=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this,n)}}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var UIMenuPopup=function(_EventEmitter){_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(UIMenuPopup,_EventEmitter);var _super=_createSuper(UIMenuPopup);function UIMenuPopup(rootNode,$){var _this;return _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this,UIMenuPopup),_this=_super.call(this),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this),"rootNode",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this),"menuItems",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this),"jq",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this),"overlayElement",void 0),_this.rootNode=rootNode,_this.menuItems=eval(rootNode.getAttribute("data-menu-items")),_this.jq=$,_this.attachEvents(),UIMenuPopup.initializeEvents($),_this}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(UIMenuPopup,[{key:"attachEvents",value:function attachEvents(){var _this2=this,self=this;this.jq(this.rootNode).on("click",(function(e){e.stopPropagation(),!!_this2.overlayElement&&!!_this2.overlayElement.parentNode?_this2.closeMenu():_this2.openMenu()})),window.addEventListener("wheel",(function(e){self.closeMenu()}),!0),window.addEventListener("resize",(function(e){self.closeMenu()}),!0),this.on("refreshOptions",(function(){_this2.menuItems=eval(_this2.rootNode.getAttribute("data-menu-items")),_this2.overlayElement=_this2.createMenuContainer()}))}},{key:"openMenu",value:function(){this.closeMenu(),this.overlayElement=this.overlayElement||this.createMenuContainer(),document.body.appendChild(this.overlayElement);var e=this.overlayElement.getBoundingClientRect(),t=this.rootNode.getBoundingClientRect(),n=document.body.getBoundingClientRect();t.top+t.height+e.height<n.height?this.overlayElement.style.top="".concat(t.top+t.height,"px"):this.overlayElement.style.top="".concat(t.top-e.height+10,"px"),this.overlayElement.style.left="".concat(t.left+t.width-e.width,"px")}},{key:"createMenuContainer",value:function(){var e=this,t=document.createElement("div");t.setAttribute("data-menu-container","");for(var n=0,i=this.menuItems.length;n<i;n++){var r=this.createMenuItem(this.menuItems[n].name,this.menuItems[n].action);t.appendChild(r)}return this.jq(t).on("mousedown","> div > div",(function(t){e.selectElement(this.getAttribute("data-action")),e.closeMenu()})),t}},{key:"createMenuItem",value:function(e,t){var n=document.createElement("div"),i=document.createElement("div");return i.appendChild(document.createTextNode(e)),i.setAttribute("data-action",String(t||"")),n.appendChild(i),n}},{key:"selectElement",value:function(e){this.trigger(e)}},{key:"closeMenu",value:function(){this.overlayElement&&this.overlayElement.parentNode&&this.overlayElement.parentNode.removeChild(this.overlayElement)}}],[{key:"initializeEvents",value:function(e){this.eventsInitialized||(document.body.addEventListener("mousedown",(function(t){var n=t.target||t.srcElement;e(n).is("body > [data-menu-container], body > [data-menu-container] *")||e("body > [data-menu-container]").remove()}),!0),document.addEventListener("scroll",(function(t){e("body > [data-menu-container]").remove()})),e("[data-role=scrollable-container]").on("scroll",(function(){e("body > [data-menu-container]").remove()})),this.eventsInitialized=!0)}}]),UIMenuPopup}(core_base_EventEmitter__WEBPACK_IMPORTED_MODULE_7__.a);_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(UIMenuPopup,"eventsInitialized",void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(0),m=n.n(g);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var E=function(e){u()(n,e);var t=f(n);function n(e,i,a,o){var s;return r()(this,n),s=t.call(this),m()(l()(s),"translationsService",void 0),m()(l()(s),"code3",void 0),m()(l()(s),"code2",void 0),m()(l()(s),"default",void 0),m()(l()(s),"name",void 0),m()(l()(s),"nativeName",void 0),s.translationsService=e,s.code3=i,s.code2=a||null,s.default=o,s.init(),s}return o()(n,[{key:"getCode3",value:function(){return this.code3}},{key:"getCode2",value:function(){return this.code2}},{key:"getName",value:function(){return this.name}},{key:"getNativeName",value:function(){return this.nativeName}},{key:"isDefault",value:function(){return this.default}},{key:"setDefault",value:function(e){return this.default=!!e,this}},{key:"init",value:function(){for(var e=0,t=this.translationsService.enumeratePlatformSupportedLanguages(),n=t.length;e<n;e++)if(t[e].code3===this.code3){this.name=t[e].name,this.nativeName=t[e].native_name;break}}}]),n}(n(29).a)},,,,,,function(e,t,n){"use strict";var i,r=n(36),a=n.n(r),o=n(124),s=n.n(o);n(47);!function(e){e.PLAN="plan",e.BUNDLE="bundle",e.PLACER="placer"}(i||(i={}));n(32),n(19);var l=n(91);n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.formId,n=void 0===t?5732693:t,i=e.defaultWidth,r=void 0===i?"650px":i,a="contactUsForm",o="modernLB-container-".concat(a),s=document.getElementById(o),l=document.head.querySelectorAll("script#embed-form-".concat(n));l.length&&l.forEach((function(e){e.remove()})),s&&s.remove();var c=document.createElement("script");c.setAttribute("defer",""),c.setAttribute("src","//form.123formbuilder.com/embed/".concat(n,".js?type=lightbox")),c.setAttribute("type","text/javascript"),c.setAttribute("id","embed-form-".concat(n)),c.setAttribute("data-modal-container-id",a),c.dataset.role="form",c.dataset.defaultWidth=r,c.dataset.embedType="lightbox-auto-popup",c.dataset.embedPopupSeconds="0";var u=document.head.querySelector("script");document.head.insertBefore(c,u)},u=function(){var e=s()(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l.a(window.jQuery,""),e.next=3,t.GET("/ajax-call.php?service=avangate&do=prices");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},function(e,t,n){"use strict";var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(0),m=n.n(g),f=n(64),E=n(26),y=n(1),T=n(172),v=n(153),O=n(46),b=n(96),C=n(35),I=function(){function e(){r()(this,e)}return o()(e,null,[{key:"isElementASpace",value:function(t){return t.textContent===String.fromCharCode(e.THIN_SPACE_CHAR_CODE)}},{key:"addNoFollowOnLinks",value:function(e){var t=document.createElement("div"),n=t.getElementsByTagName("a");return t.innerHTML=e,Array.prototype.forEach.call(n,(function(e){return e.setAttribute("rel","nofollow ugc")})),t.innerHTML}}]),e}();m()(I,"THIN_SPACE_CHAR_CODE",8201);var R=n(51);function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}n.d(t,"a",(function(){return N}));var N=function(e){u()(n,e);var t=P(n);function n(e){var i;if(r()(this,n),i=t.call(this,e.componentName),m()(l()(i),"maxNumOfTags",1/0),m()(l()(i),"isSingleTagsList",!1),m()(l()(i),"configuration",void 0),m()(l()(i),"valuesSection",void 0),m()(l()(i),"nativeDropdown",void 0),i.configuration=e,i.valuesSection=document.createElement("div"),i.valuesSection.dataset.role="values",i.valuesSection.setAttribute("contenteditable","true"),i.rootNode.dataset.name=e.componentName,i.rootNode.dataset.type=O.b.TAGS,i.rootNode.appendChild(i.valuesSection),e.placeholder){var a=document.createElement("span");a.dataset.role="tag-placeholder",a.appendChild(document.createTextNode(e.placeholder)),i.rootNode.appendChild(a)}return i.configuration.allowKeywords&&i.initializeNativeDropdown(),i.valuesSection.onfocus=function(){i.trigger("focus")},$(i.valuesSection).on("keydown",(function(e){var t,n=window.getSelection().anchorNode;switch(i.valuesSection.hasChildNodes()&&(t=i.valuesSection.childNodes),e.keyCode){case E.a.KEY_ENTER:e.preventDefault();break;case E.a.KEY_BACKSPACE:if(t&&t.length>=2){if(I.isElementASpace(n))for(var r=0,a=t.length;r<a;r++)t[r]===n&&t[r-1]&&i.isElementATag(t[r-1])&&i.valuesSection.removeChild(t[r-1]);if(i.isElementATag(n))for(var o=0,s=t.length;o<s;o++)t[o]===n&&t[o-1]&&I.isElementASpace(t[o-1])&&i.valuesSection.removeChild(t[o-1])}break;case E.a.KEY_DELETE:if(t&&t.length>=2){if(I.isElementASpace(n))for(var l=0,c=t.length;l<c;l++)t[l]===n&&t[l+1]&&i.isElementATag(t[l+1])&&i.valuesSection.removeChild(t[l+1]);if(i.isElementATag(n))for(var u=0,d=t.length;u<d;u++)t[u]===n&&t[u+1]&&I.isElementASpace(t[u+1])&&i.valuesSection.removeChild(t[u+1]);I.isElementASpace(n)&&n===t[t.length-1]&&e.preventDefault()}}1===i.valuesSection.childNodes.length&&i.valuesSection.childNodes[0].nodeName===y.Q.BR&&i.valuesSection.removeChild(i.valuesSection.childNodes[0]),i.trigger("keydown")})),i.valuesSection.addEventListener("paste",(function(e){var t=(e.clipboardData||window.clipboardData).getData("text/plain"),n=window.getSelection();if(!n.rangeCount)return!1;n.deleteFromDocument(),n.getRangeAt(0).insertNode(document.createTextNode(t.replace(/\r\n|\r|\n/g," "))),e.preventDefault()})),i.valuesSection.addEventListener("blur",(function(){for(var e=0,t=i.valuesSection.childNodes.length;e<t;e++)i.valuesSection.childNodes[e].nodeName===y.Q.BR&&i.valuesSection.removeChild(i.valuesSection.childNodes[e])})),i.valuesSection.addEventListener("mscontrolselect",(function(e){e.preventDefault()})),i}return o()(n,[{key:"resetNativeDropdown",value:function(){var e=this.rootNode.querySelector('[data-role="dropdown"]');e&&this.rootNode.removeChild(e),this.configuration.allowKeywords&&this.initializeNativeDropdown()}},{key:"isElementATag",value:function(e){return e.nodeName===y.Q.SPAN&&"ui-element"===e.dataset.uiRole&&"tag"===e.dataset.type}},{key:"initializeNativeDropdown",value:function(){var e=this,t=document.createElement("div");if(t.setAttribute("data-role","dropdown"),this.rootNode.setAttribute("data-expandable","1"),this.nativeDropdown=document.createElement("select"),t.appendChild(this.nativeDropdown),this.configuration.createValuesCallback){for(var n=this.configuration.createValuesCallback(),i=0,r=n.length;i<r;i++){var a=document.createElement("option");a.text=n[i].text||n[i].value,a.value=n[i].value,a.disabled=!!n[i].disabled&&n[i].disabled,this.nativeDropdown.add(a)}var o=document.createElement("span");o.className="i123-add",t.appendChild(o)}this.nativeDropdown.value=null,this.nativeDropdown.selectedIndex=-1,this.nativeDropdown.addEventListener("change",(function(t){var n=e.nativeDropdown.value,i=e.nativeDropdown.options[e.nativeDropdown.selectedIndex].text;if(e.nativeDropdown.value=null,e.nativeDropdown.selectedIndex=-1,e.isTagLimitReached(n))return e.trigger("tags-limit-reached"),void e.addError(e.configuration.validationError||"");e.addTag(i,n,!1,n!==i,f.a.APPEND_POSITION_AT_CURSOR),e.trigger("ui_tags_container_variable_insert")}),!0),this.nativeDropdown.onmouseover=function(){e.nativeDropdown.value=null},this.rootNode.appendChild(t),t.onclick=function(t){t.clientX&&t.clientY&&e.trigger("dropdown-open")}}},{key:"addTag",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f.a.APPEND_POSITION_INSIDE,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.valuesSection,s=function(){for(var e=n.valuesSection.childNodes,i=0,r=e.length;i<r;i++)if(e[i].nodeValue&&e[i].nodeValue.trim()===t)return void(C.a.isFirefox()&&1===e.length?n.valuesSection.removeChild(e[i]):e[i].nodeValue=e[i].nodeValue.replace(t,""))};if(!1===r&&!1===this.configuration.textValidationCallback(t))return this.addError(this.configuration.customErrorMessage),s();this.configuration.tagsLimit&&(this.maxNumOfTags=this.configuration.tagsLimit);var l=new T.a({componentName:O.b.TAG,caption:e,value:t,isVariable:r,isDeleted:i}),c=new v.a(this.valuesSection),u=c.position();switch(l.on("append",(function(){n.isSingleTagsList||c.position(u+1)})),l.on("replace",(function(){n.isSingleTagsList||c.position(u+1)})),l.on("insert",(function(){n.isSingleTagsList||c.position(u+e.length+1)})),0===this.valuesSection.childNodes.length&&(o=this.valuesSection,a=f.a.APPEND_POSITION_INSIDE),a){case f.a.APPEND_POSITION_REPLACE:l.replace(o);break;case f.a.APPEND_POSITION_AT_CURSOR:l.insert(o);break;default:l.append(o,a)}this.trigger("tag-add",l)}},{key:"getValue",value:function(){for(var e=[],t=this.valuesSection.childNodes,n=0,i=t.length;n<i;n++){var r=t[n],a=void 0;if(r.nodeType===Node.TEXT_NODE){if(1===r.nodeValue.length&&r.nodeValue.charCodeAt(0)===T.a.THIN_SPACE_CHAR_CODE)continue;a={type:O.a.TEXT,value:r.nodeValue,caption:r.nodeValue}}else r.nodeType!==Node.TEXT_NODE&&r.textContent&&0!==r.textContent.trim().length&&(a={type:O.a.TAG,value:r.dataset.value,caption:r.textContent});void 0!==a&&e.push(a)}return e}},{key:"setValue",value:function(e){this.clearValues();for(var t=0,n=e.length;t<n;t++)if(e[t].type===O.a.TAG){var i=!e[t].isRegularTag;this.addTag(e[t].caption,e[t].value,e[t].isDeleted,i)}else this.valuesSection.appendChild(document.createTextNode(e[t].value))}},{key:"clearValues",value:function(){for(;this.valuesSection.hasChildNodes();)this.valuesSection.removeChild(this.valuesSection.lastChild)}},{key:"addError",value:function(e){var t=this;if(null===this.rootNode.querySelector('[data-role="error"]')){var n=document.createElement("div");n.dataset.role="error",n.appendChild(document.createTextNode(e)),this.rootNode.appendChild(n),setTimeout((function(){t.rootNode.removeChild(n)}),5e3)}}},{key:"setState",value:function(e){switch(e){case y.qb.FULLY_DISABLED:this.valuesSection.removeAttribute("contenteditable"),this.nativeDropdown.setAttribute("disabled","disabled"),this.valuesSection.setAttribute("data-fully-disabled","");break;case y.qb.DISABLED:this.valuesSection.removeAttribute("contenteditable"),this.nativeDropdown.setAttribute("disabled","disabled"),this.valuesSection.hasAttribute("data-fully-disabled")&&this.valuesSection.removeAttribute("data-fully-disabled");break;case y.qb.ENABLED:default:this.valuesSection.setAttribute("contenteditable","true"),this.nativeDropdown.removeAttribute("disabled"),this.valuesSection.hasAttribute("data-fully-disabled")&&this.valuesSection.removeAttribute("data-fully-disabled")}}},{key:"getState",value:function(){return this.nativeDropdown.hasAttribute("disabled")&&this.valuesSection.hasAttribute("data-fully-disabled")?y.qb.FULLY_DISABLED:this.nativeDropdown.hasAttribute("disabled")?y.qb.DISABLED:y.qb.ENABLED}},{key:"getNumberOfTagValues",value:function(){var e=this.getValue(),t=0;return Object(b.a)(e,(function(e){e.type===O.a.TAG&&t++})),t}},{key:"getDropdownContainer",value:function(){return this.rootNode.querySelector('[data-role="dropdown"]')}},{key:"isTagLimitReached",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(R.l)(),n=t.length||0;return!(null===t||void 0===t?void 0:t.includes(e))&&n>=this.maxNumOfTags||this.getNumberOfTagValues()>=this.maxNumOfTags}}]),n}(f.a)},function(e,t,n){"use strict";var i,r=n(38),a=n.n(r),o=n(5),s=n.n(o),l=n(6),c=n.n(l),u=n(3),d=n.n(u),p=n(7),h=n.n(p),_=n(8),g=n.n(_),m=n(4),f=n.n(m),E=n(0),y=n.n(E),T=n(29);function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return g()(this,n)}}!function(e){e.TYPE_APPEND="append",e.TYPE_INSERT_BEFORE="insertBefore",e.TYPE_REPLACE="replace"}(i||(i={})),n.d(t,"a",(function(){return O}));var O=function(e){h()(n,e);var t=v(n);function n(e){var i;return s()(this,n),i=t.call(this),y()(d()(i),"node",void 0),y()(d()(i),"options",void 0),y()(d()(i),"config",void 0),y()(d()(i),"selectedOption",null),y()(d()(i),"jq",void 0),y()(d()(i),"dropdownDirectionPlugin",!0),y()(d()(i),"onValueChanged",void 0),i.jq=e,i}return c()(n,[{key:"init",value:function(e,t,n){var i=this;return this.node=e,this.options=t,this.setConfig(n),this.setSelectedOption(),this.appendSelect(),setTimeout((function(){return i.bindEvents()}),5),this}},{key:"appendSelect",value:function(){var e=this.render();switch(this.jq(this.node).append(e),this.config.append){case i.TYPE_APPEND:this.jq(this.node).append(e);break;case i.TYPE_INSERT_BEFORE:this.jq(this.node).children().length>0?this.jq(this.node).prepend(e):this.jq(this.node).append(e);break;case i.TYPE_REPLACE:this.virtualSelectAppendReplace(e)}}},{key:"virtualSelectAppendReplace",value:function(e){!function(t,n){var i=n(t.node).prop("attributes"),r=n(t.node).parent().append(e).children("div:last-child");n.each(i,(function(){"undefined"===typeof n(r).attr(this.name)&&n(r).attr(this.name,this.value)})),n(t.node).remove(),t.setNode(n(r).parent())}(this,this.jq)}},{key:"reRender",value:function(){!function(e,t){t(e.node).empty(),e.appendSelect()}(this,this.jq)}},{key:"render",value:function(){var e=this.getSelectedOption(),t=document.createElement("div");return t.className="virtual-select",null!==this.config.fixedWidth&&(t.style.width=this.config.fixedWidth),!0!==this.config.light||window.innerWidth<=767?t.setAttribute("data-light","false"):t.setAttribute("data-light","true"),t.setAttribute("data-size","".concat(this.config.size)),this.config.sizeSm&&t.setAttribute("data-sm-size","".concat(this.config.sizeSm)),this.config.sizeMd&&t.setAttribute("data-md-size","".concat(this.config.sizeSm)),this.config.sizeLg&&t.setAttribute("data-lg-size","".concat(this.config.sizeSm)),null!==e&&"undefined"!==typeof e.label||t.setAttribute("data-not-selected","true"),this.jq(t).append(this.renderPlaceholder()),t}},{key:"renderPlaceholder",value:function(){var e=this.getSelectedOption(),t=document.createElement("div"),n=document.createElement("span"),i=document.createElement("span");return t.className="virtual-select-placeholder",n.className="title-placeholder",i.className="arrow-placeholder",null!==e&&"undefined"!==typeof e.label?n.innerText="".concat(this.selectedOption.label):n.innerText=this.placeholderText(),t.innerHTML=n.outerHTML+i.outerHTML,t}},{key:"bindEvents",value:function(){!function(e,t){e.options&&"object"===a()(e.options)&&e.options.length>0?t(e.node).on("click",".virtual-select-placeholder",(function(n){n.stopImmediatePropagation(),n.preventDefault(),null!==e.config.changeOptions&&e.config.changeOptions(e),t(e.node).find(".virtual-select").append(e.renderSelect()).append((function(){var n=this,i={placeholder:e.placeholderText(),plugins:{no_results:{message:"No match found"},start_typing:{},scroll_dropdown_view_on_selected_item_top:{}},onInitialize:function(){var e=this;this.revertSettings.$children.each((function(){t(this).children().length&&t(this).children().each((function(){t.extend(e.options[this.value],t(this).data())})),t.extend(e.options[this.value],t(this).data())}))},render:{option:function(t,n){var i=e.getSelectedOption(),r="",a="";return t.hasOwnProperty("extraClass")&&(r+="".concat(t.extraClass)),null!==i&&i.hasOwnProperty("id")&&this.value==i.id&&(a="selected"),'<div class="option '.concat(a," ").concat(r,'">').concat(t.text," ").concat(a,"</div>")}},onDropdownClose:function(i){setTimeout((function(){"undefined"!==typeof i.attr("data-no-match-found")&&"true"===i.attr("data-no-match-found")||(t(n).find("select").each((function(e,t){e.selectize&&e.selectize().destroy()})),t(n).empty(),t(n).append(e.renderPlaceholder()))}),10)},onDropdownOpen:function(){t(".selectize-dropdown-content").perfectScrollbar({minScrollbarLength:10})}};e.dropdownDirectionPlugin&&(i.plugins.dropdown_direction={},i.dropdownDirection="auto"),t(this).find("select").selectize(i),t(this).find(".virtual-select-placeholder").hide(),setTimeout((function(){var e=t(n).find("select")[0];"undefined"!==typeof e&&"undefined"!==typeof e.selectize&&e.selectize.open()}),250)}))})).on("change","select",(function(n){n.stopImmediatePropagation(),n.preventDefault(),this.value&&("undefined"!==typeof t(e.node).find(".virtual-select").attr("data-not-selected")&&t(e.node).find(".virtual-select").removeAttr("data-not-selected"),e.changeSelectedStatusById(this.value),e.trigger("change",e))})).on("click",".selectize-control",(function(e){e.stopImmediatePropagation(),e.preventDefault(),t(this).parent().find("select.selectized")[0].selectize.open()})).on("mouseover",(function(t){e.trigger("hover",t)})).on("mouseenter",(function(t){e.trigger("mouseenter",t)})).on("mouseleave",(function(t){e.trigger("mouseleave",t)})):e.trigger("render-fail",e)}(this,this.jq)}},{key:"renderSelect",value:function(){var e=document.createElement("select"),t=this.config.selected;this.config.isSearchable||e.classList.add("no-search"),this.dropdownDirectionPlugin&&e.classList.add("dropdown-direction-plugin"),e.setAttribute("placeholder",this.placeholderText());var n=document.createElement("option");if(n.value="",n.text=this.placeholderText(),e.appendChild(n),Array.isArray(this.options)&&this.options.length>0){for(var i in this.options)if(this.options.hasOwnProperty(i))if(this.options[i].hasOwnProperty("groupLabel")){var r=document.createElement("optgroup");for(var a in r.setAttribute("label",this.options[i].groupLabel),this.options[i].options)if(this.options[i].options.hasOwnProperty(a)){var o=document.createElement("option");o.value=this.options[i].options[a].id.toString(),o.text=this.options[i].options[a].label,null!==t&&t.toString()===this.options[i].options[a].id.toString()&&(o.setAttribute("selected","selected"),o.setAttribute("class","option-highlight")),"undefined"!==typeof this.options[i].options[a].disabled&&this.options[i].options[a].disabled&&o.setAttribute("disabled","disabled"),"undefined"!==typeof this.options[i].options[a].class&&o.setAttribute("data-extra-class",this.options[i].options[a].class),r.appendChild(o)}e.add(r,e[e.length])}else{var s=document.createElement("option");s.value="".concat(this.options[i].id),s.text="".concat(this.options[i].label),null!==t&&t.toString()===this.options[i].id.toString()&&(s.setAttribute("selected","selected"),s.setAttribute("class","option-highlight")),"undefined"!==typeof this.options[i].disabled&&this.options[i].disabled&&s.setAttribute("disabled","disabled"),"undefined"!==typeof this.options[i].class&&s.setAttribute("data-extra-class",this.options[i].class),e.add(s,e[e.length])}return e}}},{key:"setConfig",value:function(e){var t={light:!1,size:12,sizeSm:null,sizeMd:null,sizeLg:null,fixedWidth:null,placeholder:"Please Select",append:i.TYPE_APPEND,selected:null,isSearchable:!0,changeOptions:null};if("undefined"!==typeof e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);this.config=t}},{key:"getConfig",value:function(){return this.config}},{key:"setValueByOptionId",value:function(e){this.changeSelectedStatusById(e),this.reRender()}},{key:"changeSelectedStatusById",value:function(e){this.config.selected=e,this.setSelectedOption()}},{key:"placeholderText",value:function(){return this.config.placeholder}},{key:"setSelectedOption",value:function(){if(null!==this.config.selected){var e,t=this.config.selected;if("undefined"!==typeof this.options)Array.isArray(this.options)&&this.options.filter((function(n){n.hasOwnProperty("groupLabel")?n.options.filter((function(n){n.id==t&&(e=n)})):n.hasOwnProperty("id")&&n.id==t&&(e=n)})),this.selectedOption="undefined"!==typeof e?e:null;else this.selectedOption=null}}},{key:"getSelectedOption",value:function(){if(null!==this.config.selected){var e,t=this.config.selected;if(Array.isArray(this.options)&&this.options.filter((function(n){n.hasOwnProperty("groupLabel")?n.options.filter((function(n){n.id==t&&(e=n)})):n.hasOwnProperty("id")&&n.id==t&&(e=n)})),"undefined"!==typeof e)return this.onValueChanged&&this.onValueChanged(+e.id),e}return null}},{key:"getNode",value:function(){return this.node}},{key:"setNode",value:function(e){return this.node=e}},{key:"setOptions",value:function(e){this.options=e}}]),n}(T.a)},,function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.ADD_TOASTER="addToaster",e.REMOVE_TOASTER="removeToaster"}(i||(i={}))},,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return h}));var i,r,a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(0),u=n.n(c),d=n(123);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}!function(e){e[e.AND=0]="AND",e[e.OR=1]="OR"}(i||(i={})),function(e){e[e.and=i.AND]="and",e[e.or=i.OR]="or"}(r||(r={}));var h=function(){function e(t,n){o()(this,e),u()(this,"CONFIGURATION",void 0),u()(this,"rootNode",void 0),u()(this,"statementNode",void 0),u()(this,"statementComponent",void 0),u()(this,"i18n",void 0),u()(this,"statementPosition",void 0),t>e.MAX_NR_OF_STATEMENTS?console.error("reached MAX_NR_OF_STATEMENTS"):(this.statementPosition=t,this.CONFIGURATION=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.createDefaultConfiguration(),{},n),this.rootNode=document.createElement("div"),this.statementNode=document.createElement("div"),this.statementComponent=new d.a,this.statementNode.setAttribute("data-role","rules-statement-component"),this.statementNode.appendChild(this.statementComponent.getRoot()),this.statementComponent.getRoot().onclick=function(e){e.stopPropagation()},this.getRootNode().setAttribute("data-role","rules-statement"),this.getRootNode().appendChild(this.statementNode))}return l()(e,[{key:"getStatementPosition",get:function(){return this.statementPosition}}]),l()(e,[{key:"withI18n",value:function(e){return this.i18n=e,this}},{key:"getRootNode",value:function(){return this.rootNode}},{key:"initialize",value:function(){var e=this,t=function(t,n){return e.i18n.translateTextDefault(t,n)},n=[{value:i.AND,text:t("notifications_rule_statement_and","and")},{value:i.OR,text:t("notifications_rule_statement_or","or")}];this.statementComponent.setOptions(n);var r=this.CONFIGURATION.selectedStatement;null!==r&&this.statementComponent.setValue(String(r))}},{key:"updateStatementPosition",value:function(e){this.statementPosition=e}},{key:"getSelectedStatement",value:function(){return parseInt(this.statementComponent.getValue(),10)}}],[{key:"createDefaultConfiguration",value:function(){return{selectedStatement:null}}}]),e}();u()(h,"MAX_NR_OF_STATEMENTS",9)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=function(){function e(){r()(this,e)}return o()(e,null,[{key:"translatePropertyName",value:function(e){return null}},{key:"translateAttributeName",value:function(e){switch(e){case"options":return"edt_UI_attribute_options";case"instructions":return"edt_UI_attribute_instructions";case"layout":return"edt_UI_attribute_layout";case"label":return"edt_UI_attribute_label";case"choices":return"fieldCategory_editChoices";case"validation":return"edt_UI_attribute_validation";case"scale":return"edt_UI_attribute_scale";case"statements":return"edt_UI_attribute_statements";case"synchronize":return"edt_UI_attribute_synchronize";case"propagate":return"edt_UI_attribute_propagate";case"configuration":return"edt_UI_attribute_configuration";case"value":return"edt_UI_attribute_value";case"name":return"edt_UI_attribute_name";case"text":return"edt_UI_attribute_text";case"buttons":return"edt_UI_attribute_buttons";case"size":return"edt_UI_attribute_size";case"image":return"edt_UI_attribute_image";case"mapsApiKey":return"edt_UI_attribute_maps_api_key";default:return null}}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var i=n(20),r=n.n(i),a=n(38),o=n.n(a),s=n(5),l=n.n(s),c=n(6),u=n.n(c),d=n(3),p=n.n(d),h=n(7),_=n.n(h),g=n(8),m=n.n(g),f=n(4),E=n.n(f),y=n(0),T=n.n(y),v=n(1),O=n(29),b=n(74),C=n(94),I=n(16),R=n(2),P=n(23),N=n(122),A=n(28),S=n(42),L=n(139);function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var w=function(e){_()(n,e);var t=D(n);function n(e,i,r,a,o){var s,c;return l()(this,n),s=t.call(this),T()(p()(s),"resourceManager",void 0),T()(p()(s),"jq",void 0),T()(p()(s),"renderers",[]),T()(p()(s),"modelProviders",[]),T()(p()(s),"rendererId",void 0),T()(p()(s),"responses",[]),T()(p()(s),"pendingResponses",0),T()(p()(s),"geolocation",void 0),T()(p()(s),"document",void 0),T()(p()(s),"element",void 0),T()(p()(s),"currency",void 0),T()(p()(s),"deferredDOMInsertionUIElements",[]),T()(p()(s),"insertionId",0),T()(p()(s),"htmlEscaper",void 0),T()(p()(s),"translationService",void 0),s.resourceManager=e,s.jq=i,s.rendererId=0,s.geolocation=r,s.currency=a,s.document=o,s.htmlEscaper=window.document.createElement("div"),s.translationService=new S.a,c=p()(s),A.a.addHelper({name:"EDITOR_VALUE_RENDERER",func:function(e){return c.getRenderer(e)}}),s}return u()(n,[{key:"getDocument",value:function(){return this.document}},{key:"escapeHTML",value:function(e){this.htmlEscaper.textContent=String(e||"");var t=this.htmlEscaper.innerHTML;return this.htmlEscaper.textContent="",t}},{key:"withElement",value:function(e){return this.element=e,this}},{key:"getRendererPriority",value:function(e){var t=0;if(null!==e.elementTypeId)if(Array.isArray(e.elementTypeId))t+=5;else{if(!(["number","string"].indexOf(o()(e.elementTypeId))>-1))throw new Error("Invalid argument: elementTypeId: int|int[]|null expected!");t+=50}if(null!==e.propertyName)switch(!0){case"string"===typeof e.propertyName:t+=50;break;case r()(e.propertyName,Array):t+=25;break;case r()(e.propertyName,RegExp):t+=20;break;default:throw new Error("Invalid argument: propertyName: string|string[]|RegExp|null expected!")}return t}},{key:"isUIElementURI",value:function(e){return/^ui\:\/\/(.*)$/.test(String(e||""))}},{key:"registerRenderer",value:function(e,t,n,i,r,a){var o={elementTypeId:n,propertyName:t,runtimeValueType:e,template:null,priority:0,id:this.rendererId,templateModelDefaultValues:r||null};return this.responses.push(""),this.pendingResponses++,function(e,t){t.isUIElementURI(i)?e.template=t.jq.Deferred((function(n){t.responses[e.id]=i,t.pendingResponses--,n.resolve()})).promise():e.template=t.resourceManager.get(i).then((function(n){t.responses[e.id]=n,t.pendingResponses--})).fail((function(n){t.pendingResponses--,t.responses[e.id]='<span style="color: red">Error loading control type: '.concat(e.runtimeValueType,"</span>")}))}(o,this),this.rendererId++,o.priority=void 0===a?this.getRendererPriority(o):a,this.renderers.push(o),this.renderers.sort((function(e,t){return t.priority-e.priority})),this}},{key:"registerModelProvider",value:function(e,t,n,i,r){var a={elementTypeId:n,propertyName:t,runtimeValueType:e,priority:0,generator:i};return a.priority=void 0===r?this.getRendererPriority(a):r,this.modelProviders.push(a),this.modelProviders.sort((function(e,t){return t.priority-e.priority})),this}},{key:"resolve",value:function(){return function(e,t){return t.Deferred((function(t){if(0===e.pendingResponses)t.resolve(e);else{!function n(){0===e.pendingResponses?t.resolve(e):setTimeout((function(){n()}),100)}()}})).promise()}(this,this.jq)}},{key:"createUIElementFromURL",value:function(e,t){var n,i=this.getUIElementName(e),r=this.parseUIURLQueryString(e);if(n=P.a.createElement(i),null!==r)for(var a in r)r.hasOwnProperty(a)&&n.setAttribute(a,JSON.stringify(t[r[a]]||null));return n}},{key:"electRenderer",value:function(e,t,n){for(var i,a=0,o=this.renderers.length;a<o;a++){if(i=!0,null!==this.renderers[a].elementTypeId)switch(!0){case"number"===typeof this.renderers[a].elementTypeId:case"string"===typeof this.renderers[a].elementTypeId:this.renderers[a].elementTypeId!==e&&(i=!1);break;case r()(this.renderers[a].elementTypeId,Array):-1===this.renderers[a].elementTypeId.indexOf(e)&&(i=!1);break;default:i=!1}if(i&&null!==this.renderers[a].propertyName)switch(!0){case"string"===typeof this.renderers[a].propertyName:this.renderers[a].propertyName!==t&&(i=!1);break;case r()(this.renderers[a].propertyName,Array):-1===this.renderers[a].propertyName.indexOf(t)&&(i=!1);break;case r()(this.renderers[a].propertyName,RegExp):this.renderers[a].propertyName.test(t)||(i=!1);break;default:i=!1}if(i&&null!==this.renderers[a].runtimeValueType&&n!==this.renderers[a].runtimeValueType&&(i=!1),i)return this.renderers[a]}return null}},{key:"electModelProvider",value:function(e,t,n){for(var i,a=0,o=this.modelProviders.length;a<o;a++){if(i=!0,null!==this.modelProviders[a].elementTypeId)switch(!0){case"number"===typeof this.modelProviders[a].elementTypeId:case"string"===typeof this.modelProviders[a].elementTypeId:this.modelProviders[a].elementTypeId!==e&&(i=!1);break;case r()(this.modelProviders[a].elementTypeId,Array):-1===this.modelProviders[a].elementTypeId.indexOf(e)&&(i=!1);break;default:i=!1}if(i&&null!==this.modelProviders[a].propertyName)switch(!0){case"string"===typeof this.modelProviders[a].propertyName:this.modelProviders[a].propertyName!==t&&(i=!1);break;case r()(this.modelProviders[a].propertyName,Array):-1===this.modelProviders[a].propertyName.indexOf(t)&&(i=!1);break;case r()(this.modelProviders[a].propertyName,RegExp):this.modelProviders[a].propertyName.test(t)||(i=!1);break;default:i=!1}if(i&&null!==this.modelProviders[a].runtimeValueType&&n!==this.modelProviders[a].runtimeValueType&&(i=!1),i)return this.modelProviders[a]}return null}},{key:"getDecoratedModel",value:function(e,t,n,i){var r,a=this.electModelProvider(t,n,i),o={};for(var s in e)e.hasOwnProperty(s)&&e.propertyIsEnumerable(s)&&(o[s]=e[s]);if(null!==a)for(var l in r=a.generator(n,i)||{})o.hasOwnProperty(l)&&o.propertyIsEnumerable(l)&&(o[l]=r[l]);return o}},{key:"getCompatibleControlsList",value:function(e){if(!e)return[];for(var t=[],n=0,i=this.document.getControlsList(),r=i.length;n<r;n++)null!==i[n].getId()&&e.getId()!==i[n].getId()&&i[n].hasProperty("synchronize.enabled")&&i[n].hasValueCompatibleWith(e)&&t.push({id:i[n].getId(),label:(i[n].hasProperty("label.labelText")?i[n].getProperty("label.labelText"):"Control #".concat(i[n].getId()))||"Control #".concat(i[n].getId())});return t.sort((function(e,t){var n=e.label.toLowerCase(),i=t.label.toLowerCase();return n===i?0:n>i?1:-1}))}},{key:"getRenderer",value:function(e){var t=JSON.parse(e),n=t.element,i=t.property,a=t.type,o=t.value,s=this.electRenderer(n,i,a);if(null!==s){var l={value:o,_geolocation:this.geolocation.getCountriesList(),_currency:this.currency.enumerateCurrencies(),_webfonts:this.document.getEngine().getLoader().getLoaderDependency(v.M.FONTS_MANAGER).getFontsList()};if(r()(this.element,b.a)&&(l._validation=this.element&&this.element._static().getSupportedValidators?this.element._static().getSupportedValidators():null,l._compatibleControlsList=this.getCompatibleControlsList(this.element)),r()(this.element,L.a)){var c=[R.a.CONTROL_TYPE_TEXT,R.a.CONTROL_TYPE_TEXTAREA],u=[R.a.CONTROL_TYPE_ADDRESS];l._compatibleControlsList=this.getMapPropagationCompatibleControls(c),l._synchronizeControlsList=this.getMapPropagationCompatibleControls(u)}if(null!==s.templateModelDefaultValues){var d=this.getDecoratedModel(s.templateModelDefaultValues,n,i,a);for(var p in d)d.hasOwnProperty(p)&&d.propertyIsEnumerable(p)&&(l[p]=d[p])}if(this.isUIElementURI(this.responses[s.id])){this.insertionId++,this.deferredDOMInsertionUIElements.push({insertionId:this.insertionId,element:this.createUIElementFromURL(this.responses[s.id],l)});var h=document.createElement("x-deferred-element");h.setAttribute("data-insertion-id",String(this.insertionId)),h.setAttribute("data-property-value",JSON.stringify(o));var _=h.outerHTML;return h=null,_}var g=this.responses[s.id];return new A.a(g).parse(l)}return'<span style="color: green">'.concat(a,"</span>")}},{key:"getUIElementName",value:function(e){var t;return(t=/^ui:\/\/([a-zA-Z0-9_\-]+)(\?|$)/.exec(String(e||"")))?t[1]:null}},{key:"parseUIURLQueryString",value:function(e){var t;if(t=/^ui:\/\/([a-zA-Z0-9_]+)(\?(.*)?)?$/.exec(String(e||""))){var n={},i=t[3]||"";if(!i)return null;for(var r,a,o=i.split("&"),s=0,l=o.length;s<l;s++)(t=/^([^=]+)=(.*)$/.exec(o[s]))&&(r=t[1],a=t[2],n[r]=a);return n}return null}},{key:"getDeferredUIElementByInsertionId",value:function(e){for(var t=0,n=this.deferredDOMInsertionUIElements.length;t<n;t++)if(e===this.deferredDOMInsertionUIElements[t].insertionId){var i=this.deferredDOMInsertionUIElements[t].element;return this.deferredDOMInsertionUIElements.splice(t,1),i}return null}},{key:"injectDeferredElements",value:function(e){!function(t,n){n(e).find("x-deferred-element[data-insertion-id][data-property-value]").each((function(){var e=~~this.getAttribute("data-insertion-id"),n=t.getDeferredUIElementByInsertionId(e),i=JSON.parse(this.getAttribute("data-property-value"));n&&(this.parentNode.insertBefore(n.getRootNode(),this),this.parentNode.removeChild(this),n.setValue(i))}))}(this,this.jq)}},{key:"getMapPropagationCompatibleControls",value:function(e){for(var t=[],n=this.document.getControlsList(),i=0;i<n.length;i++)e.indexOf(n[i].getTypeId())>-1&&t.push({id:n[i].getId(),label:(n[i].hasProperty("label.labelText")?n[i].getProperty("label.labelText"):"Control #".concat(n[i].getId()))||"Control #".concat(n[i].getId())});return t}}],[{key:"init",value:function(e){e.registerRenderer("string",null,null,"/modules/Typescript/Form/resources/editor/string.html",{placeholder:"",i18nPlaceholder:""}),e.registerRenderer("int",null,null,"/modules/Typescript/Form/resources/editor/number.html",{min:"0",max:"1000",placeholder:"",i18nPlaceholder:"",inputMin:"",inputMax:""}),e.registerRenderer("sint",null,null,"/modules/Typescript/Form/resources/editor/number.html",{min:"0",max:"1000",placeholder:"",i18nPlaceholder:""}),e.registerRenderer("float",null,null,"/modules/Typescript/Form/resources/editor/number.html",{min:"0",max:"1000",placeholder:""}),e.registerRenderer("sfloat",null,null,"/modules/Typescript/Form/resources/editor/number.html",{min:"0",max:"1000",placeholder:"",i18nPlaceholder:""}),e.registerRenderer("number",null,null,"/modules/Typescript/Form/resources/editor/number.html",{min:"0",max:"1000",placeholder:"",i18nPlaceholder:""}),e.registerRenderer("bool",null,null,"/modules/Typescript/Form/resources/editor/boolean.html",null),e.registerRenderer("boolean",null,null,"/modules/Typescript/Form/resources/editor/boolean.html",{title:"",i18nTitle:""}),e.registerRenderer("int","configuration.buttonsPosition",R.a.CONTROL_TYPE_ACTION_BAR,"/modules/Typescript/Form/resources/editor/FormActionBar/configuration_buttonsPosition.html",null),e.registerRenderer("string[]","configuration.configurableButtons",R.a.CONTROL_TYPE_ACTION_BAR,"/modules/Typescript/Form/resources/editor/FormActionBar/configuration_configurableButtons.html",null),e.registerRenderer("boolean","choices.isWorkflowsUserDropdown",R.a.CONTROL_TYPE_DROPDOWN,"/modules/Typescript/Form/resources/editor/Dropdown/workflows-users-list.html",null),e.registerRenderer("boolean","choices.isDropdownWithForms",R.a.CONTROL_TYPE_DROPDOWN,"/modules/Typescript/Form/resources/editor/Dropdown/dowpdowns-forms-list.html",null),e.registerRenderer("int","configuration.fontSize",R.a.CONTROL_TYPE_HEADING,"/modules/Typescript/Form/resources/editor/Heading/configuration_fontSize.html",null),e.registerRenderer("string","configuration.alignment",R.a.CONTROL_TYPE_HEADING,"/modules/Typescript/Form/resources/editor/Heading/configuration_alignment.html",null),e.registerRenderer("string","configuration.color",R.a.CONTROL_TYPE_HEADING,"/modules/Typescript/Form/resources/editor/Heading/configuration_color.html",null),e.registerRenderer("string",/^configuration.align(ment)?$/,[R.a.CONTROL_TYPE_IMAGE,R.a.CONTROL_TYPE_SOCIAL],"/modules/Typescript/Form/resources/editor/Image/image-alignment.html",null),e.registerRenderer("string","options.choiceTextAlignment",R.a.CONTAINER_TYPE_LIKERT_WRAPPER,"/modules/Typescript/Form/resources/editor/Image/image-alignment.html",null),e.registerRenderer(null,/^configuration\.(id|size|mimeType)$/,R.a.CONTROL_TYPE_IMAGE,"/modules/Typescript/Form/resources/editor/disabled-property.html",null),e.registerRenderer("string","options.intendedCurrencyISOCode",R.a.CONTROL_TYPE_PRICE,"/modules/Typescript/Form/resources/editor/currency-iso-code.html",null),e.registerRenderer("int","configuration.weekStart",R.a.CONTROL_TYPE_DATE,"/modules/Typescript/Form/resources/editor/Date/week-start.html",null),e.registerRenderer("string[]","configuration.acceptedDaysOfWeekString",R.a.CONTROL_TYPE_DATE,"/modules/Typescript/Form/resources/editor/Date/accepted-days-of-week.html",null),e.registerRenderer("TextChoiceInterface[]",/^choices.(values|scale)$/,[R.a.CONTROL_TYPE_CHECKBOX,R.a.CONTROL_TYPE_RADIO,R.a.CONTROL_TYPE_DROPDOWN,R.a.CONTAINER_TYPE_LIKERT_WRAPPER],"/modules/Typescript/Form/resources/editor/text-choice-interface.html",{addButtonText:"Add choices",addButtonTextI18n:"edt_text_add_choices",editButtonText:"Add/edit choices",editButtonTextI18n:"edt_text_edit_choices",importButtonText:"Bulk import / edit",importButtonTextI18n:"fieldProperty_importButton",choicesOptionText:"Default choice",choicesOptionTextI18n:"edt_text_default_choice",dataSets:JSON.stringify([C.b.DAYS_OF_WEEK,C.b.MONTHS_OF_YEAR]),importDialogTitle:"Import choices",importDialogTitleI18n:"edt_text_import_choices",defaultChoiceInputType:String(v.f.RADIO),newChoiceText:"New Choice",newChoiceTextI18n:"edt_text_new_choice",itemType:"CHOICE",setAsDefaultFirstOptionAfterTextDatasetImport:"",editingContext:"DEFAULT_VALUES",synchronizeOtherProperties:"#item div[data-role=property][data-property-name=options-configureValues] input[data-plugin=text-choice-interface], #item div[data-role=property][data-property-name=options-quizOptions] input[data-plugin=text-choice-interface], #item div[data-role=property][data-property-name=payments-virtualValue] input[data-plugin=text-choice-interface], #item div[data-role=property][data-property-name=options-quizOptions] input[data-plugin=text-choice-interface-likert]"}),e.registerModelProvider("TextChoiceInterface[]","choices.scale",R.a.CONTAINER_TYPE_LIKERT_WRAPPER,(function(){return{dataSets:JSON.stringify([C.b.DEGREES_OF_AGREEMENT,C.b.DEGREES_OF_IMPORTANCE,C.b.DEGREES_OF_PROBABILITY,C.b.DEGREES_OF_QUALITY,C.b.DEGREES_OF_SATISFACTION]),importDialogTitle:"Import scale",importDialogTitleI18n:"edt_text_import_scale",defaultChoiceInputType:String(v.f.RADIO),newChoiceText:"New Value",newChoiceTextI18n:"edt_text_new_value",choicesOptionText:"Default value",choicesOptionTextI18n:"edt_text_default_value",itemType:"VALUE"}})),e.registerModelProvider("TextChoiceInterface[]","choices.values",R.a.CONTROL_TYPE_RADIO,(function(){return{defaultChoiceInputType:String(v.f.RADIO)}})),e.registerModelProvider("int","options.widthInPercents",R.a.ELEMENT_TYPE_FORM,(function(){return{placeholder:"100",inputMin:"20",inputMax:"100",max:"100",min:"20"}})),e.registerModelProvider("int","options.widthInPixels",R.a.ELEMENT_TYPE_FORM,(function(){return{inputMin:"200",inputMax:"1920",max:"1920",min:"200"}})),e.registerModelProvider("TextChoiceInterface[]","choices.values",R.a.CONTROL_TYPE_DROPDOWN,(function(){return{defaultChoiceInputType:String(v.f.RADIO),setAsDefaultFirstOptionAfterTextDatasetImport:"1"}})),e.registerRenderer("I18nText[]",/^choices\.statements|configuration.titleChoices$/,[R.a.CONTAINER_TYPE_LIKERT_WRAPPER,R.a.CONTROL_TYPE_NAME],"/modules/Typescript/Form/resources/editor/LikertWrapper/choice-statements.html",{hasImportButton:"1",addButtonText:"Add statements",addButtonTextI18n:"edt_text_add_statements",editButtonText:"Add/edit statements",editButtonTextI18n:"edt_text_edit_statements",importButtonText:"Bulk import / edit",importButtonTextI18n:"fieldProperty_importButton",statementsOptionText:"Statements option...",statementsOptionTextI18n:"edt_text_statement_option",dataSets:JSON.stringify([C.b.DAYS_OF_WEEK,C.b.MONTHS_OF_YEAR]),importDialogTitle:"Import statements",importDialogTitleI18n:"edt_text_import_statements",newStatementText:"New Statement",newStatementTextI18n:"edt_text_new_statement",statementTypeName:"STATEMENT",statementTypeNameI18n:"edt_text_statement_type",context:String(R.a.CONTAINER_TYPE_LIKERT_WRAPPER)}),e.registerModelProvider("I18nText[]","configuration.titleChoices",R.a.CONTROL_TYPE_NAME,(function(){return{hasImportButton:"",addButtonText:"",addButtonTextI18n:"",importButtonText:"import",importButtonTextI18n:"edt_text_import",statementsOptionText:"Edit Titles...",statementsOptionTextI18n:"edt_text_edit_titles",importDialogTitle:"",importDialogTitleI18n:"",newStatementText:"Mr",newStatementTextI18n:"edt_text_name_mr",statementTypeName:"TITLE",statementTypeNameI18n:"edt_text_title_type",context:String(R.a.CONTROL_TYPE_NAME)}})),e.registerRenderer("string","layout.direction",[R.a.CONTROL_TYPE_CHECKBOX,R.a.CONTROL_TYPE_RADIO],"/modules/Typescript/Form/resources/editor/layout-direction.html",null),e.registerRenderer("int","layout.columns",[R.a.CONTROL_TYPE_CHECKBOX,R.a.CONTROL_TYPE_RADIO],"/modules/Typescript/Form/resources/editor/layout-columns.html",null),e.registerRenderer("string","configuration.timeFormat",R.a.CONTROL_TYPE_TIME,"/modules/Typescript/Form/resources/editor/Time/time-format.html",null),e.registerRenderer("boolean","verification.displayCaptcha",R.a.CONTROL_TYPE_CAPTCHA,"/modules/Typescript/Form/resources/editor/Captcha/display-captcha.html",null),e.registerRenderer("int","configuration.type",R.a.CONTROL_TYPE_CAPTCHA,"/modules/Typescript/Form/resources/editor/Captcha/configuration-type-v2.html",null),e.registerRenderer("int","configuration.displayAs",R.a.CONTROL_TYPE_STAR_RATING,"/modules/Typescript/Form/resources/editor/StarRating/configuration-display-as.html",null),e.registerRenderer("string","configuration.linkBehaviour",R.a.CONTROL_TYPE_TERMS_OF_SERVICE,"/modules/Typescript/Form/resources/editor/TermsOfService/configuration-link-behaviour.html",null),e.registerRenderer("string",/^(.*)\.(innerHTML|agreementHTMLMarkup)$/,null,"/modules/Typescript/Form/resources/editor/html.html",{autoClick:"",dialogTitle:"Edit Rich Text",dialogTitleI18n:"edt_UI_create_dialog_edit_rich_text"}),e.registerModelProvider("string","configuration.innerHTML",R.a.CONTROL_TYPE_FORM_HEADER,(function(){return{autoClick:"1",dialogTitle:"Edit form header",dialogTitleI18n:"edt_UI_create_dialog_edit_form_header"}})),e.registerRenderer("int","options.paginationType",R.a.CONTAINER_TYPE_PAGE,"/modules/Typescript/Form/resources/editor/Page/pagination-type.html",null),e.registerRenderer("string",/\.color$/,R.a.ELEMENT_TYPE_FORM,"ui://color",null),e.registerRenderer("string",/\.font\.family$/,R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/font-face.html",null),e.registerRenderer("string",/\.font\.line\.height$/,R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/font-line-height.html",null,99),e.registerRenderer("string","options.widthUnit",R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/Form/form-width-in-pixels-or-percents-v2.html",null,200),e.registerRenderer("string",/\.border\.style$/,R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/border-style.html",null),e.registerRenderer("string",/\.font\.style/,R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/font-style.html",null),e.registerRenderer("string",/\.font\.weight/,R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/font-weight.html",null),e.registerRenderer("string",/\.(border\.(radius|width)|height|width|margin(\.left|\.right|\.bottom|\.top|\.vertical)?|padding\.(bottom|left|right|top|horizontal|vertical)|font\.size)$/,R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/size-px.html",{min:"0",max:"1280"}),e.registerModelProvider("string",/\.border\.radius$/,R.a.ELEMENT_TYPE_FORM,(function(){return{min:"0",max:"10"}})),e.registerModelProvider("string",/\.border\.width$/,R.a.ELEMENT_TYPE_FORM,(function(){return{min:"0",max:"5"}})),e.registerModelProvider("string",/\.font\.size$/,R.a.ELEMENT_TYPE_FORM,(function(){return{min:"8",max:"48"}})),e.registerRenderer("string","radio.appearance",R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/radio-input-appearance.html",null),e.registerRenderer(null,"validation.type",null,"/modules/Typescript/Form/resources/editor/validation-type.html",{propagateValueCSSSelector:"#item div[data-role=attribute-group][data-name=validation]",propagateValueAttributeName:"data-validation-type"}),e.registerModelProvider(null,"validation.type",R.a.CONTROL_TYPE_DATE,(function(){return{propagateValueCSSSelector:'#item div[data-role=attribute-group][data-name=validation], #item [data-role=property][data-property-name="configuration-defaultValue"], #item [data-role=property][data-property-name="configuration-maxDateRelativeValue"], #item [data-role=property][data-property-name="configuration-minDateRelativeValue"]'}})),e.registerModelProvider(null,"label.visibilityMode",[R.a.CONTROL_TYPE_TEXTAREA,R.a.CONTROL_TYPE_TEXT,R.a.CONTROL_TYPE_NUMBER,R.a.CONTROL_TYPE_EMAIL,R.a.CONTROL_TYPE_WEBSITE,R.a.CONTROL_TYPE_PASSWORD,R.a.CONTROL_TYPE_COUPON,R.a.CONTROL_TYPE_FORMULA],(function(){return{hasCompactProperty:"true"}})),e.registerRenderer(null,"label.visibilityMode",null,"/modules/Typescript/Form/resources/editor/visibility-mode.html",{hasCompactProperty:""}),e.registerRenderer(null,"options.groupedAnswersSeparatorType",R.a.CONTROL_TYPE_CHECKBOX,"/modules/Typescript/Form/resources/editor/grouped-answers-separator.html",null),e.registerRenderer("string",["label.labelText","instructions.text","configuration.defaultValue","options.suggestions"],null,"/modules/Typescript/Form/resources/editor/multi-line-string.html",{isMarkdown:"",placeholder:"Write something here..."}),e.registerModelProvider("string",["label.labelText","instructions.text"],null,(function(){return{isMarkdown:"1"}})),e.registerModelProvider("string","options.suggestions",[R.a.CONTROL_TYPE_TEXT,R.a.CONTROL_TYPE_EMAIL,R.a.CONTROL_TYPE_WEBSITE],(function(){return{placeholder:"Write suggestions separated by enter"}})),e.registerModelProvider("string","label.labelText",R.a.CONTAINER_TYPE_PAGE,(function(){return{isMarkdown:""}})),e.registerRenderer(null,"configuration.uploadToCustomizeImage",R.a.CONTROL_TYPE_IMAGE,"/modules/Typescript/Form/resources/editor/image-upload.html",null),e.registerRenderer("int[]",/^(options\.requiredFields|configuration\.allowedFields)$/,R.a.CONTROL_TYPE_ADDRESS,"/modules/Typescript/Form/resources/editor/Address/fields.html",null),e.registerRenderer("int[]",/^(configuration\.allowedPlatforms)$/,R.a.CONTROL_TYPE_SOCIAL,"/modules/Typescript/Form/resources/editor/social-platform-select.html",null),e.registerRenderer("string","configuration.addressStyle",R.a.CONTROL_TYPE_ADDRESS,"/modules/Typescript/Form/resources/editor/Address/address-style.html",null),e.registerRenderer(null,/^configuration\.(countries|defaultCountry)$/,R.a.CONTROL_TYPE_ADDRESS,"/modules/Typescript/Form/resources/editor/Address/countries.html",{multiple:"1"}),e.registerModelProvider(null,"configuration.defaultCountry",R.a.CONTROL_TYPE_ADDRESS,(function(){return{multiple:""}})),e.registerModelProvider("int[]","configuration.allowedFields",R.a.CONTROL_TYPE_ADDRESS,(function(){return{allowAllFields:null}})),e.registerRenderer("string","configuration.zoneLabel",R.a.CONTROL_TYPE_ADDRESS,"/modules/Typescript/Form/resources/editor/Address/zone-label.html",null),e.registerRenderer("string","configuration.postalCodeLabel",R.a.CONTROL_TYPE_ADDRESS,"/modules/Typescript/Form/resources/editor/Address/postalcode-label.html",null),e.registerRenderer("int","options.labelPlacement",R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/Form/label-placement.html",null),e.registerRenderer("int","options.instructionsPlacement",R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/Form/instructions-placement.html",null),e.registerRenderer("int","options.direction",R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/Form/text-direction.html",null),e.registerRenderer("int",/^options\.(label|instructions)TextAlignment$/,R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/Form/label-text-alignment.html",null),e.registerModelProvider("int","options.labelWidthInUnits",R.a.ELEMENT_TYPE_FORM,(function(){return{min:"1",max:"19"}})),e.registerRenderer("string","page.shadow.visibility",R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/page-shadow.html",null),e.registerRenderer("string",/^(page|form)\.background\.size$/,R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/image-background-size.html",null),e.registerRenderer("string",/^(page|form)\.background\.position$/,R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/image-background-position.html",null),e.registerRenderer("string",/^(page|form)\.background\.repeat$/,R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/image-background-repeat.html",null),e.registerRenderer("string",/^(page|form)\.background\.attachment$/,R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/image-background-attachment.html",null),e.registerRenderer("string",/^(page|form)\.background\.image$/,R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/image-upload.html",null),e.registerRenderer(null,/^configuration\.(defaultValue|maxDateRelativeValue|minDateRelativeValue)$/,R.a.CONTROL_TYPE_DATE,"/modules/Typescript/Form/resources/editor/Date/date-string.html",{presets:"notSet -1w -1d now +1d +1w custom",isTimePart:"",placeholder:"mm/dd/yyyy OR \xb15d2w1m",i18nPlaceholder:"edt_text_date_placeholder"}),e.registerRenderer(null,/^configuration\.(defaultValue)$/,R.a.CONTROL_TYPE_TIME,"/modules/Typescript/Form/resources/editor/Date/date-string.html",{presets:"notSet -1hh -1mm now +1mm +1hh customTime",isTimePart:"1",placeholder:"hh:mm AM or \xb15h",i18nPlaceholder:"edt_text_time_placeholder"}),e.registerRenderer("boolean","configuration.useCustomLink",R.a.CONTROL_TYPE_SOCIAL,"/modules/Typescript/Form/resources/editor/SocialControl/use-custom-link.html",null),e.registerRenderer("int[]","configuration.optionalFields",R.a.CONTROL_TYPE_NAME,"/modules/Typescript/Form/resources/editor/Name/optional-fields.html",null),e.registerRenderer("boolean","options.hasGroupedAnswers",R.a.CONTROL_TYPE_CHECKBOX,"/modules/Typescript/Form/resources/editor/has-grouped-answers-separator.html",null),e.registerRenderer("string[]",/^configuration\.(allowExtensions|forbidExtensions)$/,R.a.CONTROL_TYPE_FILE,"/modules/Typescript/Form/resources/editor/File/extensions.html",{extensions:JSON.parse("[]"),isAllow:"",isDeny:"",propagateAttributeName:""}),e.registerRenderer("boolean","options.isNumberOfTimesAnOptionCanBeChosen",[R.a.CONTROL_TYPE_CHECKBOX,R.a.CONTROL_TYPE_RADIO,R.a.CONTROL_TYPE_DROPDOWN],"/modules/Typescript/Form/resources/editor/allow-number-of-times-an-option-can-be-chosen.html",null),e.registerRenderer("boolean","options.displaySuggestions",[R.a.CONTROL_TYPE_TEXT,R.a.CONTROL_TYPE_EMAIL,R.a.CONTROL_TYPE_WEBSITE],"/modules/Typescript/Form/resources/editor/display-suggestions.html",null),e.registerRenderer("TextChoiceInterface[]",/^options\.(configureValues|quizOptions)$/,[R.a.CONTROL_TYPE_CHECKBOX,R.a.CONTROL_TYPE_RADIO,R.a.CONTROL_TYPE_DROPDOWN],"/modules/Typescript/Form/resources/editor/configure-values.html",{choicesOptionText:"Configure values",choicesOptionTextI18n:"edt_text_configure_values",defaultChoiceInputType:"",newChoiceText:"New Choice",newChoiceTextI18n:"edt_text_new_choice",itemType:"CHOICE",editingContext:"CONFIGURE_VALUES",synchronizeOtherProperties:"#item div[data-role=property][data-property-name=choices-values] input[data-plugin=text-choice-interface], #item div[data-role=property][data-property-name=options-quizOptions] input[data-plugin=text-choice-interface],  #item div[data-role=property][data-property-name=payments-virtualValue] input[data-plugin=text-choice-interface]"}),e.registerRenderer("TextChoiceInterface[]","options.quizOptions",[R.a.CONTAINER_TYPE_LIKERT_WRAPPER],"/modules/Typescript/Form/resources/editor/configure-likert-quiz.html",{choicesOptionText:"Quiz options",choicesOptionTextI18n:"edt_text_configure_values",defaultChoiceInputType:"",newChoiceText:"New Choice",newChoiceTextI18n:"edt_text_new_choice",itemType:"CHOICE",editingContext:"QUIZ_OPTIONS",synchronizeOtherProperties:"#item div[data-role=property][data-property-name=choices-scale] input[data-plugin=text-choice-interface], #item div[data-role=property][data-property-name=payments-virtualValue] input[data-plugin=text-choice-interface]"}),e.registerRenderer("string","options.masterFontFamily",R.a.ELEMENT_TYPE_FORM,"/modules/Typescript/Form/resources/editor/font-face.html",null),e.registerRenderer("string","options.masterTextColor",R.a.ELEMENT_TYPE_FORM,"ui://color",null),e.registerModelProvider("TextChoiceInterface[]","options.quizOptions",[R.a.CONTROL_TYPE_RADIO,R.a.CONTROL_TYPE_DROPDOWN],(function(){return{choicesOptionText:"Quiz Options",choicesOptionTextI18n:"edt_text_quiz_options",editingContext:"QUIZ_OPTIONS",synchronizeOtherProperties:"#item div[data-role=property][data-property-name=choices-values] input[data-plugin=text-choice-interface], #item div[data-role=property][data-property-name=options-configureValues] input[data-plugin=text-choice-interface],  #item div[data-role=property][data-property-name=payments-virtualValue] input[data-plugin=text-choice-interface]",defaultChoiceInputType:String(v.f.RADIO)}})),e.registerModelProvider("TextChoiceInterface[]","options.quizOptions",[R.a.CONTROL_TYPE_CHECKBOX],(function(){return{choicesOptionText:"Quiz Options",choicesOptionTextI18n:"edt_text_quiz_options",editingContext:"QUIZ_OPTIONS",synchronizeOtherProperties:"#item div[data-role=property][data-property-name=choices-values] input[data-plugin=text-choice-interface], #item div[data-role=property][data-property-name=options-configureValues] input[data-plugin=text-choice-interface],  #item div[data-role=property][data-property-name=payments-virtualValue] input[data-plugin=text-choice-interface]",defaultChoiceInputType:String(v.f.CHECKBOX)}})),e.registerRenderer("TextChoiceInterface[]","payments.virtualValue",[R.a.CONTROL_TYPE_CHECKBOX,R.a.CONTROL_TYPE_RADIO,R.a.CONTROL_TYPE_DROPDOWN,R.a.CONTAINER_TYPE_LIKERT_WRAPPER],"/modules/Typescript/Form/resources/editor/configure-values.html",{choicesOptionText:"Price",choicesOptionTextI18n:"fieldProperty_price",defaultChoiceInputType:String(v.f.RADIO),newChoiceText:"New Choice",newChoiceTextI18n:"edt_text_new_choice",itemType:"CHOICE",editingContext:"PAYMENTS_VALUES",propertyTitle:e.translationService.translateTextDefault("fieldProperty_price_tooltip","Form fields with prices assigned to them can be used as products"),synchronizeOtherProperties:"#item div[data-role=property][data-property-name=choices-values] input[data-plugin=text-choice-interface], #item div[data-role=property][data-property-name=choices-scale] input[data-plugin=text-choice-interface], #item div[data-role=property][data-property-name=options-quizOptions] input[data-plugin=text-choice-interface], #item div[data-role=property][data-property-name=options-configureValues] input[data-plugin=text-choice-interface]"}),e.registerModelProvider("TextChoiceInterface[]","^choices.values|payments.virtualValue$",R.a.CONTROL_TYPE_CHECKBOX,(function(){return{defaultChoiceInputType:String(v.f.CHECKBOX)}})),e.registerModelProvider("string[]","configuration.allowExtensions",R.a.CONTROL_TYPE_FILE,(function(){return{extensions:JSON.parse(JSON.stringify(N.a.getInstance().getAllowedUserFileExtensions())),isAllow:"1",isDeny:"",propagateAttributeName:"data-allowed-extensions"}})),e.registerModelProvider("string[]","configuration.forbidExtensions",R.a.CONTROL_TYPE_FILE,(function(){return{extensions:JSON.parse(JSON.stringify(N.a.getInstance().getForbiddenUserFileExtensions())),isAllow:"",isDeny:"1",propagateAttributeName:"data-forbidden-extensions"}})),e.registerRenderer("boolean","options.multiple",R.a.CONTROL_TYPE_FILE,"/modules/Typescript/Form/resources/editor/File/has-allow-multiple-files.html",null),e.registerRenderer("boolean","layout.isSideBySide",[R.a.CONTROL_TYPE_RADIO,R.a.CONTROL_TYPE_CHECKBOX],"/modules/Typescript/Form/resources/editor/Radio/has-side-by-side-layout.html",null),e.registerModelProvider("string","configuration.url",R.a.CONTROL_TYPE_TERMS_OF_SERVICE,(function(){return{placeholder:"e.g.: www.yourdomain.com/tos.html",i18nPlaceholder:"edt_text_terms_of_service_example"}})),e.registerModelProvider("string","configuration.agreementLabelAdditionalText",R.a.CONTROL_TYPE_TERMS_OF_SERVICE,(function(){return{placeholder:"TIP: use the tags <link> and </link> to add a URL",i18nPlaceholder:"edt_text_terms_of_service_agreement_text_example"}})),e.registerModelProvider("string","configuration.facebookTitle",R.a.CONTROL_TYPE_SOCIAL,(function(){return{placeholder:"Title",i18nPlaceholder:"edt_text_title"}})),e.registerModelProvider("string","configuration.facebookDescription",R.a.CONTROL_TYPE_SOCIAL,(function(){return{placeholder:"Description",i18nPlaceholder:"edt_text_description"}})),e.registerModelProvider("string","configuration.customLink",R.a.CONTROL_TYPE_SOCIAL,(function(){return{placeholder:"e.g.: www.yourdomain.com",i18nPlaceholder:"edt_text_social_custom_link_example"}})),e.registerModelProvider("string","validation.customValue",R.a.CONTROL_TYPE_TEXT,(function(){return{placeholder:"Validation format",i18nPlaceholder:"edt_text_validation_format"}})),e.registerModelProvider("int",/^(configuration|choices)\.(minLength|maxLength|minNumberOfWords|maxNumberOfWords|minNumberOfChoices|maxNumberOfChoices)$/,[R.a.CONTROL_TYPE_TEXT,R.a.CONTROL_TYPE_TEXTAREA,R.a.CONTROL_TYPE_CHECKBOX],(function(){return{placeholder:"none",i18nPlaceholder:"edt_text_none_placeholder"}})),e.registerModelProvider("int","configuration.defaultValue",R.a.CONTROL_TYPE_STAR_RATING,(function(){return{min:"1",max:"10",placeholder:"none",i18nPlaceholder:"edt_text_none_placeholder"}})),e.registerModelProvider("int","configuration.starsCount",R.a.CONTROL_TYPE_STAR_RATING,(function(){return{min:"3",max:"10",placeholder:"none",i18nPlaceholder:"edt_text_none_placeholder"}})),e.registerModelProvider("int",/^(configuration)\.(minSizeInBytes|maxSizeInBytes)$/,R.a.CONTROL_TYPE_FILE,(function(){return{max:"10240000",placeholder:"none",i18nPlaceholder:"edt_text_none_placeholder"}})),e.registerModelProvider("number",/^(configuration)\.(minSizeInKiloBytes|maxSizeInKiloBytes)$/,R.a.CONTROL_TYPE_FILE,(function(){return{max:"153600",placeholder:"none",i18nPlaceholder:"edt_text_none_placeholder"}})),e.registerModelProvider(null,/^(configuration)\.(minValue|maxValue|minLength|maxLength)$/,[R.a.CONTROL_TYPE_NUMBER,R.a.CONTROL_TYPE_EMAIL,R.a.CONTROL_TYPE_WEBSITE,R.a.CONTROL_TYPE_PASSWORD,R.a.CONTROL_TYPE_FORMULA],(function(){return{max:"1000",placeholder:"none",i18nPlaceholder:"edt_text_none_placeholder"}})),e.registerModelProvider(null,/^(configuration)\.(popupWidthInPixels|popupHeightInPixels)$/,[R.a.CONTROL_TYPE_TERMS_OF_SERVICE],(function(){return{max:"1000"}})),e.registerModelProvider(null,"configuration.initialZoom",[R.a.CONTROL_TYPE_MAP],(function(){return{max:"22",min:"1"}})),e.registerModelProvider("string","configuration.initialAddressText",[R.a.CONTROL_TYPE_MAP],(function(){return{placeholder:"Write an address here...",i18nPlaceholder:"edt_text_write_address"}})),e.registerModelProvider("string",/^(label)\.(submitButtonText|resetButtonText)$/,[R.a.CONTROL_TYPE_ACTION_BAR],(function(){return{placeholder:"Button text",i18nPlaceholder:"edt_text_button_text"}})),e.registerModelProvider("number","configuration.defaultValue",[R.a.CONTROL_TYPE_NUMBER,R.a.CONTROL_TYPE_FORMULA],(function(){return{placeholder:"none",i18nPlaceholder:"edt_text_none_placeholder"}})),e.registerModelProvider("string",/^configuration.(fieldName|alternateText)$/,[R.a.CONTROL_TYPE_HTML_BLOCK,R.a.CONTROL_TYPE_HEADING,R.a.CONTROL_TYPE_IMAGE,R.a.CONTROL_TYPE_WIDGET_FACEBOOK,R.a.CONTROL_TYPE_WIDGET_PDF,R.a.CONTROL_TYPE_WIDGET_VIDEO],(function(){return{placeholder:"Write something here...",i18nPlaceholder:"edt_text_write_something"}})),e.registerModelProvider("boolean","label.isBold",null,(function(){return{title:"Bold",i18nTitle:"edt_text_bold"}})),e.registerModelProvider("boolean","label.isItalic",null,(function(){return{title:"Italic",i18nTitle:"edt_text_italic"}})),e.registerRenderer(null,"synchronize.withControlId",[R.a.CONTROL_TYPE_TEXT,R.a.CONTROL_TYPE_PASSWORD,R.a.CONTROL_TYPE_WEBSITE,R.a.CONTROL_TYPE_NUMBER,R.a.CONTROL_TYPE_EMAIL,R.a.CONTROL_TYPE_FORMULA],"/modules/Typescript/Form/resources/editor/matching-controls-list.html",null),e.registerRenderer(null,"propagate.onControlId",[R.a.CONTROL_TYPE_MAP],"/modules/Typescript/Form/resources/editor/matching-controls-list.html",null),e.registerRenderer(null,"synchronize.withControlId",[R.a.CONTROL_TYPE_MAP],"/modules/Typescript/Form/resources/editor/synchronize-map-list.html",null),e.registerRenderer("boolean","synchronize.enabled",[R.a.CONTROL_TYPE_TEXT,R.a.CONTROL_TYPE_PASSWORD,R.a.CONTROL_TYPE_WEBSITE,R.a.CONTROL_TYPE_NUMBER,R.a.CONTROL_TYPE_EMAIL,R.a.CONTROL_TYPE_FORMULA],"/modules/Typescript/Form/resources/editor/has-match-another-field-enabled.html",null),e.registerModelProvider(null,"size.heightInRows",R.a.CONTROL_TYPE_TEXTAREA,(function(){return{max:"20",min:"3"}})),e.registerRenderer("boolean","configuration.isLimitSubmissionsEnabled",[R.a.CONTROL_TYPE_NUMBER,R.a.CONTROL_TYPE_FORMULA],"/modules/Typescript/Form/resources/editor/Number/is-limit-submissions-enabled.html",null),e.registerModelProvider("string","configuration.url",R.a.CONTROL_TYPE_WIDGET_FACEBOOK,(function(){return{placeholder:"https://www.facebook.com/123FormBuilder",i18nPlaceholder:""}})),e.registerModelProvider("string","configuration.url",R.a.CONTROL_TYPE_WIDGET_PDF,(function(){return{placeholder:"Write a document URL here...",i18nPlaceholder:"edt_text_write_document_url"}})),e.registerModelProvider("string","configuration.url",R.a.CONTROL_TYPE_WIDGET_VIDEO,(function(){return{placeholder:"https://youtu.be/T4hCGUGxnoc",i18nPlaceholder:""}})),e.registerRenderer("any","payments.productsDialogTrigger",[R.a.CONTROL_TYPE_NUMBER,R.a.CONTROL_TYPE_TEXT,R.a.CONTROL_TYPE_STAR_RATING,R.a.CONTROL_TYPE_TERMS_OF_SERVICE,R.a.CONTROL_TYPE_RADIO,R.a.CONTROL_TYPE_CHECKBOX,R.a.CONTROL_TYPE_DROPDOWN,R.a.CONTROL_TYPE_PRICE,R.a.CONTAINER_TYPE_LIKERT_WRAPPER],"/modules/Typescript/Form/resources/editor/Payments/ProductsDialog/payments-products-dialog-trigger.html",{choicesOptionText:"Add product details",choicesOptionTextI18n:"fieldProperty_addProductDetails"}),e.registerModelProvider("number","payments.virtualValue",[R.a.CONTROL_TYPE_NUMBER,R.a.CONTROL_TYPE_TEXT,R.a.CONTROL_TYPE_STAR_RATING,R.a.CONTROL_TYPE_TERMS_OF_SERVICE,R.a.CONTROL_TYPE_PRICE],(function(){return{placeholder:"none",i18nPlaceholder:"edt_text_none_placeholder"}})),e.registerRenderer("ICouponCodeSettings[]","coupons.couponCodes",R.a.CONTROL_TYPE_COUPON,"/modules/Typescript/Form/resources/editor/Coupon/coupon-codes.html",null),e.registerRenderer("string","calculations.formula",R.a.CONTROL_TYPE_FORMULA,"/modules/Typescript/Form/resources/editor/formula.html",{addFieldLabel:"Add field",i18nAddFieldLabel:"edt_formula_add_field_label",deletedFieldLabel:"Deleted",i18nDeletedFieldLabel:"edt_formula_deleted_field_label",fixedAmountLabel:"Fixed amount",i18nFixedAmountLabel:"edt_formula_fixed_amount_label"}),e.registerRenderer("int","currencyId",I.a.PAYMENT_SUMMARY_EDITOR_SETTING,"/modules/Typescript/Form/resources/editor/SummarySetting/price.html",null),e.registerRenderer("int","discountOnTotal",I.a.PAYMENT_SUMMARY_EDITOR_SETTING,"/modules/Typescript/Form/resources/editor/SummarySetting/discount-on-total-container.html",null),e.registerRenderer("int","taxOnTotal",I.a.PAYMENT_SUMMARY_EDITOR_SETTING,"/modules/Typescript/Form/resources/editor/SummarySetting/tax-on-total-container.html",null),e.registerRenderer("boolean","showSummaryAfterSubmit",I.a.PAYMENT_SUMMARY_EDITOR_SETTING,"/modules/Typescript/Form/resources/editor/SummarySetting/show-summary.html",null),e.registerRenderer("boolean","synchronize.enabled",R.a.CONTROL_TYPE_MAP,"/modules/Typescript/Form/resources/editor/send-map-coordinates.html",{group_property:"data-synchronize-enabled"}),e.registerRenderer("boolean","propagate.enabled",R.a.CONTROL_TYPE_MAP,"/modules/Typescript/Form/resources/editor/send-map-coordinates.html",{group_property:"data-propagate-enabled"}),e.registerModelProvider("number","propagate.onControlId",[R.a.CONTROL_TYPE_MAP],(function(){return{i18nPlaceholder:"edt_text_none_placeholder"}})),e.registerRenderer("string",["locations"],I.a.PAYMENT_PROCESSOR_SQUARE_EDITOR_SETTING,"/modules/Typescript/Form/resources/editor/Payments/Processors/Square/locations-dialog-trigger.html",null),e.registerRenderer("string",["merchantId","publicKey","privateKey","planId","userEmail","storeName","storeDescription","storeImage","clientId","encryptionKey","userId","partner","password","apiUsername","apiPassword","apiSignature","merchantKey","clientKey","serviceKey","apiLoginId","transactionKey","vendorName","encryptionPassword","vendorEmail","partnerId","oAuthCustomUrl","oAuthCustomToken","failureEmail"],[I.a.PAYMENT_PROCESSOR_BRAINTREE_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_STRIPE_CHECKOUT_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_PAYPAL_PAYFLOW_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_PAYPAL_PRO_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_PAYU_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_SISOW_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_PAYFAST_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_WORLDPAY_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_AUTHORIZE_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_SAGEPAY_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_PAYU_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_CIVICA_EDITOR_SETTING],"/modules/Typescript/Form/resources/editor/multi-line-string.html",null),e.registerRenderer("string","userEmail",[I.a.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_STRIPE_CHECKOUT_EDITOR_SETTING],"/modules/Typescript/Form/resources/editor/Payments/Processors/Stripe/payments-string-read-only.html",null),e.registerRenderer("string","language",[I.a.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING],"/modules/Typescript/Form/resources/editor/Payments/Processors/language.html",null),e.registerModelProvider("int","recurrenceFrequency",[I.a.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_PAYPAL_PAYFLOW_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_PAYPAL_PRO_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING],(function(){return{placeholder:"none",i18nPlaceholder:"edt_text_none_placeholder",max:"52"}})),e.registerRenderer("int","recurrenceTimeUnit",[I.a.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_PAYPAL_PAYFLOW_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_PAYPAL_PRO_EDITOR_SETTING],"/modules/Typescript/Form/resources/editor/Payments/Processors/recurrence-time-unit.html",null),e.registerRenderer("int","recurrenceTimeUnit",[I.a.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING],"/modules/Typescript/Form/resources/editor/Payments/Processors/Stripe/recurrence-time-unit-without-day.html",null),e.registerRenderer("int","recurrenceCycles",[I.a.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_PAYPAL_PAYFLOW_EDITOR_SETTING,I.a.PAYMENT_PROCESSOR_PAYPAL_PRO_EDITOR_SETTING],"/modules/Typescript/Form/resources/editor/Payments/Processors/recurrence-cycles.html",null),e.registerRenderer("string","customerEmail",I.a.PAYMENT_PROCESSOR_SAGEPAY_EDITOR_SETTING,"/modules/Typescript/Form/resources/editor/Payments/Processors/Sagepay/customer-email.html",null),e.registerModelProvider("int","configuration.maxNumberOfGroupsAllowed",R.a.CONTAINER_TYPE_REPEATABLE,(function(){return{min:"1",max:"60"}})),e.registerRenderer("string","configuration.apiKey",R.a.CONTROL_TYPE_MAP,"/modules/Typescript/Form/resources/editor/api-key-description.html",{placeholder:"Paste here your API Key...",i18nPlaceholder:"edt_text_paste_here_api_key",i18nApiKeyDescription:"edt_api_key_description"}),e.registerRenderer("string","label.labelText",R.a.CONTROL_TYPE_FEE,"/modules/Typescript/Form/resources/editor/Fee/name.html",{title:"Name:",i18nTitle:"edt_fee_control_name_title",placeholder:"Write something here...",i18nPlaceholder:"edt_text_write_something"}),e.registerRenderer("string","instructions.text",R.a.CONTROL_TYPE_FEE,"/modules/Typescript/Form/resources/editor/Fee/description.html",{title:"Description:",i18nTitle:"edt_fee_control_description_title",placeholder:"Write something here...",i18nPlaceholder:"edt_text_write_something"}),e.registerRenderer("number","payments.virtualValue",R.a.CONTROL_TYPE_FEE,"/modules/Typescript/Form/resources/editor/Fee/price.html",{basePrice:"Base price:",i18nBasePrice:"XYZ",formCurrency:"Form currency:",i18nFormCurrency:"XYZ",placeholder:"0",i18nPlaceholder:"XYZ"}),e.registerRenderer("boolean","options.displayPrefix",[R.a.CONTROL_TYPE_TEXT,R.a.CONTROL_TYPE_NUMBER,R.a.CONTROL_TYPE_FORMULA],"/modules/Typescript/Form/resources/editor/display-prefix.html",null),e.registerRenderer("string","configuration.prefix",[R.a.CONTROL_TYPE_TEXT,R.a.CONTROL_TYPE_NUMBER,R.a.CONTROL_TYPE_FORMULA],"/modules/Typescript/Form/resources/editor/prefix.html",null),e.registerRenderer("array","columns",I.a.PAYMENT_SUMMARY_EDITOR_SETTING,"/modules/Typescript/Form/resources/editor/list-editor.html",null),e.registerRenderer("boolean","choices.displayPlaceholderText",R.a.CONTROL_TYPE_DROPDOWN,"/modules/Typescript/Form/resources/editor/Dropdown/display-placeholder-text.html",null),e.registerRenderer("string","options.placeholderText",R.a.CONTROL_TYPE_DROPDOWN,"/modules/Typescript/Form/resources/editor/Dropdown/placeholder-text.html",null)}}]),n}(O.a)},function(e,t,n){"use strict";var i,r,a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(0),u=n.n(c),d=n(49),p=function(){function e(t){o()(this,e),u()(this,"buffer",void 0),u()(this,"consumedBuffer",void 0),u()(this,"consumed",void 0),u()(this,"snapshots",[]),this.buffer=String(t||""),this.consumedBuffer="",this.consumed=0}return l()(e,[{key:"readEndOfFile",value:function(){return""===this.buffer}},{key:"getOffset",value:function(){return this.consumed}},{key:"consume",value:function(e){return e>0&&(this.consumed+=~~e,this.consumedBuffer=this.consumedBuffer.concat(this.buffer.slice(0,~~e)),this.buffer=this.buffer.slice(~~e)),this}},{key:"getConsumedBuffer",value:function(){return this.consumedBuffer}},{key:"toString",value:function(){return this.buffer}},{key:"createSnapshot",value:function(){this.snapshots.push({read:this.buffer,consumed:this.consumedBuffer,pos:this.consumed})}},{key:"ignoreLastSnapshot",value:function(){this.commitLasSnapshot()}},{key:"rollbackLastSnapshot",value:function(){var e=this.snapshots.length;this.buffer=this.snapshots[e-1].read,this.consumedBuffer=this.snapshots[e-1].consumed,this.consumed=this.snapshots[e-1].pos,this.snapshots.splice(e-1,1)}},{key:"commitLasSnapshot",value:function(){var e=this.snapshots.length;this.snapshots.splice(e-1,1)}}]),e}();n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return _})),function(e){e[e.ADD=0]="ADD",e[e.SUBSTRACT=1]="SUBSTRACT",e[e.MULTIPLY=2]="MULTIPLY",e[e.DIVIDE=3]="DIVIDE"}(i||(i={})),function(e){e[e.PX=0]="PX",e[e.PERCENT=1]="PERCENT",e[e.EM=2]="EM",e[e.CM=3]="CM",e[e.MM=4]="MM",e[e.IN=5]="IN",e[e.PT=6]="PT"}(r||(r={}));var h=function(){function e(){o()(this,e),u()(this,"members",[]),u()(this,"operators",[])}return l()(e,[{key:"eval",value:function(){if(0===this.members.length)throw new Error("0 members!");if(this.members.length-this.operators.length!==1)throw new Error("Bad number of members / operators");for(;1!==this.members.length;){for(var e=null,t=-1,n=-1,i=0,r=this.operators.length;i<r;i++)(n=this.getOperatorPriority(this.operators[i]))>t&&(e=i,t=n);if(null===e)throw new Error("Bug!");this.executeMathOperationAtExpressionPosition(e)}return this.members[0]}},{key:"executeMathOperationAtExpressionPosition",value:function(e){var t=this.members[e],n=this.members[e+1],i=this.operators[e];this.members[e]=this.execMath(t,n,i),this.members.splice(e+1,1),this.operators.splice(e,1)}},{key:"execMath",value:function(e,t,n){var r={value:e.value,unit:null===e.unit?t.unit:e.unit};if(null!==e.unit&&null!==t.unit&&e.unit!==t.unit)throw new Error("Don't know how to do math on \""+this.unitToString(e.unit)+'" && "'+this.unitToString(t.unit)+'"');switch(n){case i.MULTIPLY:r.value*=t.value;break;case i.DIVIDE:r.value/=t.value;break;case i.ADD:r.value+=t.value;break;case i.SUBSTRACT:r.value-=t.value;break;default:throw new Error("Invalid operator!")}return r}},{key:"getOperatorPriority",value:function(e){switch(e){case i.ADD:case i.SUBSTRACT:return 1;case i.DIVIDE:case i.MULTIPLY:return 2;default:throw new Error("Invalid operator!")}}},{key:"toString",value:function(){var e=this.eval();return 0===e.value?"0":String(e.value)+this.unitToString(e.unit)}},{key:"withMember",value:function(e){return this.members.push(e),this}},{key:"withOperator",value:function(e){return this.operators.push(e),this}},{key:"unitToString",value:function(e){switch(e){case null:return"";case r.CM:return"cm";case r.MM:return"mm";case r.EM:return"em";case r.PX:return"px";case r.PT:return"pt";case r.IN:return"in";case r.PERCENT:return"%";default:throw new Error("Unknown ECSSUnit: "+e)}}}]),e}(),_=function(){function e(){o()(this,e),u()(this,"TOK_OPERATOR",/^[+\-\/\*]/),u()(this,"TOK_WHITESPACE",/^[\s]+/),u()(this,"TOK_BRACKET_START",/^(calc)?\(/),u()(this,"TOK_BRACKET_END",/^\)/),u()(this,"TOK_NUMBER",/^[-]?\d+(\.\d+)?/),u()(this,"TOK_CSS_UNIT",/^px|em|%|pt|in|mm|cm/i)}return l()(e,[{key:"simplifyCSSCalcExpression",value:function(e){var t=new p(e);try{return this.parse(t).toString()}catch(n){return d.a.VERBOSE_CONSOLE&&console.log("Simplify CSS "+JSON.stringify(e)+" failed: "+n.toString()),e}}},{key:"readOperator",value:function(e){this.readWhitespace(e);var t=this.TOK_OPERATOR.exec(e.toString());if(!t)return null;switch(e.consume(1),t[0]){case"+":return i.ADD;case"-":return i.SUBSTRACT;case"/":return i.DIVIDE;case"*":return i.MULTIPLY}}},{key:"readWhitespace",value:function(e){var t=this.TOK_WHITESPACE.exec(e.toString());t&&e.consume(t[0].length)}},{key:"readCSSConstant",value:function(e){this.readWhitespace(e);var t=this.TOK_NUMBER.exec(e.toString());if(t){e.consume(t[0].length);var n={value:parseFloat(t[0]),unit:null};if(!isFinite(n.value))throw new Error("Invalid number: "+t[0]);if(t=this.TOK_CSS_UNIT.exec(e.toString()))switch(e.consume(t[0].length),t[0].toLowerCase()){case"px":n.unit=r.PX;break;case"pt":n.unit=r.PT;break;case"em":n.unit=r.EM;break;case"mm":n.unit=r.MM;break;case"in":n.unit=r.IN;break;case"cm":n.unit=r.CM;break;case"%":n.unit=r.PERCENT;break;default:throw new Error("Unknown css unit: "+t[0])}return 0===n.value&&(n.unit=null),n}return null}},{key:"readBracketStart",value:function(e){this.readWhitespace(e);var t=this.TOK_BRACKET_START.exec(e.toString());return!!t&&(e.consume(t[0].length),!0)}},{key:"readBracketEnd",value:function(e){this.readWhitespace(e);var t=this.TOK_BRACKET_END.exec(e.toString());return!!t&&(e.consume(t[0].length),!0)}},{key:"readEof",value:function(e,t){return this.readWhitespace(e),0===t?""===e.toString():!!this.TOK_BRACKET_END.exec(e.toString())}},{key:"parse",value:function(e){for(var t,n,i,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=new h;!this.readEof(e,a);){if(n=!1,r=!1,this.readBracketStart(e)){if(o.withMember(this.parse(e,a+1).eval()),n=!0,!this.readBracketEnd(e))throw new Error('")" expected!')}else{if(!(t=this.readCSSConstant(e))){if(this.readEof(e,a))return o;throw new Error("Unterminated string")}o.withMember(t),n=!0}if(!n)throw new Error("CSS constant expected!");if(null!==(i=this.readOperator(e))&&(o.withOperator(i),r=!0),!r){if(this.readEof(e,a))break;throw new Error("Unexpected string continuation")}}return o}}]),e}()},,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,r=n(11),a=n.n(r),o=n(52),s=n.n(o),l=n(15),c=n(110),u=n(53),d=n.n(u),p=(n(565),0);!function(e){e.FULL_SIZE="full_size"}(i||(i={}));t.b=function(e){var t=e.hasBorderDelimiter,n=e.size,r=e.activeTabIndexOverride,o=e.children,u=Object(l.useState)(""),h=s()(u,2),_=h[0],g=h[1],m=Object(l.useState)(p),f=s()(m,2),E=f[0],y=f[1],T=Object(l.useState)({width:0,left:0}),v=s()(T,2),O=v[0],b=v[1],C=function(e,t){return"tabs-".concat(e,"-tab-").concat(t)},I=d()("tabs",{"tabs--with-border-delimiter":t,"tabs--full-size":n===i.FULL_SIZE});return Object(l.useEffect)((function(){var e=C(p,0),t=document.getElementById(e);return g(e),b({width:t.offsetWidth,left:t.offsetLeft}),y(p++),function(){y(p--)}}),[]),Object(l.useEffect)((function(){if(("undefined"!==typeof r||!r)&&!isNaN(r)&&!(r<0)){var e=C(p-1,r),t=document.getElementById(e);g(e),b({width:t.offsetWidth,left:t.offsetLeft})}}),[r]),a()("div",{className:I},void 0,a()(c.a.Provider,{value:{activeTab:_,setActiveTab:g,instanceCount:E,generateTabId:C,generateTabPanelId:function(e,t){return"tabs-".concat(e,"-tabpanel-").concat(t)},indicatorCoords:O,setIndicatorCoords:b,activeTabIndexOverride:r}},void 0,o))}},,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return l}));var i=n(0),r=n.n(i),a=n(176);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={isOpen:!1,validatedEmail:"",formId:""};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0,n=t.payload,i=t.type;switch(i){case a.a.SET_IS_OPEN:return s({},e,{isOpen:n});case a.a.SET_VALIDATED_EMAIL:return s({},e,{validatedEmail:n});default:return e}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l}));var i=n(0),r=n.n(i),a=n(100);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={feature:null,target:{type:null,name:null}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0,n=t.payload,i=t.type;switch(i){case a.a.SET_ACTIVE_PAYWALL:return s({},e,{},n);case a.a.CLOSE_PAYWALL:return s({},e,{},l);case a.a.FETCH_PLAN_PRICES:return s({},e,{isLoading:!0});case a.a.FETCH_PLAN_PRICES_SUCCESS:return s({},e,{planPrices:n,isLoading:!1});case a.a.FETCH_PLAN_PRICES_FAILURE:return s({},e,{isLoading:!1});default:return s({},e)}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return p}));var i=n(43),r=n.n(i),a=n(0),o=n.n(a),s=n(609),l=n(228),c=n(165);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={toasters:[]};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,n=t.payload,i=t.type;switch(i){case l.a.ADD_TOASTER:var a=n;return a.id||(a.id=Math.floor(1e5+9e5*Math.random()).toString()),a.type||(a.type=c.a.DEFAULT),d({},e,{toasters:[].concat(r()(e.toasters),[n])});case l.a.REMOVE_TOASTER:var o=Object(s.a)(e.toasters,(function(e){return e.id!==n}));return d({},e,{toasters:r()(o)});default:return d({},e)}}},,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(1),l=function(){function e(){r()(this,e)}return o()(e,[{key:"updateRootNode",value:function(e){console.log("CustomControlRenderer: update: ",e.getHash())}},{key:"getRendererType",value:function(){return s.r.CUSTOM_CONTROL_RENDERER}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(1),_=n(37);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var m=function(e){l()(n,e);var t=g(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,n,i,r=e.getRootNode(),a=e.getLabelDOMNode(),o=e.getInstructionsDOMNode(),s=e.getErrorDOMNode(),l=e.getInputDOMNodes(),c=e.getColspan();if(e.getElementKind()===h.p.CONTROL&&(e.getMinInputRowWidth()>c?r.setAttribute("data-force-mobile-rendering","1"):r.removeAttribute("data-force-mobile-rendering")),r.setAttribute("data-renderer-type","tln"),r.removeAttribute("data-label-width"),null!==a&&r.appendChild(a),null!==o&&r.appendChild(o),null!==l)for(var u=0,d=l.length;u<d;u++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===u&&t.setAttribute("data-is-first-row","1"),d-1===u&&t.setAttribute("data-is-last-row","1"),i=0;for(var p=0,g=l[u].inputs.length;p<g;p++)t.appendChild(_.a.castToDOMElement(l[u].inputs[p].input)),null!==(n=this.getSizeAttributeValue(l[u].inputs[p].width))?(l[u].inputs[p].input.setAttribute("data-size",n),i+=this.getSizeInUnits(c,l[u].inputs[p].width)):l[u].inputs[p].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(c-i)),r.appendChild(t)}null!==s&&r.appendChild(s),null!==a&&null!==l&&e.isCompactFieldPlaceholderSupported()&&_.a.setLabelCompactFieldState(!1,a.textContent,l,!1)}},{key:"getRendererType",value:function(){return h.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL}}]),n}(_.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(1),_=n(37);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var m=function(e){l()(n,e);var t=g(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,n,i,r=e.getRootNode(),a=e.getLabelDOMNode(),o=e.getInstructionsDOMNode(),s=e.getErrorDOMNode(),l=e.getInputDOMNodes(),c=e.getColspan();if(e.getElementKind()===h.p.CONTROL&&(e.getMinInputRowWidth()>c?r.setAttribute("data-force-mobile-rendering","1"):r.removeAttribute("data-force-mobile-rendering")),r.setAttribute("data-renderer-type","tfn"),r.removeAttribute("data-label-width"),null!==a&&r.appendChild(a),null!==l)for(var u=0,d=l.length;u<d;u++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===u&&t.setAttribute("data-is-first-row","1"),d-1===u&&t.setAttribute("data-is-last-row","1"),i=0;for(var p=0,g=l[u].inputs.length;p<g;p++)t.appendChild(_.a.castToDOMElement(l[u].inputs[p].input)),null!==(n=this.getSizeAttributeValue(l[u].inputs[p].width))?(l[u].inputs[p].input.setAttribute("data-size",n),i+=this.getSizeInUnits(c,l[u].inputs[p].width)):l[u].inputs[p].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(c-i)),r.appendChild(t)}null!==o&&r.appendChild(o),null!==s&&r.appendChild(s),null!==a&&null!==l&&e.isCompactFieldPlaceholderSupported()&&_.a.setLabelCompactFieldState(!1,a.textContent,l,!1)}},{key:"getRendererType",value:function(){return h.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD}}]),n}(_.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(1),_=n(37);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var m=function(e){l()(n,e);var t=g(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,n,i,r=e.getRootNode(),a=document.createElement("div"),o=document.createElement("div"),s=e.getLabelDOMNode(),l=e.getInstructionsDOMNode(),c=e.getErrorDOMNode(),u=e.getInputDOMNodes(),d=this.getElementLayoutSize(e),p=d.inputWidthInUnits;if(e.getElementKind()===h.p.CONTROL&&(e.getMinInputRowWidth()>p?r.setAttribute("data-force-mobile-rendering","1"):r.removeAttribute("data-force-mobile-rendering")),r.setAttribute("data-renderer-type","lln"),r.setAttribute("data-label-width",String(d.labelWidthInUnits)),a.setAttribute("data-role","label-column"),a.setAttribute("data-colspan",String(d.labelWidthInUnits)),o.setAttribute("data-role","input-column"),o.setAttribute("data-colspan",String(d.inputWidthInUnits)),r.appendChild(a),r.appendChild(o),null!==s&&a.appendChild(s),null!==l&&a.appendChild(l),null!==u)for(var g=0,m=u.length;g<m;g++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===g&&t.setAttribute("data-is-first-row","1"),m-1===g&&t.setAttribute("data-is-last-row","1"),i=0;for(var f=0,E=u[g].inputs.length;f<E;f++)t.appendChild(_.a.castToDOMElement(u[g].inputs[f].input)),null!==(n=this.getSizeAttributeValue(u[g].inputs[f].width))?(u[g].inputs[f].input.setAttribute("data-size",n),i+=this.getSizeInUnits(p,u[g].inputs[f].width)):u[g].inputs[f].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(p-i)),o.appendChild(t)}null!==c&&o.appendChild(c),null!==s&&null!==u&&e.isCompactFieldPlaceholderSupported()&&_.a.setLabelCompactFieldState(!1,s.textContent,u,!1)}},{key:"getRendererType",value:function(){return h.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL}}]),n}(_.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(1),_=n(37);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var m=function(e){l()(n,e);var t=g(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,n,i,r=e.getRootNode(),a=document.createElement("div"),o=document.createElement("div"),s=e.getLabelDOMNode(),l=e.getInstructionsDOMNode(),c=e.getErrorDOMNode(),u=e.getInputDOMNodes(),d=this.getElementLayoutSize(e),p=d.inputWidthInUnits;if(e.getElementKind()===h.p.CONTROL&&(e.getMinInputRowWidth()>p?r.setAttribute("data-force-mobile-rendering","1"):r.removeAttribute("data-force-mobile-rendering")),r.setAttribute("data-renderer-type","rln"),r.setAttribute("data-label-width",String(d.inputWidthInUnits)),a.setAttribute("data-role","label-column"),a.setAttribute("data-colspan",String(d.labelWidthInUnits)),o.setAttribute("data-role","input-column"),o.setAttribute("data-colspan",String(d.inputWidthInUnits)),r.appendChild(o),r.appendChild(a),null!==s&&a.appendChild(s),null!==l&&a.appendChild(l),null!==u)for(var g=0,m=u.length;g<m;g++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===g&&t.setAttribute("data-is-first-row","1"),m-1===g&&t.setAttribute("data-is-last-row","1"),i=0;for(var f=0,E=u[g].inputs.length;f<E;f++)t.appendChild(_.a.castToDOMElement(u[g].inputs[f].input)),null!==(n=this.getSizeAttributeValue(u[g].inputs[f].width))?(u[g].inputs[f].input.setAttribute("data-size",n),i+=this.getSizeInUnits(p,u[g].inputs[f].width)):u[g].inputs[f].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(p-i)),o.appendChild(t)}null!==c&&o.appendChild(c),null!==s&&null!==u&&e.isCompactFieldPlaceholderSupported()&&_.a.setLabelCompactFieldState(!1,s.textContent,u,!1)}},{key:"getRendererType",value:function(){return h.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL}}]),n}(_.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(1),_=n(37);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var m=function(e){l()(n,e);var t=g(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,n,i,r=e.getRootNode(),a=document.createElement("div"),o=document.createElement("div"),s=e.getLabelDOMNode(),l=e.getInstructionsDOMNode(),c=e.getErrorDOMNode(),u=e.getInputDOMNodes(),d=this.getElementLayoutSize(e),p=d.inputWidthInUnits;if(e.getElementKind()===h.p.CONTROL&&(e.getMinInputRowWidth()>p?r.setAttribute("data-force-mobile-rendering","1"):r.removeAttribute("data-force-mobile-rendering")),r.setAttribute("data-renderer-type","lfn"),r.setAttribute("data-label-width",String(d.labelWidthInUnits)),a.setAttribute("data-role","label-column"),a.setAttribute("data-colspan",String(d.labelWidthInUnits)),o.setAttribute("data-role","input-column"),o.setAttribute("data-colspan",String(d.inputWidthInUnits)),r.appendChild(a),r.appendChild(o),null!==s&&a.appendChild(s),null!==u)for(var g=0,m=u.length;g<m;g++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===g&&t.setAttribute("data-is-first-row","1"),m-1===g&&t.setAttribute("data-is-last-row","1"),i=0;for(var f=0,E=u[g].inputs.length;f<E;f++)t.appendChild(_.a.castToDOMElement(u[g].inputs[f].input)),null!==(n=this.getSizeAttributeValue(u[g].inputs[f].width))?(u[g].inputs[f].input.setAttribute("data-size",n),i+=this.getSizeInUnits(p,u[g].inputs[f].width)):u[g].inputs[f].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(p-i)),o.appendChild(t)}null!==l&&o.appendChild(l),null!==c&&o.appendChild(c),null!==s&&null!==u&&e.isCompactFieldPlaceholderSupported()&&_.a.setLabelCompactFieldState(!1,s.textContent,u,!1)}},{key:"getRendererType",value:function(){return h.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD}}]),n}(_.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(1),_=n(37);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var m=function(e){l()(n,e);var t=g(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,n,i,r=e.getRootNode(),a=document.createElement("div"),o=document.createElement("div"),s=e.getLabelDOMNode(),l=e.getInstructionsDOMNode(),c=e.getErrorDOMNode(),u=e.getInputDOMNodes(),d=this.getElementLayoutSize(e),p=d.inputWidthInUnits;if(e.getElementKind()===h.p.CONTROL&&(e.getMinInputRowWidth()>p?r.setAttribute("data-force-mobile-rendering","1"):r.removeAttribute("data-force-mobile-rendering")),r.setAttribute("data-renderer-type","rfn"),r.setAttribute("data-label-width",String(d.inputWidthInUnits)),a.setAttribute("data-role","label-column"),a.setAttribute("data-colspan",String(d.labelWidthInUnits)),o.setAttribute("data-role","input-column"),o.setAttribute("data-colspan",String(d.inputWidthInUnits)),r.appendChild(o),r.appendChild(a),null!==s&&a.appendChild(s),null!==u)for(var g=0,m=u.length;g<m;g++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===g&&t.setAttribute("data-is-first-row","1"),m-1===g&&t.setAttribute("data-is-last-row","1"),i=0;for(var f=0,E=u[g].inputs.length;f<E;f++)t.appendChild(_.a.castToDOMElement(u[g].inputs[f].input)),null!==(n=this.getSizeAttributeValue(u[g].inputs[f].width))?(u[g].inputs[f].input.setAttribute("data-size",n),i+=this.getSizeInUnits(p,u[g].inputs[f].width)):u[g].inputs[f].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(p-i)),o.appendChild(t)}null!==l&&o.appendChild(l),null!==c&&o.appendChild(c),null!==s&&null!==u&&e.isCompactFieldPlaceholderSupported()&&_.a.setLabelCompactFieldState(!1,s.textContent,u,!1)}},{key:"getRendererType",value:function(){return h.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD}}]),n}(_.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(1),_=n(37);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var m=function(e){l()(n,e);var t=g(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,n,i,r=e.getRootNode(),a=e.getLabelDOMNode(),o=e.getInstructionsDOMNode(),s=e.getErrorDOMNode(),l=e.getInputDOMNodes(),c=e.getColspan();if(e.getElementKind()===h.p.CONTROL&&(e.getMinInputRowWidth()>c?r.setAttribute("data-force-mobile-rendering","1"):r.removeAttribute("data-force-mobile-rendering")),r.setAttribute("data-renderer-type","tlc"),r.removeAttribute("data-label-width"),null!==o&&r.appendChild(o),null!==l)for(var u=0,d=l.length;u<d;u++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===u&&t.setAttribute("data-is-first-row","1"),d-1===u&&t.setAttribute("data-is-last-row","1"),i=0;for(var p=0,g=l[u].inputs.length;p<g;p++)t.appendChild(_.a.castToDOMElement(l[u].inputs[p].input)),null!==(n=this.getSizeAttributeValue(l[u].inputs[p].width))?(l[u].inputs[p].input.setAttribute("data-size",n),i+=this.getSizeInUnits(c,l[u].inputs[p].width)):l[u].inputs[p].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(c-i)),r.appendChild(t)}null!==s&&r.appendChild(s),null!==a&&null!==l&&e.isCompactFieldPlaceholderSupported()&&_.a.setLabelCompactFieldState(!0,a.textContent,l,this.isLabelSuppressed(e))}},{key:"getRendererType",value:function(){return h.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD}}]),n}(_.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(1),_=n(37);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var m=function(e){l()(n,e);var t=g(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,n,i,r=e.getRootNode(),a=e.getLabelDOMNode(),o=e.getInstructionsDOMNode(),s=e.getErrorDOMNode(),l=e.getInputDOMNodes(),c=e.getColspan();if(e.getElementKind()===h.p.CONTROL&&(e.getMinInputRowWidth()>c?r.setAttribute("data-force-mobile-rendering","1"):r.removeAttribute("data-force-mobile-rendering")),r.setAttribute("data-renderer-type","tfc"),r.removeAttribute("data-label-width"),null!==l)for(var u=0,d=l.length;u<d;u++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===u&&t.setAttribute("data-is-first-row","1"),d-1===u&&t.setAttribute("data-is-last-row","1"),i=0;for(var p=0,g=l[u].inputs.length;p<g;p++)t.appendChild(_.a.castToDOMElement(l[u].inputs[p].input)),null!==(n=this.getSizeAttributeValue(l[u].inputs[p].width))?(l[u].inputs[p].input.setAttribute("data-size",n),i+=this.getSizeInUnits(c,l[u].inputs[p].width)):l[u].inputs[p].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(c-i)),r.appendChild(t)}null!==o&&r.appendChild(o),null!==s&&r.appendChild(s),null!==a&&null!==l&&e.isCompactFieldPlaceholderSupported()&&_.a.setLabelCompactFieldState(!0,a.textContent,l,this.isLabelSuppressed(e))}},{key:"getRendererType",value:function(){return h.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD}}]),n}(_.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(1),_=n(37);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var m=function(e){l()(n,e);var t=g(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,n,i,r=e.getRootNode(),a=e.getLabelDOMNode(),o=e.getInstructionsDOMNode(),s=e.getErrorDOMNode(),l=e.getInputDOMNodes(),c=e.getColspan();if(e.getElementKind()===h.p.CONTROL&&(e.getMinInputRowWidth()>c?r.setAttribute("data-force-mobile-rendering","1"):r.removeAttribute("data-force-mobile-rendering")),r.setAttribute("data-renderer-type","llc"),r.removeAttribute("data-label-width"),null!==o&&r.appendChild(o),null!==l)for(var u=0,d=l.length;u<d;u++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===u&&t.setAttribute("data-is-first-row","1"),d-1===u&&t.setAttribute("data-is-last-row","1"),i=0;for(var p=0,g=l[u].inputs.length;p<g;p++)t.appendChild(_.a.castToDOMElement(l[u].inputs[p].input)),null!==(n=this.getSizeAttributeValue(l[u].inputs[p].width))?(l[u].inputs[p].input.setAttribute("data-size",n),i+=this.getSizeInUnits(c,l[u].inputs[p].width)):l[u].inputs[p].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(c-i)),r.appendChild(t)}null!==s&&r.appendChild(s),null!==a&&null!==l&&e.isCompactFieldPlaceholderSupported()&&_.a.setLabelCompactFieldState(!0,a.textContent,l,this.isLabelSuppressed(e))}},{key:"getRendererType",value:function(){return h.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD}}]),n}(_.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(1),_=n(37);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var m=function(e){l()(n,e);var t=g(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,n,i,r=e.getRootNode(),a=e.getLabelDOMNode(),o=e.getInstructionsDOMNode(),s=e.getErrorDOMNode(),l=e.getInputDOMNodes(),c=e.getColspan();if(e.getElementKind()===h.p.CONTROL&&(e.getMinInputRowWidth()>c?r.setAttribute("data-force-mobile-rendering","1"):r.removeAttribute("data-force-mobile-rendering")),r.setAttribute("data-renderer-type","lfc"),r.removeAttribute("data-label-width"),null!==l)for(var u=0,d=l.length;u<d;u++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===u&&t.setAttribute("data-is-first-row","1"),d-1===u&&t.setAttribute("data-is-last-row","1"),i=0;for(var p=0,g=l[u].inputs.length;p<g;p++)t.appendChild(_.a.castToDOMElement(l[u].inputs[p].input)),null!==(n=this.getSizeAttributeValue(l[u].inputs[p].width))?(l[u].inputs[p].input.setAttribute("data-size",n),i+=this.getSizeInUnits(c,l[u].inputs[p].width)):l[u].inputs[p].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(c-i)),r.appendChild(t)}null!==o&&r.appendChild(o),null!==s&&r.appendChild(s),null!==a&&null!==l&&e.isCompactFieldPlaceholderSupported()&&_.a.setLabelCompactFieldState(!0,a.textContent,l,this.isLabelSuppressed(e))}},{key:"getRendererType",value:function(){return h.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD}}]),n}(_.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(1),_=n(37);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var m=function(e){l()(n,e);var t=g(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,n,i,r=e.getRootNode(),a=e.getLabelDOMNode(),o=e.getInstructionsDOMNode(),s=e.getErrorDOMNode(),l=e.getInputDOMNodes(),c=e.getColspan();if(e.getElementKind()===h.p.CONTROL&&(e.getMinInputRowWidth()>c?r.setAttribute("data-force-mobile-rendering","1"):r.removeAttribute("data-force-mobile-rendering")),r.setAttribute("data-renderer-type","rlc"),r.removeAttribute("data-label-width"),null!==o&&r.appendChild(o),null!==l)for(var u=0,d=l.length;u<d;u++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===u&&t.setAttribute("data-is-first-row","1"),d-1===u&&t.setAttribute("data-is-last-row","1"),i=0;for(var p=0,g=l[u].inputs.length;p<g;p++)t.appendChild(_.a.castToDOMElement(l[u].inputs[p].input)),null!==(n=this.getSizeAttributeValue(l[u].inputs[p].width))?(l[u].inputs[p].input.setAttribute("data-size",n),i+=this.getSizeInUnits(c,l[u].inputs[p].width)):l[u].inputs[p].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(c-i)),r.appendChild(t)}null!==s&&r.appendChild(s),null!==a&&null!==l&&e.isCompactFieldPlaceholderSupported()&&_.a.setLabelCompactFieldState(!0,a.textContent,l,this.isLabelSuppressed(e))}},{key:"getRendererType",value:function(){return h.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD}}]),n}(_.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),h=n(1),_=n(37);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var m=function(e){l()(n,e);var t=g(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,n,i,r=e.getRootNode(),a=e.getLabelDOMNode(),o=e.getInstructionsDOMNode(),s=e.getErrorDOMNode(),l=e.getInputDOMNodes(),c=e.getColspan();if(e.getElementKind()===h.p.CONTROL&&(e.getMinInputRowWidth()>c?r.setAttribute("data-force-mobile-rendering","1"):r.removeAttribute("data-force-mobile-rendering")),r.setAttribute("data-renderer-type","rfc"),r.removeAttribute("data-label-width"),null!==l)for(var u=0,d=l.length;u<d;u++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===u&&t.setAttribute("data-is-first-row","1"),d-1===u&&t.setAttribute("data-is-last-row","1"),i=0;for(var p=0,g=l[u].inputs.length;p<g;p++)t.appendChild(_.a.castToDOMElement(l[u].inputs[p].input)),null!==(n=this.getSizeAttributeValue(l[u].inputs[p].width))?(l[u].inputs[p].input.setAttribute("data-size",n),i+=this.getSizeInUnits(c,l[u].inputs[p].width)):l[u].inputs[p].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(c-i)),r.appendChild(t)}null!==o&&r.appendChild(o),null!==s&&r.appendChild(s),null!==a&&null!==l&&e.isCompactFieldPlaceholderSupported()&&_.a.setLabelCompactFieldState(!0,a.textContent,l,this.isLabelSuppressed(e))}},{key:"getRendererType",value:function(){return h.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD}}]),n}(_.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(5),r=n.n(i),a=n(7),o=n.n(a),s=n(8),l=n.n(s),c=n(4),u=n.n(c),d=n(1);function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u()(e);if(t){var r=u()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l()(this,n)}}var h=function(e){o()(n,e);var t=p(n);function n(e){var i;return r()(this,n),(i=t.call(this,e)).isSingleTagsList=!0,i.on("tag-add",(function(t){var n=i.getDropdownContainer();i.setState(d.qb.DISABLED),n.setAttribute("title",e.disabledTitle||""),t.on("delete",(function(){i.setState(d.qb.ENABLED),n.setAttribute("title",e.title||"")}))})),i}return n}(n(194).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var i=n(20),r=n.n(i),a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(3),u=n.n(c),d=n(17),p=n.n(d),h=n(7),_=n.n(h),g=n(8),m=n.n(g),f=n(4),E=n.n(f),y=n(0),T=n.n(y),v=n(134),O=n(26),b=n(23),C=n(13),I=n(99);function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var P=function(e){_()(n,e);var t=R(n);function n(){var e;return o()(this,n),e=t.call(this,b.a.ELEMENT_TYPE_SEARCHABLE_DROPDOWN),T()(u()(e),"options",[]),T()(u()(e),"selectedIndex",-1),T()(u()(e),"opened",!1),T()(u()(e),"overlay",void 0),T()(u()(e),"overlayModal",void 0),T()(u()(e),"caption",void 0),T()(u()(e),"expander",void 0),T()(u()(e),"bodyMouseDownEventListener",void 0),T()(u()(e),"userFilter",null),T()(u()(e),"selectedIndexBeforeOpen",-1),e.caption=document.createElement("input"),e.caption.setAttribute("type","text"),e.caption.setAttribute("autocomplete","none"),e.expander=document.createElement("button"),e.rootNode.appendChild(e.caption),e.rootNode.appendChild(e.expander),e.overlay=document.createElement("div"),e.overlay.setAttribute("data-role","dropdown-overlay"),e.overlayModal=document.createElement("div"),e.overlayModal.className="ui-modal",e.overlayModal.setAttribute("data-transparent","1"),e.init(),e}return l()(n,[{key:"getSelectedIndex",value:function(){return this.selectedIndex}},{key:"add",value:function(e,t){if(!e)throw new Error("Invalid argument: option: IUIOption expected!");var n=r()(e,HTMLOptionElement)?I.a.createFromHTMLOptionElement(this,e):e;if(void 0===t)this.options.push(n);else{if(t<0||t>this.options.length)throw new Error("Invalid argument: index: int >= 0 <= ".concat(this.options.length," expected"));this.options.splice(t,0,n)}this.isOpened()?(this.userFilter=null,this.refreshOptions(),this.setSelectedIndex(-1)):-1===this.selectedIndex&&this.setSelectedIndex(0)}},{key:"remove",value:function(e){if(null===e||e<0||e>=this.options.length)throw new Error("Invalid argument index: int >= 0 < ".concat(this.options.length," expected!"));this.options.splice(e,1),this.isOpened()?(this.userFilter=null,this.refreshOptions(),this.selectedIndex=void 0,this.setSelectedIndex(Math.max(-1,this.options.length?0:-1))):(this.selectedIndex=void 0,this.setSelectedIndex(Math.max(-1,this.options.length?0:-1)))}},{key:"getValue",value:function(){return-1===this.selectedIndex?null:this.options[this.selectedIndex].value}},{key:"setValue",value:function(e){for(var t=-1,n=0,i=this.options.length;n<i;n++)if(e===this.options[n].value){t=n;break}this.setSelectedIndex(t)}},{key:"setSelectedIndex",value:function(e){if((e=~~e)<-1&&(e=-1),e>=this.options.length&&(e=this.options.length-1),this.options[e]&&!this.options[e].hasAttribute("disabled")||(e=-1),e!==this.selectedIndex){if(this.selectedIndex=this.selectedIndexBeforeOpen=e,this.userFilter=null,this.caption.value=String(-1===this.selectedIndex?"":this.options[this.selectedIndex].text),this.options[this.selectedIndex])if(this.selectedIndex||this.options[this.selectedIndex].value||!this.caption.hasAttribute("placeholder")){if(this.options[this.selectedIndex].hasAttribute("data-i18n-text")&&b.a.getI18n()){var t=this.options[this.selectedIndex].getAttribute("data-i18n-text"),n=b.a.getI18n().translateText(t);n&&n!==t&&(this.caption.value=n)}}else this.caption.value="";this.updateSelectedIndexInOverlay(),this.trigger("change"),b.a.getJQuery()(this.rootNode).trigger("change")}}},{key:"isOpened",value:function(){return this.opened}},{key:"refreshOptions",value:function(){var e;this.overlay.innerHTML="";for(var t=0,n=this.options.length;t<n;t++)(e=document.createElement("div")).setAttribute("data-index",String(t)),e.textContent=this.options[t].text,this.options[t].hasAttribute("disabled")&&e.setAttribute("data-is-disabled","true"),this.options[t].hasAttribute("data-i18n-text")&&e.setAttribute("data-i18n-text",this.options[t].getAttribute("data-i18n-text")),this.options[t].hasAttribute("data-i18n-placeholder")&&e.setAttribute("data-i18n-placeholder",this.options[t].getAttribute("data-i18n-placeholder")),this.overlay.appendChild(e);b.a.getI18n()&&b.a.getI18n().translateDOMNode(this.overlay),document.body.appendChild(this.overlayModal)}},{key:"setOpened",value:function(e){if((e=!!e)!==this.opened){switch(this.opened=e,this.opened&&(this.selectedIndexBeforeOpen=this.selectedIndex),this.areAllOptionsHiddenByUserFilter()&&(this.userFilter=null,this.removeHiddenAttributeFromAllDOMOptions(),this.overlay.removeAttribute("empty"),this.setSelectedIndex(this.opened?this.selectedIndex:this.selectedIndexBeforeOpen)),this.opened){case!0:this.rootNode.setAttribute("data-is-opened","1");var t=C.a.getComputedStyle(this.caption);t&&"rtl"===t.direction?this.overlay.style.direction="rtl":this.overlay.style.direction="",this.caption.value="",b.a.getI18n()&&b.a.getI18n().translateDOMNode(this.overlay);break;case!1:if(this.rootNode.removeAttribute("data-is-opened"),this.caption.value=-1===this.selectedIndex?"":this.options[this.selectedIndex].text,this.options[this.selectedIndex])if(this.selectedIndex||this.options[this.selectedIndex].value||!this.caption.hasAttribute("placeholder")){if(this.options[this.selectedIndex].hasAttribute("data-i18n-text")&&b.a.getI18n()){var n=this.options[this.selectedIndex].getAttribute("data-i18n-text"),i=b.a.getI18n().translateText(n);i&&i!==n&&(this.caption.value=i)}}else this.caption.value=""}if(!this.opened)return this.overlay.parentNode.removeChild(this.overlay),this.overlayModal.parentNode.removeChild(this.overlayModal),this.overlay.innerHTML="",void document.body.removeEventListener("mousedown",this.bodyMouseDownEventListener,!0);this.refreshOptions(),document.body.appendChild(this.overlay),this.reanchorOverlayElement(),document.body.addEventListener("mousedown",this.bodyMouseDownEventListener,!0),this.updateSelectedIndexInOverlay()}}},{key:"reanchorOverlayElement",value:function(){var e=this.rootNode.getBoundingClientRect();this.overlay.style.width="".concat(e.width,"px");var t=this.overlay.getBoundingClientRect(),n=v.a.getAnchorPosition(e,t,0,["center-bottom","center-top"]);this.overlay.style.left="".concat(n.left,"px"),this.overlay.style.top="".concat(n.top,"px")}},{key:"updateSelectedIndexInOverlay",value:function(){if(this.opened)for(var e=0,t=this.overlay.childNodes,i=t.length;e<i;e++)e===this.selectedIndex?(t[e].setAttribute("selected","selected"),n.scrollOptionIntoView(t[e])):t[e].removeAttribute("selected")}},{key:"removeHiddenAttributeFromAllDOMOptions",value:function(){for(var e=0,t=this.overlay.childNodes.length;e<t;e++)this.overlay.childNodes[e].removeAttribute("hidden")}},{key:"filterOptionsInOverlay",value:function(){this.isOpened()||this.setOpened(!0);for(var e=!1,t=!1,i=!1,r=!0,a=0,o=this.overlay.childNodes,s=o.length;a<s;a++)this.overlay.childNodes[a]!==this.overlayModal&&(null===this.userFilter||""===this.userFilter||String(this.options[a].text||"").toLowerCase().indexOf(this.userFilter)>-1?(r=!1,o[a].removeAttribute("hidden"),e?o[a].removeAttribute("selected"):e=t=!0):(o[a].setAttribute("hidden","hidden"),o[a].removeAttribute("selected")),t&&(this.selectedIndex=a,o[a].setAttribute("selected","selected"),i=!0,t=!1,n.scrollOptionIntoView(o[a])),r?this.overlay.setAttribute("empty","empty"):this.overlay.removeAttribute("empty"));i||(this.selectedIndex=-1),this.reanchorOverlayElement()}},{key:"cycleSelectedOption",value:function(e){this.isOpened()||this.setOpened(!0);var t,n=0,i=this.options.length,r=this.overlay.childNodes,a=null;if(0!==i){var o,s;t=-1===this.selectedIndex?-1===e?0:i-1:this.selectedIndex;do{(t+=e)<0?t=i-1:t>=i&&(t=0),n++,this.options[t]&&(o=this.options[t].hasAttribute("disabled"),s=r[t].hasAttribute("hidden"),o||s||(a=t))}while(n<=i&&(o||s));null!==a&&this.setSelectedIndex(a)}}},{key:"areAllOptionsHiddenByUserFilter",value:function(){if(null===this.userFilter||""===this.userFilter)return!1;for(var e=0,t=this.options||[],n=t.length;e<n;e++)if(String(t[e].text||"").toLowerCase().indexOf(this.userFilter)>-1)return!1;return!0}},{key:"init",value:function(){!function(e,t){t.on("update",(function(){t.caption.value=String(-1===t.selectedIndex?"":t.options[t.selectedIndex].text)})),e(t.caption).on("focus",(function(){e(t.rootNode).attr("data-is-focused-child-element","1")})),e(t.caption).on("blur",(function(){e(t.rootNode).removeAttr("data-is-focused-child-element")})),Object.defineProperty(t.rootNode,"selectedIndex",{get:function(){return t.getSelectedIndex()},set:function(e){t.setSelectedIndex(e)}}),Object.defineProperty(t.rootNode,"value",{get:function(){return t.getValue()},set:function(e){t.setValue(String(e||""))}}),Object.defineProperty(t.rootNode,"disabled",{get:function(){return t.isDisabled()},set:function(e){t.setDisabled(!!e)}}),Object.defineProperty(t.rootNode,"readOnly",{get:function(){return t.isReadOnly()},set:function(e){t.setReadOnly(!!e)}}),Object.defineProperty(t.rootNode,"add",{get:function(){return function(){t.add.apply(t,arguments)}}}),Object.defineProperty(t.rootNode,"remove",{get:function(){return function(){t.remove.apply(t,arguments)}}}),Object.defineProperty(t.rootNode,"placeholder",{get:function(){return function(){t.getPlaceholder.apply(t,arguments)}},set:function(e){return function(){t.setPlaceholder.apply(t,arguments)}}}),t.expander.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),t.isDisabled()||t.isReadOnly()||void 0!==e.pageX&&void 0!==e.pageY&&0===e.pageX&&0===e.pageY||(t.caption&&t.caption.focus(),t.setOpened(!t.isOpened()))}),!0),e(t.caption).on("click",(function(){t.isDisabled()||t.isReadOnly()||t.setOpened(!0)})),e(t.caption).on("blur",(function(){t.isDisabled()||t.isReadOnly()||t.setOpened(!1)})),e(t.caption).on("keydown",(function(e){if(!t.isDisabled()&&!t.isReadOnly()){var n=null;switch(e.keyCode||e.charCode){case O.a.KEY_DOWN:n=1,e.preventDefault(),e.stopPropagation();break;case O.a.KEY_UP:n=-1,e.preventDefault(),e.stopPropagation();break;case O.a.KEY_ESC:return t.isOpened()&&t.setOpened(!1),e.preventDefault(),void e.stopPropagation();case O.a.KEY_ENTER:if(t.isOpened()){var i=t.getSelectedIndex();t.optionIsDisabled(t.overlay.childNodes[i])||(t.setOpened(!1),t.selectedIndex=void 0,t.setSelectedIndex(i))}else t.setOpened(!0);return e.preventDefault(),void e.stopPropagation();case O.a.KEY_HOME:t.selectedIndex=-1,n=1,t.userFilter=null,e.preventDefault(),e.stopPropagation();break;case O.a.KEY_END:t.selectedIndex=-1,n=-1,t.userFilter=null,e.preventDefault(),e.stopPropagation()}null!==n&&(e.preventDefault(),e.stopPropagation(),t.cycleSelectedOption(n))}})),e(t.overlay).on("click","> div[data-index]",(function(e){t.isDisabled()||t.isReadOnly()||t.optionIsDisabled(this)||t.setOpened(!1)})),e(t.caption).on("input",(function(e){if(!t.isDisabled()&&!t.isReadOnly()){try{if(document.activeElement!==t.caption)return}catch(e){}t.userFilter=this.value.toLowerCase(),t.filterOptionsInOverlay()}})),t.bodyMouseDownEventListener=function(n){if(!t.isDisabled()&&!t.isReadOnly()){var i=n.target||n.srcElement;if(e(i).is("body > [data-role=dropdown-overlay] > div[data-index]")||i===t.caption||i===t.expander){n.preventDefault(),n.stopPropagation();var r=~~e(i).attr("data-index");if(t.options[r]&&t.options[r].hasAttribute("disabled"))return;t.setSelectedIndex(r),t.setOpened(!1)}else e(i).is("body > [data-role=dropdown-overlay]")?(n.preventDefault(),n.stopPropagation()):t.setOpened(!1)}},e(window).on("scroll",(function(){t.isOpened()&&t.setOpened(!1)}))}(b.a.getJQuery(),this)}},{key:"setDisabled",value:function(e){p()(E()(n.prototype),"setDisabled",this).call(this,e),this.caption.disabled=this.expander.disabled=this.isDisabled(),this.isDisabled()&&this.isOpened()&&this.setOpened(!1)}},{key:"setReadOnly",value:function(e){p()(E()(n.prototype),"setReadOnly",this).call(this,e),this.caption.readOnly=this.isReadOnly(),this.isReadOnly()&&this.isOpened()&&this.setOpened(!1)}},{key:"getOptions",value:function(){return this.options}},{key:"setPlaceholder",value:function(e){this.caption.placeholder=String(e||"")}},{key:"getPlaceholder",value:function(){return this.caption.placeholder||null}},{key:"setAttribute",value:function(e,t){switch(e){case"data-i18n-placeholder":case"placeholder":this.caption.setAttribute(e,t);break;default:p()(E()(n.prototype),"setAttribute",this).call(this,e,t)}}},{key:"optionIsDisabled",value:function(e){var t=e.getAttribute("data-index");return this.options[t].hasAttribute("disabled")}}],[{key:"scrollOptionIntoView",value:function(e){e.parentNode.scrollTop=e.offsetTop}}]),n}(n(64).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(0),m=n.n(g),f=n(1),E=n(35),y=n(34),T=n(23),v=n(68);function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var b=function(e){u()(n,e);var t=O(n);function n(){var e;return r()(this,n),e=t.call(this,"color"),m()(l()(e),"value",[0,0,0,1]),m()(l()(e),"rollbackColor",[0,0,0,1]),m()(l()(e),"expanded",!1),m()(l()(e),"colorDiv",void 0),n.initializeOverlay(),e.colorDiv=document.createElement("div"),e.rootNode.appendChild(e.colorDiv),e.updateInputColor(),e.init(),e}return o()(n,[{key:"getValue",value:function(){return v.a.RGBToString(this.value)}},{key:"getRGB",value:function(){return this.value}},{key:"getHSL",value:function(){return v.a.RGBtoHSV(this.value)}},{key:"updateInputColor",value:function(){this.colorDiv.style.backgroundColor=v.a.RGBToString(this.value)}},{key:"setValue",value:function(e){var t=v.a.stringToRGB(e);null===t&&(t=[0,0,0,1]),v.a.areEqualRGBColors(this.value,t)||(this.value=t,this.updateInputColor(),this.expanded&&n.expandedInstance===this&&(n.overlayColor=v.a.RGBtoHSV(this.value),n.repaint()))}},{key:"rollback",value:function(){this.setValue(v.a.RGBToString(this.rollbackColor))}},{key:"reanchorOverlayElement",value:function(){var e=n.overlay.getBoundingClientRect(),t=this.rootNode.parentElement.getBoundingClientRect(),i=document.documentElement.clientHeight||window.innerHeight;n.overlay.style.left="".concat((t.width-e.width)/2+t.left,"px"),n.overlay.style.top=n.overlay.style.top="".concat(t.top+t.height,"px"),e.height>i-t.top&&(n.overlay.style.top="".concat(t.top-e.height,"px"))}},{key:"setExpanded",value:function(e){(e=!!e)!==this.expanded&&(e&&null!==n.expandedInstance&&n.expandedInstance.setExpanded(!1),e?(this.rollbackColor[0]=this.value[0],this.rollbackColor[1]=this.value[1],this.rollbackColor[2]=this.value[2],this.rollbackColor[3]=this.value[3],n.expandedInstance&&n.expandedInstance!==this&&n.expandedInstance.setExpanded(!1),n.expandedInstance=this,n.overlayColor=v.a.RGBtoHSV(this.value),document.body.appendChild(n.overlay),this.reanchorOverlayElement(),this.expanded&&n.expandedInstance===this&&(n.overlayColor=v.a.RGBtoHSV(this.value),n.repaint()),n.repaint()):(n.expandedInstance&&n.expandedInstance===this&&(n.expandedInstance=null),n.overlay.parentNode&&n.overlay.parentNode.removeChild(n.overlay)),this.expanded=e)}},{key:"isExpanded",value:function(){return this.expanded}},{key:"setChangeCallback",value:function(e){n.changeCallback=e}},{key:"init",value:function(){var e;e=this,(window.jQuery||window.$||window.$x)(e.rootNode).on("click",(function(){e.isDisabled()||e.isReadOnly()||(e.setExpanded(!0),n.tryFocusColorTextInput())})),Object.defineProperty(e.getRootNode(),"value",{get:function(){return e.getValue()},set:function(t){e.setValue(t)}}),Object.defineProperty(e.getRootNode(),"disabled",{get:function(){return e.isDisabled()},set:function(t){e.setDisabled(!!t)}}),Object.defineProperty(e.getRootNode(),"readOnly",{get:function(){return e.isReadOnly()},set:function(t){e.setReadOnly(!!t)}})}}],[{key:"paintHueOverlay",value:function(){for(var e,t=1/this.OVERLAY_WIDTH,n=this.hueCanvas.getContext("2d"),i=0;i<this.OVERLAY_WIDTH;i++)e=i*t,n.fillStyle=v.a.HSVToString([e,.5,.66,1]),n.fillRect(i,0,1,this.HORIZONTAL_SLIDER_HEIGHT);if(this.sliderSpriteLoaded){var r=~~(this.overlayColor[0]*this.OVERLAY_WIDTH);n.drawImage(this.sliderSprite,r+this.sliderSpritePaintTranslateX,this.sliderSpritePaintTranslateY)}}},{key:"paintSaturationOverlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=1/this.OVERLAY_WIDTH,r=1/this.COLOR_CANVAS_HEIGHT,a=this.saturationCanvas.getContext("2d");if(t&&this.saturationCanvasCacheReady)a.drawImage(this.saturationCanvasCache,0,0);else{for(var o=0;o<this.OVERLAY_WIDTH;o++)for(var s=0;s<this.COLOR_CANVAS_HEIGHT;s++)a.fillStyle=v.a.RGBToString(v.a.HSVtoRGB([e,1-s*r,o*i,1]),!1),a.fillRect(o,s,1,1);n&&(this.saturationCanvasCacheReady=!1,this.saturationCanvasCache.src=this.saturationCanvas.toDataURL("image/png"))}if(this.crossSpriteLoaded){var l={top:~~(this.COLOR_CANVAS_HEIGHT*(1-this.overlayColor[1])),left:~~(this.OVERLAY_WIDTH*this.overlayColor[2])};a.drawImage(this.crossSprite,l.left+this.crossSpritePaintTranslateX,l.top+this.crossSpritePaintTranslateY)}}},{key:"paintLightOverlay",value:function(e,t){for(var n=1/this.OVERLAY_WIDTH,i=this.lightCanvas.getContext("2d"),r=0;r<this.OVERLAY_WIDTH;r++)i.fillStyle=v.a.HSVToString([e,t,r*n,1]),i.fillRect(r,0,1,this.HORIZONTAL_SLIDER_HEIGHT);if(this.sliderSpriteLoaded){var a=~~(this.overlayColor[2]*this.OVERLAY_WIDTH);i.drawImage(this.sliderSprite,a+this.sliderSpritePaintTranslateX,this.sliderSpritePaintTranslateY)}}},{key:"paintAlphaOverlay",value:function(e,t,n){var i=1/this.OVERLAY_WIDTH,r=this.alphaCanvas.getContext("2d"),a=[e,t,n,1];if(r.fillStyle="white",r.fillRect(0,0,this.OVERLAY_WIDTH,this.HORIZONTAL_SLIDER_HEIGHT),this.patternLoaded){var o=r.createPattern(this.transparencyPattern,"repeat");r.rect(0,0,this.OVERLAY_WIDTH,this.HORIZONTAL_SLIDER_HEIGHT),r.fillStyle=o,r.fill()}else r.fillStyle="#ffffff",r.fillRect(0,0,this.OVERLAY_WIDTH,this.HORIZONTAL_SLIDER_HEIGHT);for(var s=0;s<this.OVERLAY_WIDTH;s++)a[3]=s*i,r.fillStyle=v.a.HSVToString(a),r.fillRect(s,0,1,this.HORIZONTAL_SLIDER_HEIGHT);if(this.sliderSpriteLoaded){var l=~~(this.overlayColor[3]*this.OVERLAY_WIDTH);r.drawImage(this.sliderSprite,l+this.sliderSpritePaintTranslateX,this.sliderSpritePaintTranslateY)}}},{key:"updateColorText",value:function(){if(this.setOpaque.style.backgroundColor=v.a.HSVToString(v.a.removeAlpha(this.overlayColor)),this.updateColorModel)switch(this.colorModel){case f.g.RGBA:this.colorTextInput.value=v.a.RGBToString(v.a.HSVtoRGB(this.overlayColor));break;case f.g.HSLA:this.colorTextInput.value=v.a.HSVToString(this.overlayColor);break;default:console.warn("Don't know how to update the color text")}}},{key:"forcePointInClientRect",value:function(e,t){return e.left<0&&(e.left=0),e.left>=t.width&&(e.left=t.width-1),e.top<0&&(e.top=0),e.top>=t.height&&(e.top=t.height-1),e}},{key:"initializeOverlay",value:function(){var e;this.initialized||(this.overlay=document.createElement("div"),this.overlay.setAttribute("data-role","color-overlay"),this.overlayModal=document.createElement("div"),this.overlayModal.className="ui-modal",this.overlayModal.setAttribute("data-transparent","1"),this.overlay.appendChild(this.overlayModal),this.hueCanvas=document.createElement("canvas"),this.hueCanvas.setAttribute("data-role","hue"),this.saturationCanvas=document.createElement("canvas"),this.saturationCanvas.setAttribute("data-role","saturation"),this.lightCanvas=document.createElement("canvas"),this.lightCanvas.setAttribute("data-role","light"),this.alphaCanvas=document.createElement("canvas"),this.alphaCanvas.setAttribute("data-role","transparency"),this.transparencyPattern=document.createElement("img"),this.sliderSprite=document.createElement("img"),this.crossSprite=document.createElement("img"),this.colorTextInput=document.createElement("input"),this.colorTextInput.setAttribute("type","text"),this.colorTextInput.setAttribute("data-role","color-text"),this.colorTextInput.setAttribute("placeholder","Type a color..."),this.setTransparent=document.createElement("button"),this.setTransparent.setAttribute("data-role","set-transparent"),this.setOpaque=document.createElement("button"),this.setOpaque.title="Set opaque color",this.setOpaque.setAttribute("data-role","set-opaque"),this.setTransparent.title="Set full transparent",this.saturationCanvasCache=document.createElement("img"),(e=this).saveColorToTargetInputThrottle=y.a.create((function(){if(e.setColorToTargetInput(),null!==e.changeCallback)try{e.changeCallback()}catch(t){console.error(t)}}),50),e.transparencyPattern.addEventListener("load",(function(){e.patternLoaded=!0})),e.sliderSprite.addEventListener("load",(function(){e.sliderSpriteLoaded=!0})),e.crossSprite.addEventListener("load",(function(){e.crossSpriteLoaded=!0})),e.saturationCanvasCache.addEventListener("load",(function(){e.saturationCanvasCacheReady=!0})),this.transparencyPattern.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAAAAACo4kLRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QkbEgM2YPFhLAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAP0lEQVQY02P8zwADp+EsJgZkwMjA8P8fAwMLiuB/BgZGRnSVWLXTW5AF4Q9TZJX//jMwMKKqhJjwfxA5HqsgAFYwCPaivXxiAAAAAElFTkSuQmCC",this.sliderSprite.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHVSURBVCiRldIxaBNxFAbw995d+//uSlxKS4TiUBM4sSLdwoGrDhZBQoPQDLbQQoe0FEqLW3DpKlQ7qDWSzbTqUFRcnZNARRKwKW6CTjWDd/euSZ1SurS13/SG78d7w2M6kXfl8jBcd6HfmLsukDYAAfjuGPPBdd31ZCr1u9fl3lDa2Jg0xmw6wIEBXjuOUwfQRX//GICHAJJ9tj0z4nnbx/DJ2tqkA7wB8NIZHFzM5XLByUuq1WpfQuQxgFVLJDfiedtcXF4eHkgkWgb4VFhZecDMR3RK9nZ3n8GYvG1ZKekSLaiqCYJg6SxERERB8EhVu51OpyBRFE2o6pfVYvHnmYiI0plMW1U/xoeHE6Kqo6q6fx7qJVZtaRSlbFUlEXH/F4ZRNMAiR7aq7ouIf4GNvmVZLYmiaEdVry7Ozt47D33e2vI1jjMaRTsSMK+rajtWfb40Pz96GqqUSskwjsuq2g7D8KnVaDT+jqXTeyQyzURTt3z/143x8UatVusSEVUqFeu2798n5rfCfIWJpu5ks/Xjl8tns1kHeAXgEoADB/hmgC6AazBmCMAfA0zn5+beExFZPfi12Wze9LxNJgpZZIiZrzPRZWH+QcwvbOb8TKFQ7/X/AQl6styfo0m+AAAAAElFTkSuQmCC",this.crossSprite.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHVSURBVCiRldIxaBNxFAbw995d+//uSlxKS4TiUBM4sSLdwoGrDhZBQoPQDLbQQoe0FEqLW3DpKlQ7qDWSzbTqUFRcnZNARRKwKW6CTjWDd/euSZ1SurS13/SG78d7w2M6kXfl8jBcd6HfmLsukDYAAfjuGPPBdd31ZCr1u9fl3lDa2Jg0xmw6wIEBXjuOUwfQRX//GICHAJJ9tj0z4nnbx/DJ2tqkA7wB8NIZHFzM5XLByUuq1WpfQuQxgFVLJDfiedtcXF4eHkgkWgb4VFhZecDMR3RK9nZ3n8GYvG1ZKekSLaiqCYJg6SxERERB8EhVu51OpyBRFE2o6pfVYvHnmYiI0plMW1U/xoeHE6Kqo6q6fx7qJVZtaRSlbFUlEXH/F4ZRNMAiR7aq7ouIf4GNvmVZLYmiaEdVry7Ozt47D33e2vI1jjMaRTsSMK+rajtWfb40Pz96GqqUSskwjsuq2g7D8KnVaDT+jqXTeyQyzURTt3z/143x8UatVusSEVUqFeu2798n5rfCfIWJpu5ks/Xjl8tns1kHeAXgEoADB/hmgC6AazBmCMAfA0zn5+beExFZPfi12Wze9LxNJgpZZIiZrzPRZWH+QcwvbOb8TKFQ7/X/AQl6styfo0m+AAAAAElFTkSuQmCC",this.overlay.appendChild(this.hueCanvas),this.overlay.appendChild(this.saturationCanvas),this.overlay.appendChild(this.lightCanvas),this.overlay.appendChild(this.alphaCanvas),this.overlay.appendChild(this.colorTextInput),this.overlay.appendChild(this.setTransparent),this.overlay.appendChild(this.setOpaque),this.hueCanvas.width=n.lightCanvas.width=n.saturationCanvas.width=n.alphaCanvas.width=this.OVERLAY_WIDTH,this.hueCanvas.height=n.lightCanvas.height=n.alphaCanvas.height=this.HORIZONTAL_SLIDER_HEIGHT,this.saturationCanvas.height=this.COLOR_CANVAS_HEIGHT,this.paintHueOverlay(),this.updateColorText(),function(e){var t=window.jQuery||window.$||window.$x,n=f.h.NONE;t(document.body).on("mousedown",(function(r){if(1===r.which){var a=r.target||r.srcElement;if(e.expandedInstance){if((!t.contains(e.overlay,a)||a===e.overlayModal)&&!t.contains(e.expandedInstance.getRootNode(),a)&&a!==e.expandedInstance.getRootNode()&&a!==e.overlay)return void e.expandedInstance.setExpanded(!1);switch(a){case e.hueCanvas:n=f.h.HUE,e.hueCanvas.getBoundingClientRect(),i(r);break;case e.saturationCanvas:n=f.h.SATURATION,e.saturationCanvas.getBoundingClientRect(),i(r);break;case e.lightCanvas:n=f.h.LIGHT,e.lightCanvas.getBoundingClientRect(),i(r);break;case e.alphaCanvas:n=f.h.ALPHA,e.alphaCanvas.getBoundingClientRect(),i(r);break;default:n=f.h.NONE,null}}}})),t(document.body).on("mouseup",(function(e){n=f.h.NONE,null}));var i=function(t){if(n!==f.h.NONE){var i=null,r=null;switch(n){case f.h.HUE:r=e.hueCanvas.getBoundingClientRect(),i=e.forcePointInClientRect({left:t.clientX-r.left,top:t.clientY-r.top},r),e.setHueByPixels(i),t.preventDefault(),t.stopPropagation();break;case f.h.SATURATION:r=e.saturationCanvas.getBoundingClientRect(),i=e.forcePointInClientRect({left:t.clientX-r.left,top:t.clientY-r.top},r),e.setSaturationByPixels(i),t.preventDefault(),t.stopPropagation();break;case f.h.LIGHT:r=e.lightCanvas.getBoundingClientRect(),i=e.forcePointInClientRect({left:t.clientX-r.left,top:t.clientY-r.top},r),e.setLightByPixels(i),t.preventDefault(),t.stopPropagation();break;case f.h.ALPHA:r=e.alphaCanvas.getBoundingClientRect(),i=e.forcePointInClientRect({left:t.clientX-r.left,top:t.clientY-r.top},r),e.setAlphaByPixels(i),t.preventDefault(),t.stopPropagation()}}};document.body.addEventListener("mousemove",i,!0),t(e.overlay).on("click","button[data-role]",(function(n){var i=t(this).attr("data-role");e.execButtonCommand(i)})),t(e.colorTextInput).on("input",(function(t){var n=v.a.stringToRGB(this.value);null!==n&&(e.updateColorModel=!1,e.overlayColor=v.a.RGBtoHSV(n),e.repaint(),e.updateColorModel=!0,e.saveColorToTargetInputThrottle())})).on("keyup",(function(t){switch(t.keyCode||t.charCode){case 13:e.expandedInstance&&(setTimeout(e.expandedInstance.getRootNode().focus,1),e.expandedInstance.setExpanded(!1));break;case 27:e.expandedInstance&&(e.expandedInstance.rollback(),setTimeout(function(e){return e.getRootNode().focus}(e.expandedInstance),1),e.expandedInstance.setExpanded(!1))}}))}(this),this.initialized=!0)}},{key:"setHueByPixels",value:function(e){var t=e.left*(1/this.OVERLAY_WIDTH);this.overlayColor[0]=t,this.paintHueOverlay(),this.paintSaturationOverlay(this.overlayColor[0],!1,!0),this.paintLightOverlay(this.overlayColor[0],this.overlayColor[1]),this.paintAlphaOverlay(this.overlayColor[0],this.overlayColor[1],this.overlayColor[2]),this.updateColorText(),this.saveColorToTargetInputThrottle(),n.tryFocusColorTextInput()}},{key:"setSaturationByPixels",value:function(e){var t=e.left*(1/this.OVERLAY_WIDTH),i=1-e.top*(1/this.COLOR_CANVAS_HEIGHT);this.overlayColor[2]=t,this.overlayColor[1]=i,this.paintSaturationOverlay(this.overlayColor[0],!0),this.paintLightOverlay(this.overlayColor[0],this.overlayColor[1]),this.paintAlphaOverlay(this.overlayColor[0],this.overlayColor[1],this.overlayColor[2]),this.updateColorText(),this.saveColorToTargetInputThrottle(),n.tryFocusColorTextInput()}},{key:"setLightByPixels",value:function(e){var t=e.left*(1/this.OVERLAY_WIDTH);this.overlayColor[2]=t,this.paintLightOverlay(this.overlayColor[0],this.overlayColor[1]),this.paintAlphaOverlay(this.overlayColor[0],this.overlayColor[1],this.overlayColor[2]),this.updateColorText(),this.saveColorToTargetInputThrottle(),n.tryFocusColorTextInput()}},{key:"setAlphaByPixels",value:function(e){var t=e.left*(1/this.OVERLAY_WIDTH);this.overlayColor[3]=t,this.paintAlphaOverlay(this.overlayColor[0],this.overlayColor[1],this.overlayColor[2]),this.updateColorText(),this.saveColorToTargetInputThrottle(),n.tryFocusColorTextInput()}},{key:"repaint",value:function(){this.paintHueOverlay(),this.paintSaturationOverlay(this.overlayColor[0],!1,!0),this.paintLightOverlay(this.overlayColor[0],this.overlayColor[1]),this.paintAlphaOverlay(this.overlayColor[0],this.overlayColor[1],this.overlayColor[2]),this.updateColorText(),n.tryFocusColorTextInput()}},{key:"execButtonCommand",value:function(e){switch(e){case"set-transparent":this.overlayColor[3]=0,this.paintAlphaOverlay(this.overlayColor[0],this.overlayColor[1],this.overlayColor[2]),this.updateColorText(),this.saveColorToTargetInputThrottle(),n.tryFocusColorTextInput();break;case"set-opaque":this.overlayColor[3]=1,this.paintAlphaOverlay(this.overlayColor[0],this.overlayColor[1],this.overlayColor[2]),this.updateColorText(),this.saveColorToTargetInputThrottle(),n.tryFocusColorTextInput();break;default:console.warn("UIColorPicker.execButtonCommand: command ".concat(JSON.stringify(e)," is not implemented or unknown"))}}},{key:"setColorToTargetInput",value:function(){null!==this.expandedInstance&&(this.expandedInstance.value=v.a.HSVtoRGB(this.overlayColor),this.expandedInstance.updateInputColor(),T.a.getJQuery()(this.expandedInstance.getRootNode()).trigger("change"))}},{key:"tryFocusColorTextInput",value:function(){E.a.isMobile()||n.colorTextInput.focus()}}]),n}(n(64).a);m()(b,"HORIZONTAL_SLIDER_HEIGHT",20),m()(b,"OVERLAY_WIDTH",220),m()(b,"COLOR_CANVAS_HEIGHT",160),m()(b,"initialized",!1),m()(b,"overlay",void 0),m()(b,"overlayModal",void 0),m()(b,"hueCanvas",void 0),m()(b,"saturationCanvas",void 0),m()(b,"lightCanvas",void 0),m()(b,"alphaCanvas",void 0),m()(b,"expandedInstance",null),m()(b,"transparencyPattern",void 0),m()(b,"patternLoaded",!1),m()(b,"sliderSprite",void 0),m()(b,"sliderSpriteLoaded",!1),m()(b,"sliderSpritePaintTranslateX",-5),m()(b,"sliderSpritePaintTranslateY",3),m()(b,"crossSprite",void 0),m()(b,"crossSpriteLoaded",!1),m()(b,"crossSpritePaintTranslateX",-6),m()(b,"crossSpritePaintTranslateY",-7),m()(b,"colorTextInput",void 0),m()(b,"colorModel",f.g.RGBA),m()(b,"setTransparent",void 0),m()(b,"setOpaque",void 0),m()(b,"updateColorModel",!0),m()(b,"overlayColor",[0,0,0,1]),m()(b,"saturationCanvasCache",void 0),m()(b,"saturationCanvasCacheReady",!1),m()(b,"saveColorToTargetInputThrottle",void 0),m()(b,"changeCallback",null)},function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var i=n(20),r=n.n(i),a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(3),u=n.n(c),d=n(17),p=n.n(d),h=n(7),_=n.n(h),g=n(8),m=n.n(g),f=n(4),E=n.n(f),y=n(0),T=n.n(y),v=n(1),O=n(134),b=n(26),C=n(92),I=n(24),R=n(23),P=n(13),N=n(54),A=n(69);function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var L=function(e){_()(n,e);var t=S(n);function n(){var e;return o()(this,n),e=t.call(this,R.a.ELEMENT_TYPE_DATE),T()(u()(e),"dateGroups",[]),T()(u()(e),"format",void 0),T()(u()(e),"currentDateGroup",void 0),T()(u()(e),"value",null),T()(u()(e),"expander",void 0),T()(u()(e),"expanded",!1),T()(u()(e),"weekStart",v.k.SUNDAY),T()(u()(e),"acceptedDaysOfWeek",null),T()(u()(e),"hash",void 0),T()(u()(e),"hasAccessibilityEnabled",void 0),T()(u()(e),"i18n",void 0),T()(u()(e),"hiddenInput",void 0),e.expander=document.createElement("div"),e.expander.setAttribute("data-role","expander"),e.expander.setAttribute("role","application"),N.a.isMobile()&&(e.hiddenInput=document.createElement("input"),e.hiddenInput.style.display="block",e.hiddenInput.style.border="none",e.hiddenInput.style.width="1px",e.hiddenInput.style.height="1px",e.hiddenInput.style.opacity=".1",e.hiddenInput.style.position="absolute",e.hiddenInput.style.right=e.hiddenInput.style.top="0",e.rootNode.appendChild(e.hiddenInput)),e.init(),e}return l()(n,[{key:"padNumber",value:function(e,t){for(var n=String(e||0);n.length<t;)n="0".concat(n);return n}},{key:"withWeekStart",value:function(e){return this.weekStart=~~e||v.k.SUNDAY,this}},{key:"getWeekStart",value:function(){return this.weekStart}},{key:"withAcceptedDaysOfWeek",value:function(e){return this.acceptedDaysOfWeek=e,this}},{key:"getAcceptedDaysOfWeek",value:function(){return this.acceptedDaysOfWeek}},{key:"getValue",value:function(){if(null===this.value)return"";switch(this.format){case I.a.VALIDATOR_TYPE_DATE_MMYYYY:return"".concat(this.padNumber(this.value.getMonth()+1,2),"/").concat(this.padNumber(this.value.getFullYear(),4));case I.a.VALIDATOR_TYPE_DATE_YYYYMMDD:return"".concat(this.padNumber(this.value.getFullYear(),4),"/").concat(this.padNumber(this.value.getMonth()+1,2),"/").concat(this.padNumber(this.value.getDate(),2));case I.a.VALIDATOR_TYPE_DATE_DDMMYYYY:return"".concat(this.padNumber(this.value.getDate(),2),"/").concat(this.padNumber(this.value.getMonth()+1,2),"/").concat(this.padNumber(this.value.getFullYear(),4));case I.a.VALIDATOR_TYPE_DATE_MMDDYYYY:default:return"".concat(this.padNumber(this.value.getMonth()+1,2),"/").concat(this.padNumber(this.value.getDate(),2),"/").concat(this.padNumber(this.value.getFullYear(),4))}}},{key:"setValue",value:function(e){var t;if("string"!==typeof e)t=null,console.warn("Invalid date: ",e);else{var n,i=1,r=null,a=null;switch(this.format){case I.a.VALIDATOR_TYPE_DATE_DDMMYYYY:(n=/^([\d]{2})[\/\-\.]{1}([\d]{2})[\/\-\.]{1}([\d]{4})$/.exec(e))&&(i=parseInt(n[1]),r=parseInt(n[2]),a=parseInt(n[3]));break;case I.a.VALIDATOR_TYPE_DATE_MMYYYY:(n=/^([\d]{2})[\/\-\.]{1}([\d]{4})$/.exec(e))&&(r=parseInt(n[1]),a=parseInt(n[2]));break;case I.a.VALIDATOR_TYPE_DATE_YYYYMMDD:(n=/^([\d]{4})[\/\-\.]{1}([\d]{2})[\/\-\.]{1}([\d]{2})$/.exec(e))&&(a=parseInt(n[1]),r=parseInt(n[2]),i=parseInt(n[3]));break;case I.a.VALIDATOR_TYPE_DATE_MMDDYYYY:default:(n=/^([\d]{2})[\/\-\.]{1}([\d]{2})[\/\-\.]{1}([\d]{4})$/.exec(e))&&(r=parseInt(n[1]),i=parseInt(n[2]),a=parseInt(n[3]))}if(null==r||null==a?(t=null,console.warn("Invalid date: ",e)):t=new Date(a,r-1,i,12,0,0),C.a.dateEquals(this.value,t))return;this.value=t;for(var o=0,s=this.dateGroups.length;o<s;o++)this.dateGroups[o].extractDatePartFrom(this.value)}}},{key:"withHash",value:function(e){return this.hash=e,this}},{key:"getHash",value:function(){return this.hash}},{key:"setAccessibilityEnabled",value:function(e){this.hasAccessibilityEnabled=e}},{key:"setFormat",value:function(e){var t;this.format=e,this.dateGroups=this.getFormatDateGroups(e),this.rootNode.textContent="";var n=document.createElement("div");n.setAttribute("data-role","date-wrapper");for(var i=0,r=this.dateGroups.length;i<r;i++){var a=this.getDateGroupAttribute(this.dateGroups[i].getRole(),this.hash);this.dateGroups[i].getRootNode().setAttribute("id",a),this.dateGroups[i].withDisabled(this.disabled).withReadOnly(this.readOnly),this.dateGroups[i].extractDatePartFrom(this.value),n.appendChild(this.dateGroups[i].getRootNode()),i<r-1&&((t=n.appendChild(document.createElement("span"))).setAttribute("data-delimiter","1"),t.textContent="/")}this.updateAccessibilityFeature(),this.rootNode.appendChild(n),this.rootNode.appendChild(this.expander),this.setCurrentDateGroup(this.dateGroups[0]||null),this.hiddenInput&&this.rootNode.appendChild(this.hiddenInput)}},{key:"getDateGroupAttribute",value:function(e,t){switch(e){case v.i.DAY:return"date-".concat(t,"-day");case v.i.MONTH:return"date-".concat(t,"-month");case v.i.YEAR:return"date-".concat(t,"-year")}return""}},{key:"getFormatDateGroups",value:function(e){var t;switch(e){case I.a.VALIDATOR_TYPE_DATE_DDMMYYYY:t=[new A.a(v.i.DAY,this),new A.a(v.i.MONTH,this),new A.a(v.i.YEAR,this)];break;case I.a.VALIDATOR_TYPE_DATE_MMDDYYYY:t=[new A.a(v.i.MONTH,this),new A.a(v.i.DAY,this),new A.a(v.i.YEAR,this)];break;case I.a.VALIDATOR_TYPE_DATE_MMYYYY:t=[new A.a(v.i.MONTH,this),new A.a(v.i.YEAR,this)];break;case I.a.VALIDATOR_TYPE_DATE_YYYYMMDD:t=[new A.a(v.i.YEAR,this),new A.a(v.i.MONTH,this),new A.a(v.i.DAY,this)];break;default:throw new Error("Invalid date format! Expected DDMMYYYY, MMDDYYYY, MMYYYY, YYYYMMDD")}return t}},{key:"updateAccessibilityFeature",value:function(){if(this.hasAccessibilityEnabled){var e=document.createElement("div");e.setAttribute("id","date-expander-text-acc"),e.appendChild(document.createTextNode("Click to choose time")),e.style.display="none",this.expander.tabIndex=0,this.expander.appendChild(e),this.expander.setAttribute("aria-labelledby","date-expander-text-acc")}else this.expander.removeAttribute("tabindex")}},{key:"getFormat",value:function(){return this.format}},{key:"getDateValue",value:function(){return this.value}},{key:"setDateValue",value:function(e){if(null!==e&&!r()(e,Date))throw new Error("Invalid argument: Expected Date|null");this.value=e;for(var t=0,n=this.dateGroups.length;t<n;t++)this.dateGroups[t].extractDatePartFrom(this.value)}},{key:"setCurrentDateGroup",value:function(e){this.currentDateGroup&&this.currentDateGroup.getRootNode().removeAttribute("data-is-focused"),this.currentDateGroup=e||null,this.currentDateGroup&&this.currentDateGroup.getRootNode().setAttribute("data-is-focused","data-is-focused")}},{key:"isDateValidIfDatePartIs",value:function(e,t){if(e===v.i.AM_PM)return 0===t||1===t;for(var n=new Date,i=new Date,r=1,a=0,o=0,s=0,l=this.dateGroups.length;s<l;s++)switch(this.dateGroups[s].getRole()){case 0:r=this.dateGroups[s].getValue();break;case 1:a=this.dateGroups[s].getValue();break;case 2:o=this.dateGroups[s].getValue()}if(!a&&!o)return!0;switch(n.setFullYear(o,a-1,r),i.setFullYear(o,a-1,r),e){case v.i.DAY:return n.setDate(t),n.getMonth()===i.getMonth()&&n.getFullYear()===i.getFullYear();case v.i.MONTH:return n.setMonth(t-1),n.getDate()===i.getDate()&&n.getFullYear()===i.getFullYear();case v.i.YEAR:return n.setFullYear(t),n.getDate()===i.getDate()&&n.getMonth()===i.getMonth();default:return!0}}},{key:"rebuildDateFromParts",value:function(){for(var e=1,t=null,n=null,i=0,r=this.dateGroups.length;i<r;i++)switch(this.dateGroups[i].getRole()){case v.i.YEAR:n=this.dateGroups[i].getValue();break;case v.i.MONTH:t=this.dateGroups[i].getValue();break;case v.i.DAY:e=this.dateGroups[i].getValue()}if(null===t||null===n)this.value=null;else{var a=new Date;a.setFullYear(n),a.setMonth(t-1,e),a.setDate(e),a.getDate()===e&&a.getMonth()===t-1&&a.getFullYear()===n?(this.value=new Date,this.value.setTime(a.getTime())):this.value=null}}},{key:"setExpanded",value:function(e){if(!this.isReadOnly()){if((e=!!e)===this.expanded)return;this.expanded=e,n.initOverlay(e?this:null),e?this.expander.setAttribute("data-expanded","1"):this.expander.removeAttribute("data-expanded")}}},{key:"init",value:function(){!function(e,t){e.expander.addEventListener("keydown",(function(t){var i=!1,r=t.keyCode||t.charCode;switch(r){case b.a.KEY_TAB:if(!e.expanded)return e.expander.removeAttribute("tabindex"),void setTimeout((function(){e.expander.tabIndex=0}),1e3);n.focusNextOverlayElement(t),i=!0;break;case b.a.KEY_UP:case b.a.KEY_DOWN:case b.a.KEY_LEFT:case b.a.KEY_RIGHT:n.handleKeyboardPressButtonOnCurrentFocusedElement(t,r),i=!0;break;case b.a.KEY_ENTER:e.setExpanded(!0),i=!0;break;case b.a.KEY_ESC:e.setExpanded(!1),i=!0;break;default:i=!1}i&&(t.preventDefault(),t.stopPropagation())}),!0),t(e.rootNode).on("keydown",(function(t){if(null!==e.currentDateGroup){if(N.a.isMobile())for(var n=0,i=e.dateGroups.length;n<i;n++)if(document.activeElement===e.dateGroups[n].getRootNode()&&e.dateGroups[n]!==e.currentDateGroup){e.setCurrentDateGroup(e.dateGroups[n]);break}e.currentDateGroup.handleKeyEvent(t)}})),t(e.rootNode).on("blur",(function(){e.setCurrentDateGroup(e.dateGroups[0])})),t(e.hiddenInput).on("focus",(function(){setTimeout((function(){t(e.rootNode).focus().click(),e.setExpanded(!0)}),100)})),t(e.rootNode).on("mousedown",(function(t){var n=t.target||t.srcElement;if(N.a.isMobile())e.setExpanded(!0);else if(n===e.expander)setTimeout((function(){e.setExpanded(!0)}),50);else for(var i=0,r=e.dateGroups.length;i<r;i++)if(e.dateGroups[i].getRootNode()===n)return void e.setCurrentDateGroup(e.dateGroups[i])})),Object.defineProperty(e.rootNode,"value",{get:function(){return e.getValue()},set:function(t){t&&r()(t,Date)?e.setDateValue(t):e.setValue(t)}}),Object.defineProperty(e.rootNode,"disabled",{get:function(){return e.isDisabled()},set:function(t){e.setDisabled(t)}}),Object.defineProperty(e.rootNode,"readOnly",{get:function(){return e.isReadOnly()},set:function(t){e.setReadOnly(t)}})}(this,R.a.getJQuery())}},{key:"focusPreviousDatePartGroup",value:function(){for(var e=null,t=0,n=this.dateGroups.length;t<n;t++)if(this.dateGroups[t]===this.currentDateGroup){e=t;break}this.setCurrentDateGroup(this.dateGroups[(e||0)-1]||this.dateGroups[0]||null)}},{key:"focusNextDatePartGroup",value:function(){for(var e=null,t=0,n=this.dateGroups.length;t<n;t++)if(this.dateGroups[t]===this.currentDateGroup){e=t;break}this.setCurrentDateGroup(this.dateGroups[(e||0)+1]||this.dateGroups[this.dateGroups.length-1]||null)}},{key:"setDisabled",value:function(e){p()(E()(n.prototype),"setDisabled",this).call(this,e);for(var t=0,i=this.dateGroups.length;t<i;t++)this.dateGroups[t].withDisabled(this.disabled)}},{key:"setReadOnly",value:function(e){p()(E()(n.prototype),"setReadOnly",this).call(this,e);for(var t=0,i=this.dateGroups.length;t<i;t++)this.dateGroups[t].withReadOnly(this.readOnly)}},{key:"setI18n",value:function(e){return this.i18n=e||null,this}},{key:"getI18n",value:function(){return this.i18n||null}},{key:"isDateFieldEmpty",value:function(){for(var e=!0,t=0,n=this.dateGroups.length;t<n;t++)if(this.dateGroups[t].getValue()){e=!1;break}return e}}],[{key:"emulateBlurOnOverlayActiveElement",value:function(){null!==this.overlayFocusedElement&&this.overlayFocusedElement.removeAttribute("data-soft-focused")}},{key:"emulateFocusOnOverlayActiveElement",value:function(){null!==this.overlayFocusedElement&&this.overlayFocusedElement.setAttribute("data-soft-focused","1")}},{key:"focusNextOverlayElement",value:function(e){if(this.expandedInstance){if(this.emulateBlurOnOverlayActiveElement(),e.shiftKey)switch(this.overlayFocusedElement){case this.overlayHeader:this.overlayFocusedElement=this.dateLayerDaysHolder;break;case this.dateLayerDaysHolder:this.overlayFocusedElement=this.dateLayerNavigation;break;case this.dateLayerNavigation:default:this.overlayFocusedElement=this.overlayHeader}else switch(this.overlayFocusedElement){case this.overlayHeader:this.overlayFocusedElement=this.dateLayerNavigation;break;case this.dateLayerNavigation:this.overlayFocusedElement=this.dateLayerDaysHolder;break;case this.dateLayerDaysHolder:default:this.overlayFocusedElement=this.overlayHeader}this.emulateFocusOnOverlayActiveElement()}}},{key:"handleKeyboardPressButtonOnCurrentFocusedElement",value:function(e,t){if(this.expandedInstance)switch(this.overlayFocusedElement){case this.overlayHeader:break;case this.dateLayerNavigation:switch(t){case b.a.KEY_LEFT:this.incrementDatePart("months",-1);break;case b.a.KEY_RIGHT:this.incrementDatePart("months",1)}break;case this.dateLayerDaysHolder:switch(t){case b.a.KEY_UP:this.incrementDatePart("days",-7);break;case b.a.KEY_DOWN:this.incrementDatePart("days",7);break;case b.a.KEY_LEFT:this.incrementDatePart("days",-1);break;case b.a.KEY_RIGHT:this.incrementDatePart("days",1)}}}},{key:"incrementDatePart",value:function(e,t){var n=this.localDate.getDate();switch(e){case"months":this.localDate.setMonth(this.localDate.getMonth()+t),this.localDate.setFullYear(this.localDate.getFullYear()),this.localDate.setDate(n);break;case"days":this.localDate.setDate(this.localDate.getDate()+t),this.localDate.setFullYear(this.localDate.getFullYear()),this.localDate.setMonth(this.localDate.getMonth())}this.expandedInstance.setDateValue(this.localDate),this.paintMonthOverlay(),this.paintDateOverlay(),R.a.getJQuery()(this.expandedInstance.getRootNode()).trigger("input");var i=this.expandedInstance.expander.querySelector("div");i&&(i.textContent=this.expandedInstance.getValue()),this.expandedInstance.expander.focus()}},{key:"initOverlayElements",value:function(){var e;this.overlay=document.createElement("div"),this.overlay.setAttribute("data-role","date-overlay"),this.overlayModal=document.createElement("div"),this.overlayModal.className="ui-modal",this.overlayModal.setAttribute("data-transparent","1"),N.a.isMobile()||this.overlay.appendChild(this.overlayModal),this.overlayHeader=document.createElement("div"),this.overlayHeader.setAttribute("data-component","header"),this.overlay.appendChild(this.overlayHeader),this.dateLayer=document.createElement("div"),this.dateLayer.setAttribute("data-component","date"),this.dateLayerNavigation=document.createElement("div"),this.dateLayerNavigation.setAttribute("data-role","navigation"),this.dateLayerNavigationBTNPrevMonth=document.createElement("div"),this.dateLayerNavigationBTNPrevMonth.setAttribute("data-action","btn-prev-month"),this.dateLayerNavigationBTNNextMonth=document.createElement("div"),this.dateLayerNavigationBTNNextMonth.setAttribute("data-action","btn-next-month"),this.dateLayerNavigationLABELCurrentMonth=document.createElement("div"),this.dateLayerNavigationLABELCurrentMonth.setAttribute("data-action","select-year"),this.dateLayerDaysHolder=document.createElement("div"),this.dateLayerDaysHolder.setAttribute("data-role","calendar"),this.dateLayerNavigation.appendChild(this.dateLayerNavigationBTNPrevMonth),this.dateLayerNavigation.appendChild(this.dateLayerNavigationLABELCurrentMonth),this.dateLayerNavigation.appendChild(this.dateLayerNavigationBTNNextMonth),this.dateLayer.appendChild(this.dateLayerNavigation),this.dateLayer.appendChild(this.dateLayerDaysHolder),this.weekDays=this.weekDaysI18n||this.weekDays;for(var t=0;t<7;t++)this.dateLayerDaysHolder.appendChild(this.dayOfWeekColumns[String(t)]),this.dayOfWeekColumns[String(t)].setAttribute("data-role","day-of-week"),(e=document.createElement("div")).setAttribute("data-role","week-day-header"),e.textContent=this.weekDays[t],this.dayOfWeekColumns[String(t)].appendChild(e);this.monthLayer=document.createElement("div"),this.monthLayer.setAttribute("data-component","month"),this.yearLayer=document.createElement("div"),this.yearLayer.setAttribute("data-component","year"),this.overlay.appendChild(this.dateLayer),this.overlay.appendChild(this.monthLayer),this.overlay.appendChild(this.yearLayer)}},{key:"initListeners",value:function(){!function(e,t){t.bodyMouseDownListener=function(n){var i=n.target||n.srcElement;(i===t.overlayModal||!e.contains(t.overlay,i)&&i!==t.overlay)&&null!==t.expandedInstance&&t.expandedInstance.setExpanded(!1)},t.bodyClickListener=function(n){var i=n.target||n.srcElement,r=!1;if(e.contains(t.overlay,i)||i===t.overlay)switch(i){case t.dateLayerNavigationBTNPrevMonth:t.monthNavigate(-1),r=!0;break;case t.dateLayerNavigationBTNNextMonth:t.monthNavigate(1),r=!0;break;case t.dateLayerNavigationLABELCurrentMonth:t.setPickerDateSelectionPhase(v.j.YEAR),r=!0;break;default:e(i).is("div[data-role=day][data-day][data-month]")?(t.onDayCellClicked(parseInt(i.getAttribute("data-day")),parseInt(i.getAttribute("data-month"))-1),r=!0):e(i).is("div[data-component=year] > [data-year]")?(t.onYearRowClicked(parseInt(i.getAttribute("data-year"))),r=!0):e(i).is("div[data-component=month] > [data-month]")&&(t.onMonthRowClicked(parseInt(i.getAttribute("data-month"))-1),r=!0)}r&&(n.preventDefault(),n.stopPropagation())},t.touchMoveListener=function(n){var i=n.target||n.srcElement;(e.contains(t.overlay,i)||i===t.overlay)&&n.preventDefault(),t.clickStarted=!1},t.touchStartListener=function(n){var i=n.target||n.srcElement;(e.contains(t.overlay,i)||i===t.overlay)&&(t.lastTouchPosition.left=n.touches[0].pageX,t.lastTouchPosition.top=n.touches[0].pageY),t.clickStarted=!0},t.touchEndListener=function(e){t.clickStarted&&t.bodyClickListener(e)},window.addEventListener("scroll",(function(){t.expandedInstance&&!N.a.isMobile()&&t.expandedInstance.setExpanded(!1)}),!0),window.addEventListener("resize",(function(e){t.expandedInstance&&t.expandedInstance.setExpanded(!1)}),!0),e(t.yearLayer).on("mousewheel wheel touchmove",(function(e){if("mousewheel"==e.type||"wheel"==e.type)t.yearScroll(e.originalEvent.deltaY<0?-1:1);else{var n=t.getVerticalScrollDirection(e.originalEvent);if(0===n)return;t.yearScroll(n)}e.preventDefault()})),e(t.monthLayer).on("mousewheel wheel touchmove",(function(e){if("mousewheel"===e.type||"wheel"==e.type)t.monthScroll(e.originalEvent.deltaY<0?-1:1);else{var n=t.getVerticalScrollDirection(e.originalEvent);if(0===n)return;t.monthScroll(n)}e.preventDefault()}))}(R.a.getJQuery(),this)}},{key:"initOverlay",value:function(e){if(this.firstTime=!0,this.expandedInstance&&this.expandedInstance.setExpanded(!1),this.timeUtils||(this.timeUtils=C.a.createInstanceInNonSingletonModeWithoutInternationalizationSupport()),e&&e.getI18n()&&(this.timeUtils.setI18nService(),this.weekDaysI18n=e&&e.getI18n().translateText("edt_date_picker_week_days")&&"edt_date_picker_week_days"!==e.getI18n().translateText("edt_date_picker_week_days")&&e.getI18n().translateText("edt_date_picker_week_days").split(",")),null!==e&&this.initOverlayElements(),this.expandedInstance=e||null,this.expandedInstance){this.initListeners(),document.body.addEventListener("mousedown",this.bodyMouseDownListener,!0),N.a.isMobile()?(document.body.addEventListener("touchstart",this.touchStartListener,!0),document.body.addEventListener("touchmove",this.touchMoveListener,{passive:!1}),document.body.addEventListener("touchend",this.touchEndListener,!0)):document.body.addEventListener("click",this.bodyClickListener,!0),document.body.appendChild(this.overlay);var t=this.expandedInstance.rootNode.getBoundingClientRect(),i=this.overlay.getBoundingClientRect(),r=O.a.getAnchorPosition(t,i,n.DISTANCE_BETWEEN_THE_OVERLAY_AND_THE_INPUT,["center-bottom","center-top"]);this.overlay.style.top="".concat(r.top,"px"),this.overlay.style.left="".concat(r.left,"px"),N.a.isMobile()?(screen.height-t.bottom-n.DISTANCE_BETWEEN_THE_OVERLAY_AND_THE_INPUT-i.height-100<0&&"center-top"!==r.mode&&(document.body.offsetHeight>screen.height?(this.overlay.style.top="".concat(~~t.top+~~(t.height/2)-~~(i.width/2),"px"),P.a.allBrowsersCompatibleScrollIntoView(this.expandedInstance.rootNode,{block:"center"})):(this.overlay.style.top="".concat(~~(screen.height/2)-~~(i.height/2),"px"),this.overlay.style.left="".concat(~~(screen.width/2)-~~(i.width/2),"px"))),document.body.hasAttribute("data-is-wix-embedded")&&(this.overlay.style.top="".concat(~~r.top,"px"),this.overlay.style.left="".concat(~~(t.left/2),"px"))):(this.overlay.style.top="".concat(r.top,"px"),this.overlay.style.left="".concat(t.left+(t.width-i.width),"px")),this.resetOverlay()}else document.body.removeEventListener("mousedown",this.bodyMouseDownListener,!0),N.a.isMobile()?(document.body.removeEventListener("touchstart",this.touchStartListener,!0),document.body.removeEventListener("touchmove",this.touchMoveListener,!0),document.body.removeEventListener("touchend",this.touchEndListener,!0)):document.body.removeEventListener("click",this.bodyClickListener,!0),this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)}},{key:"getVerticalScrollDirection",value:function(e){var t={left:e.touches[0].screenX,top:e.touches[0].screenY},n=t.top-this.lastTouchPosition.top;return Math.abs(n)>10?(this.lastTouchPosition.top=t.top,n>0?1:-1):0}},{key:"monthNavigate",value:function(e){this.localDate.setMonth(this.localDate.getMonth()+e),this.paintDateOverlay()}},{key:"yearScroll",value:function(e){this.localDate.setFullYear(this.localDate.getFullYear()+e),this.paintYearOverlay()}},{key:"monthScroll",value:function(e){this.localDate.setMonth(this.localDate.getMonth()+e),this.paintMonthOverlay()}},{key:"onMonthRowClicked",value:function(e){this.firstTime=!0,this.localDate.setMonth(e),this.expandedInstance.getFormat()!==I.a.VALIDATOR_TYPE_DATE_MMYYYY?this.setPickerDateSelectionPhase(v.j.DAY):(this.localDate.setDate(1),this.expandedInstance.setDateValue(this.localDate),R.a.getJQuery()(this.expandedInstance.getRootNode()).trigger("input"),this.expandedInstance.setExpanded(!1))}},{key:"onYearRowClicked",value:function(e){this.firstTime=!0,this.localDate.setFullYear(e),this.setPickerDateSelectionPhase(v.j.MONTH)}},{key:"onDayCellClicked",value:function(e,t){this.localDate.setMonth(t),this.localDate.setDate(e),this.paintDateOverlay();var n=!0,i=this.expandedInstance.getAcceptedDaysOfWeek();null!==i&&-1===i.indexOf(this.localDate.getDay())&&(n=!1),n&&(this.expandedInstance.setDateValue(this.localDate),R.a.getJQuery()(this.expandedInstance.getRootNode()).trigger("input"),this.expandedInstance.setExpanded(!1))}},{key:"setPickerDateSelectionPhase",value:function(e){switch(this.selectionPhase=e,e){case v.j.DAY:this.overlay.setAttribute("data-selection-phase","day"),this.paintDateOverlay();break;case v.j.MONTH:this.overlay.setAttribute("data-selection-phase","month"),this.paintMonthOverlay();break;case v.j.YEAR:this.overlay.setAttribute("data-selection-phase","year"),this.paintYearOverlay();break;case v.j.TIME:this.overlay.setAttribute("data-selection-phase","time")}}},{key:"updateOverlayHeaderText",value:function(){var e=this.expandedInstance.getDateValue()||new Date,t=this.expandedInstance.getFormat()!==I.a.VALIDATOR_TYPE_DATE_MMYYYY;this.overlayHeader.textContent=this.timeUtils.formatTime(Math.floor(e.getTime()/1e3),t?"%a, %b %e, %Y":"%b %Y")}},{key:"paintDateOverlay",value:function(){for(var e=0;e<7;e++)for(;this.dayOfWeekColumns[String(e)].childNodes.length>1;)this.dayOfWeekColumns[String(e)].childNodes[0].textContent!==this.weekDays[e]&&(this.dayOfWeekColumns[String(e)].childNodes[0].textContent=this.weekDays[e]),this.dayOfWeekColumns[String(e)].removeChild(this.dayOfWeekColumns[String(e)].childNodes[1]);var t,n,i,r,a=new Date,o=new Date,s=this.expandedInstance.getDateValue();for(a.setTime(this.localDate.getTime()),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),n=a.getMonth(),i=a.getFullYear(),this.dateLayerNavigationLABELCurrentMonth.textContent=this.timeUtils.formatTime(Math.round(a.getTime()/1e3),"%M %Y");a.getDay()!=this.expandedInstance.getWeekStart();)a.setDate(a.getDate()-1);for(;a.getMonth()<=n&&a.getFullYear()===i||a.getMonth()>n&&a.getFullYear()<i;)(t=document.createElement("div")).setAttribute("data-role","day"),r=a.getDay(),a.getMonth()===n&&(t.textContent=String(a.getDate()),t.setAttribute("data-day",String(a.getDate())),t.setAttribute("data-month",String(n+1)),a.getDate()===o.getDate()&&a.getMonth()===o.getMonth()&&a.getFullYear()===o.getFullYear()&&(t.className="".concat(t.className||"","today ")),null!==s&&a.getDate()===s.getDate()&&a.getMonth()===s.getMonth()&&a.getFullYear()===s.getFullYear()&&(t.className="".concat(t.className||"","selected "))),this.dayOfWeekColumns[String(r)].appendChild(t),a.setDate(a.getDate()+1)}},{key:"paintMonthOverlay",value:function(){var e,t=new Date;t.setTime(this.localDate.getTime()),t.setDate(1),t.setMonth(t.getMonth()-6);for(var n=0;n<12;n++)(e=this.firstTime?document.createElement("div"):this.monthLayer.children.item(n)).classList.remove("current"),e.setAttribute("data-month",String(t.getMonth()+1)),e.textContent=this.timeUtils.formatTime(Math.round(t.getTime()/1e3),"%M"),t.getMonth()===this.localDate.getMonth()&&(e.className="current"),!0===this.firstTime&&this.monthLayer.appendChild(e),t.setMonth(t.getMonth()+1);this.firstTime=!1}},{key:"paintYearOverlay",value:function(){var e,t=new Date;t.setTime(this.localDate.getTime()),t.setDate(1),t.setFullYear(t.getFullYear()-6);for(var n=0;n<12;n++)(e=this.firstTime?document.createElement("div"):this.yearLayer.children.item(n)).classList.remove("current"),e.setAttribute("data-year",String(t.getFullYear())),e.textContent=this.timeUtils.formatTime(Math.round(t.getTime()/1e3),"%Y"),t.getFullYear()===this.localDate.getFullYear()&&(e.className="current"),this.firstTime&&this.yearLayer.appendChild(e),t.setFullYear(t.getFullYear()+1);this.firstTime=!1}},{key:"paintCurrentOverlay",value:function(){switch(this.selectionPhase){case v.j.DAY:this.paintDateOverlay();break;case v.j.MONTH:this.paintMonthOverlay();break;case v.j.YEAR:this.paintYearOverlay();break;case v.j.TIME:}}},{key:"resetOverlay",value:function(){var e=this.expandedInstance.getFormat()!==I.a.VALIDATOR_TYPE_DATE_MMYYYY,t=this.expandedInstance.getWeekStart(),n=this.expandedInstance.getAcceptedDaysOfWeek();this.dayOfWeekColumns[0].parentNode.removeChild(this.dayOfWeekColumns[0]),t===v.k.MONDAY?this.dateLayerDaysHolder.appendChild(this.dayOfWeekColumns[0]):this.dateLayerDaysHolder.insertBefore(this.dayOfWeekColumns[0],this.dateLayerDaysHolder.firstChild);for(var i=0;i<7;i++)null===n||n.indexOf(i)>-1?this.dayOfWeekColumns[String(i)].removeAttribute("data-forbidden-week-day"):this.dayOfWeekColumns[String(i)].setAttribute("data-forbidden-week-day","");this.localDate=this.expandedInstance.getDateValue()||new Date,this.setPickerDateSelectionPhase(e?v.j.DAY:v.j.YEAR),this.updateOverlayHeaderText(),this.paintCurrentOverlay()}}]),n}(n(64).a);T()(L,"DISTANCE_BETWEEN_THE_OVERLAY_AND_THE_INPUT",5),T()(L,"overlay",void 0),T()(L,"overlayModal",void 0),T()(L,"overlayHeader",void 0),T()(L,"dateLayer",void 0),T()(L,"dateLayerNavigation",void 0),T()(L,"dateLayerNavigationBTNPrevMonth",void 0),T()(L,"dateLayerNavigationBTNNextMonth",void 0),T()(L,"dateLayerNavigationLABELCurrentMonth",void 0),T()(L,"dateLayerDaysHolder",void 0),T()(L,"monthLayer",void 0),T()(L,"yearLayer",void 0),T()(L,"expandedInstance",void 0),T()(L,"bodyMouseDownListener",void 0),T()(L,"bodyClickListener",void 0),T()(L,"touchMoveListener",void 0),T()(L,"touchStartListener",void 0),T()(L,"touchEndListener",void 0),T()(L,"selectionPhase",void 0),T()(L,"timeUtils",void 0),T()(L,"localDate",void 0),T()(L,"lastTouchPosition",{left:0,top:0}),T()(L,"overlayFocusedElement",null),T()(L,"dayOfWeekColumns",{0:document.createElement("div"),1:document.createElement("div"),2:document.createElement("div"),3:document.createElement("div"),4:document.createElement("div"),5:document.createElement("div"),6:document.createElement("div")}),T()(L,"weekDaysI18n",null),T()(L,"weekDays",["S","M","T","W","T","F","S"]),T()(L,"clickStarted",!1),T()(L,"firstTime",!0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var i=n(20),r=n.n(i),a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(3),u=n.n(c),d=n(17),p=n.n(d),h=n(7),_=n.n(h),g=n(8),m=n.n(g),f=n(4),E=n.n(f),y=n(0),T=n.n(y),v=n(1),O=n(134),b=n(26),C=n(92),I=n(24),R=n(49),P=n(23),N=n(13),A=n(54),S=n(69);function L(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var D=function(e){_()(n,e);var t=L(n);function n(){var e;return o()(this,n),e=t.call(this,P.a.ELEMENT_TYPE_TIME),T()(u()(e),"dateGroups",[]),T()(u()(e),"format",void 0),T()(u()(e),"currentDateGroup",void 0),T()(u()(e),"value",null),T()(u()(e),"expander",void 0),T()(u()(e),"expanded",!1),T()(u()(e),"hash",void 0),T()(u()(e),"hasAccessibilityEnabled",void 0),T()(u()(e),"inputErrorState",v.H.FILLED),T()(u()(e),"hiddenInput",void 0),e.expander=document.createElement("div"),e.expander.setAttribute("data-role","expander"),e.expander.setAttribute("role","application"),A.a.isMobile()&&(e.hiddenInput=document.createElement("input"),e.hiddenInput.style.display="block",e.hiddenInput.style.border="none",e.hiddenInput.style.width="1px",e.hiddenInput.style.height="1px",e.hiddenInput.style.opacity=".1",e.hiddenInput.style.position="absolute",e.hiddenInput.style.right=e.hiddenInput.style.top="0",e.rootNode.appendChild(e.hiddenInput)),e.init(),e}return l()(n,[{key:"padNumber",value:function(e,t){for(var n=String(e||0);n.length<t;)n="0".concat(n);return n}},{key:"getAMPMHourPart",value:function(e){return e<12?e:e-12}},{key:"getValue",value:function(){if(null===this.value)return"";switch(this.format){case I.a.VALIDATOR_TYPE_TIME_AMPM:return"".concat(this.padNumber(this.getAMPMHourPart(this.value.getHours()),2),":").concat(this.padNumber(this.value.getMinutes(),2)).concat(R.a.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?":".concat(this.padNumber(this.value.getSeconds(),2)):""," ").concat(this.value.getHours()<12?"AM":"PM");case I.a.VALIDATOR_TYPE_TIME:default:return"".concat(this.padNumber(this.value.getHours(),2),":").concat(this.padNumber(this.value.getMinutes(),2),":").concat(this.padNumber(this.value.getSeconds(),2))}}},{key:"hasDatePart",value:function(e){for(var t=0,n=this.dateGroups.length;t<n;t++)if(this.dateGroups[t].getRole()===e)return!0;return!1}},{key:"setValue",value:function(e){var t;if("string"!==typeof e)t=null,console.warn("Invalid date: ",e);else{e=e.trim();var n,i=null,r=null,a=null,o=null;switch(this.format){case I.a.VALIDATOR_TYPE_TIME_AMPM:(n=/^([\d]{2}):([\d]{2})(:([\d]{2}))? (am|pm)$/i.exec(e))&&(i=parseInt(n[1]),r=parseInt(n[2]),a=parseInt(n[4]||"0"),o=~~("pm"===n[5].toLowerCase()),i>12||r>59||a>59?i=r=a=null:0===i&&1===o?i=12:12===i&&0===o?i=0:1===o&&12!==i&&(i+=12));break;case I.a.VALIDATOR_TYPE_TIME:default:(n=/^([\d]{2}):([\d]{2})(:([\d]{2}))?$/.exec(e))&&(i=parseInt(n[1]),r=parseInt(n[2]),a=parseInt(n[4]||"0"),(i>23||r>59||a>59)&&(i=r=a=null))}if(null===i||null===r||null===a?(t=null,console.warn("Invalid date: ",e)):((t=new Date).setHours(i),t.setMinutes(r),t.setSeconds(a),t.setMilliseconds(0),t.setDate(1),t.setMonth(1),t.setFullYear(1970)),C.a.dateEquals(this.value,t))return;this.value=t;for(var s=0,l=this.dateGroups.length;s<l;s++)this.dateGroups[s].extractDatePartFrom(this.value)}}},{key:"withHash",value:function(e){return this.hash=e,this}},{key:"getHash",value:function(){return this.hash}},{key:"setAccessibilityEnabled",value:function(e){this.hasAccessibilityEnabled=e}},{key:"setFormat",value:function(e){switch(e){case I.a.VALIDATOR_TYPE_TIME_AMPM:this.dateGroups=R.a.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?[new S.a(v.i.HOUR_12,this),new S.a(v.i.MINUTE,this),new S.a(v.i.SECOND,this),new S.a(v.i.AM_PM,this)]:[new S.a(v.i.HOUR_12,this),new S.a(v.i.MINUTE,this),new S.a(v.i.AM_PM,this)];break;case I.a.VALIDATOR_TYPE_TIME:this.dateGroups=R.a.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?[new S.a(v.i.HOUR_24,this),new S.a(v.i.MINUTE,this),new S.a(v.i.SECOND,this)]:[new S.a(v.i.HOUR_24,this),new S.a(v.i.MINUTE,this)];break;default:throw new Error("Invalid date format! Expected time, time_ampm!")}this.format=e,this.rootNode.textContent="";var t=document.createElement("div");t.setAttribute("data-role","time-wrapper");for(var n=0,i=this.dateGroups.length;n<i;n++){switch(this.dateGroups[n].withDisabled(this.disabled).withReadOnly(this.readOnly),this.dateGroups[n].extractDatePartFrom(this.value),t.appendChild(this.dateGroups[n].getRootNode()),this.dateGroups[n].getRole()){case v.i.HOUR_12:case v.i.HOUR_24:this.dateGroups[n].getRootNode().setAttribute("id","time-".concat(this.hash,"-hour"));break;case v.i.MINUTE:this.dateGroups[n].getRootNode().setAttribute("id","time-".concat(this.hash,"-minute"));break;case v.i.SECOND:this.dateGroups[n].getRootNode().setAttribute("id","time-".concat(this.hash,"-second"));break;case v.i.AM_PM:this.dateGroups[n].getRootNode().setAttribute("id","time-".concat(this.hash,"-am-pm"))}t.appendChild(this.dateGroups[n].getRootNode()),n<i-1&&t.appendChild(document.createTextNode(n===i-2&&I.a.VALIDATOR_TYPE_TIME_AMPM===this.format?" ":":"))}this.updateAccessibilityFeature(),this.rootNode.appendChild(t),this.rootNode.appendChild(this.expander),this.setCurrentDateGroup(this.dateGroups[0]||null),this.hiddenInput&&this.rootNode.appendChild(this.hiddenInput)}},{key:"updateAccessibilityFeature",value:function(){if(this.hasAccessibilityEnabled){var e=document.createElement("div");e.setAttribute("id","time-expander-text-acc"),e.appendChild(document.createTextNode("Click to choose time")),e.style.display="none",this.expander.tabIndex=0,this.expander.appendChild(e),this.expander.setAttribute("aria-labelledby","time-expander-text-acc")}else this.expander.removeAttribute("tabindex")}},{key:"getFormat",value:function(){return this.format}},{key:"getDateValue",value:function(){return this.value}},{key:"setDateValue",value:function(e){if(null!==e&&!r()(e,Date))throw new Error("Invalid argument: Expected Date|null");this.value=e,this.inputErrorState=null===e?v.H.UNFILLED:v.H.FILLED;for(var t=0,n=this.dateGroups.length;t<n;t++)this.dateGroups[t].extractDatePartFrom(this.value)}},{key:"setCurrentDateGroup",value:function(e){this.currentDateGroup&&this.currentDateGroup.getRootNode().removeAttribute("data-is-focused"),this.currentDateGroup=e||null,this.currentDateGroup&&this.currentDateGroup.getRootNode().setAttribute("data-is-focused","data-is-focused")}},{key:"queryDatePart",value:function(e){for(var t=0,n=this.dateGroups.length;t<n;t++)if(this.dateGroups[t].getRole()===e)return this.dateGroups[t].getValue();return null}},{key:"setDatePart",value:function(e,t){for(var n=0,i=this.dateGroups.length;n<i;n++)this.dateGroups[n].getRole()===e&&this.dateGroups[n].setValue(t)}},{key:"isDateValidIfDatePartIs",value:function(e,t){return!0}},{key:"rebuildDateFromParts",value:function(){for(var e,t=null,n=null,i=null,r=0,a=0,o=this.dateGroups.length;a<o;a++)switch(this.dateGroups[a].getRole()){case v.i.HOUR_12:case v.i.HOUR_24:t=this.dateGroups[a].getValue();break;case v.i.MINUTE:n=this.dateGroups[a].getValue();break;case v.i.SECOND:i=this.dateGroups[a].getValue();break;case v.i.AM_PM:r=null===this.dateGroups[a].getValue()?v.ob.AM:this.dateGroups[a].getValue()}switch(!0){case null===t&&null===n:this.inputErrorState=v.H.UNFILLED,this.value=null;break;case null===t||null===n:this.inputErrorState=v.H.ERROR;break;default:(e=new Date).setDate(1),e.setMonth(0),e.setFullYear(1970),e.setHours(t+12*r),e.setMinutes(n),e.setSeconds(i),e.setMilliseconds(0),this.value=e,this.inputErrorState=v.H.FILLED}}},{key:"setExpanded",value:function(e){if(!this.isReadOnly()){if(e=!!e,this.expander.querySelector("div")&&(this.expander.querySelector("div").textContent="Click to expand"),e===this.expanded)return;this.expanded=e;var t=this.getValue();n.initOverlay(e?this:null),t!==this.getValue()&&P.a.getJQuery()(this.rootNode).trigger("input"),e?this.expander.setAttribute("data-expanded","1"):this.expander.removeAttribute("data-expanded")}}},{key:"init",value:function(){!function(e,t){e.expander.addEventListener("keydown",(function(t){var i=!1,r=t.keyCode||t.charCode;switch(r){case b.a.KEY_TAB:if(!e.expanded)return e.expander.removeAttribute("tabindex"),void setTimeout((function(){e.expander.tabIndex=0}),1e3);n.focusNextOverlayElement(t),i=!0;break;case b.a.KEY_UP:case b.a.KEY_DOWN:case b.a.KEY_LEFT:case b.a.KEY_RIGHT:n.handleKeyboardPressButtonOnCurrentFocusedElement(t,r),i=!0;break;case b.a.KEY_ENTER:e.setExpanded(!0),i=!0;break;case b.a.KEY_ESC:e.setExpanded(!1),i=!0;break;default:i=!1}i&&(t.preventDefault(),t.stopPropagation())}),!0),t(e.rootNode).on("keydown",(function(t){if(!e.expanded){if(null!==e.currentDateGroup){if(A.a.isMobile())for(var n=0,i=e.dateGroups.length;n<i;n++)if(document.activeElement===e.dateGroups[n].getRootNode()&&e.dateGroups[n]!==e.currentDateGroup){e.setCurrentDateGroup(e.dateGroups[n]);break}e.currentDateGroup.handleKeyEvent(t)}e.trigger("keydown")}})),t(e.rootNode).on("blur",(function(){e.setCurrentDateGroup(e.dateGroups[0])})),t(e.hiddenInput).on("focus",(function(n){setTimeout((function(){t(e.rootNode).focus().click(),e.setExpanded(!0)}),100)})),t(e.rootNode).on("mousedown",(function(t){var n=t.target||t.srcElement;if(A.a.isMobile())e.setExpanded(!0);else if(n===e.expander)e.setExpanded(!0);else for(var i=0,r=e.dateGroups.length;i<r;i++)if(e.dateGroups[i].getRootNode()===n)return void e.setCurrentDateGroup(e.dateGroups[i])})),Object.defineProperty(e.rootNode,"value",{get:function(){return e.getValue()},set:function(t){t&&r()(t,Date)?e.setDateValue(t):e.setValue(t)}}),Object.defineProperty(e.rootNode,"dateValue",{get:function(){return e.getDateValue()},set:function(t){t&&r()(t,Date)?this.setDateValue(t):e.setDateValue(null)}}),Object.defineProperty(e.rootNode,"disabled",{get:function(){return e.isDisabled()},set:function(t){e.setDisabled(t)}}),Object.defineProperty(e.rootNode,"readOnly",{get:function(){return e.isReadOnly()},set:function(t){e.setReadOnly(t)}})}(this,P.a.getJQuery())}},{key:"focusPreviousDatePartGroup",value:function(){for(var e=null,t=0,n=this.dateGroups.length;t<n;t++)if(this.dateGroups[t]===this.currentDateGroup){e=t;break}this.setCurrentDateGroup(this.dateGroups[(e||0)-1]||this.dateGroups[0]||null)}},{key:"focusNextDatePartGroup",value:function(){for(var e=null,t=0,n=this.dateGroups.length;t<n;t++)if(this.dateGroups[t]===this.currentDateGroup){e=t;break}this.setCurrentDateGroup(this.dateGroups[(e||0)+1]||this.dateGroups[this.dateGroups.length-1]||null)}},{key:"setDisabled",value:function(e){p()(E()(n.prototype),"setDisabled",this).call(this,e);for(var t=0,i=this.dateGroups.length;t<i;t++)this.dateGroups[t].withDisabled(this.disabled)}},{key:"setReadOnly",value:function(e){p()(E()(n.prototype),"setReadOnly",this).call(this,e);for(var t=0,i=this.dateGroups.length;t<i;t++)this.dateGroups[t].withReadOnly(this.readOnly)}},{key:"getInputErrorState",value:function(){return this.inputErrorState}}],[{key:"getVerticalScrollDirection",value:function(e){var t,n={left:e.touches[0].screenX,top:e.touches[0].screenY};return Math.abs(t=n.top-this.lastTouchPosition.top)>10?(this.lastTouchPosition.top=n.top,t>0?1:-1):0}},{key:"emulateFocusOnOverlayActiveElement",value:function(){null!==this.overlayFocusedElement&&this.overlayFocusedElement.setAttribute("data-soft-focused","1")}},{key:"emulateBlurOnOverlayActiveElement",value:function(){null!==this.overlayFocusedElement&&this.overlayFocusedElement.removeAttribute("data-soft-focused")}},{key:"focusNextOverlayElement",value:function(e){if(this.expandedInstance){if(this.emulateBlurOnOverlayActiveElement(),e.shiftKey)switch(this.overlayFocusedElement){case this.overlayHeader:this.overlayFocusedElement=this.timeMinutesColumn;break;case this.timeMinutesColumn:this.overlayFocusedElement=this.timeHoursColumn;break;case this.timeHoursColumn:default:this.overlayFocusedElement=this.overlayHeader}else switch(this.overlayFocusedElement){case this.overlayHeader:this.overlayFocusedElement=this.timeHoursColumn;break;case this.timeHoursColumn:this.overlayFocusedElement=this.timeMinutesColumn;break;case this.timeMinutesColumn:default:this.overlayFocusedElement=this.overlayHeader}this.emulateFocusOnOverlayActiveElement()}}},{key:"handleKeyboardPressButtonOnCurrentFocusedElement",value:function(e,t){if(this.expandedInstance)switch(this.overlayFocusedElement){case this.overlayHeader:switch(t){case b.a.KEY_LEFT:case b.a.KEY_RIGHT:this.incrementDatePart("hours",12)}break;case this.timeHoursColumn:switch(t){case b.a.KEY_UP:this.incrementDatePart("hours",-1);break;case b.a.KEY_DOWN:this.incrementDatePart("hours",1)}break;case this.timeMinutesColumn:switch(t){case b.a.KEY_UP:this.incrementDatePart("minutes",-1);break;case b.a.KEY_DOWN:this.incrementDatePart("minutes",1)}}}},{key:"initOverlay",value:function(e){if(this.expandedInstance&&this.expandedInstance.setExpanded(!1),this.overlayFocusedElement=null,this.timeUtils||(this.timeUtils=C.a.createInstanceInNonSingletonModeWithoutInternationalizationSupport()),this.overlay||null===e||(this.overlay=document.createElement("div"),this.overlay.setAttribute("data-role","date-overlay"),this.overlay.setAttribute("data-selection-phase","time"),this.overlayModal=document.createElement("div"),this.overlayModal.className="ui-modal",this.overlayModal.setAttribute("data-transparent","1"),A.a.isMobile()||this.overlay.appendChild(this.overlayModal),this.overlayHeader=document.createElement("div"),this.overlayHeader.setAttribute("data-component","header"),this.overlay.appendChild(this.overlayHeader),this.overlayHeaderAMButton=document.createElement("div"),this.overlayHeaderAMButton.textContent="AM",this.overlayHeaderAMButton.setAttribute("data-role","button"),this.overlayHeaderAMButton.setAttribute("data-value","0"),this.overlayHeaderPMButton=document.createElement("div"),this.overlayHeaderPMButton.textContent="PM",this.overlayHeaderPMButton.setAttribute("data-role","button"),this.overlayHeaderPMButton.setAttribute("data-value","1"),this.overlayHeader.appendChild(this.overlayHeaderAMButton),this.overlayHeader.appendChild(this.overlayHeaderPMButton),this.timeLayer=document.createElement("div"),this.timeLayer.setAttribute("data-component","time"),this.timeHoursColumn=document.createElement("div"),this.timeHoursColumn.setAttribute("data-role","hours"),this.timeMinutesColumn=document.createElement("div"),this.timeMinutesColumn.setAttribute("data-role","minutes"),R.a.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL&&(this.timeSecondsColumn=document.createElement("div"),this.timeSecondsColumn.setAttribute("data-role","seconds")),this.timeLayer.appendChild(this.timeHoursColumn),this.timeLayer.appendChild(this.timeMinutesColumn),R.a.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL&&this.timeLayer.appendChild(this.timeSecondsColumn),this.overlay.appendChild(this.timeLayer)),this.bodyMouseDownListener||function(e,t){t.bodyMouseDownListener=function(n){var i=n.target||n.srcElement;(i===t.overlayModal||!e.contains(t.overlay,i)&&i!==t.overlay)&&null!==t.expandedInstance&&t.expandedInstance.setExpanded(!1)},t.bodyClickListener=function(n){var i=n.target||n.srcElement;e.contains(t.overlay,i)||t.overlay},t.touchMoveListener=function(n){var i=n.target||n.srcElement;(e.contains(t.overlay,i)||i===t.overlay)&&n.preventDefault()},t.touchStartListener=function(n){var i=n.target||n.srcElement;(e.contains(t.overlay,i)||i===t.overlay)&&(t.lastTouchPosition.left=n.touches[0].pageX,t.lastTouchPosition.top=n.touches[0].pageY)},window.addEventListener("scroll",(function(e){t.expandedInstance&&t.expandedInstance.setExpanded(!1)}),!0),window.addEventListener("resize",(function(e){t.expandedInstance&&t.expandedInstance.setExpanded(!1)}),!0),e(t.timeLayer).on("mousewheel wheel touchmove","[data-role=hours], [data-role=minutes], [data-role=seconds]",(function(e){var n,i=this.getAttribute("data-role");if("mousewheel"===e.type||"wheel"==e.type)n=e.originalEvent.deltaY<0?-1:1;else if(0===(n=t.getVerticalScrollDirection(e.originalEvent)))return;t.incrementDatePart(i,n),e.preventDefault()})),e(t.overlayHeader).on("click","[data-role=button][data-value]",(function(e){switch(~~this.getAttribute("data-value")){case 0:t.localDate.getHours()>=12&&(t.localDate.setHours(t.localDate.getHours()-12),t.paintHours(),t.expandedInstance.setDateValue(t.localDate),P.a.getJQuery()(t.expandedInstance.getRootNode()).trigger("input"));break;case 1:t.localDate.getHours()<12&&(t.localDate.setHours(t.localDate.getHours()+12),t.paintHours(),t.expandedInstance.setDateValue(t.localDate),P.a.getJQuery()(t.expandedInstance.getRootNode()).trigger("input"))}})),e(t.timeLayer).on("click","[data-role=hours] > div, [data-role=minutes] > div, [data-role=seconds] > div",(function(e){var n;switch(!0){case this.hasAttribute("data-hour"):"hours",n=~~this.getAttribute("data-hour"),t.localDate.setHours(n),t.paintHours();break;case this.hasAttribute("data-minute"):"minutes",n=~~this.getAttribute("data-minute"),t.localDate.setMinutes(n),t.paintMinutes();break;case this.hasAttribute("data-second"):"seconds",n=~~this.getAttribute("data-second"),t.localDate.setSeconds(n),t.paintSeconds()}t.expandedInstance.setDateValue(t.localDate),P.a.getJQuery()(t.expandedInstance.getRootNode()).trigger("input")}))}(P.a.getJQuery(),this),this.expandedInstance=e||null,this.expandedInstance){document.body.addEventListener("mousedown",this.bodyMouseDownListener,!0),document.body.addEventListener("click",this.bodyClickListener,!0),document.body.addEventListener("touchstart",this.touchStartListener,!0),document.body.addEventListener("touchmove",this.touchMoveListener,{passive:!1}),document.body.appendChild(this.overlay);var t=this.expandedInstance.rootNode.getBoundingClientRect(),i=this.overlay.getBoundingClientRect(),r=O.a.getAnchorPosition(t,i,n.DISTANCE_BETWEEN_OVERLAY_AND_INPUT,["center-bottom","center-top"]);this.overlay.style.top="".concat(r.top,"px"),this.overlay.style.left="".concat(r.left,"px"),A.a.isMobile()?(screen.height-t.bottom-n.DISTANCE_BETWEEN_OVERLAY_AND_INPUT-i.height-100<0&&"center-top"!==r.mode&&(document.body.offsetHeight>screen.height?(this.overlay.style.top="".concat(~~t.top+~~(t.height/2)-~~(i.width/2),"px"),N.a.allBrowsersCompatibleScrollIntoView(this.expandedInstance.rootNode,{block:"center"})):(this.overlay.style.top="".concat(~~(screen.height/2)-~~(i.height/2),"px"),this.overlay.style.left="".concat(~~(screen.width/2)-~~(i.width/2),"px"))),document.body.hasAttribute("data-is-wix-embedded")&&(this.overlay.style.top="".concat(~~r.top,"px"),this.overlay.style.left="".concat(~~(t.left/2),"px"))):(this.overlay.style.top="".concat(r.top,"px"),screen.width-t.left+(t.width-i.width)>0&&(this.overlay.style.left="".concat(t.left+(t.width-i.width),"px"))),this.resetOverlay()}else document.body.removeEventListener("mousedown",this.bodyMouseDownListener,!0),document.body.removeEventListener("click",this.bodyClickListener,!0),document.body.removeEventListener("touchmove",this.touchMoveListener,!0),document.body.removeEventListener("touchstart",this.touchStartListener,!0),this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)}},{key:"incrementDatePart",value:function(e,t){var n=this.localDate.getMinutes(),i=this.localDate.getSeconds(),r=this.localDate.getHours();switch(e){case"hours":this.localDate.setHours(this.localDate.getHours()+t),this.localDate.setMinutes(n),this.localDate.setSeconds(i),this.paintHours();break;case"minutes":this.localDate.setMinutes(this.localDate.getMinutes()+t),this.localDate.setHours(r),this.localDate.setSeconds(i),this.paintMinutes();break;case"seconds":this.localDate.setSeconds(this.localDate.getSeconds()+t),this.localDate.setMinutes(n),this.localDate.setHours(r),this.paintSeconds()}this.expandedInstance.setDateValue(this.localDate),P.a.getJQuery()(this.expandedInstance.getRootNode()).trigger("input");var a=this.expandedInstance.expander.querySelector("div");a&&(a.textContent=this.expandedInstance.getValue()),this.expandedInstance.expander.focus()}},{key:"paintHours",value:function(){var e,t=this.expandedInstance.hasDatePart(v.i.AM_PM),n=new Date;this.localDate&&n.setTime(this.localDate.getTime()),n.getHours()<12?(this.overlayHeaderAMButton.setAttribute("data-is-active",""),this.overlayHeaderPMButton.removeAttribute("data-is-active")):(this.overlayHeaderPMButton.setAttribute("data-is-active",""),this.overlayHeaderAMButton.removeAttribute("data-is-active")),n.setHours(n.getHours()-5);for(var i=0;i<11;i++)(e=this.firstTimeHours?document.createElement("div"):this.timeHoursColumn.children.item(i)).setAttribute("data-hour",String(n.getHours())),e.textContent=t?n.getHours()<13?String(n.getHours()):String(n.getHours()-12):String(n.getHours()),5===i&&e.setAttribute("data-is-current",""),this.firstTimeHours&&this.timeHoursColumn.appendChild(e),n.setHours(n.getHours()+1);this.firstTimeHours=!1}},{key:"paintMinutes",value:function(){var e,t=new Date;this.localDate&&t.setTime(this.localDate.getTime()),t.setMinutes(t.getMinutes()-5);for(var n=0;n<11;n++){(e=this.firstTimeMinutes?document.createElement("div"):this.timeMinutesColumn.children.item(n)).setAttribute("data-minute",String(t.getMinutes()));var i=String(t.getMinutes());parseInt(i)<10&&(i="0".concat(i)),e.textContent=i,5===n&&e.setAttribute("data-is-current",""),this.firstTimeMinutes&&this.timeMinutesColumn.appendChild(e),t.setMinutes(t.getMinutes()+1)}this.firstTimeMinutes=!1}},{key:"paintSeconds",value:function(){if(R.a.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL){var e,t=new Date;for(this.localDate&&t.setTime(this.localDate.getTime()),t.setSeconds(t.getSeconds()-5);this.timeSecondsColumn.firstChild;)this.timeSecondsColumn.removeChild(this.timeSecondsColumn.firstChild);for(var n=0;n<11;n++)(e=document.createElement("div")).setAttribute("data-second",String(t.getSeconds())),e.textContent=String(t.getSeconds()),5===n&&e.setAttribute("data-is-current",""),this.timeSecondsColumn.appendChild(e),t.setSeconds(t.getSeconds()+1)}}},{key:"resetOverlay",value:function(){var e;this.localDate=this.expandedInstance.getDateValue()||((e=new Date).setDate(1),e.setMonth(0),e.setFullYear(1970),e),this.expandedInstance.hasDatePart(v.i.AM_PM)?(this.overlayHeader.setAttribute("data-format","12"),this.overlay.setAttribute("time-overlay-data-format","12")):(this.overlayHeader.setAttribute("data-format","24"),this.overlay.setAttribute("time-overlay-data-format","24"));var t=[];(this.expandedInstance.hasDatePart(v.i.HOUR_12)||this.expandedInstance.hasDatePart(v.i.HOUR_24))&&(t.push("has-hours"),this.paintHours()),this.expandedInstance.hasDatePart(v.i.MINUTE)&&(t.push("has-minutes"),this.paintMinutes()),this.expandedInstance.hasDatePart(v.i.SECOND)&&(t.push("has-seconds"),this.paintSeconds()),this.timeLayer.className=t.join(" "),this.timeLayer.setAttribute("data-num-groups",String(t.length)),this.expandedInstance.setDateValue(this.localDate)}}]),n}(n(64).a);T()(D,"DISTANCE_BETWEEN_OVERLAY_AND_INPUT",5),T()(D,"overlay",void 0),T()(D,"overlayModal",void 0),T()(D,"overlayHeader",void 0),T()(D,"overlayHeaderAMButton",void 0),T()(D,"overlayHeaderPMButton",void 0),T()(D,"timeLayer",void 0),T()(D,"timeHoursColumn",void 0),T()(D,"timeMinutesColumn",void 0),T()(D,"timeSecondsColumn",void 0),T()(D,"expandedInstance",void 0),T()(D,"bodyMouseDownListener",void 0),T()(D,"bodyClickListener",void 0),T()(D,"touchMoveListener",void 0),T()(D,"touchStartListener",void 0),T()(D,"selectionPhase",void 0),T()(D,"timeUtils",void 0),T()(D,"localDate",void 0),T()(D,"lastTouchPosition",{left:0,top:0}),T()(D,"overlayFocusedElement",null),T()(D,"firstTimeHours",!0),T()(D,"firstTimeMinutes",!0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(0),m=n.n(g),f=n(1),E=n(35),y=n(34),T=n(146),v=n(25),O=n(23),b=n(122),C=n(13),I=n(64),R=n(289),P=n(161);function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var A=function(e){u()(n,e);var t=N(n);function n(){var e;return r()(this,n),e=t.call(this,O.a.ELEMENT_TYPE_FILE),m()(l()(e),"instanceId",void 0),m()(l()(e),"files",[]),m()(l()(e),"uploadOverlay",void 0),m()(l()(e),"uploadInput",void 0),m()(l()(e),"placeholder",void 0),m()(l()(e),"control",void 0),m()(l()(e),"multiple",void 0),m()(l()(e),"minUploadSizeInBytes",null),m()(l()(e),"maxUploadSizeInBytes",null),m()(l()(e),"uploadsContainer",void 0),m()(l()(e),"dropFiles",void 0),m()(l()(e),"dropFilesThrottler",void 0),m()(l()(e),"allowedExtensions",null),m()(l()(e),"forbiddenExtensions",null),m()(l()(e),"abortAllUploadsButton",void 0),m()(l()(e),"hasAccessibilityEnabled",void 0),m()(l()(e),"fileUtils",void 0),e.instanceId=n.INSTANCE_ID,n.INSTANCE_ID++,e.uploadOverlay=document.createElement("div"),e.uploadOverlay.setAttribute("data-role","upload-overlay"),e.uploadInput=document.createElement("input"),e.uploadInput.setAttribute("type","file"),e.placeholder=document.createElement("div"),e.placeholder.setAttribute("data-role","placeholder"),e.placeholder.textContent="Choose files or drag here",e.placeholder.setAttribute("data-i18n-text","textdef_216"),e.uploadsContainer=document.createElement("div"),e.uploadsContainer.setAttribute("data-role","files-container"),e.rootNode.appendChild(e.uploadsContainer),e.abortAllUploadsButton=document.createElement("div"),e.abortAllUploadsButton.setAttribute("data-role","abort-all-uploads"),e.abortAllUploadsButton.textContent="Delete all uploads",e.abortAllUploadsButton.setAttribute("data-i18n-text","textdef_217"),e.rootNode.appendChild(e.abortAllUploadsButton),e.rootNode.appendChild(e.uploadOverlay),e.uploadOverlay.appendChild(e.uploadInput),e.uploadOverlay.appendChild(e.placeholder),e.hasAccessibilityEnabled?e.uploadOverlay.setAttribute("tabindex","0"):e.uploadOverlay.removeAttribute("tabindex"),e.rootNode.removeAttribute("tabindex"),e.onUploadNumberChanged(),e.init(),e}return o()(n,[{key:"withControl",value:function(e){return this.control=e,this.updateAccessibilityAttributes(),this}},{key:"setAccessibility",value:function(e){this.hasAccessibilityEnabled=e}},{key:"getFilesList",value:function(){for(var e=[],t=0,n=this.files.length;t<n;t++)this.files[t].getUploadStatus()===f.tb.SUCCESS&&e.push({id:0,name:this.files[t].getName(),mimeType:this.control.getForm().getEngine().getUploadsService().getMimeType(this.files[t].getName()),size:this.files[t].getSize(),hash:this.files[t].getHash(),data:this.files[t].getData()||""});return e.length?e:null}},{key:"getValue",value:function(){for(var e=[],t=0,n=this.getFilesList()||[],i=n.length;t<i;t++)e.push(n[t].name.indexOf(" ")>-1?'"'.concat(n[t].name,'"'):n[t].name);return e.length?e.join(" "):""}},{key:"setValue",value:function(e){var t,n=[],i=!1,r="";if(""!==(e=String(e||""))){for(var a=0,o=e.length;a<o;a++)switch(t=e.charAt(a)){case'"':if(!(i=!i)){if(""===r)throw new Error("Invalid value: Empty file name not allowed!");n.push(r),r=""}break;case" ":if(i)r+=" ";else{if(""===r)throw new Error("Invalid value: Empty file name not allowed!");n.push(r),r=""}break;default:r=r.concat(t)}""!==r&&n.push(r)}if(n.length>1&&!this.isMultiple())throw new Error("Too many files!");!function(e,t){e.when.apply(e,function(){for(var e=[],n=0,i=t.files.length;n<i;n++)e.push(t.files[n].cancel());return e||!0}()).then((function(){for(t.files=[];t.uploadsContainer.firstChild;)t.uploadsContainer.removeChild(t.uploadsContainer.firstChild);for(var e,i=0,r=n.length;i<r;i++)(e=new P.a).updateAccessibilityAttributes(T.a.nextString,this.hasAccessibilityEnabled),e.withName(n[i]).withFileUtils(this.fileUtils),t.files.push(e),t.uploadsContainer.appendChild(e.getRootNode());t.onUploadNumberChanged()}))}(O.a.getJQuery(),this)}},{key:"onUploadNumberChanged",value:function(){var e=this.files.length;this.rootNode.setAttribute("data-num-files",String(e)),e<n.MIN_NUMBER_OF_CONTROLS_IN_ORDER_TO_DISPLAY_THE_ABORT_ALL_DOWNLOADS_BUTTON?this.rootNode.removeAttribute("data-has-abort-all-uploads"):this.rootNode.setAttribute("data-has-abort-all-uploads",""),C.a.refreshFrameHeightOnWix()}},{key:"addFile",value:function(e){var t=this;if(this.control&&this.control.isAttached())if(this.isMultiple()){var n=new P.a;this.files.push(n),n.withName(e.file.name).withFileUtils(this.fileUtils),n.updateAccessibilityAttributes(T.a.nextString,this.hasAccessibilityEnabled),this.uploadsContainer.appendChild(n.getRootNode()),n.withUpload(this.control.getForm().getEngine().getUploadsService().addToQOS(this.control.getForm().getEngine().getUploadsService().createUpload(e.file).withUploaderInstanceIndex(this.instanceId).withControlId(this.control.getId()).withArchivePacking(this.isMultiple()).on("success",(function(){t.onChange()})))),this.onUploadNumberChanged()}else(function(e,t){return 0===t.files.length?e.Deferred((function(e){e.resolve(!0)})).promise():e.Deferred((function(e){t.files[0].cancel().then((function(){t.uploadsContainer.removeChild(t.files[0].getRootNode()),t.files.splice(0,1),t.onUploadNumberChanged(),e.resolve(!0)}))})).promise()})(O.a.getJQuery(),this).then((function(){var n=new P.a;t.files.push(n),n.withName(e.file.name).withFileUtils(t.fileUtils),n.updateAccessibilityAttributes(T.a.nextString,t.hasAccessibilityEnabled),t.uploadsContainer.appendChild(n.getRootNode()),n.withUpload(t.control.getForm().getEngine().getUploadsService().addToQOS(t.control.getForm().getEngine().getUploadsService().createUpload(e.file).withUploaderInstanceIndex(t.instanceId).withControlId(t.control.getId()).withArchivePacking(t.isMultiple()).on("success",(function(){t.onChange()})))),t.onUploadNumberChanged()}))}},{key:"removeUpload",value:function(e){for(var t=this,n=null,i=0,r=this.files.length;i<r;i++)if(this.files[i].getRootNode()===e){n=this.files[i];break}null!==n&&n.cancel().then((function(){t.uploadsContainer.removeChild(e),t.files.splice(t.files.indexOf(n),1),t.onUploadNumberChanged(),t.onChange()}))}},{key:"addFilesList",value:function(e){if(e.length){var t=[];if(!this.isMultiple()&&e.length>1)t.push("Only a single file is accepted!");else for(var n=0,i=e.length;n<i;n++)switch(!0){case null!==this.getMinUploadSizeInBytes()&&e[n].file.size<this.getMinUploadSizeInBytes():t.push(this.control.getForm().getEngine().getI18n().translateText("textdef_234",e[n].file.name,this.control.getForm().getEngine().getFileUtils().convertFileSizeToString(this.getMinUploadSizeInBytes()))||'File "'.concat(e[n].file.name,'" is too small, ')+"min accepted file size is ".concat(this.control.getForm().getEngine().getFileUtils().convertFileSizeToString(this.getMinUploadSizeInBytes())));break;case null!==this.getMaxUploadSizeInBytes()&&e[n].file.size>this.getMaxUploadSizeInBytes():t.push(this.control.getForm().getEngine().getI18n().translateText("textdef_226",e[n].file.name,this.control.getForm().getEngine().getFileUtils().convertFileSizeToString(this.getMaxUploadSizeInBytes()))||'File "'.concat(e[n].file.name,'" is too large, ')+"max accepted file size is ".concat(this.control.getForm().getEngine().getFileUtils().convertFileSizeToString(this.getMaxUploadSizeInBytes())));break;case!this.isFileNamePermitted(e[n].file.name):t.push(this.control.getForm().getEngine().getI18n().translateText("textdef_227")||'File "'.concat(e[n].file.name,'" is not allowed'))}if(t.length>0){if(t.length>3){var r="+ ".concat(t.length-3," more errors...");(t=t.slice(0,3)).push(r)}this.control.getForm().getEngine().getLoader().getUI().alert("Error",t.join("\n"))}else for(var a=0,o=e.length;a<o;a++)this.addFile(e[a])}}},{key:"handleDragEnter",value:function(){console.warn("drag enter")}},{key:"handleDragLeave",value:function(){console.warn("drag leave")}},{key:"extractFiles",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++)(""!==e[n].type||e[n].size)&&t.push({path:"",file:e[n]});return t}},{key:"handleDropEvent",value:function(e){this.dropFiles=[];var t=this,n=function e(n,i){if(n.isFile)n.file((function(e){t.dropFiles.push({path:i,file:e}),t.dropFilesThrottler()}));else if(n.isDirectory){n.createReader().readEntries((function(t){for(var r=0;r<t.length;r++)e(t[r],"".concat(i).concat(n.name,"/"))}))}},i=e.dataTransfer.items;if("undefined"!==typeof i)for(var r=0;r<i.length;r++){if(!i[r].webkitGetAsEntry)return;var a=i[r].webkitGetAsEntry();a&&n(a,"")}else t.addFilesList(t.extractFiles(e.dataTransfer.files))}},{key:"init",value:function(){!function(e,t){e.uploadInput.addEventListener("change",(function(t){e.addFilesList(e.extractFiles(e.uploadInput.files)),setTimeout((function(){e.uploadInput.value=null}),0)}),!0),t(e.uploadsContainer).on("click","> div[data-role=upload] > [data-role=button-remove], > div[data-role=download] > [data-role=button-remove]",(function(n){t(this).closest("[data-role=upload], [data-role=download]").each((function(){e.removeUpload(this)}))})),t(e.abortAllUploadsButton).on("click",(function(){e.abortAllFiles()})),e.uploadInput.addEventListener("dragenter",(function(){e.handleDragEnter()}),!0),e.uploadInput.addEventListener("dragleave",(function(){e.handleDragLeave()}),!0),e.uploadInput.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}),!0),e.uploadInput.addEventListener("drop",(function(t){e.handleDropEvent(t),t.preventDefault()}),!0),t(document).on({dragover:function(){return!1},drop:function(){return!1}}),t(e.uploadInput).on("focus",(function(){t(e.rootNode).attr("data-file-tab-focus-state","1")})).on("blur",(function(){t(e.rootNode).removeAttr("data-file-tab-focus-state")})),e.dropFilesThrottler=y.a.create((function(){e.addDroppedFiles()}),500)}(this,O.a.getJQuery())}},{key:"addDroppedFiles",value:function(){this.addFilesList(this.dropFiles),this.dropFiles=void 0}},{key:"isMultiple",value:function(){return!!this.multiple}},{key:"withMultiple",value:function(e){return this.multiple=!!e,this.multiple?(this.rootNode.setAttribute("data-is-multiple",""),this.uploadInput.setAttribute("multiple","")):(this.rootNode.removeAttribute("data-is-multiple"),this.uploadInput.removeAttribute("multiple")),this}},{key:"withMinUploadSizeInBytes",value:function(e){return this.minUploadSizeInBytes=e,this}},{key:"getMinUploadSizeInBytes",value:function(){return this.minUploadSizeInBytes}},{key:"withMaxUploadSizeInBytes",value:function(e){return this.maxUploadSizeInBytes=e,this}},{key:"withAllowedFileExtensions",value:function(e){return this.allowedExtensions=e&&e.length?e:null,this}},{key:"withForbiddenFileExtensions",value:function(e){return this.forbiddenExtensions=e&&e.length?e:null,this}},{key:"getMaxUploadSizeInBytes",value:function(){return this.maxUploadSizeInBytes}},{key:"onChange",value:function(){O.a.getJQuery()(this.rootNode).trigger("change")}},{key:"isFileNamePermitted",value:function(e){if(!e)return!1;if("string"!==typeof e)return!1;var t=((/\.([^\.]+)$/.exec(e)||[])[1]||"").toLowerCase();return""!==t&&(!(3>t.length&&"ai"!==t)&&(!(b.a.getInstance().getForbiddenUserFileExtensions().indexOf(t)>-1)&&(null!==this.allowedExtensions?this.allowedExtensions.indexOf(t)>-1:null===this.forbiddenExtensions||-1===this.forbiddenExtensions.indexOf(t))))}},{key:"withFileUtils",value:function(e){return this.fileUtils=e,this}},{key:"abortAllFiles",value:function(){return function(e,t){for(var n=[],i=0,r=t.files.length;i<r;i++)n.push(t.files[i].cancel());return e.when.apply(t,n).then((function(){for(t.files=[];t.uploadsContainer.firstChild;)t.uploadsContainer.removeChild(t.uploadsContainer.firstChild);t.onUploadNumberChanged(),t.onChange()}))}(O.a.getJQuery(),this)}},{key:"setDownloadInfo",value:function(e){for(var t=0,n=this.files.length;t<n;t++)if(this.files[t].getTransferType()===f.x.UPLOAD){this.uploadsContainer.removeChild(this.files[t].getRootNode()),this.files.slice(t,1);break}if(null!==e){for(var i=new R.a(this),r=0,a=this.files.length;r<a;r++)if(this.files[r].getDownloadURL()===e.url)return;this.files.push(i),i.withFileUtils(this.fileUtils).withName(e.name).withFileSize(e.size).withDownloadURL(e.url).withUrlLinkToDownload(e.url,this.control.getForm().getEngine().getLoader().getRules().getDatabase()).withProgress(100).withSubmissionId(this.control.getForm().getEngine().getLoader().getLoaderDependency(f.M.SUBMISSION_ID)).withUploaderInstanceIndex(this.instanceId).withSessionId(this.control.getForm().getEngine().getLoader().getLoaderDependency(f.M.SESSION_ID)).withUploadsService(this.control.getForm().getEngine().getUploadsService()),this.uploadsContainer.appendChild(i.getRootNode()),this.rootNode.setAttribute("data-is-download","")}else this.rootNode.removeAttribute("data-is-download");this.onUploadNumberChanged()}},{key:"getDownloadInfo",value:function(){for(var e=0,t=this.files.length;e<t;e++)if(this.files[e].getTransferType()===f.x.UPLOAD)return{url:this.files[e].getDownloadURL(),name:this.files[e].getName(),size:this.files[e].getSize()};return null}},{key:"withAllowDirectoryUpload",value:function(e){return e?""===E.a.meetsRequirements("* * * firefox *")?this.uploadInput.setAttribute("allowdirs",""):""!==E.a.meetsRequirements("android * * chrome *")&&this.uploadInput.setAttribute("webkitdirectory",""):""===E.a.meetsRequirements("* * * firefox *")?this.uploadInput.removeAttribute("allowdirs"):this.uploadInput.removeAttribute("webkitdirectory"),this}},{key:"getErrors",value:function(){for(var e,t=[],n={},i=0,r=this.files.length;i<r;i++)null!==(e=this.files[i].getError())&&void 0===n[e]&&(t.push({code:v.a.ERR_FILE_UPLOAD,message:e}),n[e]="1");return t}},{key:"updateAccessibilityAttributes",value:function(){var e=this.control.getHash();this.uploadOverlay.setAttribute("aria-labelledby","file-placeholder-".concat(e,"-acc")),this.placeholder.setAttribute("id","file-placeholder-".concat(e,"-acc"))}},{key:"clearFiles",value:function(){!function(e,t){t(e.uploadsContainer).find("[data-role=upload], [data-role=download]").each((function(){e.removeUpload(this)}))}(this,O.a.getJQuery())}}]),n}(I.a);m()(A,"MIN_NUMBER_OF_CONTROLS_IN_ORDER_TO_DISPLAY_THE_ABORT_ALL_DOWNLOADS_BUTTON",6),m()(A,"INSTANCE_ID",1)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(0),m=n.n(g),f=n(1);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var y=function(e){u()(n,e);var t=E(n);function n(e){var i;return r()(this,n),i=t.call(this),m()(l()(i),"downloadURL",void 0),m()(l()(i),"submissionId",void 0),m()(l()(i),"uploaderInstanceIndex",void 0),m()(l()(i),"sessionId",void 0),m()(l()(i),"uploadsService",void 0),m()(l()(i),"fileControl",void 0),i.fileControl=e,i.rootNode.setAttribute("data-role","download"),i}return o()(n,[{key:"withDownloadURL",value:function(e){return this.downloadURL=e,this}},{key:"withSubmissionId",value:function(e){return this.submissionId=e,this}},{key:"withUploaderInstanceIndex",value:function(e){return this.uploaderInstanceIndex=e,this}},{key:"withSessionId",value:function(e){return this.sessionId=e,this}},{key:"withUploadsService",value:function(e){return this.uploadsService=e,this}},{key:"getTransferType",value:function(){return f.x.DOWNLOAD}},{key:"getDownloadURL",value:function(){return this.downloadURL}},{key:"cancel",value:function(){var e=this;return this.uploadsService.removeSubmittedUpload(this.sessionId,this.submissionId,this.uploaderInstanceIndex).then((function(){e.fileControl.setDownloadInfo(null)}))}},{key:"getUploadStatus",value:function(){return f.tb.SUCCESS}},{key:"getHash",value:function(){return this.downloadURL&&(/fileid=([a-f\d]+)/i.exec(this.downloadURL)||[])[1]||null}}]),n}(n(161).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(0),m=n.n(g),f=n(23);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var y=function(e){u()(n,e);var t=E(n);function n(){var e;return r()(this,n),e=t.call(this,f.a.ELEMENT_TYPE_STAR_RATING),m()(l()(e),"value",0),m()(l()(e),"minValue",0),m()(l()(e),"maxValue",10),m()(l()(e),"stars",[]),m()(l()(e),"starShapeType","stars"),m()(l()(e),"hash",void 0),e.withMaxValue(e.maxValue),e.setValue(e.value),e.init(),e.rootNode.removeAttribute("tabindex"),e}return o()(n,[{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){if((e=~~e)<this.minValue)throw new Error("Illegal value: Expected values >= ".concat(this.minValue));if(e>this.maxValue)throw new Error("Illegal value: Expected values <= ".concat(this.maxValue));this.value=e;for(var t=0,n=this.stars.length;t<n;t++){t+1<=this.value?this.stars[t].setAttribute("data-is-checked","1"):this.stars[t].removeAttribute("data-is-checked");var i=this.rootNode.querySelector("span[id='starrating-".concat(this.hash,"-").concat(t,"']"));i&&(i.textContent="".concat(t+1," of ").concat(this.maxValue)),this.stars[t].removeAttribute("aria-label")}var r=this.rootNode.querySelector("span[id='starrating-".concat(this.hash,"-").concat(this.value-1,"']"));r&&(r.setAttribute("role","alert"),r.textContent="Selected ".concat(this.value," of ").concat(this.maxValue));var a=this.value-1;this.stars[a]&&this.stars[a].setAttribute("aria-label","Selected ".concat(this.value," of ").concat(this.maxValue))}},{key:"getMinValue",value:function(){return this.minValue}},{key:"withMinValue",value:function(e){if((e=~~e)<0)throw new Error("Invalid argument: Min value should be >= 0");if(e>this.maxValue)throw new Error("Invalid argument: Min value should not be greater than maxValue");return this.minValue=e,this}},{key:"getMaxValue",value:function(){return this.maxValue}},{key:"withHash",value:function(e){return this.hash=e,this}},{key:"withMaxValue",value:function(e){var t,n;if((e=~~e)<this.minValue)throw new Error("Invalid argument: Max value should be >= MinValue");for(this.maxValue=e,t=this.stars.length;t!==this.maxValue;)t>this.maxValue?(t--,this.rootNode.removeChild(this.stars[t]),this.stars.splice(t,1)):(t++,(n=document.createElement("div")).setAttribute("data-role","star"),n.setAttribute("data-star-index",String(t)),n.tabIndex=0,this.rootNode.appendChild(n),this.stars.push(n));return this.value>this.maxValue&&this.setValue(this.maxValue),this.onAccessibilitySettingsChanged(),this}},{key:"onAccessibilitySettingsChanged",value:function(){for(var e=0,t=this.stars.length;e<t;e++)if(this.hash){var n=document.createElement("span");n.setAttribute("id","starrating-".concat(this.hash,"-").concat(e)),n.appendChild(document.createTextNode("".concat(String(e+1)," of ").concat(this.maxValue))),n.style.display="none",this.stars[e].appendChild(n),this.stars[e].setAttribute("aria-labelledby","starrating-".concat(this.hash,"-").concat(e))}else this.stars[e].textContent=""}},{key:"init",value:function(){!function(e,t,n){e.rootNode.setAttribute("data-star-shape-type",e.starShapeType),Object.defineProperty(n,"value",{get:function(){return e.getValue()},set:function(t){e.setValue(t)}}),Object.defineProperty(n,"minValue",{get:function(){return e.getMinValue()},set:function(t){e.withMinValue(t)}}),Object.defineProperty(n,"maxValue",{get:function(){return e.getMaxValue()},set:function(t){e.withMaxValue(t)}}),Object.defineProperty(n,"starShapeType",{get:function(){return e.getStarShapeType()},set:function(t){e.withStarShapeType(t)}}),t(n).on("click","div[data-role=star]",(function(i){if(!e.isReadOnly()){var r=~~t(this).attr("data-star-index");e.setValue(r),t(n).trigger("input")}})),t(n).on("mouseover","div[data-role=star]",(function(t){if(!e.isReadOnly())for(var n=!0,i=0,r=e.stars.length;i<r;i++)n?e.stars[i].setAttribute("data-is-hover","1"):e.stars[i].removeAttribute("data-is-hover"),e.stars[i]===this&&(n=!1)})),t(n).on("mouseout","div[data-role=star]",(function(t){if(!e.isReadOnly())for(var n=0,i=e.stars.length;n<i;n++)e.stars[n].removeAttribute("data-is-hover")})).on("focus","div[data-role=star]",(function(){t(this).attr("data-rating-tab-focus-state","1")})).on("blur","div[data-role=star]",(function(){t(this).removeAttr("data-rating-tab-focus-state")}))}(this,f.a.getJQuery(),this.rootNode)}},{key:"withStarShapeType",value:function(e){switch(e){case"adults":case"children":case"stars":this.starShapeType=e;break;default:this.starShapeType="stars",console.warn("UIStarRating: Invalid star shape type: ".concat(JSON.stringify(e)))}return this.rootNode.setAttribute("data-star-shape-type",this.starShapeType),this}},{key:"getStarShapeType",value:function(){return this.starShapeType}}]),n}(n(64).a)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(0),m=n.n(g);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var E=function(e){u()(n,e);var t=f(n);function n(){var e;r()(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),m()(l()(e),"values",[{text:"Monday",i18n:"edt_text_monday"},{text:"Tuesday",i18n:"edt_text_tuesday"},{text:"Wednesday",i18n:"edt_text_wednesday"},{text:"Thursday",i18n:"edt_text_thursday"},{text:"Friday",i18n:"edt_text_friday"},{text:"Saturday",i18n:"edt_text_saturday"},{text:"Sunday",i18n:"edt_text_sunday"}]),e}return o()(n,[{key:"getName",value:function(){return{text:"Days of the Week",i18n:"edt_UI_dataset_days_of_week"}}}]),n}(n(85).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(0),m=n.n(g);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var E=function(e){u()(n,e);var t=f(n);function n(){var e;r()(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),m()(l()(e),"values",[{text:"Strongly Agree",i18n:"edt_UI_dataset_strongly_agree"},{text:"Agree",i18n:"edt_UI_dataset_agree"},{text:"Neutral",i18n:"edt_UI_dataset_neutral"},{text:"Disagree",i18n:"edt_UI_dataset_disagree"},{text:"Strongly Disagree",i18n:"edt_UI_dataset_strongly_disagree"}]),e}return o()(n,[{key:"getName",value:function(){return{text:"Degrees of Agreement",i18n:"edt_UI_dataset_degrees_of_agreement"}}}]),n}(n(85).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(0),m=n.n(g);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var E=function(e){u()(n,e);var t=f(n);function n(){var e;r()(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),m()(l()(e),"values",[{text:"Very Important",i18n:"edt_UI_dataset_very_important"},{text:"Important",i18n:"edt_UI_dataset_important"},{text:"Neutral",i18n:"edt_UI_dataset_neutral"},{text:"Somewhat Important",i18n:"edt_UI_dataset_somewhat_important"},{text:"Not Important",i18n:"edt_UI_dataset_not_important"}]),e}return o()(n,[{key:"getName",value:function(){return{text:"Degrees of Importance",i18n:"edt_UI_dataset_degrees_of_importance"}}}]),n}(n(85).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(0),m=n.n(g);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var E=function(e){u()(n,e);var t=f(n);function n(){var e;r()(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),m()(l()(e),"values",[{text:"Definitely",i18n:"edt_UI_dataset_definitely"},{text:"Probably",i18n:"edt_UI_dataset_probably"},{text:"Not Sure",i18n:"edt_UI_dataset_not_sure"},{text:"Probably Not",i18n:"edt_UI_dataset_probably_not"},{text:"Definitely Not",i18n:"edt_UI_dataset_definitely_not"}]),e}return o()(n,[{key:"getName",value:function(){return{text:"Degrees of Probability",i18n:"edt_UI_dataset_degrees_of_probability"}}}]),n}(n(85).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(0),m=n.n(g);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var E=function(e){u()(n,e);var t=f(n);function n(){var e;r()(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),m()(l()(e),"values",[{text:"Very Good",i18n:"edt_UI_dataset_very_good"},{text:"Good",i18n:"edt_UI_dataset_good"},{text:"Fair",i18n:"edt_UI_dataset_fair"},{text:"Poor",i18n:"edt_UI_dataset_poor"},{text:"Very Poor",i18n:"edt_UI_dataset_very_poor"}]),e}return o()(n,[{key:"getName",value:function(){return{text:"Degrees of Quality",i18n:"edt_UI_dataset_degrees_of_quality"}}}]),n}(n(85).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(0),m=n.n(g);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var E=function(e){u()(n,e);var t=f(n);function n(){var e;r()(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),m()(l()(e),"values",[{text:"Very Satisfied",i18n:"edt_UI_dataset_very_satisfied"},{text:"Satisfied",i18n:"edt_UI_dataset_satisfied"},{text:"Neutral",i18n:"edt_UI_dataset_neutral"},{text:"Unsatisfied",i18n:"edt_UI_dataset_unsatisfied"},{text:"Very Unsatisfied",i18n:"edt_UI_dataset_very_unsatisfied"}]),e}return o()(n,[{key:"getName",value:function(){return{text:"Degrees Of Satisfaction",i18n:"edt_UI_dataset_degrees_of_satisfaction"}}}]),n}(n(85).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(0),m=n.n(g);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var E=function(e){u()(n,e);var t=f(n);function n(){var e;r()(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),m()(l()(e),"values",[{text:"January",i18n:"edt_UI_dataset_january"},{text:"February",i18n:"edt_UI_dataset_february"},{text:"March",i18n:"edt_UI_dataset_march"},{text:"April",i18n:"edt_UI_dataset_april"},{text:"May",i18n:"edt_UI_dataset_may"},{text:"June",i18n:"edt_UI_dataset_june"},{text:"July",i18n:"edt_UI_dataset_july"},{text:"August",i18n:"edt_UI_dataset_august"},{text:"September",i18n:"edt_UI_dataset_september"},{text:"October",i18n:"edt_UI_dataset_october"},{text:"November",i18n:"edt_UI_dataset_november"},{text:"December",i18n:"edt_UI_dataset_december"}]),e}return o()(n,[{key:"getName",value:function(){return{text:"Months of the Year",i18n:"edt_UI_dataset_months_of_year"}}}]),n}(n(85).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(0),m=n.n(g),f=n(1),E=n(300),y=n(193);function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var v=function(e){u()(n,e);var t=T(n);function n(e,i,a){var o;return r()(this,n),o=t.call(this,e,5e3,2),m()(l()(o),"loader",void 0),m()(l()(o),"engine",void 0),m()(l()(o),"errorLogger",void 0),o.engine=i,o.loader=a,o.errorLogger=y.a.getInstance(),o}return o()(n,[{key:"run",value:function(){var e=this;window.addEventListener("beforeunload",this.beforeUnload);var t=this.loader.getAPI(),n=this.engine.getDocument();return n.trigger("editor-save-form-started"),function(t,n,i,r,a){return t.PUT_JSON("/v2/editor/form",n.serialize()).then((function(e){r.updateState(e),window.removeEventListener("beforeunload",a.beforeUnload),n.trigger("editor-save-form-finished",e),a.stop()})).fail((function(n,i){e.errorLogger.logError(t,"Error saving form: ".concat(null===i||void 0===i?void 0:i.responseText),f.t.ERROR,"SaveActivityFE"),window.CFTracker&&window.CFTracker.event("editor_save_form_error")})).always((function(){a.jq(i.getUICssSelector("saving-container")).removeClass("is-saving").text("")}))}(t,n,this.loader,this.engine,this)}},{key:"beforeUnload",value:function(e){var t="There was an error saving your form. Changes may not be saved.";return e.returnValue=t,t}},{key:"removeUnloadEventListener",value:function(){window.removeEventListener("beforeunload",this.beforeUnload)}}]),n}(E.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=function(){function e(t,n,i){r()(this,e),l()(this,"MAX_RETRY_PERIOD",18e4),l()(this,"retryPeriod",void 0),l()(this,"isStarted",!1),l()(this,"timeout",void 0),l()(this,"intervalMultiplicator",void 0),l()(this,"baseRetryPeriod",void 0),l()(this,"jq",void 0),this.jq=t,this.retryPeriod=this.baseRetryPeriod=n,this.intervalMultiplicator=i}return o()(e,[{key:"start",value:function(){this.isStarted||(this.isStarted=!0,this.onStart()),this.reset(),this.doWork()}},{key:"stop",value:function(){this.isStarted=!1,this.onStop()}},{key:"onStart",value:function(){}},{key:"onStop",value:function(){}},{key:"onError",value:function(e){}},{key:"doWork",value:function(){var e=this;this.isStarted&&this.jq.when(this.run()).fail((function(t){e.onError(t)})).always((function(){e.timeout=window.setTimeout((function(){e.doWork()}),e.retryPeriod),e.retryPeriod=e.retryPeriod>=e.MAX_RETRY_PERIOD?e.MAX_RETRY_PERIOD:e.retryPeriod*e.intervalMultiplicator}))}},{key:"reset",value:function(){this.retryPeriod=this.baseRetryPeriod,window.clearTimeout(this.timeout)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(5),r=n.n(i),a=n(6),o=n.n(a),s=n(0),l=n.n(s),c=n(134),u=function(){function e(t){r()(this,e),l()(this,"element",void 0),l()(this,"tooltip",void 0),this.element=t,this.tooltip=document.createElement("div"),this.tooltip.textContent=e.jq(this.element).attr("ui-title")||"",this.tooltip.className="ui-tooltip",document.body.appendChild(this.tooltip),this.anchorTooltip()}return o()(e,[{key:"destroy",value:function(){this.tooltip&&this.tooltip.parentNode&&this.tooltip.parentNode.removeChild(this.tooltip)}},{key:"anchorTooltip",value:function(){var t=this.element.getBoundingClientRect(),n=this.tooltip.getBoundingClientRect(),i=c.a.getAnchorPosition(t,n,e.distance,["center-top","center-bottom","center-right","center-left"]);this.tooltip.style.left="".concat(i.left,"px"),this.tooltip.style.top="".concat(i.top,"px"),this.tooltip.setAttribute("ui-anchor-mode",i.mode)}}],[{key:"init",value:function(t){e.jq=t,function(t){var n=t("body");n.on("mouseenter","[ui-title]",(function(){e.instance&&e.instance.destroy(),e.instance=new e(this)})),n.on("mouseleave","[ui-title]",(function(){e.instance&&(e.instance.destroy(),e.instance=null)})),setInterval((function(){if(e.instance)try{e.instance.anchorTooltip()}catch(t){}}),10)}(e.jq)}}]),e}();l()(u,"distance",14),l()(u,"jq",void 0),l()(u,"instance",void 0)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CSVTranslationsReader}));var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(4),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__),core_base_EventEmitter__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(29);function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(e);if(t){var r=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this,n)}}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var CSVTranslationsReader=function(e){_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(n,e);var t=_createSuper(n);function n(e){var i;return _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this,n),i=t.call(this),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(i),"fileInput",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(i),"parsedCSV",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(i),"rootNode",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(i),"ui",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(i),"caption",void 0),i.ui=e,i.rootNode=document.createElement("div"),i.rootNode.setAttribute("data-role","csv-translations-reader"),i.fileInput=document.createElement("input"),i.fileInput.setAttribute("type","file"),i.rootNode.appendChild(i.fileInput),i.caption=document.createElement("div"),i.caption.setAttribute("data-role","caption"),i.rootNode.appendChild(i.caption),i.initEvents(),i}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(n,[{key:"initEvents",value:function(){var e=this;this.fileInput.addEventListener("change",(function(t){e.fileInput.files.length&&e.processFile(e.fileInput.files[0])}),!0)}},{key:"getCaption",value:function(){return this.caption}},{key:"setCaptionText",value:function(e){return this.caption.textContent=String(e||""),this}},{key:"processFile",value:function(e){var t=this;try{if(!e.size)throw new Error("Empty file!");if(!e.name)throw new Error("Missing file name!");if(!/\.csv$/i.test(e.name))throw new Error("Wrong file extension!");var n=new FileReader;n.onload=function(e){var i=e.target.result;try{t.parseCSVFileContents(i)}catch(e){t.fileInput.value=null,t.parsedCSV=void 0,t.ui.alert("Error reading file",String(e).slice(7))}n=null,t.fileInput.value=null},n.readAsText(e,"UTF-8")}catch(i){this.fileInput.value=null,this.parsedCSV=void 0,this.ui.alert("Error reading file",String(i).slice(7))}}},{key:"parseCSVFileContents",value:function(e){try{this.parsedCSV=this.runUnitTestsOnParsedCSVAndReturnParsedResultIfUnitTestsAreFine(n.Papa.parse(e,{escapeChar:"\\",skipEmptyLines:!0}).data),this.trigger("load")}catch(t){this.parsedCSV=void 0,this.ui.alert("Error parsing CSV file",t.toString().slice(7))}}},{key:"isParsed",value:function(){return!!this.parsedCSV}},{key:"runUnitTestsOnParsedCSVAndReturnParsedResultIfUnitTestsAreFine",value:function(e){if(!e||!Array.isArray(e))throw new Error("Failed to properly parse CSV file!");var t=e[0];if(t.length<3)throw new Error("Expected header length should be greater or equal with 3 columns");if("Id"!==t[0])throw new Error('First header column title should be "Id"');if("Original"!==t[1])throw new Error('Second header column title should be "Original"');for(var n=t.length,i=1,r=e.length;i<r;i++){if(!Array.isArray(e[i]))throw new Error("Array expected!");if(e[1].length<n)throw new Error("Bad csv. Expected number of columns to be at least "+n+" at row "+(i+1));for(var a=0,o=e[i].length;a<o;a++)e[i][a]=e[i][a].replace(/\\([nrt])/g,(function(e){switch(arguments.length<=1?void 0:arguments[1]){case"n":return"\n";case"r":return"\r";case"t":return"\t";default:return""}}))}return e}},{key:"getLanguageColumnIndex",value:function(e){if(!this.isParsed())return null;for(var t=2,n=this.parsedCSV[0].length;t<n;t++)if(this.parsedCSV[0][t]===e)return t;return null}},{key:"getCSVLanguages",value:function(){if(!this.isParsed())return null;for(var e=[],t=2,n=this.parsedCSV[0].length;t<n;t++)e.push(this.parsedCSV[0][t]);return e.length?e:null}},{key:"getLanguagePack",value:function(e){var t={},n=this.getLanguageColumnIndex(e);if(null===n)return null;for(var i=1,r=this.parsedCSV.length;i<r;i++){var a=this.parsedCSV[i][1],o=this.parsedCSV[i][0],s=this.parsedCSV[i][n];s&&s!==a&&(t[o]=s)}return t}},{key:"getTranslatedTextByOriginalText",value:function(e,t){var n=this.getLanguageColumnIndex(t);if(null===n)return null;for(var i=1,r=this.parsedCSV.length;i<r;i++){var a=this.parsedCSV[i][1],o=this.parsedCSV[i][n];if(a===e)return o}return null}},{key:"getRootDOMNode",value:function(){return this.rootNode}}]),n}(core_base_EventEmitter__WEBPACK_IMPORTED_MODULE_7__.a);_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(CSVTranslationsReader,"Papa",void 0),eval(atob("LyohDQoJUGFwYSBQYXJzZQ0KCXY0LjMuNw0KCWh0dHBzOi8vZ2l0aHViLmNvbS9taG9sdC9QYXBhUGFyc2UNCglMaWNlbnNlOiBNSVQNCiovDQohZnVuY3Rpb24oYSxiKXsiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSxiKToib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWIoKTphLlBhcGE9YigpfSh0aGlzLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGEoYSxiKXtiPWJ8fHt9O3ZhciBjPWIuZHluYW1pY1R5cGluZ3x8ITE7aWYocihjKSYmKGIuZHluYW1pY1R5cGluZ0Z1bmN0aW9uPWMsYz17fSksYi5keW5hbWljVHlwaW5nPWMsYi53b3JrZXImJnouV09SS0VSU19TVVBQT1JURUQpe3ZhciBoPWsoKTtyZXR1cm4gaC51c2VyU3RlcD1iLnN0ZXAsaC51c2VyQ2h1bms9Yi5jaHVuayxoLnVzZXJDb21wbGV0ZT1iLmNvbXBsZXRlLGgudXNlckVycm9yPWIuZXJyb3IsYi5zdGVwPXIoYi5zdGVwKSxiLmNodW5rPXIoYi5jaHVuayksYi5jb21wbGV0ZT1yKGIuY29tcGxldGUpLGIuZXJyb3I9cihiLmVycm9yKSxkZWxldGUgYi53b3JrZXIsdm9pZCBoLnBvc3RNZXNzYWdlKHtpbnB1dDphLGNvbmZpZzpiLHdvcmtlcklkOmguaWR9KX12YXIgaT1udWxsO3JldHVybiJzdHJpbmciPT10eXBlb2YgYT9pPWIuZG93bmxvYWQ/bmV3IGQoYik6bmV3IGYoYik6YS5yZWFkYWJsZT09PSEwJiZyKGEucmVhZCkmJnIoYS5vbik/aT1uZXcgZyhiKToodC5GaWxlJiZhIGluc3RhbmNlb2YgRmlsZXx8YSBpbnN0YW5jZW9mIE9iamVjdCkmJihpPW5ldyBlKGIpKSxpLnN0cmVhbShhKX1mdW5jdGlvbiBiKGEsYil7ZnVuY3Rpb24gYygpeyJvYmplY3QiPT10eXBlb2YgYiYmKCJzdHJpbmciPT10eXBlb2YgYi5kZWxpbWl0ZXImJjE9PT1iLmRlbGltaXRlci5sZW5ndGgmJnouQkFEX0RFTElNSVRFUlMuaW5kZXhPZihiLmRlbGltaXRlcik9PT0tMSYmKGo9Yi5kZWxpbWl0ZXIpLCgiYm9vbGVhbiI9PXR5cGVvZiBiLnF1b3Rlc3x8Yi5xdW90ZXMgaW5zdGFuY2VvZiBBcnJheSkmJihoPWIucXVvdGVzKSwic3RyaW5nIj09dHlwZW9mIGIubmV3bGluZSYmKGs9Yi5uZXdsaW5lKSwic3RyaW5nIj09dHlwZW9mIGIucXVvdGVDaGFyJiYobD1iLnF1b3RlQ2hhciksImJvb2xlYW4iPT10eXBlb2YgYi5oZWFkZXImJihpPWIuaGVhZGVyKSl9ZnVuY3Rpb24gZChhKXtpZigib2JqZWN0IiE9dHlwZW9mIGEpcmV0dXJuW107dmFyIGI9W107Zm9yKHZhciBjIGluIGEpYi5wdXNoKGMpO3JldHVybiBifWZ1bmN0aW9uIGUoYSxiKXt2YXIgYz0iIjsic3RyaW5nIj09dHlwZW9mIGEmJihhPUpTT04ucGFyc2UoYSkpLCJzdHJpbmciPT10eXBlb2YgYiYmKGI9SlNPTi5wYXJzZShiKSk7dmFyIGQ9YSBpbnN0YW5jZW9mIEFycmF5JiZhLmxlbmd0aD4wLGU9IShiWzBdaW5zdGFuY2VvZiBBcnJheSk7aWYoZCYmaSl7Zm9yKHZhciBnPTA7ZzxhLmxlbmd0aDtnKyspZz4wJiYoYys9aiksYys9ZihhW2ddLGcpO2IubGVuZ3RoPjAmJihjKz1rKX1mb3IodmFyIGg9MDtoPGIubGVuZ3RoO2grKyl7Zm9yKHZhciBsPWQ/YS5sZW5ndGg6YltoXS5sZW5ndGgsbT0wO208bDttKyspe20+MCYmKGMrPWopO3ZhciBuPWQmJmU/YVttXTptO2MrPWYoYltoXVtuXSxtKX1oPGIubGVuZ3RoLTEmJihjKz1rKX1yZXR1cm4gY31mdW5jdGlvbiBmKGEsYil7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBhfHxudWxsPT09YSlyZXR1cm4iIjthPWEudG9TdHJpbmcoKS5yZXBsYWNlKG0sbCtsKTt2YXIgYz0iYm9vbGVhbiI9PXR5cGVvZiBoJiZofHxoIGluc3RhbmNlb2YgQXJyYXkmJmhbYl18fGcoYSx6LkJBRF9ERUxJTUlURVJTKXx8YS5pbmRleE9mKGopPi0xfHwiICI9PT1hLmNoYXJBdCgwKXx8IiAiPT09YS5jaGFyQXQoYS5sZW5ndGgtMSk7cmV0dXJuIGM/bCthK2w6YX1mdW5jdGlvbiBnKGEsYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspaWYoYS5pbmRleE9mKGJbY10pPi0xKXJldHVybiEwO3JldHVybiExfXZhciBoPSExLGk9ITAsaj0iLCIsaz0iXHJcbiIsbD0nIic7YygpO3ZhciBtPW5ldyBSZWdFeHAobCwiZyIpO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmKGE9SlNPTi5wYXJzZShhKSksYSBpbnN0YW5jZW9mIEFycmF5KXtpZighYS5sZW5ndGh8fGFbMF1pbnN0YW5jZW9mIEFycmF5KXJldHVybiBlKG51bGwsYSk7aWYoIm9iamVjdCI9PXR5cGVvZiBhWzBdKXJldHVybiBlKGQoYVswXSksYSl9ZWxzZSBpZigib2JqZWN0Ij09dHlwZW9mIGEpcmV0dXJuInN0cmluZyI9PXR5cGVvZiBhLmRhdGEmJihhLmRhdGE9SlNPTi5wYXJzZShhLmRhdGEpKSxhLmRhdGEgaW5zdGFuY2VvZiBBcnJheSYmKGEuZmllbGRzfHwoYS5maWVsZHM9YS5tZXRhJiZhLm1ldGEuZmllbGRzKSxhLmZpZWxkc3x8KGEuZmllbGRzPWEuZGF0YVswXWluc3RhbmNlb2YgQXJyYXk/YS5maWVsZHM6ZChhLmRhdGFbMF0pKSxhLmRhdGFbMF1pbnN0YW5jZW9mIEFycmF5fHwib2JqZWN0Ij09dHlwZW9mIGEuZGF0YVswXXx8KGEuZGF0YT1bYS5kYXRhXSkpLGUoYS5maWVsZHN8fFtdLGEuZGF0YXx8W10pO3Rocm93ImV4Y2VwdGlvbjogVW5hYmxlIHRvIHNlcmlhbGl6ZSB1bnJlY29nbml6ZWQgaW5wdXQifWZ1bmN0aW9uIGMoYSl7ZnVuY3Rpb24gYihhKXt2YXIgYj1wKGEpO2IuY2h1bmtTaXplPXBhcnNlSW50KGIuY2h1bmtTaXplKSxhLnN0ZXB8fGEuY2h1bmt8fChiLmNodW5rU2l6ZT1udWxsKSx0aGlzLl9oYW5kbGU9bmV3IGgoYiksdGhpcy5faGFuZGxlLnN0cmVhbWVyPXRoaXMsdGhpcy5fY29uZmlnPWJ9dGhpcy5faGFuZGxlPW51bGwsdGhpcy5fcGF1c2VkPSExLHRoaXMuX2ZpbmlzaGVkPSExLHRoaXMuX2lucHV0PW51bGwsdGhpcy5fYmFzZUluZGV4PTAsdGhpcy5fcGFydGlhbExpbmU9IiIsdGhpcy5fcm93Q291bnQ9MCx0aGlzLl9zdGFydD0wLHRoaXMuX25leHRDaHVuaz1udWxsLHRoaXMuaXNGaXJzdENodW5rPSEwLHRoaXMuX2NvbXBsZXRlUmVzdWx0cz17ZGF0YTpbXSxlcnJvcnM6W10sbWV0YTp7fX0sYi5jYWxsKHRoaXMsYSksdGhpcy5wYXJzZUNodW5rPWZ1bmN0aW9uKGEpe2lmKHRoaXMuaXNGaXJzdENodW5rJiZyKHRoaXMuX2NvbmZpZy5iZWZvcmVGaXJzdENodW5rKSl7dmFyIGI9dGhpcy5fY29uZmlnLmJlZm9yZUZpcnN0Q2h1bmsoYSk7dm9pZCAwIT09YiYmKGE9Yil9dGhpcy5pc0ZpcnN0Q2h1bms9ITE7dmFyIGM9dGhpcy5fcGFydGlhbExpbmUrYTt0aGlzLl9wYXJ0aWFsTGluZT0iIjt2YXIgZD10aGlzLl9oYW5kbGUucGFyc2UoYyx0aGlzLl9iYXNlSW5kZXgsIXRoaXMuX2ZpbmlzaGVkKTtpZighdGhpcy5faGFuZGxlLnBhdXNlZCgpJiYhdGhpcy5faGFuZGxlLmFib3J0ZWQoKSl7dmFyIGU9ZC5tZXRhLmN1cnNvcjt0aGlzLl9maW5pc2hlZHx8KHRoaXMuX3BhcnRpYWxMaW5lPWMuc3Vic3RyaW5nKGUtdGhpcy5fYmFzZUluZGV4KSx0aGlzLl9iYXNlSW5kZXg9ZSksZCYmZC5kYXRhJiYodGhpcy5fcm93Q291bnQrPWQuZGF0YS5sZW5ndGgpO3ZhciBmPXRoaXMuX2ZpbmlzaGVkfHx0aGlzLl9jb25maWcucHJldmlldyYmdGhpcy5fcm93Q291bnQ+PXRoaXMuX2NvbmZpZy5wcmV2aWV3O2lmKHYpdC5wb3N0TWVzc2FnZSh7cmVzdWx0czpkLHdvcmtlcklkOnouV09SS0VSX0lELGZpbmlzaGVkOmZ9KTtlbHNlIGlmKHIodGhpcy5fY29uZmlnLmNodW5rKSl7aWYodGhpcy5fY29uZmlnLmNodW5rKGQsdGhpcy5faGFuZGxlKSx0aGlzLl9wYXVzZWQpcmV0dXJuO2Q9dm9pZCAwLHRoaXMuX2NvbXBsZXRlUmVzdWx0cz12b2lkIDB9cmV0dXJuIHRoaXMuX2NvbmZpZy5zdGVwfHx0aGlzLl9jb25maWcuY2h1bmt8fCh0aGlzLl9jb21wbGV0ZVJlc3VsdHMuZGF0YT10aGlzLl9jb21wbGV0ZVJlc3VsdHMuZGF0YS5jb25jYXQoZC5kYXRhKSx0aGlzLl9jb21wbGV0ZVJlc3VsdHMuZXJyb3JzPXRoaXMuX2NvbXBsZXRlUmVzdWx0cy5lcnJvcnMuY29uY2F0KGQuZXJyb3JzKSx0aGlzLl9jb21wbGV0ZVJlc3VsdHMubWV0YT1kLm1ldGEpLCFmfHwhcih0aGlzLl9jb25maWcuY29tcGxldGUpfHxkJiZkLm1ldGEuYWJvcnRlZHx8dGhpcy5fY29uZmlnLmNvbXBsZXRlKHRoaXMuX2NvbXBsZXRlUmVzdWx0cyx0aGlzLl9pbnB1dCksZnx8ZCYmZC5tZXRhLnBhdXNlZHx8dGhpcy5fbmV4dENodW5rKCksZH19LHRoaXMuX3NlbmRFcnJvcj1mdW5jdGlvbihhKXtyKHRoaXMuX2NvbmZpZy5lcnJvcik/dGhpcy5fY29uZmlnLmVycm9yKGEpOnYmJnRoaXMuX2NvbmZpZy5lcnJvciYmdC5wb3N0TWVzc2FnZSh7d29ya2VySWQ6ei5XT1JLRVJfSUQsZXJyb3I6YSxmaW5pc2hlZDohMX0pfX1mdW5jdGlvbiBkKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9YS5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1SYW5nZSIpO3JldHVybiBudWxsPT09Yj8tMTpwYXJzZUludChiLnN1YnN0cihiLmxhc3RJbmRleE9mKCIvIikrMSkpfWE9YXx8e30sYS5jaHVua1NpemV8fChhLmNodW5rU2l6ZT16LlJlbW90ZUNodW5rU2l6ZSksYy5jYWxsKHRoaXMsYSk7dmFyIGQ7dT90aGlzLl9uZXh0Q2h1bms9ZnVuY3Rpb24oKXt0aGlzLl9yZWFkQ2h1bmsoKSx0aGlzLl9jaHVua0xvYWRlZCgpfTp0aGlzLl9uZXh0Q2h1bms9ZnVuY3Rpb24oKXt0aGlzLl9yZWFkQ2h1bmsoKX0sdGhpcy5zdHJlYW09ZnVuY3Rpb24oYSl7dGhpcy5faW5wdXQ9YSx0aGlzLl9uZXh0Q2h1bmsoKX0sdGhpcy5fcmVhZENodW5rPWZ1bmN0aW9uKCl7aWYodGhpcy5fZmluaXNoZWQpcmV0dXJuIHZvaWQgdGhpcy5fY2h1bmtMb2FkZWQoKTtpZihkPW5ldyBYTUxIdHRwUmVxdWVzdCx0aGlzLl9jb25maWcud2l0aENyZWRlbnRpYWxzJiYoZC53aXRoQ3JlZGVudGlhbHM9dGhpcy5fY29uZmlnLndpdGhDcmVkZW50aWFscyksdXx8KGQub25sb2FkPXEodGhpcy5fY2h1bmtMb2FkZWQsdGhpcyksZC5vbmVycm9yPXEodGhpcy5fY2h1bmtFcnJvcix0aGlzKSksZC5vcGVuKCJHRVQiLHRoaXMuX2lucHV0LCF1KSx0aGlzLl9jb25maWcuZG93bmxvYWRSZXF1ZXN0SGVhZGVycyl7dmFyIGE9dGhpcy5fY29uZmlnLmRvd25sb2FkUmVxdWVzdEhlYWRlcnM7Zm9yKHZhciBiIGluIGEpZC5zZXRSZXF1ZXN0SGVhZGVyKGIsYVtiXSl9aWYodGhpcy5fY29uZmlnLmNodW5rU2l6ZSl7dmFyIGM9dGhpcy5fc3RhcnQrdGhpcy5fY29uZmlnLmNodW5rU2l6ZS0xO2Quc2V0UmVxdWVzdEhlYWRlcigiUmFuZ2UiLCJieXRlcz0iK3RoaXMuX3N0YXJ0KyItIitjKSxkLnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLCJ3ZWJraXQtbm8tY2FjaGUiKX10cnl7ZC5zZW5kKCl9Y2F0Y2goYSl7dGhpcy5fY2h1bmtFcnJvcihhLm1lc3NhZ2UpfXUmJjA9PT1kLnN0YXR1cz90aGlzLl9jaHVua0Vycm9yKCk6dGhpcy5fc3RhcnQrPXRoaXMuX2NvbmZpZy5jaHVua1NpemV9LHRoaXMuX2NodW5rTG9hZGVkPWZ1bmN0aW9uKCl7aWYoND09ZC5yZWFkeVN0YXRlKXtpZihkLnN0YXR1czwyMDB8fGQuc3RhdHVzPj00MDApcmV0dXJuIHZvaWQgdGhpcy5fY2h1bmtFcnJvcigpO3RoaXMuX2ZpbmlzaGVkPSF0aGlzLl9jb25maWcuY2h1bmtTaXplfHx0aGlzLl9zdGFydD5iKGQpLHRoaXMucGFyc2VDaHVuayhkLnJlc3BvbnNlVGV4dCl9fSx0aGlzLl9jaHVua0Vycm9yPWZ1bmN0aW9uKGEpe3ZhciBiPWQuc3RhdHVzVGV4dHx8YTt0aGlzLl9zZW5kRXJyb3IoYil9fWZ1bmN0aW9uIGUoYSl7YT1hfHx7fSxhLmNodW5rU2l6ZXx8KGEuY2h1bmtTaXplPXouTG9jYWxDaHVua1NpemUpLGMuY2FsbCh0aGlzLGEpO3ZhciBiLGQsZT0idW5kZWZpbmVkIiE9dHlwZW9mIEZpbGVSZWFkZXI7dGhpcy5zdHJlYW09ZnVuY3Rpb24oYSl7dGhpcy5faW5wdXQ9YSxkPWEuc2xpY2V8fGEud2Via2l0U2xpY2V8fGEubW96U2xpY2UsZT8oYj1uZXcgRmlsZVJlYWRlcixiLm9ubG9hZD1xKHRoaXMuX2NodW5rTG9hZGVkLHRoaXMpLGIub25lcnJvcj1xKHRoaXMuX2NodW5rRXJyb3IsdGhpcykpOmI9bmV3IEZpbGVSZWFkZXJTeW5jLHRoaXMuX25leHRDaHVuaygpfSx0aGlzLl9uZXh0Q2h1bms9ZnVuY3Rpb24oKXt0aGlzLl9maW5pc2hlZHx8dGhpcy5fY29uZmlnLnByZXZpZXcmJiEodGhpcy5fcm93Q291bnQ8dGhpcy5fY29uZmlnLnByZXZpZXcpfHx0aGlzLl9yZWFkQ2h1bmsoKX0sdGhpcy5fcmVhZENodW5rPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5faW5wdXQ7aWYodGhpcy5fY29uZmlnLmNodW5rU2l6ZSl7dmFyIGM9TWF0aC5taW4odGhpcy5fc3RhcnQrdGhpcy5fY29uZmlnLmNodW5rU2l6ZSx0aGlzLl9pbnB1dC5zaXplKTthPWQuY2FsbChhLHRoaXMuX3N0YXJ0LGMpfXZhciBmPWIucmVhZEFzVGV4dChhLHRoaXMuX2NvbmZpZy5lbmNvZGluZyk7ZXx8dGhpcy5fY2h1bmtMb2FkZWQoe3RhcmdldDp7cmVzdWx0OmZ9fSl9LHRoaXMuX2NodW5rTG9hZGVkPWZ1bmN0aW9uKGEpe3RoaXMuX3N0YXJ0Kz10aGlzLl9jb25maWcuY2h1bmtTaXplLHRoaXMuX2ZpbmlzaGVkPSF0aGlzLl9jb25maWcuY2h1bmtTaXplfHx0aGlzLl9zdGFydD49dGhpcy5faW5wdXQuc2l6ZSx0aGlzLnBhcnNlQ2h1bmsoYS50YXJnZXQucmVzdWx0KX0sdGhpcy5fY2h1bmtFcnJvcj1mdW5jdGlvbigpe3RoaXMuX3NlbmRFcnJvcihiLmVycm9yLm1lc3NhZ2UpfX1mdW5jdGlvbiBmKGEpe2E9YXx8e30sYy5jYWxsKHRoaXMsYSk7dmFyIGIsZDt0aGlzLnN0cmVhbT1mdW5jdGlvbihhKXtyZXR1cm4gYj1hLGQ9YSx0aGlzLl9uZXh0Q2h1bmsoKX0sdGhpcy5fbmV4dENodW5rPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2ZpbmlzaGVkKXt2YXIgYT10aGlzLl9jb25maWcuY2h1bmtTaXplLGI9YT9kLnN1YnN0cigwLGEpOmQ7cmV0dXJuIGQ9YT9kLnN1YnN0cihhKToiIix0aGlzLl9maW5pc2hlZD0hZCx0aGlzLnBhcnNlQ2h1bmsoYil9fX1mdW5jdGlvbiBnKGEpe2E9YXx8e30sYy5jYWxsKHRoaXMsYSk7dmFyIGI9W10sZD0hMDt0aGlzLnN0cmVhbT1mdW5jdGlvbihhKXt0aGlzLl9pbnB1dD1hLHRoaXMuX2lucHV0Lm9uKCJkYXRhIix0aGlzLl9zdHJlYW1EYXRhKSx0aGlzLl9pbnB1dC5vbigiZW5kIix0aGlzLl9zdHJlYW1FbmQpLHRoaXMuX2lucHV0Lm9uKCJlcnJvciIsdGhpcy5fc3RyZWFtRXJyb3IpfSx0aGlzLl9uZXh0Q2h1bms9ZnVuY3Rpb24oKXtiLmxlbmd0aD90aGlzLnBhcnNlQ2h1bmsoYi5zaGlmdCgpKTpkPSEwfSx0aGlzLl9zdHJlYW1EYXRhPXEoZnVuY3Rpb24oYSl7dHJ5e2IucHVzaCgic3RyaW5nIj09dHlwZW9mIGE/YTphLnRvU3RyaW5nKHRoaXMuX2NvbmZpZy5lbmNvZGluZykpLGQmJihkPSExLHRoaXMucGFyc2VDaHVuayhiLnNoaWZ0KCkpKX1jYXRjaChhKXt0aGlzLl9zdHJlYW1FcnJvcihhKX19LHRoaXMpLHRoaXMuX3N0cmVhbUVycm9yPXEoZnVuY3Rpb24oYSl7dGhpcy5fc3RyZWFtQ2xlYW5VcCgpLHRoaXMuX3NlbmRFcnJvcihhLm1lc3NhZ2UpfSx0aGlzKSx0aGlzLl9zdHJlYW1FbmQ9cShmdW5jdGlvbigpe3RoaXMuX3N0cmVhbUNsZWFuVXAoKSx0aGlzLl9maW5pc2hlZD0hMCx0aGlzLl9zdHJlYW1EYXRhKCIiKX0sdGhpcyksdGhpcy5fc3RyZWFtQ2xlYW5VcD1xKGZ1bmN0aW9uKCl7dGhpcy5faW5wdXQucmVtb3ZlTGlzdGVuZXIoImRhdGEiLHRoaXMuX3N0cmVhbURhdGEpLHRoaXMuX2lucHV0LnJlbW92ZUxpc3RlbmVyKCJlbmQiLHRoaXMuX3N0cmVhbUVuZCksdGhpcy5faW5wdXQucmVtb3ZlTGlzdGVuZXIoImVycm9yIix0aGlzLl9zdHJlYW1FcnJvcil9LHRoaXMpfWZ1bmN0aW9uIGgoYSl7ZnVuY3Rpb24gYigpe2lmKHgmJm8mJihsKCJEZWxpbWl0ZXIiLCJVbmRldGVjdGFibGVEZWxpbWl0ZXIiLCJVbmFibGUgdG8gYXV0by1kZXRlY3QgZGVsaW1pdGluZyBjaGFyYWN0ZXI7IGRlZmF1bHRlZCB0byAnIit6LkRlZmF1bHREZWxpbWl0ZXIrIiciKSxvPSExKSxhLnNraXBFbXB0eUxpbmVzKWZvcih2YXIgYj0wO2I8eC5kYXRhLmxlbmd0aDtiKyspMT09PXguZGF0YVtiXS5sZW5ndGgmJiIiPT09eC5kYXRhW2JdWzBdJiZ4LmRhdGEuc3BsaWNlKGItLSwxKTtyZXR1cm4gYygpJiZkKCksZygpfWZ1bmN0aW9uIGMoKXtyZXR1cm4gYS5oZWFkZXImJjA9PT13Lmxlbmd0aH1mdW5jdGlvbiBkKCl7aWYoeCl7Zm9yKHZhciBhPTA7YygpJiZhPHguZGF0YS5sZW5ndGg7YSsrKWZvcih2YXIgYj0wO2I8eC5kYXRhW2FdLmxlbmd0aDtiKyspdy5wdXNoKHguZGF0YVthXVtiXSk7eC5kYXRhLnNwbGljZSgwLDEpfX1mdW5jdGlvbiBlKGIpe3JldHVybiBhLmR5bmFtaWNUeXBpbmdGdW5jdGlvbiYmdm9pZCAwPT09YS5keW5hbWljVHlwaW5nW2JdJiYoYS5keW5hbWljVHlwaW5nW2JdPWEuZHluYW1pY1R5cGluZ0Z1bmN0aW9uKGIpKSwoYS5keW5hbWljVHlwaW5nW2JdfHxhLmR5bmFtaWNUeXBpbmcpPT09ITB9ZnVuY3Rpb24gZihhLGIpe3JldHVybiBlKGEpPyJ0cnVlIj09PWJ8fCJUUlVFIj09PWJ8fCJmYWxzZSIhPT1iJiYiRkFMU0UiIT09YiYmayhiKTpifWZ1bmN0aW9uIGcoKXtpZigheHx8IWEuaGVhZGVyJiYhYS5keW5hbWljVHlwaW5nKXJldHVybiB4O2Zvcih2YXIgYj0wO2I8eC5kYXRhLmxlbmd0aDtiKyspe2Zvcih2YXIgYz1hLmhlYWRlcj97fTpbXSxkPTA7ZDx4LmRhdGFbYl0ubGVuZ3RoO2QrKyl7dmFyIGU9ZCxnPXguZGF0YVtiXVtkXTthLmhlYWRlciYmKGU9ZD49dy5sZW5ndGg/Il9fcGFyc2VkX2V4dHJhIjp3W2RdKSxnPWYoZSxnKSwiX19wYXJzZWRfZXh0cmEiPT09ZT8oY1tlXT1jW2VdfHxbXSxjW2VdLnB1c2goZykpOmNbZV09Z314LmRhdGFbYl09YyxhLmhlYWRlciYmKGQ+dy5sZW5ndGg/bCgiRmllbGRNaXNtYXRjaCIsIlRvb01hbnlGaWVsZHMiLCJUb28gbWFueSBmaWVsZHM6IGV4cGVjdGVkICIrdy5sZW5ndGgrIiBmaWVsZHMgYnV0IHBhcnNlZCAiK2QsYik6ZDx3Lmxlbmd0aCYmbCgiRmllbGRNaXNtYXRjaCIsIlRvb0Zld0ZpZWxkcyIsIlRvbyBmZXcgZmllbGRzOiBleHBlY3RlZCAiK3cubGVuZ3RoKyIgZmllbGRzIGJ1dCBwYXJzZWQgIitkLGIpKX1yZXR1cm4gYS5oZWFkZXImJngubWV0YSYmKHgubWV0YS5maWVsZHM9dykseH1mdW5jdGlvbiBoKGIsYyxkKXtmb3IodmFyIGUsZixnLGg9WyIsIiwiXHQiLCJ8IiwiOyIsei5SRUNPUkRfU0VQLHouVU5JVF9TRVBdLGo9MDtqPGgubGVuZ3RoO2orKyl7dmFyIGs9aFtqXSxsPTAsbT0wLG49MDtnPXZvaWQgMDtmb3IodmFyIG89bmV3IGkoe2RlbGltaXRlcjprLG5ld2xpbmU6YyxwcmV2aWV3OjEwfSkucGFyc2UoYikscD0wO3A8by5kYXRhLmxlbmd0aDtwKyspaWYoZCYmMT09PW8uZGF0YVtwXS5sZW5ndGgmJjA9PT1vLmRhdGFbcF1bMF0ubGVuZ3RoKW4rKztlbHNle3ZhciBxPW8uZGF0YVtwXS5sZW5ndGg7bSs9cSwidW5kZWZpbmVkIiE9dHlwZW9mIGc/cT4xJiYobCs9TWF0aC5hYnMocS1nKSxnPXEpOmc9cX1vLmRhdGEubGVuZ3RoPjAmJihtLz1vLmRhdGEubGVuZ3RoLW4pLCgidW5kZWZpbmVkIj09dHlwZW9mIGZ8fGw8ZikmJm0+MS45OSYmKGY9bCxlPWspfXJldHVybiBhLmRlbGltaXRlcj1lLHtzdWNjZXNzZnVsOiEhZSxiZXN0RGVsaW1pdGVyOmV9fWZ1bmN0aW9uIGooYSl7YT1hLnN1YnN0cigwLDEwNDg1NzYpO3ZhciBiPWEuc3BsaXQoIlxyIiksYz1hLnNwbGl0KCJcbiIpLGQ9Yy5sZW5ndGg+MSYmY1swXS5sZW5ndGg8YlswXS5sZW5ndGg7aWYoMT09PWIubGVuZ3RofHxkKXJldHVybiJcbiI7Zm9yKHZhciBlPTAsZj0wO2Y8Yi5sZW5ndGg7ZisrKSJcbiI9PT1iW2ZdWzBdJiZlKys7cmV0dXJuIGU+PWIubGVuZ3RoLzI/IlxyXG4iOiJcciJ9ZnVuY3Rpb24gayhhKXt2YXIgYj1xLnRlc3QoYSk7cmV0dXJuIGI/cGFyc2VGbG9hdChhKTphfWZ1bmN0aW9uIGwoYSxiLGMsZCl7eC5lcnJvcnMucHVzaCh7dHlwZTphLGNvZGU6YixtZXNzYWdlOmMscm93OmR9KX12YXIgbSxuLG8scT0vXlxzKi0/KFxkKlwuP1xkK3xcZCtcLj9cZCopKGVbLStdP1xkKyk/XHMqJC9pLHM9dGhpcyx0PTAsdT0hMSx2PSExLHc9W10seD17ZGF0YTpbXSxlcnJvcnM6W10sbWV0YTp7fX07aWYocihhLnN0ZXApKXt2YXIgeT1hLnN0ZXA7YS5zdGVwPWZ1bmN0aW9uKGQpe2lmKHg9ZCxjKCkpYigpO2Vsc2V7aWYoYigpLDA9PT14LmRhdGEubGVuZ3RoKXJldHVybjt0Kz1kLmRhdGEubGVuZ3RoLGEucHJldmlldyYmdD5hLnByZXZpZXc/bi5hYm9ydCgpOnkoeCxzKX19fXRoaXMucGFyc2U9ZnVuY3Rpb24oYyxkLGUpe2lmKGEubmV3bGluZXx8KGEubmV3bGluZT1qKGMpKSxvPSExLGEuZGVsaW1pdGVyKXIoYS5kZWxpbWl0ZXIpJiYoYS5kZWxpbWl0ZXI9YS5kZWxpbWl0ZXIoYykseC5tZXRhLmRlbGltaXRlcj1hLmRlbGltaXRlcik7ZWxzZXt2YXIgZj1oKGMsYS5uZXdsaW5lLGEuc2tpcEVtcHR5TGluZXMpO2Yuc3VjY2Vzc2Z1bD9hLmRlbGltaXRlcj1mLmJlc3REZWxpbWl0ZXI6KG89ITAsYS5kZWxpbWl0ZXI9ei5EZWZhdWx0RGVsaW1pdGVyKSx4Lm1ldGEuZGVsaW1pdGVyPWEuZGVsaW1pdGVyfXZhciBnPXAoYSk7cmV0dXJuIGEucHJldmlldyYmYS5oZWFkZXImJmcucHJldmlldysrLG09YyxuPW5ldyBpKGcpLHg9bi5wYXJzZShtLGQsZSksYigpLHU/e21ldGE6e3BhdXNlZDohMH19Onh8fHttZXRhOntwYXVzZWQ6ITF9fX0sdGhpcy5wYXVzZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdX0sdGhpcy5wYXVzZT1mdW5jdGlvbigpe3U9ITAsbi5hYm9ydCgpLG09bS5zdWJzdHIobi5nZXRDaGFySW5kZXgoKSl9LHRoaXMucmVzdW1lPWZ1bmN0aW9uKCl7dT0hMSxzLnN0cmVhbWVyLnBhcnNlQ2h1bmsobSl9LHRoaXMuYWJvcnRlZD1mdW5jdGlvbigpe3JldHVybiB2fSx0aGlzLmFib3J0PWZ1bmN0aW9uKCl7dj0hMCxuLmFib3J0KCkseC5tZXRhLmFib3J0ZWQ9ITAscihhLmNvbXBsZXRlKSYmYS5jb21wbGV0ZSh4KSxtPSIifX1mdW5jdGlvbiBpKGEpe2E9YXx8e307dmFyIGI9YS5kZWxpbWl0ZXIsYz1hLm5ld2xpbmUsZD1hLmNvbW1lbnRzLGU9YS5zdGVwLGY9YS5wcmV2aWV3LGc9YS5mYXN0TW9kZTtpZih2b2lkIDA9PT1hLnF1b3RlQ2hhcil2YXIgaD0nIic7ZWxzZSB2YXIgaD1hLnF1b3RlQ2hhcjtpZigoInN0cmluZyIhPXR5cGVvZiBifHx6LkJBRF9ERUxJTUlURVJTLmluZGV4T2YoYik+LTEpJiYoYj0iLCIpLGQ9PT1iKXRocm93IkNvbW1lbnQgY2hhcmFjdGVyIHNhbWUgYXMgZGVsaW1pdGVyIjtkPT09ITA/ZD0iIyI6KCJzdHJpbmciIT10eXBlb2YgZHx8ei5CQURfREVMSU1JVEVSUy5pbmRleE9mKGQpPi0xKSYmKGQ9ITEpLCJcbiIhPWMmJiJcciIhPWMmJiJcclxuIiE9YyYmKGM9IlxuIik7dmFyIGk9MCxqPSExO3RoaXMucGFyc2U9ZnVuY3Rpb24oYSxrLGwpe2Z1bmN0aW9uIG0oYSl7eC5wdXNoKGEpLEE9aX1mdW5jdGlvbiBuKGIpe3JldHVybiBsP3AoKTooInVuZGVmaW5lZCI9PXR5cGVvZiBiJiYoYj1hLnN1YnN0cihpKSksei5wdXNoKGIpLGk9cyxtKHopLHcmJnEoKSxwKCkpfWZ1bmN0aW9uIG8oYil7aT1iLG0oeiksej1bXSxFPWEuaW5kZXhPZihjLGkpfWZ1bmN0aW9uIHAoYSl7cmV0dXJue2RhdGE6eCxlcnJvcnM6eSxtZXRhOntkZWxpbWl0ZXI6YixsaW5lYnJlYWs6YyxhYm9ydGVkOmosdHJ1bmNhdGVkOiEhYSxjdXJzb3I6QSsoa3x8MCl9fX1mdW5jdGlvbiBxKCl7ZShwKCkpLHg9W10seT1bXX1pZigic3RyaW5nIiE9dHlwZW9mIGEpdGhyb3ciSW5wdXQgbXVzdCBiZSBhIHN0cmluZyI7dmFyIHM9YS5sZW5ndGgsdD1iLmxlbmd0aCx1PWMubGVuZ3RoLHY9ZC5sZW5ndGgsdz1yKGUpO2k9MDt2YXIgeD1bXSx5PVtdLHo9W10sQT0wO2lmKCFhKXJldHVybiBwKCk7aWYoZ3x8ZyE9PSExJiZhLmluZGV4T2YoaCk9PT0tMSl7Zm9yKHZhciBCPWEuc3BsaXQoYyksQz0wO0M8Qi5sZW5ndGg7QysrKXt2YXIgej1CW0NdO2lmKGkrPXoubGVuZ3RoLEMhPT1CLmxlbmd0aC0xKWkrPWMubGVuZ3RoO2Vsc2UgaWYobClyZXR1cm4gcCgpO2lmKCFkfHx6LnN1YnN0cigwLHYpIT09ZCl7aWYodyl7aWYoeD1bXSxtKHouc3BsaXQoYikpLHEoKSxqKXJldHVybiBwKCl9ZWxzZSBtKHouc3BsaXQoYikpO2lmKGYmJkM+PWYpcmV0dXJuIHg9eC5zbGljZSgwLGYpLHAoITApfX1yZXR1cm4gcCgpfWZvcih2YXIgRD1hLmluZGV4T2YoYixpKSxFPWEuaW5kZXhPZihjLGkpLEY9bmV3IFJlZ0V4cChoK2gsImciKTs7KWlmKGFbaV0hPT1oKWlmKGQmJjA9PT16Lmxlbmd0aCYmYS5zdWJzdHIoaSx2KT09PWQpe2lmKEU9PT0tMSlyZXR1cm4gcCgpO2k9RSt1LEU9YS5pbmRleE9mKGMsaSksRD1hLmluZGV4T2YoYixpKX1lbHNlIGlmKEQhPT0tMSYmKEQ8RXx8RT09PS0xKSl6LnB1c2goYS5zdWJzdHJpbmcoaSxEKSksaT1EK3QsRD1hLmluZGV4T2YoYixpKTtlbHNle2lmKEU9PT0tMSlicmVhaztpZih6LnB1c2goYS5zdWJzdHJpbmcoaSxFKSksbyhFK3UpLHcmJihxKCksaikpcmV0dXJuIHAoKTtpZihmJiZ4Lmxlbmd0aD49ZilyZXR1cm4gcCghMCl9ZWxzZXt2YXIgRz1pO2ZvcihpKys7Oyl7dmFyIEc9YS5pbmRleE9mKGgsRysxKTtpZihHPT09LTEpcmV0dXJuIGx8fHkucHVzaCh7dHlwZToiUXVvdGVzIixjb2RlOiJNaXNzaW5nUXVvdGVzIixtZXNzYWdlOiJRdW90ZWQgZmllbGQgdW50ZXJtaW5hdGVkIixyb3c6eC5sZW5ndGgsaW5kZXg6aX0pLG4oKTtpZihHPT09cy0xKXt2YXIgSD1hLnN1YnN0cmluZyhpLEcpLnJlcGxhY2UoRixoKTtyZXR1cm4gbihIKX1pZihhW0crMV0hPT1oKXtpZihhW0crMV09PT1iKXt6LnB1c2goYS5zdWJzdHJpbmcoaSxHKS5yZXBsYWNlKEYsaCkpLGk9RysxK3QsRD1hLmluZGV4T2YoYixpKSxFPWEuaW5kZXhPZihjLGkpO2JyZWFrfWlmKGEuc3Vic3RyKEcrMSx1KT09PWMpe2lmKHoucHVzaChhLnN1YnN0cmluZyhpLEcpLnJlcGxhY2UoRixoKSksbyhHKzErdSksRD1hLmluZGV4T2YoYixpKSx3JiYocSgpLGopKXJldHVybiBwKCk7aWYoZiYmeC5sZW5ndGg+PWYpcmV0dXJuIHAoITApO2JyZWFrfXkucHVzaCh7dHlwZToiUXVvdGVzIixjb2RlOiJJbnZhbGlkUXVvdGVzIixtZXNzYWdlOiJUcmFpbGluZyBxdW90ZSBvbiBxdW90ZWQgZmllbGQgaXMgbWFsZm9ybWVkIixyb3c6eC5sZW5ndGgsaW5kZXg6aX0pLEcrK31lbHNlIEcrK319cmV0dXJuIG4oKX0sdGhpcy5hYm9ydD1mdW5jdGlvbigpe2o9ITB9LHRoaXMuZ2V0Q2hhckluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIGl9fWZ1bmN0aW9uIGooKXt2YXIgYT1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0Iik7cmV0dXJuIGEubGVuZ3RoP2FbYS5sZW5ndGgtMV0uc3JjOiIifWZ1bmN0aW9uIGsoKXtpZighei5XT1JLRVJTX1NVUFBPUlRFRClyZXR1cm4hMTtpZighdyYmbnVsbD09PXouU0NSSVBUX1BBVEgpdGhyb3cgbmV3IEVycm9yKCJTY3JpcHQgcGF0aCBjYW5ub3QgYmUgZGV0ZXJtaW5lZCBhdXRvbWF0aWNhbGx5IHdoZW4gUGFwYSBQYXJzZSBpcyBsb2FkZWQgYXN5bmNocm9ub3VzbHkuIFlvdSBuZWVkIHRvIHNldCBQYXBhLlNDUklQVF9QQVRIIG1hbnVhbGx5LiIpO3ZhciBhPXouU0NSSVBUX1BBVEh8fHM7YSs9KGEuaW5kZXhPZigiPyIpIT09LTE/IiYiOiI/IikrInBhcGF3b3JrZXIiO3ZhciBiPW5ldyB0LldvcmtlcihhKTtyZXR1cm4gYi5vbm1lc3NhZ2U9bCxiLmlkPXkrKyx4W2IuaWRdPWIsYn1mdW5jdGlvbiBsKGEpe3ZhciBiPWEuZGF0YSxjPXhbYi53b3JrZXJJZF0sZD0hMTtpZihiLmVycm9yKWMudXNlckVycm9yKGIuZXJyb3IsYi5maWxlKTtlbHNlIGlmKGIucmVzdWx0cyYmYi5yZXN1bHRzLmRhdGEpe3ZhciBlPWZ1bmN0aW9uKCl7ZD0hMCxtKGIud29ya2VySWQse2RhdGE6W10sZXJyb3JzOltdLG1ldGE6e2Fib3J0ZWQ6ITB9fSl9LGY9e2Fib3J0OmUscGF1c2U6bixyZXN1bWU6bn07aWYocihjLnVzZXJTdGVwKSl7Zm9yKHZhciBnPTA7ZzxiLnJlc3VsdHMuZGF0YS5sZW5ndGgmJihjLnVzZXJTdGVwKHtkYXRhOltiLnJlc3VsdHMuZGF0YVtnXV0sZXJyb3JzOmIucmVzdWx0cy5lcnJvcnMsbWV0YTpiLnJlc3VsdHMubWV0YX0sZiksIWQpO2crKyk7ZGVsZXRlIGIucmVzdWx0c31lbHNlIHIoYy51c2VyQ2h1bmspJiYoYy51c2VyQ2h1bmsoYi5yZXN1bHRzLGYsYi5maWxlKSxkZWxldGUgYi5yZXN1bHRzKX1iLmZpbmlzaGVkJiYhZCYmbShiLndvcmtlcklkLGIucmVzdWx0cyl9ZnVuY3Rpb24gbShhLGIpe3ZhciBjPXhbYV07cihjLnVzZXJDb21wbGV0ZSkmJmMudXNlckNvbXBsZXRlKGIpLGMudGVybWluYXRlKCksZGVsZXRlIHhbYV19ZnVuY3Rpb24gbigpe3Rocm93Ik5vdCBpbXBsZW1lbnRlZC4ifWZ1bmN0aW9uIG8oYSl7dmFyIGI9YS5kYXRhO2lmKCJ1bmRlZmluZWQiPT10eXBlb2Ygei5XT1JLRVJfSUQmJmImJih6LldPUktFUl9JRD1iLndvcmtlcklkKSwic3RyaW5nIj09dHlwZW9mIGIuaW5wdXQpdC5wb3N0TWVzc2FnZSh7d29ya2VySWQ6ei5XT1JLRVJfSUQscmVzdWx0czp6LnBhcnNlKGIuaW5wdXQsYi5jb25maWcpLGZpbmlzaGVkOiEwfSk7ZWxzZSBpZih0LkZpbGUmJmIuaW5wdXQgaW5zdGFuY2VvZiBGaWxlfHxiLmlucHV0IGluc3RhbmNlb2YgT2JqZWN0KXt2YXIgYz16LnBhcnNlKGIuaW5wdXQsYi5jb25maWcpO2MmJnQucG9zdE1lc3NhZ2Uoe3dvcmtlcklkOnouV09SS0VSX0lELHJlc3VsdHM6YyxmaW5pc2hlZDohMH0pfX1mdW5jdGlvbiBwKGEpe2lmKCJvYmplY3QiIT10eXBlb2YgYSlyZXR1cm4gYTt2YXIgYj1hIGluc3RhbmNlb2YgQXJyYXk/W106e307Zm9yKHZhciBjIGluIGEpYltjXT1wKGFbY10pO3JldHVybiBifWZ1bmN0aW9uIHEoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXthLmFwcGx5KGIsYXJndW1lbnRzKX19ZnVuY3Rpb24gcihhKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYX12YXIgcyx0PWZ1bmN0aW9uKCl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgdD90Ont9fSgpLHU9IXQuZG9jdW1lbnQmJiEhdC5wb3N0TWVzc2FnZSx2PXUmJi8oXD98JilwYXBhd29ya2VyKD18JnwkKS8udGVzdCh0LmxvY2F0aW9uLnNlYXJjaCksdz0hMSx4PXt9LHk9MCx6PXt9O2lmKHoucGFyc2U9YSx6LnVucGFyc2U9Yix6LlJFQ09SRF9TRVA9U3RyaW5nLmZyb21DaGFyQ29kZSgzMCksei5VTklUX1NFUD1TdHJpbmcuZnJvbUNoYXJDb2RlKDMxKSx6LkJZVEVfT1JERVJfTUFSSz0iXHVmZWZmIix6LkJBRF9ERUxJTUlURVJTPVsiXHIiLCJcbiIsJyInLHouQllURV9PUkRFUl9NQVJLXSx6LldPUktFUlNfU1VQUE9SVEVEPSF1JiYhIXQuV29ya2VyLHouU0NSSVBUX1BBVEg9bnVsbCx6LkxvY2FsQ2h1bmtTaXplPTEwNDg1NzYwLHouUmVtb3RlQ2h1bmtTaXplPTUyNDI4ODAsei5EZWZhdWx0RGVsaW1pdGVyPSIsIix6LlBhcnNlcj1pLHouUGFyc2VySGFuZGxlPWgsei5OZXR3b3JrU3RyZWFtZXI9ZCx6LkZpbGVTdHJlYW1lcj1lLHouU3RyaW5nU3RyZWFtZXI9Zix6LlJlYWRhYmxlU3RyZWFtU3RyZWFtZXI9Zyx0LmpRdWVyeSl7dmFyIEE9dC5qUXVlcnk7QS5mbi5wYXJzZT1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7aWYoMD09PWYubGVuZ3RoKXJldHVybiB2b2lkKHIoYS5jb21wbGV0ZSkmJmEuY29tcGxldGUoKSk7dmFyIGI9ZlswXTtpZihyKGEuYmVmb3JlKSl7dmFyIGU9YS5iZWZvcmUoYi5maWxlLGIuaW5wdXRFbGVtKTtpZigib2JqZWN0Ij09dHlwZW9mIGUpe2lmKCJhYm9ydCI9PT1lLmFjdGlvbilyZXR1cm4gdm9pZCBjKCJBYm9ydEVycm9yIixiLmZpbGUsYi5pbnB1dEVsZW0sZS5yZWFzb24pO2lmKCJza2lwIj09PWUuYWN0aW9uKXJldHVybiB2b2lkIGQoKTsib2JqZWN0Ij09dHlwZW9mIGUuY29uZmlnJiYoYi5pbnN0YW5jZUNvbmZpZz1BLmV4dGVuZChiLmluc3RhbmNlQ29uZmlnLGUuY29uZmlnKSl9ZWxzZSBpZigic2tpcCI9PT1lKXJldHVybiB2b2lkIGQoKX12YXIgZz1iLmluc3RhbmNlQ29uZmlnLmNvbXBsZXRlO2IuaW5zdGFuY2VDb25maWcuY29tcGxldGU9ZnVuY3Rpb24oYSl7cihnKSYmZyhhLGIuZmlsZSxiLmlucHV0RWxlbSksZCgpfSx6LnBhcnNlKGIuZmlsZSxiLmluc3RhbmNlQ29uZmlnKX1mdW5jdGlvbiBjKGIsYyxkLGUpe3IoYS5lcnJvcikmJmEuZXJyb3Ioe25hbWU6Yn0sYyxkLGUpfWZ1bmN0aW9uIGQoKXtmLnNwbGljZSgwLDEpLGIoKX12YXIgZT1hLmNvbmZpZ3x8e30sZj1bXTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPSJJTlBVVCI9PT1BKHRoaXMpLnByb3AoInRhZ05hbWUiKS50b1VwcGVyQ2FzZSgpJiYiZmlsZSI9PT1BKHRoaXMpLmF0dHIoInR5cGUiKS50b0xvd2VyQ2FzZSgpJiZ0LkZpbGVSZWFkZXI7aWYoIWJ8fCF0aGlzLmZpbGVzfHwwPT09dGhpcy5maWxlcy5sZW5ndGgpcmV0dXJuITA7Zm9yKHZhciBjPTA7Yzx0aGlzLmZpbGVzLmxlbmd0aDtjKyspZi5wdXNoKHtmaWxlOnRoaXMuZmlsZXNbY10saW5wdXRFbGVtOnRoaXMsaW5zdGFuY2VDb25maWc6QS5leHRlbmQoe30sZSl9KX0pLGIoKSx0aGlzfX1yZXR1cm4gdj90Lm9ubWVzc2FnZT1vOnouV09SS0VSU19TVVBQT1JURUQmJihzPWooKSxkb2N1bWVudC5ib2R5P2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7dz0hMH0sITApOnc9ITApLGQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWQsZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGYucHJvdG90eXBlKSxmLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1mLGcucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGcucHJvdG90eXBlLmNvbnN0cnVjdG9yPWcsen0pOw==")),CSVTranslationsReader.Papa=window.Papa,delete window.Papa},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i,r=n(5),a=n.n(r),o=n(6),s=n.n(o),l=n(0),c=n.n(l),u=n(14),d=n(141),p=n(34),h=n(9),_=n(47),g=n(13),m=n(28),f=n(302),E=n(218);!function(e){e.FORM_FIELD="field",e.FORM_FIELD_INSTRUCTION="instruction",e.EMAIL_NOTIFICATION="email_notification",e.SYSTEM_MESSAGE="system_message",e.PAYMENT_MESSAGE="payment_message"}(i||(i={}));var y=function(){function e(t,n,i,r,o,s,l,u){a()(this,e),c()(this,"jq",void 0),c()(this,"ui",void 0),c()(this,"resourceManager",void 0),c()(this,"api",void 0),c()(this,"loader",void 0),c()(this,"btnAddTranslationDOMNode",void 0),c()(this,"languagesContainerDOMNode",void 0),c()(this,"formTranslationsService",void 0),c()(this,"userService",void 0),this.btnAddTranslationDOMNode=t,this.languagesContainerDOMNode=n,this.formTranslationsService=i,this.jq=r,this.ui=o,this.resourceManager=s,this.api=l,this.loader=u,this.userService=_.a.getInstance(),this.init()}return s()(e,[{key:"updateLanguagesList",value:function(){if(this.languagesContainerDOMNode){for(;this.languagesContainerDOMNode.firstChild;)this.languagesContainerDOMNode.removeChild(this.languagesContainerDOMNode.firstChild);var e=this.formTranslationsService.enumerateAvailableFormLanguages().slice(0),t=e.length;e.filter((function(e){return!(!e.getNativeName()&&!e.getName())})).sort((function(e,t){var n=(e.getNativeName()||e.getName()).toLowerCase(),i=(t.getNativeName()||e.getName()).toLowerCase();return n===i?0:n<i?-1:1}));for(var n=0;n<t;n++)this.languagesContainerDOMNode.appendChild(this.createLanguageButton(e[n],t))}}},{key:"createLanguageButton",value:function(e,t){var n=document.createElement("div"),i=document.createElement("span"),r=t>1,a=!r||!e.isDefault();n.setAttribute("data-role","language"),n.setAttribute("data-code-3",e.getCode3()),n.setAttribute("data-code-2",String(e.getCode2()||"")),i.setAttribute("data-role","language-name"),i.textContent=e.getNativeName(),n.appendChild(i);var o,s=document.createElement("div");if(s.setAttribute("data-role","container"),r){(o=document.createElement("div")).setAttribute("data-role","command"),o.setAttribute("data-command","set-default");var l=document.createElement("input");l.setAttribute("type","radio"),l.setAttribute("name","default-language-lkjkashd");var c=document.createElement("label");e.isDefault()?(l.checked=!0,n.setAttribute("data-is-default",""),o.title="Default language"):o.title="Make default",c.appendChild(l),c.appendChild(document.createElement("i")),o.appendChild(c),s.appendChild(o),n.setAttribute("data-has-default","")}return(o=document.createElement("div")).setAttribute("data-role","command"),o.setAttribute("data-command","edit"),o.innerHTML='<span class="i123-editicon"></span>',o.title="Customize",s.appendChild(o),n.setAttribute("data-has-edit",""),a&&((o=document.createElement("div")).setAttribute("data-role","command"),o.setAttribute("data-command","delete"),o.innerHTML='<span class="i123-close"></span>',o.title="Remove",s.appendChild(o),n.setAttribute("data-has-delete","")),n.appendChild(s),n}},{key:"init",value:function(){var e=this;this.updateLanguagesList(),function(t,n,i){t(e.btnAddTranslationDOMNode).on("click",(function(t){if(!e.formTranslationsService.enumerateAvailableFormLanguages().length||e.userService.canAddNewTranslation()){var i=1==e.formTranslationsService.enumerateAvailableFormLanguages().length;e.addNewFormTranslation().then((function(t){n.POST("/v2/language/".concat(t.code3,"/").concat(e.loader.getFormId())).then((function(){var n,r=new E.a(e.formTranslationsService,t.code3,t.code2,!1);(e.formTranslationsService.addLanguage(r),e.updateLanguagesList(),i)&&(null===(n=CFTracker)||void 0===n||n.event("translations_multi_language_enabled"),console.log("track :: translations_multi_language_enabled"))})).fail((function(){e.ui.alert("Failed to add translation","Our backend encountered an error while trying to add your new language pack. Please try again later. If problem persist, contact our support team!")}))}))}else e.loader.getCommandDispatcher().triggerFeatureModal(u.a.ADD_FORM_LANGUAGE)})),t(e.languagesContainerDOMNode).on("click","input[type=radio]",(function(e){for(var r=t(this).closest("[data-role=language]").attr("data-code-3"),a=0,o=i.formTranslationsService.enumerateAvailableFormLanguages(),s=o.length;a<s;a++)o[a].setDefault(o[a].getCode3()===r);i.updateLanguagesList(),n.POST("/v2/language/".concat(r,"/").concat(i.loader.getFormId(),"/default")).fail((function(e){i.ui.alert("Failed to set form default language!","There was an error encountered while trying to save your default form language. Please retry. If the problem persist, please contact our support team!")}))})).on("click","[data-role=command][data-command=delete]",(function(e){var n=t(this).closest("[data-role=language]").attr("data-code-3"),r=i.formTranslationsService.getLanguageByCode(n);if(r){var a=r.getName()===r.getNativeName()?"":" (".concat(r.getNativeName(),")");i.ui.prompt("Delete form translation","Are you sure you want to delete the ".concat(r.getName()).concat(a," translations from form? Operation cannot be reverted!"),(function(){i.api.DELETE("/v2/language/".concat(r.getCode3(),"/").concat(i.loader.getFormId())).then((function(){var e;i.formTranslationsService.removeLanguage(r),i.updateLanguagesList(),null===(e=CFTracker)||void 0===e||e.event("translations_language_deleted"),console.log("tracker :: translations_language_deleted")})).fail((function(){i.ui.alert("Error removing translation!","There was an error while deleting the form translation from form. Please retry. If the problem persist, please contact our support team")}))}))}})).on("click","[data-role=command][data-command=edit]",(function(e){var n,r=t(this).closest("[data-role=language]").attr("data-code-3"),a=i.formTranslationsService.getLanguageByCode(r);a&&(null===(n=CFTracker)||void 0===n||n.event("translations_language_customized"),console.log("tracker :: translations_language_customized"),i.editFormLanguagePack(a))}))}(this.jq,this.api,this)}},{key:"addNewFormTranslation",value:function(){var e=this;return function(t){return t.Deferred((function(n){for(var i=e.formTranslationsService.enumeratePlatformSupportedLanguages().slice(0),r=e.formTranslationsService.enumerateAvailableFormLanguages(),a=0,o=r.length;a<o;a++)for(var s=0,l=i.length;s<l;s++)if(i[s].code3===r[a].getCode3()){i.splice(s,1);break}i.sort((function(e,t){var n=e.name.toLowerCase(),i=t.name.toLowerCase();return n===i?0:n<i?-1:1})),e.resourceManager.get("/modules/Typescript/Form/resources/translations-add-language-dialog.html").then((function(r){var a=new m.a(r),o={languages:i},s=null,l=e.ui.createDialog("Add new language",[{type:h.f.OK,callback:function(){if(null!==s)for(var e=0,t=i.length;e<t;e++)if(i[e].code3===s)return l.close(),void n.resolve(g.a.clone(i[e]))}},{type:h.f.CANCEL,callback:function(){l.close(),n.reject(new Error("User canceled operation"))}}],{onCloseButtonClick:function(){l.close(),n.reject(new Error("User canceled operation"))},height:"450px",width:"468px"});l.dialog.setAttribute("data-dialog-role","add-form-translation"),l.body.innerHTML=a.parse(o),e.loader.getCommandDispatcher().addPerfectScrollbar(t(l.body).find("[data-role=placeholder]").get(0)),t(l.body).on("input","[data-role=filter-languages]",(function(){var e=this.value.replace(/(^[\s]+|[\s]+$)/g,"").toLowerCase();t(l.body).find("table > tbody > tr").each((function(){""===e||this.textContent.toLowerCase().indexOf(e)>-1||t(this).hasClass("selected")?this.style.display="":this.style.display="none"})),t(l.body).find("[data-role=placeholder]").each((function(){this.scrollTop=0}))})).on("click","table tbody > tr",(function(){s=this.getAttribute("data-code-3");for(var e=this.parentNode.rows,n=0,i=e.length;n<i;n++)e[n]!==this&&t(e[n]).removeClass("selected");t(this).addClass("selected"),t(l.dialog).addClass("ok-enabled")}))})).fail((function(t){e.ui.alert("Failed to load resource","Failed to load add translations language dialog. Please retry. If the problem persist, contact our support team",(function(){n.reject(new Error("System error"))}))}))})).promise()}(this.jq)}},{key:"getTranslationKeyType",value:function(t){var n;switch(!0){case/^page_[\d]+_label$/.test(t):case/^control_label_[\d]+$/.test(t):case/^control_placeholder_[\d]+$/.test(t):case/^control_label_[\d]+_choice_[\d]+$/.test(t):case/^likert_headline_[\d]+$/.test(t):case/^(Headline|SendButton)$/.test(t):case/^textdef_(201|136)$/.test(t):return i.FORM_FIELD;case/^(control|likert)_instructions_[\d]+$/.test(t):return i.FORM_FIELD_INSTRUCTION;case/^terms_of_service_option_label_[\d]+$/.test(t):case/^terms_of_service_html_markup_[\d]+$/.test(t):return i.FORM_FIELD;case!!(n=/^textdef_([\d]+)$/.exec(t)):var r=parseInt(n[1]);switch(!0){case e.PAYMENT_TEXTDEF_IDS.indexOf(r)>-1:return i.PAYMENT_MESSAGE;case e.EMAIL_NOTIFICATION_TEXTDEF_IDS.indexOf(r)>-1:return i.EMAIL_NOTIFICATION;case e.SYSTEM_MESSAGES_TEXTDEF_IDS.indexOf(r)>-1:default:return i.SYSTEM_MESSAGE}default:return null}}},{key:"isIndentedTranslationKey",value:function(e){return/(^control_label_[\d]+_choice_[\d]+$)|(^control_placeholder_[\d]+$)/.test(e)}},{key:"createEditorTranslationsModel",value:function(e,t){for(var n={},r={},a=this.loader.getEngine().getDocument().enumerateTranslations().concat(this.loader.enumeratePaymentSummaryTranslations()),o=0,s=a.length;o<s;o++)if(!a[o].hidden){var l=this.getTranslationKeyType(a[o].key);if(null===l)continue;n[l]=n[l]||[],n[l].push({key:a[o].key,original:a[o].sourceText,translated:a[o].sourceText!==(e[a[o].key]||"")&&this.encodeNewLine(e[a[o].key])||"",indent:this.isIndentedTranslationKey(a[o].key)}),r[a[o].key]=!0}for(var c in e)if(e.hasOwnProperty(c)&&!0!==r[c]){var u=this.getTranslationKeyType(c);if(null!==u){n[u]=n[u]||[];var d=t[c]||"";""!==d&&n[u].push({key:c,original:d,translated:e[c]!==d?e[c]:"",indent:!1})}}var p={groups:[]};return n[i.FORM_FIELD]&&p.groups.push({name:"Form Fields",translations:n[i.FORM_FIELD]}),n[i.FORM_FIELD_INSTRUCTION]&&p.groups.push({name:"Form fields instructions",translations:n[i.FORM_FIELD_INSTRUCTION]}),n[i.EMAIL_NOTIFICATION]&&p.groups.push({name:"Email notification",translations:n[i.EMAIL_NOTIFICATION]}),n[i.PAYMENT_MESSAGE]&&p.groups.push({name:"Payment messages",translations:n[i.PAYMENT_MESSAGE]}),n[i.SYSTEM_MESSAGE]&&p.groups.push({name:"System messages",translations:n[i.SYSTEM_MESSAGE]}),p}},{key:"encodeNewLine",value:function(e){return e?e.replace(/[\n]+/g,"%NEW_LINE%"):""}},{key:"decodeNewLine",value:function(e){return e?e.replace(/%NEW_LINE%/g,"\n"):""}},{key:"editFormLanguagePack",value:function(e){var t,n,i=this,r=this.ui.createDialog(e.getNativeName(),[{type:h.f.SAVE,callback:function(){i.api.PUT_JSON("/v2/language/".concat(e.getCode3(),"/").concat(i.loader.getFormId()),i.collectUserEditedTranslations(r.body,n)).then((function(){var e;r.close(),null===(e=CFTracker)||void 0===e||e.event("translations_language_customized_save"),console.log("tracker :: translations_language_customized_save")})).fail((function(){i.ui.alert("Error saving language pack","There was an error while saving your translations. Please retry. If the problem persist, please contact our support team")}))}},{type:h.f.CANCEL,callback:function(){r.close()}}],{width:"584px",height:"500px"});r.dialog.setAttribute("data-dialog-role","translations-editor"),r.body.innerHTML='<div data-role="loader">\n                                    <div data-role="loading-bar"></div>\n                                    <div data-role="loading-bar"></div>\n                                    <div data-role="loading-bar"></div>\n                                </div>',function(i,a,o,s,l){i.when(o.get("/modules/Typescript/Form/resources/translations-edit-language.html").fail((function(e){l.alert("Error loading module","Failed to load translations dialog markup from server. Please retry. If the problem persist, please contact our support team")})),s.GET("/v2/language/".concat(e.getCode3(),"/").concat(a.loader.getFormId()),{format:"2"}).fail((function(e){l.alert("Error loading language pack","Failed to load form language pack from server. Please retry. If the problem persist, please contact our support team")})),s.GET("/v2/language/".concat(e.getCode3())).fail((function(e){l.alert("Error loading translations","Failed to load platform translations from server. Please retry. If the problem persist, please contact our support team")}))).then((function(o,s,c){if(r&&r.dialog&&r.dialog.parentNode){var u=new m.a(o);n=a.createEditorTranslationsModel(s.data,c.data),(t=new f.a(l)).setCaptionText("Import from CSV"),i(r.dialog).find(".ui-titlebar").append(t.getRootDOMNode()),r.body.innerHTML=u.parse(n),r.dialog.setAttribute("data-dialog-loaded",""),a.loader.getCommandDispatcher().addPerfectScrollbar(r.body.querySelector("[data-role=scrollable-content]")),a.fixTextInputHeights(r.body),t.on("load",(function(){var n;if(null===(n=CFTracker)||void 0===n||n.event("translations_import_from_csv"),t.isParsed())if(null!==t.getLanguageColumnIndex(e.getName())){var a=t.getLanguagePack(e.getName());if(null!==a){var o=0;i(r.body).find("[data-role=scrollable-content] textarea[name]").each((function(){var e=this.getAttribute("name");a[e]&&(this.value=a[e],o++)})),l.alert("Import successful","".concat(o," translations were successfully imported from CSV file"))}else l.alert("Error applying translations",'There was an error loading "'.concat(e.getName(),'" from CSV file'))}else l.alert("Error applying translations",'The provided CSV translations file does not contain the language "'.concat(e.getName(),'". ')+"Please use another file. Note that you should not alter the column names of the exported CSV file!")}));var d="",h=p.a.create((function(){var e=String(d||"").toLowerCase().replace(/(^[\s]+|[\s]+$)/g,"").replace(/[\s]+/g," ");i(r.body).find("[data-role=scrollable-content] table").each((function(){var t=!0;i(this).find("tbody > tr").each((function(){if(e){for(var n=[],r=0,a=this.cells.length;r<a;r++)n.push(r<a-1?this.cells[r].textContent.toLowerCase():i(this.cells[r]).find("input, textarea").val().toLowerCase());n.join(" ").replace(/(^[\s]+|[\s]+$)/g,"").replace(/[\s]+/g," ").indexOf(e)>-1?(t=!1,this.style.display=""):this.style.display="none"}else t=!1,this.style.display=""})),t?(this.style.display="none",i(this).prev("h2").css({display:"none"})):(i(this).prev("h2").css({display:""}),this.style.display="")})),i(r.body).find("[data-role=scrollable-content]").each((function(){this.scrollTop=0}))}),300);i(r.body).on("input, input.clear","[data-role=fixed-content] input[name=filter]",(function(){var e;e=this.value,d=e,i(r.body).find("[data-role=fixed-content] [name=filter]").attr("empty",d?null:""),h()})).on("click","[data-role=fixed-content] [data-role=clear]",(function(){i(r.body).find("[data-role=fixed-content] [name=filter]").val("").trigger("input.clear")}))}}))}(this.jq,this,this.resourceManager,this.api,this.ui)}},{key:"collectUserEditedTranslations",value:function(e,t){var n={};!function(t){t(e).find("[data-role=scrollable-content] textarea[name]").each((function(){var e=this.name,t=this.value;e&&t&&(n[e]=t)}))}(this.jq);for(var i=0,r=t.groups.length;i<r;i++)for(var a=0,o=t.groups[i].translations.length;a<o;a++){var s=t.groups[i].translations[a].key,l=t.groups[i].translations[a].original;n[s]===l&&delete n[s]}for(var c=this.loader.getEngine().getDocument().enumerateTranslations(),u=0,d=c.length;u<d;u++)c[u].syncWith&&n[c[u].syncWith]&&(n[c[u].key]=n[c[u].syncWith]);return n}},{key:"fixTextInputHeights",value:function(e){var t=this;!function(n){n(e).find("table > tbody > tr").each((function(){var e=this.cells[0].offsetHeight;n(this).find("td:last-child > input").each((function(i,r){var a=n(r).attr("name"),o=t.decodeNewLine(n(r).val()),s="".concat(e-20,"px");n(r).replaceWith('<textarea class="translation-area" name="'.concat(a,'" style="height:').concat(s,';">').concat(o,"</textarea>"))}))}))}(this.jq)}},{key:"exportTranslationsToCSVFile",value:function(){var e,t=this;0!==this.formTranslationsService.enumerateAvailableFormLanguages().length?(e=this.ui,this.api.GET("/v2/language/".concat(t.loader.getFormId(),"/csv/").concat(t.loader.getI18n().getLanguageCode())).then((function(e){var n;d.a.download(String.fromCharCode(239)+String.fromCharCode(187)+String.fromCharCode(191)+window.unescape(encodeURIComponent(e)),"form-".concat(t.loader.getFormId(),"-translations.csv"),"application/octet-stream"),null===(n=CFTracker)||void 0===n||n.event("translations_export_to_csv"),console.log("tracker :: translations_export_to_csv")})).fail((function(t){e.alert("Export failed","Failed to export translations because of a server error. Please retry. If the problem persist, please contact our support team!")}))):this.ui.alert("Export failed","In order to export translations to a CSV file, please add at least one language!")}},{key:"dispatchButtonClick",value:function(e){switch(e){case"export-translations-to-csv":this.exportTranslationsToCSVFile();break;case"copy-translations-from-form":this.importTranslationsFromAnotherForm();break;default:throw new Error("Failed to dispatch translations panel button click (command=".concat(JSON.stringify(e),")"))}}},{key:"importTranslationsStart",value:function(e,t){var n=this;e.hide(),this.ui.prompt("Confirm Operation","Are you sure you want to override existing form translations with selected form translations?",(function(){n.api.POST("/v2/language/import/from-".concat(t,"/to-").concat(n.loader.getFormId())).then((function(){n.ui.alert("Success","Translations were successfully imported",(function(){e.close(),n.refreshFormLanguages()}))})).fail((function(){n.ui.alert("Error importing translations","There was a technical error importing form translations. Please retry. If the problem persist, contact our support team",(function(){e.show()}))}))}),(function(){e.show()}))}},{key:"importTranslationsFromAnotherForm",value:function(){var e=this;this.resourceManager.get("/modules/Typescript/Form/resources/import-form-translations-dialog.html").then((function(t){var n=e.jq,i=e.ui.createDialog("Import from another form",[{type:h.f.IMPORT,callback:function(){var t=null;n(i.body).find("table > tbody > tr[data-form-id].selected:visible").each((function(){t=~~this.getAttribute("data-form-id")})),null!==t&&e.importTranslationsStart(i,t)}},{type:h.f.CANCEL,callback:function(){i.close()}}],{width:"464px",height:"500px"});i.dialog.setAttribute("data-dialog-role","import-form-translations"),i.body.innerHTML='<div data-role="loader"><div data-role="loading-bar"></div><div data-role="loading-bar"></div><div data-role="loading-bar"></div></div>',e.api.GET("/v2/language/translatedForms").then((function(r){var a=e.loader.getFormId(),o={forms:r.data.filter((function(e){return e&&e.formId!==a}))},s=new m.a(t);i.body.innerHTML=s.parse(o),e.loader.getCommandDispatcher().addPerfectScrollbar(n(i.body).find("[data-role=scrollable-body]").get(0))})).fail((function(){i.close(),e.ui.alert("Error loading data","Failed to fetch translated forms list from server")}));var r="",a=p.a.create((function(){var e=String(r||"").toLowerCase().replace(/(^[\s]+|[\s]+$)/g,"").replace(/[\s]+/g," ");n(i.body).find("table > tbody > tr").each((function(){if(e){var t=this.cells[0].textContent.toLowerCase();this.style.display=t.indexOf(e)>-1?"":"none"}else this.style.display=""}))}),100);n(i.body).on("input, input.clear","[name=filter]",(function(){var e;this.value?this.removeAttribute("empty"):this.setAttribute("empty",""),e=this.value,r=e,a()})).on("click","[data-role=clear]",(function(){n("[name=filter]").val("").attr("empty","").focus().trigger("input.clear")})).on("click","tr[data-form-id]",(function(){n(this).addClass("selected").siblings().removeClass("selected")}))})).fail((function(){e.ui.alert("Error loading component","Failed to load resource from server")}))}},{key:"refreshFormLanguages",value:function(){var e=this;this.api.GET("/v2/language/".concat(this.loader.getFormId())).then((function(t){e.formTranslationsService.setAvailableFormLanguages(t.data),e.updateLanguagesList()}))}}]),e}();c()(y,"PAYMENT_TEXTDEF_IDS",[177,178,106,7,12,13,36,37,38,39,42,60,75,79,82,84,88,95,109,110,114,115,116,117,118,119,120,121,122,123,124,125,126,128,129,137,139,145,146,147,148,149,150,151,153,154,155,156,157,158,159,160,161,165,256]),c()(y,"SYSTEM_MESSAGES_TEXTDEF_IDS",[169,175,179,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,213,214,219,220,221,222,223,224,225,226,227,80,81,176,8,34,85,87,97,98,102,103,104,105,108,111,132,136,138,162,163,208,211,212,2,3,4,5,9,10,11,14,23,32,33,35,40,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,67,68,70,71,72,73,76,77,83,86,89,92,93,94,96,130,131,133,134,144,152,170,171,172,201,243]),c()(y,"EMAIL_NOTIFICATION_TEXTDEF_IDS",[206,20,91,99,100,101,107,112,113,127,140,141,142,143,135])},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return EditorCommandDispatcher}));var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(38),_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_instanceof__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(20),_babel_runtime_helpers_instanceof__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_instanceof__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__),apps_main_Builder_components_Products_PaymentsProductsDialog__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(77),apps_main_Builder_store__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(33),builder_interfaces__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1),core_helpers_Throttle__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(34),core_helpers_UrlUtils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(32),core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(9),core_services_ErrorLogger__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(193),core_services_Features__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(71),core_services_UserService__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(47),editor_abstracts_FormElement__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(74),editor_Activities_SaveActivity__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(299),editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(31),editor_EditorSettings_EditorSettingTypes__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(16),editor_EditorValueRendererFactory__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(236),editor_ElementHardcodedPropertyLabel__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(21),editor_ElementPropertyOrder__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(10),editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(2),editor_EngineToggles__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(49),editor_I18n_ControlPropertyTranslator__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(235),editor_InspectorHiddenProperties__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(61),editor_Payments_Products_PaymentsSummaryHelper__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(87),editor_Theme__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(125),editor_ThemePropertyDecorator__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(63),editor_Translations_TranslationsEditor__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(303),editor_Translations_TranslationsService__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(154),editor_UI_UIMenuPopup__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(217),editor_Uploads_UploadImageTinymce__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(163),editor_Utils_FormUtils__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(13),editor_Utils_PlanUtils__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(174),editor_Utils_URLHandler__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(58),header_v3_Buttons_PreviewFormButton__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(315),my_forms_src_Enums__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(339),redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(22),redux_actions_Paywalls__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(76),redux_actions_Toasters__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(166),root_lodash_es__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(96),root_lodash_es__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(126),root_lodash_es__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(400),root_lodash_es__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(117),root_lodash_es__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(610),salvage_Salvage__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(28),services_Cookie__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(121),services_CustomerEventService__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(84),services_I18nService__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(42),shared_modules_Core_Containers_Page__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(113),shared_modules_ToastersApp_staticTypes_enums_EToasterTypes__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(165),shared_staticTypes_enums_EFeatureNames__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(14);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var EditorCommandDispatcher=function(){function EditorCommandDispatcher(e,t){var n=this;if(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this,EditorCommandDispatcher),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"editor",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"loader",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"i18n",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"oAuth",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"wasThemeEditorLoaded",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"editorValueRendererFactory",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"tinyMCEEditorUID",0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"trackers",{}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"saveActivity",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"paymentsInActivationProcess",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"cookie",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"lastCalculationHTMLMarkup",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"features",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"header",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"store",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"planUtils",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"userService",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"availableUpgrades",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"errorLogger",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"lastTrackedSelectionName",""),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"customerEventService",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(this,"i18nService",void 0),this.features=core_services_Features__WEBPACK_IMPORTED_MODULE_12__.a,!window.header)throw new Error("Dependency not found: header");this.header=window.header.getHeader(),this.planUtils=editor_Utils_PlanUtils__WEBPACK_IMPORTED_MODULE_33__.a,this.store=Object(apps_main_Builder_store__WEBPACK_IMPORTED_MODULE_6__.c)(),this.userService=core_services_UserService__WEBPACK_IMPORTED_MODULE_13__.a.getInstance(),this.userService.getCurrentIdentity().then((function(e){n.availableUpgrades=e.abilities.upgrades})),this.errorLogger=core_services_ErrorLogger__WEBPACK_IMPORTED_MODULE_11__.a.getInstance(),this.editor=e,this.loader=t,this.i18n=this.editor.getI18n(),this.oAuth=this.loader.getOAuth(),this.saveActivity=new editor_Activities_SaveActivity__WEBPACK_IMPORTED_MODULE_15__.a(this.loader.getJQuery(),this.editor,this.loader),this.wasThemeEditorLoaded=!1,this.customerEventService=services_CustomerEventService__WEBPACK_IMPORTED_MODULE_47__.a.getInstance(),this.i18nService=new services_I18nService__WEBPACK_IMPORTED_MODULE_48__.a,this.editorValueRendererFactory=new editor_EditorValueRendererFactory__WEBPACK_IMPORTED_MODULE_18__.a(this.editor.getResourceManager(),this.loader.getJQuery(),this.editor.getGeolocation(),this.editor.getCurrency(),this.editor.getDocument()),this.cookie=new services_Cookie__WEBPACK_IMPORTED_MODULE_46__.a,editor_EditorValueRendererFactory__WEBPACK_IMPORTED_MODULE_18__.a.init(this.editorValueRendererFactory)}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(EditorCommandDispatcher,[{key:"viewForm",value:function(){window.open("./view-form.php")}},{key:"setActiveEditorPanel",value:function(e,t){this.loader.getEditorPanelGroup().setActivePanel(e,t)}},{key:"createNewFormWithListOfControls",value:function(e){var t=this,n=this.editor.getDocument(),i=n.getChildren()[0];Object(root_lodash_es__WEBPACK_IMPORTED_MODULE_40__.a)(e,(function(e){var r=t.editor.getFactory().createItemByTypeId(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW,n),a=t.editor.getFactory().createItemByTypeId(parseInt(e.typeId),n);r.appendChild(a),i.appendChild(r),n.normalize(),n.flatten().forEach((function(e){e.getElementKind()===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.p.CONTROL&&(e.onCreated(),e.setupI18n())})),setTimeout((function(){a.setupDefaults(),a.hasProperty("label.labelText")&&a.setProperty("label.labelText",e.text)}))}))}},{key:"dispatchPropertyChangeInThemePanel",value:function(e,t){var n=this.editor.getJQuery(),i=n(e).closest("[data-role=property]").attr("data-property-target"),r=e.hasAttribute("data-propagate-value-css-selector")&&e.getAttribute("data-propagate-value-css-selector")||null,a=e.hasAttribute("data-propagate-value-attribute-name")&&e.getAttribute("data-propagate-value-attribute-name")||null;if(i){var o=n(e).closest("[data-property-name]").attr("data-property-name"),s=n(e).closest("[data-property-type]").attr("data-property-type");if(o&&s){var l=e[t];if(e.hasAttribute("data-is-json-value"))try{l=""!==l?JSON.parse(String(l||"")):null}catch(d){l=null}l=this.getCastedPropertyValue(l,s),this.trackEvent("theme_property_change",{},50);var c=Object(apps_main_Builder_store__WEBPACK_IMPORTED_MODULE_6__.a)(),u=l?l.toString():"";switch(i){case"theme":c(Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.B)(o,u)),this.editor.getTheme().setProperty(o.replace(/[\.]+/g,"_"),l||"");break;case"form":c(Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.y)(o,u)),this.editor.getDocument().setProperty(o,l),"options.direction"==o&&this.loadThemePropertiesIntoPanel()}this.loader.getUndoService().trigger("user-action","change-".concat(o)),r&&a&&n(r).each((function(){var e=this;setTimeout((function(){n(e).trigger("attribute:propagate")}),50)})).attr(a,null===l?null:String(l)||"")}}}},{key:"loadThemePropertiesIntoPanel",value:function(){!function(e,t,n,i,r,a){e.wasThemeEditorLoaded=!0,e.editorValueRendererFactory.resolve().then((function(){for(var o=[],s=n.enumerateProperties(),l=0,c=s.length;l<c;l++)o.push(editor_ThemePropertyDecorator__WEBPACK_IMPORTED_MODULE_27__.a.getDecoratedThemeProperty(s[l]));for(var u=a.enumerateProperties(),d=0,p=u.length;d<p;d++)editor_InspectorHiddenProperties__WEBPACK_IMPORTED_MODULE_24__.a.isPropertyEditable(u[d],a)&&o.push(editor_ThemePropertyDecorator__WEBPACK_IMPORTED_MODULE_27__.a.getDecoratedFormProperty(u[d],a.getProperty(u[d].name)));editor_EngineToggles__WEBPACK_IMPORTED_MODULE_22__.a.ALLOW_THEME_ADVANCED_SETTINGS||(o=o.filter((function(e){return!e.isAdvanced}))),o=editor_ThemePropertyDecorator__WEBPACK_IMPORTED_MODULE_27__.a.getSortedDecoratedThemeProperties(o);for(var h={categories:[]},_=0,g=o.length;_<g;_++)o[_].control=JSON.stringify({element:-1,property:o[_].name.replace(/[_]+/g,"."),type:o[_].type,value:o[_].value});h.categories=editor_Utils_FormUtils__WEBPACK_IMPORTED_MODULE_32__.a.getThemesCategories(o),e.editorValueRendererFactory.withElement(null),r.getResourceManager().get("/modules/Typescript/Form/resources/theme-editor-v2.html").then((function(n){var r=new salvage_Salvage__WEBPACK_IMPORTED_MODULE_45__.a(n);t("#options > div[data-role=vertical-content]").each((function(){t(this).find("div[data-role=category], div[data-role=separator]").remove(),t(this).find('div[data-role="category"], .options__add-custom-css-btn').remove(),t(this).append(r.parse(h)),i.upgrade(this),e.addPerfectScrollbar(this)})),e.loader.trigger("options-sidebar-initialised")})).fail((function(t){console.error(t),i.alert(e.getUiTranslatedString("edt_UI_alert_error_loading_module","Error loading module"),e.getUiTranslatedString("edt_UI_alert_error_loading_module_message",'Failed to load resource: "/modules/Typescript/Form/resources/theme-editor.html"','"/modules/Typescript/Form/resources/theme-editor.html"'))}))}))}(this,this.editor.getJQuery(),this.editor.getTheme(),this.loader.getUI(),this.editor,this.editor.getDocument())}},{key:"loadEditorControlsIntoPanel",value:function(){var e=this;this.editor.getResourceManager().getWithPromise("/modules/Typescript/Form/resources/editor-panel-v2.html").then((function(t){for(var n,i,r,a=new salvage_Salvage__WEBPACK_IMPORTED_MODULE_45__.a(t),o=e.editor.getFactory().getAvailableControlsList(),s=e.editor.getFactory().getAvailableSettingsList(),l=!1,c=!1,u=!1,d=!1,p=!1,h=e.editor.getFactory().getUnavailableControlsList(),_=e.editor.getFactory().getUnavailableEditorSettingsList(),g=o.length-1;g>=0;g--)o[g].isVirtual&&o.splice(g,1);for(var m=s.length-1;m>=0;m--)s[m].visible||s.splice(m,1);for(var f=0,E=(n=editor_Utils_FormUtils__WEBPACK_IMPORTED_MODULE_32__.a.merge(o,s)).length;f<E;f++)n[f].isBasic="basic"===n[f].category,n[f].isAdvanced="advanced"===n[f].category,n[f].isOther="other"===n[f].category,n[f].isContainer="containers"===n[f].category,n[f].isECommerce="e-commerce"===n[f].category,n[f].isSupported=!0,n[f].itemType="string"===typeof n[f].typeId?"setting":"",l=n[f].isBasic||l,c=n[f].isAdvanced||c,u=n[f].isOther||u,p=n[f].isContainer||p,d=n[f].isECommerce||d;for(var y=h.length-1;y>=0;y--)h[y].isVirtual&&h.splice(y,1);for(var T=_.length-1;T>=0;T--)_[T].visible||_.splice(T,1);for(var v=0,O=(i=editor_Utils_FormUtils__WEBPACK_IMPORTED_MODULE_32__.a.merge(h,_)).length;v<O;v++)i[v].isBasic="basic"===i[v].category,i[v].isAdvanced="advanced"===i[v].category,i[v].isOther="other"===i[v].category,i[v].isContainer="containers"===i[v].category,i[v].isECommerce="e-commerce"===i[v].category,i[v].isSupported=!1,i[v].itemType="string"===typeof i[v].typeId?"setting":"",l=i[v].isBasic||l,c=i[v].isAdvanced||c,u=i[v].isOther||u,p=i[v].isContainer||p,d=i[v].isECommerce||d;var b=editor_Utils_FormUtils__WEBPACK_IMPORTED_MODULE_32__.a.merge(n,i).sort((function(e,t){return e.index-t.index}));r={model:b,hasECommerce:d,categories:editor_Utils_FormUtils__WEBPACK_IMPORTED_MODULE_32__.a.getFieldsCategories(b)},document.getElementById("editor").innerHTML=a.parse(r),e.editor.getForm().removeAttribute("data-is-loading"),e.addPerfectScrollbar("#editor div[data-role=vertical-content]"),e.editor.getI18n().translateDOMNode(document.getElementById("editor")),e.loader.trigger("editor-sidebar-initialised")})).catch((function(t){var n=e.loader.getAPI();e.errorLogger.logError(n,"Error initialising builder sidebar with error ".concat(t.toString()),builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.t.ERROR,"Builder")}))}},{key:"filterSettingsProperties",value:function(e){var t=String(e||"").toString().toLowerCase(),n=t.replace(/[^a-z0-9]+/g," ").split(" "),i=this.loader.getJQuery()("#options");if(i){e?i.attr("data-is-filtered",""):i.removeAttr("data-is-filtered");var r=i.find('div[data-role="category"]'),a=null===r||void 0===r?void 0:r.find(".collapsible-section__subcategory-container");this.setVisiblePropertiesCount(r,t,n),this.setVisiblePropertiesCount(a,t,n)}}},{key:"updateThemesPanel",value:function(){!function(e,t,n,i){n.getResourceManager().get("/modules/Typescript/Form/resources/theme-picker-panel.html").then((function(n){var r=new salvage_Salvage__WEBPACK_IMPORTED_MODULE_45__.a(n),a={themes:t.getThemesList()},o=i("#theme-panel");o.html(r.parse(a)).find("[data-role=vertical-content]").each((function(){e.addPerfectScrollbar(this)})),o.find("[data-role=menu-popup]").each((function(){e.createMenuPopup(this)})),o.each((function(){e.editor.getI18n().translateDOMNode(this)}))}))}(this,this.editor.getTheme(),this.editor,this.editor.getJQuery())}},{key:"createMenuPopup",value:function(e){!function(t,n,i){var r=i(e).parent().parent(),a=i(r).attr("data-theme-id"),o=null;if(a)try{o=JSON.parse(a)}catch(l){return}var s="true"===r.attr("data-is-system-theme");new editor_UI_UIMenuPopup__WEBPACK_IMPORTED_MODULE_30__.a(e,i).on("apply-theme",(function(){i("#theme-panel").attr("data-allow-revert",i(r).is("[data-role=current-theme] > [data-role=theme]")?null:"1").find("[data-role=theme].selected").removeClass("selected"),i(r).addClass("selected"),t.loader.getEngine().getTheme().enterEditMode(),t.setThemeById(o),setTimeout((function(){t.loader.getEngine().getTheme().enterPreviewMode(),t.loader.getEngine().getTheme().enterEditMode()}),200),setTimeout((function(){t.loader.getEngine().getTheme().enterPreviewMode()}),1e3)})).on("delete-theme",(function(){s?n.alert(t.getUiTranslatedString("edt_UI_alert_error_deleting_theme","Error deleting theme"),t.getUiTranslatedString("edt_UI_alert_error_deleting_system_theme_message","Systems themes can\u2019t be removed.")):(t.loader.getCommandDispatcher().deleteTheme(o),t.loader.getCommandDispatcher().trackEvent("theme_btn_save_as_click"))})).on("save-theme",(function(){t.loader.getCommandDispatcher().saveTheme(o),t.loader.getCommandDispatcher().trackEvent("theme_btn_save_as_click")}))}(this,this.loader.getUI(),this.editor.getJQuery())}},{key:"updateCustomCSSPanel",value:function(){!function(e,t,n,i){n.getResourceManager().get("/modules/Typescript/Form/resources/custom-css-panel.html").then((function(t){var r=new salvage_Salvage__WEBPACK_IMPORTED_MODULE_45__.a(t),a={customCSSValue:n.getDocument().getConfiguration().getProperty("customCss"),customCSSURLValue:n.getDocument().getConfiguration().getProperty("customCssFromUrl")},o=i("#theme-custom-css");o.html(r.parse(a)),e.i18n.translateDOMNode(document.getElementById("theme-custom-css")),o.find("> div[data-role=vertical-content]").each((function(){e.addPerfectScrollbar(this)})),e.setCustomCssText(n.getDocument().getConfiguration().getProperty("customCss"))}))}(this,this.editor.getTheme(),this.editor,this.editor.getJQuery())}},{key:"loadAvailableThemes",value:function(){return function(e,t,n,i,r){return r.Deferred((function(r){e.GET("/v2/editor/themes").then((function(e){if(editor_Theme__WEBPACK_IMPORTED_MODULE_26__.a.availableThemes=[editor_Theme__WEBPACK_IMPORTED_MODULE_26__.a.getDefaultTheme()],e&&e.themes&&e.themes.length)for(var i=0,a=e.themes.length;i<a;i++)editor_Theme__WEBPACK_IMPORTED_MODULE_26__.a.availableThemes.push({name:e.themes[i].name,id:e.themes[i].id,userId:e.themes[i].userId,value:JSON.stringify(e.themes[i].properties||[]),customCSSText:e.themes[i].customCSSText,customCSSUrl:e.themes[i].customCSSUrl});n.trigger("load"),n.currentSelectedThemeId=-1,t.updateThemesPanel(),n.onThemeSettingsChangedDeferred(),r.resolve(!0)})).fail((function(){n.trigger("error"),i.alert(t.getUiTranslatedString("edt_UI_alert_error_loading_themes_module","Error loading themes module"),t.getUiTranslatedString("edt_UI_alert_error_loading_themes_module_message","There was an error loading the themes module. Please check if your session didn't expired.")),r.reject(new Error("Failed to load the themes module"))}))})).promise()}(this.loader.getAPI(),this,this.editor.getTheme(),this.loader.getUI(),this.loader.getJQuery())}},{key:"onFormNameChanged",value:function(){!function(e,t,n){var i=e(t.getUICssSelector("form-name-input")),r=n.getProperty("name.value");r!==i.val()&&i.val(String(r||""))}(this.editor.getJQuery(),this.loader,this.editor.getDocument())}},{key:"filterControlsList",value:function(e){var t=String(e||"").toLowerCase().replace(/[^a-z0-9]+/g," ").replace(/(^[\s]+|[\s]+$)/g,""),n=t.split(" ");!function(e){var i,r=[];null===(i=e("#editor .collapsible-section > *[data-keywords]"))||void 0===i||i.each((function(){var i,a=e(this).attr("data-keywords").toLowerCase().replace(/[^a-z0-9]+/g," ").replace(/(^[\s]+|[\s]+$)/g,""),o=a.split(" "),s=!0;if(""!==t)for(var l=0,c=n.length;l<c;l++)if(!(a.indexOf(n[l])>-1||o.indexOf(n[l])>-1)){s=!1;break}this.style.display=s?"":"none",s&&(this.removeAttribute("data-is-first-visible-control-in-category"),i=e(this).attr("data-category"),-1===r.indexOf(i)&&(r.push(i),this.setAttribute("data-is-first-visible-control-in-category","")))}));var a=document.querySelectorAll("#editor .collapsible-section");null===a||void 0===a||a.forEach((function(e){var t=e.querySelector("[data-category]").getAttribute("data-category");e.style.display=r.includes(t)?"":"none"}))}(this.editor.getJQuery())}},{key:"onThemeIdChanged",value:function(e){!function(t,n,i,r){r.getResourceManager().get("/modules/Typescript/Form/resources/theme-actions-panel.html").then((function(a){var o;o=null===r.getLoader().getLoaderDependency(builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.M.WIX_AUTHORIZED_REQUEST_DETAILS)?i.getCurrentThemeName():"Current theme";var s=i.enumerateProperties(!1),l=function(){for(var e=0,t=s.length;e<t;e++)if(s[e].name===editor_Theme__WEBPACK_IMPORTED_MODULE_26__.a.THUMBNAIL_PROPERTY_NAME_FONT_FAMILY)return s[e].value;return null}(),c=new salvage_Salvage__WEBPACK_IMPORTED_MODULE_45__.a(a),u={name:o,themeIsChanged:!0},d=null!==e?i.getThemeById(e):null,p=r.getLoader().getLoaderDependency(builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.M.FONTS_MANAGER);try{var h=p.getFontByName(l);u.webfont_class=p.isSystemFont(l)||null===h?null:h.cssClassAaBbCc}catch(_){u.webfont_class=null}null!==d&&(null!==r.getLoader().getLoaderDependency(builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.M.WIX_AUTHORIZED_REQUEST_DETAILS)&&(d.name="Current theme"),u.themeIsChanged=!1,u.id=d.id,u.name=d.name),t("#options div[data-role=theme-actions-panel]").html(c.parse(u)),t("#options").attr("data-has-theme-actions-panel","yes").each((function(){n.editor.getI18n().translateDOMNode(this)}))}))}(this.editor.getJQuery(),this,this.editor.getTheme(),this.editor)}},{key:"setThemeById",value:function(e){var t,n;t=this.editor.getTheme(),n=this,t.applyTheme(t.getThemeById(e)),n.loadThemePropertiesIntoPanel()}},{key:"saveTheme",value:function(e){!function(t,n,i,r,a,o,s){var l;n.getResourceManager().get("/modules/Typescript/Form/resources/save-theme-dialog.html").then((function(n){var a=new salvage_Salvage__WEBPACK_IMPORTED_MODULE_45__.a(n),c=i.createDialog(s.getUiTranslatedString("edt_UI_create_dialog_save_theme","Save theme"),[{type:core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.f.SAVE,callback:function(){var n=!1,a=null,o=!1;if(s.loader.getReadonlySubuser())return console.log("Not allowed to save theme"),c.close(),!1;var d=t(c.body).find("input[type=text][name=name]").val(),p=d.toString().trim().toLowerCase();if(""!==p){for(var h=0,_=s.editor.getTheme().getThemesList(),g=_.length;h<g;h++)if(_[h].name.toLowerCase()===p){n=!0,null!==_[h].userId&&0!==_[h].id||(o=!0),a=_[h].id;break}l=e?s.editor.getTheme().getThemeById(e).value:JSON.stringify(r.enumerateProperties(!1)),n?o?i.alert(s.getUiTranslatedString("edt_UI_alert_error_saving_theme","Error Saving theme"),s.getUiTranslatedString("edt_UI_alert_error_override_system_theme","Overriding a system theme is not allowed. Please choose a different name.")):i.prompt(s.getUiTranslatedString("edt_UI_override_theme","Override theme"),s.getUiTranslatedString("edt_UI_override_theme_message","A theme with this name already exists. Do you want to replace it?"),(function(){u(d,a,l)})):u(d,null,l)}else i.alert(s.getUiTranslatedString("edt_UI_alert_input_theme_name","Please input theme name!"),s.getUiTranslatedString("edt_UI_alert_input_theme_name_message","There was an error saving your theme!. Please input a valid theme name"),(function(){t(c.body).find("input[type=text][name=name]").focus()}))}},{type:core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.f.CANCEL,callback:function(){c.close()}}],{width:"360px"});function u(e,t,n){var r={name:e,id:String(t||""),properties:n};s.appendWixParametersIfNeeded(s,r),o.POST("/v2/editor/themes",r).then((function(e){c.close(),s.loadAvailableThemes().then((function(){s.onThemeEnteringPreviewMode()}))})).fail((function(e){i.alert(s.getUiTranslatedString("edt_UI_alert_error_saving_theme","Error saving theme"),"There was an error while saving your theme"),console.error(e)}))}t(c.body).addClass("save-theme-dialog"),t(c.body).html(a.parse({}));var d=null!==e&&void 0!==e?r.getThemeById(e).name:s.editor.getDocument().getConfiguration().getProperty("themeCurrentName","Simple Light");t(c.body).find("input[type=text][name=name]").val("".concat(d," edited"))})).fail((function(){i.alert(s.getUiTranslatedString("edt_UI_alert_error_starting_application","Error starting application"),s.getUiTranslatedString("edt_UI_alert_error_starting_application_message","Failed to start application: /modules/Typescript/Form/resources/save-theme-dialog.html",'"/modules/Typescript/Form/resources/save-theme-dialog.html"'))}))}(this.editor.getJQuery(),this.editor,this.loader.getUI(),this.editor.getTheme(),this.loader,this.loader.getAPI(),this)}},{key:"appendWixParametersIfNeeded",value:function(e,t){var n=e.loader.getLoaderDependency(builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.M.WIX_AUTHORIZED_REQUEST_DETAILS);return null!==n&&(n.instanceId&&(t.wixInstanceId=n.instanceId),n.compId&&(t.wixCompId=n.compId)),t}},{key:"deleteTheme",value:function(e){var t,n,i;this.editor.getJQuery(),this.editor,t=this.loader.getUI(),this.editor.getTheme(),this.loader,n=this.loader.getAPI(),i=this,t.prompt(i.getUiTranslatedString("edt_UI_delete_theme","Delete theme"),i.getUiTranslatedString("edt_UI_delete_theme_message","Are you sure you want to delete this theme?"),(function(){n.DELETE("/v2/editor/themes/".concat(String(e))).then((function(e){i.loadAvailableThemes().then((function(){i.onThemeEnteringPreviewMode()}))})).fail((function(e){t.alert(i.getUiTranslatedString("edt_UI_alert_error_deleting_theme","Error deleting theme"),i.getUiTranslatedString("edt_UI_alert_error_deleting_theme_message","There was an error while deleting your theme")),console.error(e)}))}))}},{key:"injectParameterInExtraDataJSONWithBackticks",value:function(e,t,n){try{var i=e.replace(/`/g,'"'),r=JSON.parse(i);return r[t]=n,i=JSON.stringify(r).replace(/"/g,"`")}catch(a){throw console.error(a),new Error("Failed to inject parameter in extraDataJSONWithBackticks!")}}},{key:"triggerPaywall",value:function triggerPaywall(reason){for(var _this5=this,_len4=arguments.length,args=new Array(_len4>1?_len4-1:0),_key=1;_key<_len4;_key++)args[_key-1]=arguments[_key];var upgradeCode=this.getPageUpgradeJavascriptCode();if(upgradeCode){var callbackParamsParser=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.slice.call(arguments,0)},params=eval(upgradeCode.replace(/UpgradeMechanism.runUpgrade/,"callbackParamsParser")),toPlan=params[0],displayModal=params[1],theToken=params[2],message=params[3],trackDescription=params[4],extraDataJsonWithBackticks=params[5],servicedomain=params[6],upgradeSettings={controlNotSupported:null,extraDataBadJSONWithBackticksInsteadOfQuotes:extraDataJsonWithBackticks,message:message,toPlan:toPlan,newPlan:toPlan,paywallReason:reason,theToken:theToken,trackDescription:trackDescription,servicedomain:location.hostname};switch(reason){case core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.k.NUMBER_OF_FIELDS_EXCEEDED_IN_CURRENT_USER_PLAN:upgradeSettings.trackDescription=trackDescription="Fields Limit Exceeded",upgradeSettings.message=message="You have reached the maximum number of fields allowed for your plan.",upgradeSettings.redirect="gold",upgradeSettings.mkt_src=this.editor.getDocument().getId(),extraDataJsonWithBackticks=this.injectParameterInExtraDataJSONWithBackticks(extraDataJsonWithBackticks,"redirect","gold"),extraDataJsonWithBackticks=this.injectParameterInExtraDataJSONWithBackticks(extraDataJsonWithBackticks,"mkt_src",String(this.editor.getDocument().getId())),upgradeSettings.extraDataBadJSONWithBackticksInsteadOfQuotes=extraDataJsonWithBackticks;try{var upgradeObj=Object(root_lodash_es__WEBPACK_IMPORTED_MODULE_41__.a)(this.availableUpgrades,{name:"create_form_field"}),target=upgradeObj.target[0];toPlan=target?this.planUtils.getPlanIdByPlanName(target.name):0,upgradeSettings.toPlan=toPlan}catch(e){var api=this.loader.getAPI();this.errorLogger.logError(api,"Error calculating upgrade details for reason EUpgradeReason.NUMBER_OF_FIELDS_EXCEEDED_IN_CURRENT_USER_PLAN with error ".concat(e.toString()),builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.t.WARNING,"Paywalls")}if(args[0]===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_HTML_BLOCK){var maxNumberOfControls=this.userService.getControlTotalLimitForControlType(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_HTML_BLOCK).toString();upgradeSettings.message=this.i18n.translateText("formeditor_formHtmlLimit",maxNumberOfControls)}break;case core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.k.CREATE_NEW_FORM_NOT_SUPPORTED_IN_CURRENT_USER_PLAN:upgradeSettings.trackDescription=trackDescription="",upgradeSettings.toPlan=void 0!=args[0]?args[0]:upgradeSettings.toPlan,toPlan=upgradeSettings.toPlan;break;case core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.k.SSL_NOT_SUPPORTED_IN_CURRENT_USER_PLAN:upgradeSettings.trackDescription=trackDescription="Turn your forms into data-collection powerhouses.",upgradeSettings.message=message="SSL is available only for Platinum and Professional accounts. Click the Upgrade button below in order to gain access to this feature.",upgradeSettings.toPlan=2,toPlan=upgradeSettings.toPlan;break;case core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.k.DOMAIN_ALIAS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN:var upgradeTargetObj=this.userService.getUpgradeOptions(shared_staticTypes_enums_EFeatureNames__WEBPACK_IMPORTED_MODULE_51__.a.ENABLE_FORM_DOMAIN_ALIASING);toPlan=this.planUtils.getPlanIdByPlanName(upgradeTargetObj.name),upgradeSettings.trackDescription=trackDescription="Turn your forms into data-collection powerhouses.",upgradeSettings.message=message=toPlan===core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.l.PROFESSIONAL?"Domain Aliasing is available only for Professional accounts. Click the Upgrade button below in order to gain access to this feature.":"Domain Aliasing is available only for Platinum and Professional accounts. Click the Upgrade button below in order to gain access to this feature.",upgradeSettings.toPlan=toPlan;break;case core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.k.PAYMENTS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN:try{var formPaymentsUpgradeObj=Object(root_lodash_es__WEBPACK_IMPORTED_MODULE_41__.a)(this.availableUpgrades,{name:"enable_form_payments"}),_target=formPaymentsUpgradeObj.target[0];toPlan=_target?this.planUtils.getPlanIdByPlanName(_target.name):0}catch(e){var _api=this.loader.getAPI();this.errorLogger.logError(_api,"Error calculating upgrade details for reason EUpgradeReason.PAYMENTS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN with error ".concat(e.toString()),builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.t.WARNING,"Paywalls")}upgradeSettings.toPlan=toPlan,upgradeSettings.trackDescription="Enable payment options",upgradeSettings.message=message=this.loader.getI18n().translateText("userAccountUpgrade_22")}this.trackEvent("user_upgrade_popup_open",{reason:core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.k[upgradeSettings.paywallReason],trackDescription:upgradeSettings.trackDescription}),upgradeCode="UpgradeMechanism.runUpgrade(".concat(JSON.stringify(toPlan),",").concat(JSON.stringify(displayModal),",").concat(JSON.stringify(theToken),",").concat(JSON.stringify(message),",").concat(JSON.stringify(upgradeSettings.trackDescription),",").concat(JSON.stringify(extraDataJsonWithBackticks),",").concat(JSON.stringify(core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.k[reason]),")"),window.Paywall.getInstance().withI18n(this.loader.getI18n()).withJQuery(this.loader.getJQuery()).withUpgradeMechanismCode(upgradeCode).createPaywallDialog(reason,upgradeSettings),this.loader.getJQuery().get("modules/upgrade-button/views/salesChatOnPaywalls.php",{do:"showProactiveChat",trackDescription:trackDescription,enableProactiveChatFormNewEditor:!0}).then((function(e){_this5.executeProactiveChatJavascriptCode(e)}))}}},{key:"appendElement",value:function(e){var t,n=this;if(!(e=~~e))throw new Error("Invalid argument: int expected");this.isPaywallRequired(e)||(e!==editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_COUPON||(this.trackEvent("payments_coupon_add"),this.canAddAnotherCouponCode()))&&(e===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_FORMULA&&this.trackEvent("payments_formula_add"),this.trackEventOnElementAddOrDuplicateByElementId(e),this.loader.getUndoService().trigger("user-action","insert-element"),header_v3_Buttons_PreviewFormButton__WEBPACK_IMPORTED_MODULE_35__.a.setHighlight(this.loader.getFormId()),function(i,r){if(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_PAGE_BREAK===e&&(e=editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_PAGE),e!==editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_PAGE&&e!==editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE){var a=i.createElement(e);t=a;var o,s,l=null;r.getNumberOfPages()?o=r.getActiveElement()?(l=r.getActiveElement().getFirstParentContainer())?null:r.getActiveElement().getParentPage():r.getLastPageContainer():(o=i.createElement(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_PAGE).setupDefaults(),r.appendChild(o)),(s=i.createElement(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW)).appendChild(a),(l||o||r.getPageByIndex(r.getNumberOfPages()-1)).appendChild(s),a.getRootNode().scrollIntoView(),n.loader.getOpenInspectorOnInsert()&&n.loader.execCommand("select-element",a),setTimeout((function(){var e=Object(apps_main_Builder_store__WEBPACK_IMPORTED_MODULE_6__.a)();e(Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(s)),e(Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(a))}))}else if(e===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_PAGE){var c=i.createElement(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_PAGE),u=r.getLastPageContainer();r.insertAfter(u,c),n.loader.trigger("page_created")}else if(e===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE){var d=i.createElement(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE);r.appendChild(d),d.setAttached(!0),n.loader.trigger("page_created")}t&&t.setupDefaults()}(this.editor,this.editor.getDocument()))}},{key:"trackEventOnElementAddOrDuplicateByElementId",value:function(e){var t=this.loader.getEngine().getFactory().getItemStaticClassByTypeNameOrTypeId(e).getConfiguration().name||"";0===t.length&&(t="Unknown");var n=this.loader.getEngine().getFactory().getItemStaticClassByTypeNameOrTypeId(e).getConfiguration().name.replace(/\s+/g,"-").toLowerCase();this.trackEvent("control_insert_".concat(n),{type:t,new_editor:"1"}),this.trackEditedFormEvent(n)}},{key:"setGridVisibility",value:function(e){!function(t){t("#form").attr("data-grid-visibility",e?"1":null)}(this.editor.getJQuery())}},{key:"loadEditorSettingIntoPanel",value:function(e,t){!function(n,i,r,a,o,s,l){i.editorValueRendererFactory.resolve().then((function(){n.withElement(e);var r=0;void 0!==t&&(r=!0===t?a("[data-role=vertical-content]","#item").scrollTop():parseInt(String(t),10)),o.get("/modules/Typescript/Form/resources/editor-setting-editor.html").then((function(t){var n=new salvage_Salvage__WEBPACK_IMPORTED_MODULE_45__.a(t),o=e.getSettingsModelForInspectorPanel();if(o.groups)for(var l=0,c=o.groups.length;l<c;l++)for(var u=0,d=o.groups[l].properties.length;u<d;u++)o.groups[l].properties[u].control=JSON.stringify({element:e.getTypeId(),property:o.groups[l].properties[u].propertyFQN,type:o.groups[l].properties[u].type,value:i.castValueToString(e.getProperty(o.groups[l].properties[u].propertyFQN))});a("#item").attr("data-target-element-type","setting").attr("data-target-element","").attr("data-target-setting-id",e.getTypeId),a("#item > [data-role=vertical-content]").html(n.parse(o)).each((function(){s.upgrade(this)}));for(var p=e.enumerateProperties(),h=0,_=p.length;h<_;h++){var g=e.hasProperty(p[h].name)?e.getProperty(p[h].name):null;i.updateEditorSettingPropertyIntoPanel(e,p[h].name,g)}i.setActiveEditorPanel("item",r),a("#item").find("span[data-role=item-type-name]").each((function(){var t=e.getConfiguration();this.textContent=t.name,t.i18nName?this.setAttribute("data-i18n-text",t.i18nName):this.removeAttribute("data-i18n-text")})),a("#item > div[data-role=vertical-content]").each((function(){i.addPerfectScrollbar(this)})),i.updateElementErrorsInInspectorPanel(e),i.editor.getI18n().translateDOMNode(document.getElementById("item"))})).fail((function(e){console.error(e),s.alert(i.getUiTranslatedString("edt_UI_alert_error_loading_resource","Error loading resource"),i.getUiTranslatedString("edt_UI_alert_error_loading",'Error loading "/modules/Typescript/Form/resources/item-editor.html"','"/modules/Typescript/Form/resources/item-editor.html"'))}))}))}(this.editorValueRendererFactory,this,this.editor,this.loader.getJQuery(),this.editor.getResourceManager(),this.loader.getUI(),this.loader)}},{key:"onSelectionChanged",value:function(){if(document.getSelection){var e=document.getSelection();e.removeAllRanges&&e.removeAllRanges()}!function(e,t,n,i,r,a,o,s){t.editorValueRendererFactory.resolve().then((function(){var n=o.getItems();n.length>1&&(n=[o.rebuildVirtualSelectionControl().getVirtualControl()]),1===n.length?e.withElement(n[0]):e.withElement(null);var s=t.lastTrackedSelectionName;n.length&&(s=n[0].hasOwnProperty("elements")?"multiple-elements":n[0].getRootNode().attributes["data-type"].value),r.get("/modules/Typescript/Form/resources/item-editor.html").then((function(e){var r,l=new salvage_Salvage__WEBPACK_IMPORTED_MODULE_45__.a(e),c=n.length;switch(c){case 0:r={isEmpty:!0,isMultiple:!1,isSingle:!1,count:0},t.trackEvent("control_deselect_".concat(s));break;case 1:switch(r={isEmpty:!1,isMultiple:!1,isSingle:!0,type:n[0]._static().nodeName,count:1,attributes:t.createElementAttributesModel(n[0]),hash:n[0].getHash(),isRemovable:n[0].isRemovable(),isDuplicatable:n[0].isDuplicatable(),hasEditingCapabilities:n[0].isRemovable()||n[0].isDuplicatable(),i18nName:(n[0]._static().getConfiguration()||{}).i18nName,elementName:n[0].getElementName()},t.lastTrackedSelectionName=s,t.trackEvent("control_select_".concat(s),{},50),n[0].getTypeId()){case editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_FORM_HEADER:t.trackEvent("edit_form_headline")}break;default:r={isEmpty:!1,isMultiple:!0,isSingle:!1,count:c,isRemovable:!0};for(var u=0;u<c;u++)if(!n[u].isRemovable()){r.isRemovable=!1;break}t.trackEvent("control_select_multiple")}if(r.isSingle?i("#item").attr("data-target-element",n[0].getHash()).attr("data-target-element-type",String(n[0].getElementName()||"").toLowerCase()):i("#item").removeAttr("data-target-element-type"),i("#item > [data-role=vertical-content]").html(l.parse(r)).each((function(){a.upgrade(this)})),r.isSingle?(!function(e,n){for(var i=0,r=n.length;i<r;i++)t.updateElementPropertyIntoPanel(e,n[i].name,e.getProperty(n[i].name));t.checkRequiredAndHiddenProperties(e)}(n[0],editor_ElementPropertyOrder__WEBPACK_IMPORTED_MODULE_20__.a.getSortedElementProperties(n[0])),t.setActiveEditorPanel("item")):(r.isEmpty?t.setActiveEditorPanel("editor"):t.setActiveEditorPanel("item"),i("#item").attr("data-target-element",null)),i("#item").find("span[data-role=item-type-name]").each((function(){if(1===o.getLength())this.textContent=r.elementName,r.i18nName?this.setAttribute("data-i18n-text",r.i18nName):this.removeAttribute("data-i18n-text");else if(this.removeAttribute("data-i18n-text"),o.getLength()>1){var e=o.getVirtualControl().getElements();Object(root_lodash_es__WEBPACK_IMPORTED_MODULE_40__.a)(e,(function(e){return t.checkRequiredAndHiddenProperties(e)})),this.textContent="".concat(e.length," fields selected")}else this.textContent="".concat(0," fields selected")})),n[0]&&n[0].hasOwnProperty("elements"))n[0].elements.forEach((function(e){var n=Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.s)(e.getId(),!0);t.store.dispatch(n)}));else if(1===n.length){var d=Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.t)();t.store.dispatch(d);var p=Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.s)(n[0].getId(),!0);t.store.dispatch(p)}else if(!n.length){var h=Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.t)();t.store.dispatch(h)}i("#item > div[data-role=vertical-content]").each((function(){t.addPerfectScrollbar(this)})),o.isSingle()&&t.updateElementErrorsInInspectorPanel(o.getItems()[0]),t.editor.getI18n().translateDOMNode(document.getElementById("item")),t.loader.trigger("item-sidebar-initialised")})).fail((function(e){console.error(e),a.alert(t.getUiTranslatedString("edt_UI_alert_error_loading_resource","Error loading resource"),t.getUiTranslatedString("edt_UI_alert_error_loading",'Error loading "/modules/Typescript/Form/resources/item-editor.html"','"/modules/Typescript/Form/resources/item-editor.html"'))}))}))}(this.editorValueRendererFactory,this,this.editor,this.loader.getJQuery(),this.editor.getResourceManager(),this.loader.getUI(),this.loader.getSelection(),this.loader)}},{key:"checkRequiredAndHiddenProperties",value:function(e){var t=null,n="";if(e.hasProperty("options.hidden")&&!0===e.getProperty("options.hidden")&&(t="options-required",n="Required option isn't compatible with the field property Hidden."),e.hasProperty("options.required")&&!0===e.getProperty("options.required")&&(t="options-hidden",n="Hidden option isn't compatible with the field property Required."),null!==t){var i=this.loader.getJQuery()("[data-property-name=".concat(t,"]"));i.find('input[type="checkbox"]').attr("disabled",!0),i.css("opacity",.3),i.find("input[type=checkbox],span.decorator").attr("title",n).css("cursor","default")}}},{key:"castValueToString",value:function(e){if(e){if(_babel_runtime_helpers_instanceof__WEBPACK_IMPORTED_MODULE_1___default()(e,Array))return JSON.stringify(e);if(e.constructor===Object)return JSON.stringify(e)}return null===e?"":String(e)}},{key:"shouldRestrictPropertiesInRC",value:function(e){var t=[editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_TEXT,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_NUMBER,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_CHECKBOX,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_RADIO,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_DROPDOWN,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_LIKERT_WRAPPER,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_PRICE,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_STAR_RATING,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_TERMS_OF_SERVICE];return"number"!==typeof e&&!(!t.includes(e.getTypeId())||!editor_Utils_FormUtils__WEBPACK_IMPORTED_MODULE_32__.a.getRepeatableContainerParent(e))}},{key:"resetControlPaymentValue",value:function(e){var t=e.getTypeId(),n=e.getProperty("payments.virtualValue");if(!e.getProperty("payments.virtualValue")&&!e.hasProperty("payments.virtualValue"))return!1;if(t===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_LIKERT_WRAPPER){var i=e.getProperty("payments.virtualValue"),r=!1;return i.forEach((function(e){return e.map((function(e){return e.paymentsValue&&(r=!0),e.paymentsValue=0}))})),r&&e.setProperty("payments.virtualValue",i)}if(t===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_DROPDOWN||t===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_RADIO||t===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_CHECKBOX||t===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_LIKERT_WRAPPER){var a=e.getProperty("payments.virtualValue"),o=!1;return a.map((function(e){return e.paymentsValue&&(o=!0),e.paymentsValue=0})),o&&e.setProperty("payments.virtualValue",a)}return e.hasProperty("payments.virtualValue")?n&&e.setProperty("payments.virtualValue",0):void 0}},{key:"createElementAttributesModel",value:function(e){var t,n,i,r,a,o,s,l,c=[],u=editor_ElementPropertyOrder__WEBPACK_IMPORTED_MODULE_20__.a.getSortedElementProperties(e),d=e.getTypeId(),p=!1;if(editor_ElementHardcodedPropertyLabel__WEBPACK_IMPORTED_MODULE_19__.a.withI18n(this.loader.getI18n()),u&&u.length){for(var h=0,_=u.length;h<_;h++)if(editor_InspectorHiddenProperties__WEBPACK_IMPORTED_MODULE_24__.a.isPropertyEditable(u[h],e)){a=u[h].name.split("."),t=editor_ElementPropertyOrder__WEBPACK_IMPORTED_MODULE_20__.a.getHardcodedPropertyAttributeName(u[h].name,e),n=editor_ElementHardcodedPropertyLabel__WEBPACK_IMPORTED_MODULE_19__.a.getHardcodedAttributeLabel(t)||t,i=a[1],r=editor_I18n_ControlPropertyTranslator__WEBPACK_IMPORTED_MODULE_23__.a.translatePropertyName(u[h].name);var g=n!==editor_ElementPropertyOrder__WEBPACK_IMPORTED_MODULE_20__.a.ATTRIBUTE_VERIFICATION;o=null;for(var m=0,f=c.length;m<f;m++)if(c[m].name===t){o=c[m];break}this.shouldRestrictPropertiesInRC(e)&&(p="payments"===t||"isNumberOfTimesAnOptionCanBeChosen"===i||"quizOptions"===i,this.resetControlPaymentValue(e),e.resetLimitChoicesProperty(),e.resetQuizOptionsProperty()),null===o&&(o={name:t,attributeHardcodedName:n,i18nName:editor_I18n_ControlPropertyTranslator__WEBPACK_IMPORTED_MODULE_23__.a.translateAttributeName(t),properties:[],isPropertyDisabled:p,propertyDisabledTooltip:this.i18n.translateTextDefault("repeatable_container_can_not_add","This option can\u2019t be used inside the repeatable container."),hasCollapsibleSection:g},c.push(o)),l=e.getProperty(u[h].name),s={type:u[h].type.replace(/\[\]$/,"Array"),i18nName:r,name:i,attributeHardcodedName:n,label:editor_ElementHardcodedPropertyLabel__WEBPACK_IMPORTED_MODULE_19__.a.getHardcodedPropertyLabel(d,u[h].name)||i,propertyFQN:u[h].name.replace(".","-"),control:JSON.stringify({element:e.getTypeId(),property:u[h].name,type:u[h].type,value:this.castValueToString(l)}),isPropertyDisabled:p,propertyDisabledTooltip:this.i18n.translateTextDefault("repeatable_container_can_not_add","This option can\u2019t be used inside the repeatable container."),hasCollapsibleSection:g},"payments.virtualValue"===u[h].name&&(s.propertyTitle=this.i18n.translateTextDefault("fieldProperty_price_tooltip","Form fields with prices assigned to them can be used as products")),"choices.useButtonLikeChoices"===u[h].name&&(s.propertyTitle=this.i18nService.translateText("fieldProperty_buttonChoicesTooltip"),s.hasTooltipIcon=!0),o.properties.push(s)}return c}}},{key:"isPropertyExcludedFromCasting",value:function(e){switch(e){case"options.placeholderText":return!0;default:return!1}}},{key:"getCastedPropertyValue",value:function(e,t){var n;switch(t){case"boolean":n="false"!==e&&!!e;break;case"int":n=""===e?null:parseInt(e);break;case"float":case"number":n=""===e?null:parseFloat(e);break;case"any":if(0===e)return e;case"string":default:n=e||null}return n}},{key:"updateEditorSettingProperty",value:function(e,t,n,i){i=this.getCastedPropertyValue(i,n);var r=e.getProperty(t);try{e.setProperty(t,i)}catch(a){this.updateEditorSettingPropertyIntoPanel(e,t,r)}}},{key:"updateElementProperty",value:function(e,t,n,i){this.isPropertyExcludedFromCasting(t)||(i=this.getCastedPropertyValue(i,n));var r=e.getProperty(t);try{e.setProperty(t,i),this.triggerPropertyChangeAction(e,t,i)}catch(a){this.updateElementPropertyIntoPanel(e,t,r)}}},{key:"triggerPropertyChangeAction",value:function(e,t,n){var i=Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.w)(e.getId(),t,n),r=Object(apps_main_Builder_store__WEBPACK_IMPORTED_MODULE_6__.a)();if(r(i),[editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_LIKERT_WRAPPER].includes(e.getTypeId())){var a=e.getChildren();Object(root_lodash_es__WEBPACK_IMPORTED_MODULE_40__.a)(a,(function(e){var i=Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.w)(e.getId(),t,n);r(i)}))}}},{key:"convertPropertyFQNToCSS",value:function(e){return e.replace(/\./g,"-")}},{key:"updateEditorSettingPropertyIntoPanel",value:function(e,t,n){!function(i,r){i("#item[data-target-element-type=setting][data-target-setting-id=".concat(e.getTypeId(),"] [data-role=property][data-property-name=").concat(r.convertPropertyFQNToCSS(t),"] input:not([data-role=secondary]), ")+"#item[data-target-element-type=setting][data-target-setting-id=".concat(e.getTypeId(),"] [data-role=property][data-property-name=").concat(r.convertPropertyFQNToCSS(t),"] textarea:not([data-role=secondary])")+"#item[data-target-element-type=setting][data-target-setting-id=".concat(e.getTypeId(),"] [data-role=property][data-property-name=").concat(r.convertPropertyFQNToCSS(t),"] select:not([data-role=secondary])")).each((function(){var e=["radio","checkbox"].indexOf(i(this).attr("type"))>-1?"checked":"value",t=this[e],r=this.hasAttribute("data-is-json-value");r&&(t=""===t?null:JSON.parse(t)),String(n)!==String(t)&&(this[e]=null===n?"":r?JSON.stringify(n):String(n));var a=this.hasAttribute("data-propagate-value-css-selector")&&this.getAttribute("data-propagate-value-css-selector")||null,o=this.hasAttribute("data-propagate-value-attribute-name")&&this.getAttribute("data-propagate-value-attribute-name")||null;o&&a&&i(a).attr(o,null===n?null:String(n)||"")}))}(this.editor.getJQuery(),this)}},{key:"updateElementPropertyIntoPanel",value:function(e,t,n){!function(i,r){i("#item[data-target-element=".concat(e.getHash(),"] [data-role=property][data-property-name=").concat(r.convertPropertyFQNToCSS(t),"] input:not([data-role=secondary]), ")+"#item[data-target-element=".concat(e.getHash(),"] [data-role=property][data-property-name=").concat(r.convertPropertyFQNToCSS(t),"] textarea:not([data-role=secondary])")+"#item[data-target-element=".concat(e.getHash(),"] [data-role=property][data-property-name=").concat(r.convertPropertyFQNToCSS(t),"] select:not([data-role=secondary])")).each((function(){var e=["radio","checkbox"].indexOf(i(this).attr("type"))>-1?"checked":"value",t=this[e],r=this.hasAttribute("data-is-json-value");r&&(t=""===t?null:JSON.parse(t)),String(n)!==String(t)&&(this[e]=null===n?"":r?JSON.stringify(n):String(n));var a=this.hasAttribute("data-propagate-value-css-selector")&&this.getAttribute("data-propagate-value-css-selector")||null,o=this.hasAttribute("data-propagate-value-attribute-name")&&this.getAttribute("data-propagate-value-attribute-name")||null;o&&a&&i(a).attr(o,null===n?null:String(n)||"")}))}(this.editor.getJQuery(),this)}},{key:"repaintFooterOnAllPages",value:function(){for(var e=0,t=this.editor.getDocument().getNumberOfPages();e<t;e++)this.editor.getDocument().getPageByIndex(e).renderFooter()}},{key:"createHTMLEditorDialog",value:function(e,t,n,i){!function(r,a,o,s){s.loadJavascript("/includes/tinymce_4.6.4/tinymce/js/tinymce/tinymce.min.js").then((function(){var s=document.createElement("style"),l="tinymce_".concat(o.tinyMCEEditorUID),c=document.createElement("textarea"),u=a.createDialog(o.getUiTranslatedString(n,t),[{type:core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.f.SAVE,callback:function(){var t=window.tinyMCE.activeEditor.getContent();window.tinyMCE.remove(),u.close(),s.parentNode.removeChild(s),r('body > div[id^="mceu"].mce-container, body > div[id^="mceu"].mce-widget').remove(),e.value=t,r(e).trigger("input").trigger("change")}},{type:core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.f.CANCEL,callback:function(){u.close(),s.parentNode.removeChild(s),window.tinyMCE.remove(),r('body > div[id^="mceu"].mce-container, body > div[id^="mceu"].mce-widget').remove()}}],{onCloseButtonClick:function(){s.parentNode.removeChild(s),window.tinyMCE.remove(),r('body > div[id^="mceu"].mce-container, body > div[id^="mceu"].mce-widget').remove()}});u.body.setAttribute("data-role","tinymce-editor"),o.tinyMCEEditorUID++,c.id=l,c.setAttribute("id",l),u.body.appendChild(c),c.value=e.value,window.tinymce.init({selector:"#".concat(l),content_style:i?String(i):"",branding:!1,menubar:!1,resize:!1,height:String(~~(.9*document.body.getBoundingClientRect().height)-300),width:String(~~(.9*document.body.getBoundingClientRect().width)-200),plugins:["textcolor","preview","link","image","emoticons","lists","hr","table","code","directionality","insertdatetime"],toolbar1:"fontselect fontsizeselect  styleselect | bold italic forecolor backcolor",toolbar2:" undo redo | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | insert table | code",fontsize_formats:"8pt 10pt 12pt 14pt 18pt 24pt 36pt",font_formats:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Open Sans=open sans;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",convert_urls:!1,image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_browser_callback:!0,entity_encoding:"raw",extended_valid_elements:"iframe[src|title|width|height|allowfullscreen|frameborder|webkitAllowFullScreen|mozallowfullscreen|allowFullScreen|allow]",file_picker_callback:function(e,t,n){editor_Uploads_UploadImageTinymce__WEBPACK_IMPORTED_MODULE_31__.a.prepareFileForUplod(e)},images_upload_handler:function(e,t,n){editor_Uploads_UploadImageTinymce__WEBPACK_IMPORTED_MODULE_31__.a.sendDataForUpload(n,t,e,o.editor.getDocument().getId())}}),document.body.appendChild(s),o.correctCSSTransformTimerFunction(s,u.body,void 0,void 0)})).fail((function(){a.alert(o.getUiTranslatedString("edt_UI_alert_failed_loading_external_module","Failed loading external module"),o.getUiTranslatedString("edt_UI_alert_failed_loading_external_module_message","There was an error loading TinyMCE module. Please retry"))}))}(this.editor.getJQuery(),this.loader.getUI(),this,this.editor.getResourceManager())}},{key:"makePreviewOverlayCoverEditorElementsOnWix",value:function(){!function(e){var t=e("body[data-form-editor-on-wix='1'] header[data-version='v1-1']").height();e("body[data-form-editor-on-wix='1'] .tmask").css({"margin-top":"-".concat(t,"px"),position:"fixed","z-index":"1000000",top:"initial"})}(this.editor.getJQuery())}},{key:"deleteSelection",value:function(){!function(e,t,n,i,r,a){if(0!==r.getLength()){for(var o,s=r.getItems(),l=0,c=0,u=s.length;c<u;c++)for(var d=0,p=s[c].flatten(),h=p.length;d<h;d++){if(!p[d].isRemovable())return void i.alert(t.getUiTranslatedString("edt_UI_alert_error_deleting_items","Error deleting items"),t.getUiTranslatedString("edt_UI_alert_error_deleting_items_message","Cannot delete selection: The selection contains items that cannot be deleted!"));p[d].isCountableWhenComputingFormNumberOfControls()&&l++}l>0&&(1===l?(o=s[0].getRootNode().attributes["data-type"].value,t.trackEvent("control_delete_".concat(o))):(o="multiple-elements",t.trackEvent("editor_delete_selected_click")));var _=function(){t.loader.getUndoService().trigger("user-action","delete-selection"),header_v3_Buttons_PreviewFormButton__WEBPACK_IMPORTED_MODULE_35__.a.setHighlight(t.loader.getFormId());var e=Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.k)(s);t.store.dispatch(e);for(var i=0,a=s.length;i<a;i++)try{s[i].getParent().removeChild(s[i])}catch(l){throw new Error(l)}n.normalize(),r.clear(),n.setActiveElement(null),t.loader.trigger("control_deleted"),o&&t.trackEditedFormEvent(o)};l>0?a.get("/modules/Typescript/Form/resources/delete-selection-dialog.html").then((function(e){var n=i.createDialog(t.getUiTranslatedString("edt_UI_create_dialog_confirm_delete_operation","Confirm delete operation"),[{type:core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.f.YES,callback:function(){n.close(),_(),t.setActiveEditorPanel("editor"),n=_=null,t.loader.trigger("deleted_element")}},{type:core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.f.NO,callback:function(){n.close(),n=_=null}}]),r=new salvage_Salvage__WEBPACK_IMPORTED_MODULE_45__.a(e);n.body.innerHTML=r.parse({length:l,isSingular:1===l}),t.editor.getI18n().translateDOMNode(n.body)})).fail((function(){i.alert(t.getUiTranslatedString("edt_UI_alert_error_executing_command","Error executing command"),t.getUiTranslatedString("edt_UI_alert_error_executing_command_message",'Failed starting application "Delete Selection": resource "/modules/Typescript/Form/resources/delete-selection-dialog.html" could not be loaded','"/modules/Typescript/Form/resources/delete-selection-dialog.html"'))})):(_(),_=null)}}(this.editor.getJQuery(),this,this.editor.getDocument(),this.loader.getUI(),this.loader.getSelection(),this.editor.getResourceManager())}},{key:"saveForm",value:function(){this.saveActivity.start()}},{key:"resizeElement",value:function(e,t,n){!function(i,r){var a,o,s=0,l=0;switch(t){case builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.LEFT:case builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.RIGHT:if(0===(s=Math.round(n/(i.getComputedColumnSpacing()+i.getComputedColumnWidth()))))return;if(l=e.getColspan(),e.withColspan(l-s),l===e.getColspan())return;break;case builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.TOP:case builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.BOTTOM:null!==(a=e.getHeight())&&0!==a||(a=e.getRootNode().getBoundingClientRect().height),a-=n,e.withHeight(a)}t!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.LEFT&&t!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.RIGHT||(null===(o=t===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.LEFT?e.getPreviousSibling():e.getNextSibling())&&builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.LEFT===t&&s>0?(o=r.editor.createElement(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_SEPARATOR),e.getParent().insertBefore(e,o),o.withColspan(s)):o&&o.withColspan(o.getColspan()+s),e.getParent()&&editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW===e.getParent().getTypeId()&&e.getParent().makeElementsToFitColspanUsingTheFairResizingAlgorithm(e.getParent().getColspan(),!1))}(this.editor.getTheme(),this)}},{key:"resizeLabelByDelta",value:function(e,t,n){!function(i,r,a){var o=Math.round(n/(i.getComputedColumnSpacing()+i.getComputedColumnWidth()));if(0!==o&&e.hasProperty("label.widthInUnits")){var s=t+o;if(!(s<1)&&!(s>e.getColspan()-1)){var l;if(s=s===a.getProperty("options.labelWidthInUnits")?null:s,e.setProperty("label.widthInUnits",s),e.isRenderingSupported())void 0!==(l=e.getRendererType())&&null!==l&&(e.rendererType=void 0,e.setRendererType(l));var c=e.getParent();c&&editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_LIKERT_WRAPPER===c.getTypeId()&&c.updateLabelWidthInUnitsToChildNodes(s)}}}(this.editor.getTheme(),0,this.editor.getDocument())}},{key:"executePageUpgradeButtonOnClickCodeIfPossible",value:function executePageUpgradeButtonOnClickCodeIfPossible(){!function($){var code=this.getPageUpgradeJavascriptCode();code&&eval(code)}(this.editor.getJQuery())}},{key:"getPageUpgradeJavascriptCode",value:function(){return this.header.getModel().settings.upgradeLink.href.replace(/^javascript\:/,"")}},{key:"executeDropOperation",value:function(e,t,n,i){var r=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.editor.getLoader().getSelection().getItems(),s=Object(apps_main_Builder_store__WEBPACK_IMPORTED_MODULE_6__.a)();if("number"!==typeof e&&!_babel_runtime_helpers_instanceof__WEBPACK_IMPORTED_MODULE_1___default()(e,editor_abstracts_FormElement__WEBPACK_IMPORTED_MODULE_14__.a))throw new Error("Invalid argument (elementTypeIdOrElement): number|IFormElement expected!");if("number"===typeof e){if(e===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_COUPON&&!this.canAddAnotherCouponCode())return;if(this.isPaywallRequired(e))return}else if(i){for(var l=e.flatten(),c=0,u=l.length;c<u;c++)try{var d=l[c].getTypeId();if(this.isPaywallRequired(d))return}catch(S){console.error(S);break}if(e.getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_COUPON&&!this.canAddAnotherCouponCode())return}if(!_babel_runtime_helpers_instanceof__WEBPACK_IMPORTED_MODULE_1___default()(t,editor_abstracts_FormElement__WEBPACK_IMPORTED_MODULE_14__.a))throw new Error("Invalid argument (dropReferenceElement): FormElement expected!");if(builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.TOP!==n&&builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.RIGHT!==n&&builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.BOTTOM!==n&&builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.LEFT!==n)throw new Error("Invalid argument (dropReferenceEdge): EElementEdge expected!");if(t.getPreviousSibling()!==e||n!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.LEFT){if("number"!==typeof e)for(var p=t;p.getTypeId()!==editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.ELEMENT_TYPE_FORM;){if(p===e&&!a)return void console.warn("drop: edge case: drop in itself");p=p.getParent()}var h=null;if(e!==editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_PAGE_BREAK||n!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.TOP&&n!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.BOTTOM||editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW!==t.getTypeId()||t.getParent().getTypeId()!==editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_PAGE){var _,g,m;h="number"===typeof e?this.editor.createElement(e).setupDefaults():i?e.cloneNode():e,"number"!==typeof e&&i&&h.onDuplicate();var f=h.getElementName(),E=this.i18n.translateTextDefault("edt_control_not_allowed_in_repeatable_text","field can't be added inside the Repeatable Container!"),y="".concat(f," ").concat(E);if(t.getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_REPEATABLE){if(n===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.TOP||n===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.BOTTOM){switch((_=this.editor.createElement(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW)).appendChild(h),n){case builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.TOP:t.getParent().getParent().insertBefore(t.getParent(),_);break;case builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.BOTTOM:t.getParent().getParent().insertAfter(t.getParent(),_)}_.withColspan(t.getParent().getColspan()),h.withColspan(_.getColspan());var T=Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(_);s(T)}else{switch(n){case builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.LEFT:t.getParent().insertBefore(t,h);break;case builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.RIGHT:t.getParent().insertAfter(t,h)}t.getParent().getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW&&t.getParent().makeElementsToFitColspanUsingTheFairResizingAlgorithm(t.getParent().getColspan())}if(!h.getId()){var v=Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(h);s(v)}}else if(t.getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW&&(n===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.TOP||n===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.BOTTOM)||(m=this.isDNDStrategy1(t,n))){if(t.isChildOf(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_REPEATABLE,!0)&&this.isDropElementNotEligibleForDropInRepeatableContainer(h)){var O=Object(redux_actions_Toasters__WEBPACK_IMPORTED_MODULE_39__.a)({message:y,id:"",type:shared_modules_ToastersApp_staticTypes_enums_EToasterTypes__WEBPACK_IMPORTED_MODULE_50__.a.ERROR});return void s(O)}if(this.trackEvent("dnd_strategy_1"),m&&(t=t.getParent()),(_=this.editor.createElement(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW)).appendChild(h),n===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.TOP?t.getParent().insertBefore(t,_):t.getParent().insertAfter(t,_),_.withColspan(t.getParent().getColspan()),h.withColspan(_.getColspan()),this.loader.getOpenInspectorOnInsert()&&this.loader.execCommand("select-element",h),!h.getId()){var b=Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(_);s(b);var C=Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(h);s(C)}}else if(t.getTypeId()!==editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW||n!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.LEFT&&n!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.RIGHT)if(t.getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_PAGE&&n===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.TOP&&0===(t.getChildren()||[]).length)console.warn("dnd: strategy 3"),this.trackEvent("dnd_strategy_3_drop_inside_empty_page"),(_=this.editor.createElement(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW)).appendChild(h),t.appendChild(_),_.withColspan(t.getColspan()),h.withColspan(_.getColspan()),s(Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(_)),s(Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(h));else if(t.getElementKind()===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.p.CONTAINER&&t.getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_REPEATABLE_GROUP){if(console.warn("dnd: strategy 6"),t.isChildOf(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_REPEATABLE,!0)&&this.isDropElementNotEligibleForDropInRepeatableContainer(h)){var I=Object(redux_actions_Toasters__WEBPACK_IMPORTED_MODULE_39__.a)({message:y,id:"",type:shared_modules_ToastersApp_staticTypes_enums_EToasterTypes__WEBPACK_IMPORTED_MODULE_50__.a.ERROR});return void s(I)}(_=this.editor.createElement(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW)).withColspan(t.getColspan()),_.appendChild(h),h.withColspan(t.getColspan()),t.appendChild(_),s(Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(_)),s(Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(h))}else if(t.getElementKind()!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.p.CONTROL&&t.getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW||n!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.TOP&&n!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.BOTTOM)if((t.getElementKind()!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.p.CONTROL&&t.getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW||n!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.LEFT&&n!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.RIGHT)&&(t.getTypeId()!==editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_REPEATABLE||n!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.LEFT&&n!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.RIGHT))console.warn("dnd: no elected strategy");else{if(t.isChildOf(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_REPEATABLE,!0)&&this.isDropElementNotEligibleForDropInRepeatableContainer(h)){var R=Object(redux_actions_Toasters__WEBPACK_IMPORTED_MODULE_39__.a)({message:y,id:"",type:shared_modules_ToastersApp_staticTypes_enums_EToasterTypes__WEBPACK_IMPORTED_MODULE_50__.a.ERROR});return void s(R)}console.warn("dnd: strategy 5"),this.trackEvent("dnd_strategy_5"),n===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.LEFT?t.getParent().insertBefore(t,h):t.getParent().insertAfter(t,h),h.getId()||s(Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(h)),t.getParent().getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW&&t.getParent().makeElementsToFitColspanUsingTheFairResizingAlgorithm(t.getParent().getColspan())}else{if(t.isChildOf(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_REPEATABLE,!0)&&this.isDropElementNotEligibleForDropInRepeatableContainer(h)){var P=Object(redux_actions_Toasters__WEBPACK_IMPORTED_MODULE_39__.a)({message:y,id:"",type:shared_modules_ToastersApp_staticTypes_enums_EToasterTypes__WEBPACK_IMPORTED_MODULE_50__.a.ERROR});return void s(P)}if(console.warn("dnd: strategy 4"),this.trackEvent("dnd_strategy_4_drop_inside_container"),t.getParent().getTypeId()!==editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW)return void console.warn("DND: Unexpected edge case: The parent of the reference is not a ROW!");t.getParent().getParent().getElementKind()!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.p.CONTAINER||-1!==[editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_PAGE,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.ELEMENT_TYPE_FORM,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_REPEATABLE_GROUP].indexOf(t.getParent().getParent().getTypeId())?((g=this.editor.createElement(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_DIV)).withColspan(t.getColspan()),_=this.editor.createElement(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW),g.appendChild(_),t.getParent().insertBefore(t,g),_.appendChild(t),_.withColspan(t.getColspan())):console.warn("nowrap"),(_=this.editor.createElement(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW)).appendChild(h),builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.TOP===n?t.getParent().getParent().insertBefore(t.getParent(),_):t.getParent().getParent().insertAfter(t.getParent(),_),_.withColspan(_.getParent().getColspan()),h.withColspan(_.getColspan()),h.getId()||(s(Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(_)),s(Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(h)))}else{if(t.isChildOf(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_REPEATABLE,!0)&&this.isDropElementNotEligibleForDropInRepeatableContainer(h)){var N=Object(redux_actions_Toasters__WEBPACK_IMPORTED_MODULE_39__.a)({message:y,id:"",type:shared_modules_ToastersApp_staticTypes_enums_EToasterTypes__WEBPACK_IMPORTED_MODULE_50__.a.ERROR});return void s(N)}this.trackEvent("dnd_strategy_2"),0===t.getChildren().length?(t.appendChild(h),h.getId()||s(Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(h))):n===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.LEFT?(t.insertBefore(t.getFirstChild(),h),h.getId()||s(Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(h))):(t.insertAfter(t.getLastChild(),h),h.getId()||s(Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(h))),t.makeElementsToFitColspanUsingTheFairResizingAlgorithm(t.getColspan())}}else t.getParent().split(t,n);try{this.editor.getDocument().normalize()}catch(S){setTimeout((function(){r.editor.getDocument().normalize()}),100)}if(i||"number"===typeof e||this.trackEvent("control_order"),i||"number"!==typeof e||(this.trackEventOnElementAddOrDuplicateByElementId(e),this.trackEvent("control_insert_drag_and_drop"),h&&(h.getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_COUPON&&this.trackEvent("payments_coupon_add"),h.getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_FORMULA&&this.trackEvent("payments_formula_add"))),null!==h&&i){var A=h.getRootNode().attributes["data-type"].value;this.trackEvent("control_duplicate_".concat(A)),this.trackEvent("control_duplicate_by_drag_".concat(A)),this.trackEditedFormEvent(A),setTimeout((function(){r.editor.getLoader().execCommand("select-element",h)}),10)}else setTimeout((function(){1===o.length&&r.editor.getLoader().execCommand("select-element",o[0])}),10);this.shouldRestrictPropertiesInRC(e)&&(this.resetControlPaymentValue(e),e.resetLimitChoicesProperty(),e.resetQuizOptionsProperty())}else console.warn("drop: edge case: drop after itself")}},{key:"selectElementsByMousePoints",value:function(e,t,n){if(!e||!t||"number"!==typeof e.left||"number"!==typeof t.left||"number"!==typeof e.top||"number"!==typeof t.top)throw new Error("Illegal arguments: pointA and pointB must be of type IPoint");var i={left:Math.min(e.left,t.left),top:Math.min(e.top,t.top),width:Math.abs(e.left-t.left),height:Math.abs(e.top-t.top)};0!==i.width&&0!==i.height&&function(e,t){var r,a;n||t.clear();for(var o=0,s=e.flatten(),l=s.length;o<l;o++)s[o].getElementKind()!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.p.CONTROL&&s[o].getTypeId()!==editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_LIKERT_WRAPPER&&s[o].getTypeId()!==editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_REPEATABLE||(r={left:(a=s[o].getRootNode().getBoundingClientRect()).left,top:a.top,width:a.width,height:a.height},s[o].isSelectable()&&editor_Utils_FormUtils__WEBPACK_IMPORTED_MODULE_32__.a.rectangleIntersects(i,r)&&t.add(s[o]));n||1!==t.getLength()||e.setActiveElement(t.getItems()[0])}(this.editor.getDocument(),this.loader.getSelection())}},{key:"interactiveDisplaySelectionFeedbackByMousePoints",value:function(e,t){if(!e||!t||"number"!==typeof e.left||"number"!==typeof t.left||"number"!==typeof e.top||"number"!==typeof t.top)throw new Error("Illegal arguments: pointA and pointB must be of type IPoint");var n={left:Math.min(e.left,t.left),top:Math.min(e.top,t.top),width:Math.abs(e.left-t.left),height:Math.abs(e.top-t.top)};!function(e,t){for(var i,r,a,o=0,s=e.flatten(),l=s.length;o<l;o++)s[o].isSelectable()&&(0===n.width||0===n.height?r=!1:(i={left:(a=s[o].getRootNode().getBoundingClientRect()).left,top:a.top,width:a.width,height:a.height},r=editor_Utils_FormUtils__WEBPACK_IMPORTED_MODULE_32__.a.rectangleIntersects(n,i)),t(s[o].getRootNode())[r?"addClass":"removeClass"]("selected"))}(this.editor.getDocument(),this.loader.getJQuery())}},{key:"mergePageByIndexWithNextPage",value:function(e){var t=this,n=this.editor.getDocument().getPageByIndex(e),i=this.editor.getDocument().getPageByIndex(e+1);n&&i&&(n.mergeWith(i),setTimeout((function(){t.editor.getDocument().repaginate()}),100))}},{key:"executeSelectionCommand",value:function(e){!function(t,n,i,r){switch(e){case"delete-selection":t.deleteSelection();break;default:r.alert(t.getUiTranslatedString("edt_UI_alert_unknown_inspector_command","Unknown inspector command"),t.getUiTranslatedString("edt_UI_alert_unknown_inspector_command_message","The command ".concat(JSON.stringify(e)," is unknown to the engine (might be not implemented)"),JSON.stringify(e)))}}(this,this.editor.getJQuery(),this.editor.getDocument(),this.editor.getLoader().getUI())}},{key:"executeElementCommand",value:function(e,t){!function(n,i,r,a){var o;switch(t){case"delete-element":n.deleteSelection();break;case"duplicate-element":n.duplicateElement(e);break;case"edit-element":!n.loader.getEditorPanelGroup().isVisible()||(o=n.loader.getEditorPanelGroup().getActivePanel())&&"item"!==o.getId()?(n.loader.getEditorPanelGroup().setActivePanel("item"),n.loader.getEditorPanelGroup().setVisible(!0)):n.loader.getEditorPanelGroup().setVisible(!1);break;case"move-up-element":n.moveElement(e,builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.q.UP);break;case"move-down-element":n.moveElement(e,builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.q.DOWN);break;default:a.alert(n.getUiTranslatedString("edt_UI_alert_unknown_inspector_command","Unknown inspector command"),n.getUiTranslatedString("edt_UI_alert_unknown_inspector_command_message","The command ".concat(JSON.stringify(t)," is unknown to the engine (might be not implemented)"),JSON.stringify(t)))}}(this,this.editor.getJQuery(),this.editor.getDocument(),this.editor.getLoader().getUI())}},{key:"addPerfectScrollbar",value:function(e){!function(t){t(e).css("overflow","auto"),t(e).perfectScrollbar({minScrollbarLength:10}),t(e).bindEditorScrollEvents()}(this.editor.getJQuery())}},{key:"duplicateVirtualElement",value:function(e){var t=e.getElements();if(1!==t.length){if(!(t.length<2)){var n=this.editor.getDocument().flatten();t.sort((function(e,t){return n.indexOf(e)-n.indexOf(t)}));var i,r,a=this.editor.getDocument(),o=this.editor,s=a.getPageByIndex(a.getNumberOfPages()-1),l=[],c=this.loader.getSelection();if(s){for(var u=a.getProperty("options.labelWidthInUnits"),d=!1,p=0,h=t.length;p<h;p++){try{var _=t[p].getTypeId();if(this.isPaywallRequired(_))break}catch(y){console.error(y);break}i=o.createElement(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW,void 0,a),(r=t[p].cloneNode()).withColspan(i.getColspan()),r.hasProperty("label.widthInUnits")&&r.setProperty("label.widthInUnits",u),i.appendChild(r),l.push(r),s.appendChild(i),r.reRender(),d=!0;var g=Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(i);this.store.dispatch(g);var m=Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(r);this.store.dispatch(m)}if(d){c.clear();for(var f=0,E=l.length;f<E;f++)l[f].onDuplicate(),c.add(l[f]);a.normalize(),l[0].getRootNode().scrollIntoView()}}}}else this.duplicateNonVirtualElement(t[0])}},{key:"duplicateNonVirtualElement",value:function(e){if(e.isAttached()){var t=e.getTypeId();if(!this.isPaywallRequired(t)){var n,i=e.getParent(),r=e.cloneNode();if(r.onDuplicate(),i.getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW){i=i.getParent(),n=e.getForm().getEngine().createElement(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW),i.insertAfter(e.getParent(),n),n.withColspan(e.getParent().getColspan()),n.appendChild(r);var a=Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(n);this.store.dispatch(a);var o=Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(r);this.store.dispatch(o)}else{i.insertAfter(e,r);var s=Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.c)(r);this.store.dispatch(s)}this.editor.getDocument().normalize(),this.editor.getLoader().execCommand("select-element",r)}}}},{key:"duplicateElement",value:function(e){if(e&&e.isDuplicatable()&&(e.getTypeId()!==editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_COUPON||this.canAddAnotherCouponCode())){this.loader.getUndoService().trigger("user-action","duplicate-element"),e.getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.VIRTUAL_SELECTION_CONTROL?this.duplicateVirtualElement(e):this.duplicateNonVirtualElement(e);var t=e.hasOwnProperty("elements")?"multiple-elements":e.getRootNode().attributes["data-type"].value;this.trackEvent("control_duplicate_".concat(t)),this.trackEditedFormEvent(t)}}},{key:"dispatchSettingPropertyChangeInInspector",value:function(e,t,n,i){var r=this.editor.getJQuery(),a=r(t).attr("data-target-setting-id"),o=n.hasAttribute("data-propagate-value-css-selector")&&n.getAttribute("data-propagate-value-css-selector")||null,s=n.hasAttribute("data-propagate-value-attribute-name")&&n.getAttribute("data-propagate-value-attribute-name")||null;if(a){var l=e.getEditorSettingByTypeId(a),c=r(n).closest("[data-property-name]").attr("data-property-name"),u=r(n).closest("[data-property-type]").attr("data-property-type");if(c&&u){var d=n[i];if(n.hasAttribute("data-is-json-value"))try{d=""!==d?JSON.parse(String(d||"")):null}catch(p){d=null}this.updateEditorSettingProperty(l,c.replace(/-/g,"."),u,d),o&&s&&r(o).each((function(){var e=this;setTimeout((function(){r(e).trigger("attribute:propagate")}),50)})).attr(s,null===d?null:String(d)||""),this.trackEvent("change_setting_property",{},1e3),this.loader.getUndoService().trigger("user-action","change-".concat(c.replace(/-/g,"."))),this.loader.trigger("payments_summary_realtime_changed")}}}},{key:"dispatchPropertyChangeInInspector",value:function(e,t,n,i){var r=this.editor.getJQuery(),a=r(t).attr("data-target-element"),o=n.hasAttribute("data-propagate-value-css-selector")&&n.getAttribute("data-propagate-value-css-selector")||null,s=n.hasAttribute("data-propagate-value-attribute-name")&&n.getAttribute("data-propagate-value-attribute-name")||null;if(a){var l=e.getElementByHash(a),c=r(n).closest("[data-property-name]").attr("data-property-name"),u=r(n).closest("[data-property-type]").attr("data-property-type");if(c&&u){var d=n[i];if(n.hasAttribute("data-is-json-value"))try{d=""!==d?JSON.parse(String(d||"")):null}catch(h){d=null}this.updateElementProperty(l,c.replace(/-/g,"."),u,d),o&&s&&r(o).each((function(){var e=this;setTimeout((function(){r(e).trigger("attribute:propagate")}),50)})).attr(s,null===d?null:String(d)||"");var p=l.hasOwnProperty("elements")?"multiple-elements":l.getRootNode().attributes["data-type"].value;this.trackEvent("change_control_property_".concat(p),{},1e3),this.trackEditedFormEvent(p),header_v3_Buttons_PreviewFormButton__WEBPACK_IMPORTED_MODULE_35__.a.setHighlight(this.loader.getFormId()),this.loader.getUndoService().trigger("user-action","change-".concat(c.replace(/-/g,".")))}}}},{key:"updateElementErrorsInInspectorPanel",value:function(e){for(var t=[],n=[],i=(e.getErrors()||[]).slice(0),r=[],a=0,o=i.length;a<o;a++)i[a].propertyName&&r.push(i[a].propertyName.replace(".","-"));!function(e,a){var o,s;a("#item").each((function(){a(this).find("[data-role=property]").each((function(){r.indexOf(this.getAttribute("data-property-name"))>-1?this.setAttribute("data-has-error",""):this.removeAttribute("data-has-error")})),a(this).find("div[data-role=element-error]").each((function(){t.push(this)}))}));for(var l=0,c=t.length;l<c;l++){o={code:~~t[l].getAttribute("data-error-code"),message:null},t[l].hasAttribute("data-property-name")&&(o.propertyName=t[l].getAttribute("data-property-name")),t[l].hasAttribute("data-field-name")&&(o.fieldName=t[l].getAttribute("data-field-name")),n.push(o),o.node=t[l],s=!1;for(var u=0,d=i.length;u<d;u++)if(i[u].code===o.code&&i[u].fieldName===o.fieldName&&i[u].propertyName===o.propertyName){i[u].isHTML?t[l].innerHTML=i[u].message:t[l].textContent=i[u].message,s=!0,i.splice(u,1);break}s||t[l].parentNode.removeChild(t[l])}for(var p,h=document.getElementById("item-global-errors"),_=0,g=i.length;_<g;_++)(p=document.createElement("div")).setAttribute("data-role","element-error"),p.setAttribute("data-error-code",String(i[_].code)),i[_].isHTML?p.innerHTML=i[_].message:p.textContent=String(i[_].message||""),i[_].fieldName&&p.setAttribute("data-field-name",i[_].fieldName),i[_].propertyName?(p.setAttribute("data-property-name",i[_].propertyName),a("#item").find('div[data-role=property][data-property-name="'.concat(i[_].propertyName.replace(/\./g,"-"),'"]')).after(p)):h.appendChild(p)}(0,this.editor.getJQuery())}},{key:"resetScrollbarPosition",value:function(e){this.editor.getJQuery()(e).perfectScrollbar("update")}},{key:"displayPostMigrationNotification",value:function(){var e=this,t=this.editor.getDocument().getId();if("1"===window.localStorage.getItem("migrated_to_new_editor_".concat(t))){window.localStorage.removeItem("migrated_to_new_editor_".concat(t));var n=this.loader.getI18n().translateText("edt_text_convert_to_new_form_confirmation");this.loader.getUI().createNotification(n,!1,core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.i.SUCCESS),this.loader.getJQuery()("a[data-role=import-legacy-themes-notification]").click((function(){e.displayLegacyEditorThemesDialog()}))}}},{key:"displayReadonlySubuserCannotSave",value:function(){this.editor.getDocument().getId();var e=this.loader.getI18n().translateText("edt_text_form_readonly");this.loader.getUI().createNotification(e,!1,core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.i.DEFAULT,!1)}},{key:"displayMigrationNotification",value:function(){this.loader.getLoaderDependency(builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.M.SHOW_DOWNGRADE_NOTIFICATION)&&this.loader.getUI().createNotification('<a data-role="downgrade-editor-with-backup" href="javascript:;">Revert to latest old editor version</a> or <a data-role="downgrade-editor" href="javascript:;">Migrate current version to old editor</a>',!1,core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.i.DEFAULT,!1).setAttribute("data-is-regular-box","1")}},{key:"downgradeToOldEditor",value:function(e){!function(t,n,i,r){var a=t.createDialog(e?n.getUiTranslatedString("edt_UI_revert_old_editor","Revert to latest old editor version"):n.getUiTranslatedString("edt_UI_migrate_old_editor","Migrate current version to old editor"),[{callback:function(){a.close(),i.post("/modules/EditorV2/ajax-upgrade-editor.php",{do:"downgrade-editor",id:r,restoreFromBackup:e}).then((function(){t.closeAllNotifications(),window.location.reload(!0)})).fail((function(){t.alert(n.getUiTranslatedString("edt_UI_alert_error_downgrading","Error downgrading"),n.getUiTranslatedString("edt_UI_alert_error_downgrading_message","There was an error downgrading to previous editor version. Please try again later"))}))},type:core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.f.YES},{callback:function(){a.close()},type:core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.f.NO}],{width:"500px"});a.setHTML(e?n.getUiTranslatedString("edt_UI_revert_old_editor_message","Are you sure you want to revert to latest old editor version?"):n.getUiTranslatedString("edt_UI_migrate_old_editor_message","Are you sure you want to migrate current version to the old editor?"))}(this.loader.getUI(),this,this.loader.getJQuery(),this.editor.getDocument().getId())}},{key:"disableMigrationNotification",value:function(){var e;e=this.loader.getUI(),this.loader.getJQuery(),this.editor.getDocument().getId(),e.closeAllNotifications()}},{key:"isErrorStateNotification",value:function(e){return e&&"form-error-state-notification"===e.getAttribute("data-notification-role")}},{key:"updateFormErrorStateNotification",value:function(){for(var e=this.loader.getUI().getCurrentNotification(),t=this.isErrorStateNotification(e),n=!1,i=this.editor.getDocument().flatten(),r=0,a=i.length;r<a;r++)if(null!==i[r].getErrors()){n=!0;break}if(!n)for(var o=this.editor.getDocument().getEditorSettings()||[],s=0,l=o.length;s<l;s++)if(null!==o[s].getErrors()){n=!0;break}n&&t||!n&&!t||(n?this.loader.getUI().createNotification("There are errors on your form! Changes to fields highlighted in red won\u2019t be saved until you fix the errors.",!0,core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.i.ERROR,!1).setAttribute("data-notification-role","form-error-state-notification"):t&&this.loader.getUI().closeAllNotifications())}},{key:"executeFormPostUnserializationActions",value:function(){if(localStorage){var e="editor_v2_implicit_form_save_".concat(this.editor.getDocument().getId());localStorage.getItem(e)&&(localStorage.removeItem(e),this.loader.saveDocumentInImmediateMode())}}},{key:"trackEvent",value:function(e,t,n){var i;if(void 0===n)return console.warn("Track event: ",e),void(null===(i=CFTracker)||void 0===i||i.event(e,t));null!==t&&"object"===_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(t)&&0!==Object.keys(t).length||(t=void 0);var r=JSON.stringify({eventName:e,eventTags:t,throttleTimeout:n});void 0===this.trackers[r]&&(this.trackers[r]=core_helpers_Throttle__WEBPACK_IMPORTED_MODULE_8__.a.create((function(){var n;console.warn("Track event: ",e),null===(n=CFTracker)||void 0===n||n.event(e,t)}),n)),this.trackers[r]()}},{key:"onThemeEnteringPreviewMode",value:function(){!function(e,t){e("#theme-panel").attr("data-allow-revert",null).find("[data-role=vertical-content]").each((function(){this.scrollTop=0})).find(".selected").removeClass("selected"),e("#theme-panel [data-role=current-theme]").each((function(){var n;this.innerHTML="",n=this,e("#options [data-role=theme-actions-panel] [data-role=theme]").each((function(){var i=this.cloneNode(!0);i.setAttribute("data-theme-id",null),e(i).addClass("selected");var r=document.createElement("button");r.setAttribute("data-role","menu-popup"),r.setAttribute("data-menu-items","[{'name': 'Apply to form', 'action': 'apply-theme', 'i18n-name': 'edt_theme_menu_apply_theme' },{ 'name': 'Save theme as...', 'action': 'save-theme', 'i18n-name': 'edt_theme_menu_save_theme' }]");var a=document.createElement("span");a.className="i-md i123-more_vertical",r.appendChild(a),t.createMenuPopup(r),e(i).find(".theme-name").append(r),n.appendChild(i)}))}))}(this.editor.getJQuery(),this)}},{key:"discardThemeChanges",value:function(){this.editor.getTheme().applyTheme(this.editor.getTheme().getThemeById(null)),this.setActiveEditorPanel("options"),this.loadThemePropertiesIntoPanel()}},{key:"updateThemeThumbnailFont",value:function(e){var t=this.editor.getJQuery()("#options [data-role=theme][data-theme-id] > .thumbnail > div:nth-child(5)").get(0);if(t){var n=this.editor.getLoader().getLoaderDependency(builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.M.FONTS_MANAGER);if(n.isSystemFont(e))t.removeAttribute("class");else{var i=n.getFontByName(e);i?t.className="gf-123 ".concat(i.cssClassAaBbCc):t.removeAttribute("class")}}}},{key:"getUiTranslatedString",value:function(e,t){for(var n,i,r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];return i=(n=this.i18n).translateText.apply(n,[e].concat(a)),e&&i&&i!==e?i:t}},{key:"reloadVisiblePanel",value:function(){console.log("update current panel");var e=this.loader.getEditorPanelGroup().getActivePanel(),t=this.loader.getEditorPanelGroup().getActivePanel().getRootNode().getAttribute("data-target-element-type"),n=this.loader.getEditorPanelGroup().getActivePanel().getRootNode().getAttribute("data-target-setting-id");switch(e.getId()){case"options":this.loadThemePropertiesIntoPanel();break;case"item":if("setting"!==t)this.onSelectionChanged();else{var i=this.loader.getEngine().getDocument().getEditorSettingByTypeId(n);this.loader.getEngine().getLoader().getCommandDispatcher().loadEditorSettingIntoPanel(i)}}}},{key:"displayNotificationForFinalizationPricesAndPaymentProviderIfNeeded",value:function(){var e=Object(core_helpers_UrlUtils__WEBPACK_IMPORTED_MODULE_9__.o)(window.location.href),t=Object(core_helpers_UrlUtils__WEBPACK_IMPORTED_MODULE_9__.p)((e.search||"?").replace(/^\?/g,""));t.fromNewFormWizard&&1===~~t.fromNewFormWizard&&this.loader.getJQuery()(this.loader.getUI().createNotification('<span class="i-lg i123-notifications"></span>Make sure to finalize your <a href="javascript:;" data-role="finalize-prices">prices</a> &amp; <a href="javascript:;" data-role="finalize-payment-provider">payment provider</a> setup.<div class="close"></div>',!1,core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.i.DEFAULT,!1)).attr("data-notification-role","finalize-prices-notification").on("click","a[data-role]",(function(){var e="".concat(window.location.href.replace("edit_fields","settings"),"&tab=4");switch(this.getAttribute("data-role")){case"finalize-prices":window.location.href="".concat(e,"#field-setup-sheet");break;case"finalize-payment-provider":window.location.href="".concat(e,"#payment-processors-sheet")}}))}},{key:"notifyTrackerWithUserTimeSpentOnEditor",value:function(e){var t="registered_user_";e&&(t="first_registration_"),this.trackEvent("".concat(t,"15_sec"),{},15e3),this.trackEvent("".concat(t,"30_sec"),{},3e4),this.trackEvent("".concat(t,"60_sec"),{},6e4),this.trackEvent("".concat(t,"120_sec"),{},12e4)}},{key:"showHipaaDialog",value:function(){!function(e,t,n,i,r){n.getResourceManager().get("/modules/Typescript/Form/resources/hipaa-popup.html").then((function(n){var a=new salvage_Salvage__WEBPACK_IMPORTED_MODULE_45__.a(n),o=function(t,n){e("#save-checked-security-option").val(t),e(".security-option").removeClass("focus-state"),e(".form-type-chosen").removeClass("focus-state"),n.addClass("focus-state"),n.find(".form-type-chosen").addClass("focus-state"),e(".new-editor-hipaa-popup-buttons").find(".btn-disabled").removeClass("btn-disabled")},s=i.createDialog("",[{type:core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.f.CONTINUE,callback:function(){var n=e("#save-checked-security-option").val();e.post("/modules/EditorV2/ajax-upgrade-editor.php",{do:"changeFormhipaaShield",id:r,secureForm:n}).then((function(){s.close(),window.location.reload()})).fail((function(){s.close(),i.alert(t.getUiTranslatedString("dialog_generic_error","Error"),t.getUiTranslatedString("dialog_hipaa_error_content","Something went wrong. Please contact us at support@123formbuilder.com"))}))}}]);e(s.dialog).attr("data-dialog-role","hipaa-security-form-popup").attr("data-no-selected-choices",""),e(s.body).on("click","div.new-form-compliance-secure",(function(){e(s.dialog).attr("data-no-selected-choices",null),o(1,e(this))})),e(s.body).on("click","div.new-form-compliance-regular",(function(){e(s.dialog).attr("data-no-selected-choices",null),o(0,e(this))})),e(s.body).html(a.parse({})),t.i18n.translateDOMNode(s.body)})).fail((function(){i.alert(t.getUiTranslatedString("dialog_generic_error","Error"),t.getUiTranslatedString("dialog_hipaa_error_content","Something went wrong. Please contact us at support@123formbuilder.com"))}))}(this.editor.getJQuery(),this,this.editor,this.loader.getUI(),this.loader.getFormId())}},{key:"repopulateCustomCSSPanelWithActualValues",value:function(){!function(e,t){t.editor.getTheme().updateCustomFormCSSText(),t.editor.getTheme().updateCustomFormCSSFromUrl(),e("#theme-custom-css div[data-role=vertical-content]").each((function(){e(this).find("textarea[data-role=custom-css]").val(t.editor.getDocument().getConfiguration().getProperty("customCss")),e(this).find("input[data-role=custom-css-from-url]").val(t.editor.getDocument().getConfiguration().getProperty("customCssFromUrl"))})),t.updatePreviousValueCustomCSS(),t.updatePreviousValueCustomCSSURL()}(this.loader.getJQuery(),this)}},{key:"updatePreviousValueCustomCSS",value:function(){var e=this;!function(t){var n=e.loader.getEngine().getDocument().getConfiguration().getProperty("customCss");t("#theme-custom-css textarea[data-role=custom-css]").attr(n?{"data-previous-value":n,value:n}:{"data-previous-value":"",value:""})}(this.loader.getJQuery())}},{key:"updatePreviousValueCustomCSSURL",value:function(){var e=this;!function(t){var n=e.loader.getEngine().getDocument().getConfiguration().getProperty("customCssFromUrl");t("#theme-custom-css input[data-role=custom-css-from-url]").attr(n?{"data-previous-value":n,value:n}:{"data-previous-value":"",value:""})}(this.loader.getJQuery())}},{key:"setCustomCssText",value:function(e){this.loader.getUndoService().trigger("user-action","Changed custom CSS"),this.loader.getEngine().getDocument().getConfiguration().withProperty("customCss",e||""),this.loader.getEngine().getTheme().updateCustomFormCSSText(),this.updatePreviousValueCustomCSS()}},{key:"setCustomCssUrl",value:function(e){var t=this;editor_Utils_FormUtils__WEBPACK_IMPORTED_MODULE_32__.a.isRealCSSUrl(e,this.loader.getEngine()).then((function(n){t.loader.getUndoService().trigger("user-action","Changed custom CSS"),t.loader.getEngine().getDocument().getConfiguration().withProperty("customCssFromUrl",n?e:""),t.updateCustomCSSErrorDOMNodes(!n,"custom-css-from-url"),t.loader.getEngine().getTheme().updateCustomFormCSSFromUrl(),t.updatePreviousValueCustomCSSURL()}))}},{key:"updateCustomCSSErrorDOMNodes",value:function(e,t){!function(e,n,i){var r=i("#theme-custom-css").find("div[data-property-name=".concat(t,"]"));if(""!==r.find("input").val()&&n){if(n&&!r.is("[data-property-has-errors='1']")){var a=document.createElement("span");a.setAttribute("data-error-span-in-inspector","1"),a.textContent="custom-css"===t?e.getI18n().translateText("edt_custom_css_error_invalid_css_text"):e.getI18n().translateText("edt_custom_css_error_invalid_url_text"),r.append(a),r.attr("data-property-has-errors","1")}}else r.find("span[data-error-span-in-inspector]").remove(),r.removeAttr("data-property-has-errors")}(this.loader,e,this.loader.getJQuery())}},{key:"saveExternalFormTheme",value:function(e){return function(t,n,i,r){return t.Deferred((function(a){try{var o=n.getExternalTheme();if(o.getThemeStrategy()!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.nb.WIX_THEME)throw new Error("Illegal method call. Saving wix external theme is possible only on wix when a theme is selected!");if(!i)throw new Error("Illegal method call. A wix environment is not detected!");var s=o.enumerateProperties();if(null!==i&&i.compId&&i.instanceId){var l="/modules/EditorV2/ajax/ajax-save-wix-theme-properties.php?form_id=".concat(r,"&instanceID=").concat(encodeURIComponent(i.instanceId),"&compID=").concat(encodeURIComponent(i.compId));void 0!==e&&(l+="&themeID=".concat(encodeURIComponent(String(e)),"&do=save-theme-id")),t.ajax({type:"POST",url:l,data:{theme:btoa(JSON.stringify(s))}}).then((function(e){a.resolve(!0)})).fail((function(e){a.reject(e)}))}else a.reject(new Error("Invalid wix identity."))}catch(c){a.reject(c)}})).promise()}(this.loader.getJQuery(),this.loader.getEngine().getTheme(),this.loader.getLoaderDependency(builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.M.WIX_AUTHORIZED_REQUEST_DETAILS),this.loader.getFormId())}},{key:"addSetting",value:function(e){if(this.editor.getDocument().hasEditorSetting(e))throw new Error("Setting ".concat(JSON.stringify(e)," already added!"));var t=this.editor.getFactory().createEditorSettingByTypeId(e,this.editor.getDocument());if(!this.userService.canEnableFormPayments()){var n=this.features.getInstance();return n.isPaywallsV2Active()||n.isPaywalls2022Active()?void this.triggerFeatureModal(shared_staticTypes_enums_EFeatureNames__WEBPACK_IMPORTED_MODULE_51__.a.ENABLE_FORM_PAYMENTS):void this.triggerPaywall(core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.k.PAYMENTS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,t.getTypeId())}this.loader.getUndoService().trigger("user-action",'Add editor setting "'.concat(e,'"')),this.editor.getDocument().withEditorSetting(t),t.getGroupTypeId()===editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__.a.PAYMENT_PROCESSORS&&(this.trackEvent("payments_processor_add",{name:t.getConfiguration().name}),this.trackFirstProcessorAdded()),this.loader.getOpenInspectorOnInsert()&&e!==editor_EditorSettings_EditorSettingTypes__WEBPACK_IMPORTED_MODULE_17__.a.PAYMENT_SUMMARY_EDITOR_SETTING&&this.loadEditorSettingIntoPanel(t)}},{key:"updateEditorSettingsPanel",value:function(){for(var e,t,n,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=this.loader.getLoaderDependency(builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.M.EDITOR_SETTINGS_PANEL),a=this.editor.getDocument().getEditorSettings(),o=this.editor.getDocument().getConfiguration().getProperty("isPaymentSandboxEnabled"),s=(this.loader.getSummarySettingProperty("showSummaryAfterSubmit"),!1),l={},c={settings:[]},u=0,d=a.length;u<d;u++)if(a[u].isVisible()){s=!0;var p=a[u].getGroupTypeId();void 0===l[p]&&(l[p]=[]);var h=editor_Utils_FormUtils__WEBPACK_IMPORTED_MODULE_32__.a.clone(a[u].getConfiguration());h.isEnabled=!a[u].hasProperty("isEnabled")||a[u].getProperty("isEnabled"),h.hasErrors=a[u].hasErrors(),l[p].push(h)}if(e=this.editor.getDocument().getRootNode(),!s)return e.removeAttribute("data-has-settings"),void(r.textContent="");for(var _ in l)if(l.hasOwnProperty(_)){l[_].sort((function(e,t){return e.index-t.index}));var g=editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__.a.getGroupLabelTextByGroupTypeId(_),m=editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__.a.getGroupLabelI18nTextByGroupTypeId(_);_===editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__.a.PAYMENT_PROCESSORS&&o&&(g=editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__.a.getGroupLabelTextByGroupTypeId(editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__.a.PAYMENT_PROCESSORS_SANDBOX),m=editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__.a.getGroupLabelI18nTextByGroupTypeId(editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__.a.PAYMENT_PROCESSORS_SANDBOX)),_!==editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__.a.PAYMENT_SETTINGS&&c.settings.push({groupTypeId:_,groupTypeName:g,groupI18nName:m,index:editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__.a.getGroupSortIndex(_),settings:l[_]})}c.settings.sort((function(e,t){return e.index-t.index})),t=this.editor.getResourceManager(),n=this,t.get("/modules/Typescript/Form/resources/editor-settings-panel.html").then((function(t){var a=new salvage_Salvage__WEBPACK_IMPORTED_MODULE_45__.a(t);r.innerHTML=a.parse(c),n.i18n.translateDOMNode(r),e.setAttribute("data-has-settings",""),i&&r.scrollIntoView()})).fail((function(t){r.innerHTML="FAILED TO LOAD SETTINGS PANEL RESOURCE!",e.setAttribute("data-has-settings",""),i&&r.scrollIntoView()})),i&&r.scrollIntoView()}},{key:"updateSettingErrorStateInEditorSettingsPanel",value:function(e){!function(t,n){t(n.loader.getLoaderDependency(builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.M.EDITOR_SETTINGS_PANEL)).find('[data-role=setting][data-type-id="'.concat(e.getTypeId(),'"]')).each((function(){null===e.getErrors()?this.removeAttribute("data-has-errors"):this.setAttribute("data-has-errors","")}))}(this.editor.getJQuery(),this)}},{key:"deleteEditorSetting",value:function(e){if(e){var t,n=this.editor.getDocument().getEditorSettingByTypeId(e);this.editor.getJQuery(),(t=this).loader.getUI().prompt("Delete Form Setting",'Are you sure you want to remove setting "'.concat(n.getConfiguration().name,'" from your form?'),(function(){t.loader.getUndoService().trigger("user-action","delete-setting-".concat(e)),t.editor.getDocument().removeEditorSetting(n),n.getGroupTypeId()===editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__.a.PAYMENT_PROCESSORS&&t.trackEvent("payments_processor_delete",{name:n.getConfiguration().name})}))}}},{key:"enableEditorSetting",value:function(e){if(e){var t=this.editor.getDocument().getEditorSettingByTypeId(e);this.loader.getUndoService().trigger("user-action","enable-setting-".concat(e)),this.editor.getDocument().toggleEditorSettingEnabledState(t),this.loadEditorSettingIntoPanel(t),t.getGroupTypeId()===editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__.a.PAYMENT_PROCESSORS&&this.trackEvent("payments_processor_enabled_intention",{name:t.getConfiguration().name})}}},{key:"disableEditorSetting",value:function(e){if(e){var t=this.editor.getDocument().getEditorSettingByTypeId(e);this.loader.getUndoService().trigger("user-action","disable-setting-".concat(e)),this.editor.getDocument().toggleEditorSettingEnabledState(t),this.loadEditorSettingIntoPanel(t),t.getGroupTypeId()===editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__.a.PAYMENT_PROCESSORS&&this.trackEvent("payments_processor_disabled",{name:t.getConfiguration().name})}}},{key:"executeEditorSettingCommand",value:function(e,t){switch(t){case"delete-element":this.deleteEditorSetting(e);break;case"open-products-dialog":apps_main_Builder_components_Products_PaymentsProductsDialog__WEBPACK_IMPORTED_MODULE_5__.a.openFromExternalSource();break;case"enable-element":this.enableEditorSetting(e);break;case"disable-element":this.disableEditorSetting(e);break;case"connect-element":this.oAuth.connect(e);break;case"disconnect-element":this.oAuth.disconnect(e)}}},{key:"executeProactiveChatJavascriptCode",value:function(e){if(e){e=e.replace(/(^[\s]+?<script[^>]+>|<\/script>[\s]+?$)/g,"");var t=document.createElement("script");t.type="text/javascript",t.textContent="(function(){".concat(e,"})()"),document.getElementsByTagName("head")[0].appendChild(t)}}},{key:"canAddAnotherCouponCode",value:function(){var e=Object(root_lodash_es__WEBPACK_IMPORTED_MODULE_42__.a)(this.store.getState());return!Object(root_lodash_es__WEBPACK_IMPORTED_MODULE_43__.a)(e.form.controls,[{type:editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_COUPON}])||(this.editor.getLoader().getUI().alert("Failed to add field","There can be only a single coupon code control in the form"),!1)}},{key:"updateMobileItemEditorPanel",value:function(){!function(e,t,n){var i,r=[],a="/modules/Typescript/Form/resources/mobile-item-editor.html",o=t.loader.getEditorPanelGroup().getPanelById("item").getRootNode(),s={},l="setting"===o.getAttribute("data-target-element-type");if((i=o.getAttribute("data-target-element"))?(e(o).find("[data-role=editing-capabilities] button[data-role]").each((function(){r.push(this.getAttribute("data-role"))})),s.targetElementHash=i,r.length&&(s.deleteAction=r.indexOf("delete-element")>-1,s.duplicateAction=r.indexOf("duplicate-element")>-1,s.moveElementAction=s.deleteAction||s.duplicateAction)):s.isEmpty=!0,l){var c=o.getAttribute("data-target-setting-id");a="/modules/Typescript/Form/resources/mobile-item-editor-setting.html",s.isEmpty=!1,s.typeId=c}s.isEmpty?e("#mobile-item-editor-toolbar").removeAttr("data-visible"):n.get(a).then((function(t){var n=new salvage_Salvage__WEBPACK_IMPORTED_MODULE_45__.a(t);e("#mobile-item-editor-toolbar").attr("data-visible","1").html(n.parse(s))}))}(this.loader.getJQuery(),this,this.editor.getResourceManager())}},{key:"moveElement",value:function(e,t){var n=function(e){if(!e)return!1;if(e.getElementKind()===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.p.CONTROL){if(-1===[editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_SEPARATOR,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_PAGE_BREAK,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_CAPTCHA,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_FORM_HEADER,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_LIKERT_SCALE,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_ACTION_BAR,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.VIRTUAL_SELECTION_CONTROL].indexOf(e.getTypeId()))return!0}else if(e.getElementKind()===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.p.CONTAINER&&e.getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_LIKERT_WRAPPER)return!0;return!1};if(n(e)&&(e.getElementKind()!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.p.CONTAINER||e.getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_LIKERT_WRAPPER)){var i,r=this.editor.getDocument().flatten(),a=r.length,o=r.indexOf(e);if(-1!==o){for(;;){if(t===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.q.UP){if(--o<0)return}else{if(t!==builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.q.DOWN)return;if(++o>=a)return}if(n(r[o])&&r[o].getParent()!==e.getParent()){i=r[o];break}}this.executeDropOperation(e,i,t===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.q.DOWN?builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.BOTTOM:builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.TOP,!1)}else console.warn("Assertion: I DID NOT FIND MYSELF IN FORM FLATTENED LIST!")}}},{key:"resetUsedChoicesOnElement",value:function(e){for(var t=JSON.parse(JSON.stringify(e.getProperty("choices.values"))),n=!1,i=0,r=t.length;i<r;i++)-1===t[i].numberOfTimesThisOptionHasBeenChosen&&(t[i].numberOfTimesThisOptionHasBeenChosen=0,n=!0);n&&e.setProperty("choices.values",t)}},{key:"publishFormOnWix",value:function(e){var t={p:"publish",id:e,tabid:my_forms_src_Enums__WEBPACK_IMPORTED_MODULE_36__.a.LEGACY_PUBLISH},n={instance:this.cookie.getCookie("wixParams_instance"),locale:this.cookie.getCookie("wixParams_locale"),origCompId:this.cookie.getCookie("wixParams_origCompId"),compId:this.cookie.getCookie("wixParams_compId")};null!==n.instance?window.location.href="/index.php?".concat(editor_Utils_URLHandler__WEBPACK_IMPORTED_MODULE_34__.a.serializeObject(_objectSpread({},t,{},n))):(t.tabid=my_forms_src_Enums__WEBPACK_IMPORTED_MODULE_36__.a.PLATFORM_WIX,window.location.href="/index.php?".concat(editor_Utils_URLHandler__WEBPACK_IMPORTED_MODULE_34__.a.serializeObject(t)))}},{key:"publishFormOnWeebly",value:function(e,t,n){var i=builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.Z.JAVASCRIPT;return t=t||i,n=JSON.stringify(n)||"",function(i,r){i.ajax({url:"/ajax_save_formsettings.php",type:"POST",data:{modulename:"weebly.php",someaction:"update_site_id_with_form_id",form_id:e,embed_method:t,embed_options:n,view_type:"default",ajax_load:1}}).done((function(){var e=r.loader.getUI().createDialog("Form published",[{type:core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.f.KEEP_EDITING_FORM,callback:function(){e.close()}},{type:core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.f.CLOSE_EDITOR,callback:function(){window.parent.postMessage({action:"dialog:close"},"*"),e.close()}}],{width:"450px"});e.setHTML(r.i18n.translateText("userStepByStep_description_done_3"))})).fail((function(){r.loader.getUI().alert("Error publishing on Weebly","There was a problem with your request. Couldn't publish on weebly.")}))}(this.loader.getJQuery(),this)}},{key:"loadTranslationsPanel",value:function(e,t){!function(n,i,r,a,o){r.when(i.get("/modules/Typescript/Form/resources/translations-panel.html").fail((function(e){a.alert("Error loading component","There was an error loading the translations panel. Please try again. If the problem persist, please contact our support team")})),o.GET("/v2/language/".concat(n.loader.getFormId())).fail((function(e){a.alert("Error loading component","There was an error enumerating your form translations. Please try again. If the problem persist, please contact our support team")})),editor_Translations_TranslationsService__WEBPACK_IMPORTED_MODULE_29__.a.getLanguagesList()).then((function(s,l,c){n.loader.getFormTranslationsService().setSupportedFormLanguages(c).setAvailableFormLanguages(l.data);var u=new salvage_Salvage__WEBPACK_IMPORTED_MODULE_45__.a(s),d={isBuilderSidebarExperiment:n.features.getInstance().isBuilderSidebarExperimentActive()};e.getRootNode().innerHTML=u.parse(d),n.addPerfectScrollbar(r(e.getRootNode()).find("> [data-role=vertical-content]").get(0));var p=new editor_Translations_TranslationsEditor__WEBPACK_IMPORTED_MODULE_28__.a(r(e.getRootNode()).find("[data-role=add-translation]").get(0),r(e.getRootNode()).find("[data-role=languages-container]").get(0),n.loader.getFormTranslationsService(),r,a,i,o,n.loader);r(e.getRootNode()).on("click","[data-role=translations-actions] button[data-role]",(function(){p.dispatchButtonClick(this.getAttribute("data-role"))})),t()}))}(this,this.editor.getResourceManager(),this.loader.getJQuery(),this.loader.getUI(),this.loader.getAPI())}},{key:"refreshPaymentsAvailabilityStatus",value:function(){for(var e=this.loader.getEngine().getDocument(),t=editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__.a.getGroupSettingTypeIds(editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__.a.PAYMENT_PROCESSORS),n=!1,i=0,r=t.length;i<r;i++)if(e.hasEditorSetting(t[i])&&!0===e.getEditorSettingByTypeId(t[i]).getProperty("isEnabled")){n=!0;break}var a=Object(redux_actions_Builder__WEBPACK_IMPORTED_MODULE_37__.A)(n);Object(apps_main_Builder_store__WEBPACK_IMPORTED_MODULE_6__.a)()(a),this.loader.trigger("payments_status_changed"),e.getConfiguration().withProperty("isPaymentEnabled",n)}},{key:"displayLegacyEditorThemesDialog",value:function(){var e=this,t=this.loader.getUI().createDialog(this.i18n.translateText("edt_text_old_editor_themes"),[{type:core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.f.IMPORT,callback:function(){var n=parseInt($(t.body).find("tbody tr.selected").attr("data-theme-id"));n&&!isNaN(n)&&e.loader.getAPI().GET("/v2/editor/themes/legacy/".concat(n)).then((function(n){e.loader.getEngine().getTheme().applyTheme(n),e.loadThemePropertiesIntoPanel(),e.loader.getEngine().getTheme().enterEditMode(),e.setActiveEditorPanel("options"),t.close(),e.loader.getUI().alert("Theme successfully imported",'Theme "'.concat(n.name,'" was applied successfully'))})).fail((function(e){this.loader.getUI().alert("Error fetching legacy theme from server","There was an error while trying to fetch the selected legacy theme from server. Please retry. If the problem persist, contact our support team")}))}},{type:core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.f.CANCEL,callback:function(){t.close()}}],{width:"500px",height:"500px"});t.body.innerHTML='<div data-role="loader">\n                                    <div data-role="loading-bar"></div>\n                                    <div data-role="loading-bar"></div>\n                                    <div data-role="loading-bar"></div>\n                                </div>',function(e,t,n,i,r,a){a.when(t.get("/modules/Typescript/Form/resources/legacy-editor-themes-dialog.html").fail((function(e){i.alert("Failed to load UI component from server","There was an error loading legacy themes dialog from server. Please retry. If the problem persist, contact our support team")})),n.GET("/v2/editor/themes/legacy").fail((function(e){i.alert("Failed to load legacy themes list from server","There was an error loading legacy themes list from server. Please retry. If the problem persist, contact our support team")}))).then((function(t,n){var i=new salvage_Salvage__WEBPACK_IMPORTED_MODULE_45__.a(t),o=editor_Utils_FormUtils__WEBPACK_IMPORTED_MODULE_32__.a.clone(n);e.addPerfectScrollbar(r.body),r.body.innerHTML=i.parse(o),r.dialog.setAttribute("data-dialog-role","legacy-themes"),a(r.body).on("click","table tbody tr",(function(){a(this).addClass("selected").siblings().removeClass("selected")}))})).fail((function(e){}))}(this,this.loader.getEngine().getResourceManager(),this.loader.getAPI(),this.loader.getUI(),t,this.loader.getJQuery())}},{key:"isDropElementNotEligibleForDropInRepeatableContainer",value:function(e){var t=e.getTypeId(),n=[editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_MAP,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_PAGE_BREAK,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_IMAGE,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_WIDGET_VIDEO,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_WIDGET_FACEBOOK,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_WIDGET_PDF,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_SOCIAL,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_FILE,editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_FORMULA];return this.loader.getControlsThatHaveRepeatablePathsAddedToPrefillValue().length>0||n.push(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_REPEATABLE),n.includes(t)}},{key:"initializeDocumentFromOCRData",value:function(e){var t=this.editor.getDocument();if(1==t.getNumberOfPages()&&1==t.getPageByIndex(0).flatten().length){for(var n=1,i=e.children.length;n<i;n++){var r=this.editor.getFactory().createItemByTypeId(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_PAGE,t);t.appendChild(r),r.onCreated()}t.repaginateInImmediateMode(),t.renderPageHeadersInImmediateMode();for(var a=0,o=e.children.length;a<o;a++){for(var s=t.getChildren()[a],l=0,c=e.children[a].rows.length;l<c;l++){for(var u=this.editor.getFactory().createItemByTypeId(editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_ROW,t),d=0,p=e.children[a].rows[l].length;d<p;d++){var h=this.editor.getFactory().createItemByTypeId(e.children[a].rows[l][d].typeId,t);switch(h.withColspan(e.children[a].rows[l][d].colspan),!0){case h.hasProperty("label.labelText"):h.setProperty("label.labelText",e.children[a].rows[l][d].text);break;case h.hasProperty("configuration.innerHTML"):h.setProperty("configuration.innerHTML",editor_Utils_FormUtils__WEBPACK_IMPORTED_MODULE_32__.a.htmlEntitiesWithBR(e.children[a].rows[l][d].text))}u.appendChild(h)}s.appendChild(u)}t.normalize(),t.flatten().forEach((function(e){e.getElementKind()===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.p.CONTROL&&e.onCreated()}))}}}},{key:"getSaveActivity",value:function(){return this.saveActivity}},{key:"scrollToPaymentsInInspector",value:function(){!function(e,t){if("editor"!==t.loader.getEditorPanelGroup().getActivePanel().getId()){if("notifications"===t.loader.getEditorPanelGroup().getActivePanel().getId()&&!t.loader.getEditorPanelGroup().getActivePanel().getUserConfirmationForDiscardingUnsavedChanges())return;t.loader.getEditorPanelGroup().setActivePanel("editor",0)}setTimeout((function(){e("#editor [data-role=vertical-content]").find(".collapsible-section--payments").each((function(){t.loader.getEditorPanelGroup().isVisible()||t.loader.getEditorPanelGroup().setVisible(!0),t.scrollTo(e("#editor [data-role=vertical-content]")[0],this.offsetTop,500),t.trackEvent("payments_sidebar_autoscroll",{},50)}))}),200)}(this.editor.getJQuery(),this)}},{key:"scrollTo",value:function(e,t,n){var i=this,r=e.scrollTop,a=t-r,o=0;!function t(){o+=20;var s=i.easeInOutQuad(o,r,a,n);e.scrollTop=s,o<n&&setTimeout(t,20)}()}},{key:"easeInOutQuad",value:function(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}},{key:"trackFirstValueSaved",value:function(e){var t=this.loader.getLoaderDependency(builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.M.USER_FEATURES);if(e){var n=e.getProperty("payments.value");if(n.length>0){for(var i=!1,r=0,a=n.length;r<a;r++)n[r]&&0!==n[r]&&(i=!0);if(!i)return}else if(n&&0==n)return}t&&(t.firstPaymentsValue||(this.trackEvent("user_first_payments_value"),this.showFirstPaymentsValueNotification(),this.cookie.setCookie("newPaymentsFirstValueSetNotificationVisible",1,14),this.cookie.setCookie("formIdForNewPaymentsFirstValueSetNotification",this.loader.getFormId(),14),t.firstPaymentsValue=!0,this.loader.withUserFeatures(t)))}},{key:"trackFirstProcessorAdded",value:function(){var e=this.loader.getLoaderDependency(builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.M.USER_FEATURES);e&&(e.firstProcessor||(this.trackEvent("user_first_processor_added"),e.firstPaymentsValue||(this.showFirstProcessorAddedNotification(),this.cookie.setCookie("newPaymentsFirstProcessorAddedNotificationVisible",1,14),this.cookie.setCookie("formIdForPaymentsFirstProcessorAddedNotification",this.loader.getFormId(),14)),e.firstProcessor=!0,this.loader.withUserFeatures(e)))}},{key:"trackPaymentsActivation",value:function(){if(this.paymentsInActivationProcess){for(var e=this.loader.getEngine().getDocument(),t=editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__.a.getGroupSettingTypeIds(editor_EditorSettings_EditorSettingGroups__WEBPACK_IMPORTED_MODULE_16__.a.PAYMENT_PROCESSORS),n=0,i=0,r=t.length;i<r;i++)e.hasEditorSetting(t[i])&&!0===e.getEditorSettingByTypeId(t[i]).getProperty("isEnabled")&&!e.getEditorSettingByTypeId(t[i]).hasErrors()&&n++;1===n&&(this.trackEvent("payments_enabled"),this.paymentsInActivationProcess=!1)}}},{key:"setPaymentsInActivationProcess",value:function(e){this.paymentsInActivationProcess=e}},{key:"displayNotificationForFirstValueAndProcessorIfNeeded",value:function(){var e=this;setTimeout((function(){var t=e.loader.getLoaderDependency(builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.M.USER_FEATURES);e.cookie.getCookie("newPaymentsFirstValueSetNotificationVisible")&&t.firstPaymentsValue&&e.cookie.getCookie("formIdForNewPaymentsFirstValueSetNotification")&&~~e.cookie.getCookie("formIdForNewPaymentsFirstValueSetNotification")===e.loader.getFormId()&&e.showFirstPaymentsValueNotification(),e.cookie.getCookie("newPaymentsFirstProcessorAddedNotificationVisible")&&t.firstProcessor&&e.cookie.getCookie("formIdForPaymentsFirstProcessorAddedNotification")&&~~e.cookie.getCookie("formIdForPaymentsFirstProcessorAddedNotification")===e.loader.getFormId()&&e.showFirstProcessorAddedNotification()}),10)}},{key:"showFirstPaymentsValueNotification",value:function(){this.loader.getUI().createNotification(this.loader.getI18n().translateHTMLText('[[edt_first_payments_value_saved_part1]] <a data-role="open-products" href="javascript:;">[[edt_first_payments_value_saved_link1]]</a> [[edt_first_payments_value_saved_part2]] <a data-role="scroll-to-payments" href="javascript:;">[[edt_first_payments_value_saved_link2]]</a>.'),!1,core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.i.DEFAULT),function(e,t){e(t.loader.getUI().getCurrentNotification()).on("click","a[data-role=open-products]",(function(){apps_main_Builder_components_Products_PaymentsProductsDialog__WEBPACK_IMPORTED_MODULE_5__.a.openFromExternalSource(),t.trackEvent("user_first_price_notification_click_on_products")})).on("click","a[data-role=scroll-to-payments]",(function(){t.scrollToPaymentsInInspector(),t.trackEvent("user_first_price_notification_click_on_payments")})).on("click",".close",(function(){t.cookie.deleteCookie("newPaymentsFirstValueSetNotificationVisible"),t.cookie.deleteCookie("formIdForNewPaymentsFirstValueSetNotification")})),e.ajax({url:"/ajax_call.php",data:{module:"modules/UserFeatures/index.php",action:"updateFeature",featureName:"firstPaymentsValue",featureValue:!0}}).done((function(e){console.log("successful feature updated: firstPaymentsValue")})).fail((function(e){console.error(new Error("".concat("error while updating feature: firstPaymentsValue \n ").concat(String(e))))}))}(this.editor.getJQuery(),this)}},{key:"showFirstProcessorAddedNotification",value:function(){this.loader.getUI().createNotification(this.loader.getI18n().translateHTMLText('[[edt_first_processor_added]] <a data-role="open-products" href="javascript:;">[[edt_first_processor_added_link]]</a>.'),!1,core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.i.DEFAULT),function(e,t){e(t.loader.getUI().getCurrentNotification()).on("click","a[data-role=open-products]",(function(){apps_main_Builder_components_Products_PaymentsProductsDialog__WEBPACK_IMPORTED_MODULE_5__.a.openFromExternalSource(),t.trackEvent("user_first_processor_notification_click_on_products")})).on("click",".close",(function(){t.cookie.deleteCookie("newPaymentsFirstProcessorAddedNotificationVisible"),t.cookie.deleteCookie("formIdForPaymentsFirstProcessorAddedNotification")})),e.ajax({url:"/ajax_call.php",data:{module:"modules/UserFeatures/index.php",action:"updateFeature",featureName:"firstProcessor",featureValue:!0}}).done((function(e){console.log("successful feature updated: firstProcessor")})).fail((function(e){console.error(new Error("".concat("error while updating feature: firstProcessor \n ").concat(String(e))))}))}(this.editor.getJQuery(),this)}},{key:"isWixOrWeebly",value:function(){return window.UserData&&window.PLATFORM_WEEBLY&&window.PLATFORM_WIX&&(window.UserData.serverPlatform==window.PLATFORM_WEEBLY||window.UserData.serverPlatform==window.PLATFORM_WIX)}},{key:"correctCSSTransformTimerFunction",value:function(e,t,n,i){var r=this;if(e.parentNode){var a=t.parentNode.offsetWidth,o=t.parentNode.offsetHeight;a===n&&o===i||(n=a,i=o,a=~~(~~a/2),o=~~(~~o/2),e.textContent="body[data-header-version='3'] .mce-container.mce-panel.mce-floatpanel.mce-menu,\n                                body[data-header-version='3'] .mce-tinymce-inline.mce-container.mce-panel.mce-floatpanel,\n                                body[data-header-version='3'] .mce-widget.mce-tooltip,\n                                body[data-header-version='3'] .mce-container.mce-panel.mce-floatpanel.mce-popover,\n                                body[data-header-version='3'] .mce-container.mce-panel.mce-floatpanel.mce-menu.mce-menu-align,\n                                body.header-v1 .mce-container.mce-panel.mce-floatpanel.mce-menu,\n                                body.header-v1 .mce-tinymce-inline.mce-container.mce-panel.mce-floatpanel,\n                                body.header-v1 .mce-widget.mce-tooltip,\n                                body.header-v1 .mce-container.mce-panel.mce-floatpanel.mce-popover,\n                                body.header-v1 .mce-container.mce-panel.mce-floatpanel.mce-menu.mce-menu-align {\n                                    transform: translate(-".concat(a,"px, -").concat(o,"px);\n                                    position:fixed;\n                                    z-index: 50000000 !important;\n                                    max-height: 180px !important;\n                                }\n                                body[data-header-version='3'] .mce-container.mce-panel.mce-floatpanel.mce-window,\n                                body.header-v1 .mce-container.mce-panel.mce-floatpanel.mce-window {\n                                    z-index: 60000000 !important;\n                                }\n                                body[data-header-version='3'] .mce-container.mce-panel.mce-floatpanel.mce-menu.mce-menu-align.mce-fixed,\n                                body.header-v1 .mce-container.mce-panel.mce-floatpanel.mce-menu.mce-menu-align.mce-fixed {\n                                   z-index: 100000000000!important;\n                                   transform: inherit;\n                                }\n                                ")),setTimeout((function(){r.correctCSSTransformTimerFunction(e,t,n,i)}),1e3)}}},{key:"recalculateForm",value:function(){var e=this;return this.editor.getResourceManager().get("/modules/Typescript/Form/resources/form-invoice.html").done((function(t){e.lastCalculationHTMLMarkup=editor_Payments_Products_PaymentsSummaryHelper__WEBPACK_IMPORTED_MODULE_25__.a.getInstance().computeLastCalculationHTMLMarkup(t,e.getEditFormInvoiceItems(),e.loader.getLoaderDependency(builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.M.DETAILED_INVOICE_OPTIONS),!0)})).fail((function(e){console.warn("Failed to get the markup for the payment summary. Error is displayed below."),console.error(e)}))}},{key:"getLastCalculationHTMLMarkup",value:function(){return this.lastCalculationHTMLMarkup}},{key:"addPaymentSummaryListener",value:function(e){var t=this;e.addEventListener("click",(function(e){t.editor.getDocument().getConfiguration().getProperty("isPaymentEnabled",!1)&&t.loader.execCommand("edit-setting",editor_EditorSettings_EditorSettingTypes__WEBPACK_IMPORTED_MODULE_17__.a.PAYMENT_SUMMARY_EDITOR_SETTING);var n=t.loader.getEngine().getDocument().getNumberOfPages();t.loader.getEngine().getDocument().getPageByIndex(n-1).selectPaymentSummaryContainer()}));var n=e.querySelector(".add-payment-processors");n&&n.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),t.loader.execCommand("scroll-inspector-to-payments")}))}},{key:"getEditFormInvoiceItems",value:function(){var e=this,t=this.editor.getDocument().getEditorSettingByTypeId(editor_EditorSettings_EditorSettingTypes__WEBPACK_IMPORTED_MODULE_17__.a.PAYMENT_PRODUCTS_EDITOR_SETTING),n=t.getProperty("currencyId")||apps_main_Builder_components_Products_PaymentsProductsDialog__WEBPACK_IMPORTED_MODULE_5__.a.DEFAULT_CURRENCY_ID,i=this.editor.getCurrency().getCurrencySymbolById(n),r=0,a=[{type:builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.J.PRODUCT,number:++r,description:this.loader.getI18n().translateText("edt_payment_summary_sample_item_name"),quantity:1,totalPrice:1},{type:builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.J.SUBTOTAL,number:++r,description:this.loader.getI18n().translateText("edt_payment_summary_subtotal"),quantity:1,totalPrice:1}],o=this.loader.getProductsWithValue();return Object(root_lodash_es__WEBPACK_IMPORTED_MODULE_40__.a)(Object(root_lodash_es__WEBPACK_IMPORTED_MODULE_44__.a)(o,(function(e){return e.type===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_FEE&&e.value&&e.value.length&&e.value[0]>0})),(function(t){var n=t.value[0];a.push({type:builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.J.INVOICE_FEE,number:++r,description:t.details,quantity:1,totalPrice:n}),t.discount>0&&a.push({type:builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.J.PRODUCT_DISCOUNT,number:r,description:e.loader.getI18n().translateText("edt_payment_summary_discount"),quantity:1,totalPrice:e.calculateDiscountOrTax(t.discountType,t.discount,n),value:t.discount.toString(),valueType:t.discountType}),t.tax>0&&a.push({type:builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.J.PRODUCT_TAX,number:r,description:e.loader.getI18n().translateText("edt_payment_summary_tax"),quantity:1,totalPrice:e.calculateDiscountOrTax(t.taxType,t.tax,n),value:t.tax.toString(),valueType:t.taxType})})),a.push({type:builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.J.INVOICE_DISCOUNT,number:++r,description:this.loader.getI18n().translateText("edt_payment_summary_discount"),quantity:1,totalPrice:0,value:t.getProperty("discountValue"),valueType:t.getProperty("discountType")}),a.push({type:builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.J.INVOICE_TAX,number:++r,description:this.loader.getI18n().translateText("edt_payment_summary_tax"),quantity:1,totalPrice:0,value:t.getProperty("taxValue"),valueType:t.getProperty("taxType")}),{invoiceObject:{items:a,total:parseFloat(shared_modules_Core_Containers_Page__WEBPACK_IMPORTED_MODULE_49__.a.DUMMY_VALUE_FOR_RTS_RIBBON)},currencyHTML:i}}},{key:"calculateDiscountOrTax",value:function(e,t,n){return 0===e?n*t/100:t}},{key:"triggerFileUploadLimitDialog",value:function(){this.loader.getUI().alert(this.i18n.translateText("edt_error_adding_field")||"Error adding field",this.i18n.translateText("edt_file_upload_fields_limit")||"Only 50 File upload fields can be added on the form")}},{key:"removePaymentSummaryAfterSubmit",value:function(){var e=this.editor.getDocument().getPageByIndex(this.editor.getDocument().getNumberOfPagesIncludingPaymentSummary()-1);e.getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE&&(e.getParent().removeChild(e),this.editor.getDocument().repaginateInImmediateMode())}},{key:"isDNDStrategy1",value:function(e,t){return(e.getElementKind()===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.p.CONTROL||e.getElementKind()===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.p.CONTAINER&&e.getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_LIKERT_WRAPPER)&&(t===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.TOP||t===builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.o.BOTTOM)&&e.getParent().getParent().getTypeId()===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTAINER_TYPE_PAGE&&1===e.getParent().getChildren().length}},{key:"triggerFeatureModal",value:function(e){var t={feature:e,target:this.userService.getUpgradeOptions(e)},n=Object(redux_actions_Paywalls__WEBPACK_IMPORTED_MODULE_38__.e)(t);Object(apps_main_Builder_store__WEBPACK_IMPORTED_MODULE_6__.a)()(n)}},{key:"isPaywallRequired",value:function(e){var t=this.store.getState();if(!this.userService.isControlSupported(e)){var n=this.userService.getFeatureByControlTypeId(e);return this.triggerFeatureModal(n),!0}return!this.userService.isControlCountSupported(e,t)&&(e===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_FILE?(this.triggerFileUploadLimitDialog(),!0):e===editor_ElementTypes__WEBPACK_IMPORTED_MODULE_21__.a.CONTROL_TYPE_HTML_BLOCK?(this.triggerFeatureModal(shared_staticTypes_enums_EFeatureNames__WEBPACK_IMPORTED_MODULE_51__.a.HTML_BLOCK_CONTROL),!0):(this.triggerFeatureModal(shared_staticTypes_enums_EFeatureNames__WEBPACK_IMPORTED_MODULE_51__.a.CREATE_FORM_FIELD),!0))}},{key:"getReasonByElementType",value:function(e,t){var n=this.userService.getControlCount(e,t).totalNumberOfControls;return(void 0===n?0:n)>0?core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.k.NUMBER_OF_FIELDS_EXCEEDED_IN_CURRENT_USER_PLAN:core_interfaces_shared_enum__WEBPACK_IMPORTED_MODULE_10__.k.CONTROL_NOT_SUPPORTED_IN_CURRENT_USER_PLAN}},{key:"getUpgradePlanByControlType",value:function(e){var t=0;try{var n,i=null===(n=Object(root_lodash_es__WEBPACK_IMPORTED_MODULE_41__.a)(this.availableUpgrades,(function(t){return t.name===e})))||void 0===n?void 0:n.target;t=i&&i[0]?this.planUtils.getPlanIdByPlanName(i[0].name):0}catch(a){var r=this.loader.getAPI();this.errorLogger.logError(r,"Error calculating upgrade details for control type: ".concat(e," with error ").concat(JSON.stringify(a)),builder_interfaces__WEBPACK_IMPORTED_MODULE_7__.t.WARNING,"Paywalls")}return t}},{key:"trackEditedFormEvent",value:function(e){var t=this.editor.getDocument().getId();this.customerEventService.triggerEvent(services_CustomerEventService__WEBPACK_IMPORTED_MODULE_47__.b.EDITED_FORM,{fieldName:e,formId:t})}},{key:"setVisiblePropertiesCount",value:function(e,t,n){if(e){var i=this.loader.getJQuery();e.each((function(){var e=i(this).find("[data-role=property]").length;i(this).find("*[data-search-keywords]").each((function(){if(""===t)this.style.display="";else{var r=i(this).attr("data-search-keywords").toLowerCase().replace(/[^a-z0-9]+/g," "),a=r.split(" "),o=!0;n.forEach((function(e){a.includes(e)||r.includes(e)||(o=!1)})),this.style.display=o?"":"none",o||e--}})),i(this).attr("data-visible-properties-count",String(e))}))}}},{key:"updateLayoutProperties",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(editor_Utils_FormUtils__WEBPACK_IMPORTED_MODULE_32__.a.controlSupportsButtonChoices(e.getTypeId())){var n,i,r=t.some((function(e){return e.image})),a=e.hasProperty("choices.useButtonLikeChoices")&&e.getProperty("choices.useButtonLikeChoices"),o=e.hasProperty("layout.columns")?e.getProperty("layout.columns"):null,s=document.querySelector("[data-role=attribute-group][data-name=layout]"),l=document.querySelector("[data-property-name=layout-columns]"),c=null===l||void 0===l?void 0:l.querySelector("[data-role=text-dropdown]"),u=document.querySelector("[data-property-name=choices-useButtonLikeChoices]");if(l&&u)if(r?u.classList.add("disabled"):u.classList.remove("disabled"),r||a)o>1&&s&&c&&(e.setProperty("layout.columns",1),s.setAttribute("data-number-of-columns","1"),c.innerText="1"),null===(n=l.firstElementChild)||void 0===n||n.classList.add("disabled"),l.setAttribute("title",this.i18nService.translateText("choiceField_disabledColumnsTooltip"));else null===(i=l.firstElementChild)||void 0===i||i.classList.remove("disabled"),l.removeAttribute("title")}}}]),EditorCommandDispatcher}()},,,,,,,,,,,function(e,t,n){"use strict";var i=n(43),r=n.n(i),a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(0),u=n.n(c),d=n(11),p=n.n(d),h=n(52),_=n.n(h),g=n(15),m=n(60),f=n.n(m),E=n(53),y=n.n(E),T=n(71),v=n(47),O=n(131),b=n(62),C=n(58),I=n(1),R=n(33),P=n(42),N=n(22),A=n(95),S=n(216),L=(n(567),p()("span",{className:"preview-app__btn-icon i-lg i123-arrow-left2"})),D=p()("span",{className:"i-lg i123-desktop mr-2"}),w=p()("span",{className:"i-lg i123-mobile mr-2"}),k=p()("span",{className:"preview-app__btn-icon i-lg i123-publish_2"}),M=p()("span",{className:"preview-app__btn-icon i-lg i123-upgrade"}),x=function(){var e=Object(g.useState)(!1),t=_()(e,2),n=t[0],i=t[1],r=Object(g.useState)(!0),a=_()(r,2),o=a[0],s=a[1],l=Object(R.a)(),c=new P.a,u=b.a.getInstance(),d=v.a.getInstance().canUpgrade(),h=C.a.computePreviewUrl(),m=y()("preview-app__iframe",{"preview-app__iframe--mobile":n}),f=function(e){if(e)return u.track("preview_form_mobile_tab"),void i(!0);u.track("preview_form_desktop_tab"),i(!1)};return p()("div",{className:"preview-app","data-testid":"previewFormModal"},void 0,p()("div",{className:"preview-app__header"},void 0,p()("div",{className:"preview-app__header-left"},void 0,p()("button",{type:"button",className:"preview-app__btn","aria-label":c.translateTextDefault("preview_back","Go back"),onClick:function(){u.track("preview_form_go_back_btn"),F.unmount()},"data-testid":"previewFormBackBtn"},void 0,L)),p()("div",{className:"preview-app__header-center"},void 0,p()(A.e,{},void 0,p()(A.b,{},void 0,p()(A.a,{onClick:function(){return f(!1)},testid:"previewFormDesktopTab"},void 0,p()("div",{className:"preview-app__tab-content"},void 0,D,c.translateTextDefault("preview_tab_desktop","Desktop"))),p()(A.a,{onClick:function(){return f(!0)},testid:"previewFormMobileTab"},void 0,p()("div",{className:"preview-app__tab-content"},void 0,w,c.translateTextDefault("preview_tab_mobile","Mobile")))))),p()("div",{className:"preview-app__header-right"},void 0,p()("ul",{className:"preview-app__header-actions"},void 0,p()("li",{},void 0,p()("button",{type:"button",className:"preview-app__btn preview-app__btn--with-label preview-app__btn--primary",onClick:function(){var e=T.a.getInstance(),t=C.a.getPublishRoute(),n=C.a.getUrlVars().id,i=C.a.getUrlVars().p!==I.X.EDITOR,r=C.a.computeStaticUrl(t,n,I.X.EDITOR);u.track("preview_form_publish_btn"),e.isPublishV2Active()&&!i?l(Object(N.j)(t)):C.a.setRawUrl(r),F.unmount()},"data-testid":"previewFormPublishBtn"},void 0,k,p()("span",{className:"preview-app__btn-label"},void 0,c.translateTextDefault("preview_publish","Publish")))),d&&p()("li",{},void 0,p()("button",{type:"button",className:"preview-app__btn preview-app__btn--with-label preview-app__btn--warning",onClick:function(){var e=O.a.getInstance();if(u.track("preview_form_upgrade_btn"),e.canUseNewPlans())window.pricingOverlay.render();else{var t=window.header.header.getModel();C.a.setRawUrl(t.settings.upgradeLink.href)}F.unmount()},"data-testid":"previewFormUpgradeBtn"},void 0,M,p()("span",{className:"preview-app__btn-label"},void 0,c.translateTextDefault("preview_upgrade","Upgrade"))))))),p()("div",{className:"preview-app__main"},void 0,p()("iframe",{src:h,className:m,onLoad:function(){return s(!1)},"data-testid":"previewFormIframe"}),p()(S.a,{isDisplayed:o})))},U=p()(x,{}),F={containerId:"preview-app-container",mount:function(){if(!document.getElementById(F.containerId)){var e=document.createElement("div");e.setAttribute("id",F.containerId),document.body.appendChild(e)}document.body.style.overflow="hidden",f.a.render(U,document.getElementById(F.containerId))},unmount:function(){document.body.style.overflow="unset",f.a.unmountComponentAtNode(document.getElementById(F.containerId))}};function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}n.d(t,"a",(function(){return Y}));var Y=function(){function e(){o()(this,e)}return l()(e,null,[{key:"setHighlight",value:function(t){if(localStorage){var n=e.getStorageValue(),i={formId:t,hasPreviewBtnClicked:!1};e.getStorageValue().length?e.getStorageValue().some((function(e){return e.formId===t}))||localStorage.setItem(e.BUTTON_STORAGE_KEY,JSON.stringify([].concat(r()(n),[i]))):localStorage.setItem(e.BUTTON_STORAGE_KEY,JSON.stringify([i])),e.setHighlightClass(t)}}},{key:"markHighlightAsRead",value:function(t){var n;if(localStorage){var i=e.getStorageValue(),r=i.findIndex((function(e){return e.formId===t})),a=i[r];(null===(n=a)||void 0===n?void 0:n.hasPreviewBtnClicked)||(a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a,{hasPreviewBtnClicked:!0}),i[r]=a,localStorage.setItem(e.BUTTON_STORAGE_KEY,JSON.stringify(i)),e.removeHighlightClass())}}},{key:"setHighlightClass",value:function(t){var n=e.getStorageValue();n.length>0&&(n.some((function(e){return e.formId===t&&!e.hasPreviewBtnClicked}))&&e.addHighlightClass())}},{key:"getHighlightClass",value:function(t){return r()(e.getStorageValue()).some((function(e){return e.formId===t&&!e.hasPreviewBtnClicked}))?e.BUTTON_HIGHLIGHT_CLASS:""}},{key:"getStorageValue",value:function(){return localStorage.getItem(e.BUTTON_STORAGE_KEY)?JSON.parse(localStorage.getItem(e.BUTTON_STORAGE_KEY)):[]}},{key:"addHighlightClass",value:function(){var t=document.getElementById(e.BUTTON_ID);t&&t.classList.add(e.BUTTON_HIGHLIGHT_CLASS)}},{key:"removeHighlightClass",value:function(){var t=document.getElementById(e.BUTTON_ID);t&&t.classList.remove(e.BUTTON_HIGHLIGHT_CLASS)}}]),e}();u()(Y,"BUTTON_ID","preview-form-button"),u()(Y,"BUTTON_STORAGE_KEY","highlightPreviewFormBtn"),u()(Y,"BUTTON_HIGHLIGHT_CLASS","ripple--active"),u()(Y,"clickHandle",(function(e){F.mount(),Y.markHighlightAsRead(e)}))},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i,r,a,o,s;n.d(t,"a",(function(){return s})),function(e){e[e.NO_ACCESS=0]="NO_ACCESS",e[e.VIEW=1]="VIEW",e[e.VIEW_EDIT=2]="VIEW_EDIT",e[e.VIEW_EDIT_CREATE=3]="VIEW_EDIT_CREATE"}(i||(i={})),function(e){e[e.NO_ACCESS=0]="NO_ACCESS",e[e.VIEW=1]="VIEW",e[e.VIEW_EDIT=2]="VIEW_EDIT"}(r||(r={})),function(e){e.DELETE="delete",e.DUPLICATE="duplicate",e.MOVE="move"}(a||(a={})),function(e){e.PLATFORM_SHOPIFY="shopify",e.PLATFORM_BIG_COMMERCE="bigcommerce",e.PLATFORM_SALESFORCE="salesforce",e.PLATFORM_WEEBLY="weebly",e.PLATFORM_WIX="wix"}(o||(o={})),function(e){e[e.PLATFORM_SALESFORCE=10]="PLATFORM_SALESFORCE",e[e.LEGACY_PUBLISH=12]="LEGACY_PUBLISH",e[e.PLATFORM_SHOPIFY=13]="PLATFORM_SHOPIFY",e[e.PLATFORM_BIG_COMMERCE=14]="PLATFORM_BIG_COMMERCE",e[e.PLATFORM_WEEBLY=15]="PLATFORM_WEEBLY",e[e.PLATFORM_WIX=17]="PLATFORM_WIX"}(s||(s={}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,,,,function(e,t){},,,,,,,,function(e,t,n){var i=n(479);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(481);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(483);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(485);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(487);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},,,,,,,,,,,,,,,,,,,,function(e,t,n){var i=n(508);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},,,,,function(e,t,n){var i=n(514);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(516);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},,,,,,,,,,,,,,,,,,function(e,t,n){var i=n(535);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},,,,,,,,function(e,t,n){var i=n(544);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},,,,,function(e,t,n){var i=n(550);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(552);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(554);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(556);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(558);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(560);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(562);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(564);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(566);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(568);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(570);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},,function(e,t,n){var i=n(573);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(575);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(577);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(579);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(581);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(583);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(585);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(587);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(589);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(591);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(593);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(595);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){var i=n(597);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(56)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(30),r=n(74),a=n(5),o=n.n(a),s=n(6),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),h=n(4),_=n.n(h),g=n(25);function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var f=function(e){u()(n,e);var t=m(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"onSynchronizeWithControlIdPropertyChanged",value:function(){for(var e=this.getForm().flatten(),t=0,n=e.length;t<n;t++)this.hasProperty("synchronize.withControlId")&&e[t].hasProperty("synchronize.withControlId")&&(e[t].getProperty("synchronize.withControlId")===this.getId()&&this.getProperty("synchronize.withControlId")!==e[t].getId()&&(e[t].setProperty("synchronize.enabled",!1),e[t].setProperty("synchronize.withControlId",null)),e[t].getId()===this.getProperty("synchronize.withControlId")&&(e[t].setProperty("synchronize.enabled",this.getProperty("synchronize.enabled")),e[t].setProperty("synchronize.withControlId",this.getId())))}},{key:"onSynchronizeEnabledPropertyChanged",value:function(){if(this.hasProperty("synchronize.enabled")&&this.hasProperty("synchronize.withControlId")&&this.getProperty("synchronize.withControlId"))for(var e=this.getForm().flatten(),t=0,n=e.length;t<n;t++)e[t].hasProperty("synchronize.withControlId")&&e[t].getProperty("synchronize.withControlId")===this.getId()&&e[t].setProperty("synchronize.enabled",this.getProperty("synchronize.enabled"))}},{key:"checkIfElementValueIsSynchronized",value:function(){if(this.hasProperty("value.value")&&this.getProperty("value.value")&&this.hasProperty("synchronize.enabled")&&this.getProperty("synchronize.enabled")&&this.hasProperty("synchronize.withControlId")&&this.getProperty("synchronize.withControlId"))for(var e=this.getForm().flatten(),t=0,n=e.length;t<n;t++)if(e[t].hasProperty("synchronize.enabled")&&e[t].getProperty("synchronize.enabled")&&e[t].hasProperty("synchronize.withControlId")&&e[t].hasProperty("value.value")&&e[t].getProperty("value.value")&&this.getId()===e[t].getProperty("synchronize.withControlId")){var i=e[t].getProperty("value.value"),r=this.getProperty("value.value");r!==i&&String(r||"")!==String(i||"")?this.addError(g.a.ERR_CONTROL_VALUES_DONT_MATCH,this.getForm().getEngine().getI18n().translateText("textdef_86",this.getProperty("label.labelText"),e[t].getProperty("label.labelText"))||"".concat(this.getProperty("label.labelText")," and ").concat(e[t].getProperty("label.labelText")," field values must be identical!")):(this.removeError(g.a.ERR_CONTROL_VALUES_DONT_MATCH),e[t].removeError(g.a.ERR_CONTROL_VALUES_DONT_MATCH),this.removeAllBackendErrors(),e[t].removeAllBackendErrors())}}}]),n}(i.a),E=n(17),y=n.n(E),T=n(0),v=n.n(T),O=n(1),b=n(2);function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var I=function(e){u()(n,e);var t=C(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_ACTION_BAR}},{key:"getElementName",value:function(){var e=this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_action_bar_name");return e&&"edt_UI_control_type_action_bar_name"!==e?e:"Action bar"}},{key:"isRemovable",value:function(){return!1}},{key:"setRendererType",value:function(e){}},{key:"onCreated",value:function(){this.updateDOMAttributes()}},{key:"updateDOMAttributes",value:function(){this.hasProperty("configuration.buttonsPosition")&&this.rootNode.setAttribute("data-buttons-position",String(this.getProperty("configuration.buttonsPosition")||0))}},{key:"getResizingCapability",value:function(){return O.db.NONE}},{key:"getPropertyDescriptorByInputIndex",value:function(e){return null}},{key:"isDuplicatable",value:function(){return!1}},{key:"getConfigurableButtons",value:function(){var e=[];return this.getProperty("configuration.hasApproveButton")&&e.push(String(O.b.APPROVE)),this.getProperty("configuration.hasCalculateButton")&&e.push(String(O.b.CALCULATE)),this.getProperty("configuration.hasPreviewButton")&&e.push(String(O.b.PREVIEW)),this.getProperty("configuration.hasPrintButton")&&e.push(String(O.b.PRINT)),this.getProperty("configuration.hasResetButton")&&e.push(String(O.b.RESET)),this.getProperty("configuration.hasSaveForLaterButton")&&e.push(String(O.b.SAVE_FOR_LATER)),this.getProperty("configuration.hasPurchaseButton")&&e.push(String(O.b.PURCHASE)),e}},{key:"setConfigurableButtons",value:function(e){for(var t=[],n=0,i=(e=e||[]).length;n<i;n++)t.push(~~e[n]);this.setProperty("configuration.hasApproveButton",t.indexOf(O.b.APPROVE)>-1),this.setProperty("configuration.hasCalculateButton",t.indexOf(O.b.CALCULATE)>-1),this.setProperty("configuration.hasPreviewButton",t.indexOf(O.b.PREVIEW)>-1),this.setProperty("configuration.hasPrintButton",t.indexOf(O.b.PRINT)>-1),this.setProperty("configuration.hasResetButton",t.indexOf(O.b.RESET)>-1),this.setProperty("configuration.hasSaveForLaterButton",t.indexOf(O.b.SAVE_FOR_LATER)>-1),this.setProperty("configuration.hasPurchaseButton",t.indexOf(O.b.PURCHASE)>-1)}},{key:"getProperty",value:function(e){switch(e){case"configuration.hasSubmitButton":return!(y()(_()(n.prototype),"getProperty",this).call(this,"configuration.hasUpdateButton")||y()(_()(n.prototype),"getProperty",this).call(this,"configuration.hasApproveButton"));case"configuration.hasNextButton":case"configuration.hasPreviousButton":return this.getForm().getNumberOfPages()>1;case"configuration.hasPurchaseButton":return this.getForm().getHasPaymentSummaryPage();case"configuration.hasPreviewButton":return this.getForm().getEngine().getLoader().getLoaderDependency(O.M.FORM_SETTINGS).allowPreviewMode;case"configuration.hasCalculateButton":return this.getForm().getEngine().getLoader().getLoaderDependency(O.M.HAS_CALCULATE_BUTTON);default:return y()(_()(n.prototype),"getProperty",this).call(this,e)}}},{key:"onReset",value:function(){}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"onEnterSelection",value:function(){y()(_()(n.prototype),"onEnterSelection",this).call(this);var e=this.getForm().getEngine().getLoader().getFormSettings(),t="undefined"!==typeof e.autoSubmit&&!0===e.autoSubmit?1:0;!function(e,n){e(n).find("[data-role=control][data-type=form-action-bar]").attr("data-is-selected","1"),setTimeout((function(){e('div[data-role="editor-panel"][data-target-element-type="action bar"]').attr("data-autosubmit-enabled",t)}),500)}(this.getForm().getEngine().getJQuery(),this.getForm().getRootNode())}},{key:"onLeaveSelection",value:function(){y()(_()(n.prototype),"onLeaveSelection",this).call(this),function(e,t){e(t).find("[data-role=control][data-type=form-action-bar]").removeAttr("data-is-selected")}(this.getForm().getEngine().getJQuery(),this.getForm().getRootNode())}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getForm().getEngine().getI18n();return e.push({key:"SendButton",sourceText:this.getProperty("label.submitButtonText")||t.translateText("form_sendDefaultText")}),e.push({key:"textdef_136",sourceText:t.translateText("textdef_136")}),e.push({key:"textdef_254",sourceText:this.getProperty("label.autoSubmitButtonText")||t.translateText("textdef_254")}),e.push({key:"textdef_201",sourceText:this.getProperty("label.resetButtonText")||t.translateText("textdef_201")}),e.push({key:"textdef_84",sourceText:t.translateText("textdef_84")}),e}}],[{key:"getConfiguration",value:function(){return null}}]),n}(i.a);v()(I,"nodeName","form-action-bar"),v()(I,"attributes",{}),v()(I,"runtime",null);var R=n(20),P=n.n(R),N=n(3),A=n.n(N),S=n(13),L=n(23),D=n(99);function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var k=function(e){u()(n,e);var t=w(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"streetAddress1DOMNode",void 0),v()(A()(r),"streetAddress2DOMNode",void 0),v()(A()(r),"cityDOMNode",void 0),v()(A()(r),"regionDOMNode",void 0),v()(A()(r),"zipCodeDOMNode",void 0),v()(A()(r),"countryDOMNode",void 0),v()(A()(r),"valueUpdateInterval",void 0),v()(A()(r),"syncCallback",void 0),v()(A()(r),"syncMapControl",!1);var a=r.getHash();return r.rootNode.setAttribute("aria-labelledby","address-".concat(a,"-acc ")+"address-".concat(a,"-error-acc ")+"address-".concat(a,"-instr-acc")),r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","address-".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","address-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","address-".concat(a,"-instr-acc")),r.streetAddress1DOMNode=document.createElement("input"),r.streetAddress1DOMNode.setAttribute("type","text"),r.streetAddress1DOMNode.setAttribute("data-role","i123-input"),r.streetAddress1DOMNode.setAttribute("data-index",String(n.INDEX_STREET_ADDRESS_1)),r.streetAddress1DOMNode.placeholder="Address 1",r.streetAddress1DOMNode.setAttribute("data-i18n-placeholder","textdef_24"),r.streetAddress2DOMNode=document.createElement("input"),r.streetAddress2DOMNode.setAttribute("type","text"),r.streetAddress2DOMNode.setAttribute("data-role","i123-input"),r.streetAddress2DOMNode.setAttribute("data-index",String(n.INDEX_STREET_ADDRESS_2)),r.streetAddress2DOMNode.placeholder="Address 2",r.streetAddress2DOMNode.setAttribute("data-i18n-placeholder","textdef_25"),r.cityDOMNode=document.createElement("input"),r.cityDOMNode.setAttribute("type","text"),r.cityDOMNode.setAttribute("data-role","i123-input"),r.cityDOMNode.setAttribute("data-index",String(n.INDEX_CITY)),r.cityDOMNode.setAttribute("data-i18n-placeholder","textdef_26"),r.cityDOMNode.placeholder="City",r.zipCodeDOMNode=document.createElement("input"),r.zipCodeDOMNode.setAttribute("type","text"),r.zipCodeDOMNode.setAttribute("data-role","i123-input"),r.zipCodeDOMNode.setAttribute("data-index",String(n.INDEX_ZIPCODE)),r.zipCodeDOMNode.setAttribute("data-i18n-placeholder","textdef_28"),r.zipCodeDOMNode.placeholder="Zip Code",r.countryDOMNode=L.a.createElement(L.a.ELEMENT_TYPE_SEARCHABLE_DROPDOWN),r.countryDOMNode.setAttribute("data-role","i123-input"),r.countryDOMNode.setAttribute("data-index",String(n.INDEX_COUNTRY)),r.countryDOMNode.setAttribute("data-i18n-placeholder","textdef_29"),r.countryDOMNode.setAttribute("placeholder","Country"),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_ADDRESS}},{key:"getElementName",value:function(){return"Address"}},{key:"getInputDOMNodes",value:function(){var e=this.getProperty("configuration.fieldAddress1"),t=this.getProperty("configuration.fieldAddress2"),n=this.getProperty("configuration.fieldCity"),i=this.getProperty("configuration.fieldZone"),r=this.getProperty("configuration.fieldZipCode"),a=this.getProperty("configuration.fieldCountry"),o="".concat(~~n).concat(~~i).concat(~~r).concat(~~a),s=[];switch(e&&s.push({inputs:[{input:this.streetAddress1DOMNode,width:O.I.FULL}]}),t&&s.push({inputs:[{input:this.streetAddress2DOMNode,width:O.I.FULL}]}),o){case"0000":break;case"0001":s.push({inputs:[{input:this.countryDOMNode,width:O.I.FULL}]});break;case"0010":s.push({inputs:[{input:this.zipCodeDOMNode,width:O.I.FULL}]});break;case"0011":s.push({inputs:[{input:this.zipCodeDOMNode,width:O.I.HALF},{input:this.countryDOMNode,width:O.I.FILL}]});break;case"0100":s.push({inputs:[{input:this.regionDOMNode,width:O.I.FULL}]});break;case"0101":s.push({inputs:[{input:this.regionDOMNode,width:O.I.HALF},{input:this.countryDOMNode,width:O.I.FILL}]});break;case"0110":s.push({inputs:[{input:this.regionDOMNode,width:O.I.FILL},{input:this.zipCodeDOMNode,width:O.I.HALF}]});break;case"0111":s.push({inputs:[{input:this.regionDOMNode,width:O.I.THIRD},{input:this.zipCodeDOMNode,width:O.I.THIRD},{input:this.countryDOMNode,width:O.I.FILL}]});break;case"1000":s.push({inputs:[{input:this.cityDOMNode,width:O.I.FULL}]});break;case"1001":s.push({inputs:[{input:this.cityDOMNode,width:O.I.HALF},{input:this.countryDOMNode,width:O.I.FILL}]});break;case"1010":s.push({inputs:[{input:this.cityDOMNode,width:O.I.FILL},{input:this.zipCodeDOMNode,width:O.I.HALF}]});break;case"1011":s.push({inputs:[{input:this.cityDOMNode,width:O.I.THIRD},{input:this.zipCodeDOMNode,width:O.I.THIRD},{input:this.countryDOMNode,width:O.I.FILL}]});break;case"1100":s.push({inputs:[{input:this.cityDOMNode,width:O.I.FILL},{input:this.regionDOMNode,width:O.I.HALF}]});break;case"1101":s.push({inputs:[{input:this.cityDOMNode,width:O.I.THIRD},{input:this.regionDOMNode,width:O.I.THIRD},{input:this.countryDOMNode,width:O.I.FILL}]});break;case"1110":s.push({inputs:[{input:this.cityDOMNode,width:O.I.FILL},{input:this.regionDOMNode,width:O.I.THIRD},{input:this.zipCodeDOMNode,width:O.I.THIRD}]});break;case"1111":s.push({inputs:[{input:this.cityDOMNode,width:O.I.HALF},{input:this.regionDOMNode,width:O.I.FILL}]}),s.push({inputs:[{input:this.zipCodeDOMNode,width:O.I.HALF},{input:this.countryDOMNode,width:O.I.FILL}]})}return s}},{key:"configureRegionDOMNode",value:function(){var e,t=this.getProperty("configuration.addressStyle"),i=this.getForm().getEngine().getGeolocation(),r=null;switch(t){case n.ADDRESS_STYLE_US:r=i.getCountryByISOCode("US").regions;break;case n.ADDRESS_STYLE_UNITED_KINGDOM:r=i.getCountryByISOCode("GB").regions;break;case n.ADDRESS_STYLE_CANADA:r=i.getCountryByISOCode("CA").regions;break;case n.ADDRESS_STYLE_AUSTRALIA:r=i.getCountryByISOCode("AU").regions}if(null===r)this.regionDOMNode=document.createElement("input"),this.regionDOMNode.setAttribute("type","text");else{this.regionDOMNode=L.a.createElement(L.a.ELEMENT_TYPE_SEARCHABLE_DROPDOWN);for(var a=0,o=r.length;a<o;a++)e=D.a.create(this.countryDOMNode,r[a],r[a]),this.regionDOMNode.add(e)}this.regionDOMNode.setAttribute("data-role","i123-input"),this.regionDOMNode.setAttribute("data-index",String(n.INDEX_REGION))}},{key:"populateCountryDOMNode",value:function(){var e,t,i=this.getProperty("configuration.addressStyle"),r=this.getForm().getEngine().getGeolocation(),a=this.getProperty("configuration.countries")||null;switch((null!==a&&0===a.length||a&&1===a.length&&!a[0])&&(a=null),i){case n.ADDRESS_STYLE_US:e=[r.getCountryByISOCode("US")];break;case n.ADDRESS_STYLE_UNITED_KINGDOM:e=[r.getCountryByISOCode("GB")];break;case n.ADDRESS_STYLE_CANADA:e=[r.getCountryByISOCode("CA")];break;case n.ADDRESS_STYLE_AUSTRALIA:e=[r.getCountryByISOCode("AU")];break;case n.ADDRESS_STYLE_ANY:default:e=r.getCountriesList();var o=JSON.parse(JSON.stringify(this.getProperty("configuration.countries")).toLowerCase());Array.isArray(o)&&o.length&&(e=e.filter((function(e){return o.indexOf(e.code.toLowerCase())>-1||o.indexOf(e.name.toLowerCase())>-1})))}for(;this.countryDOMNode.getOptions().length;)this.countryDOMNode.remove(0);(t=D.a.create(this.countryDOMNode,null,null)).value="",t.text="Country",t.setAttribute("data-i18n-text","textdef_29"),this.countryDOMNode.add(t);for(var s=0,l=e.length;s<l;s++)t=D.a.create(this.countryDOMNode,e[s].code,e[s].name),this.countryDOMNode.add(t)}},{key:"setDefaultCountry",value:function(){var e=this.getProperty("configuration.defaultCountry"),t=this.countryDOMNode.getOptions(),n=this.getForm().getEngine().getGeolocation();if(e){for(var i=0,r=t.length;i<r;i++)if(e===t[i].value){this.countryDOMNode.setValue(e),this.setProperty("value.country",e),this.synchronizeValue();break}}else{var a=n.getUserCountryCode();this.countryDOMNode.setValue(a),this.setProperty("value.country",a),this.synchronizeValue()}}},{key:"updateCountry",value:function(e){var t=this.getForm().getEngine().getGeolocation(),n=t.getCorrectedCountryName(e),i=t.getCountryISOCodeByCountryName(n);this.countryDOMNode.setValue(i),this.setProperty("value.country",i)}},{key:"onCreated",value:function(){var e=this;this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.configureRegionDOMNode(),this.updateZoneLabelPlaceholder(),this.populateCountryDOMNode(),this.updatePostalCodeLabelPlaceholder(),this.clearValue(),this.setDefaultCountry(),this.updateShowInstructionsOnClick(),this.updateHiddenAttribute(),this.synchronizeValue(),setTimeout((function(){e.getForm().getEngine().getI18n().translateDOMNode(e.rootNode)}),50)}},{key:"onValueChanged",value:function(){this.setProperty("value.address1",this.streetAddress1DOMNode.value||null),this.setProperty("value.address2",this.streetAddress2DOMNode.value||null),this.setProperty("value.city",this.cityDOMNode.value||null),P()(this.regionDOMNode,HTMLInputElement)?this.setProperty("value.zone",this.regionDOMNode.value||null):this.setProperty("value.zone",this.regionDOMNode.getValue()||null),this.setProperty("value.zipCode",this.zipCodeDOMNode.value||null),this.setProperty("value.country",this.countryDOMNode.getValue()||null),this.updateFieldsWithErrors(),this.onValueUpdated()}},{key:"setSyncronizeCallback",value:function(e){this.syncCallback=e}},{key:"onValueUpdated",value:function(){var e;e=this,clearInterval(e.valueUpdateInterval),e.valueUpdateInterval=setTimeout((function(){null!==e.syncCallback&&e.syncMapControl&&e.syncCallback()}),1e3)}},{key:"synchronizeValue",value:function(){S.a.synchronizeControlValue(this.streetAddress1DOMNode,this.getProperty("value.address1")),S.a.synchronizeControlValue(this.streetAddress2DOMNode,this.getProperty("value.address2")),S.a.synchronizeControlValue(this.cityDOMNode,this.getProperty("value.city")),S.a.synchronizeControlValue(this.regionDOMNode,this.getProperty("value.zone")),S.a.synchronizeControlValue(this.zipCodeDOMNode,this.getProperty("value.zipCode")),S.a.synchronizeControlValue(this.countryDOMNode,this.getProperty("value.country"))}},{key:"updateFieldsWithErrors",value:function(){if(this.streetAddress1DOMNode.hasAttribute("data-field-with-error")&&this.streetAddress1DOMNode.removeAttribute("data-field-with-error"),this.streetAddress2DOMNode.hasAttribute("data-field-with-error")&&this.streetAddress2DOMNode.removeAttribute("data-field-with-error"),this.cityDOMNode.hasAttribute("data-field-with-error")&&this.cityDOMNode.removeAttribute("data-field-with-error"),this.regionDOMNode.hasAttribute("data-field-with-error")&&this.regionDOMNode.removeAttribute("data-field-with-error"),this.zipCodeDOMNode.hasAttribute("data-field-with-error")&&this.zipCodeDOMNode.removeAttribute("data-field-with-error"),this.countryDOMNode.hasAttribute("data-field-with-error")&&this.countryDOMNode.removeAttribute("data-field-with-error"),this.errors)for(var e=0,t=this.errors.length;e<t;e++)switch(this.errors[e].propertyName){case"value.address1":this.streetAddress1DOMNode.setAttribute("data-field-with-error","1");break;case"value.address2":this.streetAddress2DOMNode.setAttribute("data-field-with-error","1");break;case"value.city":this.cityDOMNode.setAttribute("data-field-with-error","1");break;case"value.zone":this.regionDOMNode.setAttribute("data-field-with-error","1");break;case"value.zipCode":this.zipCodeDOMNode.setAttribute("data-field-with-error","1");break;case"value.country":this.countryDOMNode.setAttribute("data-field-with-error","1")}}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case n.INDEX_STREET_ADDRESS_1:return{targetPropertyFQN:"value.address1",optional:!0,type:"string"};case n.INDEX_STREET_ADDRESS_2:return{targetPropertyFQN:"value.address2",optional:!0,type:"string"};case n.INDEX_CITY:return{targetPropertyFQN:"value.city",optional:!0,type:"string"};case n.INDEX_REGION:return{targetPropertyFQN:"value.zone",optional:!0,type:"string"};case n.INDEX_ZIPCODE:return{targetPropertyFQN:"value.zipCode",optional:!0,type:"string"};case n.INDEX_COUNTRY:return{targetPropertyFQN:"value.fullCountryName",optional:!0,type:"string"};default:return null}}},{key:"enumerateIndexes",value:function(){return[n.INDEX_STREET_ADDRESS_1,n.INDEX_STREET_ADDRESS_2,n.INDEX_CITY,n.INDEX_REGION,n.INDEX_ZIPCODE,n.INDEX_COUNTRY]}},{key:"getMinInputRowWidth",value:function(){return 12}},{key:"getRequiredFields",value:function(){var e=[],t=0;return this.getProperty("configuration.fieldAddress1")&&this.getProperty("options.isRequiredFieldAddress1")&&(e.push(O.c.ADDRESS_1),t++),this.getProperty("configuration.fieldAddress2")&&this.getProperty("options.isRequiredFieldAddress2")&&(e.push(O.c.ADDRESS_2),t++),this.getProperty("configuration.fieldCity")&&this.getProperty("options.isRequiredFieldCity")&&(e.push(O.c.CITY),t++),this.getProperty("configuration.fieldZone")&&this.getProperty("options.isRequiredFieldZone")&&(e.push(O.c.ZONE),t++),this.getProperty("configuration.fieldZipCode")&&this.getProperty("options.isRequiredFieldZipCode")&&(e.push(O.c.ZIP_CODE),t++),this.getProperty("configuration.fieldCountry")&&this.getProperty("options.isRequiredFieldCountry")&&(e.push(O.c.COUNTRY),t++),6===t&&e.push(O.c.ALL),e}},{key:"setRequiredFields",value:function(e){if(e)for(var t=0,n=e.length;t<n;t++)e[t]=~~e[t];e&&e.length?(this.setProperty("options.isRequiredFieldAddress1",e.indexOf(O.c.ADDRESS_1)>-1),this.setProperty("options.isRequiredFieldAddress2",e.indexOf(O.c.ADDRESS_2)>-1),this.setProperty("options.isRequiredFieldCity",e.indexOf(O.c.CITY)>-1),this.setProperty("options.isRequiredFieldZone",e.indexOf(O.c.ZONE)>-1),this.setProperty("options.isRequiredFieldZipCode",e.indexOf(O.c.ZIP_CODE)>-1),this.setProperty("options.isRequiredFieldCountry",e.indexOf(O.c.COUNTRY)>-1),this.setProperty("options.required",e.length>0)):(this.setProperty("options.isRequiredFieldAddress1",!1),this.setProperty("options.isRequiredFieldAddress2",!1),this.setProperty("options.isRequiredFieldCity",!1),this.setProperty("options.isRequiredFieldZone",!1),this.setProperty("options.isRequiredFieldZipCode",!1),this.setProperty("options.isRequiredFieldCountry",!1),this.setProperty("options.required",!1))}},{key:"getAllowedFields",value:function(){var e=[];return this.getProperty("configuration.fieldAddress1")&&e.push(O.c.ADDRESS_1),this.getProperty("configuration.fieldAddress2")&&e.push(O.c.ADDRESS_2),this.getProperty("configuration.fieldCity")&&e.push(O.c.CITY),this.getProperty("configuration.fieldZone")&&e.push(O.c.ZONE),this.getProperty("configuration.fieldZipCode")&&e.push(O.c.ZIP_CODE),this.getProperty("configuration.fieldCountry")&&e.push(O.c.COUNTRY),e}},{key:"setAllowedFields",value:function(e){if(e)for(var t=0,n=e.length;t<n;t++)e[t]=~~e[t];!e||!e.length||1===e.length&&e[0]===O.c.ALL?(this.setProperty("configuration.fieldAddress1",!0),this.setProperty("configuration.fieldAddress2",!0),this.setProperty("configuration.fieldCity",!0),this.setProperty("configuration.fieldZone",!0),this.setProperty("configuration.fieldZipCode",!0),this.setProperty("configuration.fieldCountry",!0)):(this.setProperty("configuration.fieldAddress1",e.indexOf(O.c.ADDRESS_1)>-1),this.setProperty("configuration.fieldAddress2",e.indexOf(O.c.ADDRESS_2)>-1),this.setProperty("configuration.fieldCity",e.indexOf(O.c.CITY)>-1),this.setProperty("configuration.fieldZone",e.indexOf(O.c.ZONE)>-1),this.setProperty("configuration.fieldZipCode",e.indexOf(O.c.ZIP_CODE)>-1),this.setProperty("configuration.fieldCountry",e.indexOf(O.c.COUNTRY)>-1)),this.reRender()}},{key:"updateZoneLabelPlaceholder",value:function(){var e=this.getProperty("configuration.zoneLabel");switch(this.getProperty("configuration.addressStyle")){case n.ADDRESS_STYLE_US:case n.ADDRESS_STYLE_AUSTRALIA:case n.ADDRESS_STYLE_CANADA:e="state";break;case n.ADDRESS_STYLE_UNITED_KINGDOM:e="region"}switch(e){case"region":this.regionDOMNode.setAttribute("data-i18n-placeholder","textdef_27"),this.regionDOMNode.setAttribute("placeholder","Region");break;case"county":this.regionDOMNode.setAttribute("data-i18n-placeholder","textdef_202"),this.regionDOMNode.setAttribute("placeholder","County");break;case"state":default:this.regionDOMNode.setAttribute("placeholder","State"),this.regionDOMNode.setAttribute("data-i18n-placeholder","textdef_74")}this.getForm().getEngine().getI18n().translateDOMNode(this.rootNode)}},{key:"updatePostalCodeLabelPlaceholder",value:function(){switch(this.getProperty("configuration.postalCodeLabel")){case"zipCode":this.zipCodeDOMNode.setAttribute("placeholder","Zip Code"),this.zipCodeDOMNode.setAttribute("data-i18n-placeholder","textdef_125");break;case"postalCode":this.zipCodeDOMNode.setAttribute("placeholder","Postal Code"),this.zipCodeDOMNode.setAttribute("data-i18n-placeholder","textdef_239");break;case"postalZipCode":default:this.zipCodeDOMNode.setAttribute("placeholder","Postal/Zip Code"),this.zipCodeDOMNode.setAttribute("data-i18n-placeholder","textdef_28")}this.getForm().getEngine().getI18n().translateDOMNode(this.rootNode)}},{key:"onReset",value:function(){this.setValue({address1:null,address2:null,city:null,country:null,zipCode:null,zone:null})}},{key:"setupDefaults",value:function(){this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_address_name"));var e=this.getForm().getEngine().getLoader().getLoaderDependency(O.M.DEFAULT_USER_PREFERENCES);return e&&(this.setProperty("configuration.postalCodeLabel",e.postalZipCodeFormat),this.updatePostalCodeLabelPlaceholder()),this.updateLabelText(),this}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"getFullCountryName",value:function(){var e=this.getProperty("value.country");return e?this.getForm().getEngine().getGeolocation().getCountryNameByISOCode(e):""}},{key:"setCountryByCountryName",value:function(e){var t=this.getForm().getEngine().getGeolocation().getCountryISOCodeByCountryName(e);t?this.setProperty("value.country",t):this.setProperty("value.country",null)}},{key:"setCountryByCountryCode",value:function(e){e?this.setProperty("value.country",e):this.setProperty("value.country",null)}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),e}},{key:"setMapSync",value:function(e){this.syncMapControl=e}},{key:"emulateUserInput",value:function(){var e=this;!function(t){t([e.streetAddress1DOMNode,e.streetAddress2DOMNode,e.cityDOMNode,e.zipCodeDOMNode]).trigger("input"),e.countryDOMNode&&e.countryDOMNode.trigger("change")}(this.getForm().getEngine().getJQuery())}},{key:"clearValue",value:function(){this.setProperty("value.address1",null),this.setProperty("value.address2",null),this.setProperty("value.city",null),this.setProperty("value.zipCode",null),this.setProperty("value.zone",null)}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_ADDRESS,name:"Address",isContainer:!1,category:O.w.CONTACT_DETAILS,keywords:"address street",icon:"i123-address",isVirtual:!1,i18nName:"edt_UI_control_type_address_name",i18nKeywords:"edt_UI_control_type_address_keywords",index:40,accessibilityFields:O.v.ERROR_NODE+O.v.ROOT_NODE,title:i.a.translationService.translateText("editorFieldTooltip_address")}}}]),n}(i.a);v()(k,"INDEX_STREET_ADDRESS_1",1),v()(k,"INDEX_STREET_ADDRESS_2",2),v()(k,"INDEX_CITY",3),v()(k,"INDEX_REGION",4),v()(k,"INDEX_ZIPCODE",5),v()(k,"INDEX_COUNTRY",6),v()(k,"ADDRESS_STYLE_ANY","all"),v()(k,"ADDRESS_STYLE_US","us"),v()(k,"ADDRESS_STYLE_CANADA","ca"),v()(k,"ADDRESS_STYLE_AUSTRALIA","au"),v()(k,"ADDRESS_STYLE_UNITED_KINGDOM","uk"),v()(k,"attributes",{}),v()(k,"runtime",null),v()(k,"nodeName","address");var M=n(73),x=n(35),U=n(80),F=n(42);function B(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Y=function(e){u()(n,e);var t=B(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"translationService",void 0),v()(A()(r),"input",void 0),v()(A()(r),"captchaPicture",void 0),v()(A()(r),"recaptchaRenderContainer",void 0),r.translationService=new F.a;var a=r.getHash();return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","captcha-".concat(a,"-acc")),r.labelDOMNode.setAttribute("data-i18n-text","textdef_1"),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.captchaPicture=document.createElement("img"),r.captchaPicture.setAttribute("data-role","i123-captcha"),r.captchaPicture.addEventListener("load",(function(){S.a.refreshFrameHeightOnWix()}),!0),r.recaptchaRenderContainer=document.createElement("div"),r.recaptchaRenderContainer.setAttribute("class","recaptcha-container"),r.input=document.createElement("input"),r.input.setAttribute("type","text"),r.input.setAttribute("data-role","i123-input"),r.input.setAttribute("aria-labelledby","captcha-".concat(a,"-acc")),r}return l()(n,[{key:"updateRequiredState",value:function(){this.getRootNode().setAttribute("data-is-required","1")}},{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_CAPTCHA}},{key:"getElementName",value:function(){var e=this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_captcha_name");return e&&"edt_UI_control_type_captcha_name"!==e?e:"Verification"}},{key:"isRemovable",value:function(){return!1}},{key:"getResizingCapability",value:function(){return O.db.LEFT_AND_RIGHT}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"string",optional:!0};default:return null}}},{key:"getInputDOMNodes",value:function(){var e=this.getProperty("configuration.type"),t=this.getForm().getEngine().getLoader().getLoaderType();switch(e){case O.e.DAILY:case O.e.ALWAYS:case O.e.SMART:return[{inputs:[{input:this.captchaPicture,width:O.I.FOUR_UNITS},{input:this.input,width:O.I.FILL}]}];case O.e.RECAPTCHA:return t===O.B.EDIT?[{inputs:[{input:this.captchaPicture,width:null}]}]:[{inputs:[{input:this.recaptchaRenderContainer,width:null}]}];case O.e.NONE:default:return[]}}},{key:"onCaptchaTypeChanged",value:function(){var e=this.getProperty("configuration.type"),t=this.getForm().getEngine().getLoader().getLoaderType(),i=this.getForm().getEngine().getLoader().getLoaderDependency(O.M.SESSION_ID);switch(e){case O.e.NONE:this.captchaPicture.src="",this.captchaPicture.setAttribute("data-captcha-type","none");break;case O.e.ALWAYS:this.captchaPicture.setAttribute("data-captcha-type","always"),t===O.B.VIEW?this.captchaPicture.src=this.captchaPicture.src||"".concat(n.PATH_TO_CAPTCHA_IN_VIEW_FORM_MODE,"?t=").concat(+new Date,"&fid=").concat(String(this.getForm().getEngine().getLoader().getFormId()||"0"),"&needsRandomCaptchaGeneration=true&PHPSESSID=").concat(i):this.captchaPicture.src=n.PATH_TO_CAPTCHA_TYPE_ALWAYS_IN_EDIT_MODE;break;case O.e.DAILY:this.captchaPicture.setAttribute("data-captcha-type","daily"),t===O.B.VIEW?this.captchaPicture.src=this.captchaPicture.src||"".concat(n.PATH_TO_CAPTCHA_TYPE_DAILY_IN_VIEW_FORM_MODE.replace(/\%FORMID\%/g,String(this.getForm().getId()||"0")),"?t=").concat(+new Date,"&PHPSESSID=").concat(i):this.captchaPicture.src=n.PATH_TO_CAPTCHA_TYPE_DAILY_IN_EDIT_MODE;break;case O.e.RECAPTCHA:this.captchaPicture.setAttribute("data-captcha-type","recaptcha"),t===O.B.VIEW?(this.captchaPicture.removeAttribute("src"),function(e){var t,i=x.a.isIOS();if(i){var r=e.recaptchaRenderContainer.getBoundingClientRect();t=r.top}e.whenRecaptchaLibraryIsLoaded().then((function(){grecaptcha.render(e.recaptchaRenderContainer,{sitekey:n.RECAPTCHA_SITE_KEY,"expired-callback":function(e){i&&void 0!==t&&window.parent.postMessage({top:t,command:"scroll-into-view"},"*")},callback:function(e){i&&void 0!==t&&(window.parent.postMessage({top:t,command:"scroll-into-view"},"*"),setTimeout((function(){var e=document.querySelector('[data-role="control"][data-type="form-action-bar"] button[data-role="submit"]');null===e||void 0===e||e.focus()})))}})}))}(this)):this.captchaPicture.src=n.PATH_TO_CAPTCHA_TYPE_RECAPTCHA_IN_EDIT_MODE;break;case O.e.SMART:this.captchaPicture.setAttribute("data-captcha-type","smart"),t===O.B.VIEW?this.captchaPicture.src=this.captchaPicture.src||"".concat(n.PATH_TO_CAPTCHA_IN_VIEW_FORM_MODE,"?t=").concat(+new Date,"&fid=").concat(String(this.getForm().getEngine().getLoader().getFormId()||"0"),"&needsRandomCaptchaGeneration=true&PHPSESSID=").concat(i):this.captchaPicture.src=n.PATH_TO_CAPTCHA_TYPE_SMART_IN_EDIT_MODE}this.updateCaptchaTypeAttribute()}},{key:"updateCaptchaTypeAttribute",value:function(){switch(this.getProperty("configuration.type")){case O.e.NONE:this.rootNode.setAttribute("data-captcha-type","none");break;case O.e.DAILY:this.rootNode.setAttribute("data-captcha-type","daily");break;case O.e.RECAPTCHA:this.rootNode.setAttribute("data-captcha-type","recaptcha");break;case O.e.RESERVED:this.rootNode.setAttribute("data-captcha-type","");break;case O.e.SMART:this.rootNode.setAttribute("data-captcha-type","smart");break;case O.e.ALWAYS:this.rootNode.setAttribute("data-captcha-type","always")}}},{key:"whenRecaptchaLibraryIsLoaded",value:function(){return function(e,t){return n.isRecaptchaLibraryLoaded?t.Deferred((function(e){e.resolve(!0)})).promise():(void 0!==n.theOnlyOneRecaptchaAPIPromise||(n.theOnlyOneRecaptchaAPIPromise=t.Deferred((function(t){window.RECAPTCHA_READY_CALBACK_612388123=function(){n.isRecaptchaLibraryLoaded=!0,delete window.RECAPTCHA_READY_CALBACK_612388123,t.resolve(!0)},e.getForm().getEngine().getResourceManager().loadJavascript("//www.google.com/recaptcha/api.js?onload=RECAPTCHA_READY_CALBACK_612388123&render=explicit").then((function(){setTimeout((function(){S.a.refreshFrameHeightOnWix()}),100)})).fail((function(){t.reject(new Error("Failed to load google Recaptcha Library"))}))})).promise()),n.theOnlyOneRecaptchaAPIPromise)}(this,L.a.getJQuery())}},{key:"onCreated",value:function(){var e=this;setTimeout((function(){e.updateLabelText(),e.updateErrorsText(),e.updateRequiredState(),e.updateCaptchaTypeAttribute();for(var t=0,n=e.enumerateProperties(),i=n.length;t<i;t++)e.getForm().trigger("node-property-changed",e,n[t].name,e.getProperty(n[t].name),null);S.a.refreshFrameHeightOnWix()}),0)}},{key:"setRendererType",value:function(e){var t=this.translationService.translateText("captcha_emptyStateFirst"),i=this.translationService.translateText("captcha_emptyStateSecond"),r=this.getProperty("configuration.type"),a=this.getForm().getEngine().getLoader().getLoaderType();if(r===O.e.NONE)if(this.getRootNode().innerHTML="",a===O.B.EDIT){var o=document.createElement("p");o.innerHTML="".concat(t," <span>").concat(i,"</span>"),this.getRootNode().appendChild(o)}else this.getRootNode().style.display="none";else this.getRootNode().style.display="",y()(_()(n.prototype),"setRendererType",this).call(this,e)}},{key:"synchronizeValue",value:function(){S.a.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"onValueChanged",value:function(){var e=this.input.value;this.setProperty("value.value",""===e?null:e),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"isSubmittable",value:function(){var e=this.getProperty("configuration.type");return e!==O.e.NONE&&e!==O.e.SMART}},{key:"getProperty",value:function(e){var t=y()(_()(n.prototype),"getProperty",this).call(this,e);switch(e){case"label.labelText":if(null===t){var i=this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_captcha_name");return i&&"edt_UI_control_type_captcha_name"!==i?i:"Verification"}return t;case"value.value":var r=this.getProperty("configuration.type"),a=this.getForm().getEngine().getLoader().getLoaderType();if(r===O.e.RECAPTCHA&&a===O.B.VIEW){var o=document.getElementById("g-recaptcha-response");if(o)return o.value}return t;default:return t}}},{key:"isDuplicatable",value:function(){return!1}},{key:"onReset",value:function(){this.setValue({value:null})}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getElementName()),this.updateLabelText(),this}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"getParentPage",value:function(){return this.getForm().getPageByIndex(this.getForm().getNumberOfPages()-1)}},{key:"withColspan",value:function(e){var t=this,i=y()(_()(n.prototype),"withColspan",this).call(this,e);return null!==e&&20!==e?(this.getForm().getConfiguration().withProperty("captchaWidthInUnits",e),setTimeout((function(){var e=t.getParent().getChildren();e[0]!==t&&t.getForm().getConfiguration().withProperty("captchaLeftMarginInUnits",e[0].getColspan())}),100)):(this.getForm().getConfiguration().deleteProperty("captchaWidthInUnits"),this.getForm().getConfiguration().deleteProperty("captchaLeftMarginInUnits")),i}},{key:"setMarginLeft",value:function(e){var t=this.getParent().getChildren();if(null===e||e<=0)t[0]!==this&&this.getParent().removeChild(t[0]);else if(t[0]!==this)t[0].withColspan(e);else{var n=this.getForm().getEngine().createElement(b.a.CONTROL_TYPE_SEPARATOR,void 0,this.getForm());this.getParent().insertBefore(this,n),n.withColspan(e)}}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getForm().getEngine().getI18n();return e.push({key:"textdef_1",sourceText:this.getProperty("label.labelText")||t.translateText("textdef_1")}),e}},{key:"setupI18n",value:function(){var e=this;return setTimeout((function(){var t=e.getForm().getEngine().getLoader();e.getForm().getEngine().getLoader().getLoaderType()===O.B.VIEW&&t.getCurrentLanguage()===t.getDefaultLanguage()&&e.getProperty("label.labelText")&&(e.labelDOMNode.innerHTML=M.a.sanitizeHTML(U.a.parse(e.getProperty("label.labelText"))))}),100),y()(_()(n.prototype),"setupI18n",this).call(this)}},{key:"getCaptchaVisibility",value:function(){return this.getProperty("configuration.type")!==O.e.NONE}},{key:"setCaptchaVisibility",value:function(e){var t=document.querySelector("#reCaptchaByGoogle");t&&(t.checked=!0),e?this.setProperty("configuration.type",O.e.RECAPTCHA):this.setProperty("configuration.type",O.e.NONE)}}],[{key:"getConfiguration",value:function(){return null}}]),n}(i.a);v()(Y,"isRecaptchaLibraryLoaded",!1),v()(Y,"theOnlyOneRecaptchaAPIPromise",void 0),v()(Y,"PATH_TO_CAPTCHA_TYPE_SMART_IN_EDIT_MODE","/images3/editor/captcha_smart.png"),v()(Y,"PATH_TO_CAPTCHA_TYPE_DAILY_IN_EDIT_MODE","/images3/editor/captcha_daily.png"),v()(Y,"PATH_TO_CAPTCHA_TYPE_ALWAYS_IN_EDIT_MODE","/images3/editor/captcha_always.png"),v()(Y,"PATH_TO_CAPTCHA_TYPE_RECAPTCHA_IN_EDIT_MODE","/images3/editor/captcha_recaptcha.gif"),v()(Y,"PATH_TO_CAPTCHA_IN_VIEW_FORM_MODE","/random.php"),v()(Y,"PATH_TO_CAPTCHA_TYPE_DAILY_IN_VIEW_FORM_MODE","/random-%FORMID%.png"),v()(Y,"RECAPTCHA_SITE_KEY","6LdMNiMTAAAAAGr0ibqKRZc3e5Z6wfLBraX9NuOY"),v()(Y,"nodeName","form-captcha"),v()(Y,"attributes",{}),v()(Y,"runtime",null);var V=n(26),H=n(96);function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var W=function(e){u()(n,e);var t=G(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"choices",[]),v()(A()(r),"warningContainer",void 0);var a=r.getHash();return r.hasAccessibilityEnabled=r.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1),r.rootNode.setAttribute("aria-labelledby","checkbox-".concat(a,"-acc ")+"checkbox-".concat(a,"-error-acc ")+"checkbox-".concat(a,"-instr-acc")),r.hasAccessibilityEnabled?(r.labelDOMNode=document.createElement("div"),r.labelDOMNode.classList.add("control__label")):r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","checkbox-".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","checkbox-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","checkbox-".concat(a,"-instr-acc")),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_CHECKBOX}},{key:"getElementName",value:function(){return"Checkbox"}},{key:"updateChoices",value:function(){if(this.hasProperty("choices.values")){var e,t,n,i,r,a,o,s=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),l=this.getHash(),c=this.getProperty("options.showNumberOfChoicesLeft"),u=s.some((function(e){return e.image})),d=this.getProperty("choices.useButtonLikeChoices");u||d?this.rootNode.classList.add("button-choices"):this.rootNode.classList.remove("button-choices"),c?this.rootNode.setAttribute("data-show-number-of-choices","1"):this.rootNode.removeAttribute("data-show-number-of-choices");for(var p=0,h=s.length;p<h;p++)s[p].index=p;this.hasProperty("options.randomizeOrder")&&this.getProperty("options.randomizeOrder")&&S.a.shuffle(s),this.hasProperty("choices.allowOther")&&this.getProperty("choices.allowOther")&&s.push({text:"Other...",isOther:!0,index:s.length});for(var _=0,g=this.choices.length;_<g;_++)this.choices[_].parentNode&&this.choices[_].parentNode.removeChild(this.choices[_]);this.choices.splice(0,this.choices.length);for(var m=0,f=s.length;m<f;m++){(i=document.createElement("div")).setAttribute("data-role","choice"),i.setAttribute("data-index",String(s[m].index)),(u||d)&&i.classList.add("choice-box","w-auto"),(e=document.createElement("input")).setAttribute("type","checkbox"),e.setAttribute("id","".concat(l,"_").concat(m)),e.setAttribute("data-role","i123-input"),e.setAttribute("data-index",String(s[m].index)),this.hasAccessibilityEnabled&&(e.setAttribute("aria-hidden","true"),e.setAttribute("tabIndex","-1")),s[m].isOther?e.setAttribute("data-is-other","1"):e.setAttribute("data-value",s[m].text),(t=document.createElement("label")).setAttribute("data-role","choice"),t.setAttribute("id","checkbox-".concat(l,"-").concat(m)),t.classList.add("choice-box__label");var E=document.createElement("div");if(E.classList.add("choice-box__image-container"),!s[m].isOther&&s[m].image){var y=document.createElement("img");y.setAttribute("src",s[m].image),y.setAttribute("alt",s[m].text),y.classList.add("choice-box__image"),E.appendChild(y)}else E.classList.add("choice-box__image-container--no-image");if(u&&t.appendChild(E),t.appendChild(e),s[m].isDefault&&(e.checked=!0,t.setAttribute("aria-checked","true"),i.setAttribute("data-is-checked","1")),this.hasAccessibilityEnabled?(n=document.createElement("i")).classList.add("checkbox-icon"):(n=document.createElement("label")).setAttribute("for","".concat(l,"_").concat(m)),n.setAttribute("data-role","checkbox"),n.setAttribute("aria-labelledby","checkbox-".concat(l,"-").concat(m)),n.setAttribute("role","checkbox"),t.appendChild(n),i.appendChild(t),s[m].isOther)(r=document.createElement("input")).setAttribute("data-role","other"),r.setAttribute("type","text"),r.setAttribute("data-size","full"),(o=document.createElement("span")).innerHTML=s[m].text||"",o.setAttribute("data-i18n-text","textdef_15"),t.appendChild(o),i.appendChild(r);else S.a.isImageURL(s[m].text||"")?((a=document.createElement("img")).setAttribute("src",s[m].text),a.setAttribute("data-choice-is-image","1"),t.appendChild(a)):((o=document.createElement("span")).setAttribute("data-role","option-text"),o.classList.add("choice-box__option-text"),o.innerHTML=s[m].text||"",t.appendChild(o));this.setupNumberOfTimesAnOptionCanBeChosen(s[m],c,t,i,e),this.choices.push(i)}this.isAttached()&&this.reRender()}}},{key:"setupNumberOfTimesAnOptionCanBeChosen",value:function(e,t,n,i,r){if(e.numberOfTimesThisOptionCanBeChosen&&null!==e.numberOfTimesThisOptionCanBeChosen&&e.numberOfTimesThisOptionCanBeChosen>=-1){var a=~~e.numberOfTimesThisOptionHasBeenChosen;a<0&&(a=0);var o=e.numberOfTimesThisOptionCanBeChosen-a;if(t){var s=document.createElement("span");s.setAttribute("data-role","label-info");var l=document.createElement("span");s.appendChild(document.createTextNode("".concat(String(o<0||0===o?0:o)," "))),l.textContent=1===o?"choice left":"choices left",l.setAttribute("data-i18n-text",1===o?"textdef_173":"textdef_174"),s.appendChild(l),n.appendChild(s)}(this.getForm().getEngine().getLoader().getLoaderType()===O.B.EDIT||this.getForm().getEngine().getLoader().getLoaderType()===O.B.VIEW&&this.getForm().getEngine().getLoader().getViewFormContext()!==O.vb.EDIT_SUBMISSION)&&o<1&&(n.setAttribute("data-disabled","1"),i.setAttribute("data-disabled","1"),r.setAttribute("disabled","true"),r.setAttribute("data-disabled","1"))}}},{key:"updateSideBySideAttribute",value:function(){this.getProperty("layout.isSideBySide")?this.rootNode.setAttribute("data-is-side-by-side-layout","1"):this.rootNode.removeAttribute("data-is-side-by-side-layout")}},{key:"getNumberOfColumns",value:function(){var e=this.hasProperty("layout.columns")?~~this.getProperty("layout.columns"):1;return e<1&&(e=1),e>4&&(e=4),e}},{key:"getChoiceWidth",value:function(e){switch(e){case 2:return O.I.HALF;case 3:return O.I.THIRD;case 4:return O.I.QUARTER}return O.I.FULL}},{key:"getInputObject",value:function(e,t){switch(e){case 2:return{width:O.I.HALF,input:t};case 3:return{width:O.I.THIRD,input:t};case 4:return{width:O.I.QUARTER,input:t};case 1:default:return{width:O.I.FULL,input:t}}}},{key:"getIsSideBySideLayout",value:function(){return!!this.hasProperty("layout.isSideBySide")&&!!this.getProperty("layout.isSideBySide")}},{key:"getIsDirectionVertical",value:function(){return!!this.hasProperty("layout.direction")&&"vertical"===this.getProperty("layout.direction")}},{key:"getVerticalChoicesLayoutRows",value:function(e,t){var n=Math.ceil(e/t),i=this.getChoiceWidth(t),r=0,a=[];n!==~~n&&(n=1+~~n);for(var o=0,s=e;o<s;o++)a[r]=a[r]||{inputs:[]},a[r].inputs.push({width:i,input:this.choices[o]}),++r>=n&&(r=0);return a}},{key:"getHorizontalChoicesLayoutRows",value:function(e,t){for(var n=null,i=0,r=[],a=0,o=e;a<o;a++)null===n&&(n={inputs:[]},r.push(n)),n.inputs.push(this.getInputObject(t,this.choices[a])),++i>=t&&(i=0,a<o-1&&(n={inputs:[]},r.push(n)));return r}},{key:"getSideBySideChoicesLayoutRows",value:function(e){for(var t=[],n={inputs:[]},i=0,r=e;i<r;i++)n.inputs.push({width:null,input:this.choices[i]});return t.push(n),t}},{key:"getInputDOMNodes",value:function(){var e=this.getNumberOfColumns(),t=this.getIsSideBySideLayout(),n=this.getIsDirectionVertical(),i=this.choices.length;switch(!0){case t:return this.getSideBySideChoicesLayoutRows(i);case n:if(!this.getForm().getEngine().getTheme().isMobileLayout())return this.getVerticalChoicesLayoutRows(i,e)}return this.getHorizontalChoicesLayoutRows(i,e)}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateChoices(),this.updateSideBySideAttribute(),this.updateHiddenAttribute(),this.updateShowInstructionsOnClick(),this.addCustomInputInvalidation(),this.getForm().getEngine().getLoader().getLoaderType()===O.B.VIEW&&this.onValueChanged()}},{key:"addCustomInputInvalidation",value:function(){var e=this.getForm().getEngine().getJQuery(),t=this,n=function(e){var n=this.getAttribute("data-index"),i=n&&t.rootNode.querySelector('div[data-index="'.concat(n,'"]'));if("undefined"!=typeof i&&(!e.keyCode||e.keyCode===V.a.KEY_SPACE)){var r=i&&i.hasAttribute("data-disabled");if(e.keyCode===V.a.KEY_SPACE?this.checked||r:!this.checked||r)return t.warningContainer&&t.getErrorDOMNode().removeChild(t.warningContainer),t.warningContainer&&!t.getErrorDOMNode().hasChildNodes()&&t.getErrorDOMNode().setAttribute("data-is-empty","1"),void(t.warningContainer=null);var a=t.getProperty("choices.maxNumberOfChoices"),o=t.choices.filter((function(e){var t=e.querySelector("input[type=checkbox]");return t&&t.checked})).length;null!==a&&o>a&&(t.warningContainer||(t.warningContainer=document.createElement("div"),t.warningContainer.setAttribute("data-warning-container","1")),t.warningContainer.innerText="".concat(t.getForm().getEngine().getI18n().translateText("textdef_61")," (").concat(a,")")||!1,t.getErrorDOMNode().removeAttribute("data-is-empty"),t.getErrorDOMNode().appendChild(t.warningContainer),e.stopPropagation(),e.preventDefault())}};e(this.rootNode).on("keydown","input[type=checkbox]",n),e(this.rootNode).on("click","input[type=checkbox]",n)}},{key:"onValueChanged",value:function(){for(var e,t,n,i,r,a=[],o=this.getProperty("choices.maxNumberOfChoices"),s=this.getProperty("choices.minNumberOfChoices"),l=0,c=this.choices.length;l<c;l++)e=this.choices[l].querySelector("input[type=checkbox]"),r=this.choices[l].querySelector("[data-role=checkbox]"),e&&e.checked?(e.hasAttribute("data-is-other")?(t=this.choices[l].querySelector("input[type=text][data-role=other]"))&&t.value&&a.push(t.value):a.push(e.getAttribute("data-value")),(i=(n=this.choices[l].querySelector("label[data-role=choice]"))?n.parentNode:null)&&i.setAttribute("data-is-checked","1"),r.setAttribute("aria-checked","true")):((i=(n=this.choices[l].querySelector("label[data-role=choice]"))?n.parentNode:null)&&i.hasAttribute("data-is-checked")&&i.removeAttribute("data-is-checked"),r&&r.removeAttribute("aria-checked"));this.updateControlErrorState(a,o,s),this.setProperty("value.values",a),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"updateControlErrorState",value:function(e,t,n){e.length>t&&null!=t&&t>0?this.addError(g.a.ERR_TOO_MANY_CHOICES_SELECTED,"".concat(this.getForm().getEngine().getI18n().translateText("textdef_61")," (").concat(t,")")||!1):this.removeError(g.a.ERR_TOO_MANY_CHOICES_SELECTED),e.length<n&&e.length>=1&&null!=n&&n>0?this.addError(g.a.ERR_TOO_FEW_CHOICES_SELECTED,this.getForm().getEngine().getI18n().translateText("textdef_164",String(n))||"You must select at least ".concat(n," options")):this.removeError(g.a.ERR_TOO_FEW_CHOICES_SELECTED)}},{key:"getPropertyDescriptorByInputIndex",value:function(e){var t=(this.getProperty("choices.values")||[]).length;return e<t?{element:this,targetPropertyFQN:"value.values",optional:!1,type:"boolean",inputIndex:e}:e>t?null:this.getProperty("choices.allowOther")?{element:this,targetPropertyFQN:"value.values",optional:!1,type:"string",inputIndex:e}:null}},{key:"synchronizeValue",value:function(){for(var e,t,n,i,r,a,o=JSON.parse(JSON.stringify(this.getProperty("value.values")))||[],s=this.getProperty("choices.values"),l=0,c=this.choices.length;l<c;l++)void 0!==s[i=parseInt(this.choices[l].getAttribute("data-index"))]&&(t=s[i].text,n=(r=o.indexOf(t))>-1,this.choices[l].querySelector("input[type=checkbox]").checked=n,n&&o.splice(r,1));if(o.length>0&&this.choices.length&&this.getProperty("choices.allowOther"))try{var u=this.choices[this.choices.length-1],d=String(o[0]).replace(/^yes,\s/,"");u.setAttribute("data-is-checked","1"),u.querySelector("input[type=checkbox]").checked=!!o[0],u.querySelector("input[type=text]").value=d,u.querySelector("[data-role=checkbox]").setAttribute("aria-checked","true")}catch(_){console.error(_)}if(o.length){if(a=!1,e=this.getProperty("value.values"),o[0]||(e.splice(e.indexOf(o[0]),1),a=!0),o.length>1){for(var p=1,h=o.length;p<h;p++)e.splice(e.indexOf(o[p]),1);a=!0}a&&this.setProperty("value.values",e)}}},{key:"isNumberOfTimesAnOptionCanBeChosen",value:function(){for(var e=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),t=0,n=e.length;t<n;t++)if(null!==e[t].numberOfTimesThisOptionCanBeChosen&&void 0!==e[t].numberOfTimesThisOptionCanBeChosen)return!0;return!1}},{key:"setIsNumberOfTimesAnOptionCanBeChosen",value:function(e){for(var t=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),n=0,i=t.length;n<i;n++)e?void 0!==t[n].numberOfTimesThisOptionCanBeChosen&&null!==t[n].numberOfTimesThisOptionCanBeChosen||(t[n].numberOfTimesThisOptionCanBeChosen=0):t[n].numberOfTimesThisOptionCanBeChosen=null;this.setProperty("choices.values",t)}},{key:"getChoicesValues",value:function(){return JSON.parse(JSON.stringify(this.getProperty("choices.values")||[]))}},{key:"setChoicesValues",value:function(e){e&&Object(H.a)(e,(function(e){return e.text=e.text.trim()})),this.setProperty("choices.values",e)}},{key:"getChoicesDOMNodes",value:function(){return this.choices}},{key:"onReset",value:function(){this.updateChoices(),this.onValueChanged()}},{key:"setupDefaults",value:function(){var e=this;return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_checkbox_name")),this.setProperty("choices.useButtonLikeChoices",!0),this.updateLabelText(),setTimeout((function(){return e.updateChoices()}),100),this}},{key:"setupI18n",value:function(){var e=this.getId();if(e)for(var t=0,i=this.choices.length;t<i;t++){var r=this.choices[t].querySelector("input[type=checkbox][data-index]");if(r){var a=~~r.getAttribute("data-index"),o=this.choices[t].querySelector("span[data-role=option-text]");o&&(o.setAttribute("data-i18n-html","control_label_".concat(e,"_choice_").concat(a)),o.setAttribute("data-skip-markdown","true"))}}return y()(_()(n.prototype),"setupI18n",this).call(this)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=(this.getForm().getEngine().getI18n(),this.getProperty("label.labelText")||""),n=this.getProperty("instructions.text")||"";t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n});for(var i=this.getProperty("choices.values")||[],r=0,a=i.length;r<a;r++)i[r].text&&e.push({key:"control_label_".concat(this.getId(),"_choice_").concat(r),sourceText:i[r].text});return e}},{key:"cloneNode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return y()(_()(n.prototype),"cloneNode",this).call(this,e,t)}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_CHECKBOX,name:"Checkbox",isContainer:!1,category:O.w.ESSENTIALS,keywords:"multiple choice checkbox checkboxes choices",icon:"i123-multiple_choice",isVirtual:!1,i18nName:"edt_UI_control_type_checkbox_name",i18nKeywords:"edt_UI_control_type_checkbox_keywords",index:40,accessibilityFields:O.v.ROOT_NODE+O.v.ERROR_NODE,title:i.a.translationService.translateText("editorFieldTooltip_multipleChoice")}}}]),n}(i.a);v()(W,"attributes",{}),v()(W,"runtime",null),v()(W,"nodeName","check-box");var j=n(24),K=n(16);function z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var X=function(e){u()(n,e);var t=z(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"input",void 0);var a=r.getHash();return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","number-".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","number-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","text-".concat(a,"-instr-acc")),r.input=document.createElement("input"),r.input.setAttribute("type","text"),r.input.setAttribute("data-role","i123-input"),r.input.setAttribute("aria-labelledby","text-".concat(a,"-acc ")+"text-".concat(a,"-error-acc ")+"text-".concat(a,"-instr-acc")),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_COUPON}},{key:"getElementName",value:function(){return"Coupon"}},{key:"getSupportedValidators",value:function(){return[this.getForm().getEngine().getValidator().getValidatorById(j.a.VALIDATOR_TYPE_NONE)]}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.I.FULL}]}]}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"string",optional:!0};default:return null}}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"synchronizeValue",value:function(){S.a.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",i.a.translationService.translateText("editorField_coupon")),this.updateLabelText(),this}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.getForm().getEngine().getLoader().getLoaderType()===O.B.EDIT?this.synchronizeValue():this.onValueChanged()}},{key:"onReset",value:function(){this.synchronizeValue()}},{key:"onDuplicate",value:function(){y()(_()(n.prototype),"onDuplicate",this).call(this)}},{key:"onValueChanged",value:function(){var e=this.input.value;this.setProperty("value.value",""===e?null:e),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"getCouponCodes",value:function(){var e=this.getForm();return e.hasEditorSetting(K.a.PAYMENT_COUPON_CODES_EDITOR_SETTING)||e.withEditorSetting(e.getEngine().getFactory().createEditorSettingByTypeId(K.a.PAYMENT_COUPON_CODES_EDITOR_SETTING,e)),e.getEditorSettingByTypeId(K.a.PAYMENT_COUPON_CODES_EDITOR_SETTING).getProperty("codes")}},{key:"setCouponCodes",value:function(e){var t=this.getForm();return t.hasEditorSetting(K.a.PAYMENT_COUPON_CODES_EDITOR_SETTING)||t.withEditorSetting(t.getEngine().getFactory().createEditorSettingByTypeId(K.a.PAYMENT_COUPON_CODES_EDITOR_SETTING,t)),t.getEditorSettingByTypeId(K.a.PAYMENT_COUPON_CODES_EDITOR_SETTING).setProperty("codes",e)}},{key:"isDuplicatable",value:function(){return!1}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_COUPON,name:"Discount code",isContainer:!1,category:O.w.CALCULATION,keywords:"coupon voucher discount code",icon:"i123-field_coupon",isVirtual:!1,i18nName:"editorField_coupon",i18nKeywords:"edt_UI_control_type_coupon_keywords",index:50,accessibilityFields:O.v.NONE,title:i.a.translationService.translateText("editorFieldTooltip_coupon")}}}]),n}(i.a);function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(X,"nodeName","coupon"),v()(X,"attributes",{}),v()(X,"runtime",null);var q=function(e){u()(n,e);var t=Z(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"input",void 0);var a=r.getHash(),s=r.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1);return r.rootNode.setAttribute("aria-labelledby","date-".concat(a,"-acc ")+"date-".concat(a,"-error-acc ")+"date-".concat(a,"-instr-acc")),r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","date-".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","date-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","date-".concat(a,"-instr-acc")),r.input=L.a.createElement(L.a.ELEMENT_TYPE_DATE),r.input.setI18n(e.getEngine().getI18n()),r.input.setAttribute("data-role","i123-input"),r.input.withHash(a).setAccessibilityEnabled(s),r.input.setFormat(r.getProperty("validation.type")||j.a.VALIDATOR_TYPE_DATE_MMDDYYYY),r.input.setAttribute("aria-live","assertive"),r.input.setAttribute("role","alert"),r.input.setAttribute("aria-labelledby","date-".concat(a,"-acc")+" date-".concat(a,"-error-acc")+" date-".concat(a,"-instr-acc")+" date-".concat(a,"-day")+" date-".concat(a,"-month")+" date-".concat(a,"-year")),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getDateValue",value:function(){var e=this.getProperty("value.value");if(null===e)return null;var t=new Date;return t.setTime(1e3*e),t}},{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_DATE}},{key:"getElementName",value:function(){return"Date"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.I.FULL}]}]}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.getForm().getEngine().getLoader().getLoaderType()===O.B.EDIT?this.synchronizeValue():this.onValueChanged(),this.updateShowInstructionsOnClick(),this.setDateControlOptions(),this.updateHiddenAttribute(),this.loadDefaultDateValueIntoForm(),this.validateDateInterval(),this.onReadonlyStateChanged()}},{key:"getSupportedValidators",value:function(){var e=this.getForm().getEngine().getValidator();return[e.getValidatorById(j.a.VALIDATOR_TYPE_DATE_MMDDYYYY),e.getValidatorById(j.a.VALIDATOR_TYPE_DATE_DDMMYYYY),e.getValidatorById(j.a.VALIDATOR_TYPE_DATE_YYYYMMDD),e.getValidatorById(j.a.VALIDATOR_TYPE_DATE_MMYYYY)]}},{key:"onValueChanged",value:function(){var e=this.input.getDateValue();this.setProperty("value.value",null===e?null:Math.floor(e.getTime()/1e3)),this.validateDateInterval(),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"getStringValue",value:function(){return this.input.getValue()}},{key:"setStringValue",value:function(e){try{this.input.setValue(e)}catch(t){this.input.setDateValue(null)}this.onValueChanged()}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.stringValue",type:"string",optional:!0};default:return null}}},{key:"setDateControlOptions",value:function(){this.input.withWeekStart(this.getProperty("configuration.weekStart")),this.input.withAcceptedDaysOfWeek(this.getProperty("configuration.acceptedDaysOfWeek")),this.input.withHash(this.getHash()),this.input.setFormat(this.getProperty("validation.type"))}},{key:"synchronizeValue",value:function(){var e,t=this.getProperty("value.value");null===t?e=null:(e=new Date).setTime(1e3*t),this.input.setDateValue(e),null!==e&&this.hasError(g.a.ERR_INVALID_DATE)&&this.removeError(g.a.ERR_INVALID_DATE)}},{key:"setupDefaults",value:function(){this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_date_name"));var e=this.getForm().getEngine().getLoader().getLoaderDependency(O.M.DEFAULT_USER_PREFERENCES);return e&&(this.setProperty("validation.type",e.dateFormat),this.setDateControlOptions()),this.updateLabelText(),this}},{key:"getAcceptedDaysOfWeekString",value:function(){var e=[];return this.hasProperty("configuration.acceptedDaysOfWeek")&&this.getProperty("configuration.acceptedDaysOfWeek")&&(e=this.getProperty("configuration.acceptedDaysOfWeek").map(String)),e}},{key:"setAcceptedDaysOfWeekString",value:function(e){var t=[];if(e)for(var n=0,i=e.length;n<i;n++)t[n]=~~e[n];this.hasProperty("configuration.acceptedDaysOfWeek")&&this.setProperty("configuration.acceptedDaysOfWeek",t)}},{key:"loadDefaultDateValueIntoForm",value:function(){var e="",t=this.hasProperty("validation.type")&&this.getProperty("validation.type")?this.getProperty("validation.type"):j.a.VALIDATOR_TYPE_DATE_MMDDYYYY,n=this.hasProperty("configuration.defaultValue")?this.getProperty("configuration.defaultValue"):void 0;"string"!==typeof n&&(e=this.convertDateTimestampToString(n)),n||0===n?(this.input.setDateValue(this.getForm().getEngine().getTimeUtils().stringToTime(e||n,t)),this.onValueChanged()):this.input.setDateValue(null)}},{key:"formatDateString",value:function(e){var t=e.length>10?new Date(e).getTime()/1e3:new Date(e.replace(/-/g,"/")).getTime()/1e3;if(25294===this.getForm().getId()&&"salesforce-eu.123formbuilder.com"===window.location.hostname){var n=this.hasProperty("validation.type")?this.getProperty("validation.type"):"",i=""!==n?n:j.a.VALIDATOR_TYPE_DATE_MMDDYYYY;t=this.getForm().getEngine().getTimeUtils().stringToTime(e||String(e),i).getTime()/1e3}else{var r,a=this.hasProperty("validation.type")?this.getProperty("validation.type"):void 0;switch(this.getTimeFormatFromValidatorType(String(a))){case"%m-%Y":(r=/^([\d]{1,2})[\/\-\.]{1}([\d]{4})$/.exec(e))&&(t=new Date("".concat(r[1],"/01/").concat(r[2])).getTime()/1e3);break;case"%d-%m-%Y":(r=/^([\d]{1,2})[\/\-\.]{1}([\d]{1,2})[\/\-\.]{1}([\d]{4})$/.exec(e))&&(t=new Date("".concat(r[2],"/").concat(r[1],"/").concat(r[3])).getTime()/1e3);break;default:t=e.length>10?new Date(e).getTime()/1e3:new Date(e.replace(/-/g,"/")).getTime()/1e3}}return this.convertDateTimestampToString(t)}},{key:"convertDateTimestampToString",value:function(e){var t,n=this.hasProperty("validation.type")?this.getProperty("validation.type"):void 0;return n&&(t=this.getTimeFormatFromValidatorType(String(n))),this.getForm().getEngine().getTimeUtils().formatTime(e,t)}},{key:"getTimeFormatFromValidatorType",value:function(e){switch(e){case j.a.VALIDATOR_TYPE_DATE_YYYYMMDD:e="%Y-%m-%d";break;case j.a.VALIDATOR_TYPE_DATE_MMDDYYYY:e="%m-%d-%Y";break;case j.a.VALIDATOR_TYPE_DATE_MMYYYY:e="%m-%Y";break;case j.a.VALIDATOR_TYPE_DATE_DDMMYYYY:default:e="%d-%m-%Y"}return e}},{key:"checkDateRelativeValues",value:function(e){var t,n,i="",r="",a=this.getProperty("configuration.maxDateRelativeValue")||void 0,o=this.getProperty("configuration.minDateRelativeValue")||void 0,s=(this.hasProperty("validation.type")?this.getProperty("validation.type"):void 0)||j.a.VALIDATOR_TYPE_DATE_MMDDYYYY;"string"!==typeof a&&(i=this.convertDateTimestampToString(a)),"string"!==typeof o&&(r=this.convertDateTimestampToString(o)),t=void 0!==a?this.getForm().getEngine().getTimeUtils().stringToTime(i||String(a),s):null,n=void 0!==o?this.getForm().getEngine().getTimeUtils().stringToTime(r||String(o),s):null,this.updateDateControlErrorState(e,t,n)}},{key:"updateDateControlErrorState",value:function(e,t,n){var i=this;if(null!==n&&e.getTime()<n.setHours(0,0,0,0)){var r=this.getTimeFormatFromValidatorType(this.getProperty("validation.type")),a=this.getForm().getEngine().getTimeUtils().formatTime(n.getTime()/1e3,r),o=this.getForm().getEngine().getI18n().translateText("textdef_221",a,a),s="The selected date must be ".concat(a," or after ").concat(a);setTimeout((function(){i.addError(g.a.ERR_DATE_TOO_SMALL,o||s)}),50)}else this.removeError(g.a.ERR_DATE_TOO_SMALL);if(null!==t&&e.getTime()>t.setHours(23,59,59,999)){var l=this.getTimeFormatFromValidatorType(this.getProperty("validation.type")),c=this.getForm().getEngine().getTimeUtils().formatTime(t.getTime()/1e3,l),u=this.getForm().getEngine().getI18n().translateText("textdef_220",c,c),d="The selected date must be ".concat(c," or before ").concat(c);setTimeout((function(){i.addError(g.a.ERR_DATE_TOO_BIG,u||d)}),50)}else this.removeError(g.a.ERR_DATE_TOO_BIG)}},{key:"onReset",value:function(){this.loadDefaultDateValueIntoForm(),this.validateDateInterval()}},{key:"validateDateInterval",value:function(){var e=new Date,t=this.getProperty("value.value");if(null===t)return this.removeError(g.a.ERR_DATE_TOO_BIG),void this.removeError(g.a.ERR_DATE_TOO_SMALL);e.setTime(1e3*t),this.checkDateRelativeValues(e)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),e}},{key:"onBlur",value:function(){var e=this.input.getDateValue();if(this.isValidDate(e))e==this.getDateValue()&&(this.setProperty("value.value",null===e?null:Math.floor(e.getTime()/1e3)),this.validateDateInterval(),this.isAttached()&&this.getForm().trigger("input",this),this.hasError(g.a.ERR_INVALID_DATE)&&this.removeError(g.a.ERR_INVALID_DATE));else if(!this.input.isDateFieldEmpty()){var t=this.getForm().getEngine().getI18n().translateText("textdef_228");this.addError(g.a.ERR_INVALID_DATE,t||"The selected date is invalid.")}}},{key:"isValidDate",value:function(e){return!!e}},{key:"onReadonlyStateChanged",value:function(){var e=this.getProperty("options.readOnly");this.input.setReadOnly(e)}},{key:"setProperty",value:function(e,t){if(y()(_()(n.prototype),"setProperty",this).apply(this,arguments),"value.value"===e){var i=this.getProperty("value.value"),r=null;if(i){var a=new Date(1e3*i);r="".concat(a.getFullYear(),"-").concat("0".concat(a.getMonth()+1).slice(-2),"-").concat("0".concat(a.getDate()).slice(-2))}this.setProperty("value.dateString",r)}return this}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_DATE,name:"Date",isContainer:!1,category:O.w.DATE_TIME,keywords:"date time day",icon:"i123-editor_field_date",isVirtual:!1,i18nName:"edt_UI_control_type_date_name",i18nKeywords:"edt_UI_control_type_date_keywords",index:10,accessibilityFields:O.v.ERROR_NODE+O.v.ROOT_NODE,title:i.a.translationService.translateText("editorFieldTooltip_date")}}}]),n}(i.a);function J(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(q,"attributes",{}),v()(q,"runtime",null),v()(q,"nodeName","date");var Q=function(e){u()(n,e);var t=J(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"input",void 0),v()(A()(r),"defaultOptionIndex",-1),v()(A()(r),"forceSelectedIndex",void 0);var a=r.getHash(),s=r.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1);if(r.properties&&r.properties.choices&&r.properties.choices.values&&(r.properties.choices.values=r.trimChoiceValues(r.properties.choices.values)),r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","dropdown-".concat(a,"-acc")),s&&r.labelDOMNode.setAttribute("for","dropdown-".concat(a)),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","dropdown-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","dropdown-".concat(a,"-instr-acc")),r.getProperty("options.searchable")?r.input=L.a.createElement(L.a.ELEMENT_TYPE_SEARCHABLE_DROPDOWN):r.input=L.a.createElement(L.a.ELEMENT_TYPE_DROPDOWN),r.input.setAttribute("data-role","i123-input"),r.input.setAttribute("aria-labelledby","dropdown-".concat(a,"-acc ")+"dropdown-".concat(a,"-error-acc ")+"dropdown-".concat(a,"-instr-acc")),s){var l,c=r.getProperty("options.searchable")?'input[type="text"]':"select";null===(l=r.input.getRootNode().querySelector(c))||void 0===l||l.setAttribute("id","dropdown-".concat(a))}return r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_DROPDOWN}},{key:"getElementName",value:function(){return"Dropdown"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.I.FULL}]}]}},{key:"updateChoices",value:function(){if(this.hasProperty("choices.values")){for(;this.input.getOptions().length;)this.input.remove(0);var e;if(this.hasProperty("choices.isDropdownWithForms")&&this.getProperty("choices.isDropdownWithForms"))this.updateChoicesWithForms();else{if(this.hasProperty("choices.isWorkflowsUserDropdown")&&this.getProperty("choices.isWorkflowsUserDropdownSelectAll")){var t=this.getForm().getEngine().getLoader().getLoaderDependency(O.M.WORKFLOWS_USERS_LIST);e=[];for(var n=0,i=t.length;n<i;n++)e.push({index:n,numberOfTimesThisOptionHasBeenChosen:0,text:t[n].email,value:t[n].email})}else e=S.a.clone(this.getProperty("choices.values")||[]);this.updateChoicesFunctionality(e)}}}},{key:"updateChoicesFunctionality",value:function(e){this.getProperty("choices.displayPlaceholderText")&&this.input.add(D.a.create(this.input,"",this.getProperty("options.placeholderText")));for(var t=0,n=e.length;t<n;t++)e[t].index=t;this.hasProperty("options.randomizeOrder")&&this.getProperty("options.randomizeOrder")&&(e=S.a.shuffle(e)),this.defaultOptionIndex=null;for(var i=0,r=e.length;i<r;i++)if(e[i].isDefault){e[i].numberOfTimesThisOptionCanBeChosen&&e[i].numberOfTimesThisOptionCanBeChosen-e[i].numberOfTimesThisOptionHasBeenChosen<=0&&e[i].numberOfTimesThisOptionCanBeChosen>=-1?this.defaultOptionIndex=-1:this.defaultOptionIndex=i;break}if(-1===this.defaultOptionIndex)for(var a=0,o=e.length;a<o;a++)if(e[a].numberOfTimesThisOptionCanBeChosen&&e[a].numberOfTimesThisOptionCanBeChosen-e[a].numberOfTimesThisOptionHasBeenChosen>0&&e[a].numberOfTimesThisOptionCanBeChosen>=-1){this.defaultOptionIndex=a;break}null===this.defaultOptionIndex&&(this.defaultOptionIndex=-1),this.hasProperty("choices.allowOther")&&this.getProperty("choices.allowOther")&&e.push({text:"Other...",isOther:!0,index:-1});for(var s,l=this.hasProperty("options.showNumberOfChoicesLeft")&&this.getProperty("options.showNumberOfChoicesLeft"),c=0,u=e.length;c<u;c++)e[c].value=e[c].value||e[c].text,this.setupChoiceTextNumberOfChoicesLeft(e[c],l,null),s=D.a.create(this.input,void 0===e[c].value?e[c].text:e[c].value,e[c].text),this.setupOptionDisabledStateIfNoChoicesLeft(e[c],s),s.setAttribute("data-index",String(e[c].index)),e[c].isOther&&s.setAttribute("data-role","other-option"),this.input.add(s);var d=null;if(!this.getProperty("choices.displayPlaceholderText")){for(var p=0,h=e.length;p<h;p++)if(e[p].isDefault){e[p].numberOfTimesThisOptionCanBeChosen&&e[p].numberOfTimesThisOptionCanBeChosen-e[p].numberOfTimesThisOptionHasBeenChosen<=0&&e[p].numberOfTimesThisOptionCanBeChosen>=-1?(d="",this.setProperty("value.value",d),this.setProperty("value.index",-1)):d=e[p].value;break}null!==d&&""!==d?this.input.setValue(d):-1!==this.defaultOptionIndex&&this.input.setValue(e[this.defaultOptionIndex].value)}}},{key:"updateChoicesWithForms",value:function(){!function(e){var t=e.getForm().getEngine().getJQuery(),n=S.a.clone(e.getProperty("choices.values")||[]);e.getFormsByGroups(t,n,e.getForm().getEngine().getLoader().getFormId()).then((function(t){for(var n=[],i=0,r=t.length||0;i<r;i++)n.push({index:i,numberOfTimesThisOptionHasBeenChosen:0,text:t[i].name,value:t[i].id>0?t[i].id:""});e.updateChoicesFunctionality(n)})).fail((function(t){e.getForm().getEngine().getLoader().getUI().alert("Error loading forms","There was a network error obtaining groups. Please retry. If the problem persists, contact support")}))}(this)}},{key:"getFormsByGroups",value:function(e,t,n){return e.Deferred((function(i){e.post("/modules/CustomScripts/classes/Hilti/DropdownForms/ajaxCall.php",{do:"getFormsByGroupsNewEditor",formID:n,groups:t},(function(e){i.resolve(e)}),"json").fail((function(e){i.reject(e)}))})).promise()}},{key:"setupChoiceTextNumberOfChoicesLeft",value:function(e,t,n){if(e.numberOfTimesThisOptionCanBeChosen&&null!==e.numberOfTimesThisOptionCanBeChosen&&e.numberOfTimesThisOptionCanBeChosen>=-1){var i=~~e.numberOfTimesThisOptionHasBeenChosen;i<0&&(i=0);var r=e.numberOfTimesThisOptionCanBeChosen-i,a=this.getForm().getEngine().getI18n(),o="",s=null!==n?n:e.text;switch(!0){case e.numberOfTimesThisOptionCanBeChosen-e.numberOfTimesThisOptionHasBeenChosen<=0:o="textdef_174";break;case e.numberOfTimesThisOptionCanBeChosen-e.numberOfTimesThisOptionHasBeenChosen===1:o="textdef_173";break;default:o="textdef_174"}var l=a.translateText(o);t&&(e.text=1===r?"".concat(s," (1 ").concat(l&&l!==o?"".concat(l,")"):"choice left)"):"".concat(s," (").concat(Math.max(r,0)," ").concat(l&&l!==o?"".concat(l,")"):"choices left)"))}}},{key:"onCreated",value:function(){var e=this.getProperty("options.placeholderText");this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateChoices(),this.updateShowInstructionsOnClick(),this.updateHiddenAttribute(),this.getForm().getEngine().getLoader().getLoaderType()!==O.B.EDIT||e?this.onValueChanged():this.input.setSelectedIndex(this.getDefaultOptionIndex())}},{key:"getProperty",value:function(e){return void 0!==this.forceSelectedIndex&&"value.index"===e?this.forceSelectedIndex:y()(_()(n.prototype),"getProperty",this).call(this,e)}},{key:"onValueChanged",value:function(){var e=this.input.getValue(),t=-1;this.setProperty("value.value",""===e?null:e);for(var n=0,i=this.getProperty("choices.values")||[],r=i.length;n<r;n++)if(i[n].text===e){t=n;break}this.getProperty("options.placeholderText")||this.resetValueIfValueIsPlaceholder(e),this.setProperty("value.index",-1===t?null:t),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"synchronizeValue",value:function(){S.a.synchronizeControlValue(this.input,this.getProperty("value.value")),this.input.setSelectedIndex(null===this.input.getSelectedIndex()?-1:this.input.getSelectedIndex())}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",optional:!0,type:"string"};default:return null}}},{key:"isNumberOfTimesAnOptionCanBeChosen",value:function(){for(var e=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),t=0,n=e.length;t<n;t++)if(e[t].numberOfTimesThisOptionCanBeChosen)return!0;return!1}},{key:"setIsNumberOfTimesAnOptionCanBeChosen",value:function(e){for(var t=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),n=0,i=t.length;n<i;n++)e?void 0!==t[n].numberOfTimesThisOptionCanBeChosen&&null!==t[n].numberOfTimesThisOptionCanBeChosen||(t[n].numberOfTimesThisOptionCanBeChosen=0):t[n].numberOfTimesThisOptionCanBeChosen=null;this.setProperty("choices.values",t)}},{key:"getChoicesValues",value:function(){return JSON.parse(JSON.stringify(this.getProperty("choices.values")||[]))}},{key:"setChoicesValues",value:function(e){if(null!==e)for(var t=0;t<e.length;t++)e[t].text=e[t].text.replace(/^\s+|\s+$/g,"");this.setProperty("choices.values",e)}},{key:"onReset",value:function(){this.updateChoices(),this.onValueChanged()}},{key:"setupDefaults",value:function(){this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_dropdown_name")),this.updateLabelText();var e=JSON.parse(JSON.stringify(this.getProperty("choices.values")));if(e&&e.length)for(var t=this.getForm().getEngine().getI18n(),n=0,i=Math.min(e.length,5);n<i;n++)e[n].text=t.translateText("formeditor_dropdownChoice".concat(n+1));return this.getProperty("options.placeholderText")&&e[0].isDefault&&(e[0].isDefault=!1),this.setProperty("choices.values",e),this.setProperty("options.placeholderText","Please select"),this.updateChoices(),this}},{key:"setProperty",value:function(e,t){return"choices.values"===e?y()(_()(n.prototype),"setProperty",this).call(this,e,this.trimChoiceValues(t)):y()(_()(n.prototype),"setProperty",this).call(this,e,t)}},{key:"getDefaultOptionIndex",value:function(){return this.defaultOptionIndex}},{key:"setValue",value:function(e){if(y()(_()(n.prototype),"setValue",this).call(this,e),e&&void 0===e.index)for(var t=this.getProperty("choices.values")||[],i=0,r=t.length;i<r;i++)if(t[i].text===e.value){this.setProperty("value.index",i);break}}},{key:"setupOptionDisabledStateIfNoChoicesLeft",value:function(e,t){e.numberOfTimesThisOptionCanBeChosen&&null!==e.numberOfTimesThisOptionCanBeChosen&&e.numberOfTimesThisOptionCanBeChosen>=-1&&(e.numberOfTimesThisOptionCanBeChosen-~~e.numberOfTimesThisOptionHasBeenChosen>0?t.removeAttribute("disabled"):t.setAttribute("disabled","true"))}},{key:"setupI18n",value:function(){var e,t,i=this.getProperty("options.placeholderText"),r=this.getId(),a=this.getForm().getEngine().getI18n(),o=JSON.parse(JSON.stringify(this.getProperty("choices.values"))),s=this.getProperty("options.showNumberOfChoicesLeft"),l=this.getProperty("value.value");if(r&&this.input.getOptions){for(var c=this.input.getOptions(),u=0,d=c.length;u<d;u++)if(c[u].hasAttribute&&c[u].hasAttribute("data-index")){var p=~~c[u].getAttribute("data-index");(e="control_label_".concat(r,"_choice_").concat(p))!==(t=a.translateText(e))&&t&&(s&&o[p].numberOfTimesThisOptionCanBeChosen&&null!==o[p].numberOfTimesThisOptionCanBeChosen&&o[p].numberOfTimesThisOptionCanBeChosen>=-1?(this.setupChoiceTextNumberOfChoicesLeft(o[p],s,t),c[u].text=o[p].text,this.setupOptionDisabledStateIfNoChoicesLeft(o[p],c[u])):c[u].text=t)}else i&&(c[u].text=a.translateTextDefault("control_placeholder_".concat(r),i));i||this.resetValueIfValueIsPlaceholder(l),this.input.trigger("update")}return y()(_()(n.prototype),"setupI18n",this).call(this)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"withForceSelectedIndex",value:function(e){return this.forceSelectedIndex=e,this}},{key:"enumerateTranslations",value:function(){var e=[],t=(this.getForm().getEngine().getI18n(),this.getProperty("label.labelText")||""),n=this.getProperty("instructions.text")||"",i=this.getProperty("options.placeholderText")||"";t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),i&&e.push({key:"control_placeholder_".concat(this.getId()),sourceText:i});for(var r=this.getProperty("choices.values")||[],a=0,o=r.length;a<o;a++)r[a].text&&e.push({key:"control_label_".concat(this.getId(),"_choice_").concat(a),sourceText:r[a].text});return e}},{key:"resetValueIfValueIsPlaceholder",value:function(e){var t=String(this.getForm().getEngine().getI18n().translateText("edt_placeholder_dropdown_option")||"");e&&this.getForm().getEngine().getI18n().translateText("edt_placeholder_dropdown_option")&&(this.isOriginalEqualWithTranslated(e,t)||!this.isOriginalEqualWithTranslated(e,t)&&"please select"===e.toLowerCase())&&this.setProperty("value.value","")}},{key:"isOriginalEqualWithTranslated",value:function(e,t){return e.toLowerCase()===t.toLowerCase()}},{key:"trimChoiceValues",value:function(e){if(Array.isArray(e)){for(var t=S.a.clone(e),n=0,i=t.length;n<i;n++)t[n].text=String(t[n].text||"").trim();return t}return e}},{key:"getPlaceholderTextVisibility",value:function(){return null!==this.getProperty("options.placeholderText")}},{key:"setPlaceholderTextVisibility",value:function(e){var t=this.getProperty("options.placeholderText")||"Please select";e?this.setProperty("options.placeholderText",t):this.setProperty("options.placeholderText",null),document.querySelector("#item .placeholder-text-input").value=t}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_DROPDOWN,name:"DropDown",isContainer:!1,category:O.w.ESSENTIALS,keywords:"dropdown select drop down",icon:"i123-editor_field_dropdown",isVirtual:!1,i18nName:"edt_UI_control_type_dropdown_name",i18nKeywords:"edt_UI_control_type_dropdown_keywords",index:50,accessibilityFields:O.v.ERROR_NODE+O.v.ROOT_NODE,title:i.a.translationService.translateText("editorFieldTooltip_dropdown")}}}]),n}(i.a);function ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(Q,"attributes",{}),v()(Q,"runtime",null),v()(Q,"nodeName","drop-down");var te=function(e){u()(n,e);var t=ee(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"input",void 0);var a=r.getHash(),s=r.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1);return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","file".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","file-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","file-".concat(a,"-instr-acc")),r.input=L.a.createElement(L.a.ELEMENT_TYPE_FILE).withControl(A()(r)),r.input.setAttribute("data-role","i123-input"),r.input.setAttribute("type","file"),r.input.setAttribute("aria-labelledby","file".concat(a,"-acc file-control-placeholder-acc ")+"file-".concat(a,"-error-acc ")+"file-".concat(a,"-instr-acc")),r.input.setAccessibility(s),r.input.withMultiple(r.getProperty("options.multiple")).withMinUploadSizeInBytes(r.getProperty("configuration.minSizeInBytes")||null).withMaxUploadSizeInBytes(r.getProperty("configuration.maxSizeInBytes")||null).withFileUtils(e.getEngine().getFileUtils()).withAllowDirectoryUpload(r.getProperty("options.multiple")&&r.getProperty("configuration.isAllowFolderUpload")),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_FILE}},{key:"getElementName",value:function(){return"File"}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateInstructionsText(),this.updateErrorsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.synchronizeValue(),this.updateDisabledFileExtensions(),this.updateAllowedFileExtensions(),this.updateHiddenAttribute()}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.I.FULL}]}]}},{key:"setDownloadURL",value:function(e){if(null===e)this.input.setDownloadInfo(null);else{var t={name:null,size:null,url:e},n=e.split("#").slice(1).join("#");if(n)try{var i=JSON.parse(atob(n));i&&("string"===typeof i.name&&i.name&&(t.name=i.name),"number"===typeof i.size&&i.size>=0&&(t.size=i.size))}catch(r){}this.input.setDownloadInfo(t)}this.onValueChanged()}},{key:"getDownloadURL",value:function(){var e=this.input.getDownloadInfo();return e?e.url:null}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.downloadURL",optional:!0,type:"string"};default:return null}}},{key:"onValueChanged",value:function(){this.setProperty("value.files",this.input.getFilesList()),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"updateAllowedFileExtensions",value:function(){this.input.withAllowedFileExtensions(this.getProperty("configuration.allowExtensions"))}},{key:"updateDisabledFileExtensions",value:function(){this.input.withForbiddenFileExtensions(this.getProperty("configuration.forbidExtensions"))}},{key:"getMinInputRowWidth",value:function(){return 15}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",i.a.translationService.translateText("editorField_fileUpload")),this.updateLabelText(),this}},{key:"getErrors",value:function(){for(var e=y()(_()(n.prototype),"getErrors",this).call(this)||[],t=this.input.getErrors(),i=0,r=t.length;i<r;i++)e.push(t[i]);return e.length?e:null}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"onReset",value:function(){this.input.clearFiles()}},{key:"setProperty",value:function(e,t){var i=this.getForm().getEngine().getLoader().getLoaderDependency(O.M.VIEW_FORM_CONTEXT);return"value.files"===e&&i===O.vb.PDF_EXPORT?this:y()(_()(n.prototype),"setProperty",this).call(this,e,t)}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),e}},{key:"getMinSizeInKiloBytes",value:function(){var e=this.getProperty("configuration.minSizeInBytes"),t=null;return null!==e&&(t=Math.floor(e/n.KILOBYTE_CONVERSION_FACTOR)),t}},{key:"setMinSizeInKiloBytes",value:function(e){null!==e?this.setProperty("configuration.minSizeInBytes",e*n.KILOBYTE_CONVERSION_FACTOR):this.setProperty("configuration.minSizeInBytes",null)}},{key:"getMaxSizeInKiloBytes",value:function(){var e=this.getProperty("configuration.maxSizeInBytes"),t=null;return null!==e&&(t=Math.floor(e/n.KILOBYTE_CONVERSION_FACTOR)),t}},{key:"setMaxSizeInKiloBytes",value:function(e){null!==e?this.setProperty("configuration.maxSizeInBytes",e*n.KILOBYTE_CONVERSION_FACTOR):this.setProperty("configuration.maxSizeInBytes",null)}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_FILE,name:"File / Image upload",isContainer:!1,category:O.w.UPLOADS_CONSENT,keywords:"file upload image",icon:"i123-file_upload",isVirtual:!1,i18nName:"editorField_fileUpload",i18nKeywords:"edt_UI_control_type_file_keywords",index:10,accessibilityFields:O.v.ERROR_NODE+O.v.ROOT_NODE,title:i.a.translationService.translateText("editorFieldTooltip_fileUpload")}}}]),n}(i.a);v()(te,"attributes",{}),v()(te,"runtime",null),v()(te,"nodeName","file"),v()(te,"KILOBYTE_CONVERSION_FACTOR",1024);var ne=function(){function e(){o()(this,e)}return l()(e,null,[{key:"init",value:function(){if(null===this.diacriticsMap){this.diacriticsMap={};for(var e=0;e<this.replacementList.length;e+=1)for(var t=this.replacementList[e].chars,n=0;n<t.length;n+=1)this.diacriticsMap[t[n]]=this.replacementList[e].base}}},{key:"removeDiacritics",value:function(e){var t=this;return this.init(),e.replace(/[^\u0000-\u007e]/g,(function(e){return t.diacriticsMap[e]||e}))}},{key:"getDOMWidth",value:function(e){try{var t=document.createElement("canvas").getContext("2d");return t.font="14px Open sans",Math.round(t.measureText(e).width)}catch(n){}}}]),e}();v()(ne,"diacriticsMap",null),v()(ne,"replacementList",[{base:" ",chars:"\xa0"},{base:"0",chars:"\u07c0"},{base:"A",chars:"\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",chars:"\ua732"},{base:"AE",chars:"\xc6\u01fc\u01e2"},{base:"AO",chars:"\ua734"},{base:"AU",chars:"\ua736"},{base:"AV",chars:"\ua738\ua73a"},{base:"AY",chars:"\ua73c"},{base:"B",chars:"\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0181"},{base:"C",chars:"\u24b8\uff23\ua73e\u1e08\u0106C\u0108\u010a\u010c\xc7\u0187\u023b"},{base:"D",chars:"\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018a\u0189\u1d05\ua779"},{base:"Dh",chars:"\xd0"},{base:"DZ",chars:"\u01f1\u01c4"},{base:"Dz",chars:"\u01f2\u01c5"},{base:"E",chars:"\u025b\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e\u1d07"},{base:"F",chars:"\ua77c\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",chars:"\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e\u0262"},{base:"H",chars:"\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",chars:"\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",chars:"\u24bf\uff2a\u0134\u0248\u0237"},{base:"K",chars:"\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",chars:"\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",chars:"\u01c7"},{base:"Lj",chars:"\u01c8"},{base:"M",chars:"\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c\u03fb"},{base:"N",chars:"\ua7a4\u0220\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u019d\ua790\u1d0e"},{base:"NJ",chars:"\u01ca"},{base:"Nj",chars:"\u01cb"},{base:"O",chars:"\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OE",chars:"\u0152"},{base:"OI",chars:"\u01a2"},{base:"OO",chars:"\ua74e"},{base:"OU",chars:"\u0222"},{base:"P",chars:"\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",chars:"\u24c6\uff31\ua756\ua758\u024a"},{base:"R",chars:"\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",chars:"\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",chars:"\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"Th",chars:"\xde"},{base:"TZ",chars:"\ua728"},{base:"U",chars:"\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",chars:"\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",chars:"\ua760"},{base:"W",chars:"\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",chars:"\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",chars:"\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",chars:"\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",chars:"\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250\u0251"},{base:"aa",chars:"\ua733"},{base:"ae",chars:"\xe6\u01fd\u01e3"},{base:"ao",chars:"\ua735"},{base:"au",chars:"\ua737"},{base:"av",chars:"\ua739\ua73b"},{base:"ay",chars:"\ua73d"},{base:"b",chars:"\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253\u0182"},{base:"c",chars:"\uff43\u24d2\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",chars:"\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\u018b\u13e7\u0501\ua7aa"},{base:"dh",chars:"\xf0"},{base:"dz",chars:"\u01f3\u01c6"},{base:"e",chars:"\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u01dd"},{base:"f",chars:"\u24d5\uff46\u1e1f\u0192"},{base:"ff",chars:"\ufb00"},{base:"fi",chars:"\ufb01"},{base:"fl",chars:"\ufb02"},{base:"ffi",chars:"\ufb03"},{base:"ffl",chars:"\ufb04"},{base:"g",chars:"\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\ua77f\u1d79"},{base:"h",chars:"\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",chars:"\u0195"},{base:"i",chars:"\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",chars:"\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",chars:"\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",chars:"\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747\u026d"},{base:"lj",chars:"\u01c9"},{base:"m",chars:"\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",chars:"\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5\u043b\u0509"},{base:"nj",chars:"\u01cc"},{base:"o",chars:"\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\ua74b\ua74d\u0275\u0254\u1d11"},{base:"oe",chars:"\u0153"},{base:"oi",chars:"\u01a3"},{base:"oo",chars:"\ua74f"},{base:"ou",chars:"\u0223"},{base:"p",chars:"\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755\u03c1"},{base:"q",chars:"\u24e0\uff51\u024b\ua757\ua759"},{base:"r",chars:"\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",chars:"\u24e2\uff53\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b\u0282"},{base:"ss",chars:"\xdf"},{base:"t",chars:"\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"th",chars:"\xfe"},{base:"tz",chars:"\ua729"},{base:"u",chars:"\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",chars:"\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",chars:"\ua761"},{base:"w",chars:"\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",chars:"\u24e7\uff58\u1e8b\u1e8d"},{base:"y",chars:"\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",chars:"\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}]);var ie=n(34),re=n(620);function ae(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var oe=function(e){u()(n,e);var t=ae(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"inputContainer",void 0),v()(A()(r),"prefixLabel",void 0),v()(A()(r),"input",void 0),v()(A()(r),"onValueCalculatedThrottler",void 0),v()(A()(r),"recalculateThrottler",void 0);var a=r.getHash();return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","formula-".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","formula-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","number-".concat(a,"-instr-acc")),r.input=document.createElement("input"),r.input.setAttribute("type","number"),r.input.setAttribute("data-role","i123-input"),r.input.setAttribute("data-type","formula"),r.input.setAttribute("data-no-theme",""),r.input.setAttribute("readOnly","true"),r.prefixLabel=document.createElement("span"),r.prefixLabel.setAttribute("data-role","prefix-label"),r.prefixLabel.setAttribute("id","price-".concat(a,"-prefix-acc")),r.inputContainer=document.createElement("div"),r.inputContainer.setAttribute("data-role","input-container"),r.inputContainer.setAttribute("data-ui-role","ui-element"),r.inputContainer.appendChild(r.prefixLabel),r.inputContainer.appendChild(r.input),r.recalculateThrottler=ie.a.create((function(){r.recalculate()}),100),r.input.setAttribute("aria-labelledby","formula-".concat(a,"-acc ")+"formula-".concat(a,"-error-acc ")+"number-".concat(a,"-instr-acc")),r.onValueCalculatedThrottler=ie.a.create((function(){r.validateValue()}),100),r.updateAccessibilityTabIndexes(),r.getForm().getEngine().getLoader().getRules().on("dispatch",(function(t){var n=parseInt(t.replace(/^control_/,""),10),i=e.getElementById(n);i&&i.getElementKind()===O.p.CONTROL&&i.getTypeId()!==b.a.CONTROL_TYPE_FORMULA&&r.recalculateThrottler()})),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_FORMULA}},{key:"getElementName",value:function(){return"Formula"}},{key:"updatePrefixLabel",value:function(){this.prefixLabel.textContent=this.getProperty("configuration.prefix")||"",this.adjustInputPadding()}},{key:"syncInputCompactField",value:function(){this.input.placeholder=this.inputContainer.hasAttribute("placeholder")?this.inputContainer.getAttribute("placeholder"):""}},{key:"adjustInputPadding",value:function(){var e=this;setTimeout((function(){var t=e.getForm().getEngine().getTheme().properties.input.padding.horizontal,n=e.getForm().getRootNode().getAttribute("data-text-direction"),i=e.prefixLabel.offsetWidth>parseInt(t,10)?"".concat(e.prefixLabel.offsetWidth+8,"px"):t;"ltr"===n?(e.input.style.paddingLeft=i,e.input.style.removeProperty("padding-right")):(e.input.style.paddingRight=i,e.input.style.removeProperty("padding-left"))}),1)}},{key:"getSupportedValidators",value:function(){return[this.getForm().getEngine().getValidator().getValidatorById(j.a.VALIDATOR_TYPE_NUMERIC)]}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.inputContainer,width:O.I.FULL}]}]}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"number",optional:!0};default:return null}}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"onCreated",value:function(){var e=this;this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.updateHiddenAttribute(),this.updatePrefixLabel(),this.syncInputCompactField(),this.addEventListeners(),setTimeout((function(){e.hidePrefixLabelIfNeeded()}),1e3)}},{key:"addEventListeners",value:function(){var e=this,t=this.getForm().getEngine().getLoader().getLoaderDependency(O.M.UNDO_SERVICE),n=this.getForm().getEngine();t&&t.on("user-action",(function(t){"resize-end"===t&&e.hidePrefixLabelIfNeeded()})),window.addEventListener("resize",Object(re.a)((function(){e.hidePrefixLabelIfNeeded()}),500)),this.input.addEventListener("focus",(function(){e.rootNode.querySelector('div[data-role="input-container"]').setAttribute("data-is-focused-child-element","1")})),this.input.addEventListener("blur",(function(){e.rootNode.querySelector('div[data-role="input-container"]').removeAttribute("data-is-focused-child-element")})),n.getDocument().on("update-text-direction",(function(){e.adjustInputPadding()})),n.getLoader().on("navigate-to-relative-page-number",(function(){e.hidePrefixLabelIfNeeded()}))}},{key:"hidePrefixLabelIfNeeded",value:function(){var e=this.getProperty("configuration.prefix")||"",t=parseInt(getComputedStyle(this.prefixLabel).paddingLeft,10),n=parseInt(getComputedStyle(this.input).paddingRight,10),i=ne.getDOMWidth(e);this.inputContainer.offsetWidth<i+t+n+30?this.prefixLabel.style.display="none":this.prefixLabel.style.removeProperty("display"),this.adjustInputPadding()}},{key:"onFocusEnter",value:function(){var e=this,t=setInterval((function(){e.getPrefixInspectorInput()&&(e.updateInspectorPrefix(),clearInterval(t))}),500)}},{key:"onReset",value:function(){this.validateValue()}},{key:"onDuplicate",value:function(){y()(_()(n.prototype),"onDuplicate",this).call(this),this.hasProperty("configuration.isLimitSubmissionsEnabled")&&this.getProperty("configuration.isLimitSubmissionsEnabled")&&(this.hasProperty("configuration.currentSubmissionsValue")&&this.setProperty("configuration.currentSubmissionsValue",null),this.updateInstructionsText())}},{key:"onValueChanged",value:function(){}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_formula_name")),this.updateLabelText(),this}},{key:"synchronizeValue",value:function(){S.a.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"updateInstructionsText",value:function(){if(void 0!==this.instructionsDOMNode){var e=this.getProperty("instructions.text"),t=this.hasProperty("configuration.limitSubmissionsTotal")&&this.getProperty("configuration.limitSubmissionsTotal")||null,n=this.hasProperty("configuration.currentSubmissionsValue")?this.getProperty("configuration.currentSubmissionsValue"):null,i=null!==t?Math.max(0,t-n):null,r="The maximum accepted value is ".concat(i),a=this.hasProperty("configuration.isLimitSubmissionsEnabled")?this.getProperty("configuration.isLimitSubmissionsEnabled"):null;null!==i&&a?(this.instructionsDOMNode.removeAttribute("data-is-empty"),e?(this.instructionsDOMNode.textContent=e,this.instructionsDOMNode.appendChild(document.createElement("br"))):this.instructionsDOMNode.textContent="",this.instructionsDOMNode.appendChild(document.createTextNode(r))):null===e||""===e?(this.instructionsDOMNode.setAttribute("data-is-empty","1"),this.instructionsDOMNode.textContent=""):(this.instructionsDOMNode.removeAttribute("data-is-empty"),this.instructionsDOMNode.innerHTML=M.a.sanitizeHTML(U.a.parse(e)))}}},{key:"validateValue",value:function(){var e=this.getProperty("value.value");if(0===e||e||(e=null),null===e)return this.removeError(g.a.ERR_NUMBER_TOO_BIG),this.removeError(g.a.ERR_NUMBER_TOO_LONG),this.removeError(g.a.ERR_NUMBER_TOO_SHORT),this.removeError(g.a.ERR_NUMBER_TOO_SMALL),void this.removeError(g.a.ERR_MAX_ACCEPTED_VALUE_EXCEEDED);var t=this.hasProperty("configuration.minLength")?this.getProperty("configuration.minLength"):null,n=this.hasProperty("configuration.maxLength")?this.getProperty("configuration.maxLength"):null,i=this.hasProperty("configuration.minValue")?this.getProperty("configuration.minValue"):null,r=this.hasProperty("configuration.maxValue")?this.getProperty("configuration.maxValue"):null,a=this.hasProperty("configuration.isLimitSubmissionsEnabled")&&this.getProperty("configuration.isLimitSubmissionsEnabled");if(null!=n&&n>0&&(String(e).length>n?this.addError(g.a.ERR_NUMBER_TOO_LONG,this.getForm().getEngine().getI18n().translateText("textdef_71",String(n))||"The number is too long"):this.removeError(g.a.ERR_NUMBER_TOO_LONG)),null!=t&&t>0&&(String(e).length<t?this.addError(g.a.ERR_NUMBER_TOO_SHORT,this.getForm().getEngine().getI18n().translateText("textdef_70",String(t))||"The number is too short"):this.removeError(g.a.ERR_NUMBER_TOO_SHORT)),null!=r&&(e>r?this.addError(g.a.ERR_NUMBER_TOO_BIG,this.getForm().getEngine().getI18n().translateText("textdef_73",String(r))||"The value you have provided is too big"):this.removeError(g.a.ERR_NUMBER_TOO_BIG)),null!=i&&(e<i?this.addError(g.a.ERR_NUMBER_TOO_SMALL,this.getForm().getEngine().getI18n().translateText("textdef_72",String(i))||"The value you have provided is too small"):this.removeError(g.a.ERR_NUMBER_TOO_SMALL)),a){var o=this.getProperty("configuration.currentSubmissionsValue"),s=this.getProperty("configuration.limitSubmissionsTotal");if(null!==s){var l=Math.max(0,s-o);e>l&&(null===r||l<r)?(this.removeError(g.a.ERR_NUMBER_TOO_BIG),this.addError(g.a.ERR_MAX_ACCEPTED_VALUE_EXCEEDED,"".concat(this.getForm().getEngine().getI18n().translateText("textdef_41")||"The maximum accepted value is "," ").concat(l))):this.removeError(g.a.ERR_MAX_ACCEPTED_VALUE_EXCEEDED)}}}},{key:"getPrefixVisibility",value:function(){return(this.getProperty("configuration.prefix")||"").length>0}},{key:"setPrefixVisibility",value:function(e){var t=this.getProperty("configuration.prefix")||"USD";e?this.setProperty("configuration.prefix",this.getProperty("configuration.prefix")||"USD"):this.setProperty("configuration.prefix",null),this.getPrefixInspectorInput().value=t}},{key:"updateInspectorPrefix",value:function(){var e=this.getPrefixInspectorInput();e.addEventListener("keypress",(function(t){if(!S.a.isInputTextSelected(e)){var n=0;n+=e.value.replace(/[^a-z0-9]/gi,"").length;for(var i=0;i<e.value.length;i++)e.value.charCodeAt(i)>127&&n++;n>=4&&(t.key.match(/[a-z0-9]/gi)||t.key.charCodeAt(0)>127)&&t.preventDefault()}}))}},{key:"getPrefixInspectorInput",value:function(){return document.querySelector('#item [data-property-name="configuration-prefix"] input')}},{key:"setVisible",value:function(e){y()(_()(n.prototype),"setVisible",this).call(this,e),this.recalculateThrottler(),this.hidePrefixLabelIfNeeded()}},{key:"recalculate",value:function(){if(this.isVisible(!0)&&this.getForm().getEngine().getLoader().getLoaderType()===O.B.VIEW){var e=this.getForm().getEngine().getLoader().getLoaderDependency(O.M.RULES_QUERY_BUILDER),t=this.getForm().getEngine().getLoader().getRules().getDatabase();if(e){var n=e.getCalculationSQLStatements(String(this.getId()));if(n&&n.length)for(var i=0,r=n.length;i<r;i++){var a=t.createStatement(n[i]);t.executeStatement(a)}}}}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_FORMULA,name:"Formula",isContainer:!1,category:O.w.CALCULATION,keywords:"formula calculation",icon:"i123-field_formula",isVirtual:!1,i18nName:"edt_UI_control_type_formula_name",i18nKeywords:"edt_UI_control_type_formula_keywords",index:20,accessibilityFields:O.v.NONE,title:f.translationService.translateText("editorFieldTooltip_formula")}}}]),n}(f);function se(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(oe,"nodeName","formula"),v()(oe,"attributes",{}),v()(oe,"runtime",null);var le=function(e){u()(n,e);var t=se(n);function n(e,i){var r;o()(this,n);var a=(r=t.call(this,e,i)).getHash();return r.rootNode.setAttribute("id","htmlblock-".concat(a,"-acc")),r.rootNode.setAttribute("aria-labelledby","htmlblock-".concat(a,"-acc")),r.updateAccessibilityTabIndexes(),n.instanceID++,r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_HTML_BLOCK}},{key:"getElementName",value:function(){return"HTML block"}},{key:"setRendererType",value:function(e){}},{key:"updateHTMLContent",value:function(){var e=this.getProperty("configuration.innerHTML");e=S.a.addNoFollowOnLinks(e),this.rootNode.innerHTML=M.a.sanitizeHTMLUsingUserRights(e||"")}},{key:"updateFieldNameAttribute",value:function(){var e=String(this.getProperty("configuration.fieldName"))||"";this.rootNode.setAttribute("field-name",e)}},{key:"onCreated",value:function(){this.updateHTMLContent(),this.updateFieldNameAttribute()}},{key:"onReset",value:function(){}},{key:"setupDefaults",value:function(){var e;return this.setProperty("configuration.fieldName",e="".concat(this.getForm().getEngine().getI18n().translateText("formeditor_fieldTypeHtmlBlock")," ").concat(n.instanceID)),this.rootNode.setAttribute("field-name",e),this}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"configuration.innerHTML",type:"string",optional:!0};default:return null}}},{key:"cloneNode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=y()(_()(n.prototype),"cloneNode",this).call(this,!!e,t);return i.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_html_block_name")," ").concat(n.instanceID)),i}},{key:"setupI18n",value:function(){var e=this.getId();return e&&this.rootNode.setAttribute("data-i18n-html","control_label_".concat(e)),this}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("configuration.innerHTML")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),e}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_HTML_BLOCK,name:"HTML Block",isContainer:!1,category:O.w.MEDIA_STRUCTURE,keywords:"html block text",icon:"i123-code",isVirtual:!1,i18nName:"edt_UI_control_type_html_block_name",i18nKeywords:"edt_UI_control_type_html_block_keywords",index:50,accessibilityFields:O.v.ROOT_NODE,title:i.a.translationService.translateText("editorFieldTooltip_htmlBlock")}}}]),n}(i.a);function ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(le,"instanceID",0),v()(le,"attributes",{}),v()(le,"runtime",null),v()(le,"nodeName","html-block");var ue=function(e){u()(n,e);var t=ce(n);function n(){var e;o()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),v()(A()(e),"elementTypeId",void 0),e}return l()(n,[{key:"getTypeId",value:function(){return void 0===this.elementTypeId?b.a.ELEMENT_NOT_SUPPORTED:this.elementTypeId}},{key:"getElementName",value:function(){return"Unsupported element"}},{key:"setRendererType",value:function(e){}},{key:"updateHTMLContent",value:function(){this.getRootNode().innerHTML="This element is not supported on your Plan. Please Upgrade.";var e="unknown";switch(this.elementTypeId){case b.a.CONTROL_TYPE_FILE:e=te.getConfiguration().name;break;case b.a.CONTROL_TYPE_HTML_BLOCK:e=le.getConfiguration().name;break;case b.a.CONTROL_TYPE_FORMULA:e=oe.getConfiguration().name;break;case b.a.CONTROL_TYPE_COUPON:e=X.getConfiguration().name;break;default:e=this.getElementName()}this.getRootNode().setAttribute("data-i18n-text","userAccountUpgrade_81"),this.getRootNode().setAttribute("data-i18n-param","controlName=".concat(e))}},{key:"onCreated",value:function(){this.updateHTMLContent()}},{key:"getPropertyDescriptorByInputIndex",value:function(e){return null}},{key:"withTypeId",value:function(e){return this.elementTypeId=e,this}},{key:"setProperty",value:function(e,t){return this}},{key:"getProperty",value:function(e){return null}},{key:"enumerateProperties",value:function(){return[]}},{key:"hasProperty",value:function(e){return!1}},{key:"isDuplicatable",value:function(){return!1}},{key:"isDragable",value:function(){return!1}},{key:"onReset",value:function(){}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.ELEMENT_NOT_SUPPORTED,name:"Not Supported",isContainer:!1,category:"basic",keywords:"not supported element anymore",icon:"i123-code",isVirtual:!0,index:99999,accessibilityFields:O.v.NONE}}}]),n}(i.a);function de(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(ue,"attributes",{}),v()(ue,"runtime",null),v()(ue,"nodeName","not-supported");var pe=function(e){u()(n,e);var t=de(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"inputContainer",void 0),v()(A()(r),"prefixLabel",void 0),v()(A()(r),"input",void 0),v()(A()(r),"hasSuggestions",!0);var a=r.getHash();return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","text-".concat(a,"-acc")),r.hasAccessibilityEnabled&&r.labelDOMNode.setAttribute("for","text-".concat(a)),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","text-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","text-".concat(a,"-instr-acc")),r.input=document.createElement("input"),r.input.setAttribute("type","text"),r.input.setAttribute("data-role","i123-input"),r.input.setAttribute("data-no-theme",""),r.input.setAttribute("aria-labelledby","text-".concat(a,"-acc ")+"text-".concat(a,"-error-acc ")+"text-".concat(a,"-instr-acc")),r.input.setAttribute("id","text-".concat(a)),r.prefixLabel=document.createElement("span"),r.prefixLabel.setAttribute("data-role","prefix-label"),r.prefixLabel.setAttribute("id","price-".concat(a,"-prefix-acc")),r.inputContainer=document.createElement("div"),r.inputContainer.setAttribute("data-role","input-container"),r.inputContainer.setAttribute("data-ui-role","ui-element"),r.inputContainer.appendChild(r.prefixLabel),r.inputContainer.appendChild(r.input),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_TEXT}},{key:"getElementName",value:function(){return"Text"}},{key:"updatePrefixLabel",value:function(){this.prefixLabel.textContent=this.getProperty("configuration.prefix")||"",this.adjustInputPadding()}},{key:"syncInputCompactField",value:function(){this.input.placeholder=this.inputContainer.hasAttribute("placeholder")?this.inputContainer.getAttribute("placeholder"):""}},{key:"adjustInputPadding",value:function(){var e=this;setTimeout((function(){var t=e.getForm().getEngine().getTheme().properties.input.padding.horizontal,n=e.getForm().getRootNode().getAttribute("data-text-direction"),i=e.prefixLabel.offsetWidth>parseInt(t,10)?"".concat(e.prefixLabel.offsetWidth+8,"px"):t;"ltr"===n?(e.input.style.paddingLeft=i,e.input.style.removeProperty("padding-right")):(e.input.style.paddingRight=i,e.input.style.removeProperty("padding-left"))}),1)}},{key:"adjustPrefixLabelOpacity",value:function(){this.input.value.length>0||null!==this.getErrors()?this.prefixLabel.style.removeProperty("opacity"):this.prefixLabel.style.opacity=".5"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.inputContainer,width:O.I.FULL}]}]}},{key:"onCreated",value:function(){var e=this;this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.updateDefaultValue(),this.validateValue(),this.updateHiddenAttribute(),this.initializeSuggestions(),this.updatePrefixLabel(),this.adjustPrefixLabelOpacity(),this.syncInputCompactField(),this.addEventListeners(),this.getForm().getEngine().getLoader().getLoaderType()===O.B.EDIT?this.synchronizeValue():this.onValueChanged(),this.onReadonlyStateChanged(),setTimeout((function(){e.hidePrefixLabelIfNeeded()}),1e3)}},{key:"addEventListeners",value:function(){var e=this,t=this.getForm().getEngine().getLoader().getLoaderDependency(O.M.UNDO_SERVICE),n=this.getForm().getEngine();t&&t.on("user-action",(function(t){"resize-end"===t&&e.hidePrefixLabelIfNeeded()})),window.addEventListener("resize",Object(re.a)((function(){e.hidePrefixLabelIfNeeded()}),500)),this.input.addEventListener("focus",(function(){e.rootNode.querySelector('div[data-role="input-container"]').setAttribute("data-is-focused-child-element","1")})),this.input.addEventListener("blur",(function(){e.rootNode.querySelector('div[data-role="input-container"]').removeAttribute("data-is-focused-child-element")})),n.getDocument().on("update-text-direction",(function(){e.adjustInputPadding()})),n.getLoader().on("navigate-to-relative-page-number",(function(){e.hidePrefixLabelIfNeeded()}))}},{key:"hidePrefixLabelIfNeeded",value:function(){var e=this.getProperty("configuration.prefix")||"",t=parseInt(getComputedStyle(this.prefixLabel).paddingLeft,10),n=parseInt(getComputedStyle(this.input).paddingRight,10),i=ne.getDOMWidth(e);this.inputContainer.offsetWidth<i+t+n+30?this.prefixLabel.style.display="none":this.prefixLabel.style.removeProperty("display"),this.adjustInputPadding()}},{key:"getSupportedValidators",value:function(){var e=this.getForm().getEngine().getValidator();return[e.getValidatorById(j.a.VALIDATOR_TYPE_NONE),e.getValidatorById(j.a.VALIDATOR_TYPE_ALPHA),e.getValidatorById(j.a.VALIDATOR_TYPE_ALPHANUMERIC),e.getValidatorById(j.a.VALIDATOR_TYPE_ALPHASPACE),e.getValidatorById(j.a.VALIDATOR_TYPE_ALPHANUMERICSPACE),e.getValidatorById(j.a.VALIDATOR_TYPE_FULL_NAME),e.getValidatorById(j.a.VALIDATOR_TYPE_REGEX),e.getValidatorById(j.a.VALIDATOR_TYPE_NUMERIC)]}},{key:"onFocusEnter",value:function(){var e=this,t=setInterval((function(){e.getPrefixInspectorInput()&&(e.updateInspectorPrefix(),clearInterval(t))}),500)}},{key:"onValueChanged",value:function(){var e=this.input.value;this.setProperty("value.value",""===e?null:e),this.validateValue(),this.adjustPrefixLabelOpacity(),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"validateValue",value:function(){var e=this.getProperty("configuration.minLength"),t=this.getProperty("configuration.maxLength"),n=this.getProperty("value.value")||"";n?(null!==t&&t>0&&(n.length>t?this.addError(g.a.ERR_TOO_MANY_CHARACTERS,this.getForm().getEngine().getI18n().translateText("textdef_71",String(t))||"You have more characters than allowed"):this.removeError(g.a.ERR_TOO_MANY_CHARACTERS)),null!==e&&e>0&&(n.length<e?this.addError(g.a.ERR_TOO_FEW_CHARACTERS,this.getForm().getEngine().getI18n().translateText("textdef_70",String(e))||"You have fewer characters than allowed"):this.removeError(g.a.ERR_TOO_FEW_CHARACTERS))):(this.removeError(g.a.ERR_TOO_FEW_CHARACTERS),this.removeError(g.a.ERR_TOO_MANY_CHARACTERS))}},{key:"updateDefaultValue",value:function(){var e=this.getProperty("configuration.defaultValue"),t=e&&e.trim();this.getProperty("configuration.defaultValueIsUniqueId")?this.getForm().getEngine().getLoader().getLoaderType()===O.B.VIEW?this.setProperty("value.value",String((+new Date).toString(32))):this.setProperty("value.value","<UNIQUE_ID>"):(this.setProperty("value.value",""===e?null:t),this.setProperty("configuration.defaultValue",t)),this.onReadonlyStateChanged(),this.synchronizeValue(),t&&this.input.setAttribute("value",t)}},{key:"synchronizeValue",value:function(){S.a.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"string",optional:!0};default:return null}}},{key:"onReset",value:function(){this.setValue({value:this.getProperty("configuration.defaultValue")}),this.validateValue()}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",f.translationService.translateText("editorField_shortText")),this.updateLabelText(),this}},{key:"onBlur",value:function(){this.checkIfElementValueIsSynchronized()}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),e}},{key:"getSuggestionsVisibility",value:function(){return null!==(this.getProperty("options.suggestions")||null)}},{key:"setSuggestionsVisibility",value:function(e){e?this.setProperty("options.suggestions",this.getProperty("options.suggestions")||""):this.setProperty("options.suggestions",null)}},{key:"initializeSuggestions",value:function(){var e=this;this.formHasRules?this.getForm().getEngine().on("compute-form-rules-done",(function(){e.renderSuggestionsIfNeeded()})):this.renderSuggestionsIfNeeded()}},{key:"renderSuggestionsIfNeeded",value:function(){var e=this;setTimeout((function(){e.getSuggestionsVisibility()?e.suggestionsDropDown(L.a.getJQuery()):e.getForm().getEngine().getJQuery()(e.input).parent().find("[data-autocomplete-items]").remove()}),1e3)}},{key:"getPrefixVisibility",value:function(){return(this.getProperty("configuration.prefix")||"").length>0}},{key:"setPrefixVisibility",value:function(e){var t=this.getProperty("configuration.prefix")||"USD";e?this.setProperty("configuration.prefix",this.getProperty("configuration.prefix")||"USD"):this.setProperty("configuration.prefix",null),this.getPrefixInspectorInput().value=t}},{key:"updateInspectorPrefix",value:function(){var e=this.getPrefixInspectorInput();e.addEventListener("keypress",(function(t){if(!S.a.isInputTextSelected(e)){var n=0;n+=e.value.replace(/[^a-z0-9]/gi,"").length;for(var i=0;i<e.value.length;i++)e.value.charCodeAt(i)>127&&n++;n>=4&&(t.key.match(/[a-z0-9]/gi)||t.key.charCodeAt(0)>127)&&t.preventDefault()}}))}},{key:"getPrefixInspectorInput",value:function(){return document.querySelector('#item [data-property-name="configuration-prefix"] input')}},{key:"suggestionsDropDown",value:function(e){var t,i=this,r=this.getProperty("options.suggestions").split("\n"),a=this.input;!function(o){function s(t){a.value=t,o.onValueChanged(),e(a).trigger("input"),e(a).trigger("change")}function l(){for(var t=e(o.inputContainer).parent().find("[data-autocomplete-items]"),n=0,i=t.length;n<i;n++)t[n].parentNode.removeChild(t[n])}function c(e,t){var n=document.createElement("div"),i=document.createElement("strong"),r=t.toUpperCase().indexOf(e.toUpperCase()),a=t.length,o=t.substr(r,e.length);if(i.appendChild(document.createTextNode(o)),r>0){var s=t.substr(0,r);n.appendChild(document.createTextNode(s))}n.appendChild(i);var l=r+e.length;if(l<a){var c=t.substr(l,a);n.appendChild(document.createTextNode(c))}return n.setAttribute("data-value",String(t||"")),n}function u(e){if(0===e.length)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].removeAttribute("data-autocomplete-active")}(e),t>=e.length&&(t=0),t<0&&(t=e.length-1),e[t].setAttribute("data-autocomplete-active","")}function d(i){if(null!==o.getProperty("options.suggestions")){n.initialize(),l(),t=-1;for(var u=function(){var t=document.createElement("div");t.setAttribute("data-autocomplete-items",""),e(t).width("".concat(o.inputContainer.offsetWidth,"px"));var n=a.getBoundingClientRect();return e(t).css({top:"".concat(~~n.top+~~n.height,"px")}),e(t).on("mousedown","> div",(function(){s(e(this).attr("data-value")),l()})),t}(),d=!1,p=0,h=r.length;p<h;p++)if(r[p].toUpperCase().indexOf(i.toUpperCase())>=0){var _=c(i,r[p]);e(u).append(_),d=!0}d?e(o.inputContainer).parent().append(u):e(u).remove()}}e(i.input).on("input",(function(){d(this.value)})),e(i.input).on("click",(function(e){e.stopPropagation(),d(this.value)})),e(a).on("keydown",(function(n){var i=e(o.inputContainer).parent().find("[data-autocomplete-items]").find("div");switch(n.keyCode){case V.a.KEY_DOWN:t++,u(i),n.preventDefault();break;case V.a.KEY_UP:t--,u(i),n.preventDefault();break;case V.a.KEY_ENTER:t>-1&&i.length&&(s(i[t].getAttribute("data-value")),l()),n.preventDefault();break;case V.a.KEY_ESC:l(),n.preventDefault()}})),e(i.input).on("blur",(function(){l()}))}(this)}},{key:"onReadonlyStateChanged",value:function(){var e=this.getProperty("options.readOnly")||this.getProperty("configuration.defaultValueIsUniqueId");this.setReadonly(e)}},{key:"isReadonly",value:function(){return this.input.readOnly}},{key:"setReadonly",value:function(e){return this.input.readOnly=e,this}},{key:"emulateUserInput",value:function(){var e=this;!function(t){t([e.input]).trigger("input")}(this.getForm().getEngine().getJQuery())}},{key:"setVisible",value:function(e){y()(_()(n.prototype),"setVisible",this).call(this,e),this.hidePrefixLabelIfNeeded()}}],[{key:"initialize",value:function(){this.initialized||(!function(e){e(window).on("scroll","[data-autocomplete-items]",(function(e){e.stopPropagation()})),document.body.addEventListener("scroll",(function(){for(var e=0,t=document.querySelectorAll("[data-autocomplete-items]"),n=t.length;e<n;e++)t[e].parentNode.removeChild(t[e])}),{passive:!0})}(L.a.getJQuery()),this.initialized=!0)}},{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_TEXT,name:"Short answer",isContainer:!1,category:O.w.ESSENTIALS,keywords:"short text input textbox open answer",icon:"i123-editor_field_shorttext",isVirtual:!1,i18nName:"editorField_shortText",i18nKeywords:"edt_UI_control_type_text_keywords",index:10,accessibilityFields:O.v.ERROR_NODE,title:f.translationService.translateText("editorFieldTooltip_shortText")}}}]),n}(f);function he(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(pe,"attributes",{}),v()(pe,"runtime",null),v()(pe,"nodeName","text"),v()(pe,"initialized",!1);var _e=function(e){u()(n,e);var t=he(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"input",void 0),v()(A()(r),"hasSuggestions",!0);var a=r.getHash();return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","email".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","email-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","email-".concat(a,"-instr-acc")),r.input=document.createElement("input"),r.input.setAttribute("type","email"),r.input.setAttribute("data-role","i123-input"),r.input.setAttribute("aria-labelledby","email".concat(a,"-acc ")+"email-".concat(a,"-error-acc ")+"email-".concat(a,"-instr-acc")),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_EMAIL}},{key:"getElementName",value:function(){return"Email"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.I.FULL}]}]}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.updateHiddenAttribute(),this.updateDefaultValue(),this.initializeSuggestions(),this.getForm().getEngine().getLoader().getLoaderType()===O.B.EDIT?this.synchronizeValue():this.onValueChanged(),this.onReadonlyStateChanged()}},{key:"validateInput",value:function(){var e=this.getForm().getEngine().getValidator(),t=this.getProperty("value.value")||"";t&&!e.validate(t,j.a.VALIDATOR_TYPE_EMAIL)?this.addError(g.a.ERR_INVALID_EMAIL,"".concat(this.getForm().getEngine().getI18n().translateText("textdef_5"),": ").concat(this.getForm().getEngine().getI18n().translateText("textdef_49"))||"The email address is invalid"):this.hasError(g.a.ERR_INVALID_EMAIL)&&this.removeError(g.a.ERR_INVALID_EMAIL)}},{key:"getSupportedValidators",value:function(){return[this.getForm().getEngine().getValidator().getValidatorById(j.a.VALIDATOR_TYPE_EMAIL)]}},{key:"onValueChanged",value:function(){var e=this.input.value;this.setProperty("value.value",""===e?null:e),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"updateDefaultValue",value:function(){var e=String(this.getProperty("configuration.defaultValue")||"");this.setProperty("value.value",""===e?null:e),this.synchronizeValue(),e&&this.input.setAttribute("value",e.trim())}},{key:"synchronizeValue",value:function(){S.a.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"string",optional:!0};default:return null}}},{key:"onReset",value:function(){this.updateDefaultValue(),this.onValueChanged()}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",f.translationService.translateText("editorField_email")),this.updateLabelText(),this}},{key:"onBlur",value:function(){var e=this.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1);this.validateInput(),this.checkIfElementValueIsSynchronized(),e&&(this.errorDOMNode.tabIndex=0)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),e}},{key:"getSuggestionsVisibility",value:function(){return null!==(this.getProperty("options.suggestions")||null)}},{key:"setSuggestionsVisibility",value:function(e){e?this.setProperty("options.suggestions",this.getProperty("options.suggestions")||""):this.setProperty("options.suggestions",null)}},{key:"initializeSuggestions",value:function(){var e=this;this.formHasRules?this.getForm().getEngine().on("compute-form-rules-done",(function(){e.renderSuggestionsIfNeeded()})):this.renderSuggestionsIfNeeded()}},{key:"renderSuggestionsIfNeeded",value:function(){var e=this;setTimeout((function(){e.getSuggestionsVisibility()?e.suggestionsDropDown(L.a.getJQuery()):e.getForm().getEngine().getJQuery()(e.input).parent().find("[data-autocomplete-items]").remove()}),1e3)}},{key:"suggestionsDropDown",value:function(e){var t,i=this,r=this.getProperty("options.suggestions").split("\n"),a=this.input;!function(o){function s(t){a.value=t,o.onValueChanged(),e(a).trigger("input"),e(a).trigger("change")}function l(){for(var t=e(a).parent().find("[data-autocomplete-items]"),n=0,i=t.length;n<i;n++)t[n].parentNode.removeChild(t[n])}function c(e,t){var n=document.createElement("div"),i=document.createElement("strong");return i.appendChild(document.createTextNode(t.substr(0,e.length))),n.appendChild(i),n.appendChild(document.createTextNode(t.substr(e.length))),n.setAttribute("data-value",String(t||"")),n}function u(e){if(0===e.length)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].removeAttribute("data-autocomplete-active")}(e),t>=e.length&&(t=0),t<0&&(t=e.length-1),e[t].setAttribute("data-autocomplete-active","")}function d(i){if(null!==o.getProperty("options.suggestions")){n.initialize(),l(),t=-1;for(var u=function(){var t=document.createElement("div");t.setAttribute("data-autocomplete-items",""),e(t).width("".concat(a.offsetWidth,"px"));var n=a.getBoundingClientRect();return e(t).css({top:"".concat(~~n.top+~~n.height,"px")}),e(t).on("mousedown","> div",(function(){s(e(this).attr("data-value")),l()})),t}(),d=!1,p=0,h=r.length;p<h;p++)if(r[p].substr(0,i.length).toUpperCase()===i.toUpperCase()){var _=c(i,r[p]);e(u).append(_),d=!0}d?e(a).parent().append(u):e(u).remove()}}e(i.input).on("input",(function(){d(this.value)})),e(i.input).on("click",(function(e){e.stopPropagation(),d(this.value)})),e(a).on("keydown",(function(n){var i=e(a).parent().find("[data-autocomplete-items]").find("div");switch(n.keyCode){case V.a.KEY_DOWN:t++,u(i),n.preventDefault();break;case V.a.KEY_UP:t--,u(i),n.preventDefault();break;case V.a.KEY_ENTER:t>-1&&i.length&&(s(i[t].getAttribute("data-value")),l()),n.preventDefault();break;case V.a.KEY_ESC:l(),n.preventDefault()}})),e(i.input).on("blur",(function(){l()}))}(this)}},{key:"onReadonlyStateChanged",value:function(){var e=this.getProperty("options.readOnly");this.setReadonly(e)}},{key:"isReadonly",value:function(){return this.input.readOnly}},{key:"setReadonly",value:function(e){return this.input.readOnly=e,this}}],[{key:"initialize",value:function(){pe.initialize()}},{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_EMAIL,name:"Email address",isContainer:!1,category:O.w.CONTACT_DETAILS,keywords:"email mail address",icon:"i123-email",isVirtual:!1,i18nName:"editorField_email",i18nKeywords:"edt_UI_control_type_email_keywords",index:20,accessibilityFields:O.v.ERROR_NODE,title:f.translationService.translateText("editorFieldTooltip_email")}}}]),n}(f);v()(_e,"attributes",{}),v()(_e,"runtime",null),v()(_e,"nodeName","email");var ge=n(77);function me(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var fe=function(e){u()(n,e);var t=me(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"settings",void 0),v()(A()(r),"nameNode",void 0),v()(A()(r),"priceNode",void 0);var a=r.getHash();return r.settings=r.getForm().getEngine().getDocument().getForm().getEditorSettingByTypeId(K.a.PAYMENT_PRODUCTS_EDITOR_SETTING),r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","name-".concat(a,"-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("data-index",String(n.INDEX_DESCRIPTION)),r.instructionsDOMNode.setAttribute("id","name-".concat(a,"-instr-acc")),r.nameNode=document.createElement("input"),r.nameNode.setAttribute("data-role","i123-input"),r.nameNode.setAttribute("type","text"),r.nameNode.setAttribute("data-index",String(n.INDEX_NAME)),r.nameNode.placeholder="Shipping fee",r.nameNode.setAttribute("data-i18n-placeholder","textdef_30"),r.priceNode=document.createElement("div"),r.priceNode.setAttribute("data-role","fee-price"),r.priceNode.setAttribute("id","name-".concat(a,"-fee-price-acc")),r.priceNode.setAttribute("data-index",String(n.INDEX_BASE_PRICE)),r.priceNode.innerHTML=r.getProperty("payments.value")||"0",r.rootNode.setAttribute("aria-labelledby","name-".concat(a,"-acc\n                   name-").concat(a,"-error-acc\n                   name-").concat(a,"-instr-acc")),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_FEE}},{key:"getElementName",value:function(){return"Fee"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.priceNode,width:O.I.FULL},{input:this.instructionsDOMNode,width:O.I.FULL}]}]}},{key:"onCreated",value:function(){this.updateLabelText(),this.updatePriceFee(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.updateHiddenAttribute()}},{key:"updatePriceFee",value:function(){var e=this.getProperty("payments.value"),t=this.getCurrencySymbol();e=e||"0",this.priceNode.innerHTML=t+e}},{key:"getCurrencySymbol",value:function(){var e,t=this.getForm().getEngine();return e=this.settings?this.settings.getProperty("currencyId"):t.getLoader().getFormSettings().currencyId,t.getCurrency().getCurrencyById(e||ge.a.DEFAULT_CURRENCY_ID).symbol}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case n.INDEX_NAME:return{targetPropertyFQN:"label.labelText",type:"string",optional:!1};case n.INDEX_DESCRIPTION:return{targetPropertyFQN:"instructions.text",type:"string",optional:!0};case n.INDEX_BASE_PRICE:return{targetPropertyFQN:"payments.value",type:"numeric",optional:!1};default:return null}}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),e}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText","Shipping Fee"),this.updateLabelText(),this}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}}],[{key:"initialize",value:function(){this.isInitialized||(this.isInitialized=!0)}},{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_FEE,name:"Fee",isContainer:!1,category:O.w.CALCULATION,keywords:"shipping fee fixed",icon:"i123-price_fee",isVirtual:!1,i18nName:"edt_UI_control_type_fee_name",i18nKeywords:"edt_UI_control_type_fee_keywords",index:40,accessibilityFields:O.v.ERROR_NODE,title:f.translationService.translateText("editorFieldTooltip_fee")}}}]),n}(f);function Ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(fe,"attributes",{}),v()(fe,"runtime",null),v()(fe,"nodeName","fee"),v()(fe,"isInitialized",!1),v()(fe,"INDEX_NAME",0),v()(fe,"INDEX_DESCRIPTION",1),v()(fe,"INDEX_BASE_PRICE",2);var ye=function(e){u()(n,e);var t=Ee(n);function n(){var e;o()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),v()(A()(e),"isEditorVisible",!1),e}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_FORM_HEADER}},{key:"getElementName",value:function(){var e=this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_form_header_name");return e&&"edt_UI_control_type_form_header_name"!==e?e:"Form header"}},{key:"updateHTMLContent",value:function(){if(this.hasProperty("configuration.innerHTML")){var e=this.getProperty("configuration.innerHTML"),t=this.getForm();e=S.a.addNoFollowOnLinks(e),this.rootNode.innerHTML=M.a.sanitizeHTMLUsingUserRights(String(e||""));for(var n=0,i=t.getNumberOfPages();n<i;n++)t.getPageByIndex(n).renderHeader()}else this.rootNode.innerHTML="";this.updateAccessibilityAttributes()}},{key:"isRemovable",value:function(){return!1}},{key:"onCreated",value:function(){var e=this;this.updateHTMLContent(),this.updateAccessibilityAttributes(),setTimeout((function(){e.updateAccessibilityTabIndexes()}),10)}},{key:"getResizingCapability",value:function(){return O.db.NONE}},{key:"getPropertyDescriptorByInputIndex",value:function(e){return null}},{key:"isDuplicatable",value:function(){return!1}},{key:"onReset",value:function(){}},{key:"setupI18n",value:function(){return this.getRootNode().setAttribute("data-i18n-html",n.headerI18nKey),y()(_()(n.prototype),"setupI18n",this).call(this)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"updateAccessibilityAttributes",value:function(){var e=this.getHash();this.rootNode.setAttribute("id","form-heading-".concat(e,"-acc")),this.rootNode.setAttribute("aria-labelledby","form-heading-".concat(e,"-acc"))}},{key:"onEnterSelection",value:function(){y()(_()(n.prototype),"onEnterSelection",this).call(this),function(e,t){e(t).find("[data-role=control][data-type=form-header]").attr("data-is-selected","1")}(this.getForm().getEngine().getJQuery(),this.getForm().getRootNode())}},{key:"onLeaveSelection",value:function(){y()(_()(n.prototype),"onLeaveSelection",this).call(this),function(e,t){e(t).find("[data-role=control][data-type=form-header]").removeAttr("data-is-selected")}(this.getForm().getEngine().getJQuery(),this.getForm().getRootNode())}},{key:"openEditableHTMLDialog",value:function(){this.getForm().getEngine().getLoader().getLoaderType()===O.B.EDIT&&function(e,t){t.isEditorVisible||(t.isEditorVisible=!0,setTimeout((function(){e('#item[data-target-element-type="form header"][data-target-element="'.concat(t.getHash(),'"] [data-auto-click]')).each((function(){e(this).trigger("click")}))}),300),setTimeout((function(){t.isEditorVisible=!1}),600))}(this.getForm().getEngine().getJQuery(),this)}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("configuration.innerHTML")||"";return t&&e.push({key:n.headerI18nKey,sourceText:t}),e}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_FORM_HEADER,name:"Form Header",isContainer:!1,category:"basic",keywords:"",icon:"",isVirtual:!1,index:99999,accessibilityFields:O.v.ROOT_NODE}}}]),n}(i.a);v()(ye,"nodeName","form-header"),v()(ye,"attributes",{}),v()(ye,"runtime",null),v()(ye,"headerI18nKey","Headline");var Te=n(33),ve=n(22),Oe=n(55);n(484);function be(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Ce=function(e){u()(n,e);var t=be(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"previousRenderedHeadingElementName",void 0);var a=r.getHash();return r.previousRenderedHeadingElementName=r.getDOMLabelElementName(),r.labelDOMNode=document.createElement(r.previousRenderedHeadingElementName),r.labelDOMNode.setAttribute("id","heading-".concat(a,"-acc")),r.labelDOMNode.setAttribute("aria-labelledby","heading-".concat(a,"-acc")),r.rootNode.appendChild(r.labelDOMNode),r.updateAccessibilityTabIndexes(),n.instanceID++,r.isViewForm()||r.store.subscribe(r.handleChange.bind(A()(r))),r}return l()(n,[{key:"handleChange",value:function(){var e=Object(Te.b)(Oe.o);e.type!==ve.a.UPDATE_FORM_OPTION||"options.masterTextColor"!==e.payload.name&&"options.direction"!==e.payload.name||("options.masterTextColor"===e.payload.name&&"transparent"!==e.payload.value?this.updateTextColor():"options.direction"===e.payload.name&&this.updateAlignment())}},{key:"updateAlignment",value:function(){var e=Object(Te.b)(Object(Oe.k)("direction")),t=e&&e.toString()===O.G.RIGHT_TO_LEFT.toString()?"right":"left";this.getProperty("configuration.alignment")!==t&&this.setProperty("configuration.alignment",t)}},{key:"updateTextColor",value:function(){var e=this.computeTextColor();this.getProperty("configuration.color")!==e&&this.setProperty("configuration.color",e)}},{key:"computeTextColor",value:function(){var e=Object(Te.b)(Object(Oe.k)("masterTextColor")),t=Object(Te.b)(Object(Oe.p)("label.normal.color"));return"transparent"===e?t:e}},{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_HEADING}},{key:"getElementName",value:function(){return"Heading"}},{key:"setRendererType",value:function(e){}},{key:"getDOMLabelElementName",value:function(){switch(this.getProperty("configuration.fontSize")){case 1:return"h6";case 2:return"h5";case 4:return"h3";case 5:return"h2";case 6:return"h1";case 3:default:return"h4"}}},{key:"getDOMLabelClassName",value:function(){switch(this.getProperty("configuration.alignment")){case"justify":return"text-justify";case"center":return"text-center";case"right":return"text-right";case"left":default:return"text-left"}}},{key:"updateLabelText",value:function(){var e=this.getDOMLabelElementName();e!==this.previousRenderedHeadingElementName&&(this.labelDOMNode.parentNode.removeChild(this.labelDOMNode),this.labelDOMNode=document.createElement(e),this.rootNode.appendChild(this.labelDOMNode),this.previousRenderedHeadingElementName=e);var t=this.getDOMLabelClassName();this.labelDOMNode.className=t;var i=this.getProperty("configuration.color");this.labelDOMNode.style.color=i,y()(_()(n.prototype),"updateLabelText",this).call(this)}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateLabelRemovedState(),this.updateFieldNameAttribute()}},{key:"updateLabelRemovedState",value:function(){this.hasProperty("label.isRemoved")&&this.getProperty("label.isRemoved")?this.rootNode.removeChild(this.labelDOMNode):this.rootNode.appendChild(this.labelDOMNode)}},{key:"updateFieldNameAttribute",value:function(){this.hasProperty("configuration.fieldName")&&this.getProperty("configuration.fieldName")&&this.rootNode.setAttribute("data-field-name",this.getProperty("configuration.fieldName"))}},{key:"onReset",value:function(){}},{key:"setupDefaults",value:function(){return this.updateTextColor(),this.updateAlignment(),this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("formeditor_headingDefault")),this.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("formeditor_fieldTypeHeading")," ").concat(n.instanceID)),this.updateLabelText(),this}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"label.labelText",type:"string",optional:!0};default:return null}}},{key:"cloneNode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=y()(_()(n.prototype),"cloneNode",this).call(this,!!e,t);return i.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_heading_name")," ").concat(n.instanceID)),i}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),e}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_HEADING,name:"Text content",isContainer:!1,category:O.w.MEDIA_STRUCTURE,keywords:"heading text statement content",icon:"i123-editor_field_heading",isVirtual:!1,i18nName:"editorField_heading",i18nKeywords:"edt_UI_control_type_heading_keywords",index:10,accessibilityFields:O.v.ROOT_NODE,title:i.a.translationService.translateText("editorFieldTooltip_heading")}}}]),n}(i.a);function Ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(Ce,"instanceID",0),v()(Ce,"attributes",{}),v()(Ce,"runtime",null),v()(Ce,"nodeName","heading");var Re=function(e){u()(n,e);var t=Ie(n);function n(e,i){var r;return o()(this,n),r=t.call(this,e,i),v()(A()(r),"imageNode",void 0),v()(A()(r),"imageParentNode",void 0),v()(A()(r),"isImageLoaded",!1),n.instanceID++,r.imageParentNode=document.createElement("div"),r.getRootNode().appendChild(r.imageParentNode),r.imageParentNode.setAttribute("data-image-container","1"),r.imageNode=document.createElement("img"),r.imageParentNode.appendChild(r.imageNode),r.imageNode.addEventListener("load",(function(){r.getRootNode().removeAttribute("data-image-placeholder"),r.isImageLoaded=!0,S.a.refreshFrameHeightOnWix()}),!0),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_IMAGE}},{key:"getElementName",value:function(){return"Image"}},{key:"updateImageOptions",value:function(){this.hasProperty("configuration.remoteURL")&&!this.getProperty("configuration.remoteURL")&&this.rootNode.setAttribute("data-image-placeholder","1"),this.isImageLoaded=!1,this.imageNode.setAttribute("src",S.a.getImageURLAntiCache(String(this.getProperty("configuration.remoteURL")||""))),this.imageNode.setAttribute("align",String(this.getProperty("configuration.align"))),this.updateAlternateTextAttribute()}},{key:"setRendererType",value:function(e){}},{key:"onCreated",value:function(){this.updateImageOptions(),this.updateAlternateTextAttribute()}},{key:"getPropertyDescriptorByInputIndex",value:function(e){return null}},{key:"getResizingCapability",value:function(){return this.isImageLoaded?O.db.ALL:O.db.LEFT_AND_RIGHT}},{key:"onReset",value:function(){}},{key:"updateAlternateTextAttribute",value:function(){var e=this.getProperty("configuration.alternateText");e&&this.imageNode.getAttribute("src")?this.imageNode.setAttribute("alt",e):this.imageNode.removeAttribute("alt")}},{key:"setupDefaults",value:function(){return this.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("formeditor_fieldTypeImage")," ").concat(n.instanceID)),this}},{key:"cloneNode",value:function(e){var t=y()(_()(n.prototype),"cloneNode",this).call(this,!!e);return t.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_image_name")," ").concat(n.instanceID)),t}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_IMAGE,name:"Embed image",isContainer:!1,category:O.w.MEDIA_STRUCTURE,keywords:"image picture photo embed",icon:"i123-editor_field_image",isVirtual:!1,i18nName:"editorField_image",i18nKeywords:"edt_UI_control_type_image_keywords",index:20,accessibilityFields:O.v.ROOT_NODE,title:i.a.translationService.translateText("editorFieldTooltip_image")}}}]),n}(i.a);v()(Re,"instanceID",0),v()(Re,"attributes",{}),v()(Re,"runtime",null),v()(Re,"nodeName","image");var Pe=n(37);function Ne(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Ae=function(e){u()(n,e);var t=Ne(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"choices",[]),v()(A()(r),"choicesLine",void 0);var a=r.getHash();return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","likertscale-".concat(a,"-acc")),r.labelDOMNode.setAttribute("data-skip-markdown","true"),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","likertscale-".concat(a,"-error-acc")),r.choicesLine=document.createElement("div"),r.choicesLine.setAttribute("data-role","likert-header"),r.rootNode.setAttribute("aria-labelledby","likertscale-".concat(a,"-acc ")+"likertscale-".concat(a,"-error-acc")),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateShowInstructionsOnClick(),this.updateInlineOptionsAttribute(),this.updateBoldOptionsAttribute(),this.updateChoices(),this.getForm().getEngine().getLoader().getLoaderType()===O.B.EDIT?this.synchronizeValue():this.onValueChanged()}},{key:"updateLabelText",value:function(){if(void 0!==this.labelDOMNode&&this.hasProperty("label.labelText")){var e=this.getProperty("label.labelText"),t=this.hasProperty("label.isRemoved")&&this.getProperty("label.isRemoved"),n=t||this.hasProperty("label.isCompactField")&&this.getProperty("label.isCompactField");null===e||""===e?(this.labelDOMNode.setAttribute("data-is-empty","1"),this.labelDOMNode.textContent="",this.isCompactFieldPlaceholderSupported()&&n&&Pe.a.setLabelCompactFieldState(!0,"",this.getInputDOMNodes(),t)):(this.labelDOMNode.removeAttribute("data-is-empty"),this.labelDOMNode.innerHTML=e,this.isCompactFieldPlaceholderSupported()&&n&&Pe.a.setLabelCompactFieldState(!0,e,this.getInputDOMNodes(),t))}}},{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_LIKERT_SCALE}},{key:"getElementName",value:function(){return"Likert scale"}},{key:"getPropertyDescriptorByInputIndex",value:function(e){var t=(this.getProperty("choices.values")||[]).length;return e<t?{element:this,targetPropertyFQN:"value.value",optional:!1,type:"string",inputIndex:e}:e>=t?null:{element:this,targetPropertyFQN:"value.value",optional:!1,type:"string",inputIndex:e}}},{key:"isSelectable",value:function(){return!1}},{key:"isDragable",value:function(){return!1}},{key:"getResizingCapability",value:function(){return O.db.NONE}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.choicesLine,width:O.I.FULL}]}]}},{key:"updateChoices",value:function(){if(this.hasProperty("choices.values")){for(var e,t=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),n=this.getHash(),i=this.getProperty("options.inlineOptions"),r=0,a=t.length;r<a;r++)t[r].index=r;this.choicesLine.innerHTML="",this.choices.splice(0,this.choices.length);for(var o=0,s=t.length;o<s;o++)e=this.getForm().getEngine().getTheme().isMobileLayout()?this.createChoiceElement(t[o].text,o,n,t[o].isDefault,!0):this.createChoiceElement(t[o].text,o,n,t[o].isDefault,i),this.choices.push(e),this.choicesLine.appendChild(e);this.isAttached()&&this.reRender()}}},{key:"createRadioNode",value:function(e,t,n,i){var r=document.createElement("input");return r.setAttribute("type","radio"),r.setAttribute("id","".concat(n,"_").concat(e)),r.setAttribute("name","c_".concat(n)),r.setAttribute("value",t),r.setAttribute("data-index",String(e)),r.setAttribute("data-role","i123-input"),i&&(r.checked=!0),r}},{key:"createLabelElement",value:function(e,t,n,i,r){var a=document.createElement("label");a.setAttribute("data-role","choice");var o=this.createRadioNode(e,t,n,i),s=this.createDecoratorElement(e,n);if(i&&a.setAttribute("aria-checked","true"),r){var l=document.createElement("span");l.setAttribute("data-role","option-text"),l.appendChild(document.createTextNode(t||"")),a.appendChild(l)}return a.appendChild(o),a.appendChild(s),a}},{key:"createDecoratorElement",value:function(e,t){var n=document.createElement("label");return n.setAttribute("data-role","checkbox"),n.setAttribute("for","".concat(t,"_").concat(e)),n.setAttribute("role","radio"),n.tabIndex=0,n}},{key:"createChoiceElement",value:function(e,t,n,i,r){var a=document.createElement("div");a.setAttribute("data-role","choice");var o=this.createLabelElement(t,e,n,i,r);return a.appendChild(o),a}},{key:"updateInlineOptionsAttribute",value:function(){this.hasProperty("options.inlineOptions")&&this.getProperty("options.inlineOptions")?this.rootNode.setAttribute("data-has-inline-options",""):this.rootNode.removeAttribute("data-has-inline-options")}},{key:"updateBoldOptionsAttribute",value:function(){this.hasProperty("options.boldOptions")&&this.getProperty("options.boldOptions")?this.rootNode.setAttribute("data-has-bold-options",""):this.rootNode.removeAttribute("data-has-bold-options")}},{key:"synchronizeValue",value:function(){var e,t=this.getProperty("choices.values"),n=this.getProperty("value.value");if(t&&t.length)for(var i=0,r=t.length;i<r;i++)if(t[i].text===n)for(var a=0,o=this.choices.length;a<o;a++)if(e=this.choices[a].querySelector("input[type=radio]"),parseInt(e.getAttribute("data-index"))===i)return void(e.checked||(e.checked=!0,this.setProperty("value.index",i)))}},{key:"onValueChanged",value:function(){for(var e,t,n=null,i=null,r=this.getValue().index,a=0,o=this.choices.length;a<o;a++){if(e=this.choices[a].querySelector("input[type=radio]"),t=this.choices[a].querySelector("label[data-role=checkbox]"),e&&e.checked){n=e.value,i=~~e.getAttribute("data-index"),t.setAttribute("aria-checked","true");break}t&&t.hasAttribute("aria-checked")&&t.removeAttribute("aria-checked")}this.setProperty("value.value",n),this.setProperty("value.index",-1===i?null:~~i),this.isAttached()&&(i!==r&&null!==r&&this.getForm().trigger("radio-uncheck",this,r),this.getForm().trigger("change",this))}},{key:"onReset",value:function(){this.updateChoices(),this.onValueChanged()}},{key:"updateRequiredState",value:function(){}},{key:"setupI18n",value:function(){var e=this.getId();if(e){for(var t=this.getParent(),i=0,r=this.choices.length;i<r;i++){var a=this.choices[i].querySelector("input[type=radio][data-index]");if(a){var o=~~a.getAttribute("data-index"),s=this.choices[i].querySelector("span[data-role=option-text]");s&&(s.setAttribute("data-i18n-text","control_label_".concat(e,"_choice_").concat(o)),s.setAttribute("data-skip-markdown","true")),t&&t.trigger("translation-set",o,"control_label_".concat(e,"_choice_").concat(o))}}t&&t.trigger("translation-set",null,"likert_headline_".concat(e))}return y()(_()(n.prototype),"setupI18n",this).call(this)}},{key:"getInputDOMNodeAtIndex",value:function(e){return null===e?null:this.rootNode.querySelector('input[type=radio][data-index="'.concat(e,'"]'))}},{key:"setRendererType",value:function(e){var t=e;switch(e){case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL:t=O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL;break;case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD:t=O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD;break;case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:t=O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD;break;case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:t=O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD}y()(_()(n.prototype),"setRendererType",this).call(this,t)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"setVisible",value:function(e){y()(_()(n.prototype),"setVisible",this).call(this,e),this.getParent().trigger("child-visibility-changed")}},{key:"onFocusEnter",value:function(){this.getParent()&&this.getParent().onFocusEnter()}},{key:"onFocusLeave",value:function(){this.getParent()&&this.getParent().onFocusLeave()}},{key:"enumerateTranslations",value:function(){return[]}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_LIKERT_SCALE,name:"Likert Scale",isContainer:!1,category:"advanced",keywords:"likert scale radio radios matrix",icon:"i123-editor_field_likertscale",isVirtual:!0,i18nName:"edt_UI_control_type_likert_scale_name",i18nKeywords:"edt_UI_control_type_likert_scale_keywords",index:105,accessibilityFields:O.v.ROOT_NODE+O.v.ERROR_NODE}}}]),n}(i.a);v()(Ae,"attributes",{}),v()(Ae,"runtime",null),v()(Ae,"nodeName","likert-scale");var Se=n(139),Le=function(){function e(){o()(this,e)}return l()(e,null,[{key:"parseName",value:function(e){var t,n="",i="",r="",a=null,o=0,s=0,l=(t=(e=String(this.trim(e)||"")).split(" ").filter((function(e){return-1===e.indexOf("(")}))).length,c=this.getSalutation(t[0]),u=this.getSuffix(t[l-1]),d=c?1:0,p=u?l-1:l;for(a=t[d],this.isInitialName(a)?this.isInitialName(t[d+1])?i+=" ".concat(a.toUpperCase()):r+=" ".concat(a.toUpperCase()):i+=" ".concat(this.fixCase(a)),s=d+1;s<p-1&&(a=t[s],!this.is_compound_lastName(a)||this.isInitialName(a)&&a===a.toUpperCase());s++)this.isInitialName(a)?r+=" ".concat(a.toUpperCase()):i+=" ".concat(this.fixCase(a));if(p-d>1)for(o=s;o<p;o++)n+=" ".concat(this.fixCase(t[o]));return{title:this.trim(c)||null,firstName:this.getFirstName(i)||null,middleName:this.getMiddleName(i)||null,initials:this.trim(r)||null,lastName:this.trim(n)||null,suffix:this.trim(u)||null}}},{key:"isInitialName",value:function(e){return!!e&&1===(e=this.removeIgnoredChars(e)).length}},{key:"fixCase",value:function(e){return e=this.safeUCFirst("-",String(e||"")),e=this.safeUCFirst(".",String(e||""))}},{key:"safeUCFirst",value:function(e,t){return t.split(e).map((function(e){return this.isCamelCaseString(e)?e:e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()}),this).join(e)}},{key:"is_compound_lastName",value:function(e){return e=e.toLowerCase(),this.COMPOUND_LAST_NAME_WORDS.indexOf(e)>=0}},{key:"getSalutation",value:function(e){return"mr"===(e=this.removeIgnoredChars(e).toLowerCase())||"master"===e||"mister"===e?"Mr.":"mrs"===e?"Mrs.":"miss"===e||"ms"===e?"Ms.":"dr"===e?"Dr.":"rev"===e?"Rev.":"fr"===e?"Fr.":null}},{key:"trim",value:function(e){return null===e?null:String(e||"").replace(/(^[\s]+|[\s]+$)/g,"")}},{key:"getFirstName",value:function(e){return this.trim(String(e||"")).split(/[\s]+/)[0]||null}},{key:"getMiddleName",value:function(e){return this.trim(String(e||"")).split(/[\s]+/).slice(1).join(" ")||null}}]),e}();function De(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(Le,"COMPOUND_LAST_NAME_WORDS",["vere","von","van","de","del","della","di","da","pietro","vanden","du","st.","st","la","lo","ter","o","o'","mac","fitz"]),v()(Le,"SUFFIX_ARRAY",["I","II","III","IV","V","Senior","Junior","Jr","Sr","PhD","APR","RPh","PE","MD","MA","DMD","CME","BVM","CFRE","CLU","CPA","CSC","CSJ","DC","DD","DDS","DO","DVM","EdD","Esq","JD","LLD","OD","OSB","PC","Ret","RGS","RN","RNC","SHCJ","SJ","SNJM","SSMO","USA","USAF","USAFR","USAR","USCG","USMC","USMCR","USN","USNR"]),v()(Le,"removeIgnoredChars",(function(e){return String(e||"").replace(/\./g,"")})),v()(Le,"isCamelCaseString",(function(e){return/[A-Z]+/.test(e)&&/[a-z]+/.test(e)})),v()(Le,"getSuffix",(function(e){e=this.removeIgnoredChars(String(e||"")).toLowerCase();var t=this.SUFFIX_ARRAY.map((function(e){return e.toLowerCase()})).indexOf(e);return t>=0?this.SUFFIX_ARRAY[t]:null}));var we=function(e){u()(n,e);var t=De(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"titleNode",void 0),v()(A()(r),"firstNameNode",void 0),v()(A()(r),"initialsNode",void 0),v()(A()(r),"middleNameNode",void 0),v()(A()(r),"lastNameNode",void 0),v()(A()(r),"wasCapitalizationPerformed",!1);var a=r.getHash();return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","name-".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","name-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","name-".concat(a,"-instr-acc")),r.titleNode=L.a.createElement(L.a.ELEMENT_TYPE_DROPDOWN),r.titleNode.setAttribute("data-role","i123-input"),r.titleNode.setAttribute("data-index",String(n.INDEX_TITLE)),r.firstNameNode=document.createElement("input"),r.firstNameNode.setAttribute("data-role","i123-input"),r.firstNameNode.setAttribute("type","text"),r.firstNameNode.setAttribute("data-index",String(n.INDEX_FIRST_NAME)),r.firstNameNode.placeholder="First",r.firstNameNode.setAttribute("data-i18n-placeholder","textdef_30"),r.initialsNode=document.createElement("input"),r.initialsNode.setAttribute("data-role","i123-input"),r.initialsNode.setAttribute("type","text"),r.initialsNode.setAttribute("data-index",String(n.INDEX_INITIALS)),r.initialsNode.placeholder="Initials",r.initialsNode.setAttribute("data-i18n-placeholder","textdef_168"),r.middleNameNode=document.createElement("input"),r.middleNameNode.setAttribute("data-role","i123-input"),r.middleNameNode.setAttribute("type","text"),r.middleNameNode.setAttribute("data-index",String(n.INDEX_MIDDLE_NAME)),r.middleNameNode.placeholder="Middle",r.middleNameNode.setAttribute("data-i18n-placeholder","textdef_167"),r.lastNameNode=document.createElement("input"),r.lastNameNode.setAttribute("data-role","i123-input"),r.lastNameNode.setAttribute("type","text"),r.lastNameNode.setAttribute("data-index",String(n.INDEX_LAST_NAME)),r.lastNameNode.placeholder="Last",r.lastNameNode.setAttribute("data-i18n-placeholder","textdef_31"),r.rootNode.setAttribute("aria-labelledby","name-".concat(a,"-acc ")+"name-".concat(a,"-error-acc ")+"name-".concat(a,"-instr-acc")),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_NAME}},{key:"getElementName",value:function(){return"Name"}},{key:"updateTitleOptions",value:function(){for(var e,t=this.getProperty("configuration.titleChoices")||[{text:"Ms",i18n:"formeditor_dropdownTitleNameChoice1"},{text:"Miss",i18n:"formeditor_dropdownTitleNameChoice2"},{text:"Mrs",i18n:"formeditor_dropdownTitleNameChoice3"},{text:"Mr",i18n:"formeditor_dropdownTitleNameChoice4"}];this.titleNode.getOptions().length;)this.titleNode.remove(0);(e=document.createElement("option")).value="",e.text="Title",e.setAttribute("data-i18n-text","textdef_166"),this.titleNode.add(e);for(var n=this.getId(),i=0,r=t.length;i<r;i++)(e=document.createElement("option")).text=e.value=t[i].text,n?e.setAttribute("data-i18n-text","control_label_".concat(this.getId(),"_choice_").concat(i)):t[i].i18n&&e.setAttribute("data-i18n-text",t[i].i18n),this.titleNode.add(e)}},{key:"onCreated",value:function(){var e=this;this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.updateDefaultName(),this.synchronizeValue(),this.updateHiddenAttribute(),setTimeout((function(){e.updateTitleOptions()}),1)}},{key:"getInputDOMNodes",value:function(){switch(String(~~this.getProperty("configuration.fieldTitle"))+String(~~this.getProperty("configuration.fieldInitials"))+String(~~this.getProperty("configuration.fieldMiddleName"))){case"111":return[{inputs:[{width:O.I.QUARTER,input:this.titleNode},{width:O.I.FILL,input:this.firstNameNode},{width:O.I.QUARTER,input:this.initialsNode}]},{inputs:[{width:O.I.FILL,input:this.middleNameNode},{width:O.I.HALF,input:this.lastNameNode}]}];case"011":return[{inputs:[{width:O.I.QUARTER,input:this.firstNameNode},{width:O.I.QUARTER,input:this.initialsNode},{width:O.I.QUARTER,input:this.middleNameNode},{width:O.I.FILL,input:this.lastNameNode}]}];case"010":return[{inputs:[{width:O.I.THIRD,input:this.firstNameNode},{width:O.I.QUARTER,input:this.initialsNode},{width:O.I.FILL,input:this.lastNameNode}]}];case"001":return[{inputs:[{width:O.I.THIRD,input:this.firstNameNode},{width:O.I.THIRD,input:this.middleNameNode},{width:O.I.FILL,input:this.lastNameNode}]}];case"101":return[{inputs:[{width:O.I.QUARTER,input:this.titleNode},{width:O.I.QUARTER,input:this.firstNameNode},{width:O.I.QUARTER,input:this.middleNameNode},{width:O.I.FILL,input:this.lastNameNode}]}];case"100":return[{inputs:[{width:O.I.QUARTER,input:this.titleNode},{width:O.I.THIRD,input:this.firstNameNode},{width:O.I.FILL,input:this.lastNameNode}]}];case"110":return[{inputs:[{width:O.I.QUARTER,input:this.titleNode},{width:O.I.QUARTER,input:this.firstNameNode},{width:O.I.QUARTER,input:this.initialsNode},{width:O.I.FILL,input:this.lastNameNode}]}];case"000":return[{inputs:[{width:O.I.FILL,input:this.firstNameNode},{width:O.I.HALF,input:this.lastNameNode}]}]}}},{key:"getCapitalizedValue",value:function(e){if(!this.getProperty("options.capitalize"))return e;if(!e)return e;for(var t=e.split(" "),n=0,i=t.length;n<i;n++)t[n]&&t[n].charAt(0)!==t[n].charAt(0).toLocaleUpperCase()&&(t[n]=t[n].charAt(0).toLocaleUpperCase()+t[n].slice(1),this.wasCapitalizationPerformed=!0);return t.join(" ")}},{key:"onValueChanged",value:function(){var e=this;setTimeout((function(){e.wasCapitalizationPerformed=!1,e.setProperty("value.title",e.titleNode.getValue()),e.setProperty("value.firstName",e.getCapitalizedValue(e.firstNameNode.value)),e.setProperty("value.initials",e.getCapitalizedValue(e.initialsNode.value)),e.setProperty("value.middleName",e.getCapitalizedValue(e.middleNameNode.value)),e.setProperty("value.lastName",e.getCapitalizedValue(e.lastNameNode.value)),e.wasCapitalizationPerformed&&e.synchronizeValue()}),0)}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case n.INDEX_TITLE:return{targetPropertyFQN:"value.title",type:"string",optional:!0};case n.INDEX_FIRST_NAME:return{targetPropertyFQN:"value.firstName",type:"string",optional:!0};case n.INDEX_INITIALS:return{targetPropertyFQN:"value.initials",type:"string",optional:!0};case n.INDEX_MIDDLE_NAME:return{targetPropertyFQN:"value.middleName",type:"string",optional:!0};case n.INDEX_LAST_NAME:return{targetPropertyFQN:"value.lastName",type:"string",optional:!0};default:return null}}},{key:"synchronizeValue",value:function(){S.a.synchronizeControlValue(this.titleNode,this.getProperty("value.title")),S.a.synchronizeControlValue(this.firstNameNode,this.getProperty("value.firstName")),S.a.synchronizeControlValue(this.initialsNode,this.getProperty("value.initials")),S.a.synchronizeControlValue(this.middleNameNode,this.getProperty("value.middleName")),S.a.synchronizeControlValue(this.lastNameNode,this.getProperty("value.lastName"))}},{key:"enumerateIndexes",value:function(){return[n.INDEX_MIDDLE_NAME,n.INDEX_FIRST_NAME,n.INDEX_INITIALS,n.INDEX_LAST_NAME,n.INDEX_TITLE]}},{key:"getMinInputRowWidth",value:function(){return 12}},{key:"getOptionalFields",value:function(){var e=[];return this.getProperty("configuration.fieldInitials")&&e.push(O.P.INITIALS),this.getProperty("configuration.fieldMiddleName")&&e.push(O.P.MIDDLE_NAME),this.getProperty("configuration.fieldTitle")&&e.push(O.P.TITLE),e}},{key:"setOptionalFields",value:function(e){for(var t=0,n=(e=e||[]).length;t<n;t++)e[t]=~~e[t];this.setProperty("configuration.fieldInitials",e.indexOf(O.P.INITIALS)>-1),this.setProperty("configuration.fieldMiddleName",e.indexOf(O.P.MIDDLE_NAME)>-1),this.setProperty("configuration.fieldTitle",e.indexOf(O.P.TITLE)>-1)}},{key:"updateDefaultName",value:function(){var e,t=this.getProperty("configuration.defaultValue"),n=!1;null!==t?(e=Le.parseName(t.trim()),this.setProperty("configuration.defaultValue",t.trim())):e={initials:null,title:null,firstName:null,lastName:null,middleName:null,suffix:null},null!==e.firstName?(this.setProperty("value.firstName",e.firstName),n=!0):null!==this.getProperty("value.firstName")&&(this.setProperty("value.firstName",null),n=!0),null!==e.lastName?(this.setProperty("value.lastName",e.lastName),n=!0):null!==this.getProperty("value.lastName")&&(this.setProperty("value.lastName",null),n=!0),this.getProperty("configuration.fieldTitle")&&(null!==e.title?(this.setProperty("value.title",e.title.replace(/\.$/g,"")),n=!0):null!==this.getProperty("value.title")&&(this.setProperty("value.title",null),n=!0)),this.getProperty("configuration.fieldMiddleName")&&(null!==e.middleName?(this.setProperty("value.middleName",e.middleName),n=!0):null!==this.getProperty("value.middleName")&&(this.setProperty("value.middleName",null),n=!0)),this.getProperty("configuration.fieldInitials")&&(null!==e.initials?(this.setProperty("value.initials",e.initials),n=!0):null!==this.getProperty("value.initials")&&(this.setProperty("value.initials",null),n=!0)),n&&this.synchronizeValue()}},{key:"onReset",value:function(){this.setValue({title:null,firstName:null,initials:null,middleName:null,lastName:null}),this.updateDefaultName(),this.onValueChanged()}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",i.a.translationService.translateText("editorField_name")),this.updateLabelText(),this}},{key:"setupI18n",value:function(){return this.titleNode.trigger("update"),y()(_()(n.prototype),"setupI18n",this).call(this)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("instructions.text")||"";if(t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),this.getProperty("configuration.fieldTitle"))for(var i=this.getProperty("configuration.titleChoices")||[],r=0,a=i.length;r<a;r++)i[r].text&&e.push({key:"control_label_".concat(this.getId(),"_choice_").concat(r),sourceText:i[r].text});return e}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_NAME,name:"First / Last name",isContainer:!1,category:O.w.CONTACT_DETAILS,keywords:"name surname contact information first last",icon:"i123-editor_field_name",isVirtual:!1,i18nName:"editorField_name",i18nKeywords:"edt_UI_control_type_name_keywords",index:10,accessibilityFields:O.v.ROOT_NODE+O.v.ERROR_NODE,title:i.a.translationService.translateText("editorFieldTooltip_name")}}}]),n}(i.a);function ke(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(we,"INDEX_FIRST_NAME",1),v()(we,"INDEX_LAST_NAME",2),v()(we,"INDEX_TITLE",3),v()(we,"INDEX_INITIALS",4),v()(we,"INDEX_MIDDLE_NAME",5),v()(we,"attributes",{}),v()(we,"runtime",null),v()(we,"nodeName","name");var Me=function(e){u()(n,e);var t=ke(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"inputContainer",void 0),v()(A()(r),"prefixLabel",void 0),v()(A()(r),"input",void 0);var a=r.getHash();return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","number-".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","number-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","number-".concat(a,"-instr-acc")),r.input=document.createElement("input"),r.input.setAttribute("type","number"),r.input.setAttribute("data-role","i123-input"),r.input.setAttribute("data-no-theme",""),r.input.setAttribute("step","any"),r.prefixLabel=document.createElement("span"),r.prefixLabel.setAttribute("data-role","prefix-label"),r.prefixLabel.setAttribute("id","price-".concat(a,"-prefix-acc")),r.inputContainer=document.createElement("div"),r.inputContainer.setAttribute("data-role","input-container"),r.inputContainer.setAttribute("data-ui-role","ui-element"),r.inputContainer.appendChild(r.prefixLabel),r.inputContainer.appendChild(r.input),r.input.setAttribute("aria-labelledby","number-".concat(a,"-acc ")+"number-".concat(a,"-error-acc ")+"number-".concat(a,"-instr-acc")),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_NUMBER}},{key:"getElementName",value:function(){return"Number"}},{key:"updatePrefixLabel",value:function(){this.prefixLabel.textContent=this.getProperty("configuration.prefix")||"",this.adjustInputPadding()}},{key:"syncInputCompactField",value:function(){this.input.placeholder=this.inputContainer.hasAttribute("placeholder")?this.inputContainer.getAttribute("placeholder"):""}},{key:"adjustInputPadding",value:function(){var e=this;setTimeout((function(){var t=e.getForm().getEngine().getTheme().properties.input.padding.horizontal,n=e.getForm().getRootNode().getAttribute("data-text-direction"),i=e.prefixLabel.offsetWidth>parseInt(t,10)?"".concat(e.prefixLabel.offsetWidth+8,"px"):t;"ltr"===n?(e.input.style.paddingLeft=i,e.input.style.removeProperty("padding-right")):(e.input.style.paddingRight=i,e.input.style.removeProperty("padding-left"))}),1)}},{key:"adjustPrefixLabelOpacity",value:function(){this.input.value.length>0||null!==this.getErrors()?this.prefixLabel.style.removeProperty("opacity"):this.prefixLabel.style.opacity=".5"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.inputContainer,width:O.I.FULL}]}]}},{key:"onCreated",value:function(){var e=this;this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.updateHiddenAttribute(),this.updateDefaultValue(),this.validateValue(),this.synchronizeValue(),this.updatePrefixLabel(),this.adjustPrefixLabelOpacity(),this.syncInputCompactField(),this.addEventListeners(),this.onReadonlyStateChanged(),setTimeout((function(){e.hidePrefixLabelIfNeeded()}),1e3)}},{key:"addEventListeners",value:function(){var e=this,t=this.getForm().getEngine().getLoader().getLoaderDependency(O.M.UNDO_SERVICE),n=this.getForm().getEngine();t&&t.on("user-action",(function(t){"resize-end"===t&&e.hidePrefixLabelIfNeeded()})),window.addEventListener("resize",Object(re.a)((function(){e.hidePrefixLabelIfNeeded()}),500)),this.input.addEventListener("focus",(function(){e.rootNode.querySelector('div[data-role="input-container"]').setAttribute("data-is-focused-child-element","1")})),this.input.addEventListener("blur",(function(){e.rootNode.querySelector('div[data-role="input-container"]').removeAttribute("data-is-focused-child-element")})),n.getDocument().on("update-text-direction",(function(){e.adjustInputPadding()})),n.getLoader().on("navigate-to-relative-page-number",(function(){e.hidePrefixLabelIfNeeded()}))}},{key:"hidePrefixLabelIfNeeded",value:function(){var e=this.getProperty("configuration.prefix")||"",t=parseInt(getComputedStyle(this.prefixLabel).paddingLeft,10),n=parseInt(getComputedStyle(this.input).paddingRight,10),i=ne.getDOMWidth(e);this.inputContainer.offsetWidth<i+t+n+30?this.prefixLabel.style.display="none":this.prefixLabel.style.removeProperty("display"),this.adjustInputPadding()}},{key:"getSupportedValidators",value:function(){var e=this.getForm().getEngine().getValidator();return[e.getValidatorById(j.a.VALIDATOR_TYPE_NUMERIC),e.getValidatorById(j.a.VALIDATOR_TYPE_NUMERICPLUS)]}},{key:"onFocusEnter",value:function(){var e=this,t=setInterval((function(){e.getPrefixInspectorInput()&&(e.updateInspectorPrefix(),clearInterval(t))}),500)}},{key:"onValueChanged",value:function(){var e=this.input.value;this.setProperty("value.value",""===e?null:parseFloat(e)),this.validateValue(),this.adjustPrefixLabelOpacity(),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"updateDefaultValue",value:function(){var e=this.getProperty("configuration.defaultValue");this.setProperty("value.value",0===e?0:e),this.synchronizeValue(),e&&this.input.setAttribute("value",e.toString())}},{key:"validateValue",value:function(){var e=this.getProperty("value.value"),t=this.input.validity;if(0===e||e||(e=null),t&&t.valid)null!==e?this.checkValidNumericInput():this.clearAllValidationErrors();else if(t&&!t.valid){var n=this.getForm().getEngine().getI18n();this.addError(g.a.ERR_INVALID_NUMBER,"".concat(n.translateText("textdef_5"),":").concat(n.translateText("textdef_47"))||"Expected input: numeric (only numbers)")}}},{key:"clearAllValidationErrors",value:function(){this.removeError(g.a.ERR_NUMBER_TOO_BIG),this.removeError(g.a.ERR_NUMBER_TOO_LONG),this.removeError(g.a.ERR_NUMBER_TOO_SHORT),this.removeError(g.a.ERR_NUMBER_TOO_SMALL),this.removeError(g.a.ERR_NOT_NUMERIC),this.removeError(g.a.ERR_INVALID_NUMBER)}},{key:"checkValidNumericInput",value:function(){var e=this.getProperty("configuration.minLength"),t=this.getProperty("configuration.maxLength"),n=this.getProperty("configuration.minValue"),i=this.getProperty("configuration.maxValue"),r=this.getProperty("value.value"),a=this.getProperty("validation.type"),o=this.getForm().getEngine().getI18n();""==x.a.meetsRequirements("* * * msie *")&&(isNaN(Number(this.input.value))||this.input.value.indexOf("x")>=0)?this.addError(g.a.ERR_INVALID_NUMBER,"".concat(o.translateText("textdef_5"),":").concat(o.translateText("textdef_47"))||"Expected input: numeric (only numbers)"):this.removeError(g.a.ERR_INVALID_NUMBER),a===j.a.VALIDATOR_TYPE_NUMERIC&&(r<0||Math.floor(r)!==r?this.addError(g.a.ERR_NOT_NUMERIC,"".concat(o.translateText("textdef_5"),":").concat(o.translateText("textdef_47"))||"Expected input: numeric (only numbers)"):this.removeError(g.a.ERR_NOT_NUMERIC)),null!=t&&t>0&&(String(r).length>t?this.addError(g.a.ERR_NUMBER_TOO_LONG,this.getForm().getEngine().getI18n().translateText("textdef_71",String(t))||"The number is too long"):this.removeError(g.a.ERR_NUMBER_TOO_LONG)),null!=e&&e>0&&(String(r).length<e?this.addError(g.a.ERR_NUMBER_TOO_SHORT,this.getForm().getEngine().getI18n().translateText("textdef_70",String(e))||"The number is too short"):this.removeError(g.a.ERR_NUMBER_TOO_SHORT)),null!=i&&(r>i?this.addError(g.a.ERR_NUMBER_TOO_BIG,this.getForm().getEngine().getI18n().translateText("textdef_73",String(i))||"The value you have provided is too big"):this.removeError(g.a.ERR_NUMBER_TOO_BIG)),null!=n&&(r<n?this.addError(g.a.ERR_NUMBER_TOO_SMALL,this.getForm().getEngine().getI18n().translateText("textdef_72",String(n))||"The value you have provided is too small"):this.removeError(g.a.ERR_NUMBER_TOO_SMALL))}},{key:"getPrefixVisibility",value:function(){return(this.getProperty("configuration.prefix")||"").length>0}},{key:"setPrefixVisibility",value:function(e){var t=this.getProperty("configuration.prefix")||"USD";e?this.setProperty("configuration.prefix",this.getProperty("configuration.prefix")||"USD"):this.setProperty("configuration.prefix",null),this.getPrefixInspectorInput().value=t}},{key:"updateInspectorPrefix",value:function(){var e=this.getPrefixInspectorInput();e.addEventListener("keypress",(function(t){if(!S.a.isInputTextSelected(e)){var n=0;n+=e.value.replace(/[^a-z0-9]/gi,"").length;for(var i=0;i<e.value.length;i++)e.value.charCodeAt(i)>127&&n++;n>=4&&(t.key.match(/[a-z0-9]/gi)||t.key.charCodeAt(0)>127)&&t.preventDefault()}}))}},{key:"getPrefixInspectorInput",value:function(){return document.querySelector('#item [data-property-name="configuration-prefix"] input')}},{key:"synchronizeValue",value:function(){S.a.synchronizeControlValue(this.input,this.getProperty("value.value")),this.getForm().getEngine().getLoader().getLoaderType()===O.B.VIEW&&this.removeAllBackendErrors()}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"number",optional:!0};default:return null}}},{key:"onReset",value:function(){this.updateDefaultValue(),this.synchronizeValue(),this.validateValue()}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_number_name")),this.updateLabelText(),this}},{key:"updateInstructionsText",value:function(){if(void 0!==this.instructionsDOMNode){var e=this.getProperty("instructions.text"),t=this.hasProperty("configuration.limitSubmissionsTotal")&&this.getProperty("configuration.limitSubmissionsTotal")||null,n=this.hasProperty("configuration.currentSubmissionsValue")?this.getProperty("configuration.currentSubmissionsValue"):null,i=null!==t?Math.max(0,t-n):null,r="".concat(this.getForm().getEngine().getI18n().translateText("textdef_41")," ").concat(i),a=this.hasProperty("configuration.isLimitSubmissionsEnabled")?this.getProperty("configuration.isLimitSubmissionsEnabled"):null;null!==i&&a?(this.instructionsDOMNode.removeAttribute("data-is-empty"),e?(this.instructionsDOMNode.textContent=e,this.instructionsDOMNode.appendChild(document.createElement("br"))):this.instructionsDOMNode.textContent="",this.instructionsDOMNode.appendChild(document.createTextNode(r))):null===e||""===e?(this.instructionsDOMNode.setAttribute("data-is-empty","1"),this.instructionsDOMNode.textContent=""):(this.instructionsDOMNode.removeAttribute("data-is-empty"),this.instructionsDOMNode.innerHTML=M.a.sanitizeHTML(U.a.parse(e)))}}},{key:"onBlur",value:function(){this.checkIfElementValueIsSynchronized(),this.checkIfLimitSubmissionsTotalValueIsExceeded()}},{key:"checkIfLimitSubmissionsTotalValueIsExceeded",value:function(){if(this.hasProperty("configuration.isLimitSubmissionsEnabled")&&this.getProperty("configuration.isLimitSubmissionsEnabled")){var e=this.hasProperty("configuration.limitSubmissionsTotal")&&this.getProperty("configuration.limitSubmissionsTotal")||null,t=this.hasProperty("configuration.currentSubmissionsValue")&&this.getProperty("configuration.currentSubmissionsValue")||null,n=null!==e?Math.max(0,e-t):null;(n||0===n)&&(~~this.input.value>n?this.addError(g.a.ERR_MAX_ACCEPTED_VALUE_EXCEEDED,"".concat(this.getForm().getEngine().getI18n().translateText("textdef_41"),": ").concat(n)||"The maximum accepted value is ".concat(n)):this.removeError(g.a.ERR_MAX_ACCEPTED_VALUE_EXCEEDED))}}},{key:"onDuplicate",value:function(){y()(_()(n.prototype),"onDuplicate",this).call(this),this.hasProperty("configuration.isLimitSubmissionsEnabled")&&(this.hasProperty("configuration.currentSubmissionsValue")&&this.setProperty("configuration.currentSubmissionsValue",null),this.updateInstructionsText())}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),e}},{key:"setupI18n",value:function(){var e=this;if(this.hasProperty("configuration.isLimitSubmissionsEnabled")&&this.getProperty("configuration.isLimitSubmissionsEnabled")){var t=this.hasProperty("configuration.limitSubmissionsTotal")&&this.getProperty("configuration.limitSubmissionsTotal")||null,i=this.hasProperty("configuration.currentSubmissionsValue")&&this.getProperty("configuration.currentSubmissionsValue")||null,r=null!==t?Math.max(0,t-i):null;setTimeout((function(){var t="".concat(e.getForm().getEngine().getI18n().translateText("textdef_41")," ").concat(r);e.instructionsDOMNode.textContent=t}),100)}return y()(_()(n.prototype),"setupI18n",this).call(this)}},{key:"onReadonlyStateChanged",value:function(){var e=this.getProperty("options.readOnly");this.setReadonly(e)}},{key:"isReadonly",value:function(){return this.input.readOnly}},{key:"setReadonly",value:function(e){return this.input.readOnly=e,this}},{key:"setVisible",value:function(e){y()(_()(n.prototype),"setVisible",this).call(this,e),this.hidePrefixLabelIfNeeded()}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_NUMBER,name:"Number",isContainer:!1,category:O.w.CALCULATION,keywords:"number quantity",icon:"i123-editor_field_number",isVirtual:!1,i18nName:"edt_UI_control_type_number_name",i18nKeywords:"edt_UI_control_type_number_keywords",index:10,accessibilityFields:O.v.ERROR_NODE,title:f.translationService.translateText("editorFieldTooltip_number")}}}]),n}(f);function xe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(Me,"attributes",{}),v()(Me,"runtime",null),v()(Me,"nodeName","number");var Ue=function(e){u()(n,e);var t=xe(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"getElementName",value:function(){return"Page break"}},{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_PAGE_BREAK}},{key:"getPropertyDescriptorByInputIndex",value:function(e){return null}},{key:"isSelectable",value:function(){return!1}},{key:"onReset",value:function(){}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"enumerateTranslations",value:function(){return[]}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_PAGE_BREAK,name:"New page / Page break",isContainer:!1,category:O.w.MEDIA_STRUCTURE,keywords:"page break new page",icon:"i123-editor_field_pagebreak",isVirtual:!1,i18nName:"editorField_pageBreak",i18nKeywords:"edt_UI_control_type_page_break_keywords",index:30,accessibilityFields:O.v.NONE,title:i.a.translationService.translateText("editorFieldTooltip_pageBreak")}}},{key:"getDropDestinationCSSSelector",value:function(){return"#form > div[data-role=page] > div[data-role=page-body] > div[data-role=container][data-type=virtual-form-table-row]"}},{key:"getDropSupportedEdges",value:function(){return[O.o.TOP,O.o.BOTTOM]}}]),n}(i.a);function Fe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(Ue,"attributes",{}),v()(Ue,"runtime",null),v()(Ue,"nodeName","page-break");var Be=function(e){u()(n,e);var t=Fe(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"input",void 0);var a=r.getHash();return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","password-".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","password-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","password-".concat(a,"-instr-acc")),r.input=document.createElement("input"),r.input.setAttribute("type","password"),r.input.setAttribute("data-role","i123-input"),r.input.setAttribute("aria-labelledby","password-".concat(a,"-acc ")+"password-".concat(a,"-error-acc ")+"password-".concat(a,"-instr-acc")),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_PASSWORD}},{key:"getElementName",value:function(){return"Masked data"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.I.FULL}]}]}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateHiddenAttribute(),this.updateShowInstructionsOnClick(),this.getForm().getEngine().getLoader().getLoaderType()===O.B.EDIT?this.synchronizeValue():this.onValueChanged(),this.onReadonlyStateChanged()}},{key:"getSupportedValidators",value:function(){var e=this.getForm().getEngine().getValidator();return[e.getValidatorById(j.a.VALIDATOR_TYPE_PASSWORD_ANY_COMPLEXITY_INCLUDING_BLANK_PASSWORDS),e.getValidatorById(j.a.VALIDATOR_TYPE_PASSWORD_ANY_COMPLEXITY),e.getValidatorById(j.a.VALIDATOR_TYPE_PASSWORD_MIN_COMPLEXITY),e.getValidatorById(j.a.VALIDATOR_TYPE_PASSWORD_MED_COMPLEXITY),e.getValidatorById(j.a.VALIDATOR_TYPE_PASSWORD_CORPORATE_COMPLEXITY)]}},{key:"onValueChanged",value:function(){var e=this.input.value;this.setProperty("value.value",""===e?null:e),this.validateValue(),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"validateValue",value:function(){var e=this.getProperty("configuration.minLength"),t=this.getProperty("configuration.maxLength"),n=this.getProperty("value.value")||"";n?(null!=t&&t>0&&(n.length>t?this.addError(g.a.ERR_TOO_MANY_CHARACTERS,this.getForm().getEngine().getI18n().translateText("textdef_71",String(t))||"You have more characters than allowed."):this.removeError(g.a.ERR_TOO_MANY_CHARACTERS)),null!=e&&e>0&&(n.length<e?this.addError(g.a.ERR_TOO_FEW_CHARACTERS,this.getForm().getEngine().getI18n().translateText("textdef_70",String(e))||"You have fewer characters than allowed."):this.removeError(g.a.ERR_TOO_FEW_CHARACTERS))):(this.removeError(g.a.ERR_TOO_MANY_CHARACTERS),this.removeError(g.a.ERR_TOO_FEW_CHARACTERS))}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"string",optional:!0};default:return null}}},{key:"onReset",value:function(){this.setValue({value:null}),this.input.value=null}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_password_name")),this.updateLabelText(),this}},{key:"onBlur",value:function(){this.checkIfElementValueIsSynchronized()}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"synchronizeValue",value:function(){S.a.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),e}},{key:"onReadonlyStateChanged",value:function(){this.input.readOnly=!!this.getProperty("options.readOnly")}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_PASSWORD,name:"Masked data",isContainer:!1,category:"advanced",keywords:"masked data password classified confidential",icon:"i123-editor_field_password",isVirtual:!1,i18nName:"edt_UI_control_type_password_name",i18nKeywords:"edt_UI_control_type_password_keywords",index:180,accessibilityFields:O.v.ERROR_NODE}}}]),n}(f);function Ye(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(Be,"attributes",{}),v()(Be,"runtime",null),v()(Be,"nodeName","password");var Ve=function(e){u()(n,e);var t=Ye(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"input",void 0);var a=r.getHash();return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","phone-".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","phone-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","phone-".concat(a,"-instr-acc")),r.input=document.createElement("input"),r.input.setAttribute("type","text"),r.input.setAttribute("data-role","i123-input"),r.input.setAttribute("aria-labelledby","phone-".concat(a,"-acc ")+"phone-".concat(a,"-format-acc ")+"phone-".concat(a,"-error-acc ")+"phone-".concat(a,"-instr-acc")),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_PHONE}},{key:"getElementName",value:function(){return"Phone"}},{key:"onBlur",value:function(){this.validateInput()}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.onValidationChanged(),this.clearValue(),this.synchronizeValue(),this.updateHiddenAttribute(),this.onReadonlyStateChanged()}},{key:"getSupportedValidators",value:function(){var e=this.getForm().getEngine().getValidator();return[e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_2_2_4),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_2_3_4),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_2_3_8),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_2_4_4),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_2_5_4),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_3_3_4),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_3_3_3),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_3_3_7),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_3_4_4),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_3_2_4),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_3_2_6),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_3_2_7),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_3_5_4),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_4_3_3),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_4_3_4),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_4_3_6),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_4_3_7),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_4_2_8),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_4_4_6),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_5_3_3),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_5_4_4),e.getValidatorById(j.a.VALIDATOR_TYPE_PHONE_FORMAT_5_6)]}},{key:"getDigitGroups",value:function(e){switch(e){case j.a.VALIDATOR_TYPE_PHONE_FORMAT_2_2_4:return[2,2,4];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_2_3_4:return[2,3,4];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_2_3_8:return[2,3,8];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_2_4_4:return[2,4,4];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_2_5_4:return[2,5,4];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_3_3_4:return[3,3,4];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_3_3_3:return[3,3,3];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_3_3_7:return[3,3,7];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_3_4_4:return[3,4,4];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_3_2_4:return[3,2,4];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_3_2_6:return[3,2,6];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_3_2_7:return[3,2,7];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_3_5_4:return[3,5,4];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_4_3_3:return[4,3,3];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_4_3_4:return[4,3,4];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_4_3_6:return[4,3,6];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_4_3_7:return[4,3,7];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_4_2_8:return[4,2,8];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_4_4_6:return[4,4,6];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_5_3_3:return[5,3,3];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_5_4_4:return[5,4,4];case j.a.VALIDATOR_TYPE_PHONE_FORMAT_5_6:return[5,6];default:return null}}},{key:"onValidationChanged",value:function(){for(var e="",t=this.getDigitGroups(this.getProperty("validation.type")||j.a.VALIDATOR_TYPE_PHONE_FORMAT_4_3_3)||n.DEFAULT_MASK_FORMAT,i=0,r=t.length;i<r;i++)e+="".concat(this.strRepeat("#",t[i])," ");this.input.placeholder=e,this.updatePhoneFormatAccessibility(t)}},{key:"strRepeat",value:function(e,t){var n="";e=String(e||"");for(var i=0;i<t;i++)n+=e;return n}},{key:"getFormattedPhoneNumberAccordingToValidationType",value:function(e){var t=String(e||"").replace(/[^\d\+]+/g,""),n=this.getProperty("validation.type");if(!/^(\+)?([\d]+)/.test(t))return e;var i=this.getForm().getEngine().getPhoneUtils().parsePhoneNumber(t);if(null===i)return e;var r,a=this.getDigitGroups(n),o=0,s="";r=i.areaCode?"".concat(i.areaCode," "):"",i.localPhoneNumber=i.localPhoneNumber||"";for(var l=0,c=a.length;l<c;l++){for(var u=0;u<a[l]&&""!==(s=i.localPhoneNumber.charAt(o)||"");u++)o++,r+=s;if(""===s)break;r="".concat(r," ")}return r.replace(/(^[\s]+|[\s]+$)/g,"")}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{width:O.I.FULL,input:this.input}]}]}},{key:"onValueChanged",value:function(){var e=this.getFormattedPhoneNumberAccordingToValidationType(this.input.value);if(e!==this.input.value){this.input.value=e;var t=this.input;ie.a.create((function(){t.focus(),t.setSelectionRange(t.value.length,t.value.length)}),0)()}e=e.replace(/ /g,"-"),this.setProperty("value.value",""===e?null:e),this.removeError(g.a.ERR_INVALID_PHONE_FORMAT),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"validateInput",value:function(){var e=this.getForm().getEngine().getValidator(),t=this.getProperty("value.value")||"",n=this.hasProperty("validation.type")?this.getProperty("validation.type"):null;this.hasError(g.a.ERR_INVALID_PHONE_FORMAT)&&this.removeError(g.a.ERR_INVALID_PHONE_FORMAT),t&&n&&!e.validate(t,this.getProperty("validation.type"))&&this.addError(g.a.ERR_INVALID_PHONE_FORMAT,"".concat(this.getForm().getEngine().getI18n().translateText("textdef_5"),": ").concat(this.getDigitGroups(n).join(" "))||"The phone format must be ".concat(this.getDigitGroups(n).join(" ")))}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"string",optional:!0};default:return null}}},{key:"onReset",value:function(){this.setValue({value:null})}},{key:"setupDefaults",value:function(){this.setProperty("label.labelText",i.a.translationService.translateText("editorField_phone"));var e=this.getForm().getEngine().getLoader().getLoaderDependency(O.M.DEFAULT_USER_PREFERENCES);return e&&(this.setProperty("validation.type",e.phoneFormat),this.onValidationChanged()),this.updateLabelText(),this}},{key:"isCompactFieldPlaceholderSupported",value:function(){return!1}},{key:"synchronizeValue",value:function(){S.a.synchronizeControlValue(this.input,this.getFormattedPhoneNumberAccordingToValidationType(this.getProperty("value.value")))}},{key:"setValue",value:function(e){y()(_()(n.prototype),"setValue",this).call(this,e),this.validateInput()}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"updatePhoneFormatAccessibility",value:function(e){var t=document.createElement("span");t.setAttribute("id","phone-".concat(this.getHash(),"-format-acc")),t.textContent="Format ".concat(e[0]," ").concat(e[1]," ").concat(e[2]),t.style.display="none",this.input.appendChild(t)}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),e}},{key:"onReadonlyStateChanged",value:function(){this.input.readOnly=!!this.getProperty("options.readOnly")}},{key:"clearValue",value:function(){this.setProperty("value.value",null)}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_PHONE,name:"Phone number",isContainer:!1,category:O.w.CONTACT_DETAILS,keywords:"phone number",icon:"i123-phone",isVirtual:!1,i18nName:"editorField_phone",i18nKeywords:"edt_UI_control_type_phone_keywords",index:30,accessibilityFields:O.v.ERROR_NODE,title:i.a.translationService.translateText("editorFieldTooltip_phone")}}}]),n}(i.a);v()(Ve,"DEFAULT_MASK_FORMAT",[4,3,3]),v()(Ve,"attributes",{}),v()(Ve,"runtime",null),v()(Ve,"nodeName","phone");var He=function(){function e(t){o()(this,e),v()(this,"i18n",void 0),v()(this,"cache",void 0),this.i18n=t}return l()(e,[{key:"getCurrencyById",value:function(t){return e.$ID_TO_ISO_CODE[t]?-1===e.$SUPPORTED_CURRENCIES.indexOf(e.$ID_TO_ISO_CODE[t])?null:{id:t,isoCode:e.$ID_TO_ISO_CODE[t],name:e.$ISO_CODE_TO_FULL_NAME[e.$ID_TO_ISO_CODE[t]],isOther:!1,i18n:e.$ISO_CODE_TO_NAME_I18N[e.$ID_TO_ISO_CODE[t]],symbol:e.$ID_TO_SYMBOL[t]}:null}},{key:"getCurrencyByCode",value:function(t){var n=String(t||"").toUpperCase();if(e.$SUPPORTED_CURRENCIES.indexOf(n)>-1){var i=null;for(var r in e.$ID_TO_ISO_CODE)if(e.$ID_TO_ISO_CODE.hasOwnProperty(r)&&e.$ID_TO_ISO_CODE[r]===n){i=parseInt(r);break}return null===i?null:{id:i,isoCode:n,name:e.$ISO_CODE_TO_FULL_NAME[n],isOther:!1,i18n:e.$ISO_CODE_TO_NAME_I18N[n],symbol:e.$ID_TO_SYMBOL[i]}}return null}},{key:"enumerateCurrencies",value:function(){if(void 0!==this.cache)return JSON.parse(JSON.stringify(this.cache));this.cache=[];for(var t=0,n=e.$SUPPORTED_CURRENCIES.length;t<n;t++)this.cache.push(this.getCurrencyByCode(e.$SUPPORTED_CURRENCIES[t]));return JSON.parse(JSON.stringify(this.cache))}},{key:"getCurrencySymbolById",value:function(e){var t=this.getCurrencyById(e);return t?t.symbol:""}}],[{key:"share",value:function(t){return void 0!==e.instance||(e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_USD]=e.CURRENCY_USD,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_EUR]=e.CURRENCY_EUR,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_GBP]=e.CURRENCY_GBP,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_AUD]=e.CURRENCY_AUD,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_JPY]=e.CURRENCY_JPY,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_CAD]=e.CURRENCY_CAD,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_NZD]=e.CURRENCY_NZD,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_HKD]=e.CURRENCY_HKD,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_SGD]=e.CURRENCY_SGD,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_MXN]=e.CURRENCY_MXN,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_DKK]=e.CURRENCY_DKK,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_NOK]=e.CURRENCY_NOK,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_MYR]=e.CURRENCY_MYR,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_TWD]=e.CURRENCY_TWD,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_THB]=e.CURRENCY_THB,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_ILS]=e.CURRENCY_ILS,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_CHF]=e.CURRENCY_CHF,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_BRL]=e.CURRENCY_BRL,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_RON]=e.CURRENCY_RON,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_PGK]=e.CURRENCY_PGK,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_INR]=e.CURRENCY_INR,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_MUR]=e.CURRENCY_MUR,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_CZK]=e.CURRENCY_CZK,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_DOP]=e.CURRENCY_DOP,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_ZAR]=e.CURRENCY_ZAR,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_TRY]=e.CURRENCY_TRY,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_SEK]=e.CURRENCY_SEK,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_PLN]=e.CURRENCY_PLN,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_PHP]=e.CURRENCY_PHP,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_AED]=e.CURRENCY_AED,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_ARS]=e.CURRENCY_ARS,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_RUB]=e.CURRENCY_RUB,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_XCD]=e.CURRENCY_XCD,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_BGN]=e.CURRENCY_BGN,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_HUF]=e.CURRENCY_HUF,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_COP]=e.CURRENCY_COP,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_CNY]=e.CURRENCY_CNY,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_USD]=e.CURRENCY_FULL_NAME_USD,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_EUR]=e.CURRENCY_FULL_NAME_EUR,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_GBP]=e.CURRENCY_FULL_NAME_GBP,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_AUD]=e.CURRENCY_FULL_NAME_AUD,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_JPY]=e.CURRENCY_FULL_NAME_JPY,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_CAD]=e.CURRENCY_FULL_NAME_CAD,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_NZD]=e.CURRENCY_FULL_NAME_NZD,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_HKD]=e.CURRENCY_FULL_NAME_HKD,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_SGD]=e.CURRENCY_FULL_NAME_SGD,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_MXN]=e.CURRENCY_FULL_NAME_MXN,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_DKK]=e.CURRENCY_FULL_NAME_DKK,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_NOK]=e.CURRENCY_FULL_NAME_NOK,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_MYR]=e.CURRENCY_FULL_NAME_MYR,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_TWD]=e.CURRENCY_FULL_NAME_TWD,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_THB]=e.CURRENCY_FULL_NAME_THB,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_ILS]=e.CURRENCY_FULL_NAME_ILS,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_CHF]=e.CURRENCY_FULL_NAME_CHF,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_BRL]=e.CURRENCY_FULL_NAME_BRL,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_RON]=e.CURRENCY_FULL_NAME_RON,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_PGK]=e.CURRENCY_FULL_NAME_PGK,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_INR]=e.CURRENCY_FULL_NAME_INR,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_MUR]=e.CURRENCY_FULL_NAME_MUR,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_CZK]=e.CURRENCY_FULL_NAME_CZK,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_DOP]=e.CURRENCY_FULL_NAME_DOP,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_ZAR]=e.CURRENCY_FULL_NAME_ZAR,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_TRY]=e.CURRENCY_FULL_NAME_TRY,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_SEK]=e.CURRENCY_FULL_NAME_SEK,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_PLN]=e.CURRENCY_FULL_NAME_PLN,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_PHP]=e.CURRENCY_FULL_NAME_PHP,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_AED]=e.CURRENCY_FULL_NAME_AED,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_ARS]=e.CURRENCY_FULL_NAME_ARS,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_RUB]=e.CURRENCY_FULL_NAME_RUB,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_XCD]=e.CURRENCY_FULL_NAME_XCD,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_BGN]=e.CURRENCY_FULL_NAME_BGN,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_HUF]=e.CURRENCY_FULL_NAME_HUF,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_COP]=e.CURRENCY_FULL_NAME_COP,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_CNY]=e.CURRENCY_FULL_NAME_CNY,e.$ID_TO_ISO_CODE[e.CURRENCY_USD]=e.CURRENCY_CODE_USD,e.$ID_TO_ISO_CODE[e.CURRENCY_EUR]=e.CURRENCY_CODE_EUR,e.$ID_TO_ISO_CODE[e.CURRENCY_GBP]=e.CURRENCY_CODE_GBP,e.$ID_TO_ISO_CODE[e.CURRENCY_AUD]=e.CURRENCY_CODE_AUD,e.$ID_TO_ISO_CODE[e.CURRENCY_JPY]=e.CURRENCY_CODE_JPY,e.$ID_TO_ISO_CODE[e.CURRENCY_CAD]=e.CURRENCY_CODE_CAD,e.$ID_TO_ISO_CODE[e.CURRENCY_NZD]=e.CURRENCY_CODE_NZD,e.$ID_TO_ISO_CODE[e.CURRENCY_HKD]=e.CURRENCY_CODE_HKD,e.$ID_TO_ISO_CODE[e.CURRENCY_SGD]=e.CURRENCY_CODE_SGD,e.$ID_TO_ISO_CODE[e.CURRENCY_MXN]=e.CURRENCY_CODE_MXN,e.$ID_TO_ISO_CODE[e.CURRENCY_DKK]=e.CURRENCY_CODE_DKK,e.$ID_TO_ISO_CODE[e.CURRENCY_NOK]=e.CURRENCY_CODE_NOK,e.$ID_TO_ISO_CODE[e.CURRENCY_MYR]=e.CURRENCY_CODE_MYR,e.$ID_TO_ISO_CODE[e.CURRENCY_TWD]=e.CURRENCY_CODE_TWD,e.$ID_TO_ISO_CODE[e.CURRENCY_THB]=e.CURRENCY_CODE_THB,e.$ID_TO_ISO_CODE[e.CURRENCY_ILS]=e.CURRENCY_CODE_ILS,e.$ID_TO_ISO_CODE[e.CURRENCY_CHF]=e.CURRENCY_CODE_CHF,e.$ID_TO_ISO_CODE[e.CURRENCY_BRL]=e.CURRENCY_CODE_BRL,e.$ID_TO_ISO_CODE[e.CURRENCY_RON]=e.CURRENCY_CODE_RON,e.$ID_TO_ISO_CODE[e.CURRENCY_PGK]=e.CURRENCY_CODE_PGK,e.$ID_TO_ISO_CODE[e.CURRENCY_INR]=e.CURRENCY_CODE_INR,e.$ID_TO_ISO_CODE[e.CURRENCY_MUR]=e.CURRENCY_CODE_MUR,e.$ID_TO_ISO_CODE[e.CURRENCY_CZK]=e.CURRENCY_CODE_CZK,e.$ID_TO_ISO_CODE[e.CURRENCY_DOP]=e.CURRENCY_CODE_DOP,e.$ID_TO_ISO_CODE[e.CURRENCY_ZAR]=e.CURRENCY_CODE_ZAR,e.$ID_TO_ISO_CODE[e.CURRENCY_TRY]=e.CURRENCY_CODE_TRY,e.$ID_TO_ISO_CODE[e.CURRENCY_SEK]=e.CURRENCY_CODE_SEK,e.$ID_TO_ISO_CODE[e.CURRENCY_PLN]=e.CURRENCY_CODE_PLN,e.$ID_TO_ISO_CODE[e.CURRENCY_PHP]=e.CURRENCY_CODE_PHP,e.$ID_TO_ISO_CODE[e.CURRENCY_AED]=e.CURRENCY_CODE_AED,e.$ID_TO_ISO_CODE[e.CURRENCY_ARS]=e.CURRENCY_CODE_ARS,e.$ID_TO_ISO_CODE[e.CURRENCY_RUB]=e.CURRENCY_CODE_RUB,e.$ID_TO_ISO_CODE[e.CURRENCY_XCD]=e.CURRENCY_CODE_XCD,e.$ID_TO_ISO_CODE[e.CURRENCY_BGN]=e.CURRENCY_CODE_BGN,e.$ID_TO_ISO_CODE[e.CURRENCY_HUF]=e.CURRENCY_CODE_HUF,e.$ID_TO_ISO_CODE[e.CURRENCY_COP]=e.CURRENCY_CODE_COP,e.$ID_TO_ISO_CODE[e.CURRENCY_CNY]=e.CURRENCY_CODE_CNY,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_USD]=e.CURRENCY_NAME_I18N_USD,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_EUR]=e.CURRENCY_NAME_I18N_EUR,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_GBP]=e.CURRENCY_NAME_I18N_GBP,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_AUD]=e.CURRENCY_NAME_I18N_AUD,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_JPY]=e.CURRENCY_NAME_I18N_JPY,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_CAD]=e.CURRENCY_NAME_I18N_CAD,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_NZD]=e.CURRENCY_NAME_I18N_NZD,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_HKD]=e.CURRENCY_NAME_I18N_HKD,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_SGD]=e.CURRENCY_NAME_I18N_SGD,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_MXN]=e.CURRENCY_NAME_I18N_MXN,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_DKK]=e.CURRENCY_NAME_I18N_DKK,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_NOK]=e.CURRENCY_NAME_I18N_NOK,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_MYR]=e.CURRENCY_NAME_I18N_MYR,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_TWD]=e.CURRENCY_NAME_I18N_TWD,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_THB]=e.CURRENCY_NAME_I18N_THB,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_ILS]=e.CURRENCY_NAME_I18N_ILS,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_CHF]=e.CURRENCY_NAME_I18N_CHF,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_BRL]=e.CURRENCY_NAME_I18N_BRL,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_RON]=e.CURRENCY_NAME_I18N_RON,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_PGK]=e.CURRENCY_NAME_I18N_PGK,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_INR]=e.CURRENCY_NAME_I18N_INR,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_MUR]=e.CURRENCY_NAME_I18N_MUR,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_CZK]=e.CURRENCY_NAME_I18N_CZK,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_DOP]=e.CURRENCY_NAME_I18N_DOP,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_ZAR]=e.CURRENCY_NAME_I18N_ZAR,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_TRY]=e.CURRENCY_NAME_I18N_TRY,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_SEK]=e.CURRENCY_NAME_I18N_SEK,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_PLN]=e.CURRENCY_NAME_I18N_PLN,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_PHP]=e.CURRENCY_NAME_I18N_PHP,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_AED]=e.CURRENCY_NAME_I18N_AED,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_ARS]=e.CURRENCY_NAME_I18N_ARS,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_RUB]=e.CURRENCY_NAME_I18N_RUB,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_XCD]=e.CURRENCY_NAME_I18N_XCD,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_BGN]=e.CURRENCY_NAME_I18N_BGN,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_HUF]=e.CURRENCY_NAME_I18N_HUF,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_COP]=e.CURRENCY_NAME_I18N_COP,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_CNY]=e.CURRENCY_NAME_I18N_CNY,e.$ID_TO_SYMBOL[e.CURRENCY_USD]=e.CURRENCY_SYMBOL_USD,e.$ID_TO_SYMBOL[e.CURRENCY_EUR]=e.CURRENCY_SYMBOL_EUR,e.$ID_TO_SYMBOL[e.CURRENCY_GBP]=e.CURRENCY_SYMBOL_GBP,e.$ID_TO_SYMBOL[e.CURRENCY_AUD]=e.CURRENCY_SYMBOL_AUD,e.$ID_TO_SYMBOL[e.CURRENCY_JPY]=e.CURRENCY_SYMBOL_JPY,e.$ID_TO_SYMBOL[e.CURRENCY_CAD]=e.CURRENCY_SYMBOL_CAD,e.$ID_TO_SYMBOL[e.CURRENCY_NZD]=e.CURRENCY_SYMBOL_NZD,e.$ID_TO_SYMBOL[e.CURRENCY_HKD]=e.CURRENCY_SYMBOL_HKD,e.$ID_TO_SYMBOL[e.CURRENCY_SGD]=e.CURRENCY_SYMBOL_SGD,e.$ID_TO_SYMBOL[e.CURRENCY_MXN]=e.CURRENCY_SYMBOL_MXN,e.$ID_TO_SYMBOL[e.CURRENCY_DKK]=e.CURRENCY_SYMBOL_DKK,e.$ID_TO_SYMBOL[e.CURRENCY_NOK]=e.CURRENCY_SYMBOL_NOK,e.$ID_TO_SYMBOL[e.CURRENCY_MYR]=e.CURRENCY_SYMBOL_MYR,e.$ID_TO_SYMBOL[e.CURRENCY_TWD]=e.CURRENCY_SYMBOL_TWD,e.$ID_TO_SYMBOL[e.CURRENCY_THB]=e.CURRENCY_SYMBOL_THB,e.$ID_TO_SYMBOL[e.CURRENCY_ILS]=e.CURRENCY_SYMBOL_ILS,e.$ID_TO_SYMBOL[e.CURRENCY_CHF]=e.CURRENCY_SYMBOL_CHF,e.$ID_TO_SYMBOL[e.CURRENCY_BRL]=e.CURRENCY_SYMBOL_BRL,e.$ID_TO_SYMBOL[e.CURRENCY_RON]=e.CURRENCY_SYMBOL_RON,e.$ID_TO_SYMBOL[e.CURRENCY_PGK]=e.CURRENCY_SYMBOL_PGK,e.$ID_TO_SYMBOL[e.CURRENCY_INR]=e.CURRENCY_SYMBOL_INR,e.$ID_TO_SYMBOL[e.CURRENCY_MUR]=e.CURRENCY_SYMBOL_MUR,e.$ID_TO_SYMBOL[e.CURRENCY_CZK]=e.CURRENCY_SYMBOL_CZK,e.$ID_TO_SYMBOL[e.CURRENCY_DOP]=e.CURRENCY_SYMBOL_DOP,e.$ID_TO_SYMBOL[e.CURRENCY_ZAR]=e.CURRENCY_SYMBOL_ZAR,e.$ID_TO_SYMBOL[e.CURRENCY_TRY]=e.CURRENCY_SYMBOL_TRY,e.$ID_TO_SYMBOL[e.CURRENCY_SEK]=e.CURRENCY_SYMBOL_SEK,e.$ID_TO_SYMBOL[e.CURRENCY_PLN]=e.CURRENCY_SYMBOL_PLN,e.$ID_TO_SYMBOL[e.CURRENCY_PHP]=e.CURRENCY_SYMBOL_PHP,e.$ID_TO_SYMBOL[e.CURRENCY_AED]=e.CURRENCY_SYMBOL_AED,e.$ID_TO_SYMBOL[e.CURRENCY_ARS]=e.CURRENCY_SYMBOL_ARS,e.$ID_TO_SYMBOL[e.CURRENCY_RUB]=e.CURRENCY_SYMBOL_RUB,e.$ID_TO_SYMBOL[e.CURRENCY_XCD]=e.CURRENCY_SYMBOL_XCD,e.$ID_TO_SYMBOL[e.CURRENCY_BGN]=e.CURRENCY_SYMBOL_BGN,e.$ID_TO_SYMBOL[e.CURRENCY_HUF]=e.CURRENCY_SYMBOL_HUF,e.$ID_TO_SYMBOL[e.CURRENCY_COP]=e.CURRENCY_SYMBOL_COP,e.$ID_TO_SYMBOL[e.CURRENCY_CNY]=e.CURRENCY_SYMBOL_CNY,e.instance=new e(t)),e.instance}}]),e}();function Ge(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(He,"instance",void 0),v()(He,"CURRENCY_CODE_USD","USD"),v()(He,"CURRENCY_CODE_EUR","EUR"),v()(He,"CURRENCY_CODE_GBP","GBP"),v()(He,"CURRENCY_CODE_AUD","AUD"),v()(He,"CURRENCY_CODE_JPY","JPY"),v()(He,"CURRENCY_CODE_CAD","CAD"),v()(He,"CURRENCY_CODE_NZD","NZD"),v()(He,"CURRENCY_CODE_HKD","HKD"),v()(He,"CURRENCY_CODE_SGD","SGD"),v()(He,"CURRENCY_CODE_MXN","MXN"),v()(He,"CURRENCY_CODE_DKK","DKK"),v()(He,"CURRENCY_CODE_NOK","NOK"),v()(He,"CURRENCY_CODE_MYR","MYR"),v()(He,"CURRENCY_CODE_TWD","TWD"),v()(He,"CURRENCY_CODE_THB","THB"),v()(He,"CURRENCY_CODE_ILS","ILS"),v()(He,"CURRENCY_CODE_CHF","CHF"),v()(He,"CURRENCY_CODE_BRL","BRL"),v()(He,"CURRENCY_CODE_RON","RON"),v()(He,"CURRENCY_CODE_PGK","PGK"),v()(He,"CURRENCY_CODE_INR","INR"),v()(He,"CURRENCY_CODE_MUR","MUR"),v()(He,"CURRENCY_CODE_CZK","CZK"),v()(He,"CURRENCY_CODE_DOP","DOP"),v()(He,"CURRENCY_CODE_ZAR","ZAR"),v()(He,"CURRENCY_CODE_SEK","SEK"),v()(He,"CURRENCY_CODE_PLN","PLN"),v()(He,"CURRENCY_CODE_PHP","PHP"),v()(He,"CURRENCY_CODE_TRY","TRY"),v()(He,"CURRENCY_CODE_AED","AED"),v()(He,"CURRENCY_CODE_ARS","ARS"),v()(He,"CURRENCY_CODE_RUB","RUB"),v()(He,"CURRENCY_CODE_XCD","XCD"),v()(He,"CURRENCY_CODE_BGN","BGN"),v()(He,"CURRENCY_CODE_HUF","HUF"),v()(He,"CURRENCY_CODE_CNY","CNY"),v()(He,"CURRENCY_CODE_COP","COP"),v()(He,"CURRENCY_FULL_NAME_USD","United States Dollar"),v()(He,"CURRENCY_FULL_NAME_EUR","Euro"),v()(He,"CURRENCY_FULL_NAME_GBP","United Kingdom Pound"),v()(He,"CURRENCY_FULL_NAME_AUD","Australia Dollar"),v()(He,"CURRENCY_FULL_NAME_JPY","Japan Yen"),v()(He,"CURRENCY_FULL_NAME_CAD","Canada Dollar"),v()(He,"CURRENCY_FULL_NAME_NZD","New Zealand Dollar"),v()(He,"CURRENCY_FULL_NAME_HKD","Hong Kong Dollar"),v()(He,"CURRENCY_FULL_NAME_SGD","Singapore Dollar"),v()(He,"CURRENCY_FULL_NAME_MXN","Mexico Peso"),v()(He,"CURRENCY_FULL_NAME_DKK","Denmark Krone"),v()(He,"CURRENCY_FULL_NAME_NOK","Norway Krone"),v()(He,"CURRENCY_FULL_NAME_MYR","Malaysia Ringgit"),v()(He,"CURRENCY_FULL_NAME_TWD","Taiwan New Dollar"),v()(He,"CURRENCY_FULL_NAME_THB","Thailand Baht"),v()(He,"CURRENCY_FULL_NAME_ILS","Israel Shekel"),v()(He,"CURRENCY_FULL_NAME_CHF","Switzerland Franc"),v()(He,"CURRENCY_FULL_NAME_BRL","Brazil Real"),v()(He,"CURRENCY_FULL_NAME_RON","Romania Leu"),v()(He,"CURRENCY_FULL_NAME_PGK","Papua New Guinea Kina"),v()(He,"CURRENCY_FULL_NAME_INR","Indian Rupee"),v()(He,"CURRENCY_FULL_NAME_MUR","Mauritian Rupee"),v()(He,"CURRENCY_FULL_NAME_CZK","Czech Republic Koruna"),v()(He,"CURRENCY_FULL_NAME_DOP","Dominican Republic Peso"),v()(He,"CURRENCY_FULL_NAME_ZAR","South Africa Rand"),v()(He,"CURRENCY_FULL_NAME_TRY","Turkey Lira"),v()(He,"CURRENCY_FULL_NAME_SEK","Sweden Krona"),v()(He,"CURRENCY_FULL_NAME_PLN","Poland Zloty"),v()(He,"CURRENCY_FULL_NAME_PHP","Philippines Peso"),v()(He,"CURRENCY_FULL_NAME_AED","United Arab Emirates Dirham"),v()(He,"CURRENCY_FULL_NAME_ARS","Argentina Peso"),v()(He,"CURRENCY_FULL_NAME_RUB","Russia Ruble"),v()(He,"CURRENCY_FULL_NAME_XCD","East Caribbean Dollar"),v()(He,"CURRENCY_FULL_NAME_BGN","Bulgaria Lev"),v()(He,"CURRENCY_FULL_NAME_HUF","Hungary Forint"),v()(He,"CURRENCY_FULL_NAME_CNY","Chinese Yuan"),v()(He,"CURRENCY_FULL_NAME_COP","Colombian Pesos"),v()(He,"CURRENCY_NAME_I18N_USD","payments_currency01"),v()(He,"CURRENCY_NAME_I18N_EUR","payments_currency02"),v()(He,"CURRENCY_NAME_I18N_GBP","payments_currency03"),v()(He,"CURRENCY_NAME_I18N_AUD","payments_currency04"),v()(He,"CURRENCY_NAME_I18N_JPY","payments_currency05"),v()(He,"CURRENCY_NAME_I18N_CAD","payments_currency06"),v()(He,"CURRENCY_NAME_I18N_NZD","payments_currency07"),v()(He,"CURRENCY_NAME_I18N_HKD","payments_currency08"),v()(He,"CURRENCY_NAME_I18N_SGD","payments_currency09"),v()(He,"CURRENCY_NAME_I18N_MXN","payments_currency10"),v()(He,"CURRENCY_NAME_I18N_DKK","payments_currency11"),v()(He,"CURRENCY_NAME_I18N_NOK","payments_currency13"),v()(He,"CURRENCY_NAME_I18N_MYR","payments_currency14"),v()(He,"CURRENCY_NAME_I18N_TWD","payments_currency15"),v()(He,"CURRENCY_NAME_I18N_THB","payments_currency16"),v()(He,"CURRENCY_NAME_I18N_ILS","payments_currency17"),v()(He,"CURRENCY_NAME_I18N_CHF","payments_currency18"),v()(He,"CURRENCY_NAME_I18N_BRL","payments_currency19"),v()(He,"CURRENCY_NAME_I18N_RON","payments_currency37"),v()(He,"CURRENCY_NAME_I18N_PGK","payments_currency22"),v()(He,"CURRENCY_NAME_I18N_INR","payments_currency23"),v()(He,"CURRENCY_NAME_I18N_MUR","payments_currency24"),v()(He,"CURRENCY_NAME_I18N_CZK","payments_currency25"),v()(He,"CURRENCY_NAME_I18N_DOP","payments_currency26"),v()(He,"CURRENCY_NAME_I18N_ZAR","payments_currency27"),v()(He,"CURRENCY_NAME_I18N_TRY","payments_currency28"),v()(He,"CURRENCY_NAME_I18N_SEK","payments_currency29"),v()(He,"CURRENCY_NAME_I18N_PLN","payments_currency30"),v()(He,"CURRENCY_NAME_I18N_PHP","payments_currency38"),v()(He,"CURRENCY_NAME_I18N_AED","payments_currency32"),v()(He,"CURRENCY_NAME_I18N_ARS","payments_currency33"),v()(He,"CURRENCY_NAME_I18N_RUB","payments_currency34"),v()(He,"CURRENCY_NAME_I18N_XCD","payments_currency36"),v()(He,"CURRENCY_NAME_I18N_BGN","payments_currency39"),v()(He,"CURRENCY_NAME_I18N_HUF","payments_currency40"),v()(He,"CURRENCY_NAME_I18N_CNY","payments_currency41"),v()(He,"CURRENCY_NAME_I18N_COP","payments_currency42"),v()(He,"CURRENCY_SYMBOL_USD","$"),v()(He,"CURRENCY_SYMBOL_EUR","\u20ac"),v()(He,"CURRENCY_SYMBOL_GBP","\xa3"),v()(He,"CURRENCY_SYMBOL_AUD","$"),v()(He,"CURRENCY_SYMBOL_JPY","\xa5"),v()(He,"CURRENCY_SYMBOL_CAD","$"),v()(He,"CURRENCY_SYMBOL_NZD","$"),v()(He,"CURRENCY_SYMBOL_HKD","$"),v()(He,"CURRENCY_SYMBOL_SGD","$"),v()(He,"CURRENCY_SYMBOL_MXN","$"),v()(He,"CURRENCY_SYMBOL_DKK","Kr."),v()(He,"CURRENCY_SYMBOL_NOK","kr"),v()(He,"CURRENCY_SYMBOL_MYR","RM"),v()(He,"CURRENCY_SYMBOL_TWD","NT$"),v()(He,"CURRENCY_SYMBOL_THB","\u0e3f"),v()(He,"CURRENCY_SYMBOL_ILS","\u20aa"),v()(He,"CURRENCY_SYMBOL_CHF","SFr."),v()(He,"CURRENCY_SYMBOL_BRL","R$"),v()(He,"CURRENCY_SYMBOL_RON","lei"),v()(He,"CURRENCY_SYMBOL_PGK","K"),v()(He,"CURRENCY_SYMBOL_INR","\u20b9"),v()(He,"CURRENCY_SYMBOL_MUR","\u20a8"),v()(He,"CURRENCY_SYMBOL_CZK","K\u010d"),v()(He,"CURRENCY_SYMBOL_DOP","RD$"),v()(He,"CURRENCY_SYMBOL_ZAR","R"),v()(He,"CURRENCY_SYMBOL_SEK","kr"),v()(He,"CURRENCY_SYMBOL_PLN","z\u0142"),v()(He,"CURRENCY_SYMBOL_PHP","\u20b1"),v()(He,"CURRENCY_SYMBOL_TRY","\u20ba"),v()(He,"CURRENCY_SYMBOL_AED","\u062f.\u0625"),v()(He,"CURRENCY_SYMBOL_ARS","$"),v()(He,"CURRENCY_SYMBOL_RUB","\u20bd"),v()(He,"CURRENCY_SYMBOL_XCD","$"),v()(He,"CURRENCY_SYMBOL_BGN","\u043b\u0432"),v()(He,"CURRENCY_SYMBOL_HUF","Ft"),v()(He,"CURRENCY_SYMBOL_CNY","\uffe5"),v()(He,"CURRENCY_SYMBOL_COP","COP"),v()(He,"$SUPPORTED_CURRENCIES",[He.CURRENCY_CODE_ARS,He.CURRENCY_CODE_AUD,He.CURRENCY_CODE_BRL,He.CURRENCY_CODE_BGN,He.CURRENCY_CODE_CAD,He.CURRENCY_CODE_CNY,He.CURRENCY_CODE_COP,He.CURRENCY_CODE_CZK,He.CURRENCY_CODE_DKK,He.CURRENCY_CODE_DOP,He.CURRENCY_CODE_XCD,He.CURRENCY_CODE_EUR,He.CURRENCY_CODE_HKD,He.CURRENCY_CODE_HUF,He.CURRENCY_CODE_INR,He.CURRENCY_CODE_ILS,He.CURRENCY_CODE_JPY,He.CURRENCY_CODE_PGK,He.CURRENCY_CODE_MYR,He.CURRENCY_CODE_MUR,He.CURRENCY_CODE_MXN,He.CURRENCY_CODE_NZD,He.CURRENCY_CODE_NOK,He.CURRENCY_CODE_PHP,He.CURRENCY_CODE_PLN,He.CURRENCY_CODE_GBP,He.CURRENCY_CODE_RON,He.CURRENCY_CODE_RUB,He.CURRENCY_CODE_SGD,He.CURRENCY_CODE_ZAR,He.CURRENCY_CODE_CHF,He.CURRENCY_CODE_SEK,He.CURRENCY_CODE_TWD,He.CURRENCY_CODE_THB,He.CURRENCY_CODE_TRY,He.CURRENCY_CODE_AED,He.CURRENCY_CODE_USD]),v()(He,"CURRENCY_USD",1),v()(He,"CURRENCY_EUR",2),v()(He,"CURRENCY_GBP",3),v()(He,"CURRENCY_AUD",4),v()(He,"CURRENCY_JPY",5),v()(He,"CURRENCY_CAD",6),v()(He,"CURRENCY_NZD",7),v()(He,"CURRENCY_HKD",8),v()(He,"CURRENCY_SGD",9),v()(He,"CURRENCY_MXN",10),v()(He,"CURRENCY_DKK",11),v()(He,"CURRENCY_NOK",13),v()(He,"CURRENCY_MYR",14),v()(He,"CURRENCY_TWD",15),v()(He,"CURRENCY_THB",16),v()(He,"CURRENCY_ILS",17),v()(He,"CURRENCY_CHF",18),v()(He,"CURRENCY_BRL",19),v()(He,"CURRENCY_RON",20),v()(He,"CURRENCY_PGK",22),v()(He,"CURRENCY_INR",23),v()(He,"CURRENCY_MUR",24),v()(He,"CURRENCY_CZK",25),v()(He,"CURRENCY_DOP",26),v()(He,"CURRENCY_ZAR",27),v()(He,"CURRENCY_TRY",28),v()(He,"CURRENCY_SEK",29),v()(He,"CURRENCY_PLN",30),v()(He,"CURRENCY_PHP",31),v()(He,"CURRENCY_AED",32),v()(He,"CURRENCY_ARS",33),v()(He,"CURRENCY_RUB",34),v()(He,"CURRENCY_XCD",36),v()(He,"CURRENCY_BGN",37),v()(He,"CURRENCY_HUF",38),v()(He,"CURRENCY_CNY",39),v()(He,"CURRENCY_COP",40),v()(He,"$ID_TO_ISO_CODE",{}),v()(He,"$ID_TO_SYMBOL",{}),v()(He,"$ISO_CODE_TO_ID",{}),v()(He,"$ISO_CODE_TO_FULL_NAME",{}),v()(He,"$ISO_CODE_TO_NAME_I18N",{});var We=function(e){u()(n,e);var t=Ge(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"priceInput",void 0),v()(A()(r),"priceContainer",void 0),v()(A()(r),"currencyLabel",void 0);var a=r.getHash();return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","price-".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","price-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","price-".concat(a,"-instr-acc")),r.priceInput=document.createElement("input"),r.priceInput.setAttribute("type","text"),r.priceInput.setAttribute("data-role","i123-input"),r.priceInput.setAttribute("data-no-theme",""),r.priceInput.setAttribute("data-index",String("".concat(n.INDEX_FLOAT_PART,",").concat(n.INDEX_FIXED_PART,",").concat(n.INDEX_DECIMAL_PART))),r.currencyLabel=document.createElement("span"),r.currencyLabel.setAttribute("data-role","currency-code"),r.currencyLabel.setAttribute("id","price-".concat(a,"-currency-acc")),r.priceContainer=document.createElement("div"),r.priceContainer.setAttribute("data-role","price-container"),r.priceContainer.setAttribute("data-ui-role","ui-element"),r.priceContainer.appendChild(r.currencyLabel),r.priceContainer.appendChild(r.priceInput),r.priceInput.setAttribute("aria-labelledby","price-".concat(a,"-acc ")+"price-".concat(a,"-error-acc ")+"price-".concat(a,"-instr-acc ")+"price-".concat(a,"-currency-acc")),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_PRICE}},{key:"getElementName",value:function(){return"Price"}},{key:"updateCurrencyLabel",value:function(){var e=this.getProperty("options.intendedCurrencyISOCode")||He.CURRENCY_CODE_USD;this.currencyLabel.textContent=e}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateCurrencyLabel(),this.updateShowInstructionsOnClick(),this.updateHiddenAttribute(),this.clearValue(),this.updatePlaceholderValue(),this.addEventListeners(),this.synchronizeValue()}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.priceContainer,width:O.I.FULL}]}]}},{key:"onValueChanged",value:function(){var e=this.priceInput.value,t=this.getProperty("options.hideDecimals"),i=[],r=null,a=parseFloat(e),o=parseInt(String(a));if(""!==e)if(isFinite(a))if(a<0)this.addError(g.a.ERR_NEGATIVE_PRICE,this.getForm().getEngine().getI18n().translateText("textdef_224")||"Negative price is not allowed"),i.push(g.a.ERR_NEGATIVE_PRICE);else if(!t&&/\.[\d]{3,}(.*)?$/.test(e))this.addError(g.a.ERR_PRICE_TOO_MANY_DECIMALS,this.getForm().getEngine().getI18n().translateText("textdef_219")||"Maximum 2 decimals are allowed"),i.push(g.a.ERR_PRICE_TOO_MANY_DECIMALS);else{var s=(e=e.replace(/^[0]+/,"")).indexOf(".")>-1?e.replace(/\.\d{1}$/,(function(e){return"".concat(e,"0")})).replace(/\.$/,".00").replace(".",""):"".concat(e,"00");(r=Math.round(100*a))>=100&&(r>n.MAX_STORED_VALUE||String(r).length!==s.length)?(this.addError(g.a.ERR_NUMBER_TOO_BIG,this.getForm().getEngine().getI18n().translateText("textdef_73",String(n.MAX_INPUT_VALUE_STRING))||"The value you have provided is too big"),i.push(g.a.ERR_NUMBER_TOO_BIG)):t&&a!==o&&(this.addError(g.a.ERR_INTEGER_VALUE_EXPECTED,"".concat(this.getForm().getEngine().getI18n().translateText("textdef_5"),": ").concat(this.getForm().getEngine().getI18n().translateText("textdef_223"))||"Please input an integer number"),i.push(g.a.ERR_INTEGER_VALUE_EXPECTED))}else this.addError(g.a.ERR_NUMBER_EXPECTED,"".concat(this.getForm().getEngine().getI18n().translateText("textdef_5"),": ").concat(this.getForm().getEngine().getI18n().translateText("textdef_47"))||"Please input a number"),i.push(g.a.ERR_NUMBER_EXPECTED);for(var l=0,c=[g.a.ERR_INTEGER_VALUE_EXPECTED,g.a.ERR_PRICE_TOO_MANY_DECIMALS,g.a.ERR_NUMBER_EXPECTED,g.a.ERR_NEGATIVE_PRICE,g.a.ERR_NUMBER_TOO_BIG],u=c.length;l<u;l++)-1===i.indexOf(c[l])&&this.removeError(c[l]);i.length?(this.setProperty("value.chosenValueInMinimalPossibleRepresentation",null),this.setProperty("value.chosenCurrency",null)):(this.setProperty("value.chosenCurrency",this.getProperty("options.intendedCurrencyISOCode")),this.setProperty("value.chosenValueInMinimalPossibleRepresentation",r)),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"addEventListeners",value:function(){var e=this;this.priceInput.addEventListener("keydown",(function(t){var n=e.priceInput.value,i=t.keyCode||t.charCode,r=!e.getProperty("options.hideDecimals"),a=n.indexOf(".")>-1;if(t.shiftKey&&i!==V.a.KEY_TAB)return t.preventDefault(),void t.stopPropagation();switch(i){case V.a.KEY_0:case V.a.KEY_1:case V.a.KEY_2:case V.a.KEY_3:case V.a.KEY_4:case V.a.KEY_5:case V.a.KEY_6:case V.a.KEY_7:case V.a.KEY_8:case V.a.KEY_9:if(t.shiftKey)return t.preventDefault(),void t.stopPropagation();case V.a.KEY_PAD_0:case V.a.KEY_PAD_1:case V.a.KEY_PAD_2:case V.a.KEY_PAD_3:case V.a.KEY_PAD_4:case V.a.KEY_PAD_5:case V.a.KEY_PAD_6:case V.a.KEY_PAD_7:case V.a.KEY_PAD_8:case V.a.KEY_PAD_9:case V.a.KEY_BACKSPACE:case V.a.KEY_DELETE:case V.a.KEY_LEFT:case V.a.KEY_RIGHT:case V.a.KEY_HOME:case V.a.KEY_END:case V.a.KEY_TAB:break;case V.a.KEY_UP:isFinite(parseFloat(e.priceInput.value))&&!e.readOnly&&(e.priceInput.value=String(parseFloat(n)+1));break;case V.a.KEY_DOWN:isFinite(parseFloat(e.priceInput.value))&&parseFloat(e.priceInput.value)-1>=0&&!e.readOnly&&(e.priceInput.value=String(parseFloat(n)-1));break;case V.a.KEY_DOT:case V.a.KEY_PAD_DOT:if(r&&!a)return;default:t.stopPropagation(),t.preventDefault()}})),function(e,t){e(t.priceInput).on("focus",(function(){e(t.rootNode).find("div[data-role=price-container]").attr("data-is-focused-child-element","1")})).on("blur",(function(){e(t.rootNode).find("div[data-role=price-container]").removeAttr("data-is-focused-child-element")}))}(L.a.getJQuery(),this)}},{key:"enumerateIndexes",value:function(){return[n.INDEX_FLOAT_PART,n.INDEX_FIXED_PART,n.INDEX_DECIMAL_PART]}},{key:"getIntPartAsString",value:function(){var e=this.getProperty("value.chosenValueInMinimalPossibleRepresentation");return null===e?null:(e/100).toFixed(0)}},{key:"setIntPartFromString",value:function(e){var t=parseInt(e);if(isFinite(t)&&t>=0){var n=this.getProperty("value.chosenValueInMinimalPossibleRepresentation");if(null===n)n=100*t;else n=100*t+n%100;this.setProperty("value.chosenValueInMinimalPossibleRepresentation",n),this.synchronizeValue()}else console.warn("Invalid int part value: ".concat(JSON.stringify(e),": sint >=0 expected!"))}},{key:"getDecimalPartAsString",value:function(){var e=this.getProperty("value.chosenValueInMinimalPossibleRepresentation");return this.getProperty("options.hideDecimals")?"":null!==e&&isFinite(e)?String(e%100):""}},{key:"setDecimalPartAsString",value:function(e){var t=this.getProperty("value.chosenValueInMinimalPossibleRepresentation");if(!this.getProperty("options.hideDecimals")){var n=null===e?0:parseInt(e);isFinite(n)&&n>=0&&n<100?(t=null===t?n:100*Math.floor(t/100)+n,this.setProperty("value.chosenValueInMinimalPossibleRepresentation",t),this.synchronizeValue()):console.warn("Invalid decimal part value: ".concat(JSON.stringify(e),": sint >=0 < 100 expected!"))}}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case n.INDEX_FLOAT_PART:return{targetPropertyFQN:"value.asFloat",type:"number",optional:!0};case n.INDEX_FIXED_PART:return{targetPropertyFQN:"value.fixedPart",type:"string",optional:!0};case n.INDEX_DECIMAL_PART:return{targetPropertyFQN:"value.decimalPart",type:"string",optional:!0};default:return null}}},{key:"updatePlaceholderValue",value:function(){var e=this.getProperty("options.hideDecimals");this.priceInput.placeholder=e?"0":"0.00"}},{key:"setupDefaults",value:function(){this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_price_name"));var e=this.getForm().getEngine().getLoader().getLoaderDependency(O.M.DEFAULT_USER_PREFERENCES);return e&&(this.setProperty("options.intendedCurrencyISOCode",e.currency),this.updateCurrencyLabel()),this.updateLabelText(),this}},{key:"synchronizeValue",value:function(){var e=this.getProperty("value.chosenValueInMinimalPossibleRepresentation"),t=parseInt(String(e/100),10),n=e%100;if(null===e)S.a.synchronizeControlValue(this.priceInput,"");else{var i=this.getProperty("options.hideDecimals"),r=this.priceInput.value,a=String(t)+(i?"":".".concat(String(n<10?"0".concat(n):n)));parseFloat(r)!==parseFloat(a)&&(this.priceInput.value=a)}}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"getValueAsFloat",value:function(){return parseFloat(((this.getProperty("value.chosenValueInMinimalPossibleRepresentation")||0)/100).toFixed(2))}},{key:"setValueFromFloat",value:function(e){this.setProperty("value.chosenValueInMinimalPossibleRepresentation",Math.round(100*(e||0)))}},{key:"onReset",value:function(){null!==this.getProperty("value.chosenValueInMinimalPossibleRepresentation")&&(this.setProperty("value.chosenValueInMinimalPossibleRepresentation",null),S.a.synchronizeControlValue(this.priceInput,""),this.getForm().getEngine().getJQuery()(this.priceInput).trigger("input"))}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),e}},{key:"clearValue",value:function(){this.setProperty("value.chosenValueInMinimalPossibleRepresentation",null)}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_PRICE,name:"Price",isContainer:!1,category:O.w.CALCULATION,keywords:"price number",icon:"i123-editor_field_price",isVirtual:!1,i18nName:"edt_UI_control_type_price_name",i18nKeywords:"edt_UI_control_type_price_keywords",index:30,accessibilityFields:O.v.ERROR_NODE,title:i.a.translationService.translateText("editorFieldTooltip_price")}}}]),n}(i.a);v()(We,"MAX_STORED_VALUE",900719925474999),v()(We,"MAX_INPUT_VALUE_STRING","9007199254749.99"),v()(We,"INDEX_FLOAT_PART",0),v()(We,"INDEX_FIXED_PART",1),v()(We,"INDEX_DECIMAL_PART",2),v()(We,"attributes",{}),v()(We,"runtime",null),v()(We,"nodeName","price");var je=n(103);function Ke(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var ze=function(e){u()(n,e);var t=Ke(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"choices",[]),v()(A()(r),"clearableButton",void 0);var a=r.getHash();return r.rootNode.setAttribute("aria-labelledby","radio-".concat(a,"-acc ")+"radio-".concat(a,"-clearable-button-acc ")+"radio-".concat(a,"-error-acc ")+"radio-".concat(a,"-instr-acc")),r.hasAccessibilityEnabled?(r.labelDOMNode=document.createElement("div"),r.labelDOMNode.classList.add("control__label")):r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","radio-".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","radio-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","radio-".concat(a,"-instr-acc")),r.clearableButton=document.createElement("span"),r.clearableButton.setAttribute("data-role","clear-value"),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_RADIO}},{key:"getElementName",value:function(){return"Radio"}},{key:"clearValue",value:function(){!function(e,t){e(t.rootNode).find("input[type=radio]").each((function(){this.checked&&(e(this).trigger("click"),this.checked=!1)}))}(this.getForm().getEngine().getJQuery(),this),this.onValueChanged()}},{key:"updateChoices",value:function(){if(this.hasProperty("choices.values")){var e,t,n,i,r,a,o,s=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),l=this.getHash(),c=this.getProperty("options.showNumberOfChoicesLeft"),u=s.some((function(e){return e.image})),d=this.getProperty("choices.useButtonLikeChoices");u||d?this.rootNode.classList.add("button-choices"):this.rootNode.classList.remove("button-choices"),c?this.rootNode.setAttribute("data-show-number-of-choices","1"):this.rootNode.removeAttribute("data-show-number-of-choices");for(var p=0,h=s.length;p<h;p++)s[p].index=p;this.hasProperty("options.randomizeOrder")&&this.getProperty("options.randomizeOrder")&&S.a.shuffle(s),this.hasProperty("choices.allowOther")&&this.getProperty("choices.allowOther")&&s.push({text:"Other...",isOther:!0,index:-1});for(var _=0,g=this.choices.length;_<g;_++)this.choices[_].parentNode&&this.choices[_].parentNode.removeChild(this.choices[_]);this.choices.splice(0,this.choices.length);for(var m=0,f=s.length;m<f;m++){(i=document.createElement("div")).setAttribute("data-role","choice"),(u||d)&&i.classList.add("choice-box","w-auto"),(e=document.createElement("input")).setAttribute("type","radio"),e.setAttribute("id","".concat(l,"_").concat(m)),e.setAttribute("name","c_".concat(l)),e.setAttribute("value",s[m].text),e.setAttribute("data-index",String(s[m].index)),e.setAttribute("data-role","i123-input"),this.hasAccessibilityEnabled&&(e.setAttribute("aria-hidden","true"),e.setAttribute("tabIndex","-1")),s[m].isOther&&e.setAttribute("data-is-other","1"),(t=document.createElement("label")).setAttribute("data-role","choice"),t.setAttribute("id","radio-".concat(l).concat(m)),t.classList.add("choice-box__label");var E=document.createElement("div");if(E.classList.add("choice-box__image-container"),!s[m].isOther&&s[m].image){var y=document.createElement("img");y.setAttribute("src",s[m].image),y.setAttribute("alt",s[m].text),y.classList.add("choice-box__image"),E.appendChild(y)}else E.classList.add("choice-box__image-container--no-image");if(u&&t.appendChild(E),t.appendChild(e),s[m].isDefault&&(e.checked=!0,t.setAttribute("aria-checked","true"),i.setAttribute("data-is-checked","1")),this.hasAccessibilityEnabled?(n=document.createElement("i")).classList.add("radio-icon"):(n=document.createElement("label")).setAttribute("for","".concat(l,"_").concat(m)),n.setAttribute("data-role","radio"),n.setAttribute("aria-labelledby","radio-".concat(l).concat(m)),n.setAttribute("role","radio"),t.appendChild(n),i.appendChild(t),s[m].isOther)(r=document.createElement("input")).setAttribute("data-role","other"),r.setAttribute("type","text"),r.setAttribute("data-size","full"),(o=document.createElement("span")).innerHTML=s[m].text||"",o.setAttribute("data-i18n-text","textdef_15"),t.appendChild(o),t.setAttribute("data-is-other","1"),i.appendChild(r);else S.a.isImageURL(s[m].text||"")?((a=document.createElement("img")).setAttribute("src",s[m].text),a.setAttribute("data-choice-is-image","1"),t.appendChild(a)):((o=document.createElement("span")).setAttribute("data-role","option-text"),o.classList.add("choice-box__option-text"),o.innerHTML=s[m].text||"",t.appendChild(o));this.setupNumberOfTimesAnOptionCanBeChosen(s[m],c,t,i,e),this.choices.push(i)}if(this.isAttached()){this.rendererType=void 0;var T=je.a.getSuggestedRenderer(this,this.getForm().getLabelPlacement(),this.getForm().getInstructionsPlacement());this.setRendererType(T)}}}},{key:"setupNumberOfTimesAnOptionCanBeChosen",value:function(e,t,n,i,r){if(e.numberOfTimesThisOptionCanBeChosen&&null!==e.numberOfTimesThisOptionCanBeChosen&&e.numberOfTimesThisOptionCanBeChosen>=-1){var a=~~e.numberOfTimesThisOptionHasBeenChosen;a<0&&(a=0);var o=e.numberOfTimesThisOptionCanBeChosen-a;if(t){var s=document.createElement("span");s.setAttribute("data-role","label-info");var l=document.createElement("span");s.appendChild(document.createTextNode("".concat(String(o<0||0===o?0:o)," "))),l.textContent=1===o?"choice left":"choices left",l.setAttribute("data-i18n-text",1===o?"textdef_173":"textdef_174"),s.appendChild(l),n.appendChild(s)}(this.getForm().getEngine().getLoader().getLoaderType()===O.B.EDIT||this.getForm().getEngine().getLoader().getLoaderType()===O.B.VIEW&&this.getForm().getEngine().getLoader().getViewFormContext()!==O.vb.EDIT_SUBMISSION)&&o<1&&(n.setAttribute("data-disabled","1"),i.setAttribute("data-disabled","1"),r.setAttribute("disabled","true"),r.setAttribute("data-disabled","1"))}}},{key:"updateSideBySideAttribute",value:function(){this.getProperty("layout.isSideBySide")?this.rootNode.setAttribute("data-is-side-by-side-layout","1"):this.rootNode.removeAttribute("data-is-side-by-side-layout")}},{key:"updateClearableOption",value:function(){this.getProperty("options.clearable")?this.labelDOMNode.appendChild(this.clearableButton):this.clearableButton.parentNode&&this.clearableButton.parentNode.removeChild(this.clearableButton)}},{key:"getNumberOfColumns",value:function(){var e=this.hasProperty("layout.columns")?~~this.getProperty("layout.columns"):1;return e<1&&(e=1),e>4&&(e=4),e}},{key:"getIsSideBySideLayout",value:function(){return!!this.hasProperty("layout.isSideBySide")&&!!this.getProperty("layout.isSideBySide")}},{key:"getIsDirectionVertical",value:function(){return!!this.hasProperty("layout.direction")&&"vertical"===this.getProperty("layout.direction")}},{key:"getSideBySideChoicesLayoutRows",value:function(e){for(var t=[],n={inputs:[]},i=0,r=e;i<r;i++)n.inputs.push({width:null,input:this.choices[i]});return t.push(n),t}},{key:"getChoiceWidth",value:function(e){switch(e){case 2:return O.I.HALF;case 3:return O.I.THIRD;case 4:return O.I.QUARTER;case 1:default:return O.I.FULL}}},{key:"getVerticalChoicesLayoutRows",value:function(e,t){var n=Math.ceil(e/t),i=0,r=this.getChoiceWidth(t),a=[];n!==~~n&&(n=1+~~n);for(var o=0,s=e;o<s;o++)a[i]=a[i]||{inputs:[]},a[i].inputs.push({width:r,input:this.choices[o]}),++i>=n&&(i=0);return a}},{key:"getInputObject",value:function(e,t){switch(e){case 2:return{width:O.I.HALF,input:t};case 3:return{width:O.I.THIRD,input:t};case 4:return{width:O.I.QUARTER,input:t};case 1:default:return{width:O.I.FULL,input:t}}}},{key:"getHorizontalChoicesLayoutRows",value:function(e,t){for(var n=null,i=0,r=[],a=0,o=e;a<o;a++)null===n&&(n={inputs:[]},r.push(n)),n.inputs.push(this.getInputObject(t,this.choices[a])),++i>=t&&(i=0,a<o-1&&(n={inputs:[]},r.push(n)));return r}},{key:"getInputDOMNodes",value:function(){var e=this.getNumberOfColumns(),t=this.getIsSideBySideLayout(),n=this.getIsDirectionVertical(),i=this.choices.length;switch(!0){case t:return this.getSideBySideChoicesLayoutRows(i);case n:if(!this.getForm().getEngine().getTheme().isMobileLayout())return this.getVerticalChoicesLayoutRows(i,e)}return this.getHorizontalChoicesLayoutRows(i,e)}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateChoices(),this.updateShowInstructionsOnClick(),this.updateSideBySideAttribute(),this.updateHiddenAttribute(),this.updateClearableOption(),this.getForm().getEngine().getLoader().getLoaderType()===O.B.VIEW&&this.onValueChanged()}},{key:"onValueChanged",value:function(){var e,t,n,i,r,a=null,o=null,s=this.getValue().index;this.choices.forEach((function(e){return e.setAttribute("data-is-checked","0")}));for(var l=0,c=this.choices.length;l<c;l++)if(e=this.choices[l].querySelector("input[type=radio]"),r=this.choices[l].querySelector("[data-role=radio]"),e&&e.checked){if(this.choices[l].setAttribute("data-is-checked","1"),r.setAttribute("aria-checked","true"),!e.hasAttribute("data-is-other")){a=e.value,o=parseInt(e.getAttribute("data-index"));break}if(t=this.choices[l].querySelector("input[type=text][data-role=other]")){a=t.value,o=-1;break}}else r&&r.hasAttribute("aria-checked")&&r.removeAttribute("aria-checked");null!==(n=this.choices[this.choices.length-1]||null)&&n.querySelector("label [data-is-other]")&&(e=n.querySelector("input[type=radio]"))&&(e.checked?n.setAttribute("data-is-checked","1"):n.removeAttribute("data-is-checked")),this.setProperty("value.value",a),this.setProperty("value.index",i=-1===o?this.choices.length-1:~~o),this.isAttached()&&(i!==s&&this.getForm().trigger("radio-uncheck",this,s),this.getForm().trigger("change",this))}},{key:"getPropertyDescriptorByInputIndex",value:function(e){var t,n=this.getProperty("choices.values")||[],i=n.length;return e<i?{element:this,targetPropertyFQN:"value.value",optional:!1,type:"string",inputIndex:e,parser:(t=e,function(e){return e===n[t].text})}:e>i?null:this.getProperty("choices.allowOther")?{element:this,targetPropertyFQN:"value.value",optional:!1,type:"string",inputIndex:e}:null}},{key:"synchronizeValue",value:function(){var e,t=this.getProperty("choices.values"),n=this.getProperty("choices.allowOther"),i=this.getProperty("value.value"),r=this.getProperty("value.index");if(t&&t.length)for(var a=0,o=t.length;a<o;a++)if(t[a].text===i&&r===a)for(var s=0,l=this.choices.length-~~n;s<l;s++)if(e=this.choices[s].querySelector("input[type=radio]"),parseInt(e.getAttribute("data-index"))===r)return void(e.checked||(e.checked=!0));if(n&&null===r)try{var c=this.choices[this.choices.length-1];c.setAttribute("data-is-checked","1"),c.querySelector("input[type=radio]").checked=!!i,c.querySelector("input[type=text]").value=String(i||""),c.querySelector("label[data-role=radio]").setAttribute("aria-checked","true")}catch(u){console.error(u)}}},{key:"isNumberOfTimesAnOptionCanBeChosen",value:function(){for(var e=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),t=0,n=e.length;t<n;t++)if(e[t].numberOfTimesThisOptionCanBeChosen)return!0;return!1}},{key:"setIsNumberOfTimesAnOptionCanBeChosen",value:function(e){for(var t=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),n=0,i=t.length;n<i;n++)e?void 0!==t[n].numberOfTimesThisOptionCanBeChosen&&null!==t[n].numberOfTimesThisOptionCanBeChosen||(t[n].numberOfTimesThisOptionCanBeChosen=0):t[n].numberOfTimesThisOptionCanBeChosen=null;this.setProperty("choices.values",t)}},{key:"getChoicesValues",value:function(){return JSON.parse(JSON.stringify(this.getProperty("choices.values")||[]))}},{key:"setChoicesValues",value:function(e){e&&Object(H.a)(e,(function(e){return e.text=e.text.trim()})),this.setProperty("choices.values",e)}},{key:"onReset",value:function(){this.updateChoices(),this.onValueChanged()}},{key:"setupDefaults",value:function(){var e=this;return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_radio_name")),this.setProperty("choices.useButtonLikeChoices",!0),this.updateLabelText(),setTimeout((function(){return e.updateChoices()}),100),this}},{key:"setupI18n",value:function(){var e=this,t=this.getId();if(t){for(var i=0,r=this.choices.length;i<r;i++){var a=this.choices[i].querySelector("input[type=radio][data-index]");if(a){var o=~~a.getAttribute("data-index"),s=this.choices[i].querySelector("span[data-role=option-text]");s&&(s.setAttribute("data-i18n-html","control_label_".concat(t,"_choice_").concat(o)),s.setAttribute("data-skip-markdown","true"))}}setTimeout((function(){return e.updateClearableOption()}),30)}return y()(_()(n.prototype),"setupI18n",this).call(this)}},{key:"getInputDOMNodeAtIndex",value:function(e){return null===e?null:this.rootNode.querySelector('input[type=radio][data-index="'.concat(e,'"]'))}},{key:"getChoicesDOMNodes",value:function(){return this.choices}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"updateAccessibilityTabIndexes",value:function(){if(y()(_()(n.prototype),"updateAccessibilityTabIndexes",this).call(this),this.hasAccessibilityEnabled){var e=document.createElement("span");e.appendChild(document.createTextNode("Clear options")),e.style.display="none",this.clearableButton.appendChild(e),this.clearableButton.setAttribute("aria-labelledby","radio-".concat(this.getHash(),"-clearable-button-acc")),this.clearableButton.tabIndex=0}else this.clearableButton.removeAttribute("tabindex")}},{key:"enumerateTranslations",value:function(){var e=[],t=(this.getForm().getEngine().getI18n(),this.getProperty("label.labelText")||""),n=this.getProperty("instructions.text")||"";t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n});for(var i=this.getProperty("choices.values")||[],r=0,a=i.length;r<a;r++)i[r].text&&e.push({key:"control_label_".concat(this.getId(),"_choice_").concat(r),sourceText:i[r].text});return e}},{key:"cloneNode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return y()(_()(n.prototype),"cloneNode",this).call(this,e,t)}},{key:"emulateUserInput",value:function(){var e=this.getForm().getEngine().getJQuery();this.choices.forEach((function(t){var n=t.querySelector("input[type=radio]");(null===n||void 0===n?void 0:n.checked)&&e(n).trigger("click")}))}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_RADIO,name:"Radio",isContainer:!1,category:O.w.ESSENTIALS,keywords:"single choice radio radios multiple choices",icon:"i123-single_choice",isVirtual:!1,i18nName:"edt_UI_control_type_radio_name",i18nKeywords:"edt_UI_control_type_radio_keywords",index:30,accessibilityFields:O.v.ROOT_NODE+O.v.ERROR_NODE+O.v.OTHER,title:i.a.translationService.translateText("editorFieldTooltip_singleChoice")}}}]),n}(i.a);function Xe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(ze,"attributes",{}),v()(ze,"runtime",null),v()(ze,"nodeName","radio");var Ze=function(e){u()(n,e);var t=Xe(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_SEPARATOR}},{key:"getElementName",value:function(){return"Separator"}},{key:"setRendererType",value:function(e){}},{key:"getMinColspan",value:function(){return 0}},{key:"getPropertyDescriptorByInputIndex",value:function(e){return null}},{key:"onReset",value:function(){}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"enumerateTranslations",value:function(){return[]}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_SEPARATOR,name:"Separator",isContainer:!1,category:"basic",keywords:"separator space blank empty",icon:"i123-single_choice",isVirtual:!1,index:99999,accessibilityFields:O.v.NONE}}}]),n}(i.a);v()(Ze,"attributes",{}),v()(Ze,"runtime",null),v()(Ze,"nodeName","separator");var qe=n(54);function Je(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Qe=function(e){u()(n,e);var t=Je(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"canvasNode",void 0),v()(A()(r),"textBaseline",void 0),v()(A()(r),"clearButton",void 0),v()(A()(r),"fakeInputNode",void 0),v()(A()(r),"tainted",!1),v()(A()(r),"warningMessageRegardingLoosingSignature",void 0),v()(A()(r),"pictureWithLoadedTaintedSignature",void 0),v()(A()(r),"signatureValueAsString",null);var a=r.getHash();return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","signature-".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","signature-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","signature-".concat(a,"-instr-acc")),r.canvasNode=document.createElement("canvas"),r.textBaseline=document.createElement("div"),r.textBaseline.setAttribute("data-role","text-baseline"),r.clearButton=document.createElement("a"),r.clearButton.setAttribute("data-role","clear-signature"),r.clearButton.textContent="Clear",r.clearButton.style.display="none",r.clearButton.setAttribute("data-i18n-text","textdef_218"),r.clearButton.setAttribute("id","signature-".concat(a,"-clear-button-acc")),r.fakeInputNode=document.createElement("div"),r.fakeInputNode.setAttribute("data-role","signature-container"),r.fakeInputNode.appendChild(r.canvasNode),r.fakeInputNode.appendChild(r.textBaseline),r.fakeInputNode.appendChild(r.clearButton),e.getEngine().getLoader().getLoaderType()===O.B.VIEW&&r.init(),r.fakeInputNode.setAttribute("aria-labelledby","signature-".concat(a,"-acc ")+"signature-".concat(a,"-clear-button-acc ")+"signature-".concat(a,"-error-acc ")+"signature-".concat(a,"-instr-acc")),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_SIGNATURE}},{key:"getElementName",value:function(){return"Signature"}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateRequiredState(),this.updateInstructionsText(),this.updateShowInstructionsOnClick(),this.clearValue(),this.updateHiddenAttribute(),this.synchronizeValue(),this.onReadonlyStateChanged()}},{key:"getSupportedValidators",value:function(){var e=this.getForm().getEngine().getValidator();return[e.getValidatorById(j.a.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_EXTRA_LOW),e.getValidatorById(j.a.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_LOW),e.getValidatorById(j.a.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_AVERAGE),e.getValidatorById(j.a.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_HIGH)]}},{key:"getInputDOMNodes",value:function(){var e=this.signatureValueAsString,t="string"===typeof e&&/^data:/.test(e);return this.tainted?[{inputs:[{width:O.I.FULL,input:t?this.fakeInputNode:this.warningMessageRegardingLoosingSignature}]}]:[{inputs:[{width:O.I.FULL,input:this.fakeInputNode}]}]}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"any",optional:!0};default:return null}}},{key:"setRendererType",value:function(e){switch(e){case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD:case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL:case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:y()(_()(n.prototype),"setRendererType",this).call(this,e);break;case O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD:case O.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD:y()(_()(n.prototype),"setRendererType",this).call(this,O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD);break;case O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL:case O.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL:y()(_()(n.prototype),"setRendererType",this).call(this,O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL);break;case O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:case O.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:y()(_()(n.prototype),"setRendererType",this).call(this,O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD);break;case O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:case O.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:y()(_()(n.prototype),"setRendererType",this).call(this,O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD);break;default:y()(_()(n.prototype),"setRendererType",this).call(this,O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD)}}},{key:"draw",value:function(e){if(this.removeAllBackendErrors(),e){var t=this.canvasNode.getContext("2d");if(this.tainted)this.pictureWithLoadedTaintedSignature&&(this.canvasNode.width=this.canvasNode.getBoundingClientRect().width,this.canvasNode.height=this.canvasNode.getBoundingClientRect().height,t.fillStyle="rgba(255,255,255,0)",t.fillRect(0,0,this.canvasNode.offsetWidth,this.canvasNode.offsetHeight),t.drawImage(this.pictureWithLoadedTaintedSignature,0,0));else{var n=e.length,i=0,r=1;if(t.lineWidth=2,t.lineCap="round",t.strokeStyle="#000000",n<2)this.clearButton.style.display="none";else for(this.clearButton.style.display="";i<n;)0===i||-1===e[i-1]?(t.beginPath(),t.moveTo(e[i],e[i+1]),r=2):-1===e[i]?(r=1,t.stroke()):(t.lineTo(e[i],e[i+1]),r=2),i+=r}}else this.clearButton.style.display="none"}},{key:"getMostLeftSignaturePoint",value:function(e){if(!e)return null;var t=e.length,n=0,i=1,r=0|e[0],a=0|r;if(t<2)return null;for(;n<t;)0===n||-1===e[n-1]?(a=e[n],i=2):-1===e[n]?(i=1,a=r):(a=e[n],i=2),n+=i,r>a&&(r=a);return r}},{key:"getMostRightSignaturePoint",value:function(e){if(!e)return null;var t=e.length,n=0,i=1,r=0|e[0],a=0|r;if(t<2)return null;for(;n<t;)0===n||-1===e[n-1]?(a=e[n],i=2):-1===e[n]?(i=1,a=r):(a=e[n],i=2),n+=i,r<a&&(r=a);return r}},{key:"shiftHorizontal",value:function(e,t){if(!e)return t;if(!t)return t;var n=t.length,i=0,r=1,a=0|t[0],o=0|a;if(n<2)return t;for(;i<n;)0===i||-1===t[i-1]?(t[i]+=e,r=2):-1===t[i]?r=1:(t[i]+=e,r=2),i+=r,a>o&&(a=o);return t}},{key:"init",value:function(){!function(e,t){var n=!1,i={top:0,left:0},r=[];function a(){e.tainted||(e.canvasNode.width=e.canvasNode.offsetWidth,e.canvasNode.height=e.canvasNode.offsetHeight)}function o(t){e.readOnly||e.tainted||(n=!0,i.left=t.offsetX,i.top=t.offsetY,a(),e.draw(e.getProperty("value.value")||[]),r=[i.left,i.top])}function s(t){if(!e.readOnly&&!e.tainted&&n){if(t)try{t.preventDefault()}catch(o){}if(t.offsetX<0||t.offsetY<0||t.offsetX>e.canvasNode.offsetWidth||t.offsetY>e.canvasNode.offsetHeight)l(t);else{e.clearButton.style.display="";var a=e.canvasNode.getContext("2d");a.lineWidth=2,a.lineCap="round",a.strokeStyle="#000000",a.beginPath(),a.moveTo(i.left,i.top),a.lineTo(i.left=t.offsetX,i.top=t.offsetY),r.push(i.left,i.top),a.stroke()}}}function l(t){if(!e.readOnly&&!e.tainted&&n){n=!1,r.push(-1);for(var i=e.getProperty("value.value")||[],a=0,o=r.length;a<o;a++)i.push(r[a]);e.setProperty("value.value",i.slice(0))}}function c(t){if(!t.touches||!t.touches.length)return null;var n=e.canvasNode.getBoundingClientRect();return{offsetX:~~(t.touches[0].clientX-n.left),offsetY:~~(t.touches[0].clientY-n.top)}}(qe.a.isMobile()||x.a.isTouchDevice())&&(t(e.canvasNode).on("touchstart",(function(e){e.preventDefault(),o(c(e.originalEvent))})),t(e.canvasNode).on("touchmove",(function(e){s(c(e.originalEvent))})),t(e.canvasNode).on("touchend touchcancel mouseup mouseout mouseleave",(function(e){l(c(e.originalEvent))}))),qe.a.isMobile()||(t(e.canvasNode).on("mousedown",o),t(e.canvasNode).on("mousemove",s),t(e.canvasNode).on("mouseout mouseleave mouseup",l)),t(e.clearButton).on("click",(function(){e.readOnly||e.onReset()})),e.getForm().getEngine().on("resize",(function(){a();var t,n=e.getProperty("value.value"),i=e.getMostLeftSignaturePoint(n),r=e.getMostRightSignaturePoint(n),o=e.canvasNode.offsetWidth;o<=0||i<0||r<0||r-i<0||(null!==n&&null!==i&&null!==r&&(t=~~(o/2)-~~((r-i)/2),n=e.shiftHorizontal(t-i,n),e.setProperty("value.value",n)),e.draw(n))}))}(this,this.getForm().getEngine().getJQuery())}},{key:"onReset",value:function(){this.setProperty("value.value",null),this.canvasNode.width=this.canvasNode.offsetWidth,this.canvasNode.height=this.canvasNode.offsetHeight,this.draw([])}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_signature_name")),this.updateLabelText(),this}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"updateTaintedState",value:function(){if(this.tainted){this.warningMessageRegardingLoosingSignature=this.warningMessageRegardingLoosingSignature||document.createElement("div");var e=this.signatureValueAsString||null;e&&(/^data:image\//.test(e)?this.paintSignatureOnControlCanvas(e):(this.warningMessageRegardingLoosingSignature.textContent="This signature will be unvalidated on update submission",this.warningMessageRegardingLoosingSignature.setAttribute("data-role","tainted-signature")))}else this.warningMessageRegardingLoosingSignature&&(this.warningMessageRegardingLoosingSignature.parentNode&&this.warningMessageRegardingLoosingSignature.parentNode.removeChild(this.warningMessageRegardingLoosingSignature),this.warningMessageRegardingLoosingSignature=null);this.reRender()}},{key:"setProperty",value:function(e,t){"value.value"===e&&this.properties.value.value&&"string"===typeof this.properties.value.value&&(this.signatureValueAsString=this.properties.value.value);var i=this.getForm().getEngine().getLoader().getLoaderDependency(O.M.VIEW_FORM_CONTEXT);return"value.value"===e&&"string"===typeof t?(this.signatureValueAsString=this.signatureValueAsString||t,i===O.vb.SAVE_FOR_LATER||i===O.vb.EDIT_LATER?this.tainted=!1:"no"!==this.signatureValueAsString.toLowerCase()&&(this.tainted=!0,this.updateTaintedState()),i!==O.vb.APPROVAL&&(this.properties.value.value=null),this):y()(_()(n.prototype),"setProperty",this).call(this,e,t)}},{key:"updateAccessibilityTabIndexes",value:function(){y()(_()(n.prototype),"updateAccessibilityTabIndexes",this).call(this),this.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1)?(this.fakeInputNode.tabIndex=0,this.clearButton.tabIndex=0):(this.fakeInputNode.removeAttribute("tabindex"),this.clearButton.removeAttribute("tabindex"))}},{key:"paintSignatureOnControlCanvas",value:function(e){var t=this;setTimeout((function(){var n=document.createElement("img");n.onload=function(){t.canvasNode.width=t.canvasNode.offsetWidth,t.canvasNode.height=t.canvasNode.offsetHeight,t.canvasNode.getContext("2d").drawImage(n,0,0),t.pictureWithLoadedTaintedSignature=n},n.src=e}),100)}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),e}},{key:"onReadonlyStateChanged",value:function(){this.readOnly=!!this.getProperty("options.readOnly")}},{key:"clearValue",value:function(){this.getForm().getEngine().getLoader().getLoaderDependency(O.M.VIEW_FORM_CONTEXT)!==O.vb.APPROVAL&&this.properties&&this.properties.value&&this.setProperty("value.value",null)}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_SIGNATURE,name:"Signature",isContainer:!1,category:O.w.UPLOADS_CONSENT,keywords:"signature electronic sign",icon:"i123-edit",isVirtual:!1,i18nName:"edt_UI_control_type_signature_name",i18nKeywords:"edt_UI_control_type_signature_keywords",index:40,accessibilityFields:O.v.ROOT_NODE+O.v.ERROR_NODE+O.v.OTHER,title:i.a.translationService.translateText("editorFieldTooltip_signature")}}},{key:"drawSignaturesInPage",value:function(e){try{e.getEngine().getDocument().flatten().forEach((function(e){e.getTypeId()===b.a.CONTROL_TYPE_SIGNATURE&&e.draw([])}))}catch(t){}}}]),n}(i.a);function $e(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(Qe,"attributes",{}),v()(Qe,"runtime",null),v()(Qe,"nodeName","signature");var et=function(e){u()(n,e);var t=$e(n);function n(e,i){var r;return o()(this,n),r=t.call(this,e,i),v()(A()(r),"input",void 0),r.input=document.createElement("div"),r.input.setAttribute("data-role","social-container"),r.rootNode.appendChild(r.input),r}return l()(n,[{key:"getElementName",value:function(){return"Social"}},{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_SOCIAL}},{key:"getPropertyDescriptorByInputIndex",value:function(e){return null}},{key:"refreshButtons",value:function(){for(var e=this.getProperty("configuration.hasButtonGooglePlus"),t=this.getProperty("configuration.hasButtonTwitter"),i=this.getProperty("configuration.hasButtonLinkedin"),r=this.getProperty("configuration.hasFacebookLike"),a=this.getProperty("configuration.hasFacebookShare"),o=this.getProperty("configuration.customLink")||window.location.href,s=!!this.getProperty("options.showCount"),l=document.title,c=this.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1);this.input.firstChild;)this.input.removeChild(this.input.firstChild);r&&this.input.appendChild(n.createButton("facebook-like",o,l,s,c)),a&&this.input.appendChild(n.createButton("facebook-share",o,l,s,c)),t&&this.input.appendChild(n.createButton("twitter",o,l,s,c)),i&&this.input.appendChild(n.createButton("linkedin",o,l,s,c)),e&&this.input.appendChild(n.createButton("google-plus",o,l,s,c)),r&&this.onFacebookReady().then((function(){try{FB.XFBML.parse()}catch(e){console.error("Failed to execute: FB.XFBML.parse()")}}))}},{key:"updateAlignment",value:function(){switch(this.getProperty("configuration.alignment")){case"center":this.rootNode.setAttribute("data-align","center");break;case"right":this.rootNode.setAttribute("data-align","right");break;case"left":default:this.rootNode.setAttribute("data-align","left")}}},{key:"getAllowedSocialPlatforms",value:function(){var e=[],t=this.getProperty("configuration.hasButtonGooglePlus"),n=this.getProperty("configuration.hasButtonTwitter"),i=this.getProperty("configuration.hasButtonLinkedin"),r=this.getProperty("configuration.hasFacebookLike"),a=this.getProperty("configuration.hasFacebookShare");return t&&e.push(O.kb.GOOGLE_PLUS),i&&e.push(O.kb.LINKEDIN),n&&e.push(O.kb.TWITTER),r&&e.push(O.kb.FACEBOOK_LIKE),a&&e.push(O.kb.FACEBOOK_SHARE),e}},{key:"setAllowedSocialPlatforms",value:function(e){if(e)for(var t=0,n=e.length;t<n;t++)e[t]=~~e[t];e.length?(this.setProperty("configuration.hasButtonGooglePlus",e.indexOf(O.kb.GOOGLE_PLUS)>-1),this.setProperty("configuration.hasButtonLinkedin",e.indexOf(O.kb.LINKEDIN)>-1),this.setProperty("configuration.hasButtonTwitter",e.indexOf(O.kb.TWITTER)>-1),this.setProperty("configuration.hasFacebookLike",e.indexOf(O.kb.FACEBOOK_LIKE)>-1),this.setProperty("configuration.hasFacebookShare",e.indexOf(O.kb.FACEBOOK_SHARE)>-1)):(this.setProperty("configuration.hasButtonGooglePlus",!0),this.setProperty("configuration.hasButtonLinkedin",!0),this.setProperty("configuration.hasButtonTwitter",!0),this.setProperty("configuration.hasFacebookLike",!0),this.setProperty("configuration.hasFacebookShare",!0))}},{key:"onCreated",value:function(){this.updateAlignment(),this.refreshButtons()}},{key:"onFacebookReady",value:function(){return function(e,t){return void 0!==n.facebookSDKPromise?n.facebookSDKPromise:e.Deferred((function(e){t.loadJavascript("//connect.facebook.net/en_US/all.js#xfbml=1&appId=157025404377057").then((function(){e.resolve(!0)})).fail((function(){e.reject(new Error("Failed loading Facebook SDK"))}))})).promise()}(this.getForm().getEngine().getJQuery(),this.getForm().getEngine().getResourceManager())}},{key:"setRendererType",value:function(e){}},{key:"onReset",value:function(){}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){return[]}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_SOCIAL,name:"Share on social media",isContainer:!1,category:O.w.MEDIA_STRUCTURE,keywords:"social share on media facebook twitter linkedin google plus",icon:"i123-social",isVirtual:!1,i18nName:"editorField_social",i18nKeywords:"edt_UI_control_type_social_keywords",index:80,accessibilityFields:O.v.OTHER,title:i.a.translationService.translateText("editorFieldTooltip_social")}}},{key:"createButton",value:function(e,t,n,i,r){var a,o;switch((o=document.createElement("span")).appendChild(document.createTextNode(e)),o.setAttribute("id","social-".concat(e,"-button-acc")),o.style.display="none","facebook-like"!==e?((a=document.createElement("a")).setAttribute("target","_blank"),a.setAttribute("href","javascript:;"),a.setAttribute("data-button-type",e),a.setAttribute("data-role","share-button"),a.setAttribute("aria-labelledby","social-".concat(e,"-button-acc")),a.appendChild(o)):((a=document.createElement("div")).className="fb-like",a.setAttribute("data-layout",i?"button_count":"button"),a.setAttribute("data-action","like"),a.setAttribute("data-show-faces","false"),a.setAttribute("data-share","false"),r&&(a.tabIndex=0)),e){case"google-plus":a.setAttribute("href","https://plus.google.com/share?url=".concat(encodeURIComponent(t)));break;case"twitter":a.setAttribute("href","https://twitter.com/home?status=".concat(encodeURIComponent(t)));break;case"linkedin":a.setAttribute("href","https://www.linkedin.com/shareArticle?mini=true&url=".concat(encodeURIComponent(t),"&title=").concat(encodeURIComponent(n),"&summary=&source="));break;case"facebook-like":a.setAttribute("data-href",t);break;case"facebook-share":a.setAttribute("href","https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(t)))}return a}}]),n}(i.a);function tt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(et,"attributes",{}),v()(et,"runtime",null),v()(et,"nodeName","social"),v()(et,"facebookSDKPromise",void 0);var nt=function(e){u()(n,e);var t=tt(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"input",void 0);var a=r.getHash();return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","starrating-".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","starrating-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","starrating-".concat(a,"-instr-acc")),r.input=L.a.createElement(L.a.ELEMENT_TYPE_STAR_RATING),r.input.withHash(a),r.input.setAttribute("data-role","i123-input"),r.rootNode.setAttribute("aria-labelledby","starrating-".concat(a,"-acc ")+"starrating-".concat(a,"-error-acc ")+"starrating-".concat(a,"-instr-acc")),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_STAR_RATING}},{key:"getElementName",value:function(){return"Star rating"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.I.FULL}]}]}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.updateStarShapeType(),this.updateStarsCount(),this.updateHiddenAttribute(),this.getForm().getEngine().getLoader().getLoaderType()===O.B.VIEW?(this.updateDefaultValue(),this.onValueChanged()):this.synchronizeValue(),this.onReadonlyStateChanged()}},{key:"onValueChanged",value:function(){var e=this.input.getValue();this.setProperty("value.value",0===e?null:e),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"synchronizeValue",value:function(){S.a.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"int",optional:!0};default:return null}}},{key:"updateStarShapeType",value:function(){switch(this.getProperty("configuration.displayAs")){case O.lb.ADULTS:this.input.withStarShapeType("adults");break;case O.lb.CHILDREN:this.input.withStarShapeType("children");break;case O.lb.STARS:default:this.input.withStarShapeType("stars")}}},{key:"updateStarsCount",value:function(){var e=this.getProperty("configuration.starsCount");null===e&&(e=5),e<1&&(e=1),e>10&&(e=10),this.input.withMinValue(0).withMaxValue(e),this.input.onAccessibilitySettingsChanged()}},{key:"updateDefaultValue",value:function(){this.input.setValue(this.getProperty("configuration.defaultValue"))}},{key:"onReset",value:function(){this.updateDefaultValue(),this.onValueChanged()}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_star_rating_name")),this.updateLabelText(),this}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),e}},{key:"onReadonlyStateChanged",value:function(){this.input.setReadOnly(!!this.getProperty("options.readOnly"))}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_STAR_RATING,name:"Star Rating",isContainer:!1,category:O.w.RATING_SCALES,keywords:"star rating rate opinion",icon:"i123-star_rating",isVirtual:!1,i18nName:"edt_UI_control_type_star_rating_name",i18nKeywords:"edt_UI_control_type_star_rating_keywords",index:10,accessibilityFields:O.v.ERROR_NODE+O.v.ROOT_NODE,title:i.a.translationService.translateText("editorFieldTooltip_starRating")}}}]),n}(i.a);v()(nt,"attributes",{}),v()(nt,"runtime",null),v()(nt,"nodeName","star-rating");var it=n(9);function rt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var at=function(e){u()(n,e);var t=rt(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"input",void 0),v()(A()(r),"linkElement",void 0),v()(A()(r),"additionalLabelElement",void 0),v()(A()(r),"checkboxDecorator",void 0);var a="tos_".concat(String(~~(1e6*Math.random())),"_").concat(String(~~(1e6*Math.random())),"_").concat(+new Date),s=r.getHash();return r.input=document.createElement("input"),r.input.setAttribute("type","checkbox"),r.input.setAttribute("data-role","i123-input"),r.input.setAttribute("data-index","0"),r.input.setAttribute("id",a),r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","tos-".concat(s,"-acc")),r.linkElement=document.createElement("a"),r.linkElement.setAttribute("data-role","tos-link"),r.linkElement.setAttribute("href","javascript:;"),r.linkElement.setAttribute("rel","nofollow"),r.additionalLabelElement=document.createElement("label"),r.additionalLabelElement.setAttribute("data-role","tos-label"),r.additionalLabelElement.setAttribute("id","tos-checkbox-".concat(s,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","tos-".concat(s,"-error-acc")),r.checkboxDecorator=document.createElement("label"),r.checkboxDecorator.setAttribute("data-role","checkbox"),r.checkboxDecorator.setAttribute("for",a),r.checkboxDecorator.setAttribute("aria-labelledby","tos-".concat(s,"-acc tos-").concat(s,"-error-acc tos-checkbox-").concat(s,"-acc")),r.checkboxDecorator.setAttribute("role","checkbox"),r.checkboxDecorator.setAttribute("aria-checked","false"),r.checkboxDecorator.tabIndex=0,r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"onCreated",value:function(){var e;this.updateLabelText(),this.updateErrorsText(),this.updateTOSAdditionalLabelText(),this.updateRequiredState(),this.updateHiddenAttribute(),this.updateDefaultValue(),this.getForm().getEngine().getLoader().getLoaderType()===O.B.EDIT?this.synchronizeValue():((e=this).linkElement.addEventListener("click",(function(){e.onClick()}),!1),this.onValueChanged()),this.onReadonlyStateChanged()}},{key:"getProperty",value:function(e){switch(e){case"configuration.agreementLabelAdditionalText":var t=this.getId();if(t){var i="terms_of_service_option_label_".concat(t),r=this.getForm().getEngine().getI18n().translateText(i);if(r&&r!==i)return r}return y()(_()(n.prototype),"getProperty",this).call(this,e);default:return y()(_()(n.prototype),"getProperty",this).call(this,e)}}},{key:"updateTOSAdditionalLabelText",value:function(){var e=this.getForm().getEngine().getI18n().translateText("terms_of_service_option_label_".concat(this.getId())),t=String(this.getProperty("configuration.agreementLabelAdditionalText")||""),n=e||t;this.getForm().getEngine().getLoader().getLoaderType()==O.B.EDIT&&(n=t);for(var i=/^([\s\S]+)?<link>([\s\S]+)?<\/link>([\s\S]+)?$/.exec(n);this.additionalLabelElement.firstChild;)this.additionalLabelElement.removeChild(this.additionalLabelElement.firstChild);if(this.additionalLabelElement.appendChild(this.input),this.additionalLabelElement.appendChild(this.checkboxDecorator),i)i[1]&&(this.additionalLabelElement.appendChild(document.createElement("span")).textContent=i[1]),i[2]&&(this.linkElement.textContent=i[2],this.additionalLabelElement.appendChild(this.linkElement)),i[3]&&(this.additionalLabelElement.appendChild(document.createElement("span")).textContent=i[3]);else{var r=document.createElement("label");r.textContent=String(n||""),this.additionalLabelElement.appendChild(r)}}},{key:"updateDefaultValue",value:function(){this.setProperty("value.value",!!this.getProperty("configuration.defaultValue")),this.synchronizeValue(),this.getProperty("configuration.defaultValue")&&this.input.setAttribute("checked","")}},{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_TERMS_OF_SERVICE}},{key:"getElementName",value:function(){return"Terms of service"}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"boolean",optional:!0};default:return null}}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.additionalLabelElement,width:O.I.FULL}]}]}},{key:"onValueChanged",value:function(){var e=this.input.checked;this.setProperty("value.value",null!==e&&e),e?this.checkboxDecorator.setAttribute("aria-checked","true"):this.checkboxDecorator.setAttribute("aria-checked","false"),this.isAttached()&&this.getForm().trigger("click",this)}},{key:"synchronizeValue",value:function(){S.a.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"showText",value:function(){var e=this.getForm().getEngine().getI18n().translateText("terms_of_service_html_markup_".concat(this.getId())),t=this.getProperty("configuration.agreementHTMLMarkup"),n=e||t,i=~~this.getProperty("configuration.popupWidthInPixels"),r=~~this.getProperty("configuration.popupHeightInPixels");if("string"===typeof n&&""!==n){i<=0&&(i=500),r<=0&&(r=500);var a=this.getForm().getEngine().getJQuery(),o=a(window).width(),s=a(window).height();o<i&&(i=o-20),s<r&&(r=s-20),function(e,t,a){if(e){var o=t.getForm().getEngine().getI18n().translateText("textdef_232")||"Terms of Service",s=e.createDialog(o,[{type:it.f.OK,callback:function(){s.close()}}],{width:"".concat(i,"px"),height:"".concat(r,"px")});a(s.body).addClass("html-content"),s.body.innerHTML='<div class="ui-body-inner">'.concat(n,"</div>")}}(this.getForm().getEngine().getLoader().getUI(),this,this.getForm().getEngine().getJQuery())}}},{key:"openURL",value:function(){var e=this,t=this.getProperty("configuration.url");t&&(this.linkElement.setAttribute("href",t),this.linkElement.setAttribute("target","_blank"),L.a.getJQuery()(this.linkElement).trigger("click"),setTimeout((function(){e.linkElement.removeAttribute("href"),e.linkElement.removeAttribute("target")}),1e3))}},{key:"onClick",value:function(){switch(this.getProperty("configuration.linkBehaviour")){case"show_text":this.showText();break;case"open_url":this.openURL()}}},{key:"onReset",value:function(){var e=this.getProperty("configuration.defaultValue");this.input.checked=!!e,this.onValueChanged()}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_terms_of_service_name")),this.updateLabelText(),this.setProperty("configuration.agreementHTMLMarkup",this.getForm().getEngine().getI18n().translateText("func_editTos")),this}},{key:"setupI18n",value:function(){return this.updateTOSAdditionalLabelText(),y()(_()(n.prototype),"setupI18n",this).call(this)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("configuration.agreementLabelAdditionalText")||"",i=this.getProperty("configuration.agreementHTMLMarkup")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"terms_of_service_option_label_".concat(this.getId()),sourceText:n}),i&&e.push({key:"terms_of_service_html_markup_".concat(this.getId()),sourceText:i}),e}},{key:"onReadonlyStateChanged",value:function(){this.input.disabled=!!this.getProperty("options.readOnly")}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_TERMS_OF_SERVICE,name:"Terms of Service",isContainer:!1,category:O.w.UPLOADS_CONSENT,keywords:"terms of service legal",icon:"i123-editor_field_termsofservice",isVirtual:!1,i18nName:"edt_UI_control_type_terms_of_service_name",i18nKeywords:"edt_UI_control_type_terms_of_service_keywords",index:30,accessibilityFields:O.v.ERROR_NODE,title:i.a.translationService.translateText("editorFieldTooltip_tos")}}}]),n}(i.a);function ot(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(at,"attributes",{}),v()(at,"runtime",null),v()(at,"nodeName","terms-of-service");var st=function(e){u()(n,e);var t=ot(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"input",void 0);var a=r.getHash();return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","textarea-".concat(a,"-acc")),r.hasAccessibilityEnabled&&r.labelDOMNode.setAttribute("for","textarea-".concat(a)),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","textarea-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","textarea-".concat(a,"-instr-acc")),r.input=document.createElement("textarea"),r.input.setAttribute("data-role","i123-input"),r.input.setAttribute("id","textarea-".concat(a)),r.input.setAttribute("aria-labelledby","textarea-".concat(a,"-acc ")+"textarea-".concat(a,"-error-acc ")+"textarea-".concat(a,"-instr-acc")),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_TEXTAREA}},{key:"getElementName",value:function(){return"Long text"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.I.FULL}]}]}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateDefaultValue(),this.updateShowInstructionsOnClick(),this.validateValue(),this.updateHiddenAttribute(),this.setHeightInRows(),this.getForm().getEngine().getLoader().getLoaderType()===O.B.EDIT?this.synchronizeValue():this.onValueChanged(),this.onReadonlyStateChanged()}},{key:"onValueChanged",value:function(){var e=this.input.value;this.setProperty("value.value",""===e?null:e),this.validateValue(),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"updateDefaultValue",value:function(){var e=this.getProperty("configuration.defaultValue")||"",t=e&&e.trim();this.setProperty("value.value",""===e?null:t),this.setProperty("configuration.defaultValue",t),this.synchronizeValue(),t&&(this.input.innerText=t)}},{key:"validateValue",value:function(){var e=this.getProperty("configuration.minLength"),t=this.getProperty("configuration.maxLength"),n=this.getProperty("configuration.minNumberOfWords"),i=this.getProperty("configuration.maxNumberOfWords"),r=this.getProperty("value.value")||"",a=S.a.getTextNumberOfWords(this.getProperty("value.value"));r?(null!=t&&t>0&&(r.length>t?this.addError(g.a.ERR_TOO_MANY_CHARACTERS,this.getForm().getEngine().getI18n().translateText("textdef_71",String(t))||"You have more characters than allowed"):this.removeError(g.a.ERR_TOO_MANY_CHARACTERS)),null!=e&&e>0&&(r.length<e?this.addError(g.a.ERR_TOO_FEW_CHARACTERS,this.getForm().getEngine().getI18n().translateText("textdef_70",String(e))||"You have fewer characters than allowed"):this.removeError(g.a.ERR_TOO_FEW_CHARACTERS)),null!=i&&i>0&&(a>i?this.addError(g.a.ERR_TOO_MANY_WORDS,this.getForm().getEngine().getI18n().translateText("textdef_94",String(i))||"You have more words than allowed"):this.removeError(g.a.ERR_TOO_MANY_WORDS)),null!=n&&n>0&&(a<n?this.addError(g.a.ERR_TOO_FEW_WORDS,this.getForm().getEngine().getI18n().translateText("textdef_93",String(n))||"You have fewer words than allowed"):this.removeError(g.a.ERR_TOO_FEW_WORDS))):(this.removeError(g.a.ERR_TOO_MANY_CHARACTERS),this.removeError(g.a.ERR_TOO_FEW_CHARACTERS),this.removeError(g.a.ERR_TOO_MANY_WORDS),this.removeError(g.a.ERR_TOO_FEW_WORDS))}},{key:"synchronizeValue",value:function(){S.a.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"string",optional:!0};default:return null}}},{key:"onReset",value:function(){this.setValue({value:this.getProperty("configuration.defaultValue")}),this.validateValue()}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",i.a.translationService.translateText("editorField_longText")),this.updateLabelText(),this}},{key:"setHeightInRows",value:function(){this.input.setAttribute("rows",this.hasProperty("size.heightInRows")&&this.getProperty("size.heightInRows")?this.getProperty("size.heightInRows"):n.DEFAULT_INPUT_HEIGHT_IN_ROWS)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),e}},{key:"onReadonlyStateChanged",value:function(){var e=this.getProperty("options.readOnly");this.setReadonly(e)}},{key:"isReadonly",value:function(){return this.input.readOnly}},{key:"setReadonly",value:function(e){return this.input.readOnly=e,this}},{key:"emulateUserInput",value:function(){var e=this;!function(t){t([e.input]).trigger("input")}(this.getForm().getEngine().getJQuery())}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_TEXTAREA,name:"Long answer",isContainer:!1,category:O.w.ESSENTIALS,keywords:"long text input textbox open textarea answer",icon:"i123-editor_field_longtext",isVirtual:!1,i18nName:"editorField_longText",i18nKeywords:"edt_UI_control_type_textarea_keywords",index:20,accessibilityFields:O.v.ERROR_NODE,title:i.a.translationService.translateText("editorFieldTooltip_longText")}}}]),n}(i.a);v()(st,"DEFAULT_INPUT_HEIGHT_IN_ROWS",3),v()(st,"attributes",{}),v()(st,"runtime",null),v()(st,"nodeName","textarea");var lt=n(49);function ct(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var ut=function(e){u()(n,e);var t=ct(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"input",void 0);var a=r.getHash(),s=r.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1);return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","time-".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","time-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","time-".concat(a,"-instr-acc")),r.input=L.a.createElement(L.a.ELEMENT_TYPE_TIME),r.input.setAccessibilityEnabled(s),r.input.setAttribute("data-role","i123-input"),r.input.setAttribute("aria-live","assertive"),r.input.setAttribute("role","alert"),r.rootNode.setAttribute("aria-labelledby","time-".concat(a,"-acc ")+"time-".concat(a,"-error-acc ")+"time-".concat(a,"-instr-acc ")+"time-".concat(a,"-hour ")+"time-".concat(a,"-minute ")+"time-".concat(a,"-second ")+"time-".concat(a,"-am-pm")),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"setTimeControlOptions",value:function(){this.input.withHash(this.getHash()),this.input.setFormat("12"===this.getProperty("configuration.timeFormat")?j.a.VALIDATOR_TYPE_TIME_AMPM:j.a.VALIDATOR_TYPE_TIME)}},{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_TIME}},{key:"getElementName",value:function(){return"Time"}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateInstructionsText(),this.updateErrorsText(),this.updateRequiredState(),this.setTimeControlOptions(),this.updateShowInstructionsOnClick(),this.getForm().getEngine().getLoader().getLoaderType()===O.B.EDIT?this.synchronizeValue():this.onValueChanged(),this.updateHiddenAttribute(),this.loadDefaultTimeValueIntoForm(),this.onReadonlyStateChanged()}},{key:"getSupportedValidators",value:function(){var e=this.getForm().getEngine().getValidator();return[e.getValidatorById(j.a.VALIDATOR_TYPE_TIME),e.getValidatorById(j.a.VALIDATOR_TYPE_TIME_AMPM)]}},{key:"getStringValue",value:function(){return this.input.getValue()}},{key:"setStringValue",value:function(e){try{this.input.setValue(e)}catch(t){this.input.setDateValue(null)}this.onValueChanged()}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.stringValue",type:"string",optional:!0};default:return null}}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.I.FULL}]}]}},{key:"synchronizeValue",value:function(){var e,t,n,i,r=this.getProperty("value.value");null===r?e=null:(e=new Date,r-=3600*(t=Math.floor(r/3600)),r-=60*(n=Math.floor(r/60)),i=lt.a.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?r:r-r%60,e.setDate(1),e.setMonth(0),e.setFullYear(1970),e.setHours(t),e.setMinutes(n),e.setSeconds(i),e.setMilliseconds(0)),this.input.setDateValue(e),this.updateErrorState(this.input.getInputErrorState())}},{key:"onValueChanged",value:function(){var e=this.input.getDateValue();if(null===e)this.setProperty("value.value",null);else{var t=3600*e.getHours()+60*e.getMinutes()+e.getSeconds();this.setProperty("value.value",lt.a.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?t:t-t%60)}this.isAttached()&&this.getForm().trigger("input",this),this.updateErrorState(this.input.getInputErrorState())}},{key:"loadDefaultTimeValueIntoForm",value:function(){var e="",t=this.hasProperty("configuration.defaultValue")?this.getProperty("configuration.defaultValue"):void 0;"string"!==typeof t&&(e=this.convertTimeSecondsToString(t)),t||0===t?("number"!==typeof t||lt.a.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL||(t-=t%60),this.input.setDateValue(this.getForm().getEngine().getTimeUtils().stringToTime(e||String(t))),this.onValueChanged()):this.input.setDateValue(null)}},{key:"convertTimeSecondsToString",value:function(e){var t,n=this.hasProperty("configuration.timeFormat")?this.getProperty("configuration.timeFormat"):void 0;if(n)switch(n){case"24":n=lt.a.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?"%H:%i:%S":"%H:%i";break;case"12":default:n=lt.a.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?"%h:%i:%S %p":"%h:%i %p"}return t=lt.a.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?0:e%60,this.getForm().getEngine().getTimeUtils().intToTime(e-t,n)}},{key:"onReset",value:function(){this.loadDefaultTimeValueIntoForm()}},{key:"updateErrorState",value:function(e){switch(e){case O.H.ERROR:this.addError(g.a.ERR_TIME_NOT_COMPLETE,this.getForm().getEngine().getI18n().translateText("textdef_222")||"Please fill in both hour and minutes");break;case O.H.UNFILLED:case O.H.FILLED:default:this.removeError(g.a.ERR_TIME_NOT_COMPLETE)}}},{key:"onBlur",value:function(){this.updateErrorState(this.input.getInputErrorState())}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_time_name")),this.updateLabelText(),this}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),e}},{key:"onReadonlyStateChanged",value:function(){var e=this.getProperty("options.readOnly");this.input.setReadOnly(e)}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_TIME,name:"Time",isContainer:!1,category:O.w.DATE_TIME,keywords:"time date hour minute",icon:"i123-time",isVirtual:!1,i18nName:"edt_UI_control_type_time_name",i18nKeywords:"edt_UI_control_type_time_keywords",index:20,accessibilityFields:O.v.ERROR_NODE+O.v.ROOT_NODE,title:i.a.translationService.translateText("editorFieldTooltip_time")}}}]),n}(i.a);function dt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(ut,"attributes",{}),v()(ut,"runtime",null),v()(ut,"nodeName","time");var pt=function(e){u()(n,e);var t=dt(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"input",void 0),v()(A()(r),"hasSuggestions",!0);var a=r.getHash();return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","website-".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","website-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("id","website-".concat(a,"-instr-acc")),r.input=document.createElement("input"),r.input.setAttribute("type","text"),r.input.setAttribute("data-role","i123-input"),r.input.setAttribute("aria-labelledby","website-".concat(a,"-acc ")+"website-".concat(a,"-error-acc ")+"website-".concat(a,"-instr-acc")),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_WEBSITE}},{key:"getElementName",value:function(){return"Website"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.I.FULL}]}]}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.updateHiddenAttribute(),this.updateDefaultValue(),this.initializeSuggestions(),this.getForm().getEngine().getLoader().getLoaderType()===O.B.EDIT?this.synchronizeValue():this.onValueChanged(),this.onReadonlyStateChanged()}},{key:"getSupportedValidators",value:function(){return[this.getForm().getEngine().getValidator().getValidatorById(j.a.VALIDATOR_TYPE_URL_WEB_PAGE)]}},{key:"onValueChanged",value:function(){var e=this.input.value;this.setProperty("value.value",""===e?null:e),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"updateDefaultValue",value:function(){var e=this.getProperty("configuration.defaultValue");this.setProperty("value.value",""===e?null:e),this.synchronizeValue(),e&&this.input.setAttribute("value",e.trim())}},{key:"validateValue",value:function(){var e=this.getForm().getEngine().getValidator(),t=this.getProperty("value.value")||"";null!==t&&""!==t?t&&!e.validate(t,j.a.VALIDATOR_TYPE_URL_WEB_PAGE)?this.addError(g.a.ERR_INVALID_URL,"".concat(this.getForm().getEngine().getI18n().translateText("textdef_5"),": ").concat(this.getForm().getEngine().getI18n().translateText("textdef_50"))||"The URL is invalid."):this.hasError(g.a.ERR_INVALID_URL)&&this.removeError(g.a.ERR_INVALID_URL):this.removeError(g.a.ERR_INVALID_URL)}},{key:"synchronizeValue",value:function(){S.a.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"string",optional:!0};default:return null}}},{key:"onReset",value:function(){this.setValue({value:this.getProperty("configuration.defaultValue")})}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",f.translationService.translateText("editorField_website")),this.updateLabelText(),this}},{key:"onBlur",value:function(){this.validateValue(),this.checkIfElementValueIsSynchronized()}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",n=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),n&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:n}),e}},{key:"getSuggestionsVisibility",value:function(){return null!==(this.getProperty("options.suggestions")||null)}},{key:"setSuggestionsVisibility",value:function(e){e?this.setProperty("options.suggestions",this.getProperty("options.suggestions")||""):this.setProperty("options.suggestions",null)}},{key:"initializeSuggestions",value:function(){var e=this;this.getForm().getEngine().on("compute-form-rules-done",(function(){setTimeout((function(){e.getSuggestionsVisibility()?e.suggestionsDropDown(L.a.getJQuery()):e.getForm().getEngine().getJQuery()(e.input).parent().find("[data-autocomplete-items]").remove()}),1e3)}))}},{key:"suggestionsDropDown",value:function(e){var t,i=this,r=this.getProperty("options.suggestions").split("\n"),a=this.input;!function(o){function s(t){a.value=t,o.onValueChanged(),e(a).trigger("input"),e(a).trigger("change")}function l(){for(var t=e(a).parent().find("[data-autocomplete-items]"),n=0,i=t.length;n<i;n++)t[n].parentNode.removeChild(t[n])}function c(e,t){var n=document.createElement("div"),i=document.createElement("strong");return i.appendChild(document.createTextNode(t.substr(0,e.length))),n.appendChild(i),n.appendChild(document.createTextNode(t.substr(e.length))),n.setAttribute("data-value",String(t||"")),n}function u(e){if(0===e.length)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].removeAttribute("data-autocomplete-active")}(e),t>=e.length&&(t=0),t<0&&(t=e.length-1),e[t].setAttribute("data-autocomplete-active","")}function d(i){if(null!==o.getProperty("options.suggestions")){n.initialize(),l(),t=-1;for(var u=function(){var t=document.createElement("div");t.setAttribute("data-autocomplete-items",""),e(t).width("".concat(a.offsetWidth,"px"));var n=a.getBoundingClientRect();return e(t).css({top:"".concat(~~n.top+~~n.height,"px")}),e(t).on("mousedown","> div",(function(){s(e(this).attr("data-value")),l()})),t}(),d=!1,p=0,h=r.length;p<h;p++)if(r[p].substr(0,i.length).toUpperCase()===i.toUpperCase()){var _=c(i,r[p]);e(u).append(_),d=!0}d?e(a).parent().append(u):e(u).remove()}}e(i.input).on("input",(function(){d(this.value)})),e(i.input).on("click",(function(e){e.stopPropagation(),d(this.value)})),e(a).on("keydown",(function(n){var i=e(a).parent().find("[data-autocomplete-items]").find("div");switch(n.keyCode){case V.a.KEY_DOWN:t++,u(i),n.preventDefault();break;case V.a.KEY_UP:t--,u(i),n.preventDefault();break;case V.a.KEY_ENTER:t>-1&&i.length&&(s(i[t].getAttribute("data-value")),l()),n.preventDefault();break;case V.a.KEY_ESC:l(),n.preventDefault()}})),e(i.input).on("blur",(function(){l()}))}(this)}},{key:"onReadonlyStateChanged",value:function(){var e=this.getProperty("options.readOnly");this.setReadonly(e)}},{key:"isReadonly",value:function(){return this.input.readOnly}},{key:"setReadonly",value:function(e){return this.input.readOnly=e,this}}],[{key:"initialize",value:function(){pe.initialize()}},{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_WEBSITE,name:"Link",isContainer:!1,category:O.w.UPLOADS_CONSENT,keywords:"website url link",icon:"i123-editor_field_website",isVirtual:!1,i18nName:"editorField_website",i18nKeywords:"edt_UI_control_type_website_keywords",index:20,accessibilityFields:O.v.ERROR_NODE,title:f.translationService.translateText("editorFieldTooltip_website")}}}]),n}(f);function ht(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(pt,"attributes",{}),v()(pt,"runtime",null),v()(pt,"nodeName","website");var _t=function(e){u()(n,e);var t=ht(n);function n(e,i){var r;return o()(this,n),r=t.call(this,e,i),v()(A()(r),"widgetIframeNode",void 0),v()(A()(r),"isWidgetLoaded",!1),v()(A()(r),"widgetIconNode",void 0),r.widgetIframeNode=document.createElement("iframe"),r.getRootNode().appendChild(r.widgetIframeNode),r.widgetIframeNode.setAttribute("data-widget-iframe","1"),r.widgetIframeNode.setAttribute("id","widget-iframe-"+r.getHash()),r.widgetIconNode=document.createElement("div"),r.widgetIconNode.setAttribute("data-widget-icon-container","1"),r.getRootNode().appendChild(r.widgetIconNode),r.widgetIframeNode.addEventListener("load",(function(){r.widgetIframeNode.getAttribute("src")&&(r.getRootNode().removeAttribute("data-widget-placeholder"),r.isWidgetLoaded=!0)}),!0),r}return l()(n,[{key:"getPropertyDescriptorByInputIndex",value:function(e){return null}},{key:"getResizingCapability",value:function(){return this.isWidgetLoaded?O.db.ALL:O.db.LEFT_AND_RIGHT}},{key:"setRendererType",value:function(e){}},{key:"isRenderingSupported",value:function(){return!1}},{key:"onCreated",value:function(){this.generateProperLinkForIframe()}},{key:"updateIframeOptions",value:function(e){e?(this.widgetIframeNode.setAttribute("src",e),this.getRootNode().removeAttribute("data-widget-placeholder"),this.isWidgetLoaded=!0):(this.getRootNode().setAttribute("data-widget-placeholder","1"),this.isWidgetLoaded=!1),this.widgetIframeNode.setAttribute("frameborder","0")}}]),n}(i.a);function gt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(_t,"attributes",{}),v()(_t,"runtime",null);var mt=function(e){u()(n,e);var t=gt(n);function n(e,i){var r;return o()(this,n),r=t.call(this,e,i),n.instanceID++,r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_WIDGET_FACEBOOK}},{key:"getElementName",value:function(){return"Facebook"}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_WIDGET_FACEBOOK,name:"Facebook",isContainer:!1,category:"other",keywords:"widget facebook post page embed",icon:"i123-field_facebook",isVirtual:!1,i18nName:"edt_UI_control_type_widget_facebook_name",i18nKeywords:"edt_UI_control_type_widget_facebook_keywords",index:250,accessibilityFields:O.v.NONE}}}]),l()(n,[{key:"setupDefaults",value:function(){return this.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_widget_facebook_name")," ").concat(n.instanceID)),this}},{key:"generateProperLinkForIframe",value:function(){var e=this.getForm().getEngine().getValidator().validateEmbeddableFacebookURL(this.getProperty("configuration.url")),t=null;null!==e&&(t=S.a.getURLEmbedIframeSource(e)),t&&O.sb.FACEBOOK_PAGE===e.type?this.widgetIframeNode.setAttribute("data-facebook-page","1"):this.widgetIframeNode.removeAttribute("data-facebook-page"),y()(_()(n.prototype),"updateIframeOptions",this).call(this,t)}},{key:"cloneNode",value:function(e){var t=y()(_()(n.prototype),"cloneNode",this).call(this,!!e);return t.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_widget_facebook_name")," ").concat(n.instanceID)),t}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){return[]}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"configuration.url",type:"string",optional:!0};default:return null}}}]),n}(_t);v()(mt,"instanceID",0),v()(mt,"nodeName","widget-facebook");var ft=n(32);function Et(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var yt=function(e){u()(n,e);var t=Et(n);function n(e,i){var r;return o()(this,n),r=t.call(this,e,i),n.instanceID++,r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_WIDGET_PDF}},{key:"getElementName",value:function(){return"PDF embed"}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_WIDGET_PDF,name:"Embed PDF",isContainer:!1,category:O.w.MEDIA_STRUCTURE,keywords:"widget pdf document embed",icon:"i123-field_pdfembed",isVirtual:!1,i18nName:"editorField_pdfEmbed",i18nKeywords:"edt_UI_control_type_widget_pdf_keywords",index:70,accessibilityFields:O.v.NONE,title:_t.translationService.translateText("editorFieldTooltip_pdfEmbed")}}}]),l()(n,[{key:"setupDefaults",value:function(){return this.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_widget_pdf_name")," ").concat(n.instanceID)),this}},{key:"generateProperLinkForIframe",value:function(){var e=this.getForm().getEngine().getValidator().validateEmbeddablePdfURL(this.getProperty("configuration.url")),t=null;qe.a.isMobile()&&e&&(e.type=O.sb.MOBILE_EMBED),null!==e&&(t=S.a.getURLEmbedIframeSource(e),t=Object(ft.q)(t)),y()(_()(n.prototype),"updateIframeOptions",this).call(this,t)}},{key:"cloneNode",value:function(e){var t=y()(_()(n.prototype),"cloneNode",this).call(this,!!e);return t.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_widget_pdf_name")," ").concat(n.instanceID)),t}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"configuration.url",type:"string",optional:!0};default:return null}}},{key:"enumerateTranslations",value:function(){return[]}}]),n}(_t);function Tt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(yt,"instanceID",0),v()(yt,"nodeName","widget-pdf");var vt=function(e){u()(n,e);var t=Tt(n);function n(e,i){var r;return o()(this,n),r=t.call(this,e,i),n.instanceID++,r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTROL_TYPE_WIDGET_VIDEO}},{key:"getElementName",value:function(){return"Video"}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTROL_TYPE_WIDGET_VIDEO,name:"Embed video",isContainer:!1,category:O.w.MEDIA_STRUCTURE,keywords:"widget video movie audio music embed Youtube Vimeo TED NFB Kickstarter Dailymotion Twitch Soundcloud Mixcloud Wordpress TV",icon:"i123-field_video",isVirtual:!1,i18nName:"editorField_video",i18nKeywords:"edt_UI_control_type_widget_video_keywords",index:60,accessibilityFields:O.v.NONE,title:_t.translationService.translateText("editorFieldTooltip_video")}}}]),l()(n,[{key:"setupDefaults",value:function(){return this.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_widget_video_name")," ").concat(n.instanceID)),this}},{key:"generateProperLinkForIframe",value:function(){var e=this.getForm().getEngine().getValidator().validateEmbeddableVideoURL(this.getProperty("configuration.url")),t=null;null!==e&&(t=S.a.getURLEmbedIframeSource(e)),y()(_()(n.prototype),"updateIframeOptions",this).call(this,t)}},{key:"cloneNode",value:function(e){var t=y()(_()(n.prototype),"cloneNode",this).call(this,!!e);return t.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_widget_video_name")," ").concat(n.instanceID)),t}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){return[]}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"configuration.url",type:"string",optional:!0};default:return null}}}]),n}(_t);v()(vt,"instanceID",0),v()(vt,"nodeName","widget-video");var Ot=n(45),bt=function(){function e(t,n,i,r){o()(this,e),v()(this,"app",void 0),v()(this,"jq",void 0),v()(this,"notificationsAreaContainer",void 0),v()(this,"mainApplicationNode",void 0),this.app=t,this.jq=n,this.notificationsAreaContainer=i,this.mainApplicationNode=r}return l()(e,[{key:"alert",value:function(e,t,n,i){var r=this.createDialog(String(e||this.app.getI18n().translateText("myforms_UI_dlg_title_ALERT")),[{type:it.f.OK,callback:function(e,t){n&&P()(n,Function)&&n(),t.close()}}],{width:i&&i.width?i.width:"500px",height:i&&i.height?i.height:void 0});r.body.textContent=String(t||"")||this.app.getI18n().translateText("myforms_UI_dlg_title_ALERT"),r.body.setAttribute("data-dialog-role","system-dialog")}},{key:"prompt",value:function(e,t,n,i){var r=this.createDialog(String(e||this.app.getI18n().translateText("myforms_UI_dlg_title_QUESTION")),[{type:it.f.YES,callback:function(e,t){n&&P()(n,Function)&&n(),t.close()}},{type:it.f.NO,callback:function(e,t){i&&P()(i,Function)&&(i(),it.f.DOWNLOAD),t.close()}}],{width:"600px"});r.body.textContent=String(t||"")||this.app.getI18n().translateText("myforms_UI_dlg_title_QUESTION"),r.body.setAttribute("data-dialog-role","system-dialog")}},{key:"createDialog",value:function(t,n,i){return function(r,a){var o=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div"),c=document.createElement("div"),u=document.createElement("div"),d=document.createElement("div"),p=document.createElement("div");o.tabIndex=0,o.className="ui-modal",s.className="ui-dialog",l.className="ui-titlebar",l.textContent=t,c.className="ui-titlebody",d.className="ui-body",p.className="ui-buttons bootstrap-iso",u.className="ui-close i123-close",o.appendChild(s),l.appendChild(c),l.appendChild(u),s.appendChild(l),s.appendChild(d);var h=!1;function _(e){var t;e.preventDefault(),e.stopPropagation(),a(p).find("> button").each((function(){switch(parseInt(a(this).attr("data-role").replace(/^button-type-/,""))){case it.f.OK:case it.f.YES:case it.f.SAVE:case it.f.FORM_MIGRATE:t||(t=this)}})),t&&a(t).click()}var g={close:function(){h||(a(d).find("form").off("submit",_),o.parentNode.removeChild(o),h=!0)},body:d,titlebody:c,dialog:s,setHTML:function(e){d.innerHTML=e,a(d).find("form").on("submit",_)},clearInlineErrors:function(){a(d).find("label.error").text("")},hide:function(){a(o).addClass("hidden")},show:function(){a(o).removeClass("hidden")},isClosed:function(){return h}};u.onclick=function(){if(i&&i.onCloseButtonClick)try{i.onCloseButtonClick()}catch(e){}g.close()},o.addEventListener("keyup",(function(e){27==(e.keyCode||e.charCode)&&(g.close(),i&&i.onCloseButtonClick&&i.onCloseButtonClick())}),!1);for(var m=0,f=n.length;m<f;m++)!function(t){var n=document.createElement("button");n.textContent=r.getDialogButtonLabel(t.type),p.appendChild(n),n.setAttribute("data-role","button-type-".concat(t.type)),n.className="btn ".concat(e.getDialogButtonClass(t.type)),n.onclick=function(){t.callback(t.type,g)}}(n[m]);return s.appendChild(p),i&&(i.width&&(s.style.width=i.width),i.height&&(s.style.height=i.height)),document.body.appendChild(o),o.focus(),o.addEventListener("keydown",(function(e){var t=e.target||e.srcElement;t&&-1===["input","select","textarea"].indexOf(t.nodeName.toLowerCase())&&(t.hasAttribute("data-allow-keyboard")||e.stopPropagation())}),!0),o.addEventListener("keypress",(function(e){var t=e.target||e.srcElement;t&&-1===["input","select","textarea"].indexOf(t.nodeName.toLowerCase())&&e.stopPropagation()}),!0),o.addEventListener("keyup",(function(e){var t=e.target||e.srcElement;t&&-1===["input","select","textarea"].indexOf(t.nodeName.toLowerCase())&&e.stopPropagation()}),!0),g}(this,this.jq)}},{key:"getDialogButtonLabel",value:function(e){switch(e){case it.f.OK:return this.app.getI18n().translateText("myforms_UI_btn_OK");case it.f.YES:return this.app.getI18n().translateText("myforms_UI_btn_YES");case it.f.ABORT:return this.app.getI18n().translateText("myforms_UI_btn_ABORT");case it.f.RETRY:return this.app.getI18n().translateText("myforms_UI_btn_RETRY");case it.f.CANCEL:return this.app.getI18n().translateText("myforms_UI_btn_CANCEL");case it.f.IGNORE:return this.app.getI18n().translateText("myforms_UI_btn_IGNORE");case it.f.NO:return this.app.getI18n().translateText("myforms_UI_btn_NO");case it.f.SAVE:return this.app.getI18n().translateText("myforms_UI_btn_SAVE");case it.f.CHANGE:return this.app.getI18n().translateText("myforms_UI_btn_CHANGE");case it.f.DELETE:return this.app.getI18n().translateText("myforms_UI_btn_DELETE");case it.f.DOWNLOAD:return this.app.getI18n().translateText("myforms_UI_btn_DOWNLOAD");case it.f.CLOSE:return this.app.getI18n().translateText("myforms_UI_btn_CLOSE");case it.f.ENABLE_COMPLIANCE:return this.app.getI18n().translateText("myformsHipaaChangeStatusTitle0");case it.f.DISABLE_COMPLIANCE:return this.app.getI18n().translateText("myformsHipaaChangeStatusTitle1");case it.f.CREATE:return this.app.getI18n().translateText("applications_UI_btn_CREATE");case it.f.DONE:return this.app.getI18n().translateText("applications_UI_btn_DONE");case it.f.TRY_FORM:return this.app.getI18n().translateText("oldEditor_TryFormBtn");case it.f.NO_THANKS:return this.app.getI18n().translateText("editForm_noThanksButton");case it.f.UPDATE:return this.app.getI18n().translateText("Update");case it.f.MAYBE_LATER:return this.app.getI18n().translateText("wix_popupMaybeLater");case it.f.UPGRADE_NOW:return this.app.getI18n().translateText("LinkUpdateNowTitle");case it.f.UPGRADE_NOW_PAYWALL:return this.app.getI18n().translateText("paywall_upgrade_button_1");case it.f.CONTINUE:return this.app.getI18n().translateText("userServeyPopup_continue");case it.f.KEEP_EDITING_FORM:return this.app.getI18n().translateText("edt_UI_btn_keep_editing_form");case it.f.CLOSE_EDITOR:return this.app.getI18n().translateText("edt_UI_btn_close_editor");case it.f.IMPORT:return this.app.getI18n().translateText("edt_UI_btn_import");case it.f.ADD_DOMAIN:return this.app.getI18n().translateText("js_iep_domainalias05");case it.f.VALIDATE:return this.app.getI18n().translateText("edt_UI_btn_validate_smtp");case it.f.FORM_MIGRATE:return"Migrate";case it.f.UPGRADE_TO_ENTERPRISE:return this.app.getI18n().translateText("paywall_upgrade_button_2");case it.f.REQUEST_A_DEMO_CORPORATE_PAYWALL:return this.app.getI18n().translateText("paywall_request_a_demo");case it.f.CONTACT_SUPPORT:return this.app.getI18n().translateText("paywalls_contact_support");default:throw new Error("Invalid button type: ".concat(JSON.stringify(e),". Please use one of EDialogButtonType types"))}}},{key:"getCurrentNotification",value:function(){return this.notificationsAreaContainer.firstElementChild}},{key:"createNotification",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:it.i.DEFAULT,r=arguments.length>3?arguments[3]:void 0,a=document.createElement("div");if(a.className="notification",a.innerHTML=n?e.escapeHTML(t):t,r||void 0===r){var o=document.createElement("div");o.className="close",a.appendChild(o)}switch(this.notificationsAreaContainer.innerHTML="",i){case it.i.DEFAULT:break;case it.i.ERROR:this.jq(a).prepend('<span class="i123-warning"></span>'),this.jq(a).addClass("ERROR");break;case it.i.SUCCESS:this.jq(a).prepend('<span class="i123-check"></span>'),this.jq(a).addClass("SUCCESS")}return this.notificationsAreaContainer.appendChild(a),this.jq(this.mainApplicationNode).addClass("with-notification"),a}},{key:"createResponsiveNotification",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:it.i.DEFAULT,r=arguments.length>3?arguments[3]:void 0,a=document.createElement("div"),o=n?e.escapeHTML(t):t;if(a.className="notification",a.innerHTML='<span class="notification-content">'.concat(o,"</span>"),r||void 0===r){var s=document.createElement("div");s.className="close",a.appendChild(s)}switch(this.notificationsAreaContainer.innerHTML="",i){case it.i.DEFAULT:break;case it.i.ERROR:this.jq(a).prepend('<span class="i123-warning"></span>'),this.jq(a).addClass("ERROR");break;case it.i.SUCCESS:this.jq(a).prepend('<span class="i123-check"></span>'),this.jq(a).addClass("SUCCESS")}return this.notificationsAreaContainer.appendChild(a),this.jq(this.mainApplicationNode).addClass("with-notification"),a}},{key:"closeAllNotifications",value:function(){this.jq(this.mainApplicationNode).removeClass("with-notification"),this.notificationsAreaContainer.innerHTML=""}},{key:"getRootNode",value:function(){return this.mainApplicationNode}}],[{key:"getDialogButtonClass",value:function(e){switch(e){case it.f.OK:case it.f.YES:case it.f.SAVE:case it.f.CHANGE:case it.f.DOWNLOAD:case it.f.ENABLE_COMPLIANCE:case it.f.CREATE:case it.f.DONE:case it.f.TRY_FORM:case it.f.UPDATE:case it.f.UPGRADE_NOW:case it.f.CONTINUE:case it.f.KEEP_EDITING_FORM:case it.f.IMPORT:case it.f.ADD_DOMAIN:case it.f.VALIDATE:case it.f.FORM_MIGRATE:return"btn-secondary-cta";case it.f.DELETE:case it.f.DISABLE_COMPLIANCE:return"btn-secondary-red";case it.f.UPGRADE_NOW_PAYWALL:case it.f.UPGRADE_TO_ENTERPRISE:case it.f.REQUEST_A_DEMO_CORPORATE_PAYWALL:case it.f.CONTACT_SUPPORT:return"btn-upgrade";default:return"btn-outline"}}},{key:"escapeHTML",value:function(t){e.HTMLEscaper.textContent=t;var n=e.HTMLEscaper.innerHTML;return e.HTMLEscaper.textContent="",n}}]),e}();v()(bt,"HTMLEscaper",document.createElement("div"));var Ct=n(94),It=n(85);function Rt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Pt=function(e){u()(n,e);var t=Rt(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"datasetName",void 0),e.values=[],e}return l()(n,[{key:"getName",value:function(){return this.datasetName}},{key:"withName",value:function(e){return this.datasetName=e,this}},{key:"getValues",value:function(){return this.values}},{key:"withValue",value:function(e){return this.values.push(e),this}}]),n}(It.a),Nt=n(28);function At(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var St=function(e){u()(n,e);var t=At(n);function n(e){var i;return o()(this,n),i=t.call(this,e,e.getJQuery(),window.document.getElementById("notifications-area"),window.document.body),v()(A()(i),"engine",void 0),v()(A()(i),"datasetProvider",void 0),i.engine=e,i.datasetProvider=new Ct.a,i.initDOMEvents(),i}return l()(n,[{key:"upgrade",value:function(e,t){!function(i,r){var a=r.engine.getLoader().getCommandDispatcher();a.editorValueRendererFactory&&a.editorValueRendererFactory.injectDeferredElements(e);for(var o=0,s=n.plugins.length;o<s;o++)if(!t||t&&t.indexOf(n.plugins[o].getName())>-1)try{n.plugins[o].upgrade(i,e,r)}catch(l){console.warn("FAILED TO UPGRADE, PLUGIN = ",n.plugins[o])}}(this.jq,this)}},{key:"getSelectedDataset",value:function(e,t,n){return function(i,r,a,o,s,l,c){return a.Deferred((function(u){o.get("/modules/Typescript/Form/resources/options-dataset-dialog.html").then((function(o){for(var d,p,h,_={datasets:[]},g=new Nt.a(o),m=null,f=0,E=e.length;f<E;f++)(d=s.getDatasetByType(e[f]))&&_.datasets.push({id:e[f],name:d.getName().text,i18nName:d.getName().i18n||null});_.title="Choices Sets",_.i18nTitle="edt_text_choices_sets",h=function(){for(var e=[],t=0,i=n.length;t<i;t++)e.push(n[t].text);return e}().join("\n"),_.existingOptions=h;(p=i.createDialog(t,[{type:it.f.CANCEL,callback:function(){p.close(),u.reject(new Error("User closed the dialog by pressing the Cancel button"))}},{type:it.f.SAVE,callback:function(){var e,t=String(a(p.body).find(".values-placeholder > textarea").val()||"").replace(/(^[\s]+|[\s]+$)/g,""),n=t.split("\n"),i=new Pt,r=!1;if(""!==t){null!==m&&(e=s.getDatasetByType(m)),i.withName(e?e.getName():{text:"User provided dataset"});for(var o=0,l=n.length;o<l;o++)n[o]=n[o].replace(/(^[\s]+|[\s]+$)/g,""),""!==n[o]&&(i.withValue({text:n[o],i18n:e?e.getTranslationForText(n[o]):null}),r=!0);r&&(p.close(),u.resolve(i))}}}],{width:"600px",height:"466px",onCloseButtonClick:function(){u.reject(new Error("User closed the dialog by pressing the X button"))}})).body.innerHTML=g.parse(_),p.body.setAttribute("data-dialog-role","choice-importer-dialog"),c.addPerfectScrollbar(p.body),l.translateDOMNode(p.body),a(p.body).on("click","a[data-role=dataset][data-type-id]",(function(){for(var e=parseInt(a(this).attr("data-type-id")),t=s.getDatasetByType(e).getValues()||[],n=[],i=r.getEngine().getI18n(),o=0,l=t.length;o<l;o++)n.push(i.translateText(t[o].i18n)&&i.translateText(t[o].i18n)!==t[o].i18n?i.translateText(t[o].i18n):t[o].text);a(p.body).find(".values-placeholder > textarea").val(n.join("\n")),m=e})).on("keydown","textarea",(function(){this.style.height="5px",this.style.height="".concat(this.scrollHeight,"px")}))})).fail((function(e){u.reject(e)}))})).promise()}(this.engine.getLoader().getUI(),this,this.engine.getJQuery(),this.engine.getResourceManager(),this.datasetProvider,this.engine.getI18n(),this.getEngine().getLoader().getCommandDispatcher())}},{key:"getEngine",value:function(){return this.engine}},{key:"initDOMEvents",value:function(){!function(e,t){e("#notifications-area").on("click",".notification > .close",(function(){this.parentNode.parentNode.removeChild(this.parentNode),e("body").removeClass("with-notification")})),document.body.addEventListener("mousewheel",(function(e){e.target&&e.target.className&&"ui-modal"===e.target.className&&(e.preventDefault(),e.stopPropagation())}),!0),document.body.addEventListener("mousemove",(function(e){e.target&&e.target.className&&"ui-modal"===e.target.className&&(e.preventDefault(),e.stopPropagation())}),!0)}(this.jq)}},{key:"createDialog",value:function(e,t,i){var r=y()(_()(n.prototype),"createDialog",this).call(this,e,t,i);return S.a.scrollElementIntoView(r.dialog),S.a.scrollElementIntoViewOnWix(),r}}],[{key:"addPlugin",value:function(e){this.plugins.push(e)}}]),n}(bt);v()(St,"plugins",[]);var Lt=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){e(t).find("input[type=hidden][data-plugin=accepted-days-of-week]").each((function(){var t=null;this.getAttribute("data-value")&&(t=JSON.parse(this.getAttribute("data-value"))),this.value=JSON.stringify(t),null!==t?e(this).closest("div[data-role=property]").find("div[data-role=secondary] input[type=checkbox]").each((function(){this.checked=t.indexOf(~~this.name.substr(1))>-1})):e(this).closest("div[data-role=property]").find("div[data-role=secondary] input[type=checkbox]").each((function(){this.checked=!0}))})),e(t).attr("data-accepted-days-of-week-upgraded")||(e(t).on("click","input[type=hidden][data-plugin=accepted-days-of-week] + [data-role=secondary] input[type=checkbox]",(function(t){t.stopPropagation();var n=[];e(this).closest("div[data-role=secondary]").find("input[type=checkbox]").each((function(){this.checked&&n.push(~~this.name.substr(1))})),e(this).closest("div[data-role=property]").find("input[type=hidden][data-plugin=accepted-days-of-week]").each((function(){e(this).val(JSON.stringify(n)),e(this).trigger("input")}))})),e(t).attr("data-accepted-days-of-week-upgraded","1"))}}]),e}();v()(Lt,"NAME","AcceptedDaysOfWeekInspectorPlugin");var Dt=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t){e(t).find("input[data-plugin=captcha-configuration-type]").each((function(){var t;e(t=this).closest("label").find("div[data-plugin-type=captcha-configuration-type]").each((function(){!function(n){e(n).on("click","input[type=radio]",(function(n){t.value=this.value,e(t).trigger("input"),n.stopPropagation()}));var i=JSON.parse(t.getAttribute("data-value"));e(n).find("input[type=radio]").each((function(){var e=this;setTimeout((function(){e.checked=~~e.value===i}))}))}(this)}))}))}}]),e}();v()(Dt,"NAME","CaptchaConfigurationInspectorPlugin");var wt=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t){e(t).find("input[type=checkbox][data-value], input[type=radio][data-value]").each((function(){this.checked=!0===this.getAttribute("data-value"),this.removeAttribute("data-value")}))}}]),e}();v()(wt,"NAME","CheckBoxAndRadioInputInspectorPlugin");var kt,Mt=n(137);!function(e){e[e.PERCENTUAL=1]="PERCENTUAL",e[e.FIXED=2]="FIXED"}(kt||(kt={}));var xt=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){var i;i=this,e(t).find("input[data-plugin=coupon-codes-editor]").each((function(){var t,r,a,o,s,l;t=this,r=JSON.parse(t.getAttribute("data-value")||"[]"),a=t.nextElementSibling.querySelector("[data-role=coupons-list]"),o=t.parentNode.querySelector("[data-role=add-coupon-code]"),s=t.parentNode.querySelector("[data-role=add-coupon-code-more]"),l=t.parentNode.querySelector("[data-role=coupon-codes-editor]"),i.updateCouponsList(r,a),e([s,l]).on("click",(function(){i.editCouponCodesDialog(S.a.clone(r),e,n).then((function(n){r.splice(0,r.length);for(var o=0,s=n.length;o<s;o++)r.push(n[o]);i.updateCouponsList(r,a),i.propagateChanges(r,t,e)}))})),e(o).on("click",(function(){i.addEmptyCouponCode(r),i.updateCouponsList(r,a),i.propagateChanges(r,t,e),n.getEngine().getLoader().execCommand("track-event","payments_coupon_set")})),e(a).on("click","[data-role=coupon-code-row] [data-role=remove]",(function(o){n.getEngine().getLoader().execCommand("track-event","payments_coupon_delete"),o.preventDefault(),o.stopPropagation();var s=~~this.parentNode.getAttribute("data-index");r.splice(s,1),i.updateCouponsList(r,a),i.propagateChanges(r,t,e)})).on("input","[data-role=coupon-code-row] > input",(function(n){var o=~~this.parentNode.getAttribute("data-index");""===this.value?(r.splice(o,1),i.updateCouponsList(r,a)):r[o].code=this.value,i.propagateChanges(r,t,e)}))}))}},{key:"createCouponCodeInputRow",value:function(e){var t=document.createElement("div");t.setAttribute("data-role","coupon-code-row"),t.classList.add("item__default-input");var n=document.createElement("input");return n.setAttribute("type","text"),t.appendChild(n),n.value=String(e||""),n.setAttribute("data-role","secondary"),t.appendChild(document.createElement("div")).setAttribute("data-role","remove"),t}},{key:"updateCouponsList",value:function(e,t){for(;t.firstChild;)t.removeChild(t.firstChild);for(var n,i=0,r=Math.min(5,e.length);i<r;i++)(n=this.createCouponCodeInputRow(e[i].code)).setAttribute("data-index",String(i)),t.appendChild(n);t.setAttribute("has-hidden-options",String(e.length>=5))}},{key:"addEmptyCouponCode",value:function(e){var t=window.JQLNativeFunctions.UNIQUE_ID_BASED_ON_DATE_MILISECOND();e.push({code:t,labelText:"",type:kt.PERCENTUAL,value:0})}},{key:"propagateChanges",value:function(e,t,n){t.value=JSON.stringify(e),n(t).trigger("input")}},{key:"editCouponCodesDialog",value:function(t,n,i){return r=i.getEngine().getResourceManager(),n.Deferred((function(a){r.get("/modules/Typescript/Form/resources/editor/Coupon/coupon-codes-editor-dialog.html").then((function(r){var o,s=i.createDialog("Coupon codes",[{callback:function(){var e=null;try{var t=[];n(s.body).find("table tbody > tr").each((function(){var i,r=this,a={code:n(this).find("[data-role=code]").val(),value:(i=n(this).find("[data-role=value]").get(0),""===i.value||isNaN(i.value)?null:parseFloat(i.value)),labelText:n(this).find("[data-role=labelText]").val(),type:~~n(this).find("[data-role=type]").attr("data-value")};if(a.code=String(a.code||"").replace(/(^[\s]+|[\s]+$)/g,""),!a.code)throw e=n(this).find("[data-role=code]"),new Error("Empty coupon codes are not allowed");if(Object(H.a)(t,(function(t){if(t.code===a.code)throw e=n(r).find("[data-role=code]"),new Error("Another coupon with code ".concat(t.code," is already present!"))})),null===a.value)throw e=n(this).find("[data-role=value]"),new Error("Please specify a valid numeric discount");if(a.value<0)throw e=n(this).find("[data-role=value]"),new Error("Please specify a discount greater or equal to 0");if(a.value>100&&1===a.type)throw e=n(this).find("[data-role=value]"),new Error("Percentual coupon codes cannot have discount greater than 100");t.push(a)})),s.close(),a.resolve(t)}catch(r){i.alert("Error saving coupon codes",String(r).replace(/^Error:/g,""),(function(){e&&(e.focus(),e.select())}))}},type:it.f.SAVE},{callback:function(){a.reject(new Error("User canceled!")),s.close()},type:it.f.CANCEL}],{width:"584px",onCloseButtonClick:function(){a.reject(new Error("User closed editor without saving!"))}}),l=new Nt.a(r);s.body.innerHTML=l.parse({}),s.dialog.setAttribute("data-dialog-role","coupon-codes-editor"),o=s.body.querySelector("table");for(var c=i.getEngine().getDocument().getForm().getEditorSettingByTypeId(K.a.PAYMENT_PRODUCTS_EDITOR_SETTING).getProperty("currencyId")||e.DEFAULT_CURRENCY_ID,u=i.getEngine().getCurrency().getCurrencySymbolById(c),d=function(t){var n=document.createElement("tr"),i=n.appendChild(document.createElement("td")),r=n.appendChild(document.createElement("td")),a=n.appendChild(document.createElement("td")),o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("data-role","code"),o.value=t.code,i.appendChild(o),i.appendChild(document.createElement("div")).setAttribute("data-role","remove");var s,l=document.createElement("input");switch(l.setAttribute("type","text"),l.setAttribute("data-role","value"),l.value=String(t.value),t.type){case kt.PERCENTUAL:s=e.PERCENTAGE_SYMBOL;break;case kt.FIXED:s=u;break;default:throw new Error("Coupon code type is invalid")}var c=document.createElement("div");c.setAttribute("data-role","type"),c.setAttribute("data-value",String(t.type)),c.setAttribute("data-allow-keyboard",""),c.textContent=s,c.tabIndex=0,r.appendChild(l),r.appendChild(c),r.appendChild(function(){var t=document.createElement("div");t.setAttribute("data-role","dropdown");var n=document.createElement("div");return n.setAttribute("data-value","1"),n.textContent=e.PERCENTAGE_SYMBOL,t.appendChild(n),(n=document.createElement("div")).setAttribute("data-value","2"),n.textContent=u,t.appendChild(n),t}());var d=document.createElement("input");return d.setAttribute("type","text"),d.setAttribute("data-role","labelText"),d.value=t.labelText,a.appendChild(d),n},p=0,h=t.length;p<h;p++){var _=d(t[p]);o.tBodies[0].appendChild(_)}var g=function(){for(var e=0,t=o.tBodies[0].rows.length;e<t;e++)o.tBodies[0].rows[e].setAttribute("data-index",String(e))};g(),n(s.body).on("focus","[data-role=type]",(function(){var e=this.getAttribute("data-value");n(this).addClass("focused").next("[data-role=dropdown]").find("div[data-value]").each((function(){this.getAttribute("data-value")===e?n(this).addClass("selected"):n(this).removeClass("selected")}))})).on("blur","[data-role=type]",(function(){var e=this;setTimeout((function(){n(e).removeClass("focused")}),10)})).on("keydown","[data-role=type]",(function(e){var t=e.keyCode||e.charCode,i=n(this).hasClass("focused"),r=null;if(i){if(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||-1===[V.a.KEY_UP,V.a.KEY_DOWN,V.a.KEY_ESC,V.a.KEY_ENTER].indexOf(t))return;r=-1;var a=[];switch(n(this).next("[data-role=dropdown]").find("> div").each((function(e){a.push(this),n(this).hasClass("selected")&&(r=e)})),t){case V.a.KEY_ENTER:-1!=r&&(n(this).attr("data-value",n(a[r]).attr("data-value")),n(this).removeClass("focused"));break;case V.a.KEY_ESC:return void n(this).removeClass("focused");case V.a.KEY_DOWN:n(a[r]||null).removeClass("selected"),++r>=a.length&&(r=0),n(a[r]||null).addClass("selected");break;case V.a.KEY_UP:n(a[r]||null).removeClass("selected"),--r<0&&(r=a.length-1),n(a[r]||null).addClass("selected")}}else t===V.a.KEY_ENTER&&n(this).addClass("focused")})).on("mousedown","[data-role=dropdown] > [data-value]",(function(e){var t=~~this.getAttribute("data-value"),n=this.parentNode.previousElementSibling;n.setAttribute("data-value",String(t)),n.textContent=this.textContent,t===kt.PERCENTUAL&&parseFloat(n.previousElementSibling.value||"0")>100&&(n.previousElementSibling.value="")})).on("mouseenter","[data-role=dropdown] > [data-value]",(function(e){var t=this;n(this).parent().find("[data-value]").each((function(){this!==t?n(this).removeClass("selected"):n(this).addClass("selected")}))})).on("click","[data-role=remove]",(function(){var e=~~n(this).closest("tr").attr("data-index");n(this).closest("tr").remove(),t.splice(e,1),g()})).on("click","td[data-role=add-coupon]",(function(){var e={value:0,code:window.JQLNativeFunctions.UNIQUE_ID_BASED_ON_DATE_MILISECOND(),type:kt.PERCENTUAL,labelText:""};t.push(e);var n=d(e);o.tBodies[0].appendChild(n),g(),s.body.scrollTop=8e7,i.getEngine().getLoader().execCommand("track-event","payments_coupon_set")})),n(s.body).perfectScrollbar()})).fail((function(){a.reject(new Error("Failed to fetch coupon codes editor dialog markup"))}))})).promise();var r}}]),e}();v()(xt,"NAME","CouponCodesInspectorPlugin"),v()(xt,"DEFAULT_CURRENCY_ID",1),v()(xt,"PERCENTAGE_SYMBOL","%");var Ut=function(){function e(){o()(this,e),v()(this,"PRESETS_CONFIGURATION",{notSet:{text:"none",index:0},"-1w":{text:"today -1 week",index:1},"-1d":{text:"yesterday",index:2},now:{text:"today",index:3},"+1d":{text:"tomorrow",index:4},"+1w":{text:"today +1 week",index:5},"-1hh":{text:"now -1 hour",index:1},"-1mm":{text:"now -1 minute",index:2},"+1mm":{text:"now +1 minute",index:4},"+1hh":{text:"now +1 hour",index:5},"-2d":{text:"Two days ago",index:6},"-3d":{text:"3 days ago",index:7},"-2w":{text:"2 weeks ago",index:8},"-3w":{text:"3 weeks ago",index:9},"-1m":{text:"1 month ago",index:10},"-2m":{text:"Two months ago",index:11},"-3m":{text:"3 months ago",index:12},"-6m":{text:"6 months ago",index:13},"-1y":{text:"1 year ago",index:14},"+2d":{text:"Overmorrow",index:15},"+3d":{text:"Over 3 days",index:16},"+2w":{text:"Over 2 weeks",index:17},"+3w":{text:"Over 3 weeks",index:18},"+1m":{text:"Over 1 month",index:19},"+2m":{text:"Over 2 months",index:20},"+3m":{text:"Over 3 months",index:21},"+6m":{text:"Over 6 months",index:22},"+1y":{text:"Over 1 year",index:23},custom:{text:"custom date",index:99},customTime:{text:"custom time",index:99}})}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"updateLabelText",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=String(e.value||"").toLowerCase(),o="custom"!==a&&"customTime"!==a&&""!==a&&i.indexOf(a)>-1;o||""===a&&!r?e.removeAttribute("data-is-visible"):e.setAttribute("data-is-visible",""),n.textContent=o?"now"===a?this.setNowTextForControl(e):this.PRESETS_CONFIGURATION[a].text:""===a||"notset"===a?this.PRESETS_CONFIGURATION.notSet.text:a}},{key:"setNowTextForControl",value:function(e){return e.hasAttribute("data-return-time-part-only")?"now":"today"}},{key:"triggerChange",value:function(e,t,n,i,r,a){var o=n(t).closest("[data-role=property]").attr("data-validation-type")||j.a.VALIDATOR_TYPE_DATE_MMDDYYYY,s=i.stringToTime(t.value,o),l=String(t.value||"").toLowerCase(),c=n("#item").attr("data-target-element");a.getEngine().getDocument().getElementByHash(c);null===s?e.value="null":i.dateAdd(t.value)||i.isHumanDateString(t.value)?e.value=JSON.stringify(t.value):e.value=JSON.stringify(r?3600*s.getHours()+60*s.getMinutes()+s.getSeconds():~~(s.getTime()/1e3)),""!==l&&null!==l||(e.value=l),n(e).trigger("input")}},{key:"updatePropertyCustomAttribute",value:function(e,t,n){!1===n.indexOf(t.value)>-1&&""!==t.value?e(t).closest("[data-role=property]").attr("data-property-has-custom-value","1"):""===t.value?e(t).on("blur",(function(){e(t).closest("[data-role=property]").removeAttr("data-property-has-custom-value")})):e(t).closest("[data-role=property]").removeAttr("data-property-has-custom-value")}},{key:"listenForDateFormatAttributePropagationChange",value:function(t,n,i,r,a){r(t).closest("[data-role=property]").on("attribute:propagate",(function(){var o=n.value,s=this.getAttribute("data-validation-type");if(""!==o&&s)try{var l=JSON.parse(o);if("number"!==typeof l)return;if(0===l||null===l)return;var c=null;switch(s){case j.a.VALIDATOR_TYPE_DATE_MMDDYYYY:case j.a.VALIDATOR_TYPE_DATE_DDMMYYYY:case j.a.VALIDATOR_TYPE_DATE_YYYYMMDD:case j.a.VALIDATOR_TYPE_DATE_MMYYYY:c=e.SUPPORTED_DATE_VALIDATOR_FORMATS[s];break;default:return}var u=a.formatTime(l,c);r(i).text(u),r(t).val(u)}catch(d){}}))}},{key:"upgrade",value:function(t,n,i){var r,a=i.getEngine().getTimeUtils();r=this,t(n).find("input[data-plugin=date-editor]").each((function(){!function(n){var o=String(n.getAttribute("data-presets")||"now -1d +1d -2d +2d -3d +3d -1w +1w -2w +2w -3w +3w -1m +1m -2m +2m -3m +3m -6m +6m -1y +1y custom").trim().split(/[\s]+/).filter((function(e){return!!e&&!!r.PRESETS_CONFIGURATION[e]})).sort((function(e,t){return r.PRESETS_CONFIGURATION[e].index-r.PRESETS_CONFIGURATION[t].index})),s=n.hasAttribute("data-return-time-part-only");if(n.setAttribute("data-role","secondary"),n.title=t(n).closest("label").find("span.property-label").text(),""!==n.value&&"0"!==n.value&&n.value===String(~~n.value))if(s)n.value=a.intToTime(~~n.value,lt.a.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?"%H:%i:%S":"%H:%i");else{var l=t(n).closest("[data-role=property]").attr("data-validation-type"),c=e.SUPPORTED_DATE_VALIDATOR_FORMATS[l]||"%m/%d/%Y";n.value=a.formatTime(~~n.value,c)}n.value="0"===n.value?s?"00:00":"":n.value;var u=document.createElement("div"),d=document.createElement("input");d.setAttribute("type","hidden"),d.setAttribute("data-is-json-value",""),d.value=String(~~n.value)===n.value?n.value:JSON.stringify(n.value||null),t(u).attr("data-role","text-dropdown"),r.listenForDateFormatAttributePropagationChange(n,d,u,t,a),t(n).before(u),t(n).before(d),t(n).closest("label").attr("data-has-text-dropdown","1"),t(n).closest("[data-role=property]").attr("data-plugin","date-editor"),r.updatePropertyCustomAttribute(t,n,o),r.updateLabelText(n,d,u,o),t(n).on("input",(function(){r.updateLabelText(n,d,u,o),r.triggerChange(d,n,t,a,s,i),r.updatePropertyCustomAttribute(t,n,o)})),t(u).on("click",(function(){if(!t(u).closest("[data-role=property]").attr("data-is-opened")){t(u).closest("[data-role=property]").attr("data-is-opened","1");var l,c=document.createElement("div");c.setAttribute("data-role","text-dropdown-overlay");for(var p=0,h=o.length;p<h;p++)(l=document.createElement("div")).setAttribute("data-value",JSON.stringify(o[p])),l.textContent="now"===o[p]?r.setNowTextForControl(n):r.PRESETS_CONFIGURATION[o[p]].text,c.appendChild(l);var _,g=function(e){var n=e.srcElement||e.target;n===c||t.contains(c,n)||n===u||(t(u).closest("[data-role=property]").removeAttr("data-is-opened"),t(c).remove(),document.body.removeEventListener("mousedown",g,!0),g=null)};if(x.a.isMobile()){var m=document.createElement("div");m.setAttribute("data-role","text-dropdown"),m.appendChild(c);var f=i.getEngine().getI18n();(_=i.getEngine().getLoader().getUI().createDialog(f.translateText("edt_dropdown_UI_please_choose"),[],{width:"100%",height:"100%",onCloseButtonClick:function(){t(u).closest("[data-role=property]").removeAttr("data-is-opened")}})).body.appendChild(m),_.show()}else{u.appendChild(c);var E=u.getBoundingClientRect();document.body.getBoundingClientRect().height<E.top+E.height?u.setAttribute("data-dropdown-position","top"):u.setAttribute("data-dropdown-position","bottom"),document.body.addEventListener("mousedown",g,!0)}t(c).on("click","> div",(function(l){var c=JSON.parse(this.getAttribute("data-value")),p=new Date,h=t(n).closest("[data-role=property]").attr("data-validation-type"),m=e.SUPPORTED_DATE_VALIDATOR_FORMATS[h]||"%m/%d/%Y";n.value="custom"===c||"customTime"===c||""===c?s?a.intToTime(3600*p.getHours()+60*p.getMinutes()+p.getSeconds(),lt.a.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?"%H:%i:%S":"%H:%i"):a.formatTime(parseInt(String(+new Date/1e3)),m):c,r.updateLabelText(n,d,u,o),r.triggerChange(d,n,t,a,s,i),r.updatePropertyCustomAttribute(t,n,o),document.body.removeEventListener("mousedown",g,!0),x.a.isMobile()&&_&&_.close(),setTimeout((function(){t(u).closest("[data-role=property]").removeAttr("data-is-opened")}),50)})).on("mousewheel",(function(e){e.stopPropagation()}))}}))}(this)}))}}]),e}();v()(Ut,"NAME","DateEditorInspectorPlugin"),v()(Ut,"SUPPORTED_DATE_VALIDATOR_FORMATS",{datemmddyyyy:"%m/%d/%Y",dateddmmyyyy:"%d/%m/%Y",dateyyyymmdd:"%Y/%m/%d",datemmyyyy:"%m/%Y"});var Ft=n(101),Bt=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"getPluginOptions",value:function(e){for(var t=String(e||"").toLowerCase().split(/[\s,]+/),n=[],i=0,r=t.length;i<r;i++)t[i]&&n.push(t[i]);return n.length?n:null}},{key:"hasPluginOption",value:function(e,t){return!(!e||!t)&&e.indexOf(t)>-1}},{key:"createOverlayOptionHeaderElement",value:function(e,t,n){var i,r,a=document.createElement("div");return a.setAttribute("data-role","header"),e&&((i=document.createElement("a")).setAttribute("data-role","header-command"),i.setAttribute("data-command","add-item"),i.href="javascript:;",i.textContent="Add",a.appendChild(i)),t&&((r=document.createElement("span")).appendChild(document.createTextNode(t)),r.setAttribute("data-is-disabled","1"),a.appendChild(r)),n&&((i=document.createElement("a")).setAttribute("data-role","header-command"),i.setAttribute("data-command","select-all"),i.href="javascript:;",i.textContent="All",i.title="Select All",a.appendChild(i),(i=document.createElement("a")).setAttribute("data-role","header-command"),i.setAttribute("data-command","select-none"),i.href="javascript:;",i.textContent="None",i.title="Deselect All",a.appendChild(i)),a}},{key:"evalCallback",value:function(e){return new Function("return "+e)()}},{key:"addNewItem",value:function(e,t,n){var i;try{if(!(i=this.evalCallback(e))||!i.then||"function"!==typeof i.then||!i.fail||"function"!==typeof i.fail||!i.always||"function"!==typeof i.always)throw new Error("The returned eval'd text ".concat(JSON.stringify(e)," does not seem to be a JQueryPromise!"))}catch(r){return console.warn("Failed executing callback: ".concat(JSON.stringify(e)," while running the add option plugin. Exception is shown in console!")),void console.error(r)}i.then((function(e){var i,a={};if(!e)throw new Error("Promise did not returned a valid option!");if("string"===typeof e||"number"===typeof e)a.text=a.value=String(e),a.selected=!1;else if(a.text=e.text||e.value||null,a.value=e.value||null,a.selected=!!e.selected,null===a.text||null===a.value)throw new Error("Promise did not returned a valid option!");for(var o=0,s=t.length;o<s;o++)if(t[o].value===a.value)throw new Error("Adding duplicate options is not supported!");(i=document.createElement("div")).setAttribute("data-value",JSON.stringify(a.value)),i.textContent=a.text,a.selected&&i.setAttribute("data-is-selected",""),n.appendChild(i),t.push(a);try{i.scrollIntoView()}catch(r){}}))}},{key:"upgrade",value:function(t,n,i){var r;r=this,t(n).find("select[data-appearance=text]").each((function(){!function(a){t(a).closest("label").attr("data-has-text-dropdown","1");var o,s=document.createElement("input"),l=document.createElement("div"),c=[],u=a.hasAttribute("multiple"),d=a.getAttribute("data-empty-state-label")||"0 selected",p=a.hasAttribute("data-is-json-value"),h=a.hasAttribute("data-plugin-options")?r.getPluginOptions(a.getAttribute("data-plugin-options")):null,_=a.hasAttribute("data-allow-addition")&&a.hasAttribute("data-add-new-item-callback"),g=a.getAttribute("data-add-new-item-callback")||null,m=a.hasAttribute("data-dropdown-empty-state-option-i18n")&&i.getEngine().getI18n().translateText(a.getAttribute("data-dropdown-empty-state-option-i18n"))?i.getEngine().getI18n().translateText(a.getAttribute("data-dropdown-empty-state-option-i18n")):a.hasAttribute("data-dropdown-empty-state-option")&&a.getAttribute("data-dropdown-empty-state-option")||null,f=r.hasPluginOption(h,e.PLUGIN_SELECT_ALL_SELECT_NONE);a.hasAttribute("data-value")&&(u||(a.value=a.getAttribute("data-value")),a.removeAttribute("data-value")),a.hasAttribute("data-skip-errors")&&l.setAttribute("data-skip-errors","1"),s.setAttribute("type","hidden");for(var E=0,y=a.attributes.length;E<y;E++)s.hasAttribute(a.attributes[E].name)||s.setAttribute(a.attributes[E].name,a.attributes[E].value);a.parentNode.insertBefore(s,a),a.parentNode.insertBefore(l,a),a.parentNode.removeChild(a);for(var T=0,v=a.options.length;T<v;T++)c.push({value:a.options[T].value,text:a.options[T].text,i18nText:a.options[T].hasAttribute("data-i18n-text")&&a.options[T].getAttribute("data-i18n-text")||null,selected:a.options[T].selected,webfontClass:a.options[T].hasAttribute("data-is-webfont")&&a.options[T].getAttribute("data-webfont-class")||null});c.length&&(m=null),r.notifyChangeEvent(s,u,a.value,c,t,p,!1),o=r.getElementCaption(c,a.value,u,d,i),l.textContent=l.title=r.getTransformedTextCaption(o,h),""===o?l.setAttribute("data-is-not-selected","1"):l.removeAttribute("data-is-not-selected"),l.setAttribute("data-role","text-dropdown"),t(l).on("click",(function(e){if(!l.hasAttribute("data-is-opened")&&(!t(l).closest("#item")||!t(l).closest("#item").attr("data-autosubmit-enabled")||1!==Number(t(l).closest("#item").attr("data-autosubmit-enabled")))){e.stopPropagation(),e.preventDefault(),l.setAttribute("data-is-opened","1");var a,E=document.createElement("div");E.setAttribute("data-role","text-dropdown-overlay"),u&&E.setAttribute("data-is-multiple",""),(_||m||f)&&E.appendChild(r.createOverlayOptionHeaderElement(_,m,f));for(var y=0,T=c.length;y<T;y++)(a=document.createElement("div")).setAttribute("data-value",JSON.stringify(c[y].value)),c[y].i18nText&&a.setAttribute("data-i18n-text",c[y].i18nText),c[y].webfontClass&&(a.setAttribute("data-is-webfont","1"),a.setAttribute("data-webfont-class",c[y].webfontClass)),a.textContent=r.getTransformedTextCaption(c[y].text,h),r.transformOptionElement(a,c[y],h),E.appendChild(a),c[y].selected?a.setAttribute("data-is-selected",""):a.removeAttribute("data-is-selected");i.getEngine().getI18n().translateDOMNode(E);var v,O=function(e){var n=e.srcElement||e.target;n===E||t.contains(E,n)||n===l||(l.removeAttribute("data-is-opened"),t(E).remove(),document.body.removeEventListener("mousedown",O,!0),O=null)};if(x.a.isMobile()){var b=function(){l.removeAttribute("data-is-opened"),v.close()},C=u?[{type:it.f.DONE,callback:b}]:[],I=document.createElement("div");I.setAttribute("data-role","text-dropdown"),I.appendChild(E);var R=i.getEngine().getLoader().getUI(),P=i.getEngine().getI18n();(v=R.createDialog(P.translateText("edt_dropdown_UI_please_choose"),C,{width:"100%",height:"100%",onCloseButtonClick:b})).body.appendChild(I)}else{l.appendChild(E);var N=l.getBoundingClientRect(),A=document.body.getBoundingClientRect(),S=n.getBoundingClientRect(),L=A.height+A.top>S.height?S:A;L.bottom-N.bottom>E.offsetHeight?l.setAttribute("data-dropdown-position","bottom"):(l.setAttribute("data-dropdown-position","top"),N.top-L.top<E.offsetHeight+5&&(E.style.bottom="-".concat(E.offsetHeight-(N.bottom-L.top)+5,"px"))),document.body.addEventListener("mousedown",O,!0)}t(E).on("click","> div",(function(e){if(this.hasAttribute("data-value")){var n,a,_=null===(n=t(l))||void 0===n||null===(a=n.closest)||void 0===a?void 0:a.call(n,"[data-property-name]").attr("data-property-name");i.getEngine().getLoader().execCommand("track-event","edt_property_dropdown_click");var m,f=JSON.parse(this.getAttribute("data-value"));r.updateSelectedState(c,u,f),r.notifyChangeEvent(s,u,f,c,t,p),t(E).find("> div[data-value]").each((function(e){c[e].selected?this.setAttribute("data-is-selected",""):this.removeAttribute("data-is-selected")})),m=r.getElementCaption(c,s.value,u,d,i),l.title=m,u?l.childNodes[0].textContent=r.getTransformedTextCaption(m,h):(l.textContent=r.getTransformedTextCaption(m,h),"options.masterFontFamily"===_&&r.updateFontPropertiesIntoPanel(l.textContent),setTimeout((function(){l.removeAttribute("data-is-opened")}),10),x.a.isMobile()?v&&v.close():t(E).remove(),""===m?l.setAttribute("data-is-not-selected","1"):l.removeAttribute("data-is-not-selected"),document.body.removeEventListener("mousedown",O,!0))}else{if("header"!=this.getAttribute("data-role"))return;var y=e.srcElement||e.target;switch(!0){case t(y).is("[data-role=header-command][data-command=add-item]"):r.addNewItem(g,c,E);break;case t(y).is("[data-role=header-command][data-command=select-all]"):u&&(r.setItemsSelectedState(!0,c,E,t),r.notifyChangeEvent(s,u,null,c,t,p),o=r.getElementCaption(c,s.value,u,d,i),l.title=o,l.childNodes[0].textContent=r.getTransformedTextCaption(o,h));break;case t(y).is("[data-role=header-command][data-command=select-none]"):u&&(r.setItemsSelectedState(!1,c,E,t),r.notifyChangeEvent(s,u,null,c,t,p),o=r.getElementCaption(c,s.value,u,d,i),l.title=o,l.childNodes[0].textContent=r.getTransformedTextCaption(o,h))}}})).on("mousewheel",(function(e){e.stopPropagation()}))}}))}(this)}))}},{key:"transformOptionElement",value:function(t,n,i){n&&this.hasPluginOption(i,e.PLUGIN_OPTION_FONT_DROPDOWN)&&(t.title=t.innerText,t.hasAttribute("data-is-webfont")?(t.innerText="",t.className+=" ".concat(t.getAttribute("data-webfont-class")," gf-123")):(t.style.fontFamily=n.value||n.text||"",t.setAttribute("data-is-font-style-option","")))}},{key:"notifyChangeEvent",value:function(e,t,n,i,r,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(t){for(var s=[],l=0,c=i.length;l<c;l++)i[l].selected&&s.push(i[l].value);e.value=a?JSON.stringify(s):s.join(",")}else e.value=a?JSON.stringify(n):n;o&&r(e).trigger("input")}},{key:"updateSelectedState",value:function(e,t,n){for(var i=0,r=e.length;i<r;i++)t?e[i].value===n&&(e[i].selected=!e[i].selected):e[i].selected=e[i].value===n}},{key:"getTransformedTextCaption",value:function(t,n){return this.hasPluginOption(n,e.PLUGIN_OPTION_FONT_DROPDOWN)?String(t||"").replace(/,(.*)$/g,""):t}},{key:"getElementCaption",value:function(e,t,n,i,r){var a=r.getEngine().getI18n();if(n){for(var o=0,s="edt_text_element_caption_selected",l=a.translateText(s)&&s!==a.translateText(s)?a.translateText(s):null,c=l?" ".concat(l):" selected",u=0,d=e.length;u<d;u++)e[u].selected&&o++;return o?o+c:i}for(var p=0,h=e.length;p<h;p++)if(String(e[p].value)===String(t))return e[p].i18nText&&e[p].i18nText!==a.translateText(e[p].i18nText)?a.translateText(e[p].i18nText):e[p].text||"";return""}},{key:"setItemsSelectedState",value:function(e,t,n,i){if(t){for(var r=0,a=t.length;r<a;r++)t[r].selected=e;i(n).find("> div[data-value]").each((function(){e?this.setAttribute("data-is-selected",""):this.removeAttribute("data-is-selected")}))}}},{key:"updateFontPropertiesIntoPanel",value:function(e){var t=document.querySelectorAll('#options [data-plugin-options="font-dropdown"] + [data-role="text-dropdown"]');t.length<1||t.forEach((function(t){t.innerText=e}))}}]),e}();v()(Bt,"NAME","TextAppearanceDropDownInspectorPlugin"),v()(Bt,"PLUGIN_OPTION_FONT_DROPDOWN","font-dropdown"),v()(Bt,"PLUGIN_SELECT_ALL_SELECT_NONE","select-all");var Yt=function(){function e(){var t=this;o()(this,e),v()(this,"discountContainer",void 0),v()(this,"parentContainer",void 0),v()(this,"taxContainer",void 0),v()(this,"unitType",[{unitTypeIndex:Ft.a.PERCENTAGE,unitTypeName:"percentage",unitTypeSymbol:"%"},{unitTypeIndex:Ft.a.FIXED_VALUE,unitTypeName:"fixed_value",unitTypeSymbol:"$"}]),v()(this,"clickHandler",(function(e){var n=$(e.target),i=n.parents('[data-role="control-discount"]'),r=n.parents('[data-role="control-tax"]');0===i.length&&(t.removeClickedState(t.discountContainer.find('[data-role="control-discount"][data-has-click]').get(0)),t.setShrunkPropertyOnLabel(t.parentContainer.find('[data-property-name="discountOnTotal"] span.property-label'),!1)),0===r.length&&(t.removeClickedState(t.taxContainer.find('[data-role="control-tax"][data-has-click]').get(0)),t.setShrunkPropertyOnLabel(t.parentContainer.find('[data-property-name="taxOnTotal"] span.property-label'),!1))}))}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){this.parentContainer=e(t),this.discountContainer=this.parentContainer.find('[data-plugin="discount-on-total"]'),this.taxContainer=this.parentContainer.find('[data-plugin="tax-on-total"]'),this.upgradeDiscountContainer(n),this.upgradeTaxContainer(n),(this.discountContainer.length||this.taxContainer.length)&&(this.parentContainer.off("click",this.clickHandler),this.parentContainer.on("click",this.clickHandler))}},{key:"upgradeDiscountContainer",value:function(e){var t=this,n=e.getEngine(),i=n.getResourceManager(),r=n.getDocument().getEditorSettingByTypeId(K.a.PAYMENT_PRODUCTS_EDITOR_SETTING),a=n.getDocument().getEditorSettingByTypeId(K.a.PAYMENT_SUMMARY_EDITOR_SETTING),o=(null===r||void 0===r?void 0:r.getProperty("currencyId"))||ge.a.DEFAULT_CURRENCY_ID,s=n.getCurrency().getCurrencySymbolById(o);if(this.discountContainer.length){var l=this.generateGenericPriceFormatFromInputValue(r.getProperty("discountValue"));this.unitType[Ft.a.FIXED_VALUE].unitTypeSymbol=s;var c={currencySymbol:s,onTotalDiscountValue:l,onTotalDiscountUnitType:r.getProperty("discountType")||0,unitType:this.unitType};$.when(i.get("/modules/Typescript/Form/resources/editor/SummarySetting/discount-on-total.html")).done((function(i){a.setProperty("discountOnTotal",parseFloat(l));var o=new Nt.a(i);t.discountContainer.get(0).innerHTML="",t.discountContainer.get(0).insertAdjacentHTML("afterbegin",o.parse(c)),e.upgrade(t.discountContainer.get(0),[Bt.NAME]),t.discountContainer.mouseenter((function(e){t.setShrunkPropertyOnLabel(t.parentContainer.find('[data-property-name="discountOnTotal"] span.property-label'),!0)})),t.discountContainer.mouseleave((function(e){t.discountContainer.find('[data-role="text-dropdown-overlay"] > [data-is-selected]').trigger("click"),0==t.discountContainer.find('[data-role="control-discount"][data-has-click]').length&&t.setShrunkPropertyOnLabel(t.parentContainer.find('[data-property-name="discountOnTotal"] span.property-label'),!1)})),t.discountContainer.off("click",'[data-role="control-discount"]'),t.discountContainer.on("click",'[data-role="control-discount"]',(function(e){t.addClickedState(e.currentTarget),t.setShrunkPropertyOnLabel(t.parentContainer.find('[data-property-name="discountOnTotal"] span.property-label'),!0),t.discountContainer.find('input:not([type="hidden"])').focus()})),t.discountContainer.find('[data-role="text-dropdown"]').each((function(e,i){i.addEventListener("click",(function(e){var i=$(e.target);if(i.attr("data-value")){var a=t.discountContainer.find('input:not([type="hidden"])'),o=parseInt(JSON.parse(i.attr("data-value"))),s=t.generateGenericPriceFormatFromInputValue(a.val(),0===o),l="- ";n.getLoader().execCommand("track-event","payments_products_discount_total_type_change"),l+=t.generateDiscountAndTaxValue(s,o,c.currencySymbol),t.discountContainer.find('[data-role="control-discount"]').attr("title",l),t.discountContainer.find('[data-role="control-discount"] span').text(l),t.discountContainer.find('[data-role="control-discount"] input').each((function(e,t){$(t).val(s)})),r.setProperty("discountType",o),r.setProperty("discountValue",parseFloat(s)),n.getLoader().trigger("products_discount_tax_change"),t.removeClickedState(t.discountContainer.find('[data-role="control-discount"][data-has-click]').get(0)),t.setShrunkPropertyOnLabel(t.parentContainer.find('[data-property-name="discountOnTotal"] span.property-label'),!1),e.preventDefault()}}))})),t.discountContainer.off("change",'input:not([type="hidden"])'),t.discountContainer.on("change",'input:not([type="hidden"])',(function(e){n.getLoader().execCommand("track-event","payments_products_discount_total_value_change");var i=!1,a=$(e.currentTarget).val(),o="- ";0===c.onTotalDiscountUnitType&&(i=!0),a=t.generateGenericPriceFormatFromInputValue(a,i),o+=t.generateDiscountAndTaxValue(a,c.onTotalDiscountUnitType,c.currencySymbol),t.discountContainer.find('[data-role="control-discount"]').attr("title",o),t.discountContainer.find('[data-role="control-discount"] span').text(o),t.discountContainer.find('[data-role="control-discount"] input').each((function(e,t){$(t).val(a)})),r.setProperty("discountValue",parseFloat(a)),n.getLoader().trigger("products_discount_tax_change")}))})).fail((function(e){console.warn("Failed to open template for discount on total. Error is displayed below."),console.error(e)}))}}},{key:"upgradeTaxContainer",value:function(e){var t=this,n=e.getEngine(),i=n.getResourceManager(),r=n.getDocument().getEditorSettingByTypeId(K.a.PAYMENT_PRODUCTS_EDITOR_SETTING),a=n.getDocument().getEditorSettingByTypeId(K.a.PAYMENT_SUMMARY_EDITOR_SETTING),o=(null===r||void 0===r?void 0:r.getProperty("currencyId"))||ge.a.DEFAULT_CURRENCY_ID,s=n.getCurrency().getCurrencySymbolById(o);if(this.taxContainer.length){var l=this.generateGenericPriceFormatFromInputValue(r.getProperty("taxValue"));this.unitType[Ft.a.FIXED_VALUE].unitTypeSymbol=s;var c={currencySymbol:s,onTotalTaxValue:l,onTotalTaxUnitType:r.getProperty("taxType")||0,unitType:this.unitType};$.when(i.get("/modules/Typescript/Form/resources/editor/SummarySetting/tax-on-total.html")).done((function(i){a.setProperty("taxOnTotal",parseFloat(l));var o=new Nt.a(i);t.taxContainer.get(0).innerHTML="",t.taxContainer.get(0).insertAdjacentHTML("afterbegin",o.parse(c)),e.upgrade(t.taxContainer.get(0),[Bt.NAME]),t.taxContainer.mouseenter((function(e){t.setShrunkPropertyOnLabel(t.parentContainer.find('[data-property-name="taxOnTotal"] span.property-label'),!0)})),t.taxContainer.mouseleave((function(e){t.taxContainer.find('[data-role="text-dropdown-overlay"] > [data-is-selected]').trigger("click"),0==t.taxContainer.find('[data-role="control-tax"][data-has-click]').length&&t.setShrunkPropertyOnLabel(t.parentContainer.find('[data-property-name="taxOnTotal"] span.property-label'),!1)})),t.taxContainer.off("click",'[data-role="control-tax"]'),t.taxContainer.on("click",'[data-role="control-tax"]',(function(e){t.addClickedState(e.currentTarget),t.setShrunkPropertyOnLabel(t.parentContainer.find('[data-property-name="discountOnTotal"] span.property-label'),!0),t.taxContainer.find('input:not([type="hidden"])').focus()})),t.taxContainer.find('[data-role="text-dropdown"]').each((function(e,i){i.addEventListener("click",(function(e){var i=$(e.target);if(i.attr("data-value")){var a=t.taxContainer.find('input:not([type="hidden"])'),o=parseInt(JSON.parse(i.attr("data-value"))),s=t.generateGenericPriceFormatFromInputValue(a.val(),0===o),l="+ ";n.getLoader().execCommand("track-event","payments_products_tax_total_type_change"),l+=t.generateDiscountAndTaxValue(s,o,c.currencySymbol),t.taxContainer.find('[data-role="control-tax"]').attr("title",l),t.taxContainer.find('[data-role="control-tax"] span').text(l),t.taxContainer.find('[data-role="control-tax"] input').each((function(e,t){$(t).val(s)})),r.setProperty("taxType",o),r.setProperty("taxValue",parseFloat(s)),n.getLoader().trigger("products_discount_tax_change"),t.removeClickedState(t.taxContainer.find('[data-role="control-tax"][data-has-click]').get(0)),t.setShrunkPropertyOnLabel(t.parentContainer.find('[data-property-name="taxOnTotal"] span.property-label'),!1),e.preventDefault()}}))})),t.taxContainer.off("change",'input:not([type="hidden"])'),t.taxContainer.on("change",'input:not([type="hidden"])',(function(e){n.getLoader().execCommand("track-event","payments_products_tax_total_value_change");var i=!1,a=$(e.currentTarget).val(),o="+ ";0===c.onTotalTaxUnitType&&(i=!0),a=t.generateGenericPriceFormatFromInputValue(a,i),o+=t.generateDiscountAndTaxValue(a,c.onTotalTaxUnitType,c.currencySymbol),t.taxContainer.find('[data-role="control-tax"]').attr("title",o),t.taxContainer.find('[data-role="control-tax"] span').text(o),t.taxContainer.find('[data-role="control-tax"] input').each((function(e,t){$(t).val(a)})),r.setProperty("taxValue",parseFloat(a)),n.getLoader().trigger("products_discount_tax_change")}))})).fail((function(e){console.warn("Failed to open template for tax on total. Error is displayed below."),console.error(e)}))}}},{key:"addClickedState",value:function(e){e.setAttribute("data-has-click","")}},{key:"removeClickedState",value:function(e){e&&$(e).each((function(e,t){t.removeAttribute("data-has-click")}))}},{key:"setShrunkPropertyOnLabel",value:function(e,t){t?e.addClass("shrunk"):e.removeClass("shrunk")}},{key:"generateGenericPriceFormatFromInputValue",value:function(e,t){return t=void 0!==t&&t,e=e||"0",parseFloat(e)<0&&(e="0"),parseFloat(e)>100&&!0===t&&(e="100"),(Math.round(100*parseFloat(e||"0"))/100).toFixed(2)}},{key:"generateDiscountAndTaxValue",value:function(e,t,n){var i=e+this.unitType[Ft.a.PERCENTAGE].unitTypeSymbol;return 1===t&&(i=n+e),i}}]),e}();v()(Yt,"NAME","DiscountAndTaxOnTotalInspectorPlugin");var Vt=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"isSelected",value:function(e,t){for(var n=String(e),i=0,r=t.length;i<r;i++)if(String(t[i])===n)return!0;return!1}},{key:"upgrade",value:function(e,t){var n;n=this,e(t).find("select[data-plugin][data-value]").each((function(){var t;if(this.hasAttribute("data-is-json-value")){t=!0;try{var i=JSON.parse(e(this).attr("data-value")||"null")||null;if(null!==i)switch(!0){case"string"===typeof i:this.value=i;break;case P()(i,Array):for(var r=0,a=this.options.length;r<a;r++)n.isSelected(this.options[r].value,i)&&(this.options[r].selected=!0)}else this.value=null}catch(o){console.warn("Could not parse dropdown values as JSON. Exception is shown below"),console.error(o)}t?e(this).attr("value",null):e(this).attr("data-value",null)}else this.value=e(this).attr("data-value"),e(this).attr("data-value",null),t=!1}))}}]),e}();v()(Vt,"NAME","DropDownInspectorPlugin");var Ht=function(){function e(){o()(this,e),v()(this,"groups",null),v()(this,"modalIsLoading",!1)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){var i;i=this,e(t).find('[data-property-name="choices-isDropdownWithForms"]').each((function(){e(this).on("click","[data-role=edit-dropdowns-forms]",(function(t){if(t.preventDefault(),!i.modalIsLoading){i.changeShowModalStatus();var r=e(this).closest("#item[data-role=editor-panel][data-target-element]").attr("data-target-element"),a=n.getEngine().getDocument().getElementByHash(r);i.editGroupsList(a,e,n)}})).on("change","input[type=checkbox]",(function(){if(this.checked)e(this).closest("[data-role=attribute-group]").attr("data-hide-choices",""),e("[data-role=edit-dropdowns-forms]").trigger("click");else{e(this).closest("[data-role=attribute-group]").attr("data-hide-choices",null);var t=e(this).closest("#item[data-role=editor-panel][data-target-element]").attr("data-target-element");n.getEngine().getDocument().getElementByHash(t).setProperty("choices.isDropdownWithForms",!1).setProperty("choices.values",[{text:"Please Select"}]).synchronizeValue(),n.getEngine().getLoader().getCommandDispatcher().reloadVisiblePanel()}})),function(t){setTimeout((function(){e(t).find("input[type=checkbox]").each((function(){var t=this.checked;e(this).closest("[data-role=attribute-group]").attr("data-hide-choices",t?"":null)}))}),50)}(this)}))}},{key:"editGroupsList",value:function(e,t,n){var i,r,a;i=this,r=n.getEngine().getLoader().getUI(),a=n.getEngine().getResourceManager(),i.loadGroups(t,n).then((function(n){i.includeDependency();var o=r.createDialog("Import forms",[{type:it.f.SAVE,callback:function(){for(var n=[],i=t("#hiltiSelectGroups").val(),r=0,a=i.length||0;r<a;r++)n.push({text:i[r]});e.setProperty("choices.values",n),o.close()}},{type:it.f.CANCEL,callback:function(){o.close()}}],{width:"500px",height:"250px"});o.dialog.setAttribute("data-dialog-role","dropdown-forms-list-dialog"),a.get("/modules/Typescript/Form/resources/editor/Dropdown/dropdown-forms-list-dialog.html").then((function(r){var a=new Nt.a(r),s=e.getProperty("choices.values")||[],l=0,c={groups:function(e){for(var t,n=[],i=0,r=e.length;i<r;i++){t=!1;for(var a=0,o=s.length;a<o;a++)if(e[i].id===~~s[a].text){t=!0,l++;break}n.push({id:e[i].id,name:e[i].name,level:e[i].level,selected:t})}return n}(S.a.clone(n)),hideClearAll:!(l>=2)};o.body.innerHTML=a.parse(c),i.initiateSelect2DropdownAndDependency(t),i.changeShowModalStatus()})).fail((function(e){r.alert("Error loading component","There was a network error obtaining the dialog contents. Please retry. If the problem persists, contact support",(function(){o.close()}))}))})).fail((function(e){r.alert("Error loading groups","There was a network error obtaining groups. Please retry. If the problem persists, contact support")}))}},{key:"loadGroups",value:function(e,t){return n=this,e.Deferred((function(t){null!==n.groups?t.resolve(n.groups):e.ajax({type:"GET",url:"/modules/CustomScripts/classes/Hilti/DropdownForms/ajaxCall.php",data:{do:"getGroups"},contentType:"application/json",success:function(e){n.groups=e,t.resolve(n.groups)},error:function(){t.reject()}})})).promise();var n}},{key:"includeDependency",value:function(){if(!document.getElementById("select2")){var e=document.getElementsByTagName("head")[0],t=document.createElement("link");t.id="select2",t.rel="stylesheet",t.type="text/css",t.href="/libraries/select2/select2-ver-2-4.0.3/css/select2.min.css",e.appendChild(t);var n=document.createElement("script");n.type="text/javascript",n.src="/libraries/select2/select2-ver-2-4.0.3/js/select2.full.js",e.appendChild(n)}}},{key:"initiateSelect2DropdownAndDependency",value:function(e){setTimeout((function(){e("#hiltiSelectGroups").select2({width:"100%",multiple:!0,placeholder:"*Please Select*",templateResult:function(t){if("undefined"!=typeof t.id){var n=t.id,i=e('#hiltiSelectGroups option[value="'.concat(n,'"]'));if("undefined"!=typeof i.attr("data-type")&&"group"==i.attr("data-type")){var r=e(t.element).find("option").length-e(t.element).find("option:selected").length,a=i.attr("data-level");return e('<span class="i123-folder icon space-'.concat(a).concat(r?"":" group_selected",'"></span> <span class="text">').concat(t.text,"</span>"))}}}})}),100),e(document).off("change","#hiltiSelectGroups").on("change","#hiltiSelectGroups",(function(){var t=e("#hiltiSelectGroups").val(),n=e("#hiltiClearAllButton");null!==t?t.length>1&&n.hasClass("hidden")?n.removeClass("hidden"):t.length<=1&&!n.hasClass("hidden")&&n.addClass("hidden"):n.hasClass("hidden")||n.addClass("hidden")})),e(document).off("click","#hiltiClearAllButton").on("click","#hiltiClearAllButton",(function(){e("#hiltiSelectGroups").val(null).trigger("change"),e(this).addClass("hidden")}))}},{key:"changeShowModalStatus",value:function(){this.modalIsLoading?this.modalIsLoading=!0:this.modalIsLoading=!1}}]),e}();v()(Ht,"NAME","DropdownsEditFormsListInspectorPlugin");var Gt=function(){function e(){o()(this,e),v()(this,"editorUi",null),v()(this,"formulaInputOffsetLeft",void 0),v()(this,"formulaInputOffsetTop",void 0),v()(this,"formulaInputRowHeight",void 0),v()(this,"lastMouseDownKeyCode",null),v()(this,"lastMouseDownControlId",null),v()(this,"availableControls",{}),v()(this,"didRefreshAvailableControls",!1),v()(this,"validationQueues",{}),v()(this,"labelOfDeleted",void 0),v()(this,"labelOfFixedAmount",void 0)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(t,n,i){var r=this,a=t(n),o=t("input[data-plugin=formula]");if(this.lastMouseDownKeyCode=null,this.lastMouseDownControlId=null,this.availableControls={},this.didRefreshAvailableControls=!1,this.editorUi=i,o.length){var s=t("div[data-role=formula-editor]"),l=s.find("div[data-role=formula-input]:first");if(!a.attr("data-formula-one-time-logic")){var c=this.editorUi.getEngine().getI18n(),u=l.attr("data-add-field-label-i18n"),d=l.attr("data-fixed-amount-label-i18n"),p=c.translateText(u),h=c.translateText(d);this.labelOfDeleted=p&&p!==u?p:l.attr("data-add-field-label"),this.labelOfFixedAmount=h&&h!==d?h:l.attr("data-fixed-amount-label")}if(this.initInputMarkupFromFormula(o.val(),s.get(0)),l.off("focus").on("focus",(function(){this.setAttribute("data-focused","1")})),l.off("blur").on("blur",(function(){this.setAttribute("data-focused","0")})),l.parent().perfectScrollbar({minScrollbarLength:50,maxScrollbarLength:50}),s.find("div[data-role=formula-add-controls] > div").perfectScrollbar({minScrollbarLength:50,maxScrollbarLength:50}),!a.attr("data-formula-one-time-logic")){var _=t("div",l);this.formulaInputRowHeight=_.outerHeight()+parseInt(_.css("margin-top"),10)+parseInt(_.css("margin-bottom"),10),this.formulaInputOffsetLeft=l.offset().left+parseInt(l.css("padding-left"),10),this.formulaInputOffsetTop=l.offset().top+parseInt(l.css("padding-top"),10),a.on("mousedown","div[data-role=formula-keypad], div[data-role=formula-add-controls]",(function(n){n.preventDefault(),n.target.hasAttribute("data-control-id")?(r.lastMouseDownKeyCode=null,r.lastMouseDownControlId=t(n.target).attr("data-control-id")):n.target.hasAttribute("data-fixed-amount")?(r.lastMouseDownKeyCode=null,r.lastMouseDownControlId=String(e.CONTROL_ID_FIXED_AMOUNT)):n.target.hasAttribute("data-key-code")?(r.lastMouseDownKeyCode=parseInt(t(n.target).attr("data-key-code"),10),r.lastMouseDownControlId=null):(r.lastMouseDownKeyCode=null,r.lastMouseDownControlId=null)})),a.on("mouseup","div[data-role=formula-keypad], div[data-role=formula-add-controls]",(function(n){if(n.preventDefault(),n.target.hasAttribute("data-control-id")){if(null!==r.lastMouseDownControlId){var i=t(this).closest("div[data-role=formula-editor]").get(0),a=t(i).children("div[data-role=formula-add-controls]"),o=t(n.target).attr("data-control-id");a.attr("data-open","0"),r.addFormulaEntity(o,i,e.ENTITY_TYPE_CONTROL,t)}}else if(n.target.hasAttribute("data-fixed-amount")){if(r.lastMouseDownControlId===String(e.CONTROL_ID_FIXED_AMOUNT)){var s=t(this).closest("div[data-role=formula-editor]").get(0);t(s).children("div[data-role=formula-add-controls]").attr("data-open","0"),r.addFormulaEntity(null,s,e.ENTITY_TYPE_FIXED_AMOUNT,t)}}else if(n.target.hasAttribute("data-key-code")&&null!==r.lastMouseDownKeyCode){var l=parseInt(t(n.target).attr("data-key-code"),10);if(r.lastMouseDownKeyCode===l){var c=t(this).closest("div[data-role=formula-editor]").get(0);r.pressKey(l,c,t)}}r.lastMouseDownKeyCode=null,r.lastMouseDownControlId=null})),a.on("mouseleave","div[data-role=formula-keypad], div[data-role=formula-add-controls]",(function(){r.lastMouseDownKeyCode=null,r.lastMouseDownControlId=null})),a.on("mousedown","div[data-role=formula-input]",(function(e){var n=t(this).closest("div[data-role=formula-editor]").get(0);r.handleMouseInteraction(e,n,t)})),a.on("keydown","div[data-role=formula-input]",(function(e){var n=t(this).closest("div[data-role=formula-editor]").get(0);r.handleKeyboardInteraction(e,n,t)})),a.on("keypress","div[data-role=formula-input]",(function(e){var n=t(this).closest("div[data-role=formula-editor]").get(0);r.handleKeyboardInteraction(e,n,t)})),a.attr("data-formula-one-time-logic","1")}}}},{key:"refreshAvailableControls",value:function(){if(!this.didRefreshAvailableControls){var e=this.editorUi.getEngine().getDocument(),t=$("#item").attr("data-target-element"),n=e.getElementByHash(t),i=e.getControlsList();this.availableControls={};for(var r=0;r<i.length;r++){var a=i[r].getTypeId();i[r].getId()==n.getId()||a!==b.a.CONTROL_TYPE_FORMULA&&a!==b.a.CONTROL_TYPE_NUMBER&&a!==b.a.CONTROL_TYPE_TEXT&&a!==b.a.CONTROL_TYPE_DROPDOWN&&a!==b.a.CONTROL_TYPE_RADIO&&a!==b.a.CONTROL_TYPE_CHECKBOX&&a!==b.a.CONTROL_TYPE_DATE&&a!==b.a.CONTROL_TYPE_TIME&&a!==b.a.CONTROL_TYPE_PRICE&&a!==b.a.CONTROL_TYPE_LIKERT_SCALE&&a!==b.a.CONTROL_TYPE_STAR_RATING&&a!==b.a.CONTROL_TYPE_TERMS_OF_SERVICE||(this.availableControls[i[r].getId()]=i[r])}this.didRefreshAvailableControls=!0}}},{key:"initInputMarkupFromFormula",value:function(t,n){var i=this,r="",a=$(n).find("div[data-role=formula-input]:first").get(0);(t=(t=t.trim().replace(/\s\s+/g," ")).replace(/(-)(:control_[\d]+(_[\d]+)?|:fixed_amount)/g,"$1 $2")).length&&(this.refreshAvailableControls(),t.split(" ").forEach((function(e){if(0==e.indexOf(":control_")){var t=e.split("_").pop(),n="1";i.availableControls.hasOwnProperty(t)?e=i.availableControls[t].getLabelDOMNode().innerText:(e=i.labelOfDeleted,n="0"),r+='<span data-control-id="'.concat(t,'" data-valid="').concat(n,'">').concat(e,"</span>")}else if(":fixed_amount"===e)e=i.labelOfFixedAmount,r+='<span data-fixed-amount="true">'.concat(e,"</span>");else for(var a=0;a<e.length;a++)r+='<span data-character="'.concat(e[a],'">').concat(e[a],"</span>")}))),r+=e.getCaretMarkup(),$(a).html(r)}},{key:"handleMouseInteraction",value:function(e,t,n){var i=n(t).find("div[data-role=formula-input]:first"),r=n("div",i);if(e.target===i.get(0)){var a=e.pageX-this.formulaInputOffsetLeft,o=e.pageY-this.formulaInputOffsetTop;a<1&&o<this.formulaInputRowHeight?r.detach().prependTo(i):r.detach().appendTo(i)}else n(e.target).is("span")&&r.detach().insertAfter(e.target);e.preventDefault(),document.activeElement!==i.get(0)&&i.focus()}},{key:"handleKeyboardInteraction",value:function(t,n,i){if("keydown"!=t.type){var r=null;switch(t.preventDefault(),t.which){case 48:r=e.KEY_CODE_ZERO;break;case 49:r=e.KEY_CODE_ONE;break;case 50:r=e.KEY_CODE_TWO;break;case 51:r=e.KEY_CODE_THREE;break;case 52:r=e.KEY_CODE_FOUR;break;case 53:r=e.KEY_CODE_FIVE;break;case 54:r=e.KEY_CODE_SIX;break;case 55:r=e.KEY_CODE_SEVEN;break;case 56:r=e.KEY_CODE_EIGHT;break;case 57:r=e.KEY_CODE_NINE;break;case 40:r=e.KEY_CODE_PARENTHESES_OPEN;break;case 41:r=e.KEY_CODE_PARENTHESES_CLOSE;break;case 47:r=e.KEY_CODE_DIVIDE;break;case 42:r=e.KEY_CODE_MULTIPLY;break;case 45:r=e.KEY_CODE_SUBSTRACT;break;case 43:r=e.KEY_CODE_ADD;break;case 46:r=e.KEY_CODE_DECIMAL_POINT;break;default:return}this.pressKey(r,n,i)}else 8==t.keyCode?(t.preventDefault(),this.executeInputAction(e.INPUT_ACTION_DELETE_ONE,n,null,i)):37==t.keyCode?(t.preventDefault(),this.executeInputAction(e.INPUT_ACTION_MOVE_LEFT,n,null,i)):39==t.keyCode&&(t.preventDefault(),this.executeInputAction(e.INPUT_ACTION_MOVE_RIGHT,n,null,i))}},{key:"pressKey",value:function(t,n,i){var r=null;switch(t){case e.KEY_CODE_ADD_FIELD:var a=i(n).children("div[data-role=formula-add-controls]");if("1"==a.attr("data-open"))a.attr("data-open","0");else{this.refreshAvailableControls();var o="",s=this.editorUi.getEngine().getDocument().getForm().getEditorSettingByTypeId(K.a.PAYMENT_PRODUCTS_EDITOR_SETTING);for(var l in this.availableControls)if(this.availableControls.hasOwnProperty(l)){var c=this.availableControls[l];o+='<span data-control-id="'.concat(l,'">').concat(c.getLabelDOMNode().innerText,"</span>")}s&&s.hasProperty("fixedAmount")&&null!==s.getProperty("fixedAmount")&&(o+='<span data-fixed-amount="true">'.concat(this.labelOfFixedAmount,"</span>")),a.children("div").html(o),""!=o&&(a.attr("data-open","1"),setTimeout((function(){a.children("div").scrollTop(1)}),0))}return;case e.KEY_CODE_ZERO:r="0";break;case e.KEY_CODE_ONE:r="1";break;case e.KEY_CODE_TWO:r="2";break;case e.KEY_CODE_THREE:r="3";break;case e.KEY_CODE_FOUR:r="4";break;case e.KEY_CODE_FIVE:r="5";break;case e.KEY_CODE_SIX:r="6";break;case e.KEY_CODE_SEVEN:r="7";break;case e.KEY_CODE_EIGHT:r="8";break;case e.KEY_CODE_NINE:r="9";break;case e.KEY_CODE_PARENTHESES_OPEN:r="(";break;case e.KEY_CODE_PARENTHESES_CLOSE:r=")";break;case e.KEY_CODE_DIVIDE:r="/";break;case e.KEY_CODE_MULTIPLY:r="*";break;case e.KEY_CODE_SUBSTRACT:r="-";break;case e.KEY_CODE_ADD:r="+";break;case e.KEY_CODE_DECIMAL_POINT:r=".";break;case e.KEY_CODE_DELETE_ONE:return void this.executeInputAction(e.INPUT_ACTION_DELETE_ONE,n,null,i);case e.KEY_CODE_DELETE_ALL:return void this.executeInputAction(e.INPUT_ACTION_DELETE_ALL,n,null,i);default:return}this.addFormulaEntity(r,n,e.ENTITY_TYPE_REGULAR,i)}},{key:"addFormulaEntity",value:function(t,n,i,r){var a=document.createElement("span");switch(i){case e.ENTITY_TYPE_CONTROL:if(!this.availableControls.hasOwnProperty(t))return;a.setAttribute("data-control-id",t),t=this.availableControls[t].getLabelDOMNode().innerText;break;case e.ENTITY_TYPE_FIXED_AMOUNT:a.setAttribute("data-fixed-amount","true"),t=this.labelOfFixedAmount;break;case e.ENTITY_TYPE_REGULAR:a.setAttribute("data-character",t);break;default:return}a.appendChild(document.createTextNode(t)),this.executeInputAction(e.INPUT_ACTION_ADD,n,a,r)}},{key:"executeInputAction",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,a=r(n).find("div[data-role=formula-input]:first").get(0),o=r(n).parent().parent().parent().find("div[data-role=element-error]").length,s=!0;if(document.activeElement!==a){switch(t){case e.INPUT_ACTION_ADD:r("div",a).detach().appendTo(a),r(i).insertBefore(r("div",a));break;case e.INPUT_ACTION_DELETE_ONE:r("div",a).detach().appendTo(a),r("span",a).last().remove();break;case e.INPUT_ACTION_DELETE_ALL:r(a).children().not("div").remove();break;default:return}r(a).focus()}else{var l,c=r("div",a);switch(t){case e.INPUT_ACTION_ADD:r(i).insertBefore(c);break;case e.INPUT_ACTION_MOVE_LEFT:s=!1,(l=c.prev("span")).length&&c.detach().insertBefore(l);break;case e.INPUT_ACTION_MOVE_RIGHT:s=!1,(l=c.next("span")).length&&c.detach().insertAfter(l);break;case e.INPUT_ACTION_DELETE_ONE:c.prev().remove();break;case e.INPUT_ACTION_DELETE_ALL:r(a).children().not(c).remove();break;default:return}}if(s)switch(!0){case e.INPUT_ACTION_TRIGGER_SAVE_ON_BLUR:this.triggerFormulaEvaluationOnBlur(r,a);break;case o>0:this.validateFormula(a,r),this.triggerFormulaEvaluationOnBlur(r,a);break;default:this.validateFormula(a,r)}}},{key:"triggerFormulaEvaluationOnBlur",value:function(e,t){var n=this;e(t).off("blur").one("blur",(function(){t.setAttribute("data-focused","0"),n.validateFormula(t,e)})),e('[data-role="page"]').off("click").one("click",(function(){t.setAttribute("data-focused","0"),n.validateFormula(t,e)}))}},{key:"validateFormula",value:function(e,t){var n=this,i=t("#item").attr("data-target-element");this.validationQueues.hasOwnProperty(i)&&clearTimeout(this.validationQueues[i]),this.validationQueues[i]=setTimeout((function(){var r=n.editorUi.getEngine().getDocument().getElementByHash(i);if(r){var a=t(e).children("span"),o="";a.each((function(){var e="";(e=this.hasAttribute("data-control-id")?":control_".concat(this.getAttribute("data-control-id")):this.hasAttribute("data-fixed-amount")?":fixed_amount":this.innerText).length&&("."==e||parseInt(e,10)>=0?o+=e:o="".concat(o.trim()," ").concat(e," "))})),o=(o=o.trim()).replace(/([*\/+]\s-)\s/g,"$1"),r.setProperty("calculations.formula",o)}}),500)}}],[{key:"getCaretMarkup",value:function(){return"<div><strong></strong></div>"}}]),e}();v()(Gt,"NAME","FormulaInspectorPlugin"),v()(Gt,"ENTITY_TYPE_REGULAR",1),v()(Gt,"ENTITY_TYPE_CONTROL",2),v()(Gt,"ENTITY_TYPE_FIXED_AMOUNT",3),v()(Gt,"CONTROL_ID_FIXED_AMOUNT",-1),v()(Gt,"KEY_CODE_ADD_FIELD",100),v()(Gt,"KEY_CODE_ZERO",1),v()(Gt,"KEY_CODE_ONE",2),v()(Gt,"KEY_CODE_TWO",3),v()(Gt,"KEY_CODE_THREE",4),v()(Gt,"KEY_CODE_FOUR",5),v()(Gt,"KEY_CODE_FIVE",6),v()(Gt,"KEY_CODE_SIX",7),v()(Gt,"KEY_CODE_SEVEN",8),v()(Gt,"KEY_CODE_EIGHT",9),v()(Gt,"KEY_CODE_NINE",10),v()(Gt,"KEY_CODE_PARENTHESES_OPEN",11),v()(Gt,"KEY_CODE_PARENTHESES_CLOSE",12),v()(Gt,"KEY_CODE_DELETE_ONE",13),v()(Gt,"KEY_CODE_DELETE_ALL",14),v()(Gt,"KEY_CODE_DIVIDE",15),v()(Gt,"KEY_CODE_MULTIPLY",16),v()(Gt,"KEY_CODE_SUBSTRACT",17),v()(Gt,"KEY_CODE_ADD",18),v()(Gt,"KEY_CODE_DECIMAL_POINT",19),v()(Gt,"INPUT_ACTION_ADD",1),v()(Gt,"INPUT_ACTION_MOVE_LEFT",2),v()(Gt,"INPUT_ACTION_MOVE_RIGHT",3),v()(Gt,"INPUT_ACTION_DELETE_ONE",4),v()(Gt,"INPUT_ACTION_DELETE_ALL",5),v()(Gt,"INPUT_ACTION_TRIGGER_SAVE_ON_BLUR",!0);var Wt=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){e(t).attr("data-html-editor-upgraded")||(e(t).on("click","input[type=hidden][data-role=html-editor] + a[data-role=html-popup]",(function(t){var i=this.getAttribute("data-dialog-title")||"Edit Rich Text",r=this.getAttribute("data-dialog-title-i18n")||"edt_UI_create_dialog_edit_rich_text",a=e("#item").attr("data-target-element"),o=n.getEngine().getDocument().getElementByHash(a),s=e(this).closest("[data-role=property]").attr("data-property-name"),l=null;[b.a.CONTROL_TYPE_FORM_HEADER,b.a.CONTROL_TYPE_HTML_BLOCK].indexOf(o.getTypeId())>-1&&"configuration-innerHTML"===s&&(l="\n                    html > body {\n                        background-color: ".concat(n.getEngine().getTheme().getMergedProperties().page.background.color,";\n                        color: ").concat(n.getEngine().getTheme().getMergedProperties().form.color,";\n                    }\n                ")),e(this).prev("input[type=hidden][data-role=html-editor]").each((function(){n.getEngine().getLoader().execCommand("edit-html",this,i,r,l)}))})),e(t).attr("data-html-editor-upgraded","1"))}}]),e}();v()(Wt,"NAME","HTMLEditorInspectorPlugin");var jt=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){e(t).find("input[type=file][data-plugin=image-uploader]").each((function(){!function(t,i,r){var a=e(r).find("input[type=text]").get(0),o=e(r).find("div[data-role=remove-image]").get(0),s=a.value,l=document.createElement("img");l.setAttribute("data-role","inserted-image-container"),e(l).on("load",(function(){e(r).attr("data-image-is-loaded","")})).on("error",(function(){e(r).removeAttr("data-image-is-loaded")})),e(r).find("div[data-role=uploader-label]").append(l),l.src=S.a.getImageURLAntiCache(s);var c=e(r).closest("#item, #options").attr("data-target-element"),u=null;c&&!(u=n.getEngine().getDocument().getElementByHash(c))||(e(o).on("click",(function(){t.value=null,l.src=S.a.getImageURLAntiCache(""),e(a).val("").trigger("input"),u&&(u.setProperty("configuration.remoteURL",null),u.setProperty("configuration.name",null),u.setProperty("configuration.mimeType",null),u.setProperty("configuration.size",null))})),e(a).on("input",(function(){l.src=S.a.getImageURLAntiCache(this.value),u&&(u.setProperty("configuration.remoteURL",""),u.setProperty("configuration.remoteURL",this.value),u.setProperty("configuration.name",null),u.setProperty("configuration.mimeType",null),u.setProperty("configuration.size",null))})),t.addEventListener("change",(function(o){var s=t.files[0];if(s)if(s.size)if(/^image\/(png|jpg|jpeg|gif)$/i.test(s.type))if(s.size>5242880)console.warn("file size greater than 5 mb");else{var d=u?u.getId():null;if(!u||d){var p=i.createUpload(s).withControlId(d).withArchivePacking(!1).withUploaderInstanceIndex(~~!!d||"theme_".concat(e(t).closest("[data-property-name]").attr("data-property-name").replace(/\./g,"_")));l.src="",p.on("success",(function(){var n=p.getStoredFileURLFromCloud();l.setAttribute("src",S.a.getImageURLAntiCache(n)),u?(e(a).val(n).trigger("input"),u.setProperty("configuration.remoteURL",""),u.setProperty("configuration.remoteURL",n),u.setProperty("configuration.name",p.getStoredFileNameOnServer()),u.setProperty("configuration.mimeType",p.getMimeType()),u.setProperty("configuration.size",p.getSize())):e(a).val(S.a.getImageURLAntiCache(n)).trigger("input"),t.value=null,e(r).removeAttr("data-is-uploading")})),p.on("error",(function(i){t.value=null,u&&(u.setProperty("configuration.remoteURL",null),u.setProperty("configuration.name",null),u.setProperty("configuration.mimeType",null),u.setProperty("configuration.size",null)),n.getEngine().getLoader().getUI().alert("There was an error uploading your file to our server",i.toString()),e(r).removeAttr("data-is-uploading")})),e(r).attr("data-is-uploading","1"),p.upload(),e(r).find("input[type=text]").on("input",(function(){u&&(u.setProperty("configuration.remoteURL",""===this.value?null:this.value),u.setProperty("configuration.name",null),u.setProperty("configuration.mimeType",null),u.setProperty("configuration.size",null))}))}else console.warn("element with hash ".concat(c," don't have a id: ").concat(JSON.stringify(d)))}else console.warn("not a picture but a ".concat(JSON.stringify(s.type)));else console.warn("empty file");else console.warn("no file found")}),!0))}(this,n.getEngine().getUploadsService(),e(this).closest("div[data-role=property]").get(0))}))}}]),e}();v()(jt,"NAME","ImageUploaderInspectorPlugin");var Kt=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){var i;i=this,e(t).find("input[type=number][data-plugin=size-int]").each((function(){e(this).next("input[type=range]").val(this.value),e(this).closest("[data-role=property]").attr("data-is-range-property","")})).closest("[data-role=property]").attr("data-plugin","size-int"),e(t).attr("number-upgraded")||(e(t).on("input change","input[type=number][data-plugin=size-int]",(function(){var t=parseFloat(this.value)||0;this.title=String(this.value||""),e(this).next("input[type=range]").each((function(){this.value=t}))})).on("blur","input[type=number][data-plugin=size-int]",(function(){var t=parseFloat(this.value)||0;this.value=t=i.limitToRange(this,t),this.title=String(this.value||""),e(this).next("input[type=range]").each((function(){this.value=t})),n.getEngine().getLoader().getCommandDispatcher().dispatchPropertyChangeInThemePanel(this,"value")})).on("change","input[type=number][data-plugin=size-int] + input[type=range]",(function(){var t=parseFloat(this.value)||0;e(this).prev("input[type=number]").val(t).trigger("input"),n.getEngine().getLoader().execCommand("track-event","edt_slider_change",{},1e3)})),e(t).attr("number-upgraded","1"))}},{key:"limitToRange",value:function(e,t){var n=e.hasAttribute("data-min")?~~e.getAttribute("data-min"):null,i=e.hasAttribute("data-max")?~~e.getAttribute("data-max"):null;return i&&t>i&&(t=i),n&&t<n&&(t=n),t}}]),e}();v()(Kt,"NAME","InputTypeNumberInspectorPlugin");var zt=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"parseSizeInPixels",value:function(e){if("string"===typeof e){var t=/^((-)?([\d]+))(px)?$/.exec(e);return t?~~t[1]:0}return 0}},{key:"upgrade",value:function(e,t,n){var i;i=this,e(t).find("input[type=text][data-plugin=size-px]").each((function(){e(this).next("input[type=range]").val(i.parseSizeInPixels(this.value)),e(this).closest("[data-role=property]").attr("data-is-range-property","")})).closest("[data-role=property]").attr("data-plugin","size-px"),e(t).attr("data-size-in-pixels-upgraded")||(e(t).on("input change","input[type=text][data-plugin=size-px]",(function(){this.title=String(this.value);var t=i.parseSizeInPixels(this.value);e(this).next("input[type=range]").each((function(){this.value=t}))})).on("keydown","input[type=text][data-plugin=size-px]",(function(t){var n=t.keyCode,r=i.parseSizeInPixels(this.value),a=!1;switch(n){case 40:r>0&&(r--,a=!0);break;case 38:r++,a=!0}a&&(t.preventDefault(),this.value="".concat(r,"px"),e(this).trigger("input"))})).on("blur","input[type=text][data-plugin=size-px]",(function(){this.value="".concat(i.parseSizeInPixels(this.value),"px"),e(this).trigger("input")})),e(t).on("change","input[type=text][data-plugin=size-px] + input[type=range]",(function(){var t=this.value;e(this).prev("input[type=text]").val("".concat(t,"px")).trigger("input"),n.getEngine().getLoader().execCommand("track-event","edt_slider_change",{},1e3)})),e(t).attr("data-size-in-pixels-upgraded","1"))}}]),e}();v()(zt,"NAME","InputTypeSizeInPixelsInspectorPlugin");var Xt=n(47),Zt=n(14),qt=function(){function e(){o()(this,e),v()(this,"templatePath","/modules/Typescript/Form/resources/edit-likert-option-dialog.html"),v()(this,"totalQuizPoints",0),v()(this,"userService",void 0),this.userService=Xt.a.getInstance()}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){var i;i=this,e(t).find("input[type=hidden][data-plugin=text-choice-interface-likert][data-value]").each((function(){var t,r;(r=(t=this).getAttribute("data-value"))&&JSON.parse(r),t.removeAttribute("data-value"),e(t).parent().find("[data-role=secondary]").on("click","a[data-role=edit-likert-quiz]",(function(){for(var r=e(this).data("dialog-title"),a=e(this).data("dialog-title-i18n"),o=n.getEngine().getLoader().getSelection().getItems()[0],s=o.getProperty("options.quizOptions"),l=o.getProperty("choices.statements"),c=n.getEngine().getDocument(),u=[],d=0,p=o.getChildren().length;d<p;d++)u.push(o.getChildren()[d].getHash());i.totalQuizPoints=S.a.getFormPointsWithoutElements(c,u),i.editQuizOptions({editorUserInterface:n,popupTitle:r,i18nPopupTitle:a,choices:s,statements:l,inputType:O.f.RADIO,totalPoints:S.a.getFormTotalPoints(c)},n.getEngine().getFactory()).then((function(n){i.updateQuizOptions(n,t,e)})).fail((function(e){console.warn("Quiz settings not saved"),console.log(e)}))}))}))}},{key:"updateQuizOptions",value:function(e,t,n){for(var i=[],r=0,a=e.length;r<a;r++){for(var o=[],s=0,l=e[r].length;s<l;s++)o.push({text:e[r][s].text,isDefault:e[r][s].isDefault,isCorrect:e[r][s].isCorrect,quizPoints:e[r][s].quizPoints,numberOfTimesThisOptionCanBeChosen:e[r][s].numberOfTimesThisOptionCanBeChosen?e[r][s].numberOfTimesThisOptionCanBeChosen:null,paymentsValue:e[r][s].paymentsValue?e[r][s].paymentsValue:null,i18nLabel:null!=e[r][s].i18nLabel?e[r][s].i18nLabel:""});i.push(JSON.parse(JSON.stringify(o)))}t.value=JSON.stringify(i),n(t).trigger("input"),t.getAttribute("data-synchronize-other-properties")&&n(t.getAttribute("data-synchronize-other-properties")).val(JSON.stringify(i)).trigger("reload")}},{key:"editQuizOptions",value:function(e,t){return function(t,n,i,r,a,o){return i.Deferred((function(i){if(t.checkIfShouldDisplayPaywall(o))return i.reject();r.get(t.templatePath).then((function(r){for(var s={statements:[],formTotalPoints:e.totalPoints,formTotalPointsText:"Form total points:",formTotalPointsTextI18n:"edt_text_form_total_points"},l=0,c=e.choices.length;l<c;l++){for(var u={choices:[],i18n:null,text:e.statements[l].text,inputType:e.inputType,index:l},d=0;d<e.choices[l].length;d++){var p=e.choices[l][d],h={isCorrect:p.isCorrect,isDefault:p.isDefault,numberOfTimesThisOptionCanBeChosen:p.numberOfTimesThisOptionCanBeChosen,quizPoints:p.quizPoints,paymentsValue:p.paymentsValue,text:p.text,index:d};u.choices.push(h)}s.statements.push(u)}var _=t.showDialog(n,r,s,e,o,a,i);t.initDialogListeners(_,s)})).fail((function(e){i.reject(e)}))})).promise()}(this,e.editorUserInterface.getEngine().getLoader().getUI(),e.editorUserInterface.getEngine().getJQuery(),e.editorUserInterface.getEngine().getResourceManager(),e.editorUserInterface.getEngine().getI18n(),e.editorUserInterface.getEngine().getLoader().getCommandDispatcher())}},{key:"checkIfShouldDisplayPaywall",value:function(e){return!this.userService.canUseQuizOptions()&&(e.triggerFeatureModal(Zt.a.QUIZ_CONTROL_OPTION),!0)}},{key:"showDialog",value:function(e,t,n,i,r,a,o){var s=this.getDialogTitle(i,a),l=[{type:it.f.CANCEL,callback:function(){c.close(),o.reject(new Error("Closed the popup by pressing cancel"))}},{type:it.f.SAVE,callback:function(){for(var e=[],t=0,i=n.statements.length;t<i;t++)e.push(n.statements[t].choices);c.close(),o.resolve(e)}}],c=e.createDialog(s,l,{width:"600px",height:"600px"});return c.body.setAttribute("data-dialog-role","edit-option"),c.body.innerHTML=this.parseTemplate(t,n),a.translateDOMNode(c.body),r.addPerfectScrollbar(c.body),c}},{key:"parseTemplate",value:function(e,t){return new Nt.a(e).parse(t)}},{key:"getDialogTitle",value:function(e,t){return null!=e.i18nPopupTitle?t.translateText(e.i18nPopupTitle):e.popupTitle}},{key:"initDialogListeners",value:function(e,t){var n;n=this,$(e.body).find("input[type=number][data-statement][data-index]").focus((function(){var t=$(this).data("statement"),i=$(this).data("index");$("input[type=number][data-statement=".concat(t,"]:not([data-index=").concat(i,"])")).each((function(){0!==parseInt($(this).val())&&$(this).val("0")})),$("input[type=radio][data-statement=".concat(t,"]")).prop("checked",!1),$("input[type=radio][data-statement=".concat(t,"][data-index=").concat(i,"]")).prop("checked",!0),n.updateTotalQuizPoints(e)})).on("input",(function(){for(var i=$(this).val();"0"===i.charAt(0);)i=i.substr(1);""==i&&(i="0"),$(this).val(i);for(var r=$(this).data("statement"),a=$(this).data("index"),o=0,s=t.statements[r].choices.length;o<s;o++)o!=a&&(t.statements[r].choices[o].isCorrect=!1,t.statements[r].choices[o].quizPoints=0);t.statements[r].choices[a].isCorrect=!0,t.statements[r].choices[a].quizPoints=~~i,n.updateTotalQuizPoints(e)})),$(e.body).find("input[type=radio][data-statement][data-index]").click((function(){for(var i=$(this).data("statement"),r=$(this).data("index"),a=t.statements[i].choices[r].isCorrect,o=0,s=t.statements[i].choices.length;o<s;o++)o!=r&&(t.statements[i].choices[o].isCorrect=!1,t.statements[i].choices[o].quizPoints=0);t.statements[i].choices[r].isCorrect=!a;var l=$("input[type=number][data-statement=".concat(i,"][data-index=").concat(r,"]"));a?(l.val("0"),$("input[type=radio][data-statement=".concat(i,"][data-index=").concat(r,"]")).prop("checked",!1),t.statements[i].choices[r].quizPoints=0):(l.focus().select(),$("input[type=radio][data-statement=".concat(i,"][data-index=").concat(r,"]")).prop("checked",!0),$("input[type=number][data-statement=".concat(i,"]:not([data-index=").concat(r,"])")).val("0")),n.updateTotalQuizPoints(e)}))}},{key:"updateTotalQuizPoints",value:function(e){var t=0;$("input[type=number][name=quiz-points]").each((function(){t+=parseInt($(this).val())})),t+=this.totalQuizPoints,$(e.body).find("div[data-role=form-total-points] span[data-role=form-total-points]").text(t)}}]),e}();v()(qt,"NAME","LikertQuizOptionsInspectorPlugin");var Jt=n(38),Qt=n.n(Jt),$t=n(162),en=function(){function e(){o()(this,e),v()(this,"userService",void 0),this.userService=Xt.a.getInstance()}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(t,n,i){var r;r=this,t(n).find("input[type=hidden][data-plugin=likert-wrapper-choice-stament][data-value]").each((function(){var n,a,o,s,l,c;a=(n=this).getAttribute("data-value"),o=[],s=n.getAttribute("data-new-statement-title")||"New Statement",l=n.getAttribute("data-new-statement-title-i18n"),c=~~n.getAttribute("data-context"),n.removeAttribute("data-value"),a&&(o=JSON.parse(a)||[]),t(n).parent().find("[data-role=secondary]").each((function(){t(n).closest("label").after(this),function(a){for(var u=t(a).find("[data-role=container]"),d=0,p=o.length;d<p;d++)o[d].index=d,u.append(r.createI18nStatementElement(o[d],o[d].index));r.updateContainerAttributes(a,o),r.makeStatementsInInspectorSortable(r,t,a,o,n),t(a).on("input","div[data-role=statement] input[type=text]",(function(e){var i=~~t(this).closest("[data-role=statement]").attr("data-index");o[i]&&(o[i].text=this.value,r.updateStatements(o,n,t))})).on("click","div[data-role=statement] div[data-role=remove]",(function(e){o.length<=1||(i.getEngine().getLoader().execCommand("track-event","edt_inspector_choice_option_remove"),t(this).closest("[data-role=statement]").each((function(){var e=parseInt(this.getAttribute("data-index")),i=this.parentNode;o.splice(e,1),i.removeChild(this),t(i).find("div[data-role=statement]").each((function(e){this.setAttribute("data-index",String(e))})),r.updateStatements(o,n,t),r.updateContainerAttributes(a,o)})))})).on("click","a[data-role=edit-option], a[data-role=edit-more-option]",(function(){var e=String(this.getAttribute("data-dialog-title")||"Edit statements"),s=String(this.getAttribute("data-dialog-title-i18n")),l=String(this.getAttribute("data-item-type-name")||"STATEMENT"),c=String(this.getAttribute("data-item-type-name-i18n")),d=String(this.getAttribute("data-new-statement-title")||"New Statement"),p=String(this.getAttribute("data-new-statement-title-i18n")),h=c&&i.getEngine().getI18n().translateText(c)&&c!==i.getEngine().getI18n().translateText(c)?i.getEngine().getI18n().translateText(c):l;r.editStatements(o,a,s?i.getEngine().getI18n().translateText(s):e,i,h,p?i.getEngine().getI18n().translateText(p):d).then((function(e){o=JSON.parse(JSON.stringify(e)),u.find("div[data-role=statement]").remove();for(var i=0,s=o.length;i<s;i++)o[i].index=i,u.append(r.createI18nStatementElement(o[i],o[i].index));r.updateContainerAttributes(a,o),r.updateStatements(o,n,t),r.makeStatementsInInspectorSortable(r,t,a,o,n)})).fail((function(e){console.warn("Failed to save options. Error is displayed below"),console.error(e)}))})).on("click","a[data-role=add-statement]",(function(e){if(i.getEngine().getLoader().execCommand("track-event","edt_inspector_choice_option_add"),c!==b.a.CONTAINER_TYPE_LIKERT_WRAPPER||!r.triggerUpgdragePaywallOnAddStatement(o,i,e)){var d=r.createUniqueStatement({text:l?i.getEngine().getI18n().translateText(l):s,index:o.length},o),p=i.getEngine().getLoader().getSelection().getItems(),h=0!==p.length?p[0]:null,_=h.hasProperty("choices.scale")?h.getProperty("choices.scale"):[],g=_.length,m=t(a).closest("#item").find("input[type=hidden][data-plugin=text-choice-interface]").get(0),f=m?m.getAttribute("data-synchronize-other-properties"):"";if(o.push(d),u.append(r.createI18nStatementElement(d,d.index)),r.updateStatements(o,n,t),r.updateContainerAttributes(a,o),r.makeStatementsInInspectorSortable(r,t,a,o,n),_){_[g]=[];for(var E=0,y=_[0].length;E<y;E++)_[g][E]=Mt.a.createUniqueChoice({text:_[0][E].text,isDefault:"undefined"!==typeof _[0][E].isDefault&&null!==_[0][E].isDefault?_[0][E].isDefault:null,index:E,numberOfTimesThisOptionCanBeChosen:null,numberOfTimesThisOptionHasBeenChosen:null,isCorrect:"undefined"!==typeof _[0][E].isCorrect&&null!==_[0][E].isCorrect?_[0][E].isCorrect:null,quizPoints:0,paymentsValue:null},_);m.value=JSON.stringify(_),t(m).trigger("input"),f&&t(f).val(m.value).trigger("reload")}}})).parent().on("click","a[data-role=import-statement]",(function(e){var s=JSON.parse(this.getAttribute("data-sets")||"[]"),l=String(this.getAttribute("data-dialog-title")||"Import statements"),c=String(this.getAttribute("data-dialog-title-i18n")||"");i.getSelectedDataset(s,c?i.getEngine().getI18n().translateText(c):l,o).then((function(s){if(!r.triggerUpgdragePaywallOnAddStatement(s.getValues(),i,e)){u.find("[data-role=statement]").remove(),o=[];for(var l=0,c=s.getValues(),d=c.length;l<d;l++)o.push(c[l]),o[l].index=l,u.append(r.createI18nStatementElement(o[l],o[l].index));r.updateStatements(o,n,t),r.updateContainerAttributes(a,o),r.makeStatementsInInspectorSortable(r,t,a,o,n)}})).fail((function(e){console.warn("Failed to import statements. Error is displayed below"),console.error(e)}))})).on("keydown","input",(function(c){if((c.keyCode||c.charCode)===V.a.KEY_ENTER&&o[o.length-1].text){var u=~~t(this.parentNode).attr("data-index");if(o.length>e.MAX_VISIBLE_NUMBER_OF_STATEMENTS_IN_INSPECTOR_PANEL&&u===e.MAX_VISIBLE_NUMBER_OF_STATEMENTS_IN_INSPECTOR_PANEL&&t("a[data-role=edit-more-option][data-target=statements]").trigger("click"),u<e.MAX_VISIBLE_NUMBER_OF_STATEMENTS_IN_INSPECTOR_PANEL){if(r.triggerUpgdragePaywallOnAddStatement(o,i,c))return;var d=r.createUniqueStatement({text:l?i.getEngine().getI18n().translateText(l):s,index:o.length},o),p=r.createI18nStatementElement(d,d.index);o.splice(u+1,0,d),t(p).insertAfter(this.parentNode),r.reinitializeStatementsIndexes(o,a,t),r.updateStatements(o,n,t),r.updateContainerAttributes(a,o),r.makeStatementsInInspectorSortable(r,t,a,o,n),t(p).find("input").focus().select()}}})).on("paste","[data-role=statement] > input[type=text]",(function(e){var s,l=[],c=~~t(this).closest("div[data-role=statement]").attr("data-index");try{var u=e.originalEvent||{},d=e.originalEvent.clipboardData||null;if(!d)return;s=d.getData("text/plain");var p=String(s||"").replace(/(^[\s]+|[\s]+$)/g,"");if(!(p.indexOf("\n")>-1))return;l=p.split("\n"),u.preventDefault(),u.stopPropagation();for(var h=0,_=l.length;h<_;h++){if(r.triggerUpgdragePaywallOnAddStatement(o,i,e))return;var g=r.createUniqueStatement({text:l[h],index:c+h+1},o),m=r.createI18nStatementElement(g,g.index);o.splice(g.index,0,g),t(m).insertAfter(t("div[data-role=statement][data-index=".concat(g.index-1,"]"))),r.reinitializeStatementsIndexes(o,a,t),r.updateContainerAttributes(a,o)}r.updateStatements(o,n,t),r.makeStatementsInInspectorSortable(r,t,a,o,n)}catch(f){return}}))}(this)}))}))}},{key:"updateContainerAttributes",value:function(t,n){t.setAttribute("data-truncate-options",String(~~(n.length>e.MAX_VISIBLE_NUMBER_OF_STATEMENTS_IN_INSPECTOR_PANEL)))}},{key:"isUniqueSetOfStatements",value:function(e){if(!e)return!0;for(var t=0,n=e.length;t<n;t++)for(var i=0;i<t;i++)if(e[t].text===e[i].text)return!1;return!0}},{key:"createUniqueStatement",value:function(e,t){var n,i,r=0,a=e.text;if(!t||!t.length)return e;do{n=!0,i=0===r?a:"".concat(a," (").concat(r,")");for(var o=0,s=t.length;o<s;o++)if(t[o].text===i){n=!1,r++;break}}while(!n);return e.text=i,e}},{key:"reinitializeStatementsIndexes",value:function(e,t,n){for(var i=0,r=e.length;i<r;i++)e[i].index=i;n(t).find("[data-role=statement]").each((function(e){this.setAttribute("data-index",String(e))}))}},{key:"editStatements",value:function(e,t,n,i,r,a){var o=JSON.parse(JSON.stringify(e));return function(s,l,c,u,d,p){return c.Deferred((function(h){u.get("/modules/Typescript/Form/resources/edit-statements-dialog.html").then((function(u){var _,g=new Nt.a(u),m={statements:e,editStatementsDialogItemTypeName:r,addButtonText:"Add statements",addButtonTextI18n:"edt_text_add_statements"},f=e;(_=s.createDialog(n,[{type:it.f.CANCEL,callback:function(){for(;e.length;)e.pop();for(var t=0,n=o.length;t<n;t++)e.push(o[t]);_.close(),h.reject(new Error("User closed the dialog by pressing the Cancel button"))}},{type:it.f.SAVE,callback:function(){l.isUniqueSetOfStatements(e)?(_.close(),h.resolve(e)):s.alert("Error Saving Statements","You are not allowed to have 2 or more statements with the same value")}}],{width:"600px",height:"600px",onCloseButtonClick:function(){h.reject(new Error("User closed the dialog by pressing the X button"))}})).body.setAttribute("data-dialog-role","edit-statement"),_.body.innerHTML=g.parse(m),d.translateDOMNode(_.body),p.addPerfectScrollbar(_.body),l.makeStatementsInEditPanelSortable(l,c,_.body,f),c(_.body).on("click","a[data-role=add-statement]",(function(n){if(!l.triggerUpgdragePaywallOnAddStatement(f,i,n)){l.insertNewStatement(l,f,_.body,t,a,e.length,c,i),l.makeStatementsInEditPanelSortable(l,c,_.body,f);var r=c(this).closest("div[data-dialog-role=edit-statement]");r.scrollTop(r.prop("scrollHeight"))}})).on("input","td[data-role=statement-name] input[type=text]",(function(){var t=~~c(this).closest("tr").attr("data-index"),n=this.value;e[t].text=n})).on("click","tr[data-role=statement] td[data-role=statement-name] div[data-role=remove]",(function(){if(!(f.length<=1)){var e=~~c(this).closest("[data-role=statement]").attr("data-index");f.splice(e,1),c(this).closest("[data-role=statement]").remove(),l.reinitializeStatementsIndexes(f,_.body,c),l.updateContainerAttributes(t,f)}})).on("input","td[data-role=statement-name] input[type=text]",(function(){var t=~~c(this).closest("tr").attr("data-index"),n=this.value;e[t].text=n})).on("keydown","input[type=text][data-role=statement-name]",(function(e){if((e.keyCode||e.charCode)===V.a.KEY_ENTER&&null!==f[f.length-1].text&&""!==f[f.length-1].text&&!l.triggerUpgdragePaywallOnAddStatement(f,i,e)){var n=1+~~c(this.parentNode).closest("tr[data-role=statement]").attr("data-index");l.insertNewStatement(l,f,_.body,t,a,n,c,i),l.makeStatementsInEditPanelSortable(l,c,_.body,f);var r=c(this).closest("div[data-dialog-role=edit-statement]");r.scrollTop(r.prop("scrollHeight"))}})).on("paste","td[data-role=statement-name] input[type=text]",(function(e){var n,r=[],a=~~c(this).closest("tr[data-role=statement]").attr("data-index");try{var o=e.originalEvent||{},s=e.originalEvent.clipboardData||null;if(!s)return;n=s.getData("text/plain");var u=String(n||"").replace(/(^[\s]+|[\s]+$)/g,"");if(!(u.indexOf("\n")>-1))return;r=u.split("\n"),o.preventDefault(),o.stopPropagation();for(var d=function(t,n){if(l.triggerUpgdragePaywallOnAddStatement(f,i,e))return{v:void 0};var o=l.createUniqueStatement({text:r[t],index:a+t+1},f),s=void 0;f.splice(o.index,0,o),c(_.body).find("table").each((function(){s=this.tBodies[0].rows[this.tBodies[0].rows.length-1].cloneNode(!0),c(s).insertAfter(c("tr[data-role=statement][data-index=".concat(o.index-1,"]")))})),c(s).find("td[data-role=statement-name] input[type=text]").val(o.text),l.reinitializeStatementsIndexes(f,_.body,c)},p=0,h=r.length;p<h;p++){var g=d(p);if("object"===Qt()(g))return g.v}l.updateContainerAttributes(t,f),l.makeStatementsInEditPanelSortable(l,c,_.body,f)}catch(m){return}}))})).fail((function(e){h.reject(e)}))})).promise()}(i.getEngine().getLoader().getUI(),this,i.getEngine().getJQuery(),i.getEngine().getResourceManager(),i.getEngine().getI18n(),i.getEngine().getLoader().getCommandDispatcher())}},{key:"createI18nStatementElement",value:function(e,t){var n=document.createElement("div"),i=n.appendChild(document.createElement("input")),r=n.appendChild(document.createElement("div")),a=n.appendChild(document.createElement("div"));return i.setAttribute("type","text"),i.setAttribute("data-role","secondary"),i.value=e.text||"No statement",r.setAttribute("data-role","remove"),r.classList.add("choice-fields__input-action-btn"),a.setAttribute("data-role","drag"),a.classList.add("choice-fields__input-action-btn"),n.setAttribute("data-role","statement"),n.setAttribute("data-index",String(t)),n.classList.add("item__default-input"),n}},{key:"updateStatements",value:function(e,t,n){t.value=e&&e.length?JSON.stringify(e):"null",n(t).trigger("input")}},{key:"insertNewStatement",value:function(e,t,n,i,r,a,o,s){var l,c=e.createUniqueStatement({text:r||"New Statement",index:a},t),u=s.getEngine().getLoader().getSelection().getItems(),d=0!==u.length?u[0]:null,p=d.hasProperty("choices.scale")?d.getProperty("choices.scale"):[],h=p.length,_=o(i).closest("#item").find("input[type=hidden][data-plugin=text-choice-interface]").get(0),g=_?_.getAttribute("data-synchronize-other-properties"):"";if(t.splice(a,0,c),o(n).find("table").each((function(){l=this.tBodies[0].rows[this.tBodies[0].rows.length-1].cloneNode(!0),o(l).insertAfter(o("tr[data-index=".concat(a-1,"]")))})),o(l).find("td[data-role=statement-name] input[type=text]").val(c.text).focus().select(),l.setAttribute("data-index",(~~c.index).toString()),this.reinitializeStatementsIndexes(t,n,o),e.updateContainerAttributes(i,t),p){p[h]=[];for(var m=0,f=p[0].length;m<f;m++)p[h][m]=Mt.a.createUniqueChoice({text:p[0][m].text,isDefault:"undefined"!==typeof p[0][m].isDefault&&null!==p[0][m].isDefault?p[0][m].isDefault:null,index:m,numberOfTimesThisOptionCanBeChosen:null,numberOfTimesThisOptionHasBeenChosen:null,isCorrect:"undefined"!==typeof p[0][m].isCorrect&&null!==p[0][m].isCorrect?p[0][m].isCorrect:null,quizPoints:0,paymentsValue:null},p);_.value=JSON.stringify(p),o(_).trigger("input"),g&&o(g).val(_.value).trigger("reload")}}},{key:"makeStatementsInInspectorSortable",value:function(e,t,n,i,r){var a=ie.a.create((function(){e.reorderStatementsInInspector(t,n,i,r)}),100);$t.a.makeSortable(t,n,"div[data-role=statement] div[data-role=drag]","div[data-role=statement]",(function(e,t,n){a()}),(function(e,t,n){var i=e.parentNode;n===O.yb.BEFORE?i.insertBefore(e,t):i.insertBefore(e,t.nextSibling),a()}))}},{key:"makeStatementsInEditPanelSortable",value:function(e,t,n,i){var r=ie.a.create((function(){e.reorderStatementsInPanelCallback(t,n,i)}),100);$t.a.makeSortable(t,n,"table[data-role=edit-statements] tr[data-role=statement] td[data-role=statement-name] div[data-role=drag]","table[data-role=edit-statements] tr[data-role=statement]",(function(e,t,n){r()}),(function(e,t,n){var i=e.parentNode;n===O.yb.BEFORE?i.insertBefore(e,t):i.insertBefore(e,t.nextSibling),r()}))}},{key:"onStatementsReorderedByDragAndDrop",value:function(e,t,n){var i=!1;e(t).find("[data-role=statement]").each((function(e){var t=~~this.getAttribute("data-index");e!==t&&(i=!0,n[t].index=e,this.setAttribute("data-index",String(e)))})),i&&n.sort((function(e,t){return e.index-t.index}))}},{key:"reorderStatementsInInspector",value:function(e,t,n,i){this.onStatementsReorderedByDragAndDrop(e,t,n),this.updateStatements(n,i,e)}},{key:"reorderStatementsInPanelCallback",value:function(e,t,n){this.onStatementsReorderedByDragAndDrop(e,t,n)}},{key:"triggerUpgdragePaywallOnAddStatement",value:function(e,t,n){return!this.userService.canAddLikertStatements(e.length)&&(t.getEngine().getLoader().getCommandDispatcher().triggerFeatureModal(Zt.a.LIKERT_SCALE_CONTROL),n.preventDefault(),n.stopPropagation(),!0)}}]),e}();v()(en,"NAME","LikertStatementsEditorInspectorPlugin"),v()(en,"MAX_VISIBLE_NUMBER_OF_STATEMENTS_IN_INSPECTOR_PANEL",4);var tn=function(){function e(){o()(this,e),v()(this,"translator",void 0),v()(this,"values",void 0),v()(this,"targetContainer",void 0),v()(this,"engine",void 0)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){var i=this;this.engine=n.getEngine(),this.translator=this.engine.getI18n(),e(t).find("div[data-plugin=list-editor]").each((function(e,t){i.targetContainer=t;var n=t.getAttribute("data-value");i.targetContainer.onclick=function(e){return e.preventDefault()},n&&(i.values=JSON.parse(n)||[]),Object(H.a)(i.values,(function(e){i.createListElement(e)}))}))}},{key:"createListElement",value:function(e){var t=document.createElement("div"),n=this.createInput(e);if(t.classList.add("list-element"),t.setAttribute("data-name",e.name),t.appendChild(n),e.isHideable&&e.showFlag){var i=this.createVisibilityButton(this.engine.getLoader().getSummarySettingProperty(e.showFlag));t.appendChild(i)}this.targetContainer.appendChild(t)}},{key:"createInput",value:function(e){var t=this,n=document.createElement("input");return n.setAttribute("type","text"),n.setAttribute("data-role","secondary"),e.label?n.value=e.label:e.i18n&&(n.value=this.translator.translateText(e.i18n)),n.oninput=function(){Object(H.a)(t.values,(function(t){t.name===e.name&&(t.label=n.value)})),t.updateListElements()},n.onblur=function(){""===n.value&&(n.value=t.translator.translateText(e.i18n))},n}},{key:"createVisibilityButton",value:function(e){var t=this,n=document.createElement("button");return n.classList.add("visibility-button","i-lg","i123-hidden"),this.setVisibilityButtonState(n,e),n.onclick=function(){var e="true"===n.getAttribute("data-column-is-visible");t.setVisibilityButtonState(n,!e)},n}},{key:"setVisibilityButtonState",value:function(e,t){e.setAttribute("data-column-is-visible",t.toString()),e.title=t?this.getTooltipMessage(O.xb.SHOW):this.getTooltipMessage(O.xb.HIDE)}},{key:"getTooltipMessage",value:function(e){switch(e){case O.xb.HIDE:return this.translator.translateText("payments_show_column");case O.xb.SHOW:return this.translator.translateText("payments_hide_column")}}},{key:"updateListElements",value:function(){var e=this.values.length?JSON.stringify(this.values):"null";this.targetContainer.setAttribute("data-value",e)}}]),e}();v()(tn,"NAME","ListEditorInspectorPlugin");var nn=function(e){for(var t=[],n=-1,i=function(e){for(var t,n=0,i=e.length;n<i;n++)switch(t=e.charAt(n)){case"*":r("%ST%");break;case"_":r("%UN%");break;case"+":r("%PL%");break;case"-":r("%MI%");break;case"\n":case"\t":case"\r":r(" ");break;default:r(t)}},r=function(e){-1===n&&a(),t[n]+=e},a=function(){n++,t.push("")},o=function e(t,n){if(t)if(t.textContent)if(t.nodeType===Node.ELEMENT_NODE)switch(t.nodeName){case"P":a();for(var o=0,s=t.childNodes.length;o<s;o++)e(t.childNodes[o],n+1);break;case"B":case"STRONG":r("*");for(var l=0,c=t.childNodes.length;l<c;l++)e(t.childNodes[l],n+1);r("*");break;case"I":case"EM":r("_");for(var u=0,d=t.childNodes.length;u<d;u++)e(t.childNodes[u],n+1);r("_");break;case"DEL":case"STRIKE":r("-");for(var p=0,h=t.childNodes.length;p<h;p++)e(t.childNodes[p],n+1);r("-");break;case"U":r("+");for(var _=0,g=t.childNodes.length;_<g;_++)e(t.childNodes[_],n+1);r("+");break;case"A":r("[");for(var m=0,f=t.childNodes.length;m<f;m++)e(t.childNodes[m],n+1);r("]("),r(t.getAttribute("href")),r(")");break;case"BR":a();break;default:i(t.textContent)}else t.nodeType===Node.TEXT_NODE&&i(t.textContent);else a()},s=0,l=e.childNodes||[],c=l.length;s<c;s++)o(l[s],0);return t.join("\n").trim()},rn=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){e(t).find('textarea[data-plugin="markdown-editor"][data-markdown-loaded="false"]').each((function(){var t;e(t=this).closest("label").each((function(){!function(i){var r,a,o=document.createElement("input");o.setAttribute("type","hidden");for(var s=0,l=t.attributes.length;s<l;s++)o.setAttribute(t.attributes[s].name,t.attributes[s].value);t.parentNode.appendChild(o),i.parentNode.appendChild(t),t.setAttribute("data-markdown-loaded","true"),t.value=U.a.parse(t.value),e(t).trumbowyg({btns:[["strong","em","underline","link","removeformat"]],btnsDef:{unlink:{key:"D"},createLink:{text:"Add link",key:"K",tag:"a"}},semantic:!0,autogrowOnEnter:!0,svgPath:!1,hideButtonTexts:!0,removeformatPasted:!1,allowTagsFromPaste:["b","strong","i","em","u","del","strike"]}).on("tbwchange",(function(){o.value=nn(r),e(o).trigger("input")})).on("tbwblur",(function(){if(a.setAttribute("data-toolbar",""),null!==a.querySelector(".trumbowyg-modal-box")){a.setAttribute("data-toolbar","visible");var e=a.querySelector('.trumbowyg-modal-box input[name="url"]'),t=a.querySelector('.trumbowyg-modal-box input[name="text"]'),i=a.querySelector(".trumbowyg-modal-title");null!==e&&null!==t&&(e.setAttribute("placeholder","URL"),e.setAttribute("data-i18n-placeholder","themes_url"),e.setAttribute("data-role","markdown-url"),t.setAttribute("placeholder","Text"),t.setAttribute("data-i18n-placeholder","editor_text"),t.setAttribute("data-role","markdown-url-text")),null!==i&&(i.textContent="link",i.setAttribute("data-i18n-text","applications_wordpress_select_format_link")),n.getEngine().getI18n().translateDOMNode(a)}})).on("tbwpaste",(function(){o.value=nn(r),e(o).trigger("input")})),r=i.parentNode.querySelector(".trumbowyg-editor"),a=r.parentNode,e(r).on("mousedown",(function(){a.setAttribute("data-toolbar","visible")})),a.setAttribute("data-role","markdown-editor"),null!==e(r).closest("[data-role=attribute-group]")&&e(r).closest("[data-role=attribute-group]").attr("data-has-markdown-property","1")}(this)}))}))}}]),e}();v()(rn,"NAME","MarkdownEditorInspectorPlugin");var an=function(){function e(){o()(this,e),v()(this,"supportedSettingTypeIds",[K.a.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING]),v()(this,"disabled",!1),v()(this,"pluginTargets",void 0),v()(this,"setting",void 0),v()(this,"controls",void 0),v()(this,"readyPluginTargetsCount",0),v()(this,"editorUi",void 0),v()(this,"jQuery",void 0)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(t,n,i){var r=this;if(this.disabled)this.disabled=!1;else{var a=document.getElementById("item"),o=a.getAttribute("data-target-setting-id");if("setting"===a.getAttribute("data-target-element-type")&&-1!==this.supportedSettingTypeIds.indexOf(o)){switch(this.pluginTargets=[],o){case K.a.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING:case K.a.PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING:this.setting=i.getEngine().getDocument().getEditorSettingByTypeId(o),this.pluginTargets.push({node:n.querySelector('[data-role="attribute-group"][data-name="shipping_information"]'),propertyName:"shippingInformation",triggerPropertyName:"useShipping"});break;case K.a.PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING:this.setting=i.getEngine().getDocument().getEditorSettingByTypeId(o),this.pluginTargets.push({node:n.querySelector('[data-role="attribute-group"][data-name="client_information"]'),propertyName:"clientInformation",triggerPropertyName:null},{node:n.querySelector('[data-role="attribute-group"][data-name="invoice_information"]'),propertyName:"invoiceInformation",triggerPropertyName:null});break;case K.a.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING:this.setting=i.getEngine().getDocument().getEditorSettingByTypeId(o),this.pluginTargets.push({node:n.querySelector('[data-role="attribute-group"][data-name="description_information"]'),propertyName:"description",useSingleValue:!0,triggerPropertyName:null})}if(this.setting&&this.pluginTargets.length){this.jQuery=t,this.editorUi=i,this.controls=null,this.readyPluginTargetsCount=0,this.pluginTargets.forEach((function(e){r.processPluginTarget(e)}));var s="data-assocs-".concat(o.replace(/_/g,"-"),"-otl");if(!n.hasAttribute(s)){var l=this,c=t("#item").parent(),u='[id="item"][data-target-setting-id="'.concat(o,'"]');this.pluginTargets.forEach((function(n,i){var r="".concat(u,' [data-role="property"][data-property-name="').concat(n.triggerPropertyName,'"]'),a="".concat(u,' [data-role="property"][data-property-name="').concat(n.propertyName,'"]')+' [data-plugin="payment-processors-assocs"] [data-role="secondary"]';n.triggerPropertyName&&c.on("click",r,(function(e){"INPUT"===e.target.tagName.toUpperCase()&&setTimeout((function(){l.processPluginTarget(l.pluginTargets[i],!0)}),0)})),c.on("input",a,(function(){var n,r=l.pluginTargets[i],a=this.getAttribute("data-type")||null,o=this.value.length?e.ensurePropertyValueWithType(this.value,a):null;if("useSingleValue"in r&&r.useSingleValue)n=o;else{var s=t(this).closest("[data-assoc-field]").attr("data-field-name");s in(n=l.getMultipleValuePropertyData(r.propertyName))&&(n[s]=o)}l.setting.setProperty(r.propertyName,n)}))}));var d="".concat(u," div[data-role=add-controls] > span"),p="".concat(u," div[data-role=add-controls] > div > span");c.on("click",d,(function(){var e=this.parentNode,n="1"===e.getAttribute("data-open");e.setAttribute("data-open",n?"0":"1"),n||setTimeout((function(){t(e).children("div").perfectScrollbar({minScrollbarLength:50,maxScrollbarLength:50})}),0)})),c.on("click",p,(function(){var e=t(this).closest("div[data-role=add-controls]").get(0),n=e.parentNode.querySelector("textarea"),i="[{".concat(this.innerText,"(").concat(this.getAttribute("data-control-id"),")}]");if("selection"in document&&"createRange"in document.selection)n.focus(),document.selection.createRange.call(document.selection).text=i;else if(n.selectionStart||0===n.selectionStart){var r=n.selectionStart,a=n.selectionEnd,o=r+i.length;n.value=n.value.substring(0,r)+i+n.value.substring(a,n.value.length),n.selectionStart=o,n.selectionEnd=o}else n.value+=i;t(n).trigger("input"),e.setAttribute("data-open","0")})),n.setAttribute(s,"1")}}}}}},{key:"processPluginTarget",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&e.node){var i=!e.triggerPropertyName||!!this.setting.getProperty(e.triggerPropertyName),r=e.node,a=e.propertyName,o="1"===r.getAttribute("data-visible"),s=!1;if(i){var l=this.jQuery,c=this.getTemplateModel(e);null!==this.setting.getProperty(a)||"useSingleValue"in e&&e.useSingleValue||this.setting.setProperty(a,this.getMultipleValuePropertyData(a)),r.hasAttribute("data-is-upgraded")||(s=!0,l.when(this.editorUi.getEngine().getResourceManager().get("/modules/Typescript/Form/resources/editor/Payments/Processors/field-assocs.html")).done((function(e){var i=l('[data-role="property"][data-property-name="'.concat(a,'"] span.property-label'),r);i.siblings().remove(),l(new Nt.a(e).parse(c)).insertAfter(i),r.setAttribute("data-is-upgraded","1"),t.notifyPluginTargetReady(n)})))}else i!==o&&(this.setting.setProperty(a,null),r.removeAttribute("data-is-upgraded"));s||this.notifyPluginTargetReady(n)}}},{key:"getTemplateModel",value:function(e){var t=e.propertyName,n=this.getEmptyTemplateModel(t),i=this.setting?this.setting.getProperty(t):null;return n.fields.forEach((function(t){"useSingleValue"in e&&e.useSingleValue?t.value=i:t.value=i&&i.hasOwnProperty(t.name)?i[t.name]:"defaultValue"in t?t.defaultValue:null})),n.controls=this.getFormControls(),n}},{key:"getMultipleValuePropertyData",value:function(e){var t={},n=this.getEmptyTemplateModel(e),i=this.setting.getProperty(e)||{};return n.fields.forEach((function(e){var n=e.name;t[n]=n in i?i[n]:"defaultValue"in e?e.defaultValue:null})),t}},{key:"getFormControls",value:function(){var e=this;return this.controls||(this.controls=[],this.editorUi.getEngine().getDocument().getControlsList().forEach((function(t){if(t.getLabelDOMNode()){var n=t.getId(),i=t.getLabelDOMNode().innerText;t.getTypeId()===b.a.CONTROL_TYPE_ADDRESS||t.getTypeId()===b.a.CONTROL_TYPE_NAME?t.getInputDOMNodes().forEach((function(t){t.inputs.forEach((function(t){var r=P()(t.input,HTMLInputElement)?t.input:t.input.getRootNode(),a=r.hasAttribute("data-i18n-placeholder")?r.getAttribute("data-i18n-placeholder"):$(r).find("input[data-i18n-placeholder]").attr("data-i18n-placeholder");e.controls.push({id:"".concat(n,"-").concat(r.getAttribute("data-index")),label:"".concat(i," - ").concat(e.editorUi.getEngine().getI18n().translateText(a))})}))})):e.controls.push({id:String(n),label:i})}}))),this.controls}},{key:"notifyPluginTargetReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.readyPluginTargetsCount++,(e||this.readyPluginTargetsCount===this.pluginTargets.length)&&this.executeDOMUpdate()}},{key:"executeDOMUpdate",value:function(){var e=this;this.readyPluginTargetsCount=0,this.disabled=!0,this.pluginTargets.forEach((function(t){var n=!t.triggerPropertyName||!!e.setting.getProperty(t.triggerPropertyName);t.node.setAttribute("data-visible",n?"1":"0")})),this.editorUi.upgrade(document.querySelector('#item [data-role="vertical-content"]'))}},{key:"getEmptyTemplateModel",value:function(e){var t=this,n=function(e){return t.editorUi.getEngine().getI18n().translateText(e)},i={descriptionTexts:[],textFieldPlaceholder:n("edt_text_write_something"),addFieldTriggerLabel:n("payments_addField"),fields:[],controls:[]};switch(this.setting.getTypeId()){case K.a.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING:case K.a.PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING:i.descriptionTexts=[n("edt_text_paypal_shipping_info_title"),n("edt_text_paypal_shipping_info_warning")],i.fields.push({name:"firstName",label:n("edt_text_paypal_shipping_info_firstName"),showEmptyOption:!0},{name:"lastName",label:n("edt_text_paypal_shipping_info_lastName"),showEmptyOption:!0},{name:"email",label:n("edt_text_paypal_shipping_info_email"),showEmptyOption:!0},{name:"address1",label:n("edt_text_paypal_shipping_info_address1"),showEmptyOption:!0,required:!0},{name:"address2",label:n("edt_text_paypal_shipping_info_address2"),showEmptyOption:!0},{name:"city",label:n("edt_text_paypal_shipping_info_city"),showEmptyOption:!0,required:!0},{name:"stateCode",label:n("edt_text_paypal_shipping_info_stateCode"),showEmptyOption:!0},{name:"zipCode",label:n("edt_text_paypal_shipping_info_zipCode"),showEmptyOption:!0},{name:"countryCode",label:n("edt_text_paypal_shipping_info_countryCode"),showEmptyOption:!0,required:!0});break;case K.a.PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING:switch(e){case"clientInformation":i.descriptionTexts=[n("edt_text_paypal_shipping_info_title"),n("edt_text_paypal_shipping_info_warning")],i.fields.push({name:"email",label:n("edt_text_freshbooks_client_info_email"),showEmptyOption:!0,required:!0},{name:"firstName",label:n("edt_text_freshbooks_client_info_firstName"),showEmptyOption:!0,required:!0},{name:"lastName",label:n("edt_text_freshbooks_client_info_lastName"),showEmptyOption:!0,required:!0},{name:"organization",label:n("edt_text_freshbooks_client_info_organization"),showEmptyOption:!0},{name:"address1",label:n("edt_text_freshbooks_client_info_address1"),showEmptyOption:!0},{name:"address2",label:n("edt_text_freshbooks_client_info_address2"),showEmptyOption:!0},{name:"city",label:n("edt_text_freshbooks_client_info_city"),showEmptyOption:!0},{name:"state",label:n("edt_text_freshbooks_client_info_state"),showEmptyOption:!0},{name:"country",label:n("edt_text_freshbooks_client_info_country"),showEmptyOption:!0},{name:"code",label:n("edt_text_freshbooks_client_info_code"),showEmptyOption:!0},{name:"workPhone",label:n("edt_text_freshbooks_client_info_workPhone"),showEmptyOption:!0},{name:"homePhone",label:n("edt_text_freshbooks_client_info_homePhone"),showEmptyOption:!0},{name:"mobilePhone",label:n("edt_text_freshbooks_client_info_mobilePhone"),showEmptyOption:!0},{name:"fax",label:n("edt_text_freshbooks_client_info_fax"),showEmptyOption:!0},{name:"internalNotes",label:n("edt_text_freshbooks_client_info_internalNotes"),allowTextInput:!0});break;case"invoiceInformation":i.fields.push({name:"type",label:n("edt_text_freshbooks_invoice_info_create"),showEmptyOption:!1,defaultValue:0,type:"int",options:[{id:0,label:n("edt_text_freshbooks_invoice_info_create_invoice")},{id:1,label:n("edt_text_freshbooks_invoice_info_create_estimate")}]},{name:"status",label:n("edt_text_freshbooks_invoice_info_status"),showEmptyOption:!1,defaultValue:0,type:"int",options:[{id:0,label:n("edt_text_freshbooks_invoice_info_status_email")},{id:1,label:n("edt_text_freshbooks_invoice_info_status_draft")}]},{name:"notes",label:n("edt_text_freshbooks_invoice_info_notes"),allowTextInput:!0},{name:"terms",label:n("edt_text_freshbooks_invoice_info_terms"),allowTextInput:!0})}break;case K.a.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING:i.descriptionTexts=[n("edt_UI_setting_processor_attribute_description_property_description")],i.fields.push({name:"description",allowTextInput:!0})}return i}}],[{key:"ensurePropertyValueWithType",value:function(e,t){switch(t){case"int":return parseInt(e,10);default:return String(e)}}}]),e}();v()(an,"NAME","PaymentProcessorsAssocsInspectorPlugin");var on=n(31),sn=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(t,n,i){var r=document.querySelector("#item"),a=r.getAttribute("data-target-setting-id");if("setting"===r.getAttribute("data-target-element-type")&&-1!==on.a.getGroupSettingTypeIds(on.a.PAYMENT_PROCESSORS).indexOf(a)&&i.getEngine().getDocument().getEditorSettingByTypeId(a)){var o=i.getEngine().getDocument().getConfiguration();t.when(i.getEngine().getResourceManager().get("/modules/Typescript/Form/resources/editor/Payments/Processors/testing-mode.html")).then((function(t){var r,a=n.querySelector('[data-role="attribute-group"][data-name="testing_mode"]');a&&(r=a.querySelectorAll('[data-role="property"]:not([data-property-name="'.concat(e.USE_SANDBOX_PROPERTY_NAME,'"])')),a.remove()),t=new Nt.a(t).parse({useSandbox:!!o.getProperty("isPaymentSandboxEnabled")});var s=n.querySelector('[data-role="attribute-group"]:last-child');if(s)s.insertAdjacentHTML("afterend",t);else{if(!(s=n.querySelector('[data-role="separator"]')))return;s.insertAdjacentHTML("beforebegin",t)}var l=n.querySelector('[data-property-name="'.concat(e.USE_SANDBOX_PROPERTY_NAME,'"] input[type="checkbox"]'));if(l&&(l.addEventListener("change",(function(e){o.withProperty("isPaymentSandboxEnabled",e.target.checked),i.getEngine().getLoader().trigger("payments_use_sandbox_changed")}),{passive:!0}),r)){l.addEventListener("change",(function(){var t=n.querySelectorAll('[data-role="attribute-group"][data-name="testing_mode"] [data-role="property"]:not([data-property-name="'.concat(e.USE_SANDBOX_PROPERTY_NAME,'"])'));t&&t.forEach((function(e){e.style.display="block"===e.style.display||""===e.style.display?"none":"block"}))}),{passive:!0});var c=n.querySelector('[data-property-name="'.concat(e.USE_SANDBOX_PROPERTY_NAME,'"]'));r.forEach((function(e){c.insertAdjacentElement("afterend",e),o.getProperty("isPaymentSandboxEnabled")||(e.style.display="none")}))}}))}}}]),e}();v()(sn,"NAME","PaymentProcessorsInspectorPlugin"),v()(sn,"USE_SANDBOX_PROPERTY_NAME","useSandbox");var ln=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){var i=e(t),r=new ge.a;i.find('input[data-plugin="payments-products"]').each((function(){e(this).parent().find('[data-role="secondary"] a[data-role="edit-payments-products"]').on("click",(function(){r.open(e,n.getEngine()).done((function(e){r.saveData(e)})).fail((function(e){console.warn(e.message)}))}))}))}}]),e}();v()(ln,"NAME","PaymentsProductsPlugin");var cn=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){n.getEngine().getLoader().updateStripeConnectedAccountPlaceholder()}}]),e}();v()(cn,"NAME","ListEditorInspectorPlugin");var un=n(226),dn=n(605),pn=function(){function e(){o()(this,e),v()(this,"DEFAULT_CURRENCY_ID",void 0),v()(this,"settings",void 0),v()(this,"formContainer",void 0),v()(this,"editorUserInterface",void 0),v()(this,"jq",void 0),v()(this,"currency",void 0),v()(this,"currencyService",void 0),v()(this,"i18n",void 0)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){var i=this;this.formContainer=t,this.editorUserInterface=n,this.jq=e,this.init(),e(this.formContainer).find("a[data-plugin=currency-editor]").each((function(e,n){i.setCurrency(n),n.onclick=function(){i.triggerCurrencyDialog(n,t)}})),this.updatePriceFee(),this.updateCurrencySymbol()}},{key:"init",value:function(){var e;this.settings=this.editorUserInterface.getEngine().getDocument().getForm().getEditorSettingByTypeId(K.a.PAYMENT_PRODUCTS_EDITOR_SETTING),this.currencyService=this.editorUserInterface.getEngine().getCurrency();var t=(null===(e=this.settings)||void 0===e?void 0:e.getProperty("currencyId"))||this.DEFAULT_CURRENCY_ID;this.currency=this.currencyService.getCurrencyById(t),this.i18n=this.editorUserInterface.getEngine().getLoader().getI18n()}},{key:"updateCurrencySymbol",value:function(){var e,t=/[^0-9.]/g,n=document.querySelectorAll("#item .fee-base-price-container > input"),i=(null===(e=this.settings)||void 0===e?void 0:e.getProperty("currencyId"))||this.DEFAULT_CURRENCY_ID,r=this.currencyService.getCurrencySymbolById(i);n&&n.forEach((function(e){setTimeout((function(){e.value=e.value.replace(t,""),e.value=r+e.value}),1),e.addEventListener("keypress",(function(e){e.key.match(t)&&e.preventDefault()})),e.addEventListener("focusin",(function(){e.value=e.value.replace(t,"")})),e.addEventListener("focusout",(function(){e.value=e.value.replace(t,""),e.value=r+e.value}))}))}},{key:"setCurrency",value:function(e){e.innerText=this.currency?this.currency.isoCode:this.i18n.translateText("payment_currency_unknown")}},{key:"saveCurrency",value:function(e){this.settings.setProperty("currencyId",e)}},{key:"updatePriceFee",value:function(){var e=this,t=document.querySelectorAll("#form [data-role=control][data-type=fee]");t&&t.forEach((function(t){var n=t.getAttribute("data-hash");e.editorUserInterface.getEngine().getDocument().getElementByHash(n).updatePriceFee()}))}},{key:"updateDiscountAndTax",value:function(e){this.editorUserInterface.upgrade(e,[Yt.NAME])}},{key:"triggerCurrencyDialog",value:function(e,t){var n,i=this,r=this.editorUserInterface.getEngine().getCurrency().enumerateCurrencies().map((function(e){return{id:e.id,label:i.i18n.translateText(e.i18n)}}));r=Object(dn.a)(r,["label"],["asc"]);var a=this.editorUserInterface.createDialog(this.i18n.translateText("payments_form_currency")||ge.a.CURRENCY_DIALOG_TITLE,[{type:it.f.SAVE,callback:function(){n||(n=l.getSelectedOption()),i.currency=i.currencyService.getCurrencyById(n.id),i.setCurrency(e),i.saveCurrency(n.id),i.updatePriceFee(),i.updateCurrencySymbol(),i.updateDiscountAndTax(t),i.editorUserInterface.getEngine().getLoader().execCommand("track-event","payments_currency_change"),i.editorUserInterface.getEngine().getLoader().trigger("payments_currency_change",n),a.close()}},{type:it.f.CANCEL,callback:function(){a.close()}}],{width:"500px",height:"270px"});a.dialog.classList.add("currency-dialog");var o=document.createElement("p");o.textContent=this.i18n.translateText("payments_currency_dialog_description"),a.body.appendChild(o);var s={placeholder:""};this.currency&&(s.selected=this.currency.id);var l=new un.a(this.jq).init(a.body,r,s);l.on("change",(function(){n=l.getSelectedOption()}))}}]),e}();v()(pn,"NAME","PriceEditorInspectorPlugin");var hn=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){e(t).find("[data-propagate-value-css-selector][data-propagate-value-attribute-name]").each((function(){var t=this.getAttribute("data-propagate-value-css-selector")||null,n=this.getAttribute("data-propagate-value-attribute-name")||null;if(t&&n){var i=this.nodeName.toLowerCase(),r="input"===i?this.type:i,a="input"===i&&"checkbox"===r||"radio"===r?this.checked:this.value;e(t).each((function(){var t=this;setTimeout((function(){e(t).trigger("attribute:propagate")}),50)})).attr(n,String(a)||null)}}))}}]),e}();v()(hn,"NAME","PropagatedDOMAttributes");var _n=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){}}]),e}();v()(_n,"NAME","RangedPropertiesDeferredSliderAppearance");var gn=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){var i=e(t).find("div[data-role=property][data-property-name=customerEmail]").get(0)||null,r=n.getEngine().getDocument().getEditorSettingByTypeId(e("#item").attr("data-target-setting-id"));if(i&&r)if(i.hasAttribute("data-is-upgrading"))i.removeAttribute("data-is-upgrading");else{var a=[];n.getEngine().getDocument().getControlsList().forEach((function(e){e.getTypeId()===b.a.CONTROL_TYPE_EMAIL&&a.push({id:e.getId(),name:e.getLabelDOMNode().innerText})}));var o={selectedValue:r.getProperty("customerEmail"),controls:S.a.clone(a)};e.when(n.getEngine().getResourceManager().get("/modules/Typescript/Form/resources/editor/Payments/Processors/Sagepay/customer-email.html")).then((function(t){e("span.property-label",i).siblings().remove(),e(new Nt.a(t).parse(o)).insertAfter(e("span.property-label",i)),i.setAttribute("data-is-upgrading","1"),n.upgrade(document.querySelector('#item [data-role="vertical-content"]'))}))}}}]),e}();v()(gn,"NAME","SagepayCustomerEmailInspectorPlugin");var mn=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){var i=e(t).find("div[data-role=property][data-property-name=locationId]").get(0)||null,r=n.getEngine().getDocument().getEditorSettingByTypeId(e("#item").attr("data-target-setting-id"));if(i&&r){var a={selectedValue:r.getProperty("locationId"),locations:S.a.clone(r.getProperty("locations"))};i.hasAttribute("data-is-upgrading")?i.removeAttribute("data-is-upgrading"):e.when(n.getEngine().getResourceManager().get("/modules/Typescript/Form/resources/editor/Payments/Processors/Square/store-location.html")).then((function(t){e("span.property-label",i).siblings().remove(),e(new Nt.a(t).parse(a)).insertAfter(e("span.property-label",i)),i.setAttribute("data-is-upgrading","1"),n.upgrade(document.querySelector('#item [data-role="vertical-content"]'))}))}}}]),e}();v()(mn,"NAME","SquareStoreLocationInspectorPlugin");var fn=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){var i;i=this,e(t).find("[data-role=property][data-property-name=locations][data-property-type=string]").each((function(){e(this).find("a[data-role=edit-square-locations]").each((function(){this.onclick=function(){i.openSquareLocationsDialog(e,t,n)}}))}))}},{key:"openSquareLocationsDialog",value:function(e,t,n){var i=n.getEngine().getDocument().getEditorSettingByTypeId(K.a.PAYMENT_PROCESSOR_SQUARE_EDITOR_SETTING);if(i){var r,a,o,s,l=S.a.clone(i.getProperty("locations"));r=n.getEngine().getLoader().getUI(),a=n.getEngine().getResourceManager(),o=n.getEngine().getLoader().getI18n(),(s=r.createDialog(o.translateText("edt_UI_setting_processor_square_active_locations"),[{type:it.f.CLOSE,callback:function(){s.close()}}],{width:"900px",height:"615px"})).dialog.setAttribute("data-dialog-role","square-active-locations"),a.get("/modules/Typescript/Form/resources/editor/Payments/Processors/Square/square-locations-dialog.html").then((function(e){var t={locations:l},n=new Nt.a(e);s.body.innerHTML=n.parse(t),o.translateDOMNode(s.body)})).fail((function(e){console.error(e)}))}else console.error("Could not oppen Square locations dialog, invalid settings")}}]),e}();v()(fn,"NAME","SquareStoreLocationsPopupInspectorPlugin");var En=function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){var i;i=this,e(t).find('[data-property-name="choices-isWorkflowsUserDropdown"]').each((function(){e(this).on("click","[data-role=edit-workflows-users]",(function(){var t=e(this).closest("#item[data-role=editor-panel][data-target-element]").attr("data-target-element"),r=n.getEngine().getDocument().getElementByHash(t);i.editUsersList(r,e,n)})).on("change","input[type=checkbox]",(function(){if(this.checked)e(this).closest("[data-role=attribute-group]").attr("data-hide-choices","");else{e(this).closest("[data-role=attribute-group]").attr("data-hide-choices",null);var t=e(this).closest("#item[data-role=editor-panel][data-target-element]").attr("data-target-element");n.getEngine().getDocument().getElementByHash(t).setProperty("choices.isWorkflowsUserDropdownSelectAll",!1).setProperty("choices.values",[{text:"Please Select"}]).synchronizeValue(),n.getEngine().getLoader().getCommandDispatcher().reloadVisiblePanel()}})),function(t){setTimeout((function(){e(t).find("input[type=checkbox]").each((function(){var t=this.checked;e(this).closest("[data-role=attribute-group]").attr("data-hide-choices",t?"":null)}))}),50)}(this)}))}},{key:"editUsersList",value:function(e,t,n){var i,r,a,o;i=n.getEngine().getLoader().getUI(),r=n.getEngine().getResourceManager(),a=n.getEngine().getLoader().getLoaderDependency(O.M.WORKFLOWS_USERS_LIST),(o=i.createDialog("Edit users list",[{type:it.f.SAVE,callback:function(){var n=[];t(o.body).find("table tr[data-user-id]").each((function(){var e=this;t(this).find("input[type=checkbox]").each((function(){this.checked&&n.push({id:~~e.getAttribute("data-user-id"),email:e.getAttribute("data-user-email")})}))}));for(var i=[],r=0,a=n.length;r<a;r++)i.push({text:n[r].email});e.setProperty("choices.values",i),o.close()}},{type:it.f.CANCEL,callback:function(){o.close()}}],{width:"500px",height:"500px"})).dialog.setAttribute("data-dialog-role","workflows-edit-users-dialog"),t(o.body).on("change","table thead tr[data-role=all] input[type=checkbox]",(function(n,i){e.setProperty("choices.isWorkflowsUserDropdownSelectAll",this.checked),t(o.body).find("table tbody tr[data-user-id] td input[type=checkbox]").prop("checked",this.checked)})),t(o.body).on("change","table tbody tr[data-user-id] input[type=checkbox]",(function(n,i){!1===this.checked&&(t(o.body).find("table thead tr[data-role=all] td input[type=checkbox]").prop("checked",!1),e.setProperty("choices.isWorkflowsUserDropdownSelectAll",!1))})),r.get("/modules/Typescript/Form/resources/editor/Dropdown/workflows-edit-users-list-dialog.html").then((function(n){var i=new Nt.a(n),r=e.getProperty("choices.values")||[],s={users:function(e){for(var t,n=[],i=0,a=e.length;i<a;i++){t=!1;for(var o=0,s=r.length;o<s;o++)if(e[i].email.toLowerCase()===String(r[o].text||"").toLowerCase()){t=!0;break}n.push({id:e[i].id,email:e[i].email,selected:t})}return n}(S.a.clone(a)),allCheckbox:e.getProperty("choices.isWorkflowsUserDropdownSelectAll")||!1};o.body.innerHTML=i.parse(s),s.allCheckbox&&t(o.body).find("table tr[data-user-id] input[type=checkbox]").prop("checked",!0)})).fail((function(e){i.alert("Error loading component","There was a network error obtaining the dialog contents. Please retry. If the problem persists, contact support",(function(){o.close()}))}))}}]),e}();v()(En,"NAME","WorkflowEditUsersListInspectorPlugin");var yn=n(299),Tn=function(){function e(){o()(this,e)}return l()(e,null,[{key:"getValueForSingleValueControl",value:function(e){return S.a.clone(e.getProperty("payments.value")||[0])[0]}},{key:"setValueForSingleValueControl",value:function(e,t){var n=null===t?[0]:[t];e.hasProperty("payments.value")&&e.setProperty("payments.value",n),null===t&&$("#item").find('[data-role="attribute-group"][data-name="payments"] [data-role="property"][data-property-name="payments-virtualValue"] input[type="number"]').val(n[0]);var i=e.getProperty("payments.hasProductsSettingsEntry"),r=e.getForm().getEngine().getLoader();if(!i&&!r.getCommandDispatcher().isErrorStateNotification(r.getUI().getCurrentNotification())){var a=e.getForm().getEditorSettingByTypeId(K.a.PAYMENT_PRODUCTS_EDITOR_SETTING),o=a.getProperty("productsData"),s=window.location.href.replace("p=edit_fields","p=settings&tab=4"),l=r.getI18n().translateText("edt_UI_msg_payments_products_first_add_notification",s),c=e.getForm().getEngine().getDocument().getConfiguration().getProperty("hasProcessorsInjected");o&&0!==o.length||c||r.getUI().createNotification(l,!1,it.i.DEFAULT,!0),!1===e.getProperty("payments.isProduct")?a.hasProperty("productsData")&&a.setProperty("productsData",a.getProperty("productsData")||[]):a.hasProperty("productsData")&&a.setProperty("productsData",(a.getProperty("productsData")||[]).concat([{controlId:e.getId(),tax:0,taxType:0,discount:0,discountType:0}])),e.hasProperty("payments.hasProductsSettingsEntry")&&e.setProperty("payments.hasProductsSettingsEntry",!0),r.execCommand("track-event","payments_products_add")}r.execCommand("track-event","payments_products_price_change"),r.trigger("payments_products_price_change")}},{key:"getValueForOptionsBasedControl",value:function(e){var t=S.a.clone(e.getProperty("payments.value")||[]);return S.a.clone(e.getProperty("choices.values")||[]).map((function(e,n){return e.paymentsValue=t[n]||null,e}))}},{key:"setValueForOptionsBasedControl",value:function(e,t){var n=!1,i=e.getProperty("payments.hasProductsSettingsEntry"),r=e.getForm().getEngine().getLoader();if(e.hasProperty("choices.values")&&e.setProperty("choices.values",t),e.hasProperty("payments.value")&&e.setProperty("payments.value",t.map((function(e){return null!==e.paymentsValue?(n=!0,e.paymentsValue):0}))),n){if(!i&&!r.getCommandDispatcher().isErrorStateNotification(r.getUI().getCurrentNotification())){var a=e.getForm().getEditorSettingByTypeId(K.a.PAYMENT_PRODUCTS_EDITOR_SETTING),o=a.getProperty("productsData"),s=window.location.href.replace("p=edit_fields","p=settings&tab=4"),l=r.getI18n().translateText("edt_UI_msg_payments_products_first_add_notification",s),c=e.getForm().getEngine().getDocument().getConfiguration().getProperty("hasProcessorsInjected");o&&0!==o.length||c||r.getUI().createNotification(l,!1,it.i.DEFAULT,!0),!1===e.getProperty("payments.isProduct")?a.hasProperty("productsData")&&a.setProperty("productsData",a.getProperty("productsData")||[]):a.hasProperty("productsData")&&a.setProperty("productsData",(a.getProperty("productsData")||[]).concat([{controlId:e.getId(),tax:0,taxType:0,discount:0,discountType:0}])),e.hasProperty("payments.hasProductsSettingsEntry")&&e.setProperty("payments.hasProductsSettingsEntry",!0),r.execCommand("track-event","payments_products_add")}r.execCommand("track-event","payments_products_price_change"),r.trigger("payments_products_price_change")}}},{key:"getValueForComposedControl",value:function(e){var t=e.getChildren();if(0===t.length)return[];var n=t.map((function(e){return e.getProperty("payments.value")}));return t.map((function(e){return e.getProperty("choices.values")})).map((function(e,t){return e.map((function(e,i){if(null===n[t])return e.paymentsValue=null,e;e.paymentsValue=n[t][i]||null})),e}))}},{key:"setValueForComposedControl",value:function(e,t){for(var n=!1,i=e.getForm().getEngine().getLoader(),r=e.getChildren(),a=0,o=t.length;a<o;a++){var s=!1;if(void 0!==r[a]&&P()(r[a],Ae)){if(n=r[a].getProperty("payments.hasProductsSettingsEntry"),r[a].hasProperty("choices.values")&&r[a].setProperty("choices.values",S.a.trimChoices(t[a])),r[a].hasProperty("payments.value")&&r[a].setProperty("payments.value",t[a].map((function(e){return null!==e.paymentsValue?(s=!0,e.paymentsValue):0}))),!s)continue;if(!n&&!i.getCommandDispatcher().isErrorStateNotification(i.getUI().getCurrentNotification())){var l=i.getEngine().getDocument().getEditorSettingByTypeId(K.a.PAYMENT_PRODUCTS_EDITOR_SETTING),c=l.getProperty("productsData"),u=window.location.href.replace("p=edit_fields","p=settings&tab=4"),d=i.getI18n().translateText("edt_UI_msg_payments_products_first_add_notification",u),p=i.getEngine().getDocument().getConfiguration().getProperty("hasProcessorsInjected");c&&0!==c.length||p||i.getUI().createNotification(d,!1,it.i.DEFAULT,!0),!1===r[a].getProperty("payments.isProduct")?l.hasProperty("productsData")&&l.setProperty("productsData",l.getProperty("productsData")||[]):l.hasProperty("productsData")&&l.setProperty("productsData",(l.getProperty("productsData")||[]).concat([{controlId:r[a].getId(),tax:0,taxType:0,discount:0,discountType:0}])),r[a].hasProperty("payments.hasProductsSettingsEntry")&&r[a].setProperty("payments.hasProductsSettingsEntry",!0),i.execCommand("track-event","payments_products_add")}}}i.execCommand("track-event","payments_products_price_change"),i.trigger("payments_products_price_change")}}]),e}(),vn=n(83);function On(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var bn=function(e){u()(n,e);var t=On(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTAINER_TYPE_DIV}},{key:"getElementName",value:function(){return"Div"}},{key:"getResizingCapability",value:function(){return O.db.LEFT_AND_RIGHT}},{key:"withColspan",value:function(e){if(y()(_()(n.prototype),"withColspan",this).call(this,e),this.children.length)for(var t=0,i=this.children.length;t<i;t++)this.children[t].getTypeId()===b.a.CONTAINER_TYPE_ROW&&(this.children[t].withColspan(e),this.children[t].makeElementsToFitColspanUsingTheFairResizingAlgorithm(e,!0));return this}},{key:"unwrap",value:function(){for(;this.children.length;)this.getParent().getParent().insertBefore(this.getParent(),this.getFirstChild());this.getParent().removeChild(this),this.getForm().normalize()}},{key:"isSelectable",value:function(){return!1}},{key:"isDragable",value:function(){return!1}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"enumerateTranslations",value:function(){return[]}}],[{key:"getConfiguration",value:function(){return{category:"containers",icon:"i123-date",isContainer:!0,keywords:"div container",name:"Div",typeId:b.a.CONTAINER_TYPE_DIV,isVirtual:!0,index:99999,accessibilityFields:O.v.NONE}}}]),n}(vn.a);function Cn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(bn,"attributes",{}),v()(bn,"runtime",null),v()(bn,"nodeName","div");var In=function(e){u()(n,e);var t=Cn(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"likertHeaderDOMNode",void 0),v()(A()(r),"likertHeaderCSSDOMNode",void 0),v()(A()(r),"headerScaleI18nTexts",[]),v()(A()(r),"labelI18nText",null),v()(A()(r),"setupI18nAsync",void 0);var a=r.getHash();return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","likertwrapper-".concat(a,"-acc")),r.errorDOMNode=document.createElement("label"),r.errorDOMNode.setAttribute("data-role","error"),r.errorDOMNode.setAttribute("id","likertwrapper-".concat(a,"-error-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("aria-labelledby","likertwrapper-".concat(a,"-instr-acc")),r.likertHeaderDOMNode=document.createElement("div"),r.likertHeaderDOMNode.setAttribute("data-role","likert-header"),r.likertHeaderCSSDOMNode=document.createElement("style"),r.rootNode.tabIndex=0,r.rootNode.setAttribute("aria-labelledby","likertwrapper-".concat(a,"-acc ")+"likertwrapper-".concat(a,"-error-acc ")+"likertwrapper-".concat(a,"-instr-acc")),r.init(),r.updateAccessibilityTabIndexes(),r}return l()(n,[{key:"onCreated",value:function(){var e=this;this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.updateBoldOptionsState(),this.updateChoiceTextAlignment(),this.updateHiddenAttribute(),this.setupDOMEvents();for(var t=0,n=this.getChildren()||[],i=n.length;t<i;t++)n[t].onCreated();setTimeout((function(){e.updateRequiredState(),e.getForm().getEngine().getLoader().getLoaderType()===O.B.VIEW&&e.randomizeOptions()}),100)}},{key:"getTypeId",value:function(){return b.a.CONTAINER_TYPE_LIKERT_WRAPPER}},{key:"getElementName",value:function(){return"Likert scale"}},{key:"appendChild",value:function(e){if(!e)throw new Error("Attempted to append a invalid element!");if(e.getTypeId()===b.a.CONTROL_TYPE_LIKERT_SCALE){var t=y()(_()(n.prototype),"appendChild",this).call(this,e);this.reRender(),e.setupI18n();var i=Object(ve.d)(t);return this.store.dispatch(i),t}throw new Error("Attempted to append a non-likert-scale element inside a likert wrapper")}},{key:"insertBefore",value:function(e,t){if(!t)throw new Error('Invalid argument "child": IFormElement expected!');if(t.getTypeId()===b.a.CONTROL_TYPE_LIKERT_SCALE){var i=y()(_()(n.prototype),"insertBefore",this).call(this,e,t);return this.reRender(),t.setupI18n(),i}throw new Error("Attempted to insert a non-likert-scale element inside a likert wrapper")}},{key:"insertAfter",value:function(e,t){if(!t)throw new Error('Invalid argument "child": IFormElement expected!');if(t.getTypeId()===b.a.CONTROL_TYPE_LIKERT_SCALE){var i=y()(_()(n.prototype),"insertAfter",this).call(this,e,t);return this.reRender(),t.setupI18n(),i}throw new Error("Attempted to insert a non-likert-scale element inside a likert wrapper")}},{key:"removeChild",value:function(e){var t=y()(_()(n.prototype),"removeChild",this).call(this,e);this.reRender();var i=Object(ve.k)([e]);return this.store.dispatch(i),t}},{key:"isRenderingSupported",value:function(){return!0}},{key:"getResizingCapability",value:function(){return O.db.LEFT_AND_RIGHT}},{key:"getChoiceStatements",value:function(){for(var e=[],t=0,n=(this.getChildren()||[]).length;t<n;t++)e.push({text:this.children[t].getProperty("label.labelText"),i18n:this.children[t].getProperty("label.i18nLabelKey")});return e&&e.length?e:null}},{key:"setupNewStatement",value:function(e,t){if(e.setProperty("label.widthInUnits",t.labelWidthInUnits),e.setProperty("options.inlineOptions",t.inlineOptions),e.setProperty("options.boldOptions",t.boldOptions),null!==t.choices){for(var n=[],i=0,r=t.choices.length;i<r;i++){var a={isCorrect:"undefined"!==typeof t.choices[i].isCorrect&&null!==t.choices[i].isCorrect?t.choices[i].isCorrect:null,isDefault:"undefined"!==typeof t.choices[i].isDefault&&null!==t.choices[i].isDefault?t.choices[i].isDefault:null,numberOfTimesThisOptionCanBeChosen:0,numberOfTimesThisOptionHasBeenChosen:0,quizPoints:0,text:t.choices[i].text};n.push(a)}e.setProperty("choices.values",n)}e.reRender(),e.updateChoices()}},{key:"setChoiceStatements",value:function(e){for(var t,n,i=this,r=S.a.trimChoices(e)||[],a=this.getChildren(),o=r.length-a.length,s=this.getForm().getEngine(),l=a[0]?a[0].getProperty("label.widthInUnits"):null,c=this.getProperty("options.boldOptions"),u=this.getProperty("options.inlineOptions"),d=a[0]?a[0].getProperty("choices.values"):null;0!=o;)o<0?(this.removeChild(a.pop()),o++):(t=s.createElement(b.a.CONTROL_TYPE_LIKERT_SCALE),this.setupNewStatement(t,{labelWidthInUnits:l,boldOptions:c,inlineOptions:u,choices:d}),a.push(t),this.appendChild(t),o--);for(var p=0,h=a.length;p<h;p++)n=!1,a[p].getProperty("label.labelText")!==r[p].text&&(a[p].setProperty("label.labelText",r[p].text),n=!0),r[p].i18n=r[p].i18n||null,a[p].getProperty("label.i18nLabelKey")!==r[p].i18n&&(a[p].setProperty("label.i18nLabelKey",r[p].i18n),n=!0),n&&a[p].updateLabelText();setTimeout((function(){i.reRender()}),100)}},{key:"getInputDOMNodes",value:function(){var e=this.getProperty("options.inlineOptions"),t=[],n=this.getChildren()||[];e||this.getForm().getEngine().getTheme().isMobileLayout()||t.push({inputs:[{input:this.likertHeaderDOMNode,width:O.I.FULL}]});for(var i=0,r=n.length;i<r;i++)n[i].updateChoices(),t.push({inputs:[{input:n[i].getRootNode(),width:O.I.FULL}]});return t}},{key:"getChoiceScale",value:function(){var e=this.getChildren()||[];return 0===e.length?null:e.map((function(e){return e.getProperty("choices.values")}))}},{key:"setChoiceScale",value:function(e){for(var t=this.getChildren()||[],n=0,i=t.length;n<i;n++){for(var r=[],a=0,o=e[n].length;a<o;a++){var s={text:e[n][a].text,isDefault:"undefined"!==typeof e[n][a].isDefault&&null!==e[n][a].isDefault?e[n][a].isDefault:null,isCorrect:e[n][a]&&"undefined"!==typeof e[n][a].isCorrect&&null!==e[n][a].isCorrect?e[n][a].isCorrect:null,quizPoints:e[n][a]&&"undefined"!==typeof e[n][a].quizPoints&&null!==e[n][a].quizPoints?e[n][a].quizPoints:null,numberOfTimesThisOptionCanBeChosen:"undefined"!==typeof e[n][a].numberOfTimesThisOptionCanBeChosen&&null!==e[n][a].numberOfTimesThisOptionCanBeChosen?e[n][a].numberOfTimesThisOptionCanBeChosen:null,paymentsValue:"undefined"!==typeof e[n][a].paymentsValue&&null!==e[n][a].paymentsValue?e[n][a].paymentsValue:null,i18nLabel:"undefined"!==typeof e[n][a].i18nLabel&&null!==e[n][a].i18nLabel?e[n][a].i18nLabel:null};r.push(s)}t[n].setProperty("choices.values",r)}this.updateLikertHeader()}},{key:"updateLikertHeader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e){var t,n=this.getProperty("options.inlineOptions"),i=this.getChildren().length>0&&this.getChildren()[0].getProperty("choices.values")||[],r=i.length,a=this.getHash(),o="width: calc( (100% - ".concat(r,"px) / ").concat(r,") !important;");if(this.getForm().getEngine().getTheme().isMobileLayout()&&(o="display: block !important"),this.likertHeaderCSSDOMNode.textContent='\n            div[data-role=container][data-type=likert-wrapper][data-hash="'.concat(a,'"] div[data-role=likert-header] > * {').concat(o,"}"),this.getRootNode().appendChild(this.likertHeaderCSSDOMNode),!n){this.likertHeaderDOMNode.innerHTML="";for(var s=0,l=i.length;s<l;s++)(t=document.createElement("div")).setAttribute("data-role","scale-column"),t.setAttribute("id","likert-scale-column-".concat(a,"-").concat(s)),t.setAttribute("data-skip-markdown","true"),t.textContent=i[s].text,this.likertHeaderDOMNode.appendChild(t),this.headerScaleI18nTexts[s]&&(t.setAttribute("data-i18n-text",this.headerScaleI18nTexts[s]),t.setAttribute("data-skip-markdown",this.headerScaleI18nTexts[s]))}}var c=null;!function(e,t){e(t).find("> div[data-role=input-row]:not([data-is-first-row])").first().each((function(){e(this).find("> div[data-role=control] > div[data-role=input-column]").first().each((function(){c=this.getAttribute("data-colspan")}))}))}(this.getForm().getEngine().getJQuery(),this.rootNode),(c=String(c||""))?this.likertHeaderDOMNode.setAttribute("data-colspan",c):this.likertHeaderDOMNode.removeAttribute("data-colspan")}},{key:"setRendererType",value:function(e){switch(e){case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD:case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL:case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:y()(_()(n.prototype),"setRendererType",this).call(this,e);break;case O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD:case O.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD:y()(_()(n.prototype),"setRendererType",this).call(this,O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD);break;case O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL:case O.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL:y()(_()(n.prototype),"setRendererType",this).call(this,O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL);break;case O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:case O.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:y()(_()(n.prototype),"setRendererType",this).call(this,O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD);break;case O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:case O.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:y()(_()(n.prototype),"setRendererType",this).call(this,O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD);break;default:y()(_()(n.prototype),"setRendererType",this).call(this,O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD)}this.updateLikertHeader()}},{key:"updateLabelWidthInUnitsToChildNodes",value:function(e){for(var t=this.getChildren()||[],n=0,i=t.length;n<i;n++)t[n].getProperty("label.widthInUnits")!==e&&(t[n].setProperty("label.widthInUnits",e),t[n].reRender());this.updateLikertHeader(!0)}},{key:"setupDefaults",value:function(){return this.setProperty("choices.statements",[{text:"Statement 1"},{text:"Statement 2"},{text:"Statement 3"}]),this.setProperty("choices.scale",[[{text:"Very Good",isCorrect:null,isDefault:null,numberOfTimesThisOptionCanBeChosen:null,paymentsValue:null,quizPoints:null},{text:"Good",isCorrect:null,isDefault:null,numberOfTimesThisOptionCanBeChosen:null,paymentsValue:null,quizPoints:null},{text:"Fair",isCorrect:null,isDefault:null,numberOfTimesThisOptionCanBeChosen:null,paymentsValue:null,quizPoints:null},{text:"Poor",isCorrect:null,isDefault:null,numberOfTimesThisOptionCanBeChosen:null,paymentsValue:null,quizPoints:null},{text:"Very Poor",isCorrect:null,isDefault:null,numberOfTimesThisOptionCanBeChosen:null,paymentsValue:null,quizPoints:null}],[{text:"Very Good",isCorrect:null,isDefault:null,numberOfTimesThisOptionCanBeChosen:null,numberOfTimesThisOptionHasBeenChosen:null,paymentsValue:null,quizPoints:null},{text:"Good",isCorrect:null,isDefault:null,numberOfTimesThisOptionCanBeChosen:null,numberOfTimesThisOptionHasBeenChosen:null,paymentsValue:null,quizPoints:null},{text:"Fair",isCorrect:null,isDefault:null,numberOfTimesThisOptionCanBeChosen:null,numberOfTimesThisOptionHasBeenChosen:null,paymentsValue:null,quizPoints:null},{text:"Poor",isCorrect:null,isDefault:null,numberOfTimesThisOptionCanBeChosen:null,numberOfTimesThisOptionHasBeenChosen:null,paymentsValue:null,quizPoints:null},{text:"Very Poor",isCorrect:null,isDefault:null,numberOfTimesThisOptionCanBeChosen:null,numberOfTimesThisOptionHasBeenChosen:null,paymentsValue:null,quizPoints:null}],[{text:"Very Good",isCorrect:null,isDefault:null,numberOfTimesThisOptionCanBeChosen:null,paymentsValue:null,quizPoints:null},{text:"Good",isCorrect:null,isDefault:null,numberOfTimesThisOptionCanBeChosen:null,paymentsValue:null,quizPoints:null},{text:"Fair",isCorrect:null,isDefault:null,numberOfTimesThisOptionCanBeChosen:null,paymentsValue:null,quizPoints:null},{text:"Poor",isCorrect:null,isDefault:null,numberOfTimesThisOptionCanBeChosen:null,paymentsValue:null,quizPoints:null},{text:"Very Poor",isCorrect:null,isDefault:null,numberOfTimesThisOptionCanBeChosen:null,paymentsValue:null,quizPoints:null}]]),this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_likert_scale_name")),this.updateLabelText(),this}},{key:"updateBoldOptionsState",value:function(){for(var e=this.getProperty("options.boldOptions"),t=this.getChildren()||[],n=0,i=t.length;n<i;n++)t[n].setProperty("options.boldOptions",e);e?this.rootNode.setAttribute("data-has-bold-options",""):this.rootNode.removeAttribute("data-has-bold-options")}},{key:"updateInlineOptionsState",value:function(){for(var e=this.getProperty("options.inlineOptions"),t=this.getChildren()||[],n=0,i=t.length;n<i;n++)t[n].setProperty("options.inlineOptions",e);this.reRender()}},{key:"updateChoiceTextAlignment",value:function(){switch(this.getProperty("options.choiceTextAlignment")){case"center":this.rootNode.setAttribute("data-choice-text-alignment","center");break;case"right":this.rootNode.setAttribute("data-choice-text-alignment","right");break;case"left":default:this.rootNode.setAttribute("data-choice-text-alignment","left")}}},{key:"isRequired",value:function(){for(var e=this.getChildren(),t=0,n=e.length;t<n;t++)if(!e[t].getProperty("options.required"))return!1;return e.length>0}},{key:"setRequired",value:function(e){for(var t=this.getChildren(),n=0,i=t.length;n<i;n++)t[n].hasProperty("options.required")&&t[n].setProperty("options.required",e);this.updateRequiredState()}},{key:"setupDOMEvents",value:function(){!function(e,t){function n(n,i){if(-1===n&&t.rootNode===document.activeElement)return!1;for(var r=Array.prototype.slice.call(t.rootNode.querySelectorAll("label[data-role=checkbox]"),0),a=null,o=0,s=r.length;o<s;o++)if(document.activeElement===r[o]){a=o;break}if(null===a)return!1;var l=null;return i&&(l=e(r[a]).closest("div[data-role=input-row]").get(0)),a+=n,(!i||l===e(r[a]).closest("div[data-role=input-row]").get(0))&&(!(a<0)&&(!(a>=r.length)&&(r[a].focus(),document.activeElement===r[a]||(setTimeout((function(){e(r[a]).focus()}),0),!1))))}t.rootNode.addEventListener("keydown",(function(e){var i=e.keyCode||e.charCode,r=!1,a=1;try{a=t.rootNode.querySelector("div[data-role=input-row]").querySelectorAll("label[data-role=checkbox], div[data-role=scale-column]").length}catch(e){}switch(i){case V.a.KEY_TAB:r=e.shiftKey?n(-1,!1):n(1,!1);break;case V.a.KEY_LEFT:r=n(-1,!0);break;case V.a.KEY_UP:r=n(-a,!1);break;case V.a.KEY_RIGHT:r=n(1,!0);break;case V.a.KEY_DOWN:r=n(a,!1)}r&&(e.preventDefault(),e.stopPropagation())}),!0)}(this.getForm().getEngine().getJQuery(),this)}},{key:"init",value:function(){var e=this;this.setupI18nAsync=ie.a.create((function(){e.setupI18n()}),0),this.on("translation-set",(function(t,n){null!==t?e.headerScaleI18nTexts[t]=e.headerScaleI18nTexts[t]||n:e.labelI18nText=n,e.setupI18nAsync()})),this.on("child-visibility-changed",(function(){e.hideContainerIfAllChildrenAreNotShown()}))}},{key:"setupI18n",value:function(){if(this.headerScaleI18nTexts.length&&this.likertHeaderDOMNode)for(var e=0,t=this.likertHeaderDOMNode.children,i=t.length;e<i;e++)this.headerScaleI18nTexts[e]&&t[e].setAttribute("data-i18n-text",this.headerScaleI18nTexts[e]);return this.labelI18nText&&this.labelDOMNode.setAttribute("data-i18n-text",this.labelI18nText),this.getForm().getEngine().getI18n().translateDOMNode(this.getRootNode()),y()(_()(n.prototype),"setupI18n",this).call(this)}},{key:"updateHiddenAttribute",value:function(){this.hasProperty("options.hidden")&&this.getProperty("options.hidden")?this.rootNode.setAttribute("data-is-hidden","1"):this.rootNode.removeAttribute("data-is-hidden")}},{key:"randomizeOptions",value:function(){if(this.hasProperty("options.randomizeOrder")&&this.getProperty("options.randomizeOrder")){for(var e=[],t=0,n=this.getChildren(),i=n.length;t<i;t++)e.push({index:t,child:n[t],node:n[t].getRootNode()});for(var r=0,a=(e=S.a.shuffle(e)).length;r<a;r++)this.rootNode.appendChild(e[r].node)}else if(this.getForm().getEngine().getLoader().getLoaderType()===O.B.EDIT)for(var o=0,s=this.getChildren(),l=s.length;o<l;o++)this.rootNode.appendChild(s[o].getRootNode())}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"updateAccessibilityTabIndexes",value:function(){var e=this;y()(_()(n.prototype),"updateAccessibilityTabIndexes",this).call(this);var t=this.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1);setTimeout((function(){if(t)for(var n=0,i=e.getChildren(),r=i.length;n<r;n++)for(var a=i[n].flatten()[0].getRootNode().querySelectorAll("label[data-role=checkbox]"),o=0,s=a.length;o<s;o++)a[o].setAttribute("aria-labelledby","likert-scale-column-".concat(e.getHash(),"-").concat(o))}),500)}},{key:"hideContainerIfAllChildrenAreNotShown",value:function(){for(var e=!0,t=0,n=this.getChildren()||[],i=n.length;t<i;t++)if(n[t].isVisible()){e=!1;break}e?this.rootNode.setAttribute("data-is-hidden","1"):this.rootNode.removeAttribute("data-is-hidden")}},{key:"onFocusEnter",value:function(){this.getRootNode().hasAttribute("data-is-active")||this.getRootNode().setAttribute("data-is-active","1")}},{key:"onFocusLeave",value:function(){this.getRootNode().hasAttribute("data-is-active")&&this.getRootNode().removeAttribute("data-is-active")}},{key:"enumerateTranslations",value:function(){for(var e,t,n,i=[],r=this.getProperty("label.labelText")||"",a=this.getProperty("instructions.text")||"",o=this.getChildren()||[],s=0,l=0,c=o.length;l<c;l++)if(o[l].getId()){if(0===s){e=String(o[l].getId()),r&&i.push({key:"likert_headline_".concat(o[l].getId()),sourceText:r}),a&&i.push({key:"likert_instructions_".concat(o[l].getId()),sourceText:a}),(t=o[l].getProperty("label.labelText")||"")&&i.push({key:"control_label_".concat(o[l].getId()),sourceText:t});for(var u=0,d=(n=o[l].getProperty("choices.values")||[]).length;u<d;u++)i.push({key:"control_label_".concat(o[l].getId(),"_choice_").concat(u),sourceText:n[u].text})}else{r&&i.push({key:"likert_headline_".concat(o[l].getId()),sourceText:r,hidden:!0,syncWith:"likert_headline_".concat(e)}),a&&i.push({key:"likert_instructions_".concat(o[l].getId()),sourceText:a,hidden:!0,syncWith:"likert_instructions_".concat(e)}),(t=o[l].getProperty("label.labelText")||"")&&i.push({key:"control_label_".concat(o[l].getId()),sourceText:t});for(var p=0,h=(n=o[l].getProperty("choices.values")||[]).length;p<h;p++)i.push({key:"control_label_".concat(o[l].getId(),"_choice_").concat(p),sourceText:n[p].text,hidden:!0,syncWith:"control_label_".concat(e,"_choice_").concat(p)})}s++}return i}},{key:"setStatementsWithChoicesValues",value:function(e){for(var t=this.getChildren()||[],n=0,i=e.statements.length;n<i;n++)for(var r=e.statements[n],a=0,o=r.choices.length;a<o;a++){var s=r.choices[a];s.quizPoints=parseInt(s.quizPoints),s.i18nLabel=null}for(var l=0,c=t.length;l<c;l++)t[l].setProperty("choices.values",e.statements[l].choices)}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTAINER_TYPE_LIKERT_WRAPPER,name:"Likert Scale",isContainer:!1,category:O.w.RATING_SCALES,keywords:"likert scale radio radios matrix",icon:"i123-editor_field_likertscale",isVirtual:!1,i18nName:"edt_UI_control_type_likert_scale_name",i18nKeywords:"edt_UI_control_type_likert_scale_keywords",index:20,accessibilityFields:O.v.ROOT_NODE,title:vn.a.translationService.translateText("editorFieldTooltip_likertScale")}}}]),n}(vn.a);v()(In,"attributes",{}),v()(In,"runtime",null),v()(In,"nodeName","likert-wrapper");var Rn=n(113);function Pn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Nn=function(e){u()(n,e);var t=Pn(n);function n(e,i){var r;return o()(this,n),(r=t.call(this,e,i)).rootNode.removeChild(r.emptyPageContainer),r.separator=document.createElement("div"),r.separator.setAttribute("data-role","after-submit-page-break"),r.separator.innerHTML='<div><div data-role="page-separator-line"></div>\n            <button data-role="after-submit-button" data-i18n-text="edt_text_after_submit_button">After submit</button>\n            <div data-role="page-separator-line"></div></div>',r.updateActionBarButtonsThrottled=ie.a.create((function(){r.updateActionBarButtonsInImmediateMode()}),50),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE}},{key:"renderFooter",value:function(){for(;this.footer.firstChild;)this.footer.removeChild(this.footer.firstChild);this.isAttached()&&(lt.a.ALLOW_PAYMENTS_SUMMARY&&this.addPaymentsSummaryToPageFooter(),this.addActionBarControlToPageFooter())}},{key:"addPaymentsSummaryToPageFooter",value:function(){var e=this.getForm().getEngine().getLoader().getLoaderDependency(O.M.DETAILED_INVOICE_OPTIONS);if(e&&!e.showPaymentsSummaryBelowForm){var t=document.createElement("div");t.setAttribute("data-type","payment-summary"),this.getForm().getEngine().getLoader().getLoaderDependency(O.M.SHOULD_SHOW_PAYMENT_SUMMARY)||t.setAttribute("data-is-empty","1"),t.innerHTML=this.getForm().getEngine().getLoader().getLoaderDependency(O.M.LAST_CALCULATION_HTML_MARKUP)||"",this.getForm().getEngine().getLoader().execCommand("add-payment-summary-listeners",t),this.footer.appendChild(t)}}}]),n}(Rn.a);function An(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(Nn,"nodeName","payment-summary-page");var Sn=function(e){u()(n,e);var t=An(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"getTypeId",value:function(){return b.a.CONTAINER_TYPE_ROW}},{key:"getElementName",value:function(){return"Row"}},{key:"getLayoutDirection",value:function(){return O.L.LEFT_TO_RIGHT}},{key:"getMinColspan",value:function(){for(var e=0,t=0,n=this.children.length;t<n;t++)e+=this.children[t].getMinColspan();return e||1}},{key:"makeElementsToFitColspanUsingTheFairResizingAlgorithm",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!==e&&0!==this.children.length){var n,i=0,r=0,a=0,o=0;if(!(e<0)){do{n=[],i=0,r=0;for(var s=0,l=this.children.length;s<l;s++)(r=(a=this.children[s].getColspan())-this.children[s].getMinColspan())>0&&n.push({element:this.children[s],canDecreaseColspan:r,colspan:a}),i+=a;if(0===n.length)break;if(i<=e)break;n.sort((function(e,t){return t.canDecreaseColspan-e.canDecreaseColspan}));for(var c=0,u=n.length;c<u;c++)if(n[c].element.withColspan(n[c].colspan-1),n[c].element.getColspan()!==n[c].colspan){i--;break}if(++o>20){console.warn("fair resize: infinite loop detected while shrinking!");break}}while(i>=e);if(t){o=0;do{n=[],i=0;for(var d=0,p=this.children.length;d<p;d++)n.push({element:this.children[d],canDecreaseColspan:0,colspan:a=this.children[d].getColspan()}),i+=a;if(i>=e)break;n.sort((function(e,t){return e.canDecreaseColspan-t.canDecreaseColspan}));for(var h=0,_=n.length;h<_;h++)if(n[h].element.withColspan(n[h].colspan+1),n[h].element.getColspan()!=n[h].colspan){i++;break}if(++o>20){console.warn("fair resize: infinite loop detected while enlarging!");break}}while(i<e)}}}}},{key:"withColspan",value:function(e){return null===e||this.makeElementsToFitColspanUsingTheFairResizingAlgorithm(e),y()(_()(n.prototype),"withColspan",this).call(this,e)}},{key:"getColspan",value:function(){var e=y()(_()(n.prototype),"getColspan",this).call(this);return null===e&&null!==this.getParent()&&(e=this.getParent().getColspan()),null===e?20:e}},{key:"isRemovable",value:function(){return!0}},{key:"isDuplicatable",value:function(){return!1}},{key:"isSelectable",value:function(){return!1}},{key:"isDragable",value:function(){return!1}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"enumerateTranslations",value:function(){return[]}}],[{key:"getConfiguration",value:function(){return null}}]),n}(vn.a);function Ln(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(Sn,"nodeName","virtual-form-table-row"),v()(Sn,"attributes",{}),v()(Sn,"runtime",null);var Dn=function(e){u()(n,e);var t=Ln(n);function n(e,i){var r;o()(this,n),r=t.call(this,e,i),v()(A()(r),"body",void 0),v()(A()(r),"addGroupButton",void 0),v()(A()(r),"visible",void 0);var a=r.getHash();return r.labelDOMNode=document.createElement("label"),r.labelDOMNode.setAttribute("data-role","label"),r.labelDOMNode.setAttribute("id","repeatable-".concat(a,"-acc")),r.instructionsDOMNode=document.createElement("dt"),r.instructionsDOMNode.setAttribute("data-role","instructions"),r.instructionsDOMNode.setAttribute("aria-labelledby","repeatable-".concat(a,"-instr-acc")),r.rootNode.tabIndex=0,r.rootNode.setAttribute("aria-labelledby","repeatable-".concat(a,"-acc ")+"repeatable-".concat(a,"-error-acc ")+"repeatable-".concat(a,"-instr-acc")),r.body=document.createElement("div"),r.body.setAttribute("data-role","body"),r.addGroupButton=document.createElement("button"),r.addGroupButton.setAttribute("data-role","add-group-button"),r.addGroupButton.setAttribute("type","button"),r.rootNode.appendChild(r.labelDOMNode),r.rootNode.appendChild(r.instructionsDOMNode),r.rootNode.appendChild(r.body),r.rootNode.appendChild(r.addGroupButton),r.init(),r}return l()(n,[{key:"init",value:function(){this.onAddButtonTextChanged(),this.onBorderSettingsChanged(),this.getForm().getEngine().getLoader().getLoaderType()===O.B.VIEW&&this.initViewFormEvents()}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateInstructionsText(),this.onAddButtonTextChanged(),this.onBorderSettingsChanged(),this.updateMaxLimitReachedAttribute(null,null)}},{key:"setupDefaults",value:function(){return this.appendChild(this.getForm().getEngine().getFactory().createItemByTypeId(b.a.CONTAINER_TYPE_REPEATABLE_GROUP,this.getForm())),this.setProperty("label.labelText",vn.a.translationService.translateText("editorField_repeatableContainer")),this.updateLabelText(),this}},{key:"getTypeId",value:function(){return b.a.CONTAINER_TYPE_REPEATABLE}},{key:"getElementName",value:function(){return"Repeatable container"}},{key:"appendChild",value:function(e){if(!e||e.getTypeId()!==b.a.CONTAINER_TYPE_REPEATABLE_GROUP)throw new Error("Element type ".concat(e.getElementName()," is not supported directly in the form root!"));return y()(_()(n.prototype),"appendChild",this).call(this,e)}},{key:"insertBefore",value:function(e,t){if(!t||t.getTypeId()!==b.a.CONTAINER_TYPE_REPEATABLE_GROUP)throw new Error("Element type not supported directly in the form root!");if(e===t)throw new Error("Invalid argument: reference and child are the same!");return y()(_()(n.prototype),"insertBefore",this).call(this,e,t)}},{key:"insertAfter",value:function(e,t){if(!t||t.getTypeId()!==b.a.CONTAINER_TYPE_REPEATABLE_GROUP)throw new Error("Element type not supported directly in the form root!");if(e===t)throw new Error("Invalid argument: reference and child are the same!");return y()(_()(n.prototype),"insertAfter",this).call(this,e,t)}},{key:"removeChild",value:function(e){return y()(_()(n.prototype),"removeChild",this).call(this,e)}},{key:"isRenderingSupported",value:function(){return!0}},{key:"getResizingCapability",value:function(){return O.db.LEFT_AND_RIGHT}},{key:"setRendererType",value:function(e){}},{key:"setupI18n",value:function(){return this}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"getDOMInsertionNode",value:function(){return this.body}},{key:"setProperty",value:function(e,t){return y()(_()(n.prototype),"setProperty",this).call(this,e,t)}},{key:"onAddButtonTextChanged",value:function(){var e=this.getProperty("configuration.addButtonText");this.addGroupButton.textContent=String(e||"")||"Add more"}},{key:"onBorderSettingsChanged",value:function(){this.getProperty("configuration.showBorders")?this.rootNode.setAttribute("data-show-borders","1"):this.rootNode.removeAttribute("data-show-borders")}},{key:"initViewFormEvents",value:function(){var e=this;this.addGroupButton.onclick=function(){e.addNewGroup(),S.a.refreshFrameHeightOnWix()}}},{key:"addNewGroup",value:function(){var e=this.getProperty("configuration.maxNumberOfGroupsAllowed"),t=this.getChildren(),n=t.length;if(!(e<=n)&&!(t.length<1)){this.updateMaxLimitReachedAttribute(e,n);var i=t[0].cloneNode(!0);return this.getForm().getEngine().getI18n().translateDOMNode(i.getDOMInsertionNode()),this.appendChild(i),i}}},{key:"updateMaxLimitReachedAttribute",value:function(e,t){e||(e=this.getProperty("configuration.maxNumberOfGroupsAllowed")),t||(t=this.getChildren().length),e<=t+1&&this.rootNode.setAttribute("data-max-limit-reached","1")}},{key:"updateNumberOfGroupsAllowed",value:function(){var e=this.getProperty("configuration.maxNumberOfGroupsAllowed");e&&this.rootNode.setAttribute("data-max-number-of-groups",e)}},{key:"isRemovable",value:function(){return!0}},{key:"onRemoveGroupButtonClicked",value:function(e){var t=this.getChildren(),n=t.indexOf(e),i=t.length,r=this.getProperty("configuration.maxNumberOfGroupsAllowed");t.length<1||-1!==n&&(r>=i-1&&this.rootNode.removeAttribute("data-max-limit-reached"),this.removeChild(e),S.a.refreshFrameHeightOnWix())}},{key:"enumerateDisabledProperties",value:function(){var e=this.getParent()?this.getParent().enumerateDisabledProperties():null,t=["synchronize.enabled","synchronize.withControlId","configuration.isLimitSubmissionsEnabled","configuration.limitSubmissionsTotal","configuration.currentSubmissionsValue"];return e=e?e.concat(t):t}},{key:"isSelectable",value:function(){return!0}},{key:"cloneNode",value:function(e){return y()(_()(n.prototype),"cloneNode",this).call(this,!0,!1)}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"label.label",type:"string",optional:!0};default:return null}}},{key:"isVisible",value:function(){return this.visible}},{key:"setVisible",value:function(e){e=!!e,this.visible=e,this.visible?(this.getRootNode().removeAttribute("data-is-hidden"),this.getForm().getEngine().getLoader().execCommand("control-has-changed-visibility",{controlId:this.getId(),visibility:this.visible,element:this})):this.getRootNode().setAttribute("data-is-hidden",""),S.a.refreshFrameHeightOnWix()}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.CONTAINER_TYPE_REPEATABLE,name:"Multiply field groups",isContainer:!0,category:O.w.MEDIA_STRUCTURE,keywords:"repeatable container multiply field groups",icon:"i123-repeatable_container",isVirtual:!1,i18nName:"editorField_repeatableContainer",i18nKeywords:"edt_UI_container_type_repeatable_keywords",index:40,accessibilityFields:O.v.ROOT_NODE,title:vn.a.translationService.translateText("editorFieldTooltip_repeatableContainer")}}},{key:"getDropDestinationCSSSelector",value:function(){return"#form > div[data-role=page] > div[data-role=page-body] *:not([data-role=container][data-type=repeatable]), #form > div[data-role=page] > div[data-role=page-body] *:not([data-role=container][data-type=repeatable]) *"}}]),n}(vn.a);function wn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(Dn,"MAX_ALLOWED_NUMBER_OF_GROUPS",60),v()(Dn,"attributes",{}),v()(Dn,"runtime",null),v()(Dn,"nodeName","repeatable");var kn=function(e){u()(n,e);var t=wn(n);function n(e,i){var r;return o()(this,n),r=t.call(this,e,i),v()(A()(r),"body",void 0),v()(A()(r),"removeGroupButton",void 0),r.body=document.createElement("div"),r.body.setAttribute("data-role","body"),r.removeGroupButton=document.createElement("button"),r.removeGroupButton.setAttribute("data-role","remove-group-button"),r.removeGroupButton.setAttribute("type","button"),r.removeGroupButton.innerHTML='<i class="i123-close"></i>',r.removeGroupButton.setAttribute("type","button"),r.rootNode.appendChild(r.body),r.rootNode.appendChild(r.removeGroupButton),r.init(),r}return l()(n,[{key:"init",value:function(){var e=this;this.getForm().getEngine().getLoader().getLoaderType()===O.B.VIEW&&(this.initViewFormEvents(),setTimeout((function(){e.updateRepeatableElementAttributes(),e.updateRepeatableElementPrefillAttributes()}),1)),this.getForm().getEngine().getLoader().getLoaderType()===O.B.EDIT&&(this.updateEmptyStateDomNodes(),setTimeout((function(){e.updateEmptyStateAttribute()}),1))}},{key:"getTypeId",value:function(){return b.a.CONTAINER_TYPE_REPEATABLE_GROUP}},{key:"getElementName",value:function(){return"Repeatable group"}},{key:"appendChild",value:function(e){var t=this;return setTimeout((function(){t.updateEmptyStateAttribute()}),1),y()(_()(n.prototype),"appendChild",this).call(this,e)}},{key:"insertBefore",value:function(e,t){var i=this;return setTimeout((function(){i.updateEmptyStateAttribute()}),1),y()(_()(n.prototype),"insertBefore",this).call(this,e,t)}},{key:"insertAfter",value:function(e,t){var i=this;return setTimeout((function(){i.updateEmptyStateAttribute()}),1),y()(_()(n.prototype),"insertAfter",this).call(this,e,t)}},{key:"removeChild",value:function(e){var t=this;return setTimeout((function(){t.updateEmptyStateAttribute()}),1),y()(_()(n.prototype),"removeChild",this).call(this,e)}},{key:"isRenderingSupported",value:function(){return!1}},{key:"getResizingCapability",value:function(){return O.db.NONE}},{key:"setRendererType",value:function(e){}},{key:"setupI18n",value:function(){return this}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"getDOMInsertionNode",value:function(){return this.body}},{key:"isRemovable",value:function(){return!0}},{key:"isDuplicatable",value:function(){return!1}},{key:"isDragable",value:function(){return!1}},{key:"isSelectable",value:function(){return!1}},{key:"getRepeatableGroupIndexAttribute",value:function(){return~~this.rootNode.getAttribute("data-repeatable-index")}},{key:"setRepeatableGroupIndexAttribute",value:function(e){this.rootNode.setAttribute("data-repeatable-index",String(e))}},{key:"getRepeatableGroupPathAttribute",value:function(){return this.rootNode.getAttribute("data-repeatable-path")}},{key:"setRepeatableGroupPathAttribute",value:function(e){this.rootNode.setAttribute("data-repeatable-path",e)}},{key:"initViewFormEvents",value:function(){var e=this;this.removeGroupButton.onclick=function(){var t=e.getParent();t&&t.onRemoveGroupButtonClicked(e)}}},{key:"updateEmptyStateDomNodes",value:function(){var e=document.createElement("span"),t=document.createElement("span");e.className="i-lg i123-empty-page",e.setAttribute("data-role","empty-state-icon"),t.textContent="Drag and drop fields here",t.setAttribute("data-role","empty-state-text"),this.body.appendChild(e),this.body.appendChild(t)}},{key:"hasControls",value:function(){return this.getChildren().length>0}},{key:"updateEmptyStateAttribute",value:function(){this.hasControls()?this.rootNode.removeAttribute("data-empty-state"):this.rootNode.setAttribute("data-empty-state","1")}},{key:"updateRepeatableElementAttributes",value:function(){var e,t=this.getFirstParentOfType(b.a.CONTAINER_TYPE_REPEATABLE_GROUP),n=1+~~this.getFirstParentOfType(b.a.CONTAINER_TYPE_REPEATABLE).getChildren().slice(-2)[0].getRepeatableGroupIndexAttribute();if(t){var i=t.getRepeatableGroupPathAttribute();e="".concat(i,".").concat(n)}else e=n;this.setRepeatableGroupIndexAttribute(n),this.setRepeatableGroupPathAttribute(e)}},{key:"resetRepeatableElementAttributes",value:function(){var e,t=this.getFirstParentOfType(b.a.CONTAINER_TYPE_REPEATABLE_GROUP),n=this.getFirstParentOfType(b.a.CONTAINER_TYPE_REPEATABLE).getChildren();if(t){var i=t.getRepeatableGroupPathAttribute();if(n.length)for(var r=0,a=n.length;r<a;r++){var o=r+1;e="".concat(i,".").concat(o),n[r].setRepeatableGroupIndexAttribute(o),n[r].setRepeatableGroupPathAttribute(e)}}else if(n.length)for(var s=0,l=n.length;s<l;s++){var c=s+1;e=s+1,n[s].setRepeatableGroupIndexAttribute(c),n[s].setRepeatableGroupPathAttribute(e)}}},{key:"removeRepeatableAttributes",value:function(e){this.rootNode.removeAttribute("data-repeatable-index"),this.rootNode.removeAttribute("data-repeatable-path")}},{key:"updateRepeatableElementPrefillAttributes",value:function(){var e=this.getControlsRecursively(this);this.markSalesforceControlsWithDOMAttributeOnRepeatedControl(e,this.getForm().getEngine().getLoader().getRules().getSalesforceAffectedControlsTriggers(),"trigger"),this.markSalesforceControlsWithDOMAttributeOnRepeatedControl(e,this.getForm().getEngine().getLoader().getRules().getSalesforceAffectedControls(),"normalField")}},{key:"getControlsRecursively",value:function(e){var t=[];if(e.getElementKind()===O.p.CONTAINER)for(var n=0,i=e.getChildren(),r=i.length;n<r;n++)i[n].getElementKind()===O.p.CONTAINER?t=t.concat(this.getControlsRecursively(i[n])):i[n].getElementKind()===O.p.CONTROL&&t.push(i[n]);else e.getElementKind()===O.p.CONTROL&&t.push(e);return t}},{key:"markSalesforceControlsWithDOMAttributeOnRepeatedControl",value:function(e,t,n){for(var i=0,r=e.length;i<r;i++){var a=e[i],o=void 0;a&&-1!==t.indexOf("control_".concat(a.getId()))&&(o=a.getRootNode())&&("trigger"===n?o.setAttribute("data-is-salesforce-prefill-trigger","1"):o.setAttribute("data-is-salesforce-prefill-normal","1"))}}}],[{key:"getConfiguration",value:function(){return{category:"containers",icon:"i123-date",isContainer:!0,keywords:"div container",name:"Div",typeId:b.a.CONTAINER_TYPE_REPEATABLE_GROUP,isVirtual:!0,index:12,accessibilityFields:O.v.NONE}}}]),n}(vn.a);v()(kn,"attributes",{}),v()(kn,"runtime",null),v()(kn,"nodeName","repeatable-group");var Mn,xn=n(215),Un=n(293),Fn=n(294),Bn=n(295),Yn=n(297),Vn=n(296),Hn=n(292),Gn=n(298),Wn=n(40),jn=n(198),Kn=n(196),zn=n(197),Xn=n(211),Zn=n(206),qn=n(214),Jn=n(213),Qn=n(209),$n=n(200),ei=n(199),ti=n(202),ni=n(201),ii=n(207),ri=n(212),ai=n(208),oi=n(205),si=n(204),li=n(203),ci=n(210),ui=n(11),di=n.n(ui),pi=n(43),hi=n.n(pi),_i=n(79),gi=n(58),mi=n(613),fi=n(15),Ei=n.n(fi),yi=n(78),Ti=n(53),vi=n.n(Ti);n(507);!function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"}(Mn||(Mn={}));var Oi=function(e){var t=function(e){return vi()("divider",{"divider--horizontal":e.type===Mn.HORIZONTAL,"divider--vertical":e.type===Mn.VERTICAL},e.className)}(e);return di()("div",{"data-testid":e.testid,className:t,style:e.style})};Oi.defaultProps={type:Mn.HORIZONTAL};var bi=Oi,Ci=n(62),Ii=function(){function e(){o()(this,e)}return l()(e,null,[{key:"trackEventByRoute",value:function(e){var t="";switch(e){case O.d.EDITOR:t="page_view_edit_from_switcher";break;case O.d.THEMES:t="themes_open_from_switcher";break;case O.d.NOTIFICATIONS:case O.jb.OLD_NOTIFICATIONS:t="page_view_settings_notifications_from_switcher";break;case O.jb.THANK_YOU_PAGE:t="page_view_settings_thankyou_from_switcher";break;case O.d.PAYMENTS:case O.jb.PAYMENTS_V1:t="page_view_settings_payments_from_switcher";break;case O.jb.APPLICATIONS:t="page_view_settings_applications_from_switcher";break;case O.jb.SECURITY:t="page_view_settings_security_from_switcher";break;case O.jb.RULES:t="page_view_settings_rules_from_switcher";break;case O.d.TRANSLATIONS:t="translations_open_from_switcher";break;case O.jb.ADVANCED:t="page_view_settings_advanced_from_switcher";break;case O.jb.PUBLISH_V1:case O.d.PUBLISH_GET_LINK:t="page_view_publish_from_switcher"}Ci.a.getInstance().track(t)}}]),e}(),Ri=n(394),Pi=n.n(Ri),Ni=(n(511),n(513),function(e){return di()(Pi.a,{component:"nav",className:"switcher"},void 0,di()("div",{className:"switcher__inner"},void 0,e.children))}),Ai=n(72),Si=n.n(Ai),Li=n(52),Di=n.n(Li),wi=n(336),ki=n(395),Mi=n.n(ki),xi=n(616),Ui=(n(515),function(e){var t,n=x.a.isMobile(),i=Object(fi.useState)(null),r=Di()(i,2),a=r[0],o=r[1],s=Object(fi.useState)(null),l=Di()(s,2),c=l[0],u=l[1],d=Object(fi.useState)(null),p=Di()(d,2),h=p[0],_=p[1],g=Object(fi.useState)(!1),m=Di()(g,2),f=m[0],E=m[1],y=Object(fi.useRef)(null),T={modifiers:{offset:{offset:"0, 4"}},positionFixed:!0,placement:"right",trigger:n?"right-click":"hover",tooltip:(t=e.label,function(e){var n=e.tooltipRef,i=e.getTooltipProps;return Ei.a.createElement("span",i({ref:n,className:"switcher__item-tooltip"}),t)})},v=vi()("switcher__item-container",{"switcher__item-container--expandable":Ei.a.Children.count(e.children)&&!e.open,"switcher__item-container--open":e.open,"switcher__item-container--with-transition":f}),O=vi()("switcher__item","switcher__target--".concat(Object(xi.a)(e.label)),{"switcher__item--active":e.active});Object(fi.useEffect)((function(){var t,n=(t=e.children,(0,Ei.a.Children.toArray)(t).filter((function(e){return e.props.children[0]})).length),i=y.current,r=y.current.firstChild,a=window.getComputedStyle(r),s=parseInt(a.getPropertyValue("margin-bottom")),l=i.offsetHeight,c=l*(n+1)-s*n,d=n>0;if(u(l),o(c),d){var p=e.open?c:l;_(p)}}),[]);var b=Object(fi.useRef)(!0);return Object(fi.useEffect)((function(){b.current?b.current=!1:E(!0)}),[e.open]),di()(wi.CSSTransition,{in:e.open,timeout:300,classNames:"switcher__item-container-",onEnter:function(){return _(a)},onExit:function(){return _(c)}},void 0,Ei.a.createElement("div",{className:v,style:{height:h},ref:y},Ei.a.createElement(Mi.a,T,(function(t){var n=t.getTriggerProps,i=t.triggerRef;return di()(fi.Fragment,{},void 0,Ei.a.createElement("a",Si()({href:"#0"},n({ref:i,className:O,onClick:e.onClick})),di()("span",{className:"switcher__item-icon i-lg ".concat(e.icon)}),di()("span",{className:"switcher__item-label"},void 0,e.label)),di()(wi.CSSTransition,{in:e.open,timeout:175,classNames:"switcher__submenu-container-",unmountOnExit:!0},void 0,di()("div",{className:"switcher__submenu-container"},void 0,e.children)))}))))}),Fi=n(71),Bi=n(131),Yi=new F.a,Vi=Fi.a.getInstance(),Hi=Bi.a.getInstance(),Gi=function(){return Hi.isWixPlatform()||Hi.isWeeblyPlatform()},Wi=[{renderCondition:!0,icon:"i123-fields",label:Yi.translateTextDefault("switcher_fields","Fields"),route:O.d.EDITOR,submenuItems:[],open:!1,divider:!1},{renderCondition:!0,icon:"i123-design",label:Yi.translateTextDefault("switcher_design","Design"),route:O.d.THEMES,submenuItems:[],open:!1,divider:!1},{renderCondition:!0,icon:"i123-notifications_outline",label:Yi.translateTextDefault("switcher_notifications","Notifications"),route:Vi.isNotificationsV2Active()?O.d.NOTIFICATIONS:O.jb.OLD_NOTIFICATIONS,submenuItems:[],open:!1,divider:!1},{renderCondition:!0,icon:"i123-thank_you_page",label:Yi.translateTextDefault("switcher_tyPage","Thank You page"),route:O.jb.THANK_YOU_PAGE,submenuItems:[],open:!1,divider:!1},{renderCondition:!Vi.isPaymentsV2Active()||Hi.isWhiteLabel(),icon:"i123-payments_2",label:Yi.translateTextDefault("switcher_payments","Payments"),route:Vi.isPaymentsV2Active()?O.d.PAYMENTS:O.jb.PAYMENTS_V1,submenuItems:[],open:!1,divider:!1},{renderCondition:Hi.isSalesforcePlatform(),icon:"i123-salesforce-integration",label:Yi.translateTextDefault("switcher_salesforceIntegration","Salesforce Integration"),route:null,submenuItems:[{renderCondition:!0,icon:"i123-map_fields",label:Yi.translateTextDefault("switcher_salesforceMapping","Object Mapping"),route:Hi.isSalesforceMappingV3Enabled()?O.gb.SALESFORCE_MAPPING_V3:O.gb.SALESFORCE_MAPPING,submenuItems:[],open:!1,divider:!1},{renderCondition:!0,icon:"i123-file-outline",label:Yi.translateTextDefault("switcher_salesforcePrefilling","Form Prefilling"),route:O.gb.SALESFORCE_PREFILL,submenuItems:[],open:!1,divider:!1},{renderCondition:!0,icon:"i123-search",label:Yi.translateTextDefault("switcher_salesforceLookup","Lookup"),route:O.gb.SALESFORCE_LOOKUP,submenuItems:[],open:!1,divider:!1},{renderCondition:!0,icon:"i123-code",label:Yi.translateTextDefault("switcher_salesforceQuery","Query"),route:O.gb.SALESFORCE_QUERY,submenuItems:[],open:!1,divider:!1},{renderCondition:!0,icon:"i123-settings-outline",label:Yi.translateTextDefault("switcher_salesforceSettings","Settings"),route:O.gb.SALESFORCE_SETTINGS,submenuItems:[],open:!1,divider:!1}],open:[O.X.SALESFORCE,O.X.SALESFORCE_MAPPING_V3].includes(gi.a.getUrlVars().p),divider:!1},{renderCondition:!0,icon:"i123-applications",label:Yi.translateTextDefault("switcher_applications","Applications"),route:O.jb.APPLICATIONS,submenuItems:[],open:!1,divider:!1},{renderCondition:!0,icon:"i123-rules_2",label:Yi.translateTextDefault("switcher_rules","Rules"),route:O.jb.RULES,submenuItems:[],open:!1,divider:!1},{renderCondition:Vi.isChainApprovalActive(),icon:"i123-chain_approvals",label:Yi.translateTextDefault("switcher_chainApprovals","Approvals"),route:O.jb.CHAIN_APPROVALS,submenuItems:[],open:!1,divider:!1},{renderCondition:!0,icon:"i123-more_vertical",label:Yi.translateTextDefault("more","More"),route:null,submenuItems:[{renderCondition:!0,icon:"i123-translations_2",label:Yi.translateTextDefault("switcher_translations","Translations"),route:O.d.TRANSLATIONS,submenuItems:[],open:!1,divider:!1},{renderCondition:!0,icon:"i123-security_2",label:Yi.translateTextDefault("switcher_security","Security"),route:O.jb.SECURITY,submenuItems:[],open:!1,divider:!1},{renderCondition:!0,icon:"i123-advanced-2",label:Yi.translateTextDefault("switcher_advanced","Advanced"),route:O.jb.ADVANCED,submenuItems:[],open:!1,divider:!1}],open:gi.a.getUrlVars().startup_panel===O.d.TRANSLATIONS||gi.a.getUrlVars().p===O.X.SETTINGS&&(gi.a.getUrlVars().tab==="".concat(_i.a.SECURITY)||gi.a.getUrlVars().tab==="".concat(_i.a.ADVANCED)),divider:Gi()},{renderCondition:Gi(),icon:"i123-publish_outline",label:Yi.translateTextDefault("switcher_publish","Publish"),route:gi.a.getPublishRoute(),submenuItems:[],open:!1,divider:!1}];function ji(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Ki,zi,Xi,Zi,qi,Ji=di()(bi,{}),Qi=function(e){u()(n,e);var t=ji(n);function n(){var e;o()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),v()(A()(e),"props",void 0),v()(A()(e),"state",{routes:Wi}),e}return l()(n,[{key:"getURLVariable",value:function(e){var t=gi.a.getUrlVars();if(!t)throw new Error("URLHandler in Switcher: Can't find URL variable");return t[e]}},{key:"toggleSubmenu",value:function(e){var t=hi()(this.state.routes);t.map((function(t,n){return t.open=n===e&&!t.open,t})),this.setState({routes:t})}},{key:"isSubmenuRoute",value:function(e){return void 0===this.state.routes.find((function(t){return t.route===e}))}},{key:"getRouteDetails",value:function(e){return Object(mi.a)(this.state.routes,(function(e){return[e].concat(hi()(null===e||void 0===e?void 0:e.submenuItems))})).find((function(t){return t.route===e}))}},{key:"updateTitleBarText",value:function(e){var t=document.querySelector(".settings-title-bar__title");if(t){var n=this.getRouteDetails(e);n&&(t.textContent=n.label)}}},{key:"navigateToStaticPage",value:function(e){window.innerWidth<=900&&this.isRouteActive(e)&&(window.localStorage.setItem("noSidebarActiveState","1"),e=O.d.EDITOR);var t=this.getURLVariable("id"),n=gi.a.computeStaticUrl(e,t,"edit_fields");Ii.trackEventByRoute(e),gi.a.setRawUrl(n)}},{key:"navigateToLegacyTab",value:function(e){var t,n=this.getURLVariable("id"),i=gi.a.computeStaticUrl(e,n,"edit_fields"),r=window.salesForceObjects;if(!r)throw new Error("Dependency not found: salesForceObjects");var a=(t={},v()(t,O.gb.SALESFORCE_MAPPING,O.hb.MAPPING),v()(t,O.gb.SALESFORCE_PREFILL,O.hb.PREFILL),v()(t,O.gb.SALESFORCE_LOOKUP,O.hb.LOOKUP),v()(t,O.gb.SALESFORCE_QUERY,O.hb.QUERY),v()(t,O.gb.SALESFORCE_SETTINGS,O.hb.SETTINGS),t);r.ajaxTab(n,a[e]),history.pushState("","",i),this.setState({})}},{key:"navigateToDynamicPage",value:function(e){var t=this;this.props.canNavigate().then((function(){Ii.trackEventByRoute(e),t.props.navigate(e)})).catch((function(){}))}},{key:"navigateTo",value:function(e,t,n){e.preventDefault();var i=window.localStorage;if(i.getItem("noSidebarActiveState")&&i.removeItem("noSidebarActiveState"),null===t)this.toggleSubmenu(n);else{this.isSubmenuRoute(t)||this.toggleSubmenu(this.state.routes.length);var r=[].concat(hi()(Object.values(O.jb)),hi()(Object.values(O.gb))).includes(t),a=void 0===this.props.canNavigate,o=[O.X.SALESFORCE],s=this.getURLVariable("p"),l=gi.a.computeStaticUrl(t,"",""),c=gi.a.getUrlVars(l).p,u=r||a;o.includes(s)&&o.includes(c)?this.navigateToLegacyTab(t):u?this.navigateToStaticPage(t):this.navigateToDynamicPage(t)}}},{key:"isTabActive",value:function(e){return e===parseInt(this.getURLVariable("tab"))}},{key:"isDynamicRouteActive",value:function(e){var t=window.innerWidth,n=window.localStorage.getItem("noSidebarActiveState");return!(e===this.props.navigation.activeState&&n&&t<=900)&&e===this.props.navigation.activeState}},{key:"hasActiveSubRoutes",value:function(e){var t=this;return this.state.routes[e].submenuItems.some((function(e){return t.isRouteActive(e.route)}))}},{key:"isRouteActive",value:function(e,t){if(null===e)return this.hasActiveSubRoutes(t);var n=this.getURLVariable("p");switch(e){case O.jb.OLD_NOTIFICATIONS:return n===O.X.SETTINGS&&this.isTabActive(_i.a.NOTIFICATIONS);case O.jb.THANK_YOU_PAGE:return n===O.X.SETTINGS&&this.isTabActive(_i.a.THANK_YOU_PAGE);case O.jb.PAYMENTS_V1:return n===O.X.SETTINGS&&this.isTabActive(_i.a.PAYMENTS);case O.jb.APPLICATIONS:return n===O.X.SETTINGS&&this.isTabActive(_i.a.APPLICATIONS);case O.jb.RULES:return n===O.X.SETTINGS&&this.isTabActive(_i.a.RULES);case O.jb.CHAIN_APPROVALS:return n===O.X.SETTINGS&&this.isTabActive(_i.a.CHAIN_APPROVALS);case O.jb.SECURITY:return n===O.X.SETTINGS&&this.isTabActive(_i.a.SECURITY);case O.jb.ADVANCED:return n===O.X.SETTINGS&&this.isTabActive(_i.a.ADVANCED);case O.jb.PUBLISH_V1:return n===O.X.PUBLISH;case O.gb.SALESFORCE_MAPPING:return n===O.X.SALESFORCE&&this.isTabActive(O.hb.MAPPING);case O.gb.SALESFORCE_MAPPING_V3:return n===O.X.SALESFORCE_MAPPING_V3;case O.gb.SALESFORCE_PREFILL:return n===O.X.SALESFORCE&&this.isTabActive(O.hb.PREFILL);case O.gb.SALESFORCE_LOOKUP:return n===O.X.SALESFORCE&&this.isTabActive(O.hb.LOOKUP);case O.gb.SALESFORCE_QUERY:return n===O.X.SALESFORCE&&this.isTabActive(O.hb.QUERY);case O.gb.SALESFORCE_SETTINGS:return n===O.X.SALESFORCE&&this.isTabActive(O.hb.SETTINGS);default:return this.isDynamicRouteActive(e)}}},{key:"renderSwitcherItem",value:function(e,t){var n=this;return this.isRouteActive(e.route,t)&&this.updateTitleBarText(e.route),di()(fi.Fragment,{},t,e.renderCondition&&di()(Ui,{icon:e.icon,label:e.label,active:this.isRouteActive(e.route,t),onClick:function(i){n.navigateTo(i,e.route,t)},open:e.open},void 0,e.submenuItems.map((function(e,t){return n.renderSwitcherItem(e,t)}))),e.divider&&Ji)}},{key:"render",value:function(){var e=this;return di()(Ni,{},void 0,this.state.routes.map((function(t,n){return e.renderSwitcherItem(t,n)})))}}]),n}(Ei.a.Component),$i=Object(yi.connect)((function(e){return{navigation:e.navigation,formId:e.form.id}}),{navigate:ve.j})(Qi),er=n(60),tr=n.n(er),nr=function(){function e(){o()(this,e),v()(this,"store",void 0),this.store=Object(Te.c)()}return l()(e,[{key:"render",value:function(e){tr.a.render(di()(yi.Provider,{store:this.store},void 0,di()($i,{canNavigate:e})),document.getElementById("switcher-root"))}}]),e}();window.BuilderSidebar=nr,function(e){e[e.ICON=0]="ICON",e[e.ICONFONT=1]="ICONFONT"}(Ki||(Ki={})),function(e){e[e.TEXT=0]="TEXT",e[e.IMAGE=1]="IMAGE",e[e.AUTO_POPUP=2]="AUTO_POPUP",e[e.FLOATING_BUTTON=3]="FLOATING_BUTTON"}(zi||(zi={})),function(e){e[e.TEXT=0]="TEXT",e[e.IMAGE=1]="IMAGE"}(Xi||(Xi={})),function(e){e.PUBLISH="publish-form",e.NOTIFICATIONS="notifications",e.EDITOR="editor",e.TRANSLATIONS="translations",e.ITEM="item",e.PRODUCTS="productsDialog"}(Zi||(Zi={})),function(e){e[e.ABSTRACT_CHILD=0]="ABSTRACT_CHILD",e[e.ABSTRACT_CHILD_THAT_SUPPORTS_CHILDREN=1]="ABSTRACT_CHILD_THAT_SUPPORTS_CHILDREN",e[e.BUTTON_COMPONENT=2]="BUTTON_COMPONENT",e[e.CHECKBOX_COMPONENT=3]="CHECKBOX_COMPONENT",e[e.COMPONENT=4]="COMPONENT",e[e.CONTAINER=5]="CONTAINER",e[e.DIVIDER=6]="DIVIDER",e[e.DROPDOWN=7]="DROPDOWN",e[e.EXTENSION=8]="EXTENSION",e[e.HEADER=9]="HEADER",e[e.HEADING=10]="HEADING",e[e.ITEM=11]="ITEM",e[e.OVERLAY=12]="OVERLAY",e[e.SCROLLABLE=13]="SCROLLABLE"}(qi||(qi={}));var ir=n(29);function rr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var ar=function(e){u()(n,e);var t=rr(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"rootNode",void 0),v()(A()(e),"parent",void 0),v()(A()(e),"elementId",void 0),v()(A()(e),"type",qi.ABSTRACT_CHILD),v()(A()(e),"store",void 0),e.rootNode=document.createElement("div"),e.store=Object(Te.c)(),e}return l()(n,[{key:"trackEvent",value:function(e){var t;null===(t=CFTracker)||void 0===t||t.event(e),console.log("tracker :: ".concat(e))}},{key:"getRootNode",value:function(){return this.rootNode}},{key:"getParent",value:function(e){if(void 0===e)return this.parent;var t=this.parent;do{if(!t)return null;if(t.type===e)return t;t=t.getParent(e)}while(t)}},{key:"withParent",value:function(e){return this.parent=e,this}},{key:"getElementById",value:function(e){if(this.getId&&this.getId()===e)return this;if(!this.getChildren)return null;for(var t=this.getChildren(),n=t.length,i=0;i<n;i++)if(t[i].getElementById){var r;if(r=t[i].getElementById(e))return r}return null}},{key:"withId",value:function(e){return this.elementId=e,this.rootNode.setAttribute("data-id",e),this}},{key:"getId",value:function(){return this.elementId}},{key:"getDependency",value:function(e){for(var t=this;t.getParent&&t.getParent();)t=t.getParent();return t.getDependency?t.getDependency(e):null}},{key:"withVisibilityState",value:function(e){return this.rootNode.setAttribute("data-is-hidden",String(e)),this}},{key:"isVisible",value:function(){return"true"===this.rootNode.getAttribute("data-is-hidden")}}]),n}(ir.a),or=n(195),sr=n.n(or);function lr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var cr=function(e){u()(n,e);var t=lr(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"labelText",void 0),v()(A()(e),"i18nLabelText",void 0),v()(A()(e),"disabledTooltipText",void 0),v()(A()(e),"buttonDOMNode",void 0),v()(A()(e),"panel",void 0),v()(A()(e),"tooltipInstance",void 0),v()(A()(e),"type",void 0),e.getRootNode().setAttribute("data-role","menu-panel-button"),e.buttonDOMNode=document.createElement("a"),e.buttonDOMNode.setAttribute("data-role","menu-panel-button"),e.buttonDOMNode.setAttribute("href","javascript:;"),e.getRootNode().addEventListener("click",(function(){e.trigger("click")})),e.getRootNode().appendChild(e.buttonDOMNode),e}return l()(n,[{key:"disableButton",value:function(){this.disableEvents(),this.getRootNode().style.backgroundColor="rgba(236,236,236,0.5)",this.buttonDOMNode.style.color="rgba(76,76,76, 0.5)",this.bindTooltip()}},{key:"enableButton",value:function(){this.enableEvents(),this.getRootNode().style.backgroundColor=null,this.buttonDOMNode.style.color=null,this.destroyTooltip()}},{key:"hideButton",value:function(){this.isButtonVisible()&&(this.getRootNode().style.display="none")}},{key:"showButton",value:function(){this.isButtonHidden()&&(this.getRootNode().style.display="block")}},{key:"isButtonHidden",value:function(){return"none"===this.getRootNode().style.display}},{key:"isButtonVisible",value:function(){return"none"!==this.getRootNode().style.display}},{key:"getButtonNode",value:function(){return this.buttonDOMNode}},{key:"withLabel",value:function(e,t){return this.labelText=e,this.i18nLabelText=t,this.buttonDOMNode.textContent=this.labelText,this.buttonDOMNode.setAttribute("data-i18n-text",this.i18nLabelText),this}},{key:"withDisabledTooltip",value:function(e){return this.disabledTooltipText=e,this}},{key:"setOpened",value:function(e){if(this.panel)return e?this.getRootNode().setAttribute("data-opened",""):this.getRootNode().removeAttribute("data-opened"),this.panel.type!==qi.COMPONENT&&this.panel.type!==qi.EXTENSION||this.panel.setOpened(e),this}},{key:"withPanel",value:function(e){return this.panel=e,this}},{key:"bindTooltip",value:function(){this.disabledTooltipText&&(this.tooltipInstance=sr()(this.getRootNode(),{placement:"bottom",content:this.disabledTooltipText,appendTo:"parent",maxWidth:"200px",popperOptions:{strategy:"fixed"}}))}},{key:"destroyTooltip",value:function(){this.tooltipInstance&&this.tooltipInstance.destroy()}}]),n}(ar);function ur(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var dr=function(e){u()(n,e);var t=ur(n);function n(){var e;o()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),v()(A()(e),"children",[]),v()(A()(e),"type",qi.ABSTRACT_CHILD_THAT_SUPPORTS_CHILDREN),e}return l()(n,[{key:"appendChild",value:function(e){return this.getRootNode().appendChild(e.getRootNode()),e.withParent(this),this.children.push(e),this}},{key:"appendChildIf",value:function(e,t){return!0===e&&null!==t?this.appendChild(t):this}},{key:"getChildren",value:function(){return this.children}},{key:"removeChild",value:function(e){var t=this.children.indexOf(e);return t>-1&&this.children.splice(t,1),this}}]),n}(ar);function pr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var hr,_r=function(e){u()(n,e);var t=pr(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"dependencies",{}),v()(A()(e),"type",qi.CONTAINER),e.getRootNode().setAttribute("data-role","menu-panel-container"),e}return l()(n,[{key:"withDependency",value:function(e,t){return this.dependencies[e]=t,this}},{key:"getDependency",value:function(e){return void 0===this.dependencies[e]?null:this.dependencies[e]}},{key:"setOpened",value:function(e){}},{key:"isOpened",value:function(){}}]),n}(dr);!function(e){e.NO_PLATFORM="",e.WEEBLY="weebly_",e.WIX="wix_",e.SHOPIFY="shopify_",e.BIG_COMMERCE="bigcommerce_"}(hr||(hr={}));var gr=function(){function e(t){o()(this,e),v()(this,"platformDetails",void 0),this.platformDetails=t}return l()(e,[{key:"trackPlatformMetric",value:function(e){var t,n=this.getCurrentPlatformSuffix()+e;null===(t=CFTracker)||void 0===t||t.event(n),console.log("tracker :: "+n)}},{key:"getCurrentPlatformSuffix",value:function(){return this.platformDetails.isWeebly?hr.WEEBLY:this.platformDetails.isWixInternal?hr.WIX:this.platformDetails.isShopify?hr.SHOPIFY:this.platformDetails.isBigCommerce?hr.BIG_COMMERCE:hr.NO_PLATFORM}}]),e}();v()(gr,"PLATFORM_METRICS_DEPENDECY","platformMetricsManager");var mr=function(){function e(){o()(this,e)}return l()(e,null,[{key:"init",value:function(){if(null===this.diacriticsMap){this.diacriticsMap={};for(var e=0;e<this.replacementList.length;e+=1)for(var t=this.replacementList[e].chars,n=0;n<t.length;n+=1)this.diacriticsMap[t[n]]=this.replacementList[e].base}}},{key:"removeDiacritics",value:function(e){var t=this;return this.init(),e.replace(/[^\u0000-\u007e]/g,(function(e){return t.diacriticsMap[e]||e}))}}]),e}();function fr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(mr,"diacriticsMap",null),v()(mr,"replacementList",[{base:" ",chars:"\xa0"},{base:"0",chars:"\u07c0"},{base:"A",chars:"\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",chars:"\ua732"},{base:"AE",chars:"\xc6\u01fc\u01e2"},{base:"AO",chars:"\ua734"},{base:"AU",chars:"\ua736"},{base:"AV",chars:"\ua738\ua73a"},{base:"AY",chars:"\ua73c"},{base:"B",chars:"\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0181"},{base:"C",chars:"\u24b8\uff23\ua73e\u1e08\u0106C\u0108\u010a\u010c\xc7\u0187\u023b"},{base:"D",chars:"\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018a\u0189\u1d05\ua779"},{base:"Dh",chars:"\xd0"},{base:"DZ",chars:"\u01f1\u01c4"},{base:"Dz",chars:"\u01f2\u01c5"},{base:"E",chars:"\u025b\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e\u1d07"},{base:"F",chars:"\ua77c\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",chars:"\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e\u0262"},{base:"H",chars:"\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",chars:"\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",chars:"\u24bf\uff2a\u0134\u0248\u0237"},{base:"K",chars:"\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",chars:"\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",chars:"\u01c7"},{base:"Lj",chars:"\u01c8"},{base:"M",chars:"\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c\u03fb"},{base:"N",chars:"\ua7a4\u0220\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u019d\ua790\u1d0e"},{base:"NJ",chars:"\u01ca"},{base:"Nj",chars:"\u01cb"},{base:"O",chars:"\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OE",chars:"\u0152"},{base:"OI",chars:"\u01a2"},{base:"OO",chars:"\ua74e"},{base:"OU",chars:"\u0222"},{base:"P",chars:"\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",chars:"\u24c6\uff31\ua756\ua758\u024a"},{base:"R",chars:"\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",chars:"\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",chars:"\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"Th",chars:"\xde"},{base:"TZ",chars:"\ua728"},{base:"U",chars:"\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",chars:"\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",chars:"\ua760"},{base:"W",chars:"\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",chars:"\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",chars:"\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",chars:"\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",chars:"\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250\u0251"},{base:"aa",chars:"\ua733"},{base:"ae",chars:"\xe6\u01fd\u01e3"},{base:"ao",chars:"\ua735"},{base:"au",chars:"\ua737"},{base:"av",chars:"\ua739\ua73b"},{base:"ay",chars:"\ua73d"},{base:"b",chars:"\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253\u0182"},{base:"c",chars:"\uff43\u24d2\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",chars:"\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\u018b\u13e7\u0501\ua7aa"},{base:"dh",chars:"\xf0"},{base:"dz",chars:"\u01f3\u01c6"},{base:"e",chars:"\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u01dd"},{base:"f",chars:"\u24d5\uff46\u1e1f\u0192"},{base:"ff",chars:"\ufb00"},{base:"fi",chars:"\ufb01"},{base:"fl",chars:"\ufb02"},{base:"ffi",chars:"\ufb03"},{base:"ffl",chars:"\ufb04"},{base:"g",chars:"\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\ua77f\u1d79"},{base:"h",chars:"\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",chars:"\u0195"},{base:"i",chars:"\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",chars:"\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",chars:"\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",chars:"\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747\u026d"},{base:"lj",chars:"\u01c9"},{base:"m",chars:"\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",chars:"\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5\u043b\u0509"},{base:"nj",chars:"\u01cc"},{base:"o",chars:"\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\ua74b\ua74d\u0275\u0254\u1d11"},{base:"oe",chars:"\u0153"},{base:"oi",chars:"\u01a3"},{base:"oo",chars:"\ua74f"},{base:"ou",chars:"\u0223"},{base:"p",chars:"\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755\u03c1"},{base:"q",chars:"\u24e0\uff51\u024b\ua757\ua759"},{base:"r",chars:"\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",chars:"\u24e2\uff53\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b\u0282"},{base:"ss",chars:"\xdf"},{base:"t",chars:"\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"th",chars:"\xfe"},{base:"tz",chars:"\ua729"},{base:"u",chars:"\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",chars:"\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",chars:"\ua761"},{base:"w",chars:"\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",chars:"\u24e7\uff58\u1e8b\u1e8d"},{base:"y",chars:"\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",chars:"\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}]);var Er=function(e){u()(n,e);var t=fr(n);function n(){var e;o()(this,n),e=t.call(this),v()(A()(e),"resourceURLAddress",void 0),v()(A()(e),"initialized",!1),v()(A()(e),"header",void 0),v()(A()(e),"body",void 0),v()(A()(e),"captionText",void 0),v()(A()(e),"captionTextI18n",void 0),v()(A()(e),"backButton",void 0),v()(A()(e),"captionPlaceholderSpan",void 0),v()(A()(e),"metricsManager",void 0),v()(A()(e),"type",qi.EXTENSION),e.getRootNode().setAttribute("data-role","menu-panel-html-overlay"),e.header=document.createElement("div"),e.header.setAttribute("data-role","header"),e.getRootNode().appendChild(e.header),e.body=document.createElement("div"),e.body.setAttribute("data-role","body");var i=document.createElement("div");return i.classList.add("plan-limit-notification"),e.getRootNode().appendChild(i),e.getRootNode().appendChild(e.body),e.backButton=document.createElement("span"),e.backButton.innerHTML='<i class="i-lg i123-arrow-left2"></i>',e.backButton.setAttribute("data-role","back-button"),e.captionPlaceholderSpan=document.createElement("span"),e.captionPlaceholderSpan.setAttribute("data-role","caption"),e.header.appendChild(e.backButton),e.header.appendChild(e.captionPlaceholderSpan),e.backButton.onclick=function(){e.close()},e}return l()(n,[{key:"setResourceURLAddress",value:function(e){return this.resourceURLAddress=e,this}},{key:"withCaption",value:function(e,t){return this.captionText=e,this.captionTextI18n=t,this.captionPlaceholderSpan.textContent=e,t?this.captionPlaceholderSpan.setAttribute("data-i18n-text",t):this.captionPlaceholderSpan.removeAttribute("data-i18n-text"),this}},{key:"initialize",value:function(){this.initialized||(this.loadOverlayComponentUI(null),this.checkStickyActionBar(),this.onOverlayInitialized())}},{key:"loadOverlayComponentUI",value:function(e){var t=this;this.resourceURLAddress&&window.UI.getResourceManager().get(this.resourceURLAddress).then((function(n){var i=new Nt.a(n),r=e||t.getModel();t.body.innerHTML=i.parse(r)}))}},{key:"getModel",value:function(){return{}}},{key:"getOpened",value:function(){return document.body.contains(this.getRootNode())}},{key:"setOpened",value:function(e){!e&&this.getRootNode().parentNode&&this.getRootNode().parentNode.removeChild(this.getRootNode()),e&&this.render()}},{key:"close",value:function(){this.getParent(qi.ITEM)&&this.getParent(qi.ITEM).setOpened(!1),this.getParent(qi.COMPONENT)&&this.setOpened(!1)}},{key:"getCompactFormName",value:function(e){return mr.removeDiacritics(e).toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/[\-]+/g,"-").replace(/^-|-$/g,"")||"form"}},{key:"includeHTMLOverlayComponentModuleFunctionality",value:function(e){}},{key:"checkStickyActionBar",value:function(){var e;this.getParent()&&(e=this,setTimeout((function(){var t=e.getParent().getDependency("jq"),n=e.getParent().getDependency("editorPanelGroup");if(t){var i,r,a=$(e.getRootNode()).innerHeight(),o=$(e.getRootNode()).find("[data-role=body]").innerHeight();switch(o||(r=$(e.getRootNode()).find("[data-role=edit-email-overlay]")).length>0&&(o=~~r.innerHeight()),n.getActivePanel().getId()){case Zi.PUBLISH:i=t(e.getRootNode()).find("[data-role=publish-buttons-container], [data-role=body]"),t(e.getRootNode()).find("[data-role=publish-buttons-container]");break;case Zi.NOTIFICATIONS:r.length>0&&(i=t(e.getRootNode()).find("[data-role=edit-email-overlay] [data-role=buttons-container], [data-role=edit-email-overlay]")),t(e.getRootNode()).find("[data-role=edit-email-overlay] [data-role=buttons-container]")}i&&(o>a?i.addClass("responsive"):i.removeClass("responsive"))}}),500))}},{key:"onOverlayInitialized",value:function(){null==this.metricsManager&&(this.metricsManager=this.getParent().getDependency(gr.PLATFORM_METRICS_DEPENDECY))}},{key:"render",value:function(){var e=this.getParent(qi.COMPONENT).getRootNode().getBoundingClientRect();document.body.appendChild(this.getRootNode()),this.getRootNode().style.left="".concat(e.left+e.width,"px"),this.getRootNode().style.top="".concat(e.top,"px"),this.getRootNode().style.bottom="".concat(document.documentElement.offsetHeight-e.top-e.height,"px"),this.getRootNode().style.right="0",this.initialize()}}]),n}(ar),yr=(n(534),di()("i",{className:"i-lg i123-close"})),Tr=function(){var e=Ci.a.getInstance(),t=new window.EditorPanelGroup(document.getElementById("inspector-panel-group"));return di()("button",{className:"inspector-close-button",onClick:function(){var n=window.innerWidth;e.track("form_section_close");var i=Object(Te.b)(Oe.h);n<=900&&t.isVisible()?window.localStorage.setItem("noSidebarActiveState","1"):i=O.d.EDITOR;var r=Object(ve.j)(i);Object(Te.a)()(r)}},void 0,yr)};function vr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Or=di()(Tr,{}),br=function(e){u()(n,e);var t=vr(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"captionText",void 0),v()(A()(e),"i18nCaptionText",void 0),v()(A()(e),"searchCaption",void 0),v()(A()(e),"searchCaptionI18nKey",void 0),v()(A()(e),"searchable",void 0),v()(A()(e),"backButton",void 0),v()(A()(e),"captionDOMNode",void 0),v()(A()(e),"searchInputDOMNode",void 0),v()(A()(e),"backButtonDOMNode",void 0),v()(A()(e),"searchIconDOMNode",void 0),v()(A()(e),"closeIconDOMNode",void 0),v()(A()(e),"id",void 0),v()(A()(e),"type",qi.HEADER),e.getRootNode().setAttribute("data-role","menu-panel-header"),e.captionDOMNode=document.createElement("span"),e.captionDOMNode.setAttribute("data-role","caption"),e.backButtonDOMNode=document.createElement("a"),e.backButtonDOMNode.setAttribute("href","javascript:void(0)"),e.backButtonDOMNode.setAttribute("data-role","back-button"),e.backButtonDOMNode.innerHTML="<span class='i-lg i123-arrow-left2'></span>",e.searchInputDOMNode=document.createElement("input"),e.searchInputDOMNode.setAttribute("data-role","search"),e.searchInputDOMNode.setAttribute("type","text"),e.searchIconDOMNode=document.createElement("span"),e.searchIconDOMNode.setAttribute("data-role","search-icon"),e.searchIconDOMNode.innerHTML="<span class='i-lg i123-search'></span>",e.closeIconDOMNode=document.createElement("span"),e.closeIconDOMNode.setAttribute("data-role","close-icon"),e.closeIconDOMNode.innerHTML="<span class='i-lg i123-close'></span>",e.getRootNode().appendChild(e.captionDOMNode),e.backButtonDOMNode.onclick=function(){e.closeParent(),e.trigger("back")},e.searchInputDOMNode.onfocus=function(){e.getRootNode().setAttribute("data-is-focused","1"),e.trackEvent("publish_search")},e.searchInputDOMNode.onblur=function(){e.searchInputDOMNode.value||e.getRootNode().removeAttribute("data-is-focused")},e.searchIconDOMNode.onclick=function(){e.getRootNode().setAttribute("data-is-focused","1"),e.searchInputDOMNode.focus()},e.searchInputDOMNode.oninput=function(){var t=e.searchInputDOMNode.value;e.getParent(qi.COMPONENT).trigger("filter",t)},e.closeIconDOMNode.onclick=function(){e.trackEvent("publish_search_clear"),e.getRootNode().removeAttribute("data-is-focused"),e.searchInputDOMNode.value="",e.getParent(qi.COMPONENT).trigger("filter","")},e}return l()(n,[{key:"withSearchCaption",value:function(e,t){return this.searchCaption=e,this.searchCaptionI18nKey=t,this.searchInputDOMNode.setAttribute("placeholder",this.searchCaption),this.searchInputDOMNode.setAttribute("data-i18n-placeholder",this.searchCaptionI18nKey),this}},{key:"getSearchCaption",value:function(){return this.searchCaption}},{key:"withSearchable",value:function(e){return this.searchable=e,e?(this.getRootNode().appendChild(this.searchInputDOMNode),this.getRootNode().appendChild(this.searchIconDOMNode),this.getRootNode().appendChild(this.closeIconDOMNode),this.getRootNode().setAttribute("data-is-searchable","")):(this.searchInputDOMNode.parentNode&&this.getRootNode().removeChild(this.searchInputDOMNode),this.searchIconDOMNode.parentNode&&this.getRootNode().removeChild(this.searchIconDOMNode),this.closeIconDOMNode.parentNode&&this.getRootNode().removeChild(this.closeIconDOMNode),this.getRootNode().removeAttribute("data-is-searchable")),this}},{key:"isSearchable",value:function(){return this.searchable}},{key:"withCaption",value:function(e,t){return this.captionText=e,this.i18nCaptionText=t,this.captionDOMNode.textContent=this.captionText,this.captionDOMNode.setAttribute("data-i18n-text",this.i18nCaptionText),this}},{key:"withCloseButton",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return this;var n=document.createElement("div");return n.className=e,this.getRootNode().appendChild(n),tr.a.render(Or,n),this}},{key:"getCaption",value:function(){return this.captionText}},{key:"withBackButton",value:function(e){return this.backButton=e,e?(this.getRootNode().appendChild(this.backButtonDOMNode),this.getRootNode().setAttribute("data-has-back-button","")):(this.backButtonDOMNode.parentNode&&this.getRootNode().removeChild(this.backButtonDOMNode),this.getRootNode().removeAttribute("data-has-back-button")),this}},{key:"hasBackButton",value:function(){return this.backButton}},{key:"closeParent",value:function(){this.getParent(qi.ITEM)&&this.getParent(qi.ITEM).setOpened(!1)}},{key:"withId",value:function(e){return this.id=e,e?this.getRootNode().setAttribute("data-component-id",e):this.getRootNode().removeAttribute("data-component-id"),this}},{key:"getId",value:function(){return this.id}}]),n}(ar);function Cr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Ir=function(e){u()(n,e);var t=Cr(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"heading",void 0),v()(A()(e),"type",qi.HEADING),e.heading=document.createElement("h2"),e.getRootNode().appendChild(e.heading),e.getRootNode().setAttribute("data-role","menu-panel-heading"),e}return l()(n,[{key:"setCaption",value:function(e,t){return this.heading.textContent=e,t?this.heading.setAttribute("data-i18n-text",t):this.heading.removeAttribute("data-i18n-text"),this}}]),n}(ar);function Rr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Pr,Nr,Ar,Sr,Lr=function(e){u()(n,e);var t=Rr(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"opened",void 0),v()(A()(e),"type",qi.SCROLLABLE),e.getRootNode().setAttribute("data-role","scrollable-container"),e.on("filter",(function(t){e.applyFilterText(t)})),e}return l()(n,[{key:"setOpened",value:function(e){e&&this.getParent()&&this.getParent().setOpened(!0);for(var t=this.getChildren(),n=0,i=t.length;n<i;n++)t[n].setOpened&&t[n].setOpened(!1);return this}},{key:"applyFilterText",value:function(e){e=String(e||"").toLowerCase().replace(/[\s]+/g," ").replace(/(^[\s]+|[\s]+$)/g,"");for(var t=this.getChildren(),n=0,i=t.length;n<i;n++){var r=t[n].getRootNode();r.textContent.toLowerCase().indexOf(e)>-1?r.style.display="":(t[n].setOpened&&t[n].setOpened(!1),r.style.display="none")}}},{key:"openFirstElement",value:function(){var e=this.getChildren()[0]||null;e&&e.setOpened&&e.setOpened(!0)}},{key:"isOpened",value:function(){return this.opened}},{key:"addPerfectScrollbar",value:function(e){return e.addPerfectScrollbar(this.getRootNode()),this}}]),n}(dr),Dr=n(76),wr=n(623),kr=n(624),Mr=n(615),xr=n(610),Ur=n(126),Fr=n(391),Br=n(609),Yr=n(117),Vr=n(400),Hr=n(91),Gr=n(176),Wr=function(e){return e?"string"!==typeof e?{isValid:!1,i18nKey:"to_do",errorMessage:"".concat(e," is not a string")}:{isValid:!0}:{isValid:!1,i18nKey:"textdef_33",errorMessage:"This field is required."}},jr=/^[a-zA-Z0-9.!#$%&\u2019*+\/=?^_`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9-]+$/,Kr=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e||t?!e&&t?Wr(e):jr.test(e)?{isValid:!0}:{isValid:!1,i18nKey:"to_do",errorMessage:"Invalid email format. Please provide another email address."}:{isValid:!0}},zr=n(398),Xr=n.n(zr),Zr=n(614),qr=n(618),Jr=n(114),Qr=n.n(Jr),$r=n(105),ea=n.n($r);!function(e){e.XS="extra-small",e.S="small"}(Pr||(Pr={})),function(e){e.PRIMARY="primary",e.SECONDARY="secondary",e.WARNING="warning",e.NEGATIVE="negative",e.POSITIVE="positive",e.PENDING="pending"}(Nr||(Nr={})),function(e){e.GHOST="ghost",e.TEXT="text"}(Ar||(Ar={})),function(e){e.LIGHT="light",e.DEFAULT="default",e.SMALL="small"}(Sr||(Sr={}));var ta,na="#068FF6",ia="#E1F2FE",ra="#0372F2",aa="#0260EF",oa="#02B880",sa="#E1F6F0",la="#FA4848",ca="#FFE9E9",ua="#F1252A",da="#FFAD00",pa="#FFF5E0",ha="#FFAD00",_a="#FF9C00",ga="#FF8300",ma="#808080",fa="#F0F0F0",Ea="rgba(6, 143, 246, 0.2)",ya="rgba(250, 72, 72, 0.2)",Ta="rgba(1, 160, 99, 0.2)";!function(e){e.mobileS="320px",e.mobileM="375px",e.mobileL="425px",e.tablet="768px",e.laptop="1024px",e.laptopL="1440px",e.desktop="2560px"}(ta||(ta={}));var va={minWidthMobileS:"(min-width: ".concat(ta.mobileS,")"),minWidthMobileM:"(min-width: ".concat(ta.mobileM,")"),minWidthMobileL:"(min-width: ".concat(ta.mobileL,")"),minWidthTablet:"(min-width: ".concat(ta.tablet,")"),minWidthLaptop:"(min-width: ".concat(ta.laptop,")"),minWidthLaptopL:"(min-width: ".concat(ta.laptopL,")"),minWidthDesktop:"(min-width: ".concat(ta.desktop,")"),maxWidthMobileS:"(max-width: ".concat(ta.mobileS,")"),maxWidthMobileM:"(max-width: ".concat(ta.mobileM,")"),maxWidthMobileL:"(max-width: ".concat(ta.mobileL,")"),maxWidthTablet:"(max-width: ".concat(ta.tablet,")"),maxWidthLaptop:"(max-width: ".concat(ta.laptop,")"),maxWidthLaptopL:"(max-width: ".concat(ta.laptopL,")"),maxWidthDesktop:"(max-width: ".concat(ta.desktop,")")},Oa=function(e){return di()("i",{className:"icon ".concat(e.icon)})};n(543);function ba(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}function Ca(){var e=Qr()(["\n    min-height: ",";\n    min-width: ",";\n    width: auto;\n    font-size: ",";\n    font-family: ",";\n    line-height: ",";\n    font-weight: ",";\n    position: relative;\n    border-style: solid;\n    border-width: 1px;\n    border-color: ",";\n    border-radius: ",";\n    background-color: ",";\n    color: ",";\n    box-sizing: border-box;\n\n    &:hover {\n        border-color: ",";\n        background-color: ",";\n        cursor: pointer;\n    }\n\n    &.show-small {\n        font-size: 0;\n        height: ",";\n        padding: ",";\n        min-width: auto;\n    }\n\n    &.show-small .icon { font-size: ","; }\n\n    .icon { color: inherit; }\n\n    &:active {\n        border: solid 1px ",";\n        background-color: ",";\n    }\n\n    &:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n    }\n    &:disabled:hover {\n        background-color: ",";\n        border-color: ",";\n    }\n\n    &.button--primary {\n        background-color: ",";\n        border-color: ",";\n        color: #FFFFFF;\n    }\n\n    &.button--primary:hover {\n        background-color: ",";\n        border-color: ","\n    }\n\n    &.button--primary:active {\n        background-color: ",";\n        border-color: ",";\n    }\n\n    &.button--primary:disabled {\n        background-color: ",";\n        border-color: ",";\n    }\n\n    &.button--secondary {\n        background-color: ",";\n        border-color: ",";\n        color: ",";\n    }\n\n    &.button--secondary:hover {\n        border-color: ",";\n    }\n\n    &.button--secondary:active {\n        background-color: ",";\n        border-color: ",";\n    }\n\n    &.button--secondary:disabled {\n        background-color: ",";\n        border-color: ",";\n    }\n\n    &.button--upgrade {\n        background-color: ",";\n        border-color: ",";\n        color: ",";\n    }\n\n    &.button--upgrade:hover {\n        background-color: ",";\n        border-color: ",";\n    }\n\n    &.button--upgrade:active {\n        background-color: ",";\n        border-color: ",";\n    }\n\n    &.button--upgrade:disabled {\n        background-color: ",";\n        border-color: ",";\n    }\n\n    // Text button styling\n    &.button--text {\n        background-color: transparent;\n        border: none;\n        min-height: auto;\n        color: ","\n    }\n\n    &.button--text:hover { color: ","; background: transparent; }\n    &.button--text:active { color: ","; background: transparent; }\n    &.button--text:disabled { background-color: transparent; color: ","; }\n\n    &.button--text.button--primary { color: "," }\n    &.button--text.button--primary:hover { color: ","; background-color: transparent; }\n    &.button--text.button--primary:active { color: "," }\n    &.button--text.button--primary:disabled { background-color: transparent; color: ","; }\n\n    &.button--text.button--secondary { color: "," }\n    &.button--text.button--secondary:hover { color: "," }\n    &.button--text.button--secondary:active { color: ","; background: transparent; }\n    &.button--text.button--secondary:disabled { background-color: transparent; color: ","; }\n\n    &.button--text.button--negative { color: "," }\n    &.button--text.button--negative:hover { color: "," }\n    &.button--text.button--negative:active { color: "," }\n    &.button--text.button--negative:disabled { color: "," }\n\n    &.button--text.button--upgrade { color: "," }\n    &.button--text.button--upgrade:hover { color: ","; background-color: transparent; }\n    &.button--text.button--upgrade:active { color: "," }\n    &.button--text.button--upgrade:disabled { color: ","; background-color: transparent; }\n\n    // Ghost button styling\n    &.button--ghost { background-color: transparent; }\n\n    &.button--ghost:hover,\n    &.button--ghost.button--secondary:hover {\n        background-color: ",";\n        border-color: ",";\n    }\n\n    &.button--ghost.button--secondary {\n        border-color: ",";\n    }\n\n    &.button--ghost.button--secondary:active {\n        background-color: ",";\n        border-color: ",";\n    }\n\n    &.button--ghost:disabled {\n        background-color: transparent;\n        border-color: ",";\n    }\n\n    &.button--ghost.button--secondary:disabled {\n        background-color: transparent;\n        border-color: ",";\n    }\n\n    &.button--ghost.button--negative,\n    &.icon--only.button--negative {\n        color: ",";\n        border-color: ",";\n        background-color: transparent;\n    }\n\n    &.button--ghost.button--negative:hover,\n    &.icon--only.button--negative:hover {\n        color: #FFF;\n        border-color: ",";\n        background-color: ",";\n    }\n\n    &.button--ghost.button--negative:active,\n    &.icon--only.button--negative:active {\n        background-color: ",";\n        border-color: ",";\n    }\n\n    &.button--ghost.button--negative:disabled,\n    &.icon--only.button--negative:disabled {\n        border-color: ",";\n        background-color: transparent;\n        color: ",";\n    }\n\n    &.button--toaster {\n        padding: 3px 4px;\n        text-transform: uppercase;\n        max-width: 100%;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n    }\n\n    &.button--toaster.button--primary:hover { background-color: ","; }\n    &.button--toaster.button--negative:hover { background-color: ","; }\n    &.button--toaster.button--positive:hover { background-color: ","; }\n\n    &.icon--only {\n        min-width: auto;\n        min-height: auto;\n        padding: 2px;\n        font-size: ",";\n        &.button--ghost {\n            width: 25px;\n            height: 25px;\n            line-height: 1;\n            color: ",";\n            background: transparent;\n            border: transparent;\n            padding: 0px;\n            &:disabled:hover i.icon {\n                color: ",";\n            }\n        }\n        &.button--ghost.button--s {\n            padding: 0;\n            width: 18px;\n            height: 18px;\n            font-size: 17px;\n        }\n        .icon { line-height: ","; }\n    }\n\n    &:focus {\n        outline: none;\n    }\n\n    @media "," {\n        &.show-small .icon { font-size: 0; }\n        &.show-small {\n            font-size: ",";\n            padding: 0 20px;\n            min-width: auto;\n            width: auto;\n        }\n    }\n"]);return Ca=function(){return e},e}var Ia="36px",Ra='"Open Sans", sans-serif',Pa="60px",Na="14px",Aa="24px",Sa=1.35,La=600,Da="3px",wa="5px",ka="#4C4C4C",Ma="#DDDDDD",xa="#068FF6",Ua="#0260EF",Fa="#DDDDDD",Ba="#AAAAAA",Ya="#C8C8C8",Va=ea.a.button(Ca(),Ia,Pa,Na,Ra,Sa,La,Ma,Da,Ma,ka,Ya,Ya,Ia,wa,Aa,Ba,Ba,Ma,Ma,xa,xa,ra,ra,Ua,Ua,xa,xa,Fa,Fa,ka,Ya,Ba,Ba,Fa,Fa,ha,ha,ka,_a,_a,ga,ga,ha,ha,ma,ka,ka,ma,na,aa,aa,na,ma,ka,ka,ma,la,ua,ua,la,da,ga,ga,da,Ya,Ya,Ya,Ba,Ba,Ya,Ya,la,la,la,la,ua,ua,la,la,Ea,ya,Ta,Aa,ma,ma,Sa,va.minWidthTablet,Na),Ha=function(e){u()(n,e);var t=ba(n);function n(){var e;o()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),v()(A()(e),"props",void 0),v()(A()(e),"onClick",(function(){e.props.onClick&&e.props.onClick(e.props.id)})),e}return l()(n,[{key:"shouldComponentUpdate",value:function(e){return!Object(Zr.a)(Object(qr.a)(e,["onClick"]),Object(qr.a)(this.props,["onClick"]))}},{key:"render",value:function(){var e=n.computeButtonClasses(this.props),t=n.renderContent(this.props);return di()(Va,{id:this.props.id,disabled:this.props.isDisabled,role:"button",type:"button","aria-labelledby":"button ".concat(this.props.id),title:this.props.tooltip,className:e,style:this.props.style,onClick:this.onClick,"data-testid":this.props.testid},void 0,t)}}],[{key:"renderContent",value:function(e){return e.isIconOnly?di()(Oa,{icon:e.icon}):e.icon?di()("div",{},void 0,di()(Oa,{icon:e.icon}),e.label):"".concat(e.label)}},{key:"computeButtonClasses",value:function(e){return vi()("button",v()({"button--primary":e.type===Nr.PRIMARY,"button--secondary":e.type===Nr.SECONDARY,"button--positive":e.type===Nr.POSITIVE,"button--negative":e.type===Nr.NEGATIVE,"button--upgrade":e.type===Nr.PENDING,"button--ghost":e.variant===Ar.GHOST,"button--text":e.variant===Ar.TEXT,"button--xs":e.size===Pr.XS,"button--s":e.size===Pr.S,"button--toaster":!!e.isInToaster,"show-small":!!e.isIconVisibleOnlyOnSmallScreens,"icon--only":!!e.isIconOnly,"icon--light":n.isLightIconButton(e),"icon--default":n.isDefaultIconButton(e),"icon--small":n.isSmallIconButton(e)},e.className,!!e.className))}},{key:"isLightIconButton",value:function(e){return e.isIconOnly&&e.iconType===Sr.LIGHT}},{key:"isDefaultIconButton",value:function(e){return e.isIconOnly&&(e.iconType===Sr.DEFAULT||!e.iconType)}},{key:"isSmallIconButton",value:function(e){return e.isIconOnly&&e.iconType===Sr.SMALL}}]),n}(fi.Component);v()(Ha,"defaultProps",{isDisabled:!1,isInToaster:!1,isIconVisibleOnlyOnSmallScreens:!1,onClick:function(e){return console.log("You have clicked me! =>",e)}});n(549);function Ga(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Wa=function(e){u()(n,e);var t=Ga(n);function n(e){var i;return o()(this,n),i=t.call(this,e),v()(A()(i),"props",void 0),v()(A()(i),"divContent",void 0),v()(A()(i),"divFooter",void 0),v()(A()(i),"isFooterFixed",void 0),v()(A()(i),"divContentObserver",void 0),v()(A()(i),"divContentObserverConfig",{childList:!0,subtree:!0,attributes:!0}),v()(A()(i),"divContentObserverCallback",void 0),v()(A()(i),"updateStickyFooter",(function(){i.divContent&&i.divFooter&&(i.divContent.scrollHeight>=window.innerHeight-226?(i.isFooterFixed=!0,i.divFooter.classList.add("modal__footer--fixed")):(i.isFooterFixed=!1,i.divFooter.classList.remove("modal__footer--fixed")))})),v()(A()(i),"updateStickyFooterOnResize",(function(){i.updateStickyFooter()})),i.state={isModalOpen:!1},i.handleOpenModal=i.handleOpenModal.bind(A()(i)),i.handleCloseModal=i.handleCloseModal.bind(A()(i)),i.handleDivContent=i.handleDivContent.bind(A()(i)),i.handleDivFooter=i.handleDivFooter.bind(A()(i)),i.isFooterFixed=!1,i.divContentObserverCallback=function(e){e.length>0&&"childList"===e[0].type&&i.updateStickyFooter()},i.divContentObserver=new MutationObserver(i.divContentObserverCallback),i}return l()(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateStickyFooterOnResize)}},{key:"shouldComponentUpdate",value:function(e,t){return!Object(Zr.a)(Object(qr.a)(e,["onAfterOpen","onAfterClose","onRequestClose","parentSelector","footerButtons"]),Object(qr.a)(this.props,["onAfterOpen","onAfterClose","onRequestClose","parentSelector","footerButtons"]))||!Object(Zr.a)(t,this.state)}},{key:"render",value:function(){var e=this,t=vi()("modal",v()({},"".concat(this.props.className),!!this.props.className)),n=vi()("modal__footer",{"modal__footer--leftButtons":!!this.props.footerButtons.leftSide}),i=this.props.hasCloseIcon,r=void 0!==i&&i;return Ei.a.createElement(Xr.a,Si()({className:t,isOpen:this.state.isModalOpen,onRequestClose:this.handleCloseModal},this.props),di()("div",{className:"modal__header"},void 0,di()("h4",{className:"modal__title"},void 0,this.props.headerTitle),r&&di()(Ha,{id:"modal__close-icon",className:"modal__close-icon",icon:"i123-close",label:"Close",isIconOnly:!0,iconType:Sr.LIGHT,onClick:function(){e.handleCloseModal()}})),Ei.a.createElement("div",{ref:this.handleDivContent,className:"modal__content"},this.props.children),this.props.footerButtons&&Ei.a.createElement("div",{className:n,ref:this.handleDivFooter},di()("div",{className:"button__group"},void 0,this.props.footerButtons.leftSide&&this.props.footerButtons.leftSide.map((function(e){return Ei.a.createElement(Ha,Si()({key:e.id},e))}))),di()("div",{className:"button__group"},void 0,this.props.footerButtons.rightSide&&this.props.footerButtons.rightSide.map((function(e){return Ei.a.createElement(Ha,Si()({key:e.id},e))})))))}},{key:"componentDidUpdate",value:function(){this.state.isModalOpen&&this.updateStickyFooter()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateStickyFooterOnResize)}},{key:"toggleModal",value:function(){this.state.isModalOpen?this.handleCloseModal():this.handleOpenModal()}},{key:"handleDivContent",value:function(e){this.divContent=e,this.divContent&&this.divContentObserver.observe(this.divContent,this.divContentObserverConfig),this.divFooter&&this.updateStickyFooter()}},{key:"handleDivFooter",value:function(e){this.divFooter=e,this.divContent&&this.updateStickyFooter()}},{key:"handleOpenModal",value:function(){this.setState({isModalOpen:!0}),Object(wr.a)(this.updateStickyFooter,300),window.innerHeight>=document.body.scrollHeight?document.body.classList.add("ReactModal__Body--open--no-padding"):document.body.classList.remove("ReactModal__Body--open--no-padding")}},{key:"handleCloseModal",value:function(e){this.setState({isModalOpen:!1}),this.isFooterFixed=!1,this.props.onRequestClose&&this.props.onRequestClose(e)}}]),n}(fi.Component),ja=n(216);n(553);function Ka(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var za=function(e){u()(n,e);var t=Ka(n);function n(){var e;o()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),v()(A()(e),"props",void 0),e}return l()(n,[{key:"shouldComponentUpdate",value:function(e){return!Object(Zr.a)(e,this.props)}},{key:"render",value:function(){var e=vi()("label__field",v()({},"".concat(this.props.className),!!this.props.className));return di()("label",{className:e,style:this.props.style,htmlFor:this.props.for,title:this.props.tooltip},void 0,this.props.label)}}]),n}(fi.Component);v()(za,"defaultProps",{label:"label",for:"input"});n(555);function Xa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Za=function(e){u()(n,e);var t=Xa(n);function n(){var e;o()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),v()(A()(e),"props",void 0),e}return l()(n,[{key:"shouldComponentUpdate",value:function(e){return e.message!==this.props.message}},{key:"render",value:function(){return di()("span",{className:"message--error"},void 0,this.props.message)}}]),n}(fi.Component);n(557);function qa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Ja=function(e){u()(n,e);var t=qa(n);function n(){var e;o()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),v()(A()(e),"props",void 0),v()(A()(e),"handleRef",(function(t){e.props.inputRef(t)})),v()(A()(e),"onChange",(function(t){e.props.onChange&&e.props.onChange(e.props.id,t.target.value)})),v()(A()(e),"onBlur",(function(t){if(e.props.onBlur){var n=e.props.doTrimOnBlur?t.target.value.trim():t.target.value;e.props.onBlur(e.props.id,n)}})),e}return l()(n,[{key:"shouldComponentUpdate",value:function(e){return!Object(Zr.a)(Object(qr.a)(e,["onChange","onBlur"]),Object(qr.a)(this.props,["onChange","onBlur"]))}},{key:"render",value:function(){var e=vi()("input__container",{"has--error":this.props.errorMessage},this.props.className);return di()("div",{className:e,style:this.props.style},void 0,Ei.a.createElement("input",{id:this.props.id,ref:this.handleRef,type:this.props.type,autoComplete:"off",className:"input__field",placeholder:this.props.placeholder,value:this.props.value,onChange:this.onChange,onBlur:this.onBlur,"aria-label":this.props.id,disabled:!!this.props.isDisabled||null,readOnly:!!this.props.isReadOnly||null,title:this.props.title}),di()(Za,{message:this.props.errorMessage}))}}]),n}(fi.Component);v()(Ja,"defaultProps",{doTrimOnBlur:!1,type:"text",title:"",onChange:function(e,t){return console.log("Value of ".concat(e," changed to ").concat(t))},onBlur:function(e,t){return console.log("Blurred out of ".concat(e," that has value ").concat(t))},inputRef:function(){}});n(559);function Qa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var $a,eo=function(e){u()(n,e);var t=Qa(n);function n(){var e;o()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),v()(A()(e),"props",void 0),e}return l()(n,[{key:"render",value:function(){var e=vi()("input__group",v()({},"".concat(this.props.className),!!this.props.className));return di()("div",{className:e,style:this.props.style},void 0,this.props.labelProps&&Ei.a.createElement(za,this.props.labelProps),Ei.a.createElement(Ja,this.props.textInputProps),this.props.children)}}]),n}(fi.Component),to=function(e){var t=e.emailValue,n=e.textInputErrorMessage,i=e.descriptionText,r=e.descriptionStep1Text,a=e.descriptionStep2Text,o=e.learnMoreText,s=e.emailLabelText,l=e.emailPlaceholder,c=e.onTextInputErrorChange,u=e.onEmailChange,d=e.onTextInputBlur;return Ei.a.createElement(Ei.a.Fragment,null,di()("p",{},void 0,i),di()("ol",{className:"email-validation-modal__list"},void 0,di()("li",{},void 0,r,di()("a",{href:"//www.123formbuilder.com/docs/spf-record/",target:"_blank"},void 0," ",o)),di()("li",{},void 0,a)),di()(eo,{labelProps:{label:s,for:"email-validation-input"},textInputProps:{id:"email-validation-input",placeholder:l,type:"email",errorMessage:n,value:t,onChange:function(e,t){!function(e){u(e),c("")}(t)},onBlur:function(e,t){d(t)}}}))},no=(n(561),di()(ja.a,{isDisplayed:!0})),io=Object(yi.connect)((function(e){return{isOpen:e.emailValidationModal.isOpen,validatedEmail:e.emailValidationModal.validatedEmail,formId:e.form.id}}),(function(e){return{onCloseEmailValidationModal:function(){e({type:Gr.a.SET_IS_OPEN,payload:!1})},onSetValidatedEmail:function(t){var n;e((n=t,{type:Gr.a.SET_VALIDATED_EMAIL,payload:n}))}}}))((function(e){var t,n="".concat(null===(t=window.initData)||void 0===t?void 0:t.apiUrl),i=new Hr.a(jQuery,n),r=new F.a,a=Object(fi.useState)(""),o=Di()(a,2),s=o[0],l=o[1],c=Object(fi.useState)(!1),u=Di()(c,2),d=u[0],p=u[1],h=Object(fi.useState)(""),_=Di()(h,2),g=_[0],m=_[1],f=function(){l(""),m(""),e.onCloseEmailValidationModal()},E=function(){Kr(s).errorMessage&&m(r.translateText("validationModal_emailNotValid"))};return di()(Wa,{className:"email-validation-modal",isOpen:e.isOpen,headerTitle:r.translateText("validationModal_addCustomEmail"),footerButtons:{rightSide:[{id:"modal-cancel-button",label:r.translateText("validationModal_cancel"),type:Nr.SECONDARY,variant:Ar.GHOST,isDisabled:d,onClick:f},{id:"modal-add-button",label:r.translateText("validationModal_add"),type:Nr.PRIMARY,style:{marginLeft:"10px"},isDisabled:d,onClick:function(){Kr(s,!0).errorMessage?m(r.translateText("validationModal_emailNotValid")):(p(!0),i.GET_JSON("/v2/validation/spf-email-domain/".concat(e.formId,"/").concat(s)).then((function(){e.onSetValidatedEmail(s),f()})).catch((function(e){var t=e.responseJSON;m(r.translateText(t.intlErrorMessage))})).finally((function(){p(!1)})))}}]},style:{content:{maxWidth:"600px"}}},void 0,d?no:di()(to,{emailValue:s,onEmailChange:l,textInputErrorMessage:g,onTextInputErrorChange:m,onTextInputBlur:E,descriptionText:r.translateText("validationModal_description"),descriptionStep1Text:r.translateText("validationModal_descriptionStep1"),descriptionStep2Text:r.translateText("validationModal_descriptionStep2"),learnMoreText:r.translateText("validationModal_learnMore"),emailLabelText:r.translateText("validationModal_emailLabel"),emailPlaceholder:r.translateText("validationModal_emailPlaceholder")}))}));function ro(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}!function(e){e.ADD_CUSTOM_EMAIL="add-custom-email",e.NO_REPLY_MY_FORMS="noreply@myfor.ms"}($a||($a={}));var ao=function(e){u()(n,e);var t=ro(n);function n(e){var i;return o()(this,n),i=t.call(this),v()(A()(i),"rootNode",void 0),v()(A()(i),"dropdownButton",void 0),v()(A()(i),"nativeDropdown",void 0),v()(A()(i),"options",void 0),i.rootNode=document.createElement("div"),i.rootNode.setAttribute("data-role","dropdown-button-component"),i.dropdownButton=document.createElement("div"),i.dropdownButton.setAttribute("data-role","dropdown-button"),i.rootNode.appendChild(i.dropdownButton),i.dropdownButton.textContent=e,i.nativeDropdown=document.createElement("select"),i.dropdownButton.appendChild(i.nativeDropdown),i.addEventListeners(),i}return l()(n,[{key:"getRoot",value:function(){return this.rootNode}},{key:"clear",value:function(){for(;this.nativeDropdown.options.length;)this.nativeDropdown.remove(0)}},{key:"setOptions",value:function(e){this.options=e,this.clear();for(var t=0,n=this.options.length;t<n;t++){var i=document.createElement("option");i.text=this.options[t].text,i.value=this.options[t].value,this.nativeDropdown.add(i)}}},{key:"setOptionsWithActions",value:function(e){this.setOptions(e),this.setActionsOnOptions()}},{key:"setActionsOnOptions",value:function(){var e=this,t=this;this.nativeDropdown.addEventListener("change",(function(){t.findOption(t.nativeDropdown.value).action(),t.nativeDropdown.value=null})),this.nativeDropdown.onmouseover=function(){e.nativeDropdown.value=null}}},{key:"findOption",value:function(e){for(var t=0,n=this.options.length;t<n;t++)if(e==this.options[t].value)return this.options[t]}},{key:"addEventListeners",value:function(){var e=this;$(this.nativeDropdown).on("click",(function(t){t.clientX&&t.clientY&&e.trigger("dropdown-open")}))}},{key:"blurDropdown",value:function(){this.nativeDropdown.blur()}}]),n}(ir.a),oo=n(46);function so(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var lo=function(e){u()(n,e);var t=so(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"id",void 0),v()(A()(e),"dependencies",{}),v()(A()(e),"openedState",void 0),v()(A()(e),"type",qi.COMPONENT),e.enableSyncMode(),e.getRootNode().setAttribute("data-role","menu-panel"),e.on("filter",(function(t){for(var n=e.getChildren(),i=n.length,r=0;r<i;r++)n[r].trigger("filter",t)})),e}return l()(n,[{key:"withDependency",value:function(e,t){return this.dependencies[e]=t,this}},{key:"getDependency",value:function(e){return void 0===this.dependencies[e]?null:this.dependencies[e]}},{key:"getId",value:function(){return this.id}},{key:"withId",value:function(e){return this.id=e,this.getRootNode().setAttribute("id",this.id),this}},{key:"setOpened",value:function(e){e&&!this.openedState&&(this.getParent()?this.getParent().isOpened()||this.getParent().setOpened(!0):this.trigger("open"));for(var t=this.getChildren(),n=0,i=t.length;n<i;n++)t[n].setOpened&&t[n].setOpened(!1);return e?this.renderFirstChild():this.getRootNode().parentNode&&this.getRootNode().parentNode.removeChild(this.getRootNode()),this.openedState=e,this}},{key:"openElementById",value:function(e){var t=this.getElementById(e);t&&t.setOpened&&t.setOpened(!0)}},{key:"openFirstElement",value:function(){var e=this.getChildren()[0]||null;e&&e.setOpened&&e.setOpened(!0)}},{key:"isOpened",value:function(){return this.openedState}},{key:"render",value:function(){var e=this.getParent(qi.COMPONENT).getRootNode().getBoundingClientRect();document.body.appendChild(this.getRootNode()),this.getRootNode().style.left="".concat(e.left+e.width,"px"),this.getRootNode().style.top="".concat(e.top,"px"),this.getRootNode().style.bottom="".concat(document.documentElement.offsetHeight-e.top-e.height,"px")}},{key:"renderFirstChild",value:function(){var e=this.getChildren()[0]||null;e&&(e.type!==qi.COMPONENT&&e.type!==qi.EXTENSION||e.render())}}]),n}(dr);function co(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var uo=function(e){u()(n,e);var t=co(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"type",qi.OVERLAY),e.getRootNode().setAttribute("data-is-overlay-panel","1"),e}return l()(n,[{key:"setOpened",value:function(e){return e&&!this.getRootNode().parentNode&&document.body.appendChild(this.getRootNode()),y()(_()(n.prototype),"setOpened",this).call(this,e)}}]),n}(lo),po=n(397),ho=n(123),_o=n(66),go=n(81);function mo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var fo=function(e){u()(n,e);var t=mo(n);function n(){var e;o()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),v()(A()(e),"type",void 0),v()(A()(e),"subject",void 0),v()(A()(e),"attachments",void 0),v()(A()(e),"contentType",void 0),v()(A()(e),"customFields",void 0),e}return n}((function e(){o()(this,e),v()(this,"id",void 0),v()(this,"userId",void 0),v()(this,"formId",void 0),v()(this,"sendType",void 0),v()(this,"category",void 0),v()(this,"recipients",void 0),v()(this,"rules",void 0),v()(this,"body",void 0),v()(this,"trigger",void 0),v()(this,"isVirtual",void 0),v()(this,"virtualId",void 0),v()(this,"errorCodes",void 0)})),Eo=n(18),yo=n(51);function To(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var vo,Oo=function(e){u()(n,e);var t=To(n);function n(e){var i;return o()(this,n),i=t.call(this),v()(A()(i),"_rootController",void 0),v()(A()(i),"initializePromise",void 0),v()(A()(i),"initializeResolve",void 0),v()(A()(i),"initializeReject",void 0),v()(A()(i),"currentModel",void 0),v()(A()(i),"isDirty",!1),v()(A()(i),"translationsService",void 0),v()(A()(i),"ADD_FIELDS",void 0),v()(A()(i),"ONE_EMAIL",void 0),v()(A()(i),"DISABLED_EMAIL_TAG",void 0),v()(A()(i),"MODIFY_RULES",void 0),v()(A()(i),"NO_CHANGES",void 0),i.translationsService=new F.a,i.setTranslations(),i._rootController=e,i.initializePromise=new Promise((function(e,t){i.initializeResolve=e,i.initializeReject=t})),i}return l()(n,[{key:"setTranslations",value:function(){this.ONE_EMAIL=this.translationsService.translateTextDefault("notifications_tooltip_one_email","Only one email can be added"),this.DISABLED_EMAIL_TAG=this.translationsService.translateTextDefault("notifications_tooltip_disabled_email_tag","To remove this email, disable your SMTP connection"),this.MODIFY_RULES=this.translationsService.translateTextDefault("notifications_tooltip_modify_rules","To add an email, modify the existing rules"),this.NO_CHANGES=this.translationsService.translateTextDefault("notifications_tooltip_no_changes","There are no changes to save"),this.ADD_FIELDS=this.translationsService.translateTextDefault("notifications_tooltip_add_fields","Add fields from the form and variables")}},{key:"getInitializePromise",value:function(){return this.initializePromise}},{key:"setCurrentModel",value:function(e){this.currentModel=e}},{key:"setDirtyState",value:function(e){this.isDirty=e,this.isDirty||(window.onbeforeunload=window.onunload=null),this.isDirty&&this.enableSave()}},{key:"getDirtyState",value:function(){return this.isDirty}},{key:"addInteractionEventListeners",value:function(e){var t=this;e.onmousedown=e.onkeydown=function(){t.isDirty||(window.onbeforeunload=function(){return setTimeout((function(){Ci.a.getInstance().track("settings_notifications_unsaved_changes_cancel_btn_click")}),3e4),Ci.a.getInstance().track("settings_notifications_unsaved_changes_popup_display"),window.onunload=function(){Ci.a.getInstance().track("settings_notifications_unsaved_changes_leave_btn_click")},""}),t.setDirtyState(!0)}}},{key:"appendFeedbackButton",value:function(e,t){var n=this.getRootNode().querySelector(e),i=document.createElement("div"),r=document.createElement("script");r.type="text/javascript",r.setAttribute("defer","true"),r.src="//form.123formbuilder.com/embed/4622940.js?type=lightbox",r.setAttribute("data-role","form"),r.setAttribute("data-modal-container-id",t),r.setAttribute("data-default-width","650px"),r.setAttribute("data-embed-type","lightbox-text-link"),r.setAttribute("data-embed-text-link"," "),i.appendChild(r),i.appendChild(document.createElement("span")),i.setAttribute("data-role","feedback-button"),n.appendChild(i),sr()(i,{content:this.translationsService.translateTextDefault("notifications_give_feedback","Give feedback"),placement:"right",popperOptions:{strategy:"fixed"}})}},{key:"isHipaaProtected",value:function(e,t){if(!e)return!1;var n=Object(Ur.a)(t.controls,(function(t){return t.id===e}));return n&&n.isHipaa&&t.settings.isHipaa}},{key:"rootController",get:function(){return this._rootController}}]),n}(Er),bo=n(163),Co=n(153),Io=n(619);function Ro(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}!function(e){e.API_VERSION="v2",e.TEMPLATE_URL="notifications/templates",e.DRAFT_TEMPLATE="Make this draft a template",e.NEW_TEMPLATE="New template",e.MANAGE_TEMPLATES="Manage Templates",e.SWITCH_TO_HTML="Switch to HTML",e.SWITCH_TO_PLAIN_TEXT="Switch to Plain Text",e.SEPARATOR_LINE="-----",e.ERROR_CLOSED_VIA_CANCEL="User closed the dialog by pressing the Cancel button",e.ERROR_CLOSED_VIA_X="User closed the dialog by pressing the X button"}(vo||(vo={}));var Po,No,Ao,So=function(e){u()(n,e);var t=Ro(n);function n(e,i,r,a,s,l,c){var u,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Oe.e;return o()(this,n),u=t.call(this),v()(A()(u),"root",void 0),v()(A()(u),"parentRoot",void 0),v()(A()(u),"dropdown",void 0),v()(A()(u),"textarea",void 0),v()(A()(u),"addFormVariablesSection",void 0),v()(A()(u),"currentTemplate",void 0),v()(A()(u),"tinyMCEEditorUID",void 0),v()(A()(u),"formId",void 0),v()(A()(u),"parent",void 0),v()(A()(u),"abilityService",void 0),v()(A()(u),"templates",void 0),v()(A()(u),"variablesTemplates",void 0),v()(A()(u),"customVariables",void 0),v()(A()(u),"form",void 0),v()(A()(u),"dropdownOptions",void 0),v()(A()(u),"variablesStyles",void 0),v()(A()(u),"templateSaveEndpoint",void 0),v()(A()(u),"newTemplateEndpoint",void 0),v()(A()(u),"resourceManager",void 0),v()(A()(u),"api",void 0),v()(A()(u),"ui",void 0),v()(A()(u),"state",void 0),v()(A()(u),"ignoredVariables",void 0),v()(A()(u),"initializePromise",void 0),u.state=d,u.abilityService=i,u.root=document.createElement("div"),u.root.setAttribute("data-role","body-editor-container"),u.dropdown=new ho.a,u.root.appendChild(u.dropdown.getRoot()),u.addFormVariablesSection=document.createElement("div"),u.addFormVariablesSection.setAttribute("data-role","add-form-variables"),u.addFormVariablesSection.setAttribute("title",S.a.getUiTranslatedString("notifications_tooltip_add_fields","Add fields from the form and variables")),u.root.appendChild(u.addFormVariablesSection),u.textarea=document.createElement("textarea"),u.root.appendChild(u.textarea),u.tinyMCEEditorUID=e,u.formId=r,u.resourceManager=a,u.api=s,u.ui=l,u.initializePromise=c,u.currentTemplate=null,u.addEventListeners(),u.ignoredVariables=[":approvalUrl:",":rejectUrl:",":approveUrl:"],u}return l()(n,[{key:"init",value:function(){return this.initializeNativeDropdown(),this}},{key:"withParent",value:function(e){return this.parent=e,this}},{key:"withParentRoot",value:function(e){return this.parentRoot=e,this}},{key:"getParentRoot",value:function(){return this.parentRoot}},{key:"getRoot",value:function(){return this.root}},{key:"getValue",value:function(){return this.sanitizeVariablesFromBody(this.currentTemplate.body)}},{key:"getContentType",value:function(){return this.currentTemplate.contentType||O.V.HTML}},{key:"setValue",value:function(e){this.currentTemplate=e,this.textarea.value=this.getBodyWithVariablesEmphasised(this.currentTemplate.body),this.renderTemplates()}},{key:"renderTemplates",value:function(){this.updateLoadingState(!0);var e=this.templates?this.templates:[];e.length&&(this.currentTemplate||(this.currentTemplate=this.getTemplateByValue("default-notification-template"),!this.currentTemplate&&e.length>0&&(this.currentTemplate=e[0]),this.currentTemplate.hasBeenChanged=!1)),this.updateTemplateBodyInTextarea(),this.updateDropdownOptions(),this.renderTextEditor()}},{key:"updateDropdownOptions",value:function(){var e=[],t=this.templates?this.templates:[],n=this.dropdownOptions?this.dropdownOptions:[];if(n.length)for(var i=0,r=n.length;i<r;i++)e.push(n[i]);else e.push({text:vo.DRAFT_TEMPLATE,value:"save-draft-as-template"},{text:vo.MANAGE_TEMPLATES,value:"manage-templates"},{text:vo.SWITCH_TO_HTML,value:"switch-to-html"},{text:vo.SWITCH_TO_PLAIN_TEXT,value:"switch-to-plain-text"},{text:vo.SEPARATOR_LINE,value:"separator",isSeparator:!0});if(t&&t.length>0)for(var a=0,o=t.length;a<o;a++)t[a].id?e.push({text:t[a].name,value:"template-index-".concat(t[a].id)}):e.push({text:t[a].name,value:t[a].name.split(" ").join("-").toLowerCase(),isDefault:t[a].isDefault});switch(this.dropdown.setOptions(e),this.root.getAttribute("data-mode")){case"html-text":this.switchDisabledState("switch-to-html","switch-to-plain-text");break;case"plain-text":this.switchDisabledState("switch-to-plain-text","switch-to-html")}this.switchDisabledState("save-draft-as-template"),t.length>0?this.dropdown.setValue("default-template"):this.dropdown.setValue(""),this.currentTemplate.isVirtualTemplate?(this.dropdown.addOption({value:"",text:this.currentTemplate.name,hidden:!0,disabled:!0}),this.dropdown.setValue(""),this.dropdown.getRoot().setAttribute("data-placeholder-selected","1")):this.dropdown.getRoot().removeAttribute("data-placeholder-selected")}},{key:"addEventListeners",value:function(){var e=this;this.dropdown.getRoot().querySelector("select").onchange=function(){var t=e.dropdown.getValue(),n=~~t.split("-").pop();switch(e.dropdown.getRoot().removeAttribute("data-placeholder-selected"),t){case"save-draft-as-template":e.trigger("notification-save-draft-as-template"),e.manageTemplates(O.S.NEW_TEMPLATE).then((function(t){var n=t.pop();n.id||e.createNewTemplate(n).then((function(n){t.push({name:n.name,id:n.id,hasBeenChanged:!1}),e.saveUpdatedTemplates(t).then((function(t){e.removeDraftTemplateFromDropdown(),e.currentTemplate=t.templates[t.templates.length-1],e.templates=t.templates,e.updateDropdownOptions(),e.selectCurrentTemplateInDropdown(),e.trigger("notification-templates-reloaded",t.templates)}))}))})).fail((function(){e.selectCurrentTemplateInDropdown()})),e.dropdown.setValue(" ");break;case"manage-templates":e.trigger("notification-manage-templates"),e.manageTemplates(O.S.EDIT_TEMPLATES).then((function(t){e.saveUpdatedTemplates(t).then((function(t){e.currentTemplate=e.currentTemplate.id||e.currentTemplate.isDefault?t.templates[0]:e.currentTemplate,e.updateDropdownOptions(),e.selectCurrentTemplateInDropdown(),e.trigger("notification-templates-reloaded",t.templates)}))})),e.selectCurrentTemplateInDropdown();break;case"switch-to-plain-text":e.trigger("notification-switch-to-plain-text"),e.selectCurrentTemplateInDropdown(),e.switchToPlainText(),e.switchDisabledState("switch-to-plain-text","switch-to-html");break;case"switch-to-html":e.trigger("notification-switch-to-html"),e.switchToHTML(),e.selectCurrentTemplateInDropdown(),e.switchDisabledState("switch-to-html","switch-to-plain-text");break;default:e.currentTemplate=n?e.getTemplateById(n):e.getTemplateByValue(t),e.textarea.value=e.getBodyWithVariablesEmphasised(e.currentTemplate.body),e.updateTextEditorValue(),e.removeDraftTemplateFromDropdown(),e.switchDisabledState("save-draft-as-template")}},this.dropdown.getRoot().onclick=function(t){t.clientX&&t.clientY&&e.trigger("dropdown-open")},this.textarea.onchange=function(){e.triggerIfCannotUse(_o.a.CUSTOMIZE_EMAIL_TEMPLATES,"customize-email-templates-not-supported")||(e.currentTemplate.hasBeenChanged=!0,e.dropdown.getRoot().setAttribute("data-template-changed","1"),e.addTemplateTemporaryDraft(),e.trigger("notifications_customize_email_templates"))},this.textarea.oninput=this.textarea.onpaste=this.textarea.onclick=function(){e.triggerIfCannotUse(_o.a.CUSTOMIZE_EMAIL_TEMPLATES,"customize-email-templates-not-supported")||e.trigger("notifications_customize_email_templates")},this.addInteractionEventListeners(this.dropdown.getRoot()),this.addInteractionEventListeners(this.textarea),this.addFormVariablesSection.onclick=function(t){t.clientX&&t.clientY&&e.trigger("notifications_add_form_variables_change")}}},{key:"manageTemplates",value:function(e){var t=this,n=window.UI.getJQuery();return n.Deferred((function(i){t.resourceManager.get("/modules/Typescript/Form/resources/notifications/notifications-manage-templates-dialog.html").then((function(r){var a,o,s=new Nt.a(r),l={templates:t.templates?t.templates:[],context:e},c=[];if((a=t.ui.createDialog(vo.MANAGE_TEMPLATES,[{type:it.f.CANCEL,callback:function(){a.close(),i.reject(new Error(vo.ERROR_CLOSED_VIA_CANCEL))}},{type:it.f.SAVE,callback:function(){c=t.generateUpdatedTemplatesList(a.body,n),a.close(),i.resolve(c)}}],{width:"600px",height:"600px",onCloseButtonClick:function(){i.reject(new Error(vo.ERROR_CLOSED_VIA_X))}})).body.setAttribute("data-dialog-role","notifications-manage-templates"),a.body.innerHTML=s.parse(l),o=t,n(a.body).on("click","div[data-role=edit-template]",(function(){var e=n(this).parent().find("input");n(this).closest("tr").attr("data-is-default")||e.focus()})).on("click","div[data-role=delete-template]",(function(){var e=n(this).closest("tr");e.attr("data-is-default")||(e.remove(),c=o.deleteTemplate(~~this.getAttribute("data-template-id"),c))})).on("input","input[data-role=template-name]",(function(){this.setAttribute("data-has-been-changed","1")})),e===O.S.NEW_TEMPLATE){var u=n(a.body).find("input[data-new-template]");u.val(vo.NEW_TEMPLATE),u.focus()}n(a.body).css("overflow","auto"),n(a.body).perfectScrollbar({minScrollbarLength:10}),n(a.body).bindEditorScrollEvents()})).fail((function(e){i.reject(e)}))})).promise()}},{key:"selectCurrentTemplateInDropdown",value:function(){this.currentTemplate&&this.currentTemplate.isVirtualTemplate?this.updateDropdownOptions():this.currentTemplate.id?(this.dropdown.setValue("template-index-".concat(this.currentTemplate.id)),this.switchDisabledState("save-draft-as-template")):this.currentTemplate.isDefault?(this.dropdown.setValue(this.currentTemplate.name.split(" ").join("-").toLowerCase()),this.switchDisabledState("save-draft-as-template")):this.dropdown.setValue("draft-template"),this.updateTextEditorValue()}},{key:"deleteTemplate",value:function(e,t){for(var n,i=0,r=t.length;i<r;i++){if(t[i].id===e){n=i;break}}return t.splice(n,1),t}},{key:"saveUpdatedTemplates",value:function(e){var t=this.templateSaveEndpoint?this.templateSaveEndpoint:"/".concat(vo.API_VERSION,"/").concat(vo.TEMPLATE_URL,"/").concat(this.formId,"/email/names");return this.api.PUT_JSON(t,e)}},{key:"updateTemplateBodyInTextarea",value:function(){this.textarea&&(this.textarea.value=this.getBodyWithVariablesEmphasised(this.currentTemplate.body))}},{key:"createNewTemplate",value:function(e){var t="",n=this.newTemplateEndpoint?this.newTemplateEndpoint:"/".concat(vo.API_VERSION,"/").concat(vo.TEMPLATE_URL);switch(this.root.getAttribute("data-mode")){case"html-text":t=window.tinymce.get(this.getTinyMCEId()).getContent();break;case"plain-text":default:t=this.textarea.value}var i={type:"email",name:e.name,body:this.sanitizeVariablesFromBody(t)};return this.api.POST_JSON(n,i)}},{key:"generateUpdatedTemplatesList",value:function(e,t){var n=[];return t(e).find("tr td[data-role=template-name] input[data-role=template-name]").each((function(){this.value&&n.push({name:this.value,id:this.getAttribute("data-template-id")?~~this.getAttribute("data-template-id"):null,hasBeenChanged:!!this.getAttribute("data-has-been-changed")})})),n}},{key:"getTemplateById",value:function(e){for(var t=this.templates?this.templates:[],n=0,i=t.length;n<i;n++)if(t[n].id===e)return t[n];return null}},{key:"getTemplateByValue",value:function(e){for(var t=this.templates?this.templates:[],n=0,i=t.length;n<i;n++)if(t[n].name.split(" ").join("-").toLowerCase()===e)return t[n];return null}},{key:"updateTextEditorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||window.tinymce.get(this.getTinyMCEId());t?t.setContent(this.getBodyWithVariablesEmphasised(this.currentTemplate.body)):"html-text"===this.root.getAttribute("data-mode")?this.textarea.value=this.getBodyWithVariablesEmphasised(this.currentTemplate.body):this.textarea.value=this.currentTemplate.body,this.currentTemplate.id&&(this.dropdown.getRoot().removeAttribute("data-template-changed"),this.removeDraftTemplateFromDropdown())}},{key:"addTemplateTemporaryDraft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.dropdown.getRoot().querySelector('option[value="draft-template"]'),n=e||(window.tinymce?window.tinymce.get(this.getTinyMCEId()):null),i=!!this.currentTemplate&&!!this.currentTemplate.isVirtualTemplate,r=this.currentTemplate.name.indexOf("(edited)")>-1||this.currentTemplate.isVirtualTemplate||!this.currentTemplate.hasBeenChanged||this.currentTemplate.name.indexOf(S.a.getUiTranslatedString("edt_notifications_load_template","Load template"))>-1?this.currentTemplate.name:"".concat(this.currentTemplate.name," (edited)");if(this.currentTemplate={name:r,body:this.sanitizeVariablesFromBody(n?n.getContent():this.textarea.value),type:"email",contentType:this.currentTemplate.contentType,isVirtualTemplate:this.currentTemplate.isVirtualTemplate},this.switchDisabledState(null,"save-draft-as-template"),!i){if(t)t.textContent=this.currentTemplate.name,this.currentTemplate.name.indexOf(S.a.getUiTranslatedString("edt_notifications_load_template","Load template"))>-1?t.setAttribute("data-virtual-template","1"):t.removeAttribute("data-virtual-template");else if(r!==S.a.getUiTranslatedString("edt_notifications_load_template","Load template")){var a=this.dropdown.getRoot().querySelector('option[value="separator"]');this.dropdown.addOption({text:this.currentTemplate.name,value:"draft-template"},a)}this.dropdown.setValueByText(this.currentTemplate.name)}}},{key:"removeDraftTemplateFromDropdown",value:function(){if(this.dropdown.getRoot()){var e=this.dropdown.getRoot().querySelector('option[value="draft-template"]');e&&this.dropdown.removeOption(e.index)}}},{key:"switchToPlainText",value:function(){var e=window.tinymce?window.tinymce.get(this.getTinyMCEId()):null;e&&e.remove(),this.root.setAttribute("data-mode","plain-text"),this.textarea.value=this.sanitizeVariablesFromBody(this.currentTemplate.body),this.currentTemplate.contentType=O.V.PLAIN_TEXT}},{key:"switchToHTML",value:function(){var e=this;this.initializePromise.then((function(){return e.renderTinyMCE()})),this.root.setAttribute("data-mode","html-text"),this.updateTemplateBodyInTextarea(),this.currentTemplate.contentType=O.V.HTML}},{key:"renderTinyMCE",value:function(){var e=this,t=window.tinymce?window.tinymce.get(this.getTinyMCEId()):null;t&&t.remove(),this.updateLoadingState(!0);var n=this.variablesStyles;this.root.setAttribute("data-mode","html-text"),this.textarea.setAttribute("id",this.getTinyMCEId()),window.tinymce.init({selector:"#".concat(this.getTinyMCEId()),content_style:'span[data-variable-value] { font-style: italic; background-color: #cccccc; padding: 1px 4px 2px 4px; color: #4c4c4c; border-radius: 3px}\n                    span[data-variable-value][data-is-deleted-field="true"]{color: rgba(76, 76, 76, 0.5);}\n                    span[data-variable-value]:hover { background-color: #fa4848; color: #ffffff; text-decoration: line-through; } '.concat(n||""),branding:!1,menubar:!1,resize:!1,height:"250",width:String(~~(.9*document.body.getBoundingClientRect().width)-200),plugins:["textcolor","preview","link","image","emoticons","lists","hr","table","code","directionality","insertdatetime","autoresize","noneditable"],noneditable_noneditable_class:"mceNonEditable",toolbar:"fontselect fontsizeselect | styleselect | bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | insert table code | undo redo ",fontsize_formats:"8pt 10pt 12pt 14pt 18pt 24pt 36pt",font_formats:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Open Sans=open sans;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",convert_urls:!1,image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_browser_callback:!0,entity_encoding:"raw",autoresize_bottom_margin:10,file_picker_callback:function(e){bo.a.prepareFileForUplod(e)},images_upload_handler:function(t,n,i){bo.a.sendDataForUpload(i,n,t,e.formId)},setup:function(t){var n;e.updateTextEditorValue(),e.addTemplateTemporaryDraft(),(n=$(e.root).find("#".concat(e.getTinyMCEId(),"_ifr")))&&n.css("min-height","150px"),Object(wr.a)((function(){e.disableNotificationToolbarOnUnpaidPlan(),e.trigger("body-component-tinymce-loaded"),e.updateLoadingState(!1)}),500),t.on("Change",(function(){e.currentTemplate.hasBeenChanged=!0,e.currentTemplate.isVirtualTemplate=!1,e.dropdown.getRoot().setAttribute("data-template-changed","1"),e.addTemplateTemporaryDraft()})),t.on("click",(function(t){var n=t.target.nodeName&&t.target.getAttribute("data-variable-value")?t.target:void 0;if(n){if(!e.abilityService.has(_o.a.CUSTOMIZE_EMAIL_TEMPLATES))return;n.parentNode.removeChild(n)}e.trigger("notifications-interaction-triggered")})),t.on("Focus",(function(){e.triggerIfCannotUse(_o.a.CUSTOMIZE_EMAIL_TEMPLATES,"customize-email-templates-not-supported")}))}})}},{key:"disableNotificationToolbarOnUnpaidPlan",value:function(){if(!this.abilityService.has(_o.a.CUSTOMIZE_EMAIL_TEMPLATES)){var e=this.root.querySelectorAll(".mce-toolbar-grp.mce-container.mce-panel");Object(H.a)(e,(function(e){e.classList.contains("data-pointer-events-none")||e.classList.add("data-pointer-events-none")})),document.body.classList.contains("data-pointer-events-none")||document.body.classList.add("data-pointer-events-none")}}},{key:"switchDisabledState",value:function(e,t){e&&this.dropdown.getRoot().querySelector("select option[value=".concat(e,"]")).setAttribute("disabled","disabled"),t&&this.dropdown.getRoot().querySelector("select option[value=".concat(t,"]")).removeAttribute("disabled")}},{key:"getTinyMCEId",value:function(){return"tinymce_".concat(this.tinyMCEEditorUID,"-").concat(this.parent)}},{key:"resetNativeDropdown",value:function(){var e=this.addFormVariablesSection.querySelector("select");e&&this.addFormVariablesSection.removeChild(e),this.initializeNativeDropdown()}},{key:"initializeNativeDropdown",value:function(){var e=this,t=document.createElement("select");this.addFormVariablesSection.appendChild(t);for(var n="undefined"!==typeof this.form?this.form.flatten():[],i=this.customVariables?this.customVariables:n.length?S.a.generateFormVariables(n,void 0,void 0,!0):[],r=0,a=i.length;r<a;r++){var o=document.createElement("option"),s=i[r].text||i[r].value;this.isHipaaProtected(i[r].id)&&(s="".concat(s," ").concat(yo.a.CONTROL_HIPAA_POSTFIX)),o.text=s,o.value=i[r].value,o.disabled=this.isHipaaProtected(i[r].id),t.add(o)}var l=document.createElement("span");l.className="i123-add",this.addFormVariablesSection.appendChild(l),t.value=null,t.selectedIndex=-1,setTimeout((function(){t.value=null,t.selectedIndex=-1}),10);var c=this.variablesTemplates?this.variablesTemplates:void 0;t.addEventListener("change",(function(){if(!e.triggerIfCannotUse(_o.a.CUSTOMIZE_EMAIL_TEMPLATES,"customize-email-templates-not-supported")){e.trigger("notifications_add_form_variable");var n=t.value,i=window.tinymce;if(null!=i.activeEditor){if(t.value==O.ub.SUBMISSION_SUMMARY){var r=t.value.replace(/:/g,"");c&&c[r]&&(n=e.getBodyWithVariablesEmphasised(c[r]))}else n='<span contenteditable="false" data-variable-value="'.concat(t.value,'">').concat(t.options[t.selectedIndex].textContent,"</span>&nbsp;");i.activeEditor.execCommand("mceInsertContent",!1,n)}else{var a=new Co.a(e.textarea),o=e.textarea.value,s=a.position()||e.textarea.value.length;e.textarea.value="".concat(o.slice(0,s)).concat(n," ").concat(o.slice(s+1,o.length)),e.textarea.selectionStart=s+n.length}}}),!0),t.onmouseover=function(){t.value=null}}},{key:"triggerIfCannotUse",value:function(e,t){return!this.abilityService.can(e)&&(this.trigger(t),!0)}},{key:"updateLoadingState",value:function(e){e?this.getParentRoot()&&"editor"===this.parent?this.getParentRoot().setAttribute("data-loading-body",""):this.getParentRoot()&&"dialog"===this.parent&&this.getParentRoot().setAttribute("data-loading-body-dialog","1"):this.getParentRoot()&&"editor"===this.parent?this.getParentRoot().removeAttribute("data-loading-body"):this.getParentRoot()&&"dialog"===this.parent&&this.getParentRoot().setAttribute("data-loading-body-dialog","0")}},{key:"getBodyWithVariablesEmphasised",value:function(e){var t=this,n="undefined"!==typeof this.form?this.form.flatten():[],i=this.customVariables?this.customVariables:n.length?S.a.generateFormVariables(n,void 0,void 0,!0):[],r=this.variablesTemplates?this.variablesTemplates:void 0,a=e,o=[];if(Object(H.a)(i,(function(e){var n=e.text;e.id&&t.isHipaaProtected(e.id)&&(n=yo.a.PROTECTED_FIELD),o.push({value:e.value,caption:n,type:e.type,isDeleted:!1})})),n.length){var s=[],l=S.a.getVariablesFromText(e,this.form.flatten(),!0).filter((function(e){return!(!e.isDeleted||s.includes(e.value)||t.ignoredVariables.includes(e.value))&&(s.push(e.value),e.isDeleted)}));o=o.concat(l)}return Object(H.a)(o,(function(n){var i=new RegExp("".concat(n.value,"(?=[^:])"),"g");if(i.exec(e))if(n.value!==O.ub.SUBMISSION_SUMMARY)a=a.replace(i,'<span contenteditable="false" data-variable-value="'.concat(n.value,'" data-is-deleted-field="').concat(n.isDeleted,'">').concat(n.caption,"</span>"));else{var o=n.value.replace(/:/g,"");if(r&&r[o]){var s=t.getBodyWithVariablesEmphasised(r[o]);a=a.replace(i,s)}}})),a}},{key:"sanitizeVariablesFromBody",value:function(e){var t=this.variablesTemplates?this.variablesTemplates:void 0,n=document.createElement("div");n.innerHTML=e;var i=n.querySelectorAll("span[data-variable-value]"),r=n.querySelectorAll("table[data-variable-name]");return Object(H.a)(i,(function(e){var t=e,n=t.getAttribute("data-variable-value"),i=document.createTextNode(n);t.parentNode.insertBefore(i,t),t.parentNode.removeChild(t)})),Object(H.a)(r,(function(e){var n=e,i=n.getAttribute("data-variable-name"),r=":".concat(i,":"),a=document.createTextNode(r);r===O.ub.SUBMISSION_SUMMARY&&t[i]&&(t[i].replace(/\s/gm,"")===n.outerHTML.replace(/&nbsp;/gm," ").replace(/&amp;/gm,"&").replace(/\s/gm,"")&&(n.parentNode.insertBefore(a,n),n.parentNode.removeChild(n)))})),n.innerHTML}},{key:"renderTextEditor",value:function(){var e=this;if(this.currentTemplate&&this.currentTemplate.isVirtualTemplate&&this.currentTemplate.contentType)switch(this.currentTemplate.contentType){case O.V.PLAIN_TEXT:this.switchToPlainText(),this.switchDisabledState("switch-to-plain-text","switch-to-html"),this.updateLoadingState(!1);break;case O.V.HTML:this.initializePromise.then((function(){return e.renderTinyMCE()})),this.switchDisabledState("switch-to-html","switch-to-plain-text")}else this.initializePromise.then((function(){return e.renderTinyMCE()})),this.switchDisabledState("switch-to-html","switch-to-plain-text")}},{key:"setDefaultValue",value:function(){var e=this.templates;e&&(this.currentTemplate=this.getTemplateByValue("default-notification-template"),!this.currentTemplate&&e.length>0&&(this.currentTemplate=e[0]),this.currentTemplate.hasBeenChanged=!1),this.renderTemplates()}},{key:"addInteractionEventListeners",value:function(e){var t=this;e.onmousedown=e.onkeydown=function(){t.trigger("notifications-interaction-triggered")}}},{key:"withTemplates",value:function(e){return this.templates=e,this}},{key:"withVariablesTemplates",value:function(e){return this.variablesTemplates=e,this}},{key:"updateVariablesTemplates",value:function(e){this.variablesTemplates=e,this.renderTemplates()}},{key:"withCustomVariables",value:function(e){return this.customVariables=e,this}},{key:"withVariablesStyles",value:function(e){return this.variablesStyles=e,this}},{key:"withTemplateSaveEndpoint",value:function(e){return this.templateSaveEndpoint=e,this}},{key:"withNewTemplateEndpoint",value:function(e){return this.newTemplateEndpoint=e,this}},{key:"withDropdownOptions",value:function(e){return this.dropdownOptions=e,this}},{key:"withForm",value:function(e){return this.form=e,this}},{key:"updateState",value:function(e){this.state=e,this.resetNativeDropdown()}},{key:"isHipaaProtected",value:function(e){if(!e)return!1;var t=Object(Io.a)(this.state.form.controls,(function(t){return t.id===e}));return t&&t.isHipaa&&this.state.form.settings.isHipaa}}]),n}(ir.a),Lo=function(){function e(t){o()(this,e),v()(this,"input",void 0),v()(this,"checkbox",void 0),v()(this,"label",void 0),v()(this,"element",void 0),this.render(t)}return l()(e,[{key:"render",value:function(t){e.instanceID++,this.input=document.createElement("input"),this.input.type="checkbox",this.input.id="".concat(t.id,"-").concat(e.instanceID),this.checkbox=document.createElement("label"),this.checkbox.classList.add("checkbox-skin"),this.checkbox.setAttribute("for","".concat(t.id,"-").concat(e.instanceID)),this.label=document.createElement("label"),this.label.classList.add("label"),this.label.setAttribute("for","".concat(t.id,"-").concat(e.instanceID)),this.label.textContent=t.label,this.element=document.createElement("div"),this.element.classList.add("checkbox-toggle"),this.element.appendChild(this.input),this.element.appendChild(this.checkbox),this.element.appendChild(this.label),t.onChange&&(this.input.onchange=t.onChange),this.setState({label:t.label,isChecked:t.isChecked})}},{key:"setState",value:function(e){this.input.checked=e.isChecked,this.label.textContent=e.label?e.label:this.label.textContent,this.input.checked?this.checkbox.classList.contains("isChecked")||this.checkbox.classList.add("isChecked"):this.checkbox.classList.remove("isChecked")}},{key:"getElementNode",value:function(){return this.element}},{key:"getValue",value:function(){return this.input.checked}}]),e}();function Do(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function wo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Do(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Do(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}v()(Lo,"instanceID",0),function(e){e.COVER="cover",e.CENTER="center",e.TOUCH="touch"}(Po||(Po={})),function(e){e.ON="on",e.OFF="off"}(No||(No={})),function(e){e.ON_SELECT="onSelect",e.ON_START="onStart",e.ON_MOVE="onMove",e.ON_STOP="onStop"}(Ao||(Ao={}));var ko=function(){function e(){o()(this,e)}return l()(e,null,[{key:"addEventListener",value:function(e,t,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=0,a=e.length;r<a;r++)for(var o=0,s=t.length;o<s;o++)e[r].addEventListener(t[o],n,wo({capture:!1},i))}},{key:"removeEventListener",value:function(e,t,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=0,a=e.length;r<a;r++)for(var o=0,s=t.length;o<s;o++)e[r].removeEventListener(t[o],n,wo({capture:!1},i))}},{key:"eventListener",value:function(t,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};switch(t){case No.ON:e.addEventListener(n,i,r,a);break;case No.OFF:e.removeEventListener(n,i,r,a);break;default:console.warn("eventListener type: '".concat(t,"' does not exist"))}}},{key:"css",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e&&e.style;if(i)if("object"===Qt()(t))for(var r in t)i[r]=this.unitify(t[r]);else{if(null==n){var a=document.defaultView;return a&&a.getComputedStyle?n=a.getComputedStyle(e,null):e.currentStyle&&(n=e.currentStyle),null==t?n:n[t]}i[t]=this.unitify(n)}}},{key:"intersects",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Po.TOUCH;if(n===Po.CENTER){var i=t.left+t.width/2,r=t.top+t.height/2;return i>=e.left&&i<=e.right&&r>=e.top&&r<=e.bottom}return n===Po.COVER?t.left>=e.left&&t.top>=e.top&&t.right<=e.right&&t.bottom<=e.bottom:n===Po.TOUCH?e.right>=t.left&&e.left<=t.right&&e.bottom>=t.top&&e.top<=t.bottom:void 0}},{key:"selectAll",value:function(e){var t=[];if(e)for(var n=0,i=e.length;n<i;n++){var r=e[n];t.push.apply(t,hi()([].slice.call(document.querySelectorAll(r))))}return t}},{key:"eventPath",value:function(e){var t=e.path||e.composedPath&&e.composedPath();if(t)return t;var n=e.target.parentElement;for(t=[e.target,n];n=n.parentElement;)t.push(n);return t.push(document,window),t}},{key:"removeElement",value:function(e,t){var n=e.indexOf(t);~n&&e.splice(n,1)}},{key:"simplifyEvent",value:function(e){var t=e.touches&&e.touches[0]||e;return{tap:t,x:t.clientX,y:t.clientY,target:t.target}}}]),e}();v()(ko,"unitify",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";return"number"===typeof e?e+t:"".concat(e)}));var Mo=function(){function e(t){var n=this;o()(this,e),v()(this,"enableAtInit",!0),v()(this,"classSelection","selection-area"),v()(this,"dataAttributeSelection",["data-role","select-area"]),v()(this,"startThreshold",10),v()(this,"disableTouch",!0),v()(this,"mode",Po.TOUCH),v()(this,"canSingleClick",!0),v()(this,"selectables",[]),v()(this,"boundaries",["html"]),v()(this,"boundariesExcluded",[]),v()(this,"includeSelectableChildren",!1),v()(this,"canStartSelectionOnSelectable",!1),v()(this,"selectionAreaContainer",void 0),v()(this,"selectionAreaQuery","body"),v()(this,"scrollSpeedDivider",10),v()(this,"validateStart",(function(){return!0})),v()(this,"selectionFilter",(function(){return!0})),v()(this,"onStart",void 0),v()(this,"onSelect",void 0),v()(this,"onMove",void 0),v()(this,"onStop",void 0),v()(this,"areaElement",void 0),v()(this,"clippingElement",void 0),v()(this,"selectedStore",void 0),v()(this,"scrollAvailable",void 0),v()(this,"scrollSpeed",void 0),v()(this,"areaX1",void 0),v()(this,"areaY1",void 0),v()(this,"areaX2",void 0),v()(this,"areaY2",void 0),v()(this,"targetContainer",void 0),v()(this,"targetBoundary",void 0),v()(this,"touchedElements",void 0),v()(this,"changedElements",void 0),v()(this,"singleClick",void 0),v()(this,"singleClickStartElement",void 0),v()(this,"boundariesElements",void 0),v()(this,"boundariesExcludedElements",void 0),v()(this,"selectablesElements",void 0),v()(this,"preventDefault",(function(e){return e.preventDefault()})),v()(this,"onTapStart",(function(e){var t=ko.simplifyEvent(e),i=t.x,r=t.y,a=t.target;if(n.resolveSelectables(),!n.isTargetChildOfSelectable(a)){var o=a.getBoundingClientRect();if(n.validateStart(e)){var s=ko.eventPath(e);n.boundariesElements=ko.selectAll(n.boundaries),n.boundariesElements.filter((function(e){return-1!==s.indexOf(e)}))[0]&&(n.boundariesExcludedElements=ko.selectAll(n.boundariesExcluded),n.boundariesExcludedElements.filter((function(e){return-1!==s.indexOf(e)}))[0]||(n.areaX1=i,n.areaY1=r,n.areaX2=0,n.areaY2=0,n.singleClick=!0,n.singleClickStartElement=a,n.targetContainer=n.boundariesElements.filter((function(e){return ko.intersects(e.getBoundingClientRect(),o)}))[0],n.targetBoundary=n.targetContainer.getBoundingClientRect(),n.touchedElements=[],n.changedElements={added:[],removed:[]},n.isTargetOneOfSelectable(a)||Math.round(n.targetContainer.scrollHeight)===Math.round(n.targetBoundary.height)&&Math.round(n.targetContainer.scrollWidth)===Math.round(n.targetBoundary.width)?(n.scrollAvailable=!1,ko.css(n.clippingElement,{top:0,left:0,width:"100%",height:"100%"}),ko.css(n.areaElement,{"margin-top":0,"margin-left":0})):(n.scrollAvailable=!0,ko.addEventListener([n.selectionAreaContainer],["wheel"],n.manualScroll),n.selectablesElements=n.selectablesElements.filter((function(e){return n.targetContainer.contains(e)})),ko.css(n.clippingElement,{top:n.targetBoundary.top,left:n.targetBoundary.left,width:n.targetBoundary.width,height:n.targetBoundary.height}),ko.css(n.areaElement,{"margin-top":-n.targetBoundary.top,"margin-left":-n.targetBoundary.left})),n.areaElement.classList.add(n.classSelection),n.areaElement.setAttribute(n.dataAttributeSelection[0],n.dataAttributeSelection[1]),ko.addEventListener([document],["selectstart"],n.preventDefault),ko.addEventListener([document],["mousemove"],n.delayedTapMove),n.disableTouch||ko.addEventListener([document],["touchmove"],n.delayedTapMove,{passive:!1}),ko.addEventListener([document],["mouseup"],n.onTapStop),n.disableTouch||ko.addEventListener([document],["touchcancel","touchend"],n.onTapStop),e.preventDefault()))}}})),v()(this,"delayedTapMove",(function(e){var t=ko.simplifyEvent(e),i=t.x,r=t.y,a=t.target;if(n.isTargetOneOfSelectable(a))return ko.removeEventListener([document],["mousemove"],n.delayedTapMove),void(n.disableTouch||ko.removeEventListener([document],["touchmove"],n.delayedTapMove));Math.abs(i+r-(n.areaX1+n.areaY1))>=n.startThreshold&&(ko.removeEventListener([document],["mousemove"],n.delayedTapMove),n.disableTouch||ko.removeEventListener([document],["touchmove"],n.delayedTapMove),ko.addEventListener([document],["mousemove"],n.onTapMove),n.disableTouch||ko.addEventListener([document],["touchmove"],n.onTapMove,{passive:!1}),ko.css(n.areaElement,"display","block"),n.onTapMove(e),n.dispatchEvent(Ao.ON_START,e),n.singleClick=!1,n.singleClickStartElement=null)})),v()(this,"onTapMove",(function(e){var t=ko.simplifyEvent(e),i=t.x,r=t.y;if(n.areaX2=i,n.areaY2=r,!n.scrollAvailable||null===n.scrollSpeed.y&&null===n.scrollSpeed.x)n.redrawArea(),n.updatedTouchingElements(),n.dispatchEvent(Ao.ON_MOVE,e);else{requestAnimationFrame((function t(){if(null!==n.scrollSpeed.y||null!==n.scrollSpeed.x){var i=n.targetContainer,r=i.scrollTop,a=i.scrollLeft;null!==n.scrollSpeed.y&&(n.targetContainer.scrollTop+=Math.ceil(n.scrollSpeed.y/n.scrollSpeedDivider),n.areaY1-=n.targetContainer.scrollTop-r),null!==n.scrollSpeed.x&&(n.targetContainer.scrollLeft+=Math.ceil(n.scrollSpeed.x/n.scrollSpeedDivider),n.areaX1-=n.targetContainer.scrollLeft-a),n.redrawArea(),n.updatedTouchingElements(),n.dispatchEvent(Ao.ON_MOVE,e),requestAnimationFrame(t)}}))}})),v()(this,"manualScroll",(function(e){n.scrollSpeed.y+=n.scrollSpeedDivider*(-1*e.wheelDeltaY),n.scrollSpeed.x+=n.scrollSpeedDivider*(-1*e.wheelDeltaX),n.onTapMove(e),e.preventDefault()})),v()(this,"onTapStop",(function(e,t){ko.removeEventListener([document],["mousemove"],n.delayedTapMove),n.disableTouch||ko.removeEventListener([document],["touchmove"],n.delayedTapMove),ko.removeEventListener([document],["mousemove"],n.onTapMove),n.disableTouch||ko.removeEventListener([document],["touchmove"],n.onTapMove),ko.removeEventListener([document],["mouseup"],n.onTapStop),n.disableTouch||ko.removeEventListener([document],["touchcancel","touchend"],n.onTapStop),n.singleClick&&n.canSingleClick&&e.target==n.singleClickStartElement?n.onSingleTap(e):n.singleClick||t||e.target!=n.singleClickStartElement||(n.updatedTouchingElements(),n.dispatchEvent(Ao.ON_STOP,e)),n.scrollSpeed={x:null,y:null},ko.removeEventListener([n.selectionAreaContainer],["wheel"],n.manualScroll),ko.removeEventListener([document],["selectstart"],n.preventDefault),ko.css(n.areaElement,"display","none")})),void 0!==t.enableAtInit&&(this.enableAtInit=t.enableAtInit),void 0!==t.class&&(this.classSelection=t.class),void 0!==t.dataAttribute&&(this.dataAttributeSelection=t.dataAttribute),void 0!==t.startThreshold&&(this.startThreshold=t.startThreshold),void 0!==t.disableTouch&&(this.disableTouch=t.disableTouch),void 0!==t.mode&&(this.mode=t.mode),void 0!==t.canSingleClick&&(this.canSingleClick=t.canSingleClick),void 0!==t.selectables&&(this.selectables=t.selectables),void 0!==t.boundaries&&(this.boundaries=t.boundaries),void 0!==t.boundariesExcluded&&(this.boundariesExcluded=t.boundariesExcluded),void 0!==t.includeSelectableChildren&&(this.includeSelectableChildren=t.includeSelectableChildren),void 0!==t.canStartSelectionOnSelectable&&(this.canStartSelectionOnSelectable=t.canStartSelectionOnSelectable),void 0!==t.selectionAreaContainer&&(this.selectionAreaContainer=t.selectionAreaContainer),void 0!==t.selectionAreaQuery&&(this.selectionAreaQuery=t.selectionAreaQuery),void 0!==t.scrollSpeedDivider&&(this.scrollSpeedDivider=t.scrollSpeedDivider),void 0!==t.validateStart&&(this.validateStart=t.validateStart),void 0!==t.onStart&&(this.onStart=t.onStart),void 0!==t.onSelect&&(this.onSelect=t.onSelect),void 0!==t.onMove&&(this.onMove=t.onMove),void 0!==t.onStop&&(this.onStop=t.onStop),void 0!==t.selectionFilter&&(this.selectionFilter=t.selectionFilter),this.selectedStore=[],this.areaElement=document.createElement("div"),this.clippingElement=document.createElement("div"),this.scrollAvailable=!0,this.scrollSpeed={x:null,y:null},this.selectionAreaContainer||(this.selectionAreaContainer=document.querySelector(this.selectionAreaQuery)),this.init()}return l()(e,[{key:"init",value:function(){this.clippingElement.appendChild(this.areaElement),this.selectionAreaContainer.appendChild(this.clippingElement),ko.css(this.areaElement,{top:0,left:0,position:"fixed"}),ko.css(this.clippingElement,{overflow:"hidden",position:"fixed",transform:"translate3d(0, 0, 0)","pointer-events":"none","z-index":"3"}),this.enableAtInit&&this.enable()}},{key:"bindStartEvents",value:function(e){ko.eventListener(e,[document],["mousedown"],this.onTapStart),this.disableTouch||ko.eventListener(e,[document],["touchstart"],this.onTapStart,{passive:!1})}},{key:"onSingleTap",value:function(e){for(var t=ko.simplifyEvent(e).target;-1===this.selectablesElements.indexOf(t);){if(!t.parentElement)return void this.dispatchEvent(Ao.ON_SELECT,e,null);t=t.parentElement}this.touchedElements.push(t),this.dispatchEvent(Ao.ON_SELECT,e,t)}},{key:"redrawArea",value:function(){var e=this.targetContainer,t=e.scrollTop,n=e.scrollHeight,i=e.clientHeight,r=e.scrollLeft,a=e.scrollWidth,o=e.clientWidth,s=this.areaX2,l=this.areaY2;s<this.targetBoundary.left?(this.scrollSpeed.x=r?-Math.abs(this.targetBoundary.left-s):null,s=this.targetBoundary.left):s>this.targetBoundary.left+this.targetBoundary.width?(this.scrollSpeed.x=a-r-o?Math.abs(this.targetBoundary.left+this.targetBoundary.width-s):null,s=this.targetBoundary.left+this.targetBoundary.width):this.scrollSpeed.x=null,l<this.targetBoundary.top?(this.scrollSpeed.y=t?-Math.abs(this.targetBoundary.top-l):null,l=this.targetBoundary.top):l>this.targetBoundary.top+this.targetBoundary.height?(this.scrollSpeed.y=n-t-i?Math.abs(this.targetBoundary.top+this.targetBoundary.height-l):null,l=this.targetBoundary.top+this.targetBoundary.height):this.scrollSpeed.y=null;var c=Math.min(this.areaX1,s),u=Math.min(this.areaY1,l),d=Math.max(this.areaX1,s),p=Math.max(this.areaY1,l);ko.css(this.areaElement,{top:u,left:c,width:d-c,height:p-u})}},{key:"updatedTouchingElements",value:function(){for(var e=[],t={added:[],removed:[]},n=this.areaElement.getBoundingClientRect(),i=0,r=this.selectablesElements.length;i<r;i++){var a=this.selectablesElements[i];ko.intersects(n,a.getBoundingClientRect(),this.mode)&&this.selectionFilter(a)&&(-1===this.touchedElements.indexOf(a)&&t.added.push(a),e.push(a))}for(var o=0,s=this.touchedElements.length;o<s;o++)-1===e.indexOf(this.touchedElements[o])&&t.removed.push(this.touchedElements[o]);this.touchedElements=e,this.changedElements=t}},{key:"dispatchEvent",value:function(e,t,n){var i={selection:this,areaElement:this.areaElement,selectedElements:this.touchedElements.concat(this.selectedStore),changedElements:this.changedElements,eventName:e,originalEvent:t,selectedElement:n};switch(e){case Ao.ON_SELECT:this.onSelect&&this.onSelect(i);break;case Ao.ON_START:this.onStart&&this.onStart(i);break;case Ao.ON_MOVE:this.onMove&&this.onMove(i);break;case Ao.ON_STOP:this.onStop&&this.onStop(i);break;default:console.warn("eventName: '".concat(e,"' does not exist"))}}},{key:"isTargetChildOfSelectable",value:function(e){if(this.includeSelectableChildren)return!1;for(var t=0,n=this.selectablesElements.length;t<n;t++){var i=this.selectablesElements[t];if(i.contains(e)&&i!=e)return!0}return!1}},{key:"isTargetOneOfSelectable",value:function(e){if(this.canStartSelectionOnSelectable)return!1;for(var t=0,n=this.selectablesElements.length;t<n;t++){var i=this.selectablesElements[t];if(i==e||i.contains(e))return!0}return!1}},{key:"resolveSelectables",value:function(){this.selectablesElements=ko.selectAll(this.selectables)}},{key:"keepSelection",value:function(){for(var e=0,t=this.touchedElements.length;e<t;e++)-1===this.selectedStore.indexOf(this.touchedElements[e])&&this.selectedStore.push(this.touchedElements[e])}},{key:"clearSelection",value:function(){this.selectedStore=[]}},{key:"removeFromSelection",value:function(e){ko.removeElement(this.selectedStore,e),ko.removeElement(this.touchedElements,e)}},{key:"getSelection",value:function(){return this.selectedStore}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.onTapStop(null,!e)}},{key:"disable",value:function(){this.bindStartEvents(No.OFF)}},{key:"destroy",value:function(){this.disable(),this.selectionAreaContainer.contains(this.clippingElement)&&this.selectionAreaContainer.removeChild(this.clippingElement)}},{key:"enable",value:function(){this.bindStartEvents(No.ON)}}]),e}(),xo=n(177);function Uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uo(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Yo=function(e){u()(n,e);var t=Bo(n);function n(e,i){var r;return o()(this,n),r=t.call(this),v()(A()(r),"_initializePromise",void 0),v()(A()(r),"resourceManager",void 0),v()(A()(r),"formDocument",void 0),v()(A()(r),"i18n",void 0),v()(A()(r),"addRuleButtonComponent",void 0),v()(A()(r),"addRuleMenuPanelBtn",void 0),v()(A()(r),"divRulesHolder",void 0),v()(A()(r),"divEmptyState",void 0),v()(A()(r),"cloneDivRuleContainer",void 0),v()(A()(r),"divRulesFooter",void 0),v()(A()(r),"divFooterSelected",void 0),v()(A()(r),"isEmptyState",void 0),v()(A()(r),"isAccordingToRules",void 0),v()(A()(r),"ruleContainerList",void 0),v()(A()(r),"nrOfRules",void 0),v()(A()(r),"nrOfSelectedRules",void 0),v()(A()(r),"ruleContainerConfiguration",void 0),v()(A()(r),"selectionRules",void 0),v()(A()(r),"abilityService",void 0),v()(A()(r),"metricService",void 0),v()(A()(r),"currentModel",void 0),r.abilityService=e,r.getRootNode().setAttribute("data-role","email-rules-overlay"),r.getRootNode().setAttribute("data-loading-body-dialog","0"),r.getRootNode().classList.add("ruleContainerWrap"),r.nrOfRules=0,r.nrOfSelectedRules=0,r.metricService=Ci.a.getInstance(),r.currentModel=i,r}return l()(n,[{key:"getIsAccordingToRules",value:function(){return this.isAccordingToRules}},{key:"setIsAccordingToRules",value:function(e){this.isAccordingToRules=e}},{key:"setAddRuleMenuPanelBtn",value:function(e){this.addRuleMenuPanelBtn=e}},{key:"initializePromise",get:function(){return this._initializePromise}},{key:"getNrOfRules",get:function(){return this.nrOfRules}}]),l()(n,[{key:"setCurrentModel",value:function(e){this.currentModel=e}},{key:"setRuleRecipientConfiguration",value:function(e){var t=Fo({},this.ruleContainerConfiguration);this.ruleContainerConfiguration=Fo({},this.ruleContainerConfiguration,{},t),this.ruleContainerConfiguration.ruleRecipientConfiguration=Fo({},t.ruleRecipientConfiguration,{},e)}},{key:"addRuleConditionConfiguration",value:function(e){this.ruleContainerConfiguration.ruleConditionConfigurations||(this.ruleContainerConfiguration.ruleConditionConfigurations=[]),this.ruleContainerConfiguration.ruleConditionConfigurations.push(e)}},{key:"initialize",value:function(){var e=this;y()(_()(n.prototype),"initialize",this).call(this),this.initialized||(this.initialized=!0,this.initVars(),this._initializePromise=window.$.Deferred((function(t){e.resourceManager.get("/modules/Typescript/Form/resources/notifications/notifications-email-rules-panel.html").then((function(n){e.getRootNode().innerHTML=n,e.divRulesHolder=e.getRootNode().querySelector('div[data-role="rules-email-overlay"]'),e.divEmptyState=e.divRulesHolder.querySelector('div[data-role="empty-rules-container"]'),e.cloneDivRuleContainer=e.divRulesHolder.querySelector('div[data-role="rule-container"]'),e.divRulesFooter=e.divRulesHolder.querySelector('div[data-role="rule-footer"]'),e.divFooterSelected=e.divRulesFooter.querySelector('div[data-role="footer-selected"]'),e.divRulesHolder.querySelector('div[data-role="placeholder"][data-control-name="add-rule"]').appendChild(e.addRuleButtonComponent.getRootNode()),e.divRulesHolder.removeChild(e.cloneDivRuleContainer),e.initEventListeners(),e.selectionRules=new Mo({selectables:['div[data-role="rule-content"]'],boundaries:[".ruleContainerWrap"],selectionAreaContainer:e.getRootNode(),disableTouch:!0}),e.selectionRules.validateStart=e.validateStartSelection.bind(e),e.selectionRules.onStart=e.onStartSelection.bind(e),e.selectionRules.onSelect=e.onSelectSelection.bind(e),e.selectionRules.onMove=e.onMoveSelection.bind(e),e.selectionRules.onStop=e.onStopSelection.bind(e),t.resolve()}))})))}},{key:"initVars",value:function(){var e=this;this.resourceManager=this.getDependency("resourceManager"),this.formDocument=this.getDependency("document"),this.i18n=this.getDependency("i18n"),this.ruleContainerList=[],this.addRuleButtonComponent=(new cr).withLabel("Add rule","rules_add").on("click",(function(){e.addRule()})),this.addRuleButtonComponent.getRootNode().setAttribute("data-name","add-rule"),this.isEmptyState=!0,this.isAccordingToRules=!1}},{key:"initEventListeners",value:function(){var e=this;this.divFooterSelected.onclick=function(t){if(t.stopPropagation(),e.nrOfSelectedRules>1&&e.nrOfSelectedRules<e.nrOfRules){var n=e.getRootNode().scrollTop;e.getRootNode().setAttribute("data-loading-body-dialog","1"),setTimeout((function(){e.selectAllRules(),e.getRootNode().setAttribute("data-loading-body-dialog","0"),e.getRootNode().scrollTop=n,e.updateOptionType()}))}else{var i=e.getRootNode().scrollTop;e.getRootNode().setAttribute("data-loading-body-dialog","1"),setTimeout((function(){e.deselectAllRules(),e.getRootNode().setAttribute("data-loading-body-dialog","0"),e.getRootNode().scrollTop=i,e.updateOptionType()}))}},this.divRulesFooter.querySelector('div[data-role="footer-rule-duplicate"]').onclick=function(t){t.stopPropagation(),e.abilityService.can(_o.a.COUNT_EMAIL_RULES)&&(e.getRootNode().setAttribute("data-loading-body-dialog","1"),setTimeout((function(){hi()(e.ruleContainerList).forEach((function(e){e.getIsRuleSelected&&e.duplicateRule()})),e.getRootNode().setAttribute("data-loading-body-dialog","0"),e.getRootNode().scrollTop=e.getRootNode().scrollHeight})))},this.divRulesFooter.querySelector('div[data-role="footer-rule-delete"]').onclick=function(t){t.stopPropagation(),e.getRootNode().setAttribute("data-loading-body-dialog","1"),setTimeout((function(){hi()(e.ruleContainerList).forEach((function(e){e.getIsRuleSelected&&e.deleteRule()})),e.getRootNode().setAttribute("data-loading-body-dialog","0"),e.getRootNode().scrollTop=0}))};var t=this.getRootNode().querySelector('[data-role="mobile-control-toolbar"]'),n=t?t.querySelector('button[data-action="add-rule"]'):null;n&&(n.onclick=function(){e.hasAbilityToAddRule()&&e.addRule()})}},{key:"clearRules",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Object(H.a)(hi()(this.ruleContainerList),(function(t){t.deleteRule(e)}))}},{key:"addRule",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;this.isEmptyState&&(this.isEmptyState=!1,this.divRulesHolder.removeChild(this.divEmptyState)),e&&this.metricService.track("settings_notifications_rules_add_click"),this.addNewRule(t)}},{key:"getRuleRecipients",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.ruleContainerList.length>0?this.ruleContainerList[e].getRuleRecipients():[]}},{key:"updateRuleRecipients",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.ruleContainerList[t].updateRuleRecipients(e)}},{key:"getActiveRules",value:function(){return this.isAccordingToRules?Object(yo.j)(this.ruleContainerList,this.formDocument):null}},{key:"addNewRule",value:function(e){var t,n=this;this.nrOfRules++,!this.isAccordingToRules&&this.nrOfRules>1&&(this.isAccordingToRules=!0),t=e||(this.nrOfRules>1?{ruleRecipientConfiguration:Fo({},this.ruleContainerConfiguration.ruleRecipientConfiguration,{defaultTagValues:[]}),ruleConditionConfigurations:this.ruleContainerConfiguration.ruleConditionConfigurations}:{ruleRecipientConfiguration:Fo({},this.ruleContainerConfiguration.ruleRecipientConfiguration),ruleConditionConfigurations:this.ruleContainerConfiguration.ruleConditionConfigurations});var i=new xo.a(this.cloneDivRuleContainer,this.nrOfRules,t,this.abilityService,this.currentModel).withFormDocument(this.formDocument).withI18n(this.i18n);if(this.ruleContainerList.push(i),i.on("count-email-recipients-not-supported",(function(){n.trigger("count-email-recipients-not-supported")})),i.on("count-email-rules-not-supported",(function(){n.trigger("count-email-rules-not-supported")})),i.onRuleConditionVariableChanged=this.onRuleConditionVariableChanged.bind(this),i.onRuleSelected=this.onRuleSelected.bind(this),i.onRuleDeselected=this.onRuleDeselected.bind(this),i.onDeselectAllRules=this.deselectAllRules.bind(this),i.onRuleDuplicated=this.onRuleDuplicated.bind(this),i.onRuleDeleted=this.onRuleDeleted.bind(this),i.onStatementChanged=this.onStatementChanged.bind(this),i.onSendToFocus=this.onSendToFocus.bind(this),i.onSendToVariableOpen=this.onSendToVariableOpen.bind(this),i.onSendToVariableInsert=this.onSendToVariableInsert.bind(this),i.initialize(),e&&i.getNrOfConditions>1)for(var r=0;r<i.getNrOfConditions;r++)i.getRuleConditionAt(r).updateVariables(Object(yo.h)(!1,this.formDocument,this.i18n));1===i.getRuleConditionList()[0].getVariables().length&&i.getRuleConditionList()[0].getVariable().skipConditions&&this.addRuleMenuPanelBtn.disableButton(),this.divRulesHolder.appendChild(i.getRootNode()),this.updateOptionType(),this.updateRulesFooter(),this.getRootNode().scrollTop=this.getRootNode().scrollHeight}},{key:"onRuleConditionVariableChanged",value:function(e,t){1===t&&(!this.isAccordingToRules&&1===this.nrOfRules&&e?this.isAccordingToRules=!0:this.isAccordingToRules&&1===this.nrOfRules&&!e&&(this.isAccordingToRules=!1));for(var n=!1,i=0,r=this.ruleContainerList.length;i<r;i++){if(this.ruleContainerList[i].getRuleConditionAt(0).getVariable().skipConditions){n=!0;break}}for(var a=0;a<this.nrOfRules&&!(e&&n||!e&&!n);a++){var o=!!this.ruleContainerList[a].getRuleConditionAt(0)&&this.ruleContainerList[a].getRuleConditionAt(0).getVariables()[0].skipConditions;e&&o||(e||o)&&(this.ruleContainerList[a].getNrOfConditions>1||n&&this.ruleContainerList[a].getRuleConditionAt(0).getVariable().skipConditions||this.ruleContainerList[a].updateRuleConditionVariables(e))}}},{key:"onRuleSelected",value:function(){this.metricService.track("settings_notifications_rules_select"),this.nrOfSelectedRules++,this.updateRulesFooter()}},{key:"onRuleDeselected",value:function(){this.nrOfSelectedRules--,this.updateRulesFooter()}},{key:"onRuleDuplicated",value:function(e){var t=this;e.on("count-email-recipients-not-supported",(function(){t.trigger("count-email-recipients-not-supported")})),e.getCanTrackMetrics()&&this.metricService.track("settings_notifications_rules_duplicate_click"),this.nrOfRules++,this.divRulesHolder.appendChild(e.getRootNode()),this.ruleContainerList.push(e),this.updateRulesPosition(),this.updateRulesFooter(),this.getRootNode().scrollTop=this.getRootNode().scrollHeight,this.isAccordingToRules||(this.isAccordingToRules=!0)}},{key:"onRuleDeleted",value:function(e){e.getCanTrackMetrics()&&this.metricService.track("settings_notifications_rules_delete_click"),this.nrOfRules--,this.divRulesHolder.removeChild(e.getRootNode()),this.ruleContainerList.splice(e.getRulePosition-1,1),this.updateRulesPosition(),this.updateRulesFooter(),0===this.nrOfRules?(this.isEmptyState=!0,this.isAccordingToRules=!1,this.divRulesHolder.appendChild(this.divEmptyState),this.addRuleMenuPanelBtn.enableButton()):1===this.nrOfRules&&this.ruleContainerList[0].getRuleConditionAt(0).getVariable().skipConditions&&(this.isAccordingToRules=!1)}},{key:"onStatementChanged",value:function(){this.updateOptionType()}},{key:"onSendToFocus",value:function(){this.metricService.track("settings_notifications_email_recipient_focus")}},{key:"onSendToVariableOpen",value:function(){this.metricService.track("settings_notifications_email_add_variable_dropdown_open")}},{key:"onSendToVariableInsert",value:function(){this.metricService.track("settings_notifications_email_add_variable_dropdown_insert")}},{key:"updateRulesPosition",value:function(){for(var e=0;e<this.nrOfRules;e++)this.ruleContainerList[e].updateRulePosition(e+1)}},{key:"updateRulesFooter",value:function(){if(2===this.nrOfSelectedRules?(this.divRulesHolder.appendChild(this.divRulesFooter),this.divRulesFooter.style.display="block"):this.nrOfSelectedRules<2&&(this.divRulesFooter.style.display="none"),this.updateOptionType(),this.nrOfSelectedRules>1){this.metricService.track("settings_notifications_rules_multiselect");var e=document.createElement("span"),t=this.i18n.translateText("rule_container_footer_selected",this.nrOfSelectedRules.toString());if(e.textContent="rule_container_footer_selected"!==t?t:"".concat(this.nrOfSelectedRules," selected"),this.divFooterSelected.innerHTML="",this.divFooterSelected.appendChild(e),this.nrOfSelectedRules<this.nrOfRules){var n=this.i18n.translateText("rule_container_footer_select_all"),i="rule_container_footer_select_all"!==n?n:" - Select all";this.divFooterSelected.insertAdjacentText("beforeend",i)}else{var r=this.i18n.translateText("rule_container_footer_clear_all"),a="rule_container_footer_clear_all"!==r?r:" - Clear selection";this.divFooterSelected.insertAdjacentText("beforeend",a)}}}},{key:"updateOptionType",value:function(){this.divRulesHolder.offsetHeight>this.getRootNode().offsetHeight-50?this.divRulesFooter.setAttribute("data-option-type","sticky"):this.divRulesFooter.removeAttribute("data-option-type")}},{key:"selectAllRules",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.ruleContainerList.forEach((function(t){e.length>0?e.forEach((function(e){e.getRulePosition!==t.getRulePosition&&t.selectRule()})):t.selectRule()}))}},{key:"deselectAllRules",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.ruleContainerList.forEach((function(t){e.length>0?e.forEach((function(e){e.getRulePosition!==t.getRulePosition&&t.deselectRule()})):t.deselectRule()}))}},{key:"validateStartSelection",value:function(){return!qe.a.isMobile()}},{key:"onStartSelection",value:function(e){var t=e.originalEvent;t.ctrlKey||t.metaKey||(this.deselectAllRules(),this.selectionRules.clearSelection())}},{key:"onSelectSelection",value:function(e){var t=e.selectedElement,n=e.originalEvent;this.divRulesFooter==n.target||this.divRulesFooter.contains(n.target)||(n.ctrlKey||n.metaKey||(this.deselectAllRules(),this.selectionRules.clearSelection()),t&&(t.classList.contains("ruleContentSelected")?(this.ruleContainerList.forEach((function(e){e.getRulePosition===parseInt(t.parentElement.getAttribute("data-rule-position"))&&e.deselectRule()})),this.selectionRules.removeFromSelection(t)):(this.ruleContainerList.forEach((function(e){e.getRulePosition===parseInt(t.parentElement.getAttribute("data-rule-position"))&&e.selectRule()})),this.selectionRules.keepSelection())))}},{key:"onMoveSelection",value:function(e){var t=this,n=e.selectedElements,i=e.changedElements;n.forEach((function(e){t.ruleContainerList.forEach((function(t){t.getRulePosition===parseInt(e.parentElement.getAttribute("data-rule-position"))&&t.selectRule()}))})),i.removed.forEach((function(e){t.ruleContainerList.forEach((function(t){t.getRulePosition===parseInt(e.parentElement.getAttribute("data-rule-position"))&&t.deselectRule()}))}))}},{key:"onStopSelection",value:function(){this.selectionRules.keepSelection()}},{key:"hasAbilityToAddRule",value:function(){return!this.ruleContainerList.length||this.abilityService.can(_o.a.COUNT_EMAIL_RULES,this.currentModel)}},{key:"render",value:function(){var e=this.getParent(qi.OVERLAY).getRootNode().getBoundingClientRect();document.body.appendChild(this.getRootNode()),this.getRootNode().style.left=e.left+e.width+"px",this.getRootNode().style.top=e.top+"px",this.getRootNode().style.bottom=document.documentElement.offsetHeight-e.top-e.height+"px"}}]),n}(Er);function Vo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Ho=function(){function e(){o()(this,e),v()(this,"root",void 0),v()(this,"trigger",void 0),this.root=document.createElement("div"),this.root.setAttribute("data-role","notification-hook-type-config")}return l()(e,[{key:"getRootNode",value:function(){return this.root}},{key:"setTrigger",value:function(e){this.trigger=e}}]),e}(),Go=function(e){u()(n,e);var t=Vo(n);function n(){return o()(this,n),t.call(this)}return l()(n,[{key:"getTrigger",value:function(){return{when:Eo.k.SUBMIT,delay:"+0m"}}}]),n}(Ho),Wo=function(e){u()(n,e);var t=Vo(n);function n(){return o()(this,n),t.call(this)}return l()(n,[{key:"getTrigger",value:function(){return{when:Eo.k.PAYMENT_DONE,delay:"+0m"}}}]),n}(Ho),jo=function(e){u()(n,e);var t=Vo(n);function n(){return o()(this,n),t.call(this)}return l()(n,[{key:"getTrigger",value:function(){return{when:Eo.k.APPROVE,delay:"+0m"}}}]),n}(Ho),Ko=function(e){u()(n,e);var t=Vo(n);function n(){return o()(this,n),t.call(this)}return l()(n,[{key:"getTrigger",value:function(){return{when:Eo.k.REJECT,delay:"+0m"}}}]),n}(Ho),zo=function(e){u()(n,e);var t=Vo(n);function n(){var e;o()(this,n),e=t.call(this),v()(A()(e),"after",void 0),v()(A()(e),"timeUnit",void 0);var i=document.createElement("div");return i.textContent="after",i.setAttribute("data-role","label"),e.getRootNode().appendChild(i),e.after=document.createElement("input"),e.after.setAttribute("type","number"),e.after.setAttribute("data-role","after"),e.after.value="1",e.getRootNode().appendChild(e.after),e.timeUnit=document.createElement("select"),e.timeUnit.setAttribute("data-role","time-unit"),e.populateTimeUnitDropdown(),e.getRootNode().appendChild(e.timeUnit),e.getRootNode().appendChild(document.createElement("div")),e}return l()(n,[{key:"setTrigger",value:function(e){var t=e.delay,n=/^(\+)?([\d]+)(mm|h|d|w|m)$/i.exec(t);n?(this.after.value=n[2],this.timeUnit.value=n[3]):(this.after.value="1",this.timeUnit.value="mm")}},{key:"populateTimeUnitDropdown",value:function(){var e=this;Object(H.a)([{text:"Minutes",value:"mm"},{text:"Hours",value:"h"},{text:"Days",value:"d"},{text:"Weeks",value:"w"},{text:"Months",value:"m"}],(function(t){var n=document.createElement("option");n.text=t.text,n.value=t.value,e.timeUnit.add(n)}))}}]),n}(Ho),Xo=function(e){u()(n,e);var t=Vo(n);function n(){return o()(this,n),t.call(this)}return l()(n,[{key:"getTrigger",value:function(){return{when:Eo.k.SUBMIT_DELAY,delay:"+".concat(this.after.value||0).concat(this.timeUnit.value)}}}]),n}(zo),Zo=function(e){u()(n,e);var t=Vo(n);function n(){return o()(this,n),t.call(this)}return l()(n,[{key:"getTrigger",value:function(){return{when:Eo.k.PAYMENT_DONE_DELAY,delay:"+".concat(this.after.value||0).concat(this.timeUnit.value)}}}]),n}(zo),qo=function(e){u()(n,e);var t=Vo(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"root",void 0),v()(A()(e),"dropdown",void 0),v()(A()(e),"valueTrigger",void 0),v()(A()(e),"store",void 0),v()(A()(e),"translationService",void 0),e.translationService=new F.a,e.store=Object(Te.c)(),e.root=document.createElement("div"),e.root.setAttribute("data-role","when-component"),e.dropdown=document.createElement("select"),e.dropdown.setAttribute("data-role","hook-type"),e.addDropdownOptions(),e.updateDropdownOptions(),e.root.appendChild(e.dropdown),e.root.appendChild(document.createElement("div")),e.dropdown.onchange=function(){e.root.removeChild(e.valueTrigger.getRootNode()),e.valueTrigger=n.createValue(e.dropdown.value),e.root.appendChild(e.valueTrigger.getRootNode()),e.trigger("dropdown-change-value")},e.valueTrigger=n.createValue(Eo.k.SUBMIT),e.root.appendChild(e.valueTrigger.getRootNode()),e}return l()(n,[{key:"getRootNode",value:function(){return this.root}},{key:"getValue",value:function(){return this.valueTrigger.getTrigger()}},{key:"setValue",value:function(e){e.when!==this.valueTrigger.getTrigger().when&&(this.root.removeChild(this.valueTrigger.getRootNode()),this.valueTrigger=n.createValue(e.when),this.root.appendChild(this.valueTrigger.getRootNode())),this.valueTrigger.setTrigger(e),this.dropdown.value=e.when}},{key:"updateDropdownOptions",value:function(){var e=this,t=Object(Te.b)(Oe.m);this.store.subscribe((function(){return e.store.getState().form.isActivePaymentEnabled!==t?e.addDropdownOptions():null}))}},{key:"addDropdownOptions",value:function(){var e=this,t=Object(Te.b)(Oe.m),n=Fi.a.getInstance().isPaymentsV1Active()||t,i=Object(Te.b)(Oe.l),r=[{text:"Form is submitted",i18nKey:"rules2_form_is_submited",value:Eo.k.SUBMIT,disabled:!1},{text:"Payment is processed",i18nKey:"notifications_payment_processed",value:Eo.k.PAYMENT_DONE,disabled:!n,tooltipi18nKey:"tooltip_payment_is_processed_key_text"},{text:"Form is submitted + Delay",i18nKey:"notifications_form_submitted_delay",value:Eo.k.SUBMIT_DELAY,disabled:!1},{text:"Payment is processed + Delay",i18nKey:"notifications_payment_processed_delay",value:Eo.k.PAYMENT_DONE_DELAY,disabled:!n,tooltipi18nKey:"tooltip_payment_is_processed_key_text"},{text:"Submission is approved",i18nKey:"notifications_submissions_approved",value:Eo.k.APPROVE,disabled:!i,tooltipi18nKey:"tooltip_submission_is_approved_key_text"},{text:"Submission is rejected",i18nKey:"notifications_submissions_rejected",value:Eo.k.REJECT,disabled:!i,tooltipi18nKey:"tooltip_submission_is_approved_key_text"}];this.dropdown.innerHTML="",Object(H.a)(r,(function(t){var n=document.createElement("option");n.text=t.text,n.value=t.value,n.setAttribute("data-i18n-text",t.i18nKey),t.disabled&&(n.setAttribute("disabled","disabled"),n.setAttribute("title",e.translationService.translateTextDefault(t.tooltipi18nKey,""))),e.dropdown.add(n)}))}}],[{key:"createValue",value:function(e){switch(e){case Eo.k.SUBMIT:return new Go;case Eo.k.SUBMIT_DELAY:return new Xo;case Eo.k.PAYMENT_DONE:return new Wo;case Eo.k.PAYMENT_DONE_DELAY:return new Zo;case Eo.k.APPROVE:return new jo;case Eo.k.REJECT:return new Ko;default:throw new Error("Unknown hook type")}}}]),n}(ir.a);function Jo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jo(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var es=di()(io,{}),ts=function(e){u()(n,e);var t=$o(n);function n(e,i){var r;return o()(this,n),r=t.call(this,e),v()(A()(r),"SEND_TO_DEFAULT_VALUE",{type:oo.a.TAG,value:"userEmail",caption:S.a.getUiTranslatedString("edt_notifications_my_email","My Email")}),v()(A()(r),"SUBJECT_DEFAULT_VALUE",{type:oo.a.TAG,value:":formName:",caption:S.a.getUiTranslatedString("notifications_form_name","Form Name")}),v()(A()(r),"FROM_NAME_DEFAULT_VALUE",{type:oo.a.TEXT,value:r.rootController.defaultNotificationsPreferences.fromName,caption:r.rootController.defaultNotificationsPreferences.fromName}),v()(A()(r),"smtpServerController",void 0),v()(A()(r),"sendToDefaultText",void 0),v()(A()(r),"subjectDefaultText",void 0),v()(A()(r),"fromNameDefaultText",void 0),v()(A()(r),"fromEmailDefaultText",void 0),v()(A()(r),"sendToComponent",void 0),v()(A()(r),"subjectComponent",void 0),v()(A()(r),"fromNameComponent",void 0),v()(A()(r),"fromEmailComponent",void 0),v()(A()(r),"replyToEmailComponent",void 0),v()(A()(r),"whenComponent",void 0),v()(A()(r),"bodyComponent",void 0),v()(A()(r),"emptyFieldsToggle",void 0),v()(A()(r),"addAttachment",void 0),v()(A()(r),"addAttachmentDropdownButton",void 0),v()(A()(r),"addedAttachments",[]),v()(A()(r),"addRuleButtonComponent",void 0),v()(A()(r),"rulesPanel",void 0),v()(A()(r),"rulesOverlay",void 0),v()(A()(r),"smtpEmail",""),v()(A()(r),"visibilityStateOfCustomFields",0),v()(A()(r),"abilityService",void 0),v()(A()(r),"metricsService",void 0),v()(A()(r),"userService",void 0),v()(A()(r),"canTrackMetrics",!0),v()(A()(r),"isFirstLoad",!0),v()(A()(r),"isSaveInProgress",!1),v()(A()(r),"saveButton",void 0),v()(A()(r),"buttonState",void 0),v()(A()(r),"i18n",void 0),v()(A()(r),"onSettingsNotificationsEmailAddVariableDropdownInsertMetric",(function(){r.canTrackMetrics&&r.metricsService.track("settings_notifications_email_add_variable_dropdown_insert")})),v()(A()(r),"performanceLimitMouseMove",(function(e){e.stopImmediatePropagation()})),r.abilityService=i,r.metricsService=Ci.a.getInstance(),r.userService=Xt.a.getInstance(),r.smtpServerController=r.rootController.getSmtpServerController(),r.getRootNode().setAttribute("data-role","email-editor-overlay"),r.sendToDefaultText=S.a.getUiTranslatedString("edt_notifications_my_email","My Email"),r.subjectDefaultText=S.a.getUiTranslatedString("notifications_form_name","Form Name"),r.fromNameDefaultText=yo.a.COMPANY_NAME,r.fromEmailDefaultText=r.rootController.defaultNotificationsPreferences.fromEmail,r.i18n=new F.a,r.createSendToComponent(),r.createSubjectComponent(),r.createFromNameComponent(),r.createFromEmailComponent(),r.createReplyToComponent(),r.createWhenComponent(),r.createBodyComponent(),r.createAddAttachmentsComponent(),r.createAddRuleButton(),r.createNotificationRulesOverlayPanel(),r.createHideEmptyFieldsToggle(),r.addEventListeners(),r.rootController.store.subscribe(r.handleStoreChange.bind(A()(r))),r}return l()(n,[{key:"handleStoreChange",value:function(){var e=this.rootController.store.getState();this.bodyComponent.updateState(Object(Vr.a)(e));var t=e.emailValidationModal.validatedEmail;t&&!this.fromEmailComponent.hasValue(t)&&(this.fromEmailComponent.addOption({text:t,value:t}),this.computeValueOfFromEmail(t))}},{key:"createHideEmptyFieldsToggle",value:function(){this.emptyFieldsToggle=new Lo({label:S.a.getUiTranslatedString("notifications_hide_empty_fields","Hide empty fields"),isChecked:!1,id:"notification-editor-checkbox",onChange:function(){return!1}}),this.addInteractionEventListeners(this.emptyFieldsToggle.getElementNode())}},{key:"initialize",value:function(){var e=this;y()(_()(n.prototype),"initialize",this).call(this),this.initialized||(this.initialized=!0,this.rootController.resourceManager.get("/modules/Typescript/Form/resources/notifications/notifications-edit-email-panel.html").then((function(t){e.getRootNode().innerHTML=t,[].slice.call(e.getRootNode().querySelectorAll('[data-role="placeholder"][data-control-name]')).forEach((function(t){switch(t.getAttribute("data-control-name")){case go.a.COMPONENT_TYPE_SEND_TO:e.sendToComponent.replace(t);break;case go.a.COMPONENT_TYPE_SUBJECT:e.subjectComponent.replace(t);break;case go.a.COMPONENT_TYPE_FROM_NAME:e.fromNameComponent.replace(t);break;case go.a.COMPONENT_TYPE_FROM_EMAIL:t.appendChild(e.fromEmailComponent.getRoot());break;case go.a.COMPONENT_TYPE_WHEN:t.appendChild(e.whenComponent.getRootNode());break;case go.a.COMPONENT_TYPE_REPLY_TO_EMAIL:t.appendChild(e.replyToEmailComponent.getRoot());break;case go.a.COMPONENT_TYPE_BODY:t.appendChild(e.bodyComponent.getRoot());break;case go.a.COMPONENT_TYPE_ADD_ATTACHMENT:t.appendChild(e.addAttachment);break;case go.a.COMPONENT_TYPE_ADD_RULES_BUTTON:t.appendChild(e.addRuleButtonComponent.getRootNode());break;case go.a.COMPONENT_TYPE_HIDE_EMPTY_FIELDS:t.appendChild(e.emptyFieldsToggle.getElementNode())}})),e.addEventListenersOnButtons(),e.appendEventListeners(),e.checkStickyActionBar(),e.initializeResolve(),e.createSaveButton(),e.appendFeedbackButton('[data-role="buttons-container"] [data-role="content"]',"email-feedback-container")})).fail((function(t){return e.initializeReject(t)})))}},{key:"setCurrentModel",value:function(e){var t=this;y()(_()(n.prototype),"setCurrentModel",this).call(this,e),this.displayDraftErrorNotification(),this.addedAttachments=hi()(e.attachments);var i=this.sendToComponent.getState();if(this.isSendTypeAccordingToApprovals()&&i!==O.qb.FULLY_DISABLED){var r=S.a.getUiTranslatedString("edt_notifications_according_to_approvals","According to approvals");this.sendToComponent.setState(O.qb.ENABLED),this.sendToComponent.setValue([{type:oo.a.TAG,value:":accordingToApprovals:",caption:r}]),this.sendToComponent.setState(O.qb.FULLY_DISABLED),this.addRuleButtonComponent.hideButton()}if(e&&e.rules){this.addRuleButtonComponent.withLabel("Add rules","notifications_add_rules"),this.rulesOverlay.clearRules(!1);var a=Object(Vr.a)(this.rootController.store.getState()),o=function(){for(var e=Object(yo.k)(t.currentModel.rules,a.form,t.rootController.form,t.rootController.i18n),n=0,i=e.length;n<i;n++)t.rulesOverlay.addRule(!1,e[n]);t.rulesOverlay.setIsAccordingToRules(!0)};if(this.isFirstLoad?(this.isFirstLoad=!1,this.rulesOverlay.initialize(),this.rulesOverlay.initializePromise.then((function(){o()}))):o(),i!==O.qb.FULLY_DISABLED){var s=S.a.getUiTranslatedString("edt_notifications_according_to_rules","According to rules");this.sendToComponent.setState(O.qb.ENABLED),this.sendToComponent.setValue([{type:oo.a.TAG,value:":accordingToRules:",caption:s}]),this.sendToComponent.setState(O.qb.FULLY_DISABLED),this.sendToComponent.getDropdownContainer().setAttribute("title",this.MODIFY_RULES)}this.addRuleButtonComponent.withLabel("Modify rules","notifications_modify_rules")}}},{key:"updateNotificationDataInEditorFields",value:function(e){var t=this;if(this.removeMetricsEvents(),this.currentModel=e,this.addRuleButtonComponent.showButton(),this.addRuleButtonComponent.withLabel("Add rules","notifications_add_rules"),this.rulesOverlay.clearRules(!1),this.rulesOverlay.setCurrentModel(e),this.rootController.getSmtpServerController().isSMTPEnabled()&&(this.smtpEmail=this.rootController.getSmtpServerController().getActiveSMTPProtocol().settings.email,this.fromEmailComponent&&(this.computeValueOfFromEmail(),this.computeStatusOfFromEmail())),!this.currentModel)return this.addedAttachments=[],this.setDefaultDataInEditorFields(),this.addMetricsEvents(),void this.disableSave();this.addedAttachments=hi()(e.attachments);var n=this.addAttachment.querySelectorAll('[data-role="attachment-container"]');if(Object(H.a)(n,(function(e){t.addAttachment.removeChild(e)})),this.disableAndEnableOptions(),this.currentModel.recipients){var i=Object(yo.m)(this.currentModel.recipients,this.rootController.form);this.sendToComponent.setState(O.qb.ENABLED),this.sendToComponent.getDropdownContainer().setAttribute("title",this.ADD_FIELDS),this.sendToComponent.setValue(i)}if(this.isSendTypeAccordingToApprovals()){var r=S.a.getUiTranslatedString("edt_notifications_according_to_approvals","According to approvals");this.sendToComponent.setValue([{type:oo.a.TAG,value:":accordingToApprovals:",caption:r}]),this.sendToComponent.setState(O.qb.FULLY_DISABLED),this.addRuleButtonComponent.hideButton()}if(this.currentModel.rules){var a=Object(Vr.a)(this.rootController.store.getState()),o=function(){for(var e=Object(yo.k)(t.currentModel.rules,a.form,t.rootController.form,t.rootController.i18n),n=0,i=e.length;n<i;n++)t.rulesOverlay.addRule(!1,e[n]);t.rulesOverlay.setIsAccordingToRules(!0)};this.isFirstLoad?(this.isFirstLoad=!1,this.rulesOverlay.initialize(),this.rulesOverlay.initializePromise.then((function(){o()}))):o();var s=S.a.getUiTranslatedString("edt_notifications_according_to_rules","According to rules");this.sendToComponent.setValue([{type:oo.a.TAG,value:":accordingToRules:",caption:s}]),this.sendToComponent.setState(O.qb.FULLY_DISABLED),this.sendToComponent.getDropdownContainer().setAttribute("title",this.MODIFY_RULES),this.addRuleButtonComponent.withLabel("Modify rules","notifications_modify_rules")}if(this.currentModel.trigger&&this.currentModel.trigger.when&&this.whenComponent.setValue({when:this.currentModel.trigger.when,delay:this.currentModel.trigger.delay?this.currentModel.trigger.delay:"+0m"}),this.currentModel.subject){var l=S.a.getVariablesFromText(this.currentModel.subject,this.rootController.form.flatten());l?this.subjectComponent.setValue(l):this.subjectComponent.setValue([{type:oo.a.TEXT,value:this.currentModel.subject,caption:this.currentModel.subject}])}if(this.currentModel.customFields){if(this.currentModel.customFields.fromName){var c=S.a.getVariablesFromText(this.currentModel.customFields.fromName,this.rootController.form.flatten());c?this.fromNameComponent.setValue(c):this.fromNameComponent.setValue([{type:oo.a.TEXT,value:this.currentModel.customFields.fromName,caption:this.currentModel.customFields.fromName}])}if(this.currentModel.customFields.fromEmail){var u=Object(yo.m)([this.currentModel.customFields.fromEmail],this.rootController.form)[0];this.computeValueOfFromEmail((null===u||void 0===u?void 0:u.caption)||u.value),this.computeStatusOfFromEmail()}this.currentModel.customFields.replyToEmail&&(this.replyToEmailComponent.setOptions(this.generateListWithEntitiesForSenderControls()),this.replyToEmailComponent.hasValue(this.currentModel.customFields.replyToEmail)||this.replyToEmailComponent.addOption({text:S.a.getUiTranslatedString("edt_notifications_deleted_field",yo.a.DELETED_FIELD),value:this.currentModel.customFields.replyToEmail}),this.replyToEmailComponent.setValue(this.currentModel.customFields.replyToEmail)),this.emptyFieldsToggle.setState({isChecked:this.currentModel.customFields.hideEmptyFields}),this.currentModel.body&&this.bodyComponent.setValue({body:this.currentModel.body,name:S.a.getUiTranslatedString("edt_notifications_load_template","Load template"),type:"email",isVirtualTemplate:!0,contentType:this.currentModel.contentType}),this.currentModel.attachments&&this.currentModel.attachments.length>0&&this.loadAttachmentsInContainer(this.currentModel.attachments)}this.addMetricsEvents(),this.disableSave()}},{key:"getUpdatedModel",value:function(){var e,t=new fo;(t.type=Eo.l.EMAIL,t.formId=this.rootController.formId,t.category=this.determineEmailCategory(),t.sendType=this.getSendType(),t.subject=Object(yo.g)(this.subjectComponent.getValue()),t.body=this.bodyComponent.getValue(),t.trigger=this.whenComponent.getValue(),t.recipients=this.getRecipients(),t.rules=this.getActiveRules(),t.attachments=this.addedAttachments,t.contentType=this.bodyComponent.getContentType(),t.customFields={fromName:Object(yo.g)(this.fromNameComponent.getValue()),replyToEmail:this.replyToEmailComponent.getValue()&&this.replyToEmailComponent.getValue(),hideEmptyFields:this.emptyFieldsToggle.getValue()},this.rootController.getSmtpServerController().isSMTPEnabled())||(t.customFields.fromEmail={type:O.R.EMAIL,value:this.fromEmailComponent.getValue()},(null===(e=this.currentModel)||void 0===e?void 0:e.type)!==Eo.l.EMAIL||Object(yo.n)(this.fromEmailComponent.getValue(),this.rootController.form)||(t.customFields.fromEmail=this.currentModel.customFields.fromEmail));return this.currentModel&&this.currentModel.id&&(t.id=this.currentModel.id),this.currentModel&&this.currentModel.isVirtual&&(t.isVirtual=this.currentModel.isVirtual,t.virtualId=this.currentModel.virtualId),t}},{key:"setResponseMessage",value:function(e,t,n){var i=document.querySelector('[data-role="email-response-message"]');i.innerHTML="<span>".concat(e,"</span>"),t?i.classList.remove("text-danger"):i.classList.add("text-danger"),n&&(i.setAttribute("data-show-message",""),Object(wr.a)((function(){i.innerText="",i.removeAttribute("data-show-message")}),5e3)),this.isSaveInProgress=!1}},{key:"handleSuccessResponse",value:function(e){this.displayDraftErrorNotification();var t=document.querySelector('[data-role="email-response-message"]');t.classList.remove("text-danger"),e===Eo.b.SAVE_EMAIL&&S.a.setAndRemoveMessageOnElement(t,S.a.getUiTranslatedString("notifications_save_email_success_message","The email was succesfully saved!"),O.pb.SUCCESS),e===Eo.b.UPDATE_EMAIL&&S.a.setAndRemoveMessageOnElement(t,S.a.getUiTranslatedString("notifications_save_email_success_message","The email  was succesfully updated!"),O.pb.SUCCESS),this.isSaveInProgress=!1}},{key:"determineEmailCategory",value:function(){return this.sendToComponent.getValue().length?Eo.d.DEFAULT:Eo.d.DRAFT}},{key:"getSendType",value:function(){return this.hasActiveRules()?Eo.i.ACCORDING_TO_RULES:this.currentModel&&this.currentModel.sendType!==Eo.i.ACCORDING_TO_RULES?this.currentModel.sendType:Eo.i.TO_RECIPIENTS}},{key:"hasActiveRules",value:function(){return this.rulesOverlay.getIsAccordingToRules()}},{key:"getRecipients",value:function(){return this.hasActiveRules()||this.isSendTypeAccordingToApprovals()?Object(yo.f)([this.SEND_TO_DEFAULT_VALUE],this.rootController.form):Object(yo.f)(this.sendToComponent.getValue(),this.rootController.form)}},{key:"getActiveRules",value:function(){return this.rulesOverlay.getActiveRules()}},{key:"isSendTypeAccordingToApprovals",value:function(){return!!this.currentModel&&this.currentModel.sendType===Eo.i.ACCORDING_TO_APPROVALS}},{key:"createSendToComponent",value:function(){var e=this,t=this.userService.getLimitForFeature(Zt.a.ADD_NOTIFICATION_RECIPIENT);this.sendToComponent=L.a.createElement(L.a.ELEMENT_TYPE_TAGS_LIST,{componentName:go.a.COMPONENT_TYPE_SEND_TO,allowText:!0,allowKeywords:!0,customErrorMessage:S.a.getUiTranslatedString("notifications_email_send_to_error_message","Please provide a valid email address"),textValidationCallback:function(t){return Object(yo.n)(t,e.rootController.form)},createValuesCallback:function(){var t=Object(Vr.a)(e.rootController.store.getState());return Object(yo.e)(t.form,!0,!1)},placeholder:S.a.getUiTranslatedString("notifications_type_an_email","Type an email"),tagsLimit:t,validationError:this.i18n.translateText("notifications_recipients_limit_reached",t.toString())}),this.sendToComponent.setValue([{type:oo.a.TAG,value:Eo.a.USER_EMAIL,caption:S.a.getUiTranslatedString("edt_notifications_my_email","My Email")}]),this.sendToComponent.getDropdownContainer().setAttribute("title",this.ADD_FIELDS),this.addInteractionEventListeners(this.sendToComponent.getRootNode())}},{key:"createSubjectComponent",value:function(){var e=this;this.subjectComponent=L.a.createElement(L.a.ELEMENT_TYPE_TAGS,{componentName:go.a.COMPONENT_TYPE_SUBJECT,allowText:!0,allowKeywords:!0,createValuesCallback:function(){return e.generateVariablesListForInlineTextControls()}}),this.subjectComponent.setValue([{type:oo.a.TAG,value:O.ub.FORM_NAME,caption:this.subjectDefaultText}]),this.subjectComponent.getDropdownContainer().setAttribute("title",this.ADD_FIELDS),this.addInteractionEventListeners(this.subjectComponent.getRootNode())}},{key:"createFromNameComponent",value:function(){var e=this;this.fromNameComponent=L.a.createElement(L.a.ELEMENT_TYPE_TAGS,{componentName:go.a.COMPONENT_TYPE_FROM_NAME,allowText:!0,allowKeywords:!0,customErrorMessage:S.a.getUiTranslatedString("notifications_email_from_name_error_message","Please provide a valid name"),textValidationCallback:function(e){return n.validateNameText(e)},editableTextBackground:!1,createValuesCallback:function(){return e.generateVariablesListForInlineTextControls()},placeholder:S.a.getUiTranslatedString("notifications_type_a_name","Type a name")}),this.fromNameComponent.setValue([{type:oo.a.TEXT,value:this.fromNameDefaultText,caption:this.fromNameDefaultText}]),this.fromNameComponent.getDropdownContainer().setAttribute("title",this.ADD_FIELDS),this.addInteractionEventListeners(this.fromNameComponent.getRootNode())}},{key:"createFromEmailComponent",value:function(){var e=this;this.fromEmailComponent=(new ho.a).setOptions(this.computeFromEmailOptions()),this.fromEmailComponent.getRoot().classList.add("w-100"),this.computeValueOfFromEmail(this.fromEmailDefaultText),this.computeStatusOfFromEmail(),this.addInteractionEventListeners(this.fromEmailComponent.getRoot());var t=document.createElement("div"),n=this.fromEmailComponent.getSelectedIndex();document.body.appendChild(t),tr.a.render(di()(yi.Provider,{store:this.store},void 0,es,","),t),this.fromEmailComponent.getRoot().addEventListener("change",(function(t){switch(t.target.value){case $a.NO_REPLY_MY_FORMS:e.userService.canAddCustomEmailInNotifications()||(e.fromEmailComponent.setSelectedIndex(n),e.rootController.triggerPaywall(Zt.a.ADD_CUSTOM_EMAIL_IN_NOTIFICATONS));break;case $a.ADD_CUSTOM_EMAIL:if(e.fromEmailComponent.setSelectedIndex(n),!e.userService.canAddCustomEmailInNotifications()){e.rootController.triggerPaywall(Zt.a.ADD_CUSTOM_EMAIL_IN_NOTIFICATONS);break}var i={type:Gr.a.SET_IS_OPEN,payload:!0};e.rootController.store.dispatch(i)}}))}},{key:"createReplyToComponent",value:function(){this.replyToEmailComponent=(new ho.a).setOptions(this.generateListWithEntitiesForSenderControls()),this.replyToEmailComponent.getRoot().setAttribute("data-name","reply-to-email"),this.replyToEmailComponent.setValue(this.rootController.defaultNotificationsPreferences.fromEmail),this.addInteractionEventListeners(this.replyToEmailComponent.getRoot())}},{key:"createWhenComponent",value:function(){this.whenComponent=new qo,this.whenComponent.getRootNode().setAttribute("data-name","when"),this.addInteractionEventListeners(this.whenComponent.getRootNode())}},{key:"createAddRuleButton",value:function(){this.addRuleButtonComponent=(new cr).withLabel("Add rules","notifications_add_rules"),this.addRuleButtonComponent.getRootNode().setAttribute("data-role","add-rule-button"),this.addInteractionEventListeners(this.addRuleButtonComponent.getRootNode())}},{key:"createBodyComponent",value:function(){var e=this,t=Object(Vr.a)(this.rootController.store.getState());this.bodyComponent=new So(101,this.abilityService,this.rootController.formId,this.rootController.resourceManager,this.rootController.api,this.rootController.ui,this.getInitializePromise(),t).withParentRoot(this.getRootNode()).withParent("editor").withForm(this.rootController.form).withTemplates(this.rootController.getNotificationApiResult().templates).withVariablesTemplates(this.rootController.getNotificationApiResult().variablesTemplates).withVariablesStyles(this.rootController.getNotificationApiResult().variablesStyles).init(),this.bodyComponent.on("body-component-tinymce-loaded",(function(){e.checkStickyActionBar(),e.displayDraftErrorNotification(),e.rootController.trigger("email-editor-loaded")})),this.bodyComponent.on("notifications-interaction-triggered",(function(){e.trigger("notifications-interaction-triggered")})),this.bodyComponent.on("customize-email-templates-not-supported",(function(){e.saveEmailHandler()})),this.bodyComponent.getRoot().setAttribute("data-name","body"),this.addInteractionEventListeners(this.bodyComponent.getRoot())}},{key:"updateBodyComponentVariablesTemplates",value:function(){var e=this.rootController.getNotificationApiResult().variablesTemplates;this.bodyComponent.updateVariablesTemplates(e)}},{key:"createAddAttachmentsComponent",value:function(){this.addAttachment=document.createElement("div"),this.addAttachment.setAttribute("data-name","add-attachment"),this.addAttachmentDropdownButton=new ao(S.a.getUiTranslatedString("notifications_add_attachment","Add attachment")),this.addAttachmentDropdownButton.setOptionsWithActions(this.generateAddAttachmentOptions()),this.addAttachment.appendChild(this.addAttachmentDropdownButton.getRoot()),this.addInteractionEventListeners(this.addAttachmentDropdownButton.getRoot()),this.addInteractionEventListeners(this.addAttachment)}},{key:"setDefaultDataInEditorFields",value:function(){this.sendToComponent.setState(O.qb.ENABLED),this.sendToComponent.getDropdownContainer().setAttribute("title",this.ADD_FIELDS),this.sendToComponent.setValue([this.SEND_TO_DEFAULT_VALUE]),this.whenComponent.setValue({when:Eo.k.SUBMIT,delay:"+0m"}),this.fromNameComponent.setValue([this.FROM_NAME_DEFAULT_VALUE]),this.computeValueOfFromEmail(this.fromEmailDefaultText),this.computeStatusOfFromEmail(),this.replyToEmailComponent.setValue(this.rootController.defaultNotificationsPreferences.fromEmail),this.subjectComponent.setValue([this.SUBJECT_DEFAULT_VALUE]),this.bodyComponent.setDefaultValue(),this.resetAttachmentContainer(),this.emptyFieldsToggle.setState({isChecked:!1})}},{key:"addEventListeners",value:function(){var e=this;this.rootController.on("form-builder-changed",(function(){e.sendToComponent.resetNativeDropdown(),e.updateRecipientsAfterRulesPanel(e.currentModel),e.fromNameComponent.resetNativeDropdown(),e.fromEmailComponent.setOptions(e.computeFromEmailOptions()),e.computeValueOfFromEmail(),e.computeStatusOfFromEmail(),e.replyToEmailComponent.setOptions(e.generateListWithEntitiesForSenderControls()),e.subjectComponent.resetNativeDropdown(),e.bodyComponent.resetNativeDropdown(),e.updateBodyComponentVariablesTemplates()})),this.on("notifications-interaction-triggered",(function(){e.setDirtyState(!0)})),this.rootController.on("use-smtp-not-supported",(function(){e.saveEmailHandler()})),this.rootController.on("new-email-not-supported",(function(){e.saveEmailHandler()})),this.rulesOverlay.on("count-email-rules-not-supported",(function(){e.saveEmailHandler()})),this.rulesOverlay.on("count-email-recipients-not-supported",(function(){var t=Zt.a.ADD_NOTIFICATION_RECIPIENT,n=e.userService.getUpgradeOptions(t);if(n){var i={feature:t,target:n},r=Object(Dr.e)(i);e.rootController.store.dispatch(r),e.saveEmailHandler()}})),this.rootController.on("header-upgrade-button-click",(function(){e.saveEmailHandler(),window.onbeforeunload=window.onunload=null}))}},{key:"addMetricsEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;Object(wr.a)((function(){e.canTrackMetrics=!0,e.sendToComponent.on("focus",(function(){e.metricsService.track("settings_notifications_email_recipient_focus")})),e.sendToComponent.on("tag-add",e.onSettingsNotificationsEmailAddVariableDropdownInsertMetric),e.sendToComponent.on("dropdown-open",(function(){e.metricsService.track("settings_notifications_email_add_variable_dropdown_open")})),e.addAttachmentDropdownButton.on("dropdown-open",(function(){e.metricsService.track("settings_notifications_attachments_dropdown_open")})),e.bodyComponent.on("dropdown-open",(function(){e.metricsService.track("settings_notifications_body_dropdown_open")})),e.bodyComponent.on("notification-manage-templates",(function(){e.metricsService.track("settings_notifications_body_dropdown_manage_templates_click")})),e.bodyComponent.on("notification-switch-to-plain-text",(function(){e.metricsService.track("settings_notifications_body_dropdown_switch_text_click")})),e.bodyComponent.on("notification-switch-to-html",(function(){e.metricsService.track("settings_notifications_body_dropdown_switch_html_click")})),e.bodyComponent.on("notification-save-draft-as-template",(function(){e.metricsService.track("settings_notifications_body_dropdown_save_template_click")})),e.bodyComponent.on("notifications_add_form_variables_change",(function(){e.metricsService.track("settings_notifications_email_add_variable_dropdown_open")})),e.bodyComponent.on("notifications_add_form_variable",(function(){e.metricsService.track("settings_notifications_email_add_variable_dropdown_insert")})),e.subjectComponent.on("dropdown-open",(function(){e.metricsService.track("settings_notifications_email_add_variable_dropdown_open")})),e.subjectComponent.on("tag-add",e.onSettingsNotificationsEmailAddVariableDropdownInsertMetric),e.fromNameComponent.on("dropdown-open",(function(){e.metricsService.track("settings_notifications_email_add_variable_dropdown_open")})),e.fromNameComponent.on("tag-add",e.onSettingsNotificationsEmailAddVariableDropdownInsertMetric)}),t)}},{key:"removeMetricsEvents",value:function(){this.canTrackMetrics=!1,this.sendToComponent.off("focus"),this.sendToComponent.off("tag-add",this.onSettingsNotificationsEmailAddVariableDropdownInsertMetric),this.sendToComponent.off("dropdown-open"),this.addAttachmentDropdownButton.off("dropdown-open"),this.bodyComponent.off("dropdown-open"),this.bodyComponent.off("notification-manage-templates"),this.bodyComponent.off("notification-switch-to-plain-text"),this.bodyComponent.off("notification-switch-to-html"),this.bodyComponent.off("notifications_add_form_variables_change"),this.bodyComponent.off("notifications_add_form_variable"),this.bodyComponent.off("notification-save-draft-as-template"),this.subjectComponent.off("dropdown-open"),this.subjectComponent.off("tag-add",this.onSettingsNotificationsEmailAddVariableDropdownInsertMetric),this.fromNameComponent.off("dropdown-open"),this.fromNameComponent.off("tag-add",this.onSettingsNotificationsEmailAddVariableDropdownInsertMetric)}},{key:"appendEventListeners",value:function(){var e=this;window.UI.getJQuery()(this.getRootNode()).on("click",'[data-role="menu-panel-header"]',(function(){P()(document.activeElement,HTMLElement)&&document.activeElement.blur();var t=function(){e.rootController.getUserConfirmationForDiscardingUnsavedChanges()&&(e.setOpened(!1),e.rootController.trigger("notification-sub-view-back-button"))};S.a.isMobileInteractionActive()?Object(wr.a)((function(){t()}),500):t()}));var t=this.getRootNode().querySelectorAll('[data-role="toggle"][data-id="toggle-see-more"] a'),n=this.getRootNode().querySelector('[data-role="toggle"][data-target-toggle-element]'),i=n.getAttribute("data-target-toggle-element");i=i.substring(1);var r=document.getElementById(i);Object(H.a)(t,(function(t){"0"===t.getAttribute("data-visible")&&(t.onclick=function(){e.visibilityStateOfCustomFields=1,r.setAttribute("data-visible",e.visibilityStateOfCustomFields.toString()),n.setAttribute("data-visible",e.visibilityStateOfCustomFields.toString()),e.metricsService.track("settings_notifications_more_options_click")}),"1"===t.getAttribute("data-visible")&&(t.onclick=function(){e.visibilityStateOfCustomFields=0,r.setAttribute("data-visible",e.visibilityStateOfCustomFields.toString()),n.setAttribute("data-visible",e.visibilityStateOfCustomFields.toString())})})),this.rootController.getSmtpServerController().on("smtp-protocol-enabled",(function(t){e.smtpEmail=t.settings.email,e.computeValueOfFromEmail(),e.computeStatusOfFromEmail()})),this.rootController.getSmtpServerController().on("smtp-protocol-disabled",(function(){e.computeValueOfFromEmail(),e.computeStatusOfFromEmail()})),this.sendToComponent.on("tags-limit-reached",(function(){var t=Object(Vr.a)(e.rootController.store.getState());if(e.currentModel.recipients=e.getRecipients(),!e.userService.canAddRecipientToEmailNotification(e.currentModel,t)){var n=Zt.a.ADD_NOTIFICATION_RECIPIENT,i=e.userService.getUpgradeOptions(n);if(!i)return;var r={feature:n,target:i},a=Object(Dr.e)(r);e.rootController.store.dispatch(a),e.saveEmailHandler()}}))}},{key:"addEventListenersOnButtons",value:function(){var e=this;this.getRootNode().onscroll=function(){e.checkStickyActionBar()},this.addRuleButtonComponent.getButtonNode().onclick=function(){e.metricsService.track("page_view_settings_notifications_rules");var t=e.sendToComponent.getValue();Object(H.a)(t,(function(e){e.value===e.caption&&(e.isRegularTag=!0)}));var n=Object(Vr.a)(e.rootController.store.getState());e.rulesOverlay.setRuleRecipientConfiguration({emailValuesList:Object(yo.e)(n.form),defaultTagValues:e.rulesOverlay.getIsAccordingToRules()?[]:t}),e.rulesOverlay.getIsAccordingToRules()||1!==e.rulesOverlay.getNrOfRules?0===e.rulesOverlay.getNrOfRules&&t.length>0&&e.rulesOverlay.addRule(!1):e.rulesOverlay.updateRuleRecipients(t),e.rulesPanel.getRootNode().style.display=null,e.rulesPanel.setOpened(!0),e.getRootNode().addEventListener("mousemove",e.performanceLimitMouseMove),window.tinymce.get(e.bodyComponent.getTinyMCEId()).on("mousemove",e.performanceLimitMouseMove)}}},{key:"displayDraftErrorNotification",value:function(){this.rootController.ui&&(this.rootController.ui.closeAllNotifications(),this.getRootNode().removeAttribute("data-has-error")),document.querySelector("#notifications-area > div")&&(document.querySelector("#notifications-area").innerHTML=""),this.currentModel&&this.currentModel.category===Eo.d.DRAFT&&(this.rootController.ui.createNotification(S.a.getUiTranslatedString("edt_notifications_err_empty_recipients","This email is currently disabled because there aren't any recipients."),!1,it.i.ERROR,!1),this.getRootNode().setAttribute("data-has-error",""))}},{key:"generateVariablesListForInlineTextControls",value:function(){var e=this,t=[b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_TEXTAREA,b.a.CONTROL_TYPE_DROPDOWN,b.a.CONTROL_TYPE_NAME,b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_LIKERT_SCALE,b.a.CONTROL_TYPE_ADDRESS,b.a.CONTROL_TYPE_PHONE,b.a.CONTROL_TYPE_DATE,b.a.CONTROL_TYPE_TIME,b.a.CONTROL_TYPE_PRICE,b.a.CONTROL_TYPE_WEBSITE,b.a.CONTROL_TYPE_PASSWORD,b.a.CONTROL_TYPE_STAR_RATING,b.a.CONTROL_TYPE_TERMS_OF_SERVICE,b.a.CONTROL_TYPE_FORMULA,b.a.CONTROL_TYPE_COUPON,b.a.CONTROL_TYPE_FEE],n=this.rootController.form.flatten(),i=[O.ub.ENTRY_ID,O.ub.IP,O.ub.COUNTRY_CODE,O.ub.BROWSER,O.ub.DEVICE_TYPE,O.ub.REFERENCE_ID,O.ub.QUIZ_SCORE,O.ub.LANGUAGE,O.ub.PAYMENT_AMOUNT,O.ub.PAYMENT_CURRENCY,O.ub.PAYMENT_STATUS,O.ub.PAYMENT_PROCESSOR_NAME,O.ub.PAYMENT_COUPON,O.ub.SUBMISSION_STATUS,O.ub.FORM_NAME],r=Object(yo.i)(i,S.a.getExtraVariables()),a=S.a.generateFormVariables(n,t,r),o=Object(Vr.a)(this.rootController.store.getState());return Object(H.a)(a,(function(t){t.id&&e.isHipaaProtected(t.id,o.form)&&(t.disabled=!0,t.text="".concat(t.text," ").concat(yo.a.CONTROL_HIPAA_POSTFIX))})),a}},{key:"generateListWithEntitiesForSenderControls",value:function(){var e=this,t=this.rootController.defaultNotificationsPreferences,n=[],i=[b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_TEXTAREA,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_DROPDOWN],r=this.rootController.form.flatten();t?(n.push({text:t.fromEmail,value:t.fromEmail}),n.push({text:S.a.getUiTranslatedString("edt_notifications_my_email","My Email"),value:Eo.a.USER_EMAIL})):n.push({text:"noreply@123formbuilder.com",value:"noreply@123formbuilder.com"});var a=Object(Vr.a)(this.rootController.store.getState()),o=S.a.generateFormVariables(r,i,[]);return Object(H.a)(o,(function(t){t.id&&e.isHipaaProtected(t.id,a.form)&&(t.disabled=!0,t.text="".concat(t.text," ").concat(yo.a.CONTROL_HIPAA_POSTFIX))})),n.concat(o)}},{key:"mapEmailsToUIOptions",value:function(){return Object(po.a)(this.rootController.getPossibleFromEmails(),(function(e){return{text:e,value:e}}))}},{key:"computeFromEmailOptions",value:function(){var e=this.mapEmailsToUIOptions();return e.unshift({text:this.i18n.translateText("validationModal_addCustomEmail"),value:$a.ADD_CUSTOM_EMAIL},{text:"-----",value:"",disabled:!0}),e}},{key:"computeStatusOfFromEmail",value:function(){this.smtpServerController.isSMTPEnabled()?this.fromEmailComponent.getRoot().classList.add("disabled"):this.fromEmailComponent.getRoot().classList.remove("disabled")}},{key:"computeValueOfFromEmail",value:function(e){this.smtpServerController.isSMTPEnabled()&&this.smtpEmail&&(e=this.smtpEmail),this.fromEmailComponent.hasValue(e)||this.fromEmailComponent.addOption({text:e,value:e,hidden:!0}),e&&this.fromEmailComponent.setValue(e)}},{key:"generateAddAttachmentOptions",value:function(){var e=this,t=Object(Vr.a)(this.rootController.store.getState()),n={};return n[O.U.FILE]=S.a.getUiTranslatedString("notifications_file","File"),n[O.U.HTML_TO_PDF]=t.form.settings.isHipaa?S.a.getUiTranslatedString("notifications_submissions_pdf_hipaa","Submission PDF (not HIPAA compliant)"):S.a.getUiTranslatedString("notifications_submissions_pdf","Submission PDF"),n[O.U.FORM_LAYOUT]=t.form.settings.isHipaa?S.a.getUiTranslatedString("notifications_submissions_pdf_layout_hipaa","Submission PDF using form layout (not HIPAA compliant)"):S.a.getUiTranslatedString("notifications_submissions_pdf_layout","Submission PDF using form layout"),[{text:n[O.U.FILE],value:O.U.FILE,action:function(){return e.attachFile()}},{text:n[O.U.HTML_TO_PDF],value:O.U.HTML_TO_PDF,action:function(){return e.submissionPDF()}},{text:n[O.U.FORM_LAYOUT],value:O.U.FORM_LAYOUT,action:function(){return e.submissionPDFWithLayout()}}]}},{key:"attachFile",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.saveIfCannotUse(_o.a.ADD_FILE_ATTACHMENTS)){this.metricsService.track("settings_notifications_attach_file_click");var n=document.createElement("input");n.setAttribute("type","file"),n.style.cssText=" display: none; ",document.body.appendChild(n),n.addEventListener("change",(function(){var i,r=n.files.item(0),a=new FileReader;r.size>Eo.g.MAX_ATTACHMENT_FILE_SIZE?e.setResponseMessage(S.a.getUiTranslatedString("textdef_186","File exceeds the maximum allowed size 5MB","5MB"),!1,!0):(a.addEventListener("load",(function(){if(i=Object(yo.b)(a.result),e.isThisTypeOfAttachmentAdded(Eo.c.FILE)){var n=e.getRootNode().querySelector('[data-role="attachment-container"]');t&&n&&e.updateFileAttachmentContainer(r.name),e.removeAttachmentByType(Eo.c.FILE),e.addedAttachments.push({type:Eo.c.FILE,name:r.name,data:i})}else e.addedAttachments.push({type:Eo.c.FILE,name:r.name,data:i}),e.createAttachmentContainer(r.name,S.a.getUiTranslatedString("edt_notifications_attachment_type_file","File"),O.U.FILE)}),!1),r&&a.readAsArrayBuffer(r))})),n.click(),document.body.removeChild(n)}}},{key:"submissionPDF",value:function(){this.saveIfCannotUse(_o.a.ADD_SUBMISSION_PDF_ATTACHMENTS)||this.isThisTypeOfAttachmentAdded(Eo.c.HTML_TO_PDF)||this.openSubmissionPDFPopup()}},{key:"submissionPDFWithLayout",value:function(){if(!this.saveIfCannotUse(_o.a.ADD_FORM_LAYOUT_ATTACHMENTS)){this.metricsService.track("settings_notifications_layout_pdf_click");if(!this.isThisTypeOfAttachmentAdded(Eo.c.FORM_LAYOUT)){var e=this.rootController.form.getProperty("name.value");this.addedAttachments.push({type:Eo.c.FORM_LAYOUT,name:"".concat(e,".pdf")}),this.createAttachmentContainer("".concat(e,".pdf"),S.a.getUiTranslatedString("edt_notifications_attachment_type_form_layout","Form Layout"),O.U.FORM_LAYOUT)}}}},{key:"saveIfCannotUse",value:function(e){return!this.abilityService.can(e,this.getUpdatedModel())&&(this.saveEmailHandler(),!0)}},{key:"createAttachmentContainer",value:function(e,t,n){var i=this;if(e){var r=function(){},a=document.createElement("div");switch(a.setAttribute("data-role","attachment-name"),n){case O.U.HTML_TO_PDF:var o=S.a.getVariablesFromText(e,this.rootController.form.flatten());Object(H.a)(o,(function(e){var t=document.createElement("div");t.setAttribute("data-role",e.type),t.textContent=e.caption,a.appendChild(t)})),r=function(){i.openSubmissionPDFPopup(!0)};break;case O.U.FORM_LAYOUT:a.textContent=e;break;case O.U.FILE:a.textContent=e,r=function(){i.attachFile(!0),i.disableAndEnableOptions()};break;default:a.textContent=e}var s=document.createElement("div");s.setAttribute("data-role","attachment-container"),s.setAttribute("data-attachment-type",n),this.addAttachment.insertBefore(s,this.addAttachmentDropdownButton.getRoot());var l=document.createElement("div");l.setAttribute("data-role","attachment-tag"),l.textContent=t,s.appendChild(l),s.appendChild(a);var c=document.createElement("div");return c.setAttribute("data-role","delete-attachment"),c.classList.add("i-lg"),c.classList.add("i123-close"),s.appendChild(c),c.addEventListener("click",(function(e){i.deleteAttachment(s),i.disableAndEnableOptions(),e.stopImmediatePropagation()})),this.disableAndEnableOptions(),this.addAttachmentDropdownButton.blurDropdown(),s.addEventListener("click",r,{passive:!0}),s}}},{key:"updateFileAttachmentContainer",value:function(e){e&&(this.addAttachment.querySelector('div[data-role="attachment-container"][data-attachment-type="'.concat(O.U.FILE,'"]')).querySelector('[data-role="attachment-name"]').textContent=e)}},{key:"disableAndEnableOptions",value:function(){var e=this,t=this.addAttachment.querySelectorAll("[data-role=dropdown-button-component] > [data-role=dropdown-button] > select > option");Object(H.a)(t,(function(t){var n=t.getAttribute("value");e.isThisTypeOfAttachmentAdded(n)?t.setAttribute("disabled","true"):t.hasAttribute("disabled")&&t.removeAttribute("disabled")}))}},{key:"deleteAttachment",value:function(e){var t=e.getAttribute("data-attachment-type");this.removeAttachmentByType(t),e.parentElement.removeChild(e)}},{key:"isThisTypeOfAttachmentAdded",value:function(e){for(var t=0,n=this.addedAttachments.length;t<n;t++)if(this.addedAttachments[t].type===e)return!0;return!1}},{key:"removeAttachmentByType",value:function(e){for(var t=0,n=this.addedAttachments.length;t<n;t++)if(this.addedAttachments[t].type===e){this.addedAttachments.splice(t,1);break}}},{key:"updateRecipientsAfterRulesPanel",value:function(e){if(this.removeMetricsEvents(),this.rulesOverlay.getIsAccordingToRules()){this.sendToComponent.setState(O.qb.ENABLED);var t=S.a.getUiTranslatedString("edt_notifications_according_to_rules","According to rules");this.sendToComponent.setValue([{type:oo.a.TAG,value:":accordingToRules:",caption:t}]),this.sendToComponent.setState(O.qb.FULLY_DISABLED),this.sendToComponent.getDropdownContainer().setAttribute("title",this.MODIFY_RULES),this.addRuleButtonComponent.withLabel("Modify rules","notifications_modify_rules")}else{this.sendToComponent.setState(O.qb.ENABLED),this.sendToComponent.getDropdownContainer().setAttribute("title",this.ADD_FIELDS);var n=e&&e.recipients?Object(yo.m)(e.recipients,this.rootController.form):this.rulesOverlay.getRuleRecipients();n.length>0?this.sendToComponent.setValue(n):this.sendToComponent.clearValues(),this.addRuleButtonComponent.withLabel("Add rules","notifications_add_rules")}this.addMetricsEvents(100)}},{key:"createNotificationRulesOverlayPanel",value:function(){var e,t=this;this.rulesPanel=(new uo).withId("notification-rules").withDependency("document",this.rootController.form).withDependency("i18n",this.rootController.i18n).withDependency("resourceManager",this.rootController.resourceManager).appendChild((this.rulesOverlay=new Yo(this.abilityService,this.currentModel)).withId("email-rules-overlay").setResourceURLAddress(null)).appendChild((new Lr).addPerfectScrollbar(this.rootController.commandDispatcher).appendChild((new br).withBackButton(!0).withCaption("Email rules","email_rules").withId("notification-rules-header")).appendChild((e=new cr).withId("notification-rules-panel-button").withLabel("Add rule","rules_add").on("click",(function(){t.rulesOverlay.hasAbilityToAddRule()?t.rulesOverlay.addRule():t.saveEmailHandler()})))),this.rulesOverlay.setAddRuleMenuPanelBtn(e),this.rulesOverlay.initialize(),this.rulesOverlay.initializePromise.then((function(){t.rulesPanel.getElementById("notification-rules-header").on("back",(function(){t.isFirstLoad=!1,t.updateRecipientsAfterRulesPanel(),t.getRootNode().removeEventListener("mousemove",t.performanceLimitMouseMove),window.tinymce||window.tinymce.get(t.bodyComponent.getTinyMCEId()).off("mousemove",t.performanceLimitMouseMove),t.rulesPanel.setOpened(!1),t.rulesPanel.getRootNode().style.display="none"})),Object(wr.a)((function(){t.rulesOverlay.getRootNode().querySelector('[data-role="menu-panel-header"]').onclick=function(){t.updateRecipientsAfterRulesPanel(),t.getRootNode().removeEventListener("mousemove",t.performanceLimitMouseMove),window.tinymce||window.tinymce.get(t.bodyComponent.getTinyMCEId()).off("mousemove",t.performanceLimitMouseMove),t.rulesPanel.setOpened(!1),t.rulesPanel.getRootNode().style.display="none"}}),300)}))}},{key:"createSaveButton",value:function(){this.buttonState={label:S.a.getUiTranslatedString("notifications_save","Save"),isDisabled:!0,classList:"btn btn-blue",disabledTitle:this.NO_CHANGES};var e=Qo({},this.buttonState,{onClick:this.saveEmailHandler.bind(this)});this.saveButton=new xn.a(e);var t=this.saveButton.getElement();this.getRootNode().querySelector('[data-role="edit-email-buttons"]').appendChild(t),this.currentModel||this.setDirtyState(!0)}},{key:"saveEmailHandler",value:function(){this.isSaveInProgress=!0,this.rootController.trigger("notification-save",this),this.disableSave(),this.metricsService.track("settings_notifications_email_save"),this.currentModel?this.metricsService.track("settings_notifications_email_edited"):this.metricsService.track("settings_notifications_email_created")}},{key:"setOpened",value:function(e){return window.tinymce&&window.tinymce.EditorManager&&window.tinymce.EditorManager.remove(),this.getDirtyState()&&e&&this.setDirtyState(!1),y()(_()(n.prototype),"setOpened",this).call(this,e),e||(this.rootController.ui&&(this.rootController.ui.closeAllNotifications(),this.getRootNode().removeAttribute("data-has-error")),this.rulesPanel&&this.rulesPanel.setOpened(!1)),qe.a.setCanMakeResize(!e),this}},{key:"selectFirstEmailControlInDropdown",value:function(e){var t=this.rootController.form.flatten();Object(H.a)(t,(function(t){t.getTypeId()===b.a.CONTROL_TYPE_EMAIL&&e.setSelectedOptionByValue("controlId:".concat(t.getId()))}))}},{key:"loadAttachmentsInContainer",value:function(e){var t=this;this.addedAttachments=[],this.resetAttachmentContainer();for(var n=function(n,i){t.addedAttachments.push(e[n]);var r=void 0;switch(e[n].type){case Eo.c.HTML_TO_PDF:r=S.a.getUiTranslatedString("edt_notifications_attachment_type_pdf","PDF");break;case Eo.c.FILE:r=S.a.getUiTranslatedString("edt_notifications_attachment_type_file","File");break;case Eo.c.FORM_LAYOUT:r=S.a.getUiTranslatedString("edt_notifications_attachment_type_form_layout","Form Layout")}t.createAttachmentContainer(e[n].name,r,e[n].type);var a=setInterval((function(){t.getRootNode().hasAttribute("data-loading-body")||clearInterval(a)}),100)},i=0,r=e.length;i<r;i++)n(i)}},{key:"resetAttachmentContainer",value:function(){var e=this.getRootNode().querySelectorAll('[data-role="attachment-container"]');e&&Object(H.a)(e,(function(e){e.parentElement.removeChild(e)})),this.disableAndEnableOptions()}},{key:"openSubmissionPDFPopup",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.metricsService.track("settings_notifications_plain_pdf_click");var n=window.UI.getJQuery();this.rootController.resourceManager.get("/modules/Typescript/Form/resources/attach-submission-pdf-dialog.html").then((function(i){var r=new Nt.a(i),a=e.rootController.ui.createDialog(S.a.getUiTranslatedString("notifications_attach_submissions_pdf","Attach submission PDF"),[{type:it.f.SAVE,callback:function(){y(t),c(),a.close()}},{type:it.f.CANCEL,callback:function(){c(),a.close()}}],{width:"700px",height:"540px"});n(a.body).addClass("attach-submission-pdf-dialog"),n(a.body).html(r.parse({}));var o=document.createElement("style");document.body.appendChild(o),e.rootController.commandDispatcher.correctCSSTransformTimerFunction(o,a.body);var s=Object(Vr.a)(e.rootController.store.getState()),l=e.findAttachmentByType(O.U.HTML_TO_PDF),c=function(){window.tinymce.remove("#".concat(u.getTinyMCEId()))},u=new So(201,e.abilityService,e.rootController.formId,e.rootController.resourceManager,e.rootController.api,e.rootController.ui,e.getInitializePromise(),s).withParentRoot(a.body).withParent("dialog").withForm(e.rootController.form).withTemplates(e.rootController.getNotificationApiResult().templates).withVariablesTemplates(e.rootController.getNotificationApiResult().variablesTemplates).withVariablesStyles(e.rootController.getNotificationApiResult().variablesStyles).init();u.on("notifications_add_form_variables_change",(function(){e.metricsService.track("settings_notifications_email_add_variable_dropdown_open")})),u.on("notifications_add_form_variable",(function(){e.metricsService.track("settings_notifications_email_add_variable_dropdown_insert")})),u.on("notifications-interaction-triggered",(function(){e.trigger("notifications-interaction-triggered")})),setTimeout((function(){l?u.setValue({body:l.html,name:S.a.getUiTranslatedString("edt_notifications_load_template","Load template"),type:"email",isVirtualTemplate:!0,contentType:O.V.HTML}):u.setDefaultValue()}),10),u.getRoot().setAttribute("data-name","body"),n(a.body).find("[data-role=body-editor]")[0].appendChild(u.getRoot());var d=L.a.createElement(L.a.ELEMENT_TYPE_TAGS,{componentName:go.a.COMPONENT_TYPE_PDF_NAME,allowText:!0,allowKeywords:!0,createValuesCallback:function(){return e.generateControlsListCompatibleWithPDFName()}}),p=e.rootController.form.flatten(),h=S.a.generateFormVariables(p),_=S.a.getVariableInfoByCode(h,O.ub.FORM_NAME),g=Object(yo.d)(" - "),m=S.a.getVariableInfoByCode(h,O.ub.ENTRY_ID);if(l){var f=l.name.replace(/\.pdf$/,""),E=S.a.getVariablesFromText(f,p);E&&d.setValue(E),t=!0}else d.setValue([{type:oo.a.TAG,value:_.value,caption:_.text},{type:oo.a.TEXT,value:g.value,caption:g.text},{type:oo.a.TAG,value:m.value,caption:m.text}]);d.replace(n(a.body).find("[data-role=pdf-name]")[0]),d.on("dropdown-open",(function(){e.metricsService.track("settings_notifications_email_add_variable_dropdown_open")})),d.on("ui_tags_container_variable_insert",(function(){e.metricsService.track("settings_notifications_email_add_variable_dropdown_insert")}));var y=function(){var t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i="";(i=d.getValue().length?Object(yo.g)(d.getValue()):"".concat(_.text).concat(g.text).concat(m.text)).match(new RegExp(/.*\.pdf$/))||(i+=".pdf"),n&&((t=e.getRootNode().querySelector('[data-role="attachment-container"][data-attachment-type="'.concat(O.U.HTML_TO_PDF,'"]'))).parentElement.removeChild(t),e.removeAttachmentByType(Eo.c.HTML_TO_PDF)),e.addedAttachments.push({type:Eo.c.HTML_TO_PDF,name:i,html:u.getValue()}),e.createAttachmentContainer(i,S.a.getUiTranslatedString("edt_notifications_attachment_type_pdf","PDF"),Eo.c.HTML_TO_PDF)}}))}},{key:"generateControlsListCompatibleWithPDFName",value:function(){var e=this,t=[b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_TEXTAREA,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_NAME,b.a.CONTROL_TYPE_FORMULA,b.a.CONTROL_TYPE_PHONE,b.a.CONTROL_TYPE_DATE,b.a.CONTROL_TYPE_TIME,b.a.CONTROL_TYPE_PRICE,b.a.CONTROL_TYPE_WEBSITE,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_DROPDOWN,b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_LIKERT_SCALE,b.a.CONTROL_TYPE_ADDRESS,b.a.CONTROL_TYPE_PASSWORD,b.a.CONTROL_TYPE_STAR_RATING,b.a.CONTROL_TYPE_TERMS_OF_SERVICE,b.a.CONTROL_TYPE_COUPON,b.a.CONTROL_TYPE_FEE],n=this.rootController.form.flatten(),i=Object(yo.i)([":formName:",":entryId:",":referenceId:"],S.a.getExtraVariables()),r=Object(Vr.a)(this.rootController.store.getState()),a=S.a.generateFormVariables(n,t,i);return Object(H.a)(a,(function(t){t.id&&e.isHipaaProtected(t.id,r.form)&&(t.disabled=!0,t.text="".concat(t.text," ").concat(yo.a.CONTROL_HIPAA_POSTFIX))})),a}},{key:"findAttachmentByType",value:function(e){for(var t=0;t<this.addedAttachments.length;t++)if(this.addedAttachments[t].type==e)return this.addedAttachments[t];return null}},{key:"disableSave",value:function(){this.saveButton&&this.saveButton.setState(Qo({},this.buttonState,{isDisabled:!0}))}},{key:"enableSave",value:function(){!this.isSaveInProgress&&this.saveButton&&this.saveButton.setState(Qo({},this.buttonState,{isDisabled:!1}))}},{key:"getRulesOverlay",value:function(){return this.rulesOverlay}}],[{key:"validateNameText",value:function(e){return/^[a-z0-9\-_ ]+$/i.test(e)}}]),n}(Oo);function ns(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var is=function(e){u()(n,e);var t=ns(n);function n(e){var i;return o()(this,n),(i=t.call(this,e)).getRootNode().setAttribute("data-role","email-empty-state-overlay"),i}return l()(n,[{key:"initialize",value:function(){var e=this;y()(_()(n.prototype),"initialize",this).call(this),this.initialized||(this.initialized=!0,this.rootController.resourceManager.get("/modules/Typescript/Form/resources/notifications/notifications-empty-panel.html").then((function(t){e.getRootNode().innerHTML=t,e.getRootNode().querySelector('[data-role="menu-panel-header"]').onclick=function(){e.setOpened(!1),e.rootController.panelGroup.setVisible(!0)},e.getRootNode().querySelector('[data-role="notifications-new-email-button"]').onclick=function(){e.rootController.trigger(Eo.b.NEW_EMAIL)},e.initializeResolve()})).fail((function(t){return e.initializeReject(t)})))}},{key:"updateNotificationDataInEditorFields",value:function(e){}},{key:"getUpdatedModel",value:function(){}},{key:"setResponseMessage",value:function(e,t,n){}},{key:"handleSuccessResponse",value:function(e){}},{key:"enableSave",value:function(){}},{key:"disableSave",value:function(){}}]),n}(Oo),rs=n(217);function as(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var os=function(e){u()(n,e);var t=as(n);function n(e,i){var r,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return o()(this,n),r=t.call(this),v()(A()(r),"notificationType",void 0),v()(A()(r),"rootController",void 0),v()(A()(r),"titleDOMNode",void 0),v()(A()(r),"descriptionDOMNode",void 0),v()(A()(r),"contentDOMNode",void 0),v()(A()(r),"menuButton",void 0),v()(A()(r),"uiMenuPopup",void 0),v()(A()(r),"model",void 0),v()(A()(r),"isDuplicable",void 0),r.notificationType=e,r.rootController=i,r.isDuplicable=a,r.getRootNode().setAttribute("data-role","notification-item"),r.titleDOMNode=document.createElement("span"),r.descriptionDOMNode=document.createElement("div"),r.descriptionDOMNode.setAttribute("data-role","item-description"),r.contentDOMNode=document.createElement("div"),r.contentDOMNode.setAttribute("data-role","notification-item-content"),r.contentDOMNode.setAttribute("x-ms-format-detection","none"),r.contentDOMNode.appendChild(r.titleDOMNode),r.contentDOMNode.appendChild(r.descriptionDOMNode),r.getRootNode().appendChild(r.contentDOMNode),r.createMenuButton(),r.addEventListeners(),r}return l()(n,[{key:"getType",value:function(){return this.notificationType}},{key:"getModel",value:function(){return this.model}},{key:"setModel",value:function(e){this.model=e}},{key:"setTitle",value:function(e,t){this.titleDOMNode.textContent=e,this.titleDOMNode.setAttribute("data-i18n-text",t),this.titleDOMNode.setAttribute("data-role","notification-title")}},{key:"setDescription",value:function(e,t){this.descriptionDOMNode.innerHTML=e,this.descriptionDOMNode.setAttribute("data-i18n-text",t),this.descriptionDOMNode.setAttribute("data-role","notification-description")}},{key:"setFormattedListDescription",value:function(e){var t=this;if(this.descriptionDOMNode.innerHTML="",!Object(Mr.a)(e)){var n=e.length;Object(H.a)(e,(function(e,i){t.descriptionDOMNode.appendChild(t.createListDescriptionElement(e,n,i)),t.descriptionDOMNode.innerHTML+=" "})),this.descriptionDOMNode.setAttribute("data-role","notification-description")}}},{key:"setFormattedListTitle",value:function(e){var t=this;if(this.titleDOMNode.innerHTML="",!Object(Mr.a)(e)){var n=S.a.getVariablesFromText(e,this.rootController.form.getControlsList());Object(H.a)(n,(function(e){if(e.type===oo.a.TAG){var n=document.createElement("i");n.textContent=e.caption,t.titleDOMNode.appendChild(n)}else t.titleDOMNode.appendChild(document.createTextNode(e.caption));t.titleDOMNode.innerHTML+=" "})),this.titleDOMNode.setAttribute("data-role","notification-title")}}},{key:"setActiveState",value:function(e){S.a.allBrowsersCompatibleScrollIntoView(this.getRootNode(),{block:"center"}),e?this.getRootNode().setAttribute("data-is-active","1"):this.getRootNode().removeAttribute("data-is-active")}},{key:"setSavingState",value:function(e){e?this.getRootNode().setAttribute("data-saving","1"):this.getRootNode().removeAttribute("data-saving")}},{key:"setDraftState",value:function(){this.setDescription("Draft","edt_notifications_draft_notification")}},{key:"setVirtualState",value:function(e){e?this.getRootNode().setAttribute("data-virtual-item","1"):this.getRootNode().removeAttribute("data-virtual-item")}},{key:"setErrorState",value:function(e){S.a.allBrowsersCompatibleScrollIntoView(this.getRootNode(),{block:"center"}),e?this.getRootNode().setAttribute("data-has-errors","1"):this.getRootNode().removeAttribute("data-has-errors")}},{key:"addEventListeners",value:function(){var e=this;this.uiMenuPopup=new rs.a(this.menuButton,window.UI.getJQuery()),this.uiMenuPopup.on("delete-notification",(function(){e.rootController.trigger("delete-notification-from-list",e)})),this.uiMenuPopup.on("duplicate-notification",(function(){e.rootController.trigger("duplicate-notification-from-list",e)})),this.getRootNode().onclick=function(){e.getRootNode().hasAttribute("data-is-active")||e.rootController.trigger("edit-notification",e)}}},{key:"createListDescriptionElement",value:function(e,t,n){var i=document.createElement("span");switch(i.setAttribute("data-role",e.type),e.value){case Eo.a.USER_EMAIL:i.textContent=S.a.getUiTranslatedString("edt_notifications_my_email","My Email");break;case Eo.a.USER_PHONE:i.textContent=S.a.getUiTranslatedString("edt_notifications_my_phone","My Phone Number");break;default:if(e.type!==Eo.j.CONTROL_ID||e.isDeleted)e.type===Eo.j.CONTROL_ID?i.textContent=S.a.getUiTranslatedString("edt_notifications_deleted_field",yo.a.DELETED_FIELD):i.textContent=e.value;else{var r=this.rootController.form.getElementById(~~e.value);i.textContent=r?S.a.getLabelOfFormControl(r)||"controlId: ".concat(e.value):S.a.getUiTranslatedString("edt_notifications_deleted_field",yo.a.DELETED_FIELD)}}return n<t-1&&(i.textContent+=","),i}},{key:"createMenuButton",value:function(){this.menuButton=document.createElement("button"),this.menuButton.setAttribute("data-role","menu-popup"),this.menuButton.setAttribute("title",S.a.getUiTranslatedString("notifications_tooltip_show_options","Show options")),this.createMenuItems(this.isDuplicable);var e=document.createElement("span");e.classList.add("i-lg","i123-more_vertical");var t=document.createElement("span");t.classList.add("i-lg","i123-warning"),t.setAttribute("data-role","error-icon"),this.menuButton.appendChild(e),this.menuButton.appendChild(t),this.getRootNode().appendChild(this.menuButton)}},{key:"createMenuItems",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=[{name:"Delete",action:"delete-notification","i18n-name":"delete_notification"}];e&&t.push({name:"Duplicate",action:"duplicate-notification","i18n-name":"duplicate_notification"}),this.menuButton.setAttribute("data-menu-items",JSON.stringify(t))}},{key:"refreshDropdownOptions",value:function(){this.uiMenuPopup.trigger("refreshOptions")}}]),n}(ar);function ss(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var ls=function(e){u()(n,e);var t=ss(n);function n(e){var i;return o()(this,n),i=t.call(this),v()(A()(i),"controller",void 0),i.controller=e,i}return l()(n,[{key:"getUserConfirmationForDiscardingUnsavedChanges",value:function(){return this.controller.getUserConfirmationForDiscardingUnsavedChanges()}}]),n}(lo);function cs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var us=function(e){u()(n,e);var t=cs(n);function n(){var e;o()(this,n),e=t.call(this),v()(A()(e),"captionText",void 0),v()(A()(e),"i18nCaptionText",void 0),v()(A()(e),"checkboxInputNode",void 0),v()(A()(e),"labelDOMNode",void 0),v()(A()(e),"domainAlias",window.location.host),v()(A()(e),"type",qi.CHECKBOX_COMPONENT),n.instanceID++,e.getRootNode().setAttribute("data-role","menu-panel-checkbox"),e.checkboxInputNode=document.createElement("input"),e.checkboxInputNode.setAttribute("type","checkbox"),e.checkboxInputNode.setAttribute("id","menu-panel-checkbox-v2-".concat(n.instanceID)),e.labelDOMNode=document.createElement("label"),e.labelDOMNode.setAttribute("data-role","label"),e.labelDOMNode.setAttribute("for","menu-panel-checkbox-v2-".concat(n.instanceID));var i=document.createElement("label");return i.setAttribute("data-role","checkbox-skin"),i.setAttribute("for","menu-panel-checkbox-v2-".concat(n.instanceID)),e.getRootNode().appendChild(e.checkboxInputNode),e.getRootNode().appendChild(i),e.getRootNode().appendChild(e.labelDOMNode),e.addPanelCheckboxEventListeners(),e}return l()(n,[{key:"withDomainAlias",value:function(e){return this.domainAlias=e,this}},{key:"withChecked",value:function(e){return this.checkboxInputNode.checked=e,this}},{key:"isChecked",value:function(){return this.checkboxInputNode.checked}},{key:"withCaption",value:function(e,t){return this.captionText=e,this.i18nCaptionText=t,this.labelDOMNode.textContent=this.captionText,this.labelDOMNode.setAttribute("data-i18n-text",this.i18nCaptionText),this}},{key:"getCaption",value:function(){return this.captionText}},{key:"addPanelCheckboxEventListeners",value:function(){}},{key:"trackEvent",value:function(e){var t;null===(t=CFTracker)||void 0===t||t.event(e),console.log("tracker :: ".concat(e))}}]),n}(ar);function ds(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(us,"instanceID",0);var ps=function(e){u()(n,e);var t=ds(n);function n(e,i){var r;return o()(this,n),r=t.call(this),v()(A()(r),"rootController",void 0),v()(A()(r),"errorDOMNode",void 0),v()(A()(r),"abilityService",void 0),v()(A()(r),"metricsService",void 0),v()(A()(r),"userService",void 0),r.rootController=e,r.appendErrorNode(),r.addEventListeners(),r.abilityService=i,r.metricsService=Ci.a.getInstance(),r.userService=Xt.a.getInstance(),r}return l()(n,[{key:"addPanelCheckboxEventListeners",value:function(){var e=this;this.checkboxInputNode.onchange=function(t){if(!e.userService.canUseSMTPInNotifications()){var n=Zt.a.USE_SMTP_EMAIL_NOTIFICATIONS,i={feature:n,target:e.userService.getUpgradeOptions(n)},r=Object(Dr.e)(i);return e.store.dispatch(r),t.preventDefault(),t.stopPropagation(),void setTimeout((function(){t.target.checked=!1}))}e.checkboxInputNode.checked?(e.getParent().getRootNode().setAttribute("data-smtp-server-checked","1"),e.metricsService.track("settings_notifications_smtp_click")):(e.getParent().getRootNode().removeAttribute("data-smtp-server-checked"),e.rootController.disableSMTP().then((function(){e.getRootNode().removeAttribute("data-has-errors"),e.rootController.trigger("smtp-protocol-disabled")})).catch((function(){return e.showError("edt_notifications_smtp_err_server_error")})))}}},{key:"addEventListeners",value:function(){var e=this;this.rootController.on("smtp-server-error",(function(t){return e.showError(t)}))}},{key:"appendErrorNode",value:function(){this.errorDOMNode=document.createElement("div"),this.errorDOMNode.setAttribute("data-role","smtp-panel-error"),this.getRootNode().appendChild(this.errorDOMNode)}},{key:"showError",value:function(e){this.errorDOMNode.textContent=this.rootController.i18n.translateText(e),this.getRootNode().setAttribute("data-has-errors","1")}}]),n}(us);function hs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var _s=function(e){u()(n,e);var t=hs(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"iconPlaceholderSpan",void 0),v()(A()(e),"captionPlaceholderSpan",void 0),v()(A()(e),"iconType",null),v()(A()(e),"captionText",void 0),v()(A()(e),"captionTextI18n",void 0),v()(A()(e),"imageIconURL",void 0),v()(A()(e),"iconFontClass",void 0),v()(A()(e),"expanderIconPlaceholder",void 0),v()(A()(e),"opened",!1),v()(A()(e),"isRegularItem",!1),v()(A()(e),"platformMetric",""),v()(A()(e),"type",qi.ITEM),e.getRootNode().setAttribute("data-role","menu-panel-item"),e.iconPlaceholderSpan=document.createElement("span"),e.iconPlaceholderSpan.setAttribute("data-role","icon"),e.getRootNode().appendChild(e.iconPlaceholderSpan),e.captionPlaceholderSpan=document.createElement("span"),e.captionPlaceholderSpan.setAttribute("data-role","caption"),e.getRootNode().appendChild(e.captionPlaceholderSpan),e.getRootNode().onclick=function(){e.trigger("click"),e.isRegularItem||e.setOpened(!0),e.initPlatformMetricsManager()},e}return l()(n,[{key:"withPlatformMetric",value:function(e){return this.platformMetric=e,this}},{key:"withImageIcon",value:function(e){this.iconType=Ki.ICON;var t=document.createElement("img");return t.src=e,this.iconPlaceholderSpan.textContent="",this.iconPlaceholderSpan.appendChild(t),this.iconPlaceholderSpan.setAttribute("data-icon-type","image"),this.imageIconURL=e,this.iconFontClass=void 0,this.getRootNode().setAttribute("data-icon-type","image"),this}},{key:"withCaption",value:function(e,t){return this.captionText=e,this.captionTextI18n=t,this.captionPlaceholderSpan.textContent=e,t?this.captionPlaceholderSpan.setAttribute("data-i18n-text",t):this.captionPlaceholderSpan.removeAttribute("data-i18n-text"),this}},{key:"getCaptionText",value:function(){return this.captionText}},{key:"getCaptionTextI18n",value:function(){return this.captionTextI18n}},{key:"withCustomFontIcon",value:function(e){return this.iconType=Ki.ICONFONT,this.iconPlaceholderSpan.setAttribute("data-icon-type","iconfont"),this.iconPlaceholderSpan.innerHTML='<span class="i123 i-lg '.concat(e,'"></span>'),this.imageIconURL=void 0,this.iconFontClass=e,this.getRootNode().setAttribute("data-icon-type","iconfont"),this}},{key:"getImageIconURL",value:function(){return this.imageIconURL}},{key:"getIconFontClass",value:function(){return this.iconFontClass}},{key:"appendChild",value:function(e){return this.expanderIconPlaceholder||e.type!==qi.COMPONENT||this.addExpanderIconToItem(),this.getChildren().push(e),e.withParent(this),this}},{key:"addExpanderIconToItem",value:function(){this.expanderIconPlaceholder=document.createElement("span"),this.expanderIconPlaceholder.setAttribute("data-role","expander"),this.expanderIconPlaceholder.innerHTML='<span class="i123 i123-arrow-right2"></span>',this.getRootNode().appendChild(this.expanderIconPlaceholder)}},{key:"setOpened",value:function(e){if(e){this.getParent()&&(this.getParent().setOpened(!0),gi.a.setNewUrl("publish-form",this.getRootNode().getAttribute("data-id")));for(var t=this.getParent().getChildren(),n=0,i=t.length;n<i;n++)t[n]!==this&&t[n].setOpened&&t[n].setOpened(!1);this.getRootNode().setAttribute("data-opened",""),this.openFirstChild(),this.opened=!0}else{for(var r=this.getChildren(),a=0,o=r.length;a<o;a++)r[a].setOpened&&r[a].setOpened(!1);this.getRootNode().removeAttribute("data-opened"),this.opened=!1}return this}},{key:"openFirstChild",value:function(){var e=this.getChildren()[0]||null;e&&(e.type!==qi.COMPONENT&&e.type!==qi.EXTENSION||e.render())}},{key:"withExpanderIconIncluded",value:function(e){return e&&(this.expanderIconPlaceholder||this.addExpanderIconToItem()),this}},{key:"withRegularItem",value:function(e){return e&&this.getRootNode()&&(this.getRootNode().setAttribute("data-is-regular-item","1"),this.isRegularItem=!0),this}},{key:"isOpened",value:function(){return this.opened}},{key:"initPlatformMetricsManager",value:function(){var e=this.getParent().getDependency(gr.PLATFORM_METRICS_DEPENDECY);""!==this.platformMetric&&null!==e&&e.trackPlatformMetric(this.platformMetric)}}]),n}(dr);function gs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ms(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var fs=function(e){u()(n,e);var t=ms(n);function n(e){var i;return o()(this,n),i=t.call(this),v()(A()(i),"rootController",void 0),v()(A()(i),"encryptionDropdownOptions",{auto:{type:Eo.o.AUTO,label:"Auto",i18nKey:"edt_notifications_smtp_protocol_auto"},none:{type:Eo.o.NONE,label:"None",i18nKey:"edt_notifications_smtp_protocol_none"},ssl:{type:Eo.o.SSL,label:"SSL",i18nKey:"edt_notifications_smtp_protocol_ssl"},tls:{type:Eo.o.TLS,label:"TLS",i18nKey:"edt_notifications_smtp_protocol_tls"}}),v()(A()(i),"ERR_SMTP_PORT_OUT_OF_RANGE",99),v()(A()(i),"ERR_SMTP_MISSING_KEY",12),v()(A()(i),"settings",void 0),i.rootController=e,i.getRootNode().onclick=function(){i.rootController.getSavedProtocolsPromise().then((function(){return i.setupSMTPConfigDialog()})).catch((function(){return i.rootController.trigger("smtp-server-error","edt_notifications_smtp_err_server_error")}))},i}return l()(n,[{key:"setupSMTPConfigDialog",value:function(){var e=this;return new Promise((function(t,n){e.rootController.resourceManager.get("/modules/Typescript/Form/resources/notifications/notifications-smtp-configuration-dialog.html").then((function(n){e.settings={host:"",port:null,userName:"",email:"",password:"",encryption:"auto"};var i=new Nt.a(n),r={enabled:!1,settings:e.settings,encryptionLabel:e.encryptionDropdownOptions[e.settings.encryption].label},a=e.rootController.getActiveSMTPProtocol();a&&(r.settings=e.settings=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gs(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a.settings),r.encryptionLabel=e.encryptionDropdownOptions[e.settings.encryption].label,r.enabled=e.rootController.isSMTPEnabled());var o=e.rootController.ui.createDialog(e.rootController.i18n.translateText("edt_notifications_smtp_dialog_title"),[{type:it.f.VALIDATE,callback:function(){return e.onValidateDialogButton(o)}},{type:it.f.CLOSE,callback:function(){return o.close()}}],{width:"600px",height:"650px"});o.body.setAttribute("data-dialog-role","notifications-smtp-configuration"),o.body.innerHTML=i.parse(r),e.rootController.commandDispatcher.addPerfectScrollbar(o.body),e.addDialogEventListeners(o.body),t()})).fail((function(){return n()}))}))}},{key:"onValidateDialogButton",value:function(e){var t=this,n=e.body.querySelector('input[data-role="smtp-validation-code"]').value;this.rootController.getValidationCodeResponse(n).then((function(n){n.error?(e.body.setAttribute("data-code-not-valid","1"),S.a.allBrowsersCompatibleScrollIntoView(e.body.querySelector('span[data-role="error-invalid-code"]'))):(e.body.removeAttribute("data-code-not-valid"),t.rootController.postNewProtocol(t.settings).then((function(n){n.error?t.manageSavingErrors(e.body,n.error[0]):(e.body.removeAttribute("data-error-saving-protocol"),t.rootController.trigger("smtp-protocol-enabled",t.rootController.getActiveSMTPProtocol()),e.close())})).catch((function(n){return t.manageSavingErrors(e.body,n)})))})).catch((function(){e.body.setAttribute("data-code-not-valid","1"),S.a.allBrowsersCompatibleScrollIntoView(e.body.querySelector('span[data-role="error-invalid-code"]'))}))}},{key:"addDialogEventListeners",value:function(e){var t=this,n=e.querySelector('[data-role="protocol-dropdown"]'),i=n.querySelector('[data-role="text-dropdown"]'),r=document.createElement("div");r.setAttribute("data-role","text-dropdown-overlay"),Object(H.a)(this.encryptionDropdownOptions,(function(e){var t=document.createElement("div");t.textContent=e.label,t.setAttribute("data-i18n-text",e.i18nKey),t.setAttribute("data-role","protocol-option"),t.setAttribute("data-name",e.label),t.setAttribute("data-type",e.type),r.appendChild(t)}));var a=r.querySelectorAll('[data-role="protocol-option"]');Object(H.a)(a,(function(n){n.onclick=function(){t.settings.encryption=n.getAttribute("data-type"),i.removeChild(r),e.querySelector('[data-role="protocol-dropdown"] [data-role="smtp-protocol-value"]').textContent=t.rootController.i18n.translateTextDefault(n.getAttribute("data-i18n-text"),n.getAttribute("data-name")),i.removeAttribute("data-dropdown-open")}})),n.onclick=function(e){var t=e.target.getAttribute("data-role");i.hasAttribute("data-dropdown-open")||"protocol-option"===t||(i.setAttribute("data-dropdown-open","1"),i.appendChild(r))};var o=e.querySelectorAll('[data-role="smtp-configuration"] input[type=text], [data-role="smtp-configuration"] input[type="password"]');Object(H.a)(o,(function(n){n.onblur=function(){var i=n.getAttribute("data-role").split("-").pop();t.settings[i]!==n.value&&(t.settings[i]="port"===i?~~n.value:n.value,e.removeAttribute("data-correct-credentials"))}}));var s=e.querySelector('[data-role="smtp-test-connection"]');s.onclick=function(){t.settings.port<1||t.settings.port>65535?t.manageConfigurationErrors(e,[{code:t.ERR_SMTP_PORT_OUT_OF_RANGE}]):(s.setAttribute("data-is-testing","1"),t.rootController.testConnection(t.settings).then((function(n){n.error&&n.error.length>0?t.manageConfigurationErrors(e,n.error):(e.removeAttribute("data-has-error"),e.setAttribute("data-correct-credentials","1"),S.a.allBrowsersCompatibleScrollIntoView(e.querySelector('input[data-role="smtp-validation-code"][type="text"]')),e.querySelector('span[data-role="smtp-email-value"]').textContent=t.settings.email),s.removeAttribute("data-is-testing")})).catch((function(n){t.manageConfigurationErrors(e,[n]),s.removeAttribute("data-is-testing")})))}}},{key:"manageConfigurationErrors",value:function(e,t){var n=e.querySelector('div[data-role="smtp-error"] span[data-role="smtp-error"]');if(e.setAttribute("data-has-error","1"),t[0]&&t[0].code)switch(t[0].code){case this.ERR_SMTP_MISSING_KEY:n.textContent=this.rootController.i18n.translateText("edt_notifications_smtp_err_incomplete");break;case this.ERR_SMTP_PORT_OUT_OF_RANGE:n.textContent=this.rootController.i18n.translateText("edt_notifications_smtp_err_port_out_of_bounds");break;default:n.textContent=this.rootController.i18n.translateText("edt_notifications_smtp_err_wrong_credentials")}else t[0]&&(n.textContent=this.rootController.i18n.translateText("edt_notifications_smtp_err_system_error"));S.a.allBrowsersCompatibleScrollIntoView(n),e.removeAttribute("data-correct-credentials")}},{key:"manageSavingErrors",value:function(e,t){var n=e.querySelector('div[data-role="verification-code"] span[data-role="error-saving-protocol"]');e.setAttribute("data-has-error","1"),e.setAttribute("data-error-saving-protocol","1"),e.removeAttribute("data-correct-credentials"),t.message&&(n.textContent=this.rootController.i18n.translateText("edt_notifications_smtp_err_saving")),S.a.allBrowsersCompatibleScrollIntoView(n)}}]),n}(_s);function Es(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var ys=function(e){u()(n,e);var t=Es(n);function n(e){var i;return o()(this,n),i=t.call(this),v()(A()(i),"_panelGroup",void 0),v()(A()(i),"_formId",void 0),v()(A()(i),"_api",void 0),v()(A()(i),"_ui",void 0),v()(A()(i),"_i18n",void 0),v()(A()(i),"_resourceManager",void 0),v()(A()(i),"_commandDispatcher",void 0),v()(A()(i),"_form",void 0),v()(A()(i),"_userDetails",void 0),v()(A()(i),"_defaultNotificationsPreferences",void 0),v()(A()(i),"_store",void 0),i._panelGroup=e.panelGroup,i._formId=e.formId,i._api=e.api,i._ui=e.ui,i._i18n=e.i18n,i._resourceManager=e.resourceManager,i._commandDispatcher=e.commandDispatcher,i._form=e.form,i._userDetails=e.userDetails,i._defaultNotificationsPreferences=e.defaultNotificationsPreferences,i._store=Object(Te.c)(),i}return l()(n,[{key:"panelGroup",get:function(){return this._panelGroup}},{key:"formId",get:function(){return this._formId}},{key:"api",get:function(){return this._api}},{key:"ui",get:function(){return this._ui}},{key:"i18n",get:function(){return this._i18n}},{key:"resourceManager",get:function(){return this._resourceManager}},{key:"form",get:function(){return this._form}},{key:"commandDispatcher",get:function(){return this._commandDispatcher}},{key:"userDetails",get:function(){return this._userDetails}},{key:"defaultNotificationsPreferences",get:function(){return this._defaultNotificationsPreferences}},{key:"store",get:function(){return this._store}}]),n}(ir.a);function Ts(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var vs=function(e){u()(n,e);var t=Ts(n);function n(e){var i;return o()(this,n),i=t.call(this,e),v()(A()(i),"savedProtocols",void 0),v()(A()(i),"activeProtocol",void 0),v()(A()(i),"challengeCode",void 0),v()(A()(i),"smtpEnabled",void 0),v()(A()(i),"savedProtocolsPromise",void 0),i.smtpEnabled=!1,i}return l()(n,[{key:"isSMTPEnabled",value:function(){return this.smtpEnabled}},{key:"getSavedProtocolsPromise",value:function(){return this.savedProtocolsPromise}},{key:"getActiveSMTPProtocol",value:function(){return this.activeProtocol||(this.activeProtocol=Object(Ur.a)(this.savedProtocols,(function(e){return e.isEnabled}))),this.activeProtocol}},{key:"fetchSavedProtocols",value:function(){var e=this;return this.savedProtocolsPromise=new Promise((function(t,n){e.api.GET("/".concat(Eo.m.NOTIFICATIONS,"/").concat(e.formId,"/").concat(Eo.m.SMTP_PROTOCOLS)).then((function(n){e.savedProtocols=n.protocols?n.protocols:[],e.smtpEnabled=!Object(Mr.a)(e.getActiveSMTPProtocol()),t(n)})).fail((function(e){return n(e)}))})),this.savedProtocolsPromise}},{key:"getValidationCodeResponse",value:function(e){var t=this;return new Promise((function(n,i){var r={code:e,challenge:t.challengeCode};t.api.POST_JSON("/".concat(Eo.m.NOTIFICATIONS,"/").concat(Eo.m.SMTP_PROTOCOLS_VERIFY),r).then((function(e){e.error&&i(e.error),e.result&&n(e)})).fail((function(e){return i(e)}))}))}},{key:"postNewProtocol",value:function(e){var t=this;return new Promise((function(n,i){var r={formId:t.formId,isEnabled:!0,type:"smtp",settings:e};t.api.POST_JSON("/".concat(Eo.m.NOTIFICATIONS,"/").concat(Eo.m.SMTP_PROTOCOLS),r).then((function(e){e.error&&i(e.error),e&&(t.savedProtocols.push(e),t.activeProtocol=e,t.smtpEnabled=t.activeProtocol.isEnabled,n(e))})).fail((function(e){return i(e)}))}))}},{key:"testConnection",value:function(e){var t=this;return new Promise((function(n,i){var r={formId:t.formId,isEnabled:!0,type:"smtp",settings:e};t.api.POST_JSON("/".concat(Eo.m.NOTIFICATIONS,"/").concat(Eo.m.SMTP_PROTOCOLS_TEST),r).then((function(e){t.challengeCode=e.challenge,n(e)})).fail((function(e){return i(e)}))}))}},{key:"disableSMTP",value:function(){var e=this;return new Promise((function(t,n){e.smtpEnabled&&e.api.PUT_JSON("/".concat(Eo.m.NOTIFICATIONS,"/").concat(Eo.m.SMTP_PROTOCOLS,"/").concat(e.activeProtocol.id,"/").concat(Eo.m.SMTP_STATUS),{isEnabled:!1}).then((function(){Object(Ur.a)(e.savedProtocols,(function(t){return t.id===e.activeProtocol.id})).isEnabled=!1,e.activeProtocol=null,e.smtpEnabled=!1,t()})).fail((function(){return n()}))}))}}]),n}(ys);function Os(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var bs=function(e){u()(n,e);var t=Os(n);function n(e){var i;return o()(this,n),i=t.call(this),v()(A()(i),"sidebarTour",void 0),v()(A()(i),"editorTour",void 0),v()(A()(i),"dependencies",void 0),v()(A()(i),"onboardingOverlay",void 0),v()(A()(i),"forceStop",void 0),v()(A()(i),"translationsService",void 0),v()(A()(i),"START_TOUR_TEXT_1",void 0),v()(A()(i),"START_TOUR_TEXT_2",void 0),v()(A()(i),"REMIND_ME_LATER_TEXT",void 0),v()(A()(i),"START_TOUR_BTN_TEXT",void 0),v()(A()(i),"SIDEBAR_STEP_TEXT",void 0),v()(A()(i),"SENDTO_STEP_TEXT",void 0),v()(A()(i),"WHEN_STEP_TEXT",void 0),v()(A()(i),"BODY_STEP_TEXT",void 0),v()(A()(i),"VARIABLES_STEP_TEXT",void 0),v()(A()(i),"SAVE_STEP_TEXT",void 0),v()(A()(i),"NEXT_TEXT",void 0),v()(A()(i),"DONE_TEXT",void 0),i.setupTranslations(),i.dependencies=e,i}return l()(n,[{key:"setupTranslations",value:function(){this.translationsService=new F.a,this.START_TOUR_TEXT_1=this.translationsService.translateTextDefault("notifications_onboarding_start_tour_text_1","%sGreat news!%s The notifications section has got a brand new interface and structure.","<strong>","</strong>"),this.START_TOUR_TEXT_2=this.translationsService.translateTextDefault("notifications_onboarding_start_tour_text_2","Click %sStart tour%s and explore the new features!","<strong>","</strong>"),this.REMIND_ME_LATER_TEXT=this.translationsService.translateTextDefault("notifications_onboarding_remind_me_later","Remind me later"),this.START_TOUR_BTN_TEXT=this.translationsService.translateTextDefault("notifications_onboarding_start_tour_btn","Start tour"),this.SIDEBAR_STEP_TEXT=this.translationsService.translateTextDefault("notifications_onboarding_sidebar_step","Quickly create and view emails, as well as setting up your own SMTP server."),this.SENDTO_STEP_TEXT=this.translationsService.translateTextDefault("notifications_onboarding_sendto_step","Add email recipients by writing email addresses, as well as adding email fields from the form by clicking the plus icon."),this.WHEN_STEP_TEXT=this.translationsService.translateTextDefault("notifications_onboarding_when_step","Choose the event in which you want the email to be sent."),this.BODY_STEP_TEXT=this.translationsService.translateTextDefault("notifications_onboarding_body_step","Load existing templates, create custom ones, and switch to plain text mode."),this.VARIABLES_STEP_TEXT=this.translationsService.translateTextDefault("notifications_onboarding_variables_step","Add fields from the form and other variables in the body of the email."),this.SAVE_STEP_TEXT=this.translationsService.translateTextDefault("notifications_onboarding_save_step","When you\u2019ve made all the necessary changes, just hit save, and the email will be sent at the next submission."),this.NEXT_TEXT=this.translationsService.translateTextDefault("notifications_onboarding_next_text","Next"),this.DONE_TEXT=this.translationsService.translateTextDefault("notifications_onboarding_done_text","Done")}},{key:"setup",value:function(){var e=this;window.Tour&&(this.sidebarSetupForMobileOnboarding(),this.sidebarTour=new window.Tour({steps:[this.getStepConfiguration(0),this.getStepConfiguration(1)],storage:!1,animation:!1,autoScroll:!0,onStart:function(){e.makeOverlayVisible()},onShown:function(){e.removeOverlayVisibleState()},onEnd:function(){e.removeOverlayVisibleState(),e.forceStop||(S.a.isMobileInteractionActive()?e.trigger("open-first-notification"):e.startEditorOnboarding())}}),this.addOnboardingOverlay())}},{key:"createEditorTour",value:function(){var e=this;this.editorTour=new window.Tour({steps:[this.getStepConfiguration(2),this.getStepConfiguration(3),this.getStepConfiguration(4),this.getStepConfiguration(5),this.getStepConfiguration(6)],storage:!1,animation:!1,autoScroll:!0,onNext:function(){e.makeOverlayVisible()},onShown:function(){e.removeOverlayVisibleState()},onEnd:function(){e.setOnboardedState(),document.body.classList.remove("notificatons-onboarding"),e.forceStop=!0,e.removeOnboardingOverlay()}})}},{key:"addOnboardingOverlay",value:function(){this.onboardingOverlay=document.createElement("div"),this.onboardingOverlay.classList.add("onboarding-overlay"),document.body.appendChild(this.onboardingOverlay)}},{key:"removeOnboardingOverlay",value:function(){this.onboardingOverlay&&this.onboardingOverlay.parentNode.removeChild(this.onboardingOverlay)}},{key:"makeOverlayVisible",value:function(){this.onboardingOverlay&&this.onboardingOverlay.classList.add("visible")}},{key:"removeOverlayVisibleState",value:function(){this.onboardingOverlay&&this.onboardingOverlay.classList.remove("visible")}},{key:"isOnboarded",value:function(){return this.dependencies&&this.dependencies.shouldShowNotificationsOnboarding}},{key:"setOnboardedState",value:function(){var e=this;if(this.dependencies&&this.dependencies.api)return this.dependencies.api.PUT_JSON("/v2/userfeatures/config",{key:"NotificationsV2Onboarded",value:"1"}).then((function(){e.dependencies.shouldShowNotificationsOnboarding=!1}))}},{key:"setRemindMeLaterState",value:function(){var e=this;if(this.dependencies&&this.dependencies.api)return this.dependencies.api.PUT_JSON("/v2/userfeatures/config",{key:"NotificationsV2OnboardingRemindLater",value:"1"}).then((function(){e.dependencies.shouldShowNotificationsOnboarding=!1}))}},{key:"startOnboarding",value:function(){this.setup(),this.sidebarTour.init(),this.sidebarTour.start(),this.adjustPositions()}},{key:"isVisible",value:function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}},{key:"getLastVisibleChild",value:function(e){for(var t=e.lastElementChild,n=e.children,i=e.childElementCount-1;!this.isVisible(t);)t=n[i-1];return t}},{key:"getStepConfiguration",value:function(e){var t={};switch(e){case 0:t=this.getWelcomeStepConfiguration();break;case 1:t=this.getSidebarStepConfiguration(1);break;case 2:t=this.getSendToStepConfiguration(2);break;case 3:t=this.getWhenStepConfiguration(3);break;case 4:t=this.getTemplatesStepConfiguration(4);break;case 5:t=this.getVariablesStepConfiguration(5);break;case 6:t=this.getSaveStepConfiguration(6)}return t}},{key:"getWelcomeStepConfiguration",value:function(){var e=this;return{placement:"auto",animation:!1,backdrop:!0,orphan:!0,content:this.START_TOUR_TEXT_1+"\n"+this.START_TOUR_TEXT_2,template:"<div class='popover tour notifications start-tour'> <div class='arrow'></div> <div class='i123-close close-icon' data-role='end'></div> <div class='popover-image'><img src='../../../modules/Typescript/Form/resources/images/notifications-onboarding.png' alt='Notifications Onboarding Popup'></div> <div class='popover-content'></div> <div class='popover-navigation'> <button class='btn btn-default' data-role='end'>".concat(this.REMIND_ME_LATER_TEXT,"</button> <button class='btn btn-start' data-role='next'>").concat(this.START_TOUR_BTN_TEXT,"</button> </div> </div>"),onShown:function(){var t=document.querySelector(".popover.notifications .close-icon"),n=document.querySelector('.popover.notifications .btn[data-role="end"]'),i=function(){e.setRemindMeLaterState(),e.forceStop=!0,e.removeOnboardingOverlay(),e.removeSetupForMobileOnboarding(),document.body.classList.remove("notificatons-onboarding")};t&&n&&(t.addEventListener("click",i),n.addEventListener("click",i)),document.body.classList.add("notificatons-onboarding")},onNext:function(){e.forceStop=!1}}}},{key:"getSidebarStepConfiguration",value:function(e){var t=this;return{element:'#notifications [data-role="scrollable-container"]',backdrop:!0,placement:S.a.isMobileInteractionActive()?"bottom":"right",animation:!1,content:this.SIDEBAR_STEP_TEXT,backdropPadding:this.calculateSidebarHighlightPadding(),template:this.getGeneralTooltipTemplate("sidebar-step",e,!0),onHide:function(){t.removeSetupForMobileOnboarding()}}}},{key:"getSendToStepConfiguration",value:function(e){return{element:'[data-role="edit-email-overlay"] [data-ui-role="ui-element"][data-type="tags"][data-name="send-to"]',backdrop:!0,placement:"bottom",animation:!1,content:this.SENDTO_STEP_TEXT,backdropPadding:this.calculateSendToPadding('[data-role="edit-email-overlay"] [data-ui-role="ui-element"][data-type="tags"][data-name="send-to"]'),template:this.getGeneralTooltipTemplate("sendto-step",e)}}},{key:"getWhenStepConfiguration",value:function(e){return{element:'[data-role="edit-email-overlay"] [data-control-name="when"]',backdrop:!0,placement:"bottom",animation:!1,content:this.WHEN_STEP_TEXT,backdropPadding:this.calculateWhenPadding('[data-role="edit-email-overlay"] [data-control-name="when"]'),template:this.getGeneralTooltipTemplate("when-step",e)}}},{key:"getTemplatesStepConfiguration",value:function(e){return{element:'[data-role="edit-email-overlay"] [data-role="body-editor-container"] [data-role="dropdown-component"]',backdrop:!0,placement:"bottom",animation:!1,title:"Hello",content:this.BODY_STEP_TEXT,backdropPadding:this.calculateBodyPadding('[data-role="edit-email-overlay"] [data-control-name="body"]'),template:this.getGeneralTooltipTemplate("body-step",e),onShow:function(){S.a.isMobileInteractionActive()&&document.querySelector('[data-role="edit-email-overlay"] [data-role="body-editor-container"] [data-role="dropdown-component"]').scrollIntoView({block:"center"})}}}},{key:"getVariablesStepConfiguration",value:function(e){return{element:'[data-role="edit-email-overlay"] [data-role="body-editor-container"] [data-role="add-form-variables"]',backdrop:!0,placement:"bottom",animation:!1,title:"Hello",content:this.VARIABLES_STEP_TEXT,backdropPadding:5,template:this.getGeneralTooltipTemplate("variables-step",e)}}},{key:"getSaveStepConfiguration",value:function(e){return{element:'[data-role="edit-email-overlay"] [data-role="buttons-container"] [data-role="edit-email-buttons"] button',backdrop:!0,placement:"top",animation:!1,title:"Hello",content:this.SAVE_STEP_TEXT,backdropPadding:7,template:this.getGeneralTooltipTemplate("save-step",e,!0)}}},{key:"calculateSidebarHighlightPadding",value:function(){var e=document.querySelector('#notifications [data-role="scrollable-container"]'),t=this.getLastVisibleChild(e).getBoundingClientRect(),i=e.getBoundingClientRect(),r=-(i.bottom-t.bottom-10);return{top:-10,left:-10,right:-10,bottom:t.bottom>i.bottom-n.MAX_HEIGHT_OF_SIDEBAR_TOOLTIP?10:r}}},{key:"calculateSendToPadding",value:function(e){var t=document.querySelector(e),n=t.getBoundingClientRect(),i=t.previousElementSibling.getBoundingClientRect();return{top:n.top-i.top+20,left:S.a.isMobileInteractionActive()?10:20,right:S.a.isMobileInteractionActive()?10:20,bottom:20}}},{key:"calculateWhenPadding",value:function(e){var t=document.querySelector(e),n=t.getBoundingClientRect(),i=t.previousElementSibling.getBoundingClientRect();return{top:n.top-i.top+20,left:S.a.isMobileInteractionActive()?10:20,right:S.a.isMobileInteractionActive()?10:20,bottom:30}}},{key:"calculateBodyPadding",value:function(e){var t=document.querySelector(e),n=t.getBoundingClientRect(),i=t.previousElementSibling.getBoundingClientRect();return{top:n.top-i.top,left:5,right:5,bottom:5}}},{key:"adjustPositions",value:function(){var e=document.querySelector('[data-role="edit-email-overlay"] [data-role="buttons-container"] [data-role="edit-email-buttons"] button'),t=document.createElement("style"),n=this.calculateSidebarHighlightPadding();e&&(t.innerHTML=".popover.notifications.save-step { margin-left: ".concat(~~((e.getBoundingClientRect().width+14-350)/2),"px; }")),n&&(t.innerHTML+=".popover.notifications.bottom.sidebar-step { margin-top: ".concat(n.bottom+10,"px; }")),document.head.appendChild(t)}},{key:"getGeneralTooltipTemplate",value:function(e,t,i){return"<div class='popover tour notifications ".concat(e,"'> <div class='popover-content'></div> <div class='popover-navigation'> <div class=\"index\"> ").concat(t,"/").concat(n.NUMBER_OF_STEPS," </div> <button class='btn btn-default' data-role='").concat(i?"end":"next","'> ").concat(i&&t==n.NUMBER_OF_STEPS?this.DONE_TEXT:this.NEXT_TEXT,"</button> </div> </div>")}},{key:"startEditorOnboarding",value:function(){this.forceStop||(this.createEditorTour(),this.editorTour.init(),this.editorTour.start(),this.adjustPositions())}},{key:"sidebarSetupForMobileOnboarding",value:function(){if(S.a.isMobileInteractionActive()){var e=document.querySelector('#notifications [data-role="scrollable-container"]'),t=this.getLastVisibleChild(e),i=t.getBoundingClientRect(),r=e.getBoundingClientRect();i.bottom<r.bottom-n.MAX_HEIGHT_OF_SIDEBAR_TOOLTIP||(document.getElementById("notifications").style.paddingBottom=n.MAX_HEIGHT_OF_SIDEBAR_TOOLTIP+"px",t.scrollIntoView())}}},{key:"removeSetupForMobileOnboarding",value:function(){S.a.isMobileInteractionActive()&&(document.getElementById("notifications").style.paddingBottom="0")}}]),n}(ir.a);function Cs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Is(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cs(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(bs,"NUMBER_OF_STEPS",6),v()(bs,"MAX_HEIGHT_OF_SIDEBAR_TOOLTIP",150);var Ps=function(e){u()(n,e);var t=Rs(n);function n(e){var i;return o()(this,n),i=t.call(this,e),v()(A()(i),"EMAIL_AND_SMS_CAPTION",{text:"Notifications",i18n:"index_newEngineSettingsNotifications"}),v()(A()(i),"EMAIL_LABEL",{text:"New Email",i18n:"notifications_new_email_button_label"}),v()(A()(i),"EMAILS_CAPTION",{text:"Emails",i18n:"notification_items_header_emails"}),v()(A()(i),"OPTIONS_CAPTION",{text:"Options",i18n:"notification_items_header_options"}),v()(A()(i),"RES_ERR_MSG",{title:"Error loading component",message:"There was an error loading the notifications panel. Please try again. If the problem persist, please contact our support team"}),v()(A()(i),"API_ERR_MSG",{title:"Error loading component",message:"There was an error enumerating your form notifications. Please try again. If the problem persist, please contact our support team"}),v()(A()(i),"SIDEBAR_LOADING_ATTR","data-loading-sidebar"),v()(A()(i),"BODY_LOADING_ATTR","data-loading-body"),v()(A()(i),"NEW_EMAIL_BTN_ATTR","data-notifications-new-email-button"),v()(A()(i),"MAX_NUMBER_OF_NOTIFICATIONS",15),v()(A()(i),"dependencies",void 0),v()(A()(i),"initialFetchPromise",void 0),v()(A()(i),"notificationsDataPromise",void 0),v()(A()(i),"templatesDataPromise",void 0),v()(A()(i),"protocolDataPromise",void 0),v()(A()(i),"dataFetchStatus",void 0),v()(A()(i),"dataFetchResolve",void 0),v()(A()(i),"dataFetchReject",void 0),v()(A()(i),"identityPromise",void 0),v()(A()(i),"tinyMCEPromise",void 0),v()(A()(i),"accountUpgradeConfigPromise",void 0),v()(A()(i),"rootPanel",void 0),v()(A()(i),"scrollableComponent",void 0),v()(A()(i),"emailsContainer",void 0),v()(A()(i),"loadingEditor",void 0),v()(A()(i),"menuPanelRibbonContainer",void 0),v()(A()(i),"emptyEditorOverlay",void 0),v()(A()(i),"emailEditorOverlay",void 0),v()(A()(i),"newEmailButton",void 0),v()(A()(i),"notificationApiResult",void 0),v()(A()(i),"emailNotifications",void 0),v()(A()(i),"abilityService",void 0),v()(A()(i),"metricsService",void 0),v()(A()(i),"onboardingService",void 0),v()(A()(i),"smtpServerController",void 0),v()(A()(i),"currentVirtualId",void 0),v()(A()(i),"URLHandler",void 0),v()(A()(i),"features",void 0),v()(A()(i),"templatesPromise",void 0),v()(A()(i),"isFormChangesBinded",!1),v()(A()(i),"formChangesStarted",0),v()(A()(i),"formChangesEnded",0),v()(A()(i),"userService",void 0),v()(A()(i),"possibleFromEmails",[]),i.userService=Xt.a.getInstance(),i.URLHandler=gi.a,i.features=Fi.a.getInstance(),i.dependencies=e,i.abilityService=new _o.b,i.metricsService=Ci.a.getInstance(),i.setupOnboardingService(),i.currentVirtualId=1,i.init(),i}return l()(n,[{key:"setupOnboardingService",value:function(){var e=this;this.onboardingService=new bs({shouldShowNotificationsOnboarding:this.dependencies.userFeatures.shouldShowNotificationsOnboarding,api:this.dependencies.api}),this.onboardingService.on("open-first-notification",(function(){e.openNextNotification()}))}},{key:"getRootPanel",value:function(){return this.rootPanel}},{key:"getNotificationApiResult",value:function(){return this.notificationApiResult}},{key:"getSmtpServerController",value:function(){return this.smtpServerController}},{key:"init",value:function(){var e=this;this.createRootPanel(),this.appendPanelComponents(),this.appendLoadingStateComponent(),this.getCurrentIdentity(),this.addTinyMCEPromise(),this.rootPanel.on("show",(function(){e.metricsService.track("page_view_settings_notifications"),e.setLoadingState(Eo.h.BOTH),e.onPanelShownCb()})),this.fetchServerData().then((function(){e.emailNotifications=e.extractNotifications(Eo.l.EMAIL),Object(Te.a)()(Object(ve.n)(e.emailNotifications)),e.possibleFromEmails=e.notificationApiResult.possibleFromEmails,e.updateNotifications(),e.addEventListeners(),e.appendEditorComponents(),e.loadAllNotificationsIntoPanel(),e.checkForNotificationsLimit(),e.form.on("change",Object(re.a)((function(){e.dataFetchStatus=new Promise((function(t,n){e.dataFetchResolve=t,e.dataFetchReject=n})),e.isFormChangesBinded||(e.bindFormChange(),e.isFormChangesBinded=!0)}),300))}))}},{key:"onPanelShownCb",value:function(){var e=this;if(!this.isFormChangesFinished())return Object(wr.a)(this.onPanelShownCb.bind(this),1e3);Promise.all([this.dataFetchStatus,this.initialFetchPromise,this.protocolDataPromise,this.identityPromise,this.tinyMCEPromise,this.templatesPromise,this.accountUpgradeConfigPromise]).then((function(){e.updateNotifications(),S.a.isMobileInteractionActive()?(e.closeAllEditorPanels(),e.setLoadingState(Eo.h.NONE),e.panelGroup.setVisible(!0),e.startUserOnboarding()):e.openNextNotification()})).catch((function(){return e.ui.alert(e.API_ERR_MSG.title,e.API_ERR_MSG.message)}))}},{key:"bindFormChange",value:function(){var e=this;this.form.on("editor-save-form-started",(function(){e.formChangesStarted++})),this.form.on("editor-save-form-finished",(function(){e.formChangesEnded++,e.templatesPromise=e.fetchTemplatesData(),e.templatesPromise.then((function(t){e.notificationApiResult.templates=t.templates,e.notificationApiResult.variablesStyles=t.variablesStyles,e.notificationApiResult.variablesTemplates=t.variablesTemplates,e.dataFetchResolve();var n=e.getAllNotificationChildren();Object(H.a)(n,(function(t){P()(t,os)&&e.updateNotificationAndPanel(t)})),e.trigger("form-builder-changed")}))}))}},{key:"createRootPanel",value:function(){this.rootPanel=new ls(this).withId(go.b.NOTIFICATIONS_PANEL_ID).withDependency("jq",window.UI.getJQuery()).withDependency("editorPanelGroup",this.panelGroup)}},{key:"appendPanelComponents",value:function(){this.appendHeaderPanelComponent(),this.appendScrollablePanelComponent(),this.appendEmailPanelContainer(),this.appendSMTPComponent(),this.appendSMSRibbon()}},{key:"appendSMSRibbon",value:function(){var e='Need more? Send emails and SMS through Zapier apps. <a href="/index.php?p=settings&id='.concat(this.formId,'&tab=3&#zapierApps">Go to Apps</a>');this.menuPanelRibbonContainer=document.createElement("div"),this.menuPanelRibbonContainer.classList.add("menu-panel-ribbon"),this.menuPanelRibbonContainer.innerHTML=this.i18n.translateTextDefault("notifications_need_more_credits_ribbon","".concat(e),this.formId.toString()),this.scrollableComponent.getRootNode().appendChild(this.menuPanelRibbonContainer)}},{key:"appendLoadingStateComponent",value:function(){this.loadingEditor=new Er,this.loadingEditor.getRootNode().setAttribute("data-role","notifications-data-loading"),this.loadingEditor.getRootNode().setAttribute(this.BODY_LOADING_ATTR,""),this.scrollableComponent.appendChild(this.loadingEditor)}},{key:"appendEditorComponents",value:function(){this.appendEmptyNotificationEditorComponent(),this.appendEmailEditorOverlay()}},{key:"addEventListeners",value:function(){var e=this;this.on("notification-sub-view-back-button",(function(){e.panelGroup.setVisible(!0),e.removeActiveStateOnNotificationsList();var t=Object(ve.j)(O.d.NOTIFICATIONS);Object(Te.a)()(t)})),this.on("notification-header-back-button",(function(){e.onNotificationHeaderBackButton()})),this.on("edit-notification",(function(t){e.getUserConfirmationForDiscardingUnsavedChanges()&&(e.ui.closeAllNotifications(),e.setActiveAndEditNotification(t))})),this.on("delete-notification-from-list",(function(t){e.onDeleteHandler(t)})),this.on("duplicate-notification-from-list",(function(t){e.onDuplicateHandler(t)})),this.on("notification-save",(function(t){e.onSaveHandler(t)})),this.on(Eo.b.NEW_EMAIL,this.canAddNewEmailNotification.bind(this)),this.on("email-editor-loaded",(function(){S.a.isMobileInteractionActive()?e.onboardingService.startEditorOnboarding():e.startUserOnboarding()}));var t=window.header.getHeader().headerDiv.querySelector("#headerUpgrade a");t&&t.addEventListener("click",(function(){e.trigger("header-upgrade-button-click")}))}},{key:"loadAllNotificationsIntoPanel",value:function(){var e=this;Object(H.a)(hi()(this.emailNotifications),(function(t){e.renderNotificationPanelItem(t)})),this.toggleEmptyPanelContainers()}},{key:"appendHeaderPanelComponent",value:function(){var e=this,t=this.features.isBuilderSidebarExperimentActive();this.rootPanel.appendChild((new br).withBackButton(!t).withCaption(this.EMAIL_AND_SMS_CAPTION.text,this.EMAIL_AND_SMS_CAPTION.i18n).withCloseButton("inspector-close-button-container",t).on("back",(function(){t||e.getUserConfirmationForDiscardingUnsavedChanges()&&(e.onNotificationHeaderBackButton(),e.panelGroup.setActivePanel(Zi.EDITOR))})))}},{key:"appendScrollablePanelComponent",value:function(){var e=this,t=this.i18n.translateTextDefault("notifications_disabled_new_email_tooltip","You reached the limit of ".concat(this.MAX_NUMBER_OF_NOTIFICATIONS," emails created."),this.MAX_NUMBER_OF_NOTIFICATIONS.toString());this.newEmailButton=(new cr).withLabel(this.EMAIL_LABEL.text,this.EMAIL_LABEL.i18n).withDisabledTooltip(t).on("click",(function(){e.canAddNewEmailNotification()&&e.metricsService.track("settings_notifications_create_email_click")})),this.scrollableComponent=(new Lr).appendChild(this.newEmailButton),this.rootPanel.appendChild(this.scrollableComponent),this.newEmailButton.getRootNode().setAttribute(this.NEW_EMAIL_BTN_ATTR,""),this.scrollableComponent.addPerfectScrollbar(this.commandDispatcher)}},{key:"appendEmailPanelContainer",value:function(){this.emailsContainer=(new _r).appendChild((new Ir).setCaption(this.EMAILS_CAPTION.text,this.EMAILS_CAPTION.i18n)),this.scrollableComponent.appendChild(this.emailsContainer)}},{key:"appendSMTPComponent",value:function(){var e=this;this.smtpServerController=new vs(this.dependencies);var t=new ps(this.smtpServerController,this.abilityService).withId("notifications-SMTP-server-checkbox").withCaption("Use your own SMTP server","edt_notifications_setup_smtp_checkbox_txt"),n=new fs(this.smtpServerController).withId("notifications-SMTP-server-link").withCaption("Set up SMTP server","edt_notifications_setup_smtp_link_txt").withRegularItem(!0).withExpanderIconIncluded(!0);this.scrollableComponent.appendChild((new Ir).setCaption(this.OPTIONS_CAPTION.text,this.OPTIONS_CAPTION.i18n)),this.scrollableComponent.appendChild(t),this.scrollableComponent.appendChild(n),t.on("use-smtp-not-supported",(function(){e.trigger("use-smtp-not-supported")})),this.protocolDataPromise=this.smtpServerController.fetchSavedProtocols().then((function(){e.smtpServerController.isSMTPEnabled()?(t.withChecked(!0),e.scrollableComponent.getRootNode().setAttribute("data-smtp-server-checked","1")):(t.withChecked(!1),e.scrollableComponent.getRootNode().removeAttribute("data-smtp-server-checked"))})).catch((function(){e.smtpServerController.trigger("smtp-server-error","edt_notifications_smtp_err_saving")}))}},{key:"appendEmptyNotificationEditorComponent",value:function(){this.emptyEditorOverlay=new is(this).withId(go.b.NOTIFICATIONS_EDITOR_EMPTY_ID).setResourceURLAddress(null),this.scrollableComponent.appendChild(this.emptyEditorOverlay)}},{key:"appendEmailEditorOverlay",value:function(){this.emailEditorOverlay=new ts(this,this.abilityService).setResourceURLAddress(null),this.scrollableComponent.appendChild(this.emailEditorOverlay)}},{key:"fetchServerData",value:function(){var e=this;return this.initialFetchPromise=new Promise((function(t,n){e.dataFetchStatus=new Promise((function(t,n){e.dataFetchResolve=t,e.dataFetchReject=n}));Promise.all([e.fetchNotificationsData(),e.fetchTemplatesData()]).then((function(i){if(200!==i[0].status_code||200!==i[1].status_code)return n(e.API_ERR_MSG),void e.dataFetchReject(e.API_ERR_MSG);e.notificationApiResult={notifications:i[0].notifications,possibleFromEmails:i[0].possibleFromEmails,templates:i[1].templates,variablesStyles:i[1].variablesStyles,variablesTemplates:i[1].variablesTemplates},t(),e.dataFetchResolve()})).catch((function(){return t=e.API_ERR_MSG,e.ui.alert(t.title,t.message),void n(t);var t}))})),this.initialFetchPromise}},{key:"fetchNotificationsData",value:function(){var e=this;return this.notificationsDataPromise=new Promise((function(t,n){e.api.GET("/".concat(Eo.m.NOTIFICATIONS,"/").concat(e.formId)).then((function(e){return t(e)})).fail((function(e){return n(e)}))})),this.notificationsDataPromise}},{key:"fetchTemplatesData",value:function(){var e=this;return this.templatesDataPromise=new Promise((function(t,n){e.api.GET("/".concat(Eo.m.TEMPLATES,"/").concat(e.formId,"/").concat(Eo.m.NOTIFICATIONS_EMAIL_LIST)).then((function(e){return t(e)})).fail((function(e){return n(e)}))})),this.templatesDataPromise}},{key:"onSaveHandler",value:function(e){var t=this,i=Is({},e.getUpdatedModel());i.virtualId||(i.id||(i.isVirtual=!0,i.virtualId=this.currentVirtualId++),this.updateNotificationDataInPanelItem(i),e.setCurrentModel(i));var r=Is({},e.getUpdatedModel());if(delete r.isVirtual,delete r.virtualId,r.id){var a=i.type===Eo.l.EMAIL&&"notifications_save_email_error_message",o=i.type===Eo.l.EMAIL&&"The email could not be updated!";this.api.PUT_JSON("/".concat(Eo.m.NOTIFICATIONS,"/").concat(this.formId,"/").concat(r.id),r).then((function(r){if(r&&r.errorCodes&&r.errorCodes.length>0){var s=t.getNotificationFromList(i.id);t.updateNotificationDataInPanelItem(s),n.handleErrorCodeMessages(r,e)}else if(Object(kr.a)(r,"error"))t.setErroredNotification(i),e.getUpdatedModel().id===i.id&&e.setResponseMessage(S.a.getUiTranslatedString(a,o),!1);else{if(t.updateNotificationDataInList(r),t.updateNotificationDataInPanelItem(r),e.getOpened()&&e.getUpdatedModel().id===r.id){e.setCurrentModel(r);var l=i.type===Eo.l.EMAIL&&Eo.b.UPDATE_EMAIL;e.handleSuccessResponse(l)}e.setDirtyState(!1)}t.checkForNotificationsLimit()})).fail((function(r){n.isPayableError(r)?t.checkForPaywall(r):r&&r.errorCodes&&r.errorCodes.length>0?n.handleErrorCodeMessages(r,e):(t.setErroredNotification(i),e.getUpdatedModel().id===i.id&&e.setResponseMessage(S.a.getUiTranslatedString(a,o),!1))}))}else{var s=i.type===Eo.l.EMAIL&&"notifications_save_email_error_message",l=i.type===Eo.l.EMAIL&&"The email could not be saved!";this.api.POST_JSON("/".concat(Eo.m.NOTIFICATIONS,"/").concat(this.formId),r).then((function(r){if(r&&r.errorCodes&&r.errorCodes.length>0)n.handleErrorCodeMessages(r,e);else if(Object(kr.a)(r,"error"))Object(Mr.a)(e.getUpdatedModel().virtualId)||e.getUpdatedModel().virtualId!==i.virtualId||e.setResponseMessage(S.a.getUiTranslatedString(s,l),!1);else if(t.addNotificationDataInList(r),t.updateNotificationDataInPanelItem(Is({},i,{},r)),n.isNewlyCreatedNotificationOpened(e,i,r)){e.setCurrentModel(r);var a=i.type===Eo.l.EMAIL&&Eo.b.UPDATE_EMAIL;e.handleSuccessResponse(a),e.setDirtyState(!1)}t.checkForNotificationsLimit()})).fail((function(r){n.isPayableError(r)?t.checkForPaywall(r):r&&r.errorCodes&&r.errorCodes.length>0?n.handleErrorCodeMessages(r,e):(t.setErroredNotification(i),Object(Mr.a)(e.getUpdatedModel().virtualId)||e.getUpdatedModel().virtualId!==i.virtualId||e.setResponseMessage(S.a.getUiTranslatedString(s,l),!1))}))}}},{key:"onDeleteHandler",value:function(e){this.api.DELETE("/".concat(Eo.m.NOTIFICATIONS,"/").concat(this.formId,"/").concat(e.getModel().id)).then(this.checkForNotificationsLimit.bind(this)),this.removeNotificationDataInList(e.getModel());var t,n=this.emailEditorOverlay.getOpened()&&this.emailEditorOverlay.getUpdatedModel().id===e.getModel().id;t=this.emailEditorOverlay,this.emailNotifications=this.extractNotifications(Eo.l.EMAIL),this.deleteNotificationItemPanel(e),n&&(t.setOpened(!1),this.openNextNotification(e)),this.metricsService.track("settings_notifications_delete_block_click")}},{key:"onDuplicateHandler",value:function(e){if(this.canAddNotification(e.getType())){this.removeActiveStateOnNotificationsList(),this.removeVirtualNotificationItemIfAny();var t,n,i=new os(e.getType(),this);e.getType()===Eo.l.EMAIL&&(t=this.emailsContainer),i.setVirtualState(!0),i.setDraftState(),t.appendChild(i),i.setActiveState(!0);var r=Is({},e.getModel());delete r.id,Object(H.a)(r.attachments,(function(e){delete e.id})),this.emailEditorOverlay.updateNotificationDataInEditorFields(r),n=this.emailEditorOverlay,this.openEditorOverlay(n),this.onSaveHandler(n),this.metricsService.track("settings_notifications_duplicate_block_click")}}},{key:"triggerIfCannotUse",value:function(e,t){return!this.abilityService.can(e)&&(this.trigger(t),!0)}},{key:"triggerPaywall",value:function(e){var t={feature:e,target:this.userService.getUpgradeOptions(e)},n=Object(Dr.e)(t);Object(Te.a)()(n)}},{key:"openNextNotification",value:function(e){var t=this,n=this.getAllNotificationChildren(),i=Object(xr.a)(n,(function(e){return P()(e,os)&&e.getModel()&&e.getType()===Eo.l.EMAIL}));this.ui.closeAllNotifications(),this.closeAllEditorPanels(),this.removeActiveStateOnNotificationsList(),this.removeVirtualNotificationItemIfAny();var r=function(){return i.length>0&&(t.setActiveAndEditNotification(i[0]),!0)||(t.openEditorOverlay(t.emptyEditorOverlay),!0)};e?e.getType()===Eo.l.EMAIL&&r():r()}},{key:"setErroredNotification",value:function(e){var t=this.emailsContainer.getChildren();Object(H.a)(hi()(t),(function(t){P()(t,os)&&e.id&&e.id===t.getModel().id&&t.setErrorState(!0)}))}},{key:"renderNotificationPanelItem",value:function(e){var t,n,i,r,a=!1,o=this.getNotificationItemPanelById(e.id);if(o||(o=this.getVirtualNotificationById(e.virtualId))&&(delete e.isVirtual,delete e.virtualId),o||(o=this.getVirtualNotification()),!o){a=!0;var s=!this.isNotificationOfTypeLimitReached(e.type);o=new os(e.type,this,s)}switch(o.setModel(e),o.setErrorState(!1),e.type){case Eo.l.EMAIL:t=Eo.e.EMAIL_TEXT,n=Eo.e.EMAIL_I18N_KEY,i=e.subject,r=this.emailsContainer;break;default:throw new Error("Unknown notification type to render in editor")}switch(i?o.setFormattedListTitle(i):(o.setErrorState(!0),o.setTitle(t,n)),e.sendType){case Eo.i.TO_RECIPIENTS:o.setFormattedListDescription(e.recipients);break;case Eo.i.ACCORDING_TO_RULES:o.setDescription("According to rules","edt_notifications_according_to_rules");break;case Eo.i.ACCORDING_TO_APPROVALS:o.setDescription("According to approvals","edt_notifications_according_to_approvals");break;default:throw new Error("Unknown notification type to render in panel")}e.category===Eo.d.DRAFT&&(o.setDraftState(),o.setErrorState(!0)),e.id&&(o.getRootNode().setAttribute("data-notification-id",e.id.toString()),o.setVirtualState(!1)),a||e.id?o.setSavingState(!1):o.setSavingState(!0),a&&r.appendChild(o)}},{key:"addNotificationDataInList",value:function(e){this.notificationApiResult.notifications.push(e),this.emailNotifications.push(e);var t=Object(ve.b)(e);Object(Te.a)()(t)}},{key:"getNotificationFromList",value:function(e){return Object(Ur.a)(this.notificationApiResult.notifications,(function(t){return t.id===e}))}},{key:"updateNotificationDataInList",value:function(e){var t=Object(Fr.a)(this.notificationApiResult.notifications,(function(t){return t.id===e.id}));this.notificationApiResult.notifications[t]=e;var n=Object(ve.z)(e);Object(Te.a)()(n)}},{key:"removeNotificationDataInList",value:function(e){Object(Br.a)(this.notificationApiResult.notifications,(function(t){return t.id===e.id}));var t=Object(ve.l)(e.id,e.type);Object(Te.a)()(t)}},{key:"updateNotificationDataInPanelItem",value:function(e){this.renderNotificationPanelItem(e)}},{key:"updateNotificationDataInPanelItemByType",value:function(e){var t=this,n=e===Eo.l.EMAIL&&this.emailNotifications,i=!this.isNotificationOfTypeLimitReached(e);Object(H.a)(hi()(n),(function(e){var n=t.getNotificationItemPanelById(e.id);n.createMenuItems(i),n.refreshDropdownOptions()}))}},{key:"setActiveAndEditNotification",value:function(e){this.removeActiveStateOnNotificationsList(),this.removeVirtualNotificationItemIfAny(),e.setActiveState(!0),this.editNotification(e)}},{key:"onNotificationHeaderBackButton",value:function(){this.ui.closeAllNotifications(),this.removeActiveStateOnNotificationsList(),this.removeVirtualNotificationItemIfAny();var e=Object(ve.j)(O.d.EDITOR);Object(Te.a)()(e),this.URLHandler.setNewUrl(Zi.EDITOR)}},{key:"createNotification",value:function(e){var t;if(this.getUserConfirmationForDiscardingUnsavedChanges()){switch(e){case Eo.l.EMAIL:t=this.emailEditorOverlay;break;default:throw new Error("Unknown notification type to create")}t.updateNotificationDataInEditorFields(null),this.removeActiveStateOnNotificationsList(),this.removeVirtualNotificationItemIfAny();var n,i,r,a=new os(e,this);if(e===Eo.l.EMAIL){var o=this.emailEditorOverlay.getUpdatedModel();n=Eo.e.EMAIL_TEXT,i=Eo.e.EMAIL_I18N_KEY,r=this.emailsContainer,this.emailEditorOverlay.getRulesOverlay().setCurrentModel(o)}a.setVirtualState(!0),a.setTitle(n,i),a.setDraftState(),r.appendChild(a),a.setActiveState(!0),this.openEditorOverlay(t),t.setDirtyState(!0)}}},{key:"editNotification",value:function(e){var t,n=e.getModel();switch(n.type){case Eo.l.EMAIL:(t=this.emailEditorOverlay).updateNotificationDataInEditorFields(n);break;default:throw new Error("Unknown notification type to edit")}this.openEditorOverlay(t)}},{key:"updateNotificationAndPanel",value:function(e){var t=e.getModel();switch(t.type){case Eo.l.EMAIL:this.emailEditorOverlay.updateNotificationDataInEditorFields(t,!1),this.updateNotificationDataInPanelItem(this.emailEditorOverlay.getUpdatedModel());break;default:throw new Error("Unknown notification type to update")}}},{key:"deleteNotificationItemPanel",value:function(e){var t=e.getType()===Eo.l.EMAIL&&this.emailsContainer;t.removeChild(e),t.getRootNode().removeChild(e.getRootNode()),this.toggleEmptyPanelContainers()}},{key:"removeVirtualNotificationItemIfAny",value:function(){var e=this.getVirtualNotification();e&&!e.getRootNode().hasAttribute("data-saving")&&this.deleteNotificationItemPanel(e)}},{key:"getVirtualNotification",value:function(){var e=this.getAllNotificationChildren();return Object(Ur.a)(e,(function(e){return P()(e,os)&&e.getRootNode().hasAttribute("data-virtual-item")&&!e.getRootNode().hasAttribute("data-saving")}))}},{key:"getVirtualNotificationById",value:function(e){if(Object(Mr.a)(e))return null;var t=this.getAllNotificationChildren();return Object(Ur.a)(t,(function(t){return P()(t,os)&&t.getRootNode().hasAttribute("data-virtual-item")&&t.getModel()&&t.getModel().virtualId===e}))}},{key:"hasVirtualEmailNotification",value:function(){return Object(Yr.a)(this.emailsContainer.getChildren(),(function(e){return P()(e,os)&&e.getRootNode().hasAttribute("data-virtual-item")}))}},{key:"getNotificationItemPanelById",value:function(e){if(Object(Mr.a)(e))return null;var t=this.getAllNotificationChildren();return Object(Ur.a)(t,(function(t){return P()(t,os)&&t.getModel()&&t.getModel().id===e}))}},{key:"getAllNotificationChildren",value:function(){return hi()(this.emailsContainer.getChildren())}},{key:"extractNotifications",value:function(e){return Object(xr.a)(this.notificationApiResult.notifications,(function(t){return t.type===e}))}},{key:"openEditorOverlay",value:function(e){var t=this;this.setLoadingState(Eo.h.BODY),S.a.isMobileInteractionActive()&&this.panelGroup.setVisible(!1),e.setOpened(!0),e.getInitializePromise().then((function(){return t.setLoadingState(Eo.h.NONE)})).catch((function(){return t.ui.alert(t.RES_ERR_MSG.title,t.RES_ERR_MSG.message)}))}},{key:"setLoadingState",value:function(e){switch(e){case Eo.h.NONE:this.rootPanel.getRootNode().removeAttribute(this.SIDEBAR_LOADING_ATTR),this.loadingEditor.setOpened(!1);break;case Eo.h.BOTH:this.rootPanel.getRootNode().setAttribute(this.SIDEBAR_LOADING_ATTR,""),this.loadingEditor.setOpened(!0);break;case Eo.h.SIDEBAR:this.rootPanel.getRootNode().setAttribute(this.SIDEBAR_LOADING_ATTR,""),this.loadingEditor.setOpened(!1);break;case Eo.h.BODY:this.rootPanel.getRootNode().removeAttribute(this.SIDEBAR_LOADING_ATTR),this.loadingEditor.setOpened(!0)}}},{key:"removeActiveStateOnNotificationsList",value:function(){var e=this.emailsContainer.getChildren();Object(H.a)(hi()(e),(function(e){P()(e,os)&&e.getRootNode().hasAttribute("data-is-active")&&e.setActiveState(!1)}))}},{key:"toggleEmptyPanelContainers",value:function(){this.hasEmailNotifications()?this.emailsContainer.getRootNode().removeAttribute("data-visibility"):this.emailsContainer.getRootNode().setAttribute("data-visibility","none")}},{key:"hasEmailNotifications",value:function(){return this.hasVirtualEmailNotification()||this.emailNotifications&&this.emailNotifications.length>0}},{key:"getCurrentIdentity",value:function(){var e=this;this.identityPromise=this.userService.getCurrentIdentity().then((function(t){e.abilityService.setup(t)}))}},{key:"checkForNotificationsLimit",value:function(){var e=this.isNotificationOfTypeLimitReached(Eo.l.EMAIL);this.updateNewEmailButtonState(e),this.updateNotificationDataInPanelItemByType(Eo.l.EMAIL)}},{key:"updateNewEmailButtonState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?this.newEmailButton.disableButton():this.newEmailButton.enableButton()}},{key:"addTinyMCEPromise",value:function(){var e=this;this.tinyMCEPromise=new Promise((function(t,n){e.resourceManager.loadJavascript("/includes/tinymce_4.6.4/tinymce/js/tinymce/tinymce.min.js").then((function(){return Object(wr.a)((function(){return t()}),1e3)})).fail((function(){return n()}))}))}},{key:"isNotificationOfTypeLimitReached",value:function(e){return(e===Eo.l.EMAIL&&this.emailNotifications).length>=this.MAX_NUMBER_OF_NOTIFICATIONS}},{key:"checkForPaywall",value:function(e){try{var t=e.responseJSON.requiredAbility;this.abilityService.checkForPayableAbility(t)}catch(n){console.error(n)}}},{key:"closeAllEditorPanels",value:function(){this.emptyEditorOverlay.setOpened(!1),this.emailEditorOverlay.setOpened(!1)}},{key:"getUserConfirmationForDiscardingUnsavedChanges",value:function(){var e=!0;return this.emailEditorOverlay.getDirtyState()&&(this.metricsService.track("settings_notifications_unsaved_changes_popup_display"),(e=confirm(S.a.getUiTranslatedString("notifications_unsaved_changes_message","Changes you made may not be saved.")))?(this.emailEditorOverlay.setDirtyState(!1),this.metricsService.track("settings_notifications_unsaved_changes_leave_btn_click")):this.metricsService.track("settings_notifications_unsaved_changes_cancel_btn_click")),e}},{key:"getEmailNotificationById",value:function(e){return Object(Ur.a)(this.emailNotifications,(function(t){return t.id===e}))}},{key:"startUserOnboarding",value:function(){this.onboardingService&&this.onboardingService.isOnboarded()&&this.onboardingService.startOnboarding()}},{key:"updateNotifications",value:function(){var e=this;Object(H.a)(this.emailNotifications,(function(t){e.updateSenderAndRecipients(t.recipients)}))}},{key:"updateSenderAndRecipients",value:function(e){var t=this.form.flatten().map((function(e){return e.getId()})).filter((function(e){return null!==e}));Object(H.a)(e,(function(e){e.isDeleted=e.type===Eo.j.CONTROL_ID&&t.indexOf(parseInt(e.value))<0}))}},{key:"isFormChangesFinished",value:function(){return this.formChangesStarted===this.formChangesEnded}},{key:"canAddNewEmailNotification",value:function(){return this.canAddNotification(Eo.l.EMAIL)}},{key:"canAddNotification",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Eo.l.EMAIL,t=Zt.a.ADD_EMAIL_NOTIFICATION,n="new-email-not-supported",i=Object(Vr.a)(this.store.getState());return this.userService.canAddNotification(e,i)?(this.createNotification(e),this.toggleEmptyPanelContainers(),!0):(this.triggerPaywall(t),this.trigger(n),!1)}},{key:"getPossibleFromEmails",value:function(){return this.possibleFromEmails}}],[{key:"isPayableError",value:function(e){return e&&e.status&&(e.status===it.h.PAYMENT_REQUIRED||e.status===it.h.UNAUTHORISED)}},{key:"isNewlyCreatedNotificationOpened",value:function(e,t,n){return e.getOpened()&&!Object(Mr.a)(e.getUpdatedModel().virtualId)&&e.getUpdatedModel().virtualId===t.virtualId||e.getUpdatedModel().id===n.id}},{key:"handleErrorCodeMessages",value:function(e,t){var n=e.errorCodes[0],i="";n.code===Eo.f.ERR_ATTACHMENT_EXCEEDS_MAX_SIZE&&(i="5MB"),t.setResponseMessage(S.a.getUiTranslatedString(n.i18n||"notifications_save_email_error_message",n.message||"The email couldn't be saved!",i),!1,!0)}}]),n}(ys),Ns=n(112),As=n.n(Ns);n(563);function Ss(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Ls=di()(Tr,{}),Ds=di()("i",{className:"i-lg i123-search expandableSearch__trigger"}),ws=function(e){u()(n,e);var t=Ss(n);function n(e){var i;o()(this,n),i=t.call(this,e),v()(A()(i),"props",void 0),v()(A()(i),"state",void 0),v()(A()(i),"debouncedFn",void 0),v()(A()(i),"searchInput",void 0);var r=e.value,a=void 0===r?"":r,s=e.title,l=void 0===s?"":s,c=e.placeholder,u=void 0===c?"":c;As()(e,["value","title","placeholder"]);return i.state={value:a,title:l,placeholder:u,inputFocused:!1},i}return l()(n,[{key:"onBlur",value:function(){this.state.value||this.setState({inputFocused:!1})}},{key:"onFocus",value:function(){this.setState({inputFocused:!0})}},{key:"onChange",value:function(e){var t=this;e.persist(),this.debouncedFn||(this.debouncedFn=Object(re.a)((function(){t.props.onChangeCb&&t.props.onChangeCb(e.target.value)}),300)),this.debouncedFn(),this.setState({value:e.target.value})}},{key:"clearText",value:function(){this.setState({value:""}),this.searchInput.focus(),this.props.onClearCb&&this.props.onClearCb(),this.props.onChangeCb&&this.props.onChangeCb("")}},{key:"render",value:function(){var e=this,t=this.state.value,n=vi()("expandableSearch__wrapper",{"input-focused":this.state.inputFocused});return di()("div",{className:n},void 0,di()("span",{className:"caption"},void 0,this.state.title),Ls,di()("div",{className:"expandableSearch__input__wrapper"},void 0,Ds,Ei.a.createElement("input",{className:"expandableSearch__input",type:"text",onBlurCapture:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),onChange:this.onChange.bind(this),value:this.state.value,placeholder:this.state.placeholder,ref:function(t){e.searchInput=t}}),t&&di()("i",{className:"i-lg i123-close expandableSearch__clearText",onClick:this.clearText.bind(this)})))}}]),n}(fi.Component);v()(ws,"defaultProps",{});var ks=n(84);function Ms(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var xs=function(e){u()(n,e);var t=Ms(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"domainAlias",window.location.host),v()(A()(e),"domainProtocolPrefix","//"),v()(A()(e),"useThirdPartyShortener",!1),v()(A()(e),"isOnSalesforceCommunity",!1),v()(A()(e),"isOnSalesforceCommunityLoaded",!1),v()(A()(e),"showLearnMore",!0),v()(A()(e),"dependencies",{}),v()(A()(e),"model",{embedCode:"",embedTypeId:-1,embedOptions:{},showLearnMore:!0,isOnSalesforceCommunity:!1}),v()(A()(e),"hasEmbedCode",!1),v()(A()(e),"userService",void 0),v()(A()(e),"formPrefix",""),v()(A()(e),"customerEventService",ks.a.getInstance()),e.userService=Xt.a.getInstance(),e}return l()(n,[{key:"withPublishSettings",value:function(e){var t=e.publishSettings.baseDomain;return this.formPrefix=e.publishSettings.formPrefix,e.publishSettings.domainAliasOn&&null!==e.publishSettings.domainAliasURL&&""!==e.publishSettings.domainAliasURL&&(t=e.publishSettings.domainAliasURL,this.formPrefix=S.a.computeFormPrefixByDomainAliasURL(t)),e.publishSettings.ssl?this.domainProtocolPrefix="https://":this.getPanelType()==O.Z.LINK&&(this.domainProtocolPrefix="http://"),this.domainAlias=t,Object(Mr.a)(e.showLearnMore)||"boolean"!==typeof e.showLearnMore||(this.showLearnMore=e.showLearnMore),this}},{key:"withDependency",value:function(e,t){return this.dependencies[e]=t,this}},{key:"updateEmbedCode",value:function(){this.getEncryptedEmbedCode()}},{key:"includeHTMLOverlayComponentModuleFunctionality",value:function(){var e=this;return setTimeout((function(){var t=e.getRootNode().querySelector("[data-role=copy-code-button]"),i=e.getRootNode().querySelector("textarea[data-role=code-container]"),r=e.getRootNode().querySelector("[data-role=view-demo-button]"),a=e.getRootNode().querySelector(".publish-learn-more-link"),o=e.getRootNode().querySelector("[data-role=embed-form-button]"),s=e.getRootNode().querySelector("[data-role=install-app-button]"),l=e.getRootNode().querySelector("#publishOnSalesforceCommunity");null!==o&&(o.onclick=function(){if(e.trackPlatformMetric("publish_embed_btn_click"),void 0===e.dependencies.formId||void 0===e.dependencies.command)return!1;e.dependencies.command.publishFormOnWeebly(e.dependencies.formId,e.model.embedTypeId,e.model.embedOptions)}),null!==t&&(t.onclick=function(){e.copyToClipboard(t,n.COPIED_STATE_UPDATE_DELAY),e.trackCopyTextEvent(t)}),null!==i&&(i.onclick=function(){e.copyToClipboard(t,n.COPIED_STATE_UPDATE_DELAY),e.trackInputClickEvent()}),null!==r&&(r.onclick=function(){e.trackPlatformMetric("publish_example_click")}),null!==a&&(a.onclick=function(){e.trackEvent("publish_learn_more_click")}),null!==s&&(s.onclick=function(){window.open(Object(ft.b)(),"_blank"),e.trackEvent("publish_install_btn_facebook")}),null!==l&&(l.onchange=function(t){if(l.checked&&!e.userService.canPublishOnSalesforceCommunity())return l.checked=!1,t.preventDefault(),t.stopImmediatePropagation(),void e.triggerPaywall(Zt.a.PUBLISH_FORM_ON_SALESFORCE_COMMUNITY);if(l.checked=e.isOnSalesforceCommunity,e.isOnSalesforceCommunity){var n=e.getParent().getDependency("i18n");e.getDependency("UI").createDialog(n.translateText("publishTabCommunity_confirmTitle"),[{type:it.f.OK,callback:function(t,n){e.toggleSalesforceCommunityForm(l),n.close()}},{type:it.f.CANCEL,callback:function(e,t){t.close()}}],{width:"500px"}).setHTML(n.translateText("publishTabCommunity_confirmText"))}else e.toggleSalesforceCommunityForm(l)}),e.getEncryptedEmbedCode(),e.translateI18NElements()}),10),this.model.showLearnMore=this.showLearnMore,this.model}},{key:"copyEmbedCodeToClipboard",value:function(){var e=this.getParent().getDependency("jq"),t=e("<input readonly='readonly'>"),n=this.body.querySelector("[data-role=code-container]").textContent;e("body").append(t),t.val(n).select(),document.execCommand("copy"),t.remove()}},{key:"getEncryptedEmbedCode",value:function(){var e=this.model.embedCode,t=this.getParent().getDependency("jq");this.hasEmbedCode&&(e=this.model.embedCode),t.post("modules/publish/ajax_get_encrypted_embed_code.php",{embedMarkup:btoa(e)},(function(e){var t=document.getElementById("view_demo_code_holder");null!==t&&(t.value=e)}))}},{key:"trackCopyTextEvent",value:function(e){var t=this.getParent().getDependency("userFeatures")||{},n=e.dataset.publishSection;this.trackPlatformMetric("publish_copy_btn_click"),this.trackShareLinkEvent(n),t.firstPublish||(t.firstPublish=!0,S.a.getRootPanelComponent(this).trigger("user_feature_changed_boolean","firstPublish",t.firstPublish)),this.triggerFirstPublish()}},{key:"trackInputClickEvent",value:function(){var e=this.getParent().getDependency("userFeatures")||{};this.trackPlatformMetric("publish_input_click"),e.firstPublish||(e.firstPublish=!0,S.a.getRootPanelComponent(this).trigger("user_feature_changed_boolean","firstPublish",e.firstPublish)),this.triggerFirstPublish()}},{key:"translateI18NElements",value:function(){this.getParent().getDependency("i18n").translateDOMNode(this.getRootNode())}},{key:"copyToClipboard",value:function(e,t){var n=this;this.copyEmbedCodeToClipboard(),null!==e&&(e.textContent=this.translateDefaultText("publish_copy_button_copied","Copied")),setTimeout((function(){null!==e&&(e.textContent=n.translateDefaultText("publish_overlay_btn_copy_code","Copy code"))}),t)}},{key:"translateDefaultText",value:function(e,t){var n=this.getParent().getDependency("i18n");if(null===n)return console.warn("Translation service not available for translating ".concat(e,". No dependency defined.")),t;if(e&&t){var i=n.translateText(e);return i==e?t:i}return t}},{key:"triggerFirstPublish",value:function(){var e=this.getParent().getDependency("userFeatures")||{};e.firstPublish||(e.firstPublish=!0,S.a.getRootPanelComponent(this).trigger("user_feature_changed_boolean","firstPublish",e.firstPublish))}},{key:"trackPlatformMetric",value:function(e){this.metricsManager=this.getParent().getDependency(gr.PLATFORM_METRICS_DEPENDECY),null!==this.metricsManager&&this.metricsManager.trackPlatformMetric(e)}},{key:"getPanelType",value:function(){return null}},{key:"switchSalesforceCommunityToggle",value:function(e){var t=this.getRootNode().querySelector("#publishOnSalesforceCommunity");if(t){var n=t.parentElement;e?(t.removeAttribute("disabled"),n.removeAttribute("title"),n.classList.remove("switch--loading")):(t.setAttribute("disabled","true"),n.setAttribute("title",this.translateDefaultText("loading_pleaseWait","Loading, please wait...")),n.classList.add("switch--loading")),t.checked=this.isOnSalesforceCommunity}}},{key:"getIsOnSalesforceCommunity",value:function(){var e=this;if(this.isOnSalesforceCommunityLoaded)setTimeout((function(){e.switchSalesforceCommunityToggle(!0)}));else{var t=this.getDependency("jq"),n={action:"isFormPublishedInSalesforceCommunities",module:"modules/publish/ajax_calls.php",parameters:JSON.stringify({form_id:this.getDependency("formId"),user_id:this.getDependency("userId")})};t.ajax({url:"/ajax_call.php",method:"POST",data:n,dataType:"json",success:function(t){var n=t.isOnSalesforceCommunity;e.isOnSalesforceCommunity=n||!1,e.isOnSalesforceCommunityLoaded=!0,e.switchSalesforceCommunityToggle(!0)},error:function(t){switch(e.isOnSalesforceCommunity=!1,e.isOnSalesforceCommunityLoaded=!1,e.switchSalesforceCommunityToggle(!0),t.status){case 401:throw new Error("You are not authorized to perform this action!");case 500:throw new Error("Looks like something went wrong at our end. Try again and if the issue persists, get in touch.");default:throw new Error("Oops! Something went wrong. Please try again and if the issue persists, get in touch.")}}})}}},{key:"toggleSalesforceCommunityForm",value:function(e){var t=this;this.switchSalesforceCommunityToggle(!1);var n=!e.checked,i=this.getDependency("jq"),r={action:"salesforceCommunityPublishV2",publish:n,module:"modules/publish/ajax_calls.php",parameters:JSON.stringify({form_id:this.getDependency("formId"),user_id:this.getDependency("userId")})};i.ajax({url:"/ajax_call.php",method:"POST",data:r,dataType:"json",success:function(i){var r=i.success;r&&(t.isOnSalesforceCommunity=n,e.checked=n),t.switchSalesforceCommunityToggle(!0)},error:function(e){switch(t.switchSalesforceCommunityToggle(!0),e.status){case 401:t.triggerPaywall(Zt.a.PUBLISH_FORM_ON_SALESFORCE_COMMUNITY);break;case 500:throw new Error("Looks like something went wrong at our end. Try again and if the issue persists, get in touch.");default:throw new Error("Oops! Something went wrong. Please try again and if the issue persists, get in touch.")}}})}},{key:"triggerPaywall",value:function(e){var t={feature:e,target:this.userService.getUpgradeOptions(e)},n=Object(Dr.e)(t);Object(Te.a)()(n)}},{key:"trackShareLinkEvent",value:function(e){var t=e.toLowerCase();["embed","link","platforms"].includes(t)&&this.customerEventService.triggerEvent(ks.b.SHARE_LINK,{sharingOption:t})}}]),n}(Er);function Us(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(xs,"COPIED_STATE_UPDATE_DELAY",5e3);var Fs=function(e){u()(n,e);var t=Us(n);function n(){var e;return o()(this,n),(e=t.call(this)).getRootNode().setAttribute("data-overlay-type","big-commerce"),e.getRootNode().setAttribute("data-overlay-tab","bigcommerce"),e.getRootNode().setAttribute("data-overlay-embed-type","bigcommerce"),e}return l()(n,[{key:"getModel",value:function(){return this.trackEvent("page_view_publish_bigcommerce"),this.model.embedCode="\x3c!-- ".concat(this.domainProtocolPrefix).concat(this.domainAlias," script begins here --\x3e\n")+'<script type="text/javascript" defer src="'.concat(this.domainProtocolPrefix).concat(this.domainAlias,"/embed/")+"".concat(this.getDependency("formId"),'.js" data-role="form" data-default-width="650px"><\/script>\n')+"\x3c!-- ".concat(this.domainProtocolPrefix).concat(this.domainAlias," script ends here --\x3e"),this.model.embedTypeId=O.Z.APP_BIGCOMMERCE,this.includeHTMLOverlayComponentModuleFunctionality()}}]),n}(xs);function Bs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Ys=function(e){u()(n,e);var t=Bs(n);function n(){var e;return o()(this,n),(e=t.call(this)).getRootNode().setAttribute("data-overlay-type","blogger"),e.getRootNode().setAttribute("data-overlay-tab","blogger"),e.getRootNode().setAttribute("data-overlay-embed-type","blogger"),e}return l()(n,[{key:"getModel",value:function(){return this.trackEvent("page_view_publish_blogger"),this.model.embedCode="\x3c!-- ".concat(this.domainProtocolPrefix).concat(this.domainAlias," script begins here --\x3e\n")+'<script type="text/javascript" defer src="'.concat(this.domainProtocolPrefix).concat(this.domainAlias,"/embed/")+"".concat(this.getDependency("formId"),'.js" data-role="form"><\/script>\n')+"\x3c!-- ".concat(this.domainProtocolPrefix).concat(this.domainAlias," script ends here --\x3e"),this.model.embedTypeId=O.Z.APP_BLOGGER,this.includeHTMLOverlayComponentModuleFunctionality()}}]),n}(xs);function Vs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Hs=function(e){u()(n,e);var t=Vs(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"labelText",void 0),v()(A()(e),"i18nLabelText",void 0),v()(A()(e),"labelPlaceholderSpan",void 0),v()(A()(e),"textDropdownSpan",void 0),v()(A()(e),"dropdownItems",[]),v()(A()(e),"type",qi.DROPDOWN),e.getRootNode().setAttribute("data-role","menu-panel-dropdown"),e.labelPlaceholderSpan=document.createElement("span"),e.labelPlaceholderSpan.setAttribute("data-role","label"),e.textDropdownSpan=document.createElement("div"),e.textDropdownSpan.setAttribute("data-role","text-dropdown"),e.textDropdownSpan.textContent=void 0!==e.getItems()[0]?e.getItems()[0].caption:"none",e.getRootNode().appendChild(e.labelPlaceholderSpan),e.getRootNode().appendChild(e.textDropdownSpan),e.textDropdownSpan.onclick=function(){e.displayTextDropdown()},e}return l()(n,[{key:"withLabel",value:function(e,t){return this.labelText=e,this.i18nLabelText=t,this.labelPlaceholderSpan.textContent=this.labelText,this.labelPlaceholderSpan.setAttribute("data-i18n-text",this.i18nLabelText),this}},{key:"getCaption",value:function(){return this.labelText}},{key:"withItems",value:function(e){if(0!==e.length)for(var t=0,n=e.length;t<n;t++)this.dropdownItems.push({id:e[t].id,caption:e[t].caption,i18nKey:e[t].i18nKey});return this}},{key:"withSingleItem",value:function(e){return null!==e&&this.dropdownItems.push({id:e.id,caption:e.caption,i18nKey:e.i18nKey}),this}},{key:"withSelectedItemId",value:function(e){return e&&(this.textDropdownSpan.textContent=e,this.textDropdownSpan.title=e),this}},{key:"clearAllItems",value:function(){this.dropdownItems=[]}},{key:"getItems",value:function(){return this.dropdownItems}},{key:"displayTextDropdown",value:function(){var e=this;if(!this.getRootNode().hasAttribute("data-is-opened")){this.getRootNode().setAttribute("data-is-opened","1"),this.withVisibilityState(!0);var t,n=document.createElement("div");n.setAttribute("data-role","text-dropdown-overlay");for(var i=0,r=this.dropdownItems.length;i<r;i++)(t=document.createElement("div")).setAttribute("data-value",this.dropdownItems[i].caption),t.textContent=this.dropdownItems[i].caption,void 0!==this.dropdownItems[i].i18nKey&&t.setAttribute("data-i18n-text",this.dropdownItems[i].i18nKey),t.setAttribute("data-id",this.dropdownItems[i].id),n.appendChild(t);var a=function(t){var i=t.srcElement||t.target;i===n||$.contains(n,i)||i===e.getRootNode()||i.parentElement===e.getRootNode()||(e.getRootNode().removeAttribute("data-is-opened"),$(n).remove(),a=null)},o=function(t){var i=t.srcElement||t.target;i!==e.getRootNode()&&i.parentElement!==e.getRootNode()&&($.contains(n,i)&&null!==i.dataset.id&&(e.withSelectedItemId(i.textContent),e.handleDropdownComponentElementChangeEvent(i.textContent),$(n).remove()),o=null)};document.body.addEventListener("mousedown",o,!0),document.body.addEventListener("mousedown",a,!0),this.textDropdownSpan.appendChild(n)}}},{key:"withEmptyStatePlaceholder",value:function(e){return e&&(this.textDropdownSpan.textContent=e),this}},{key:"withBackendSetItems",value:function(e){var t=this;return 0!==e.length&&e.forEach((function(e,n){t.dropdownItems.push({id:n.toString(),caption:e})})),this}},{key:"handleDropdownComponentElementChangeEvent",value:function(e){}}]),n}(ar),Gs=function(){function e(t){o()(this,e),v()(this,"domainsDropdown",void 0),v()(this,"i18n",void 0),this.domainsDropdown=t||new Hs,this.i18n=new F.a}return l()(e,[{key:"displayDomainAliasAddDialog",value:function(e,t){var n=this,i=e.getUI().createDialog("Add domain alias",[{type:it.f.SAVE,callback:function(){n.addDomainAliasToDropdown(e,i)}},{type:it.f.CANCEL,callback:function(){i.close(),null!==t&&void 0!==t&&(t.checked=!1)}}],{width:"575px",onCloseButtonClick:function(){null!==t&&void 0!==t&&(t.checked=!1)}});return i.body.setAttribute("data-role","domain-aliasing-content"),i.body.setAttribute("data-testid","addDomainAliasModal"),i.body.innerHTML=this.generateHtml(e.getPlatformDetails()),i}},{key:"generateHtml",value:function(e){var t=this.getModalText(e);return'\n            <div class="modal__add-domain-alias" '.concat(e.isWix?'data-server="wix-platform"':"",">\n                ").concat(this.getIntroDiv(t.intro,t.learnMore,t.learnMoreLink),"\n                ").concat(this.getStepsDiv(t.firstStep,t.secondStep,t.thirdStep),'\n                <label for="domainAlias">').concat(t.domainAlias,'</label>\n                <input id="domainAlias" data-role="domain-value" type="text" placeholder="').concat(t.inputPlaceholderText,'">\n                <div data-role="domain-alias-error" data-i18n-text="publish_da_domain_error">\n                    <div data-role="domain-alias-error" data-i18n-text="publish_da_domain_error">').concat(t.domainAliasError,' <a href="').concat(t.contactUsHref,'" target="_blank"> ').concat(t.contactUs,"</a>. </div>\n                </div>\n            </div>\n        ")}},{key:"getIntroDiv",value:function(e,t,n){var i=t&&t.length>0?'<a href="'.concat(n,'" target="_blank" data-i18n-text="publish_overlay_learn_more"> ').concat(t,"</a>"):"";return'<div data-i18n-text="publish_da_enter_domain">                                                          '.concat(e).concat(i,"\n                </div>")}},{key:"getStepsDiv",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=function(){var e="";return Object(H.a)(t,(function(t){t&&(e+="<li>".concat(t,"</li>"))})),e};return'<div class="my-4">\n                    <ol class="pl-4">\n                        '.concat(i(),"\n                    </ol>\n                </div>")}},{key:"getModalText",value:function(e){return e.isWix?this.getWixModalText():this.getDefaultModalText()}},{key:"getDefaultModalText",value:function(){return{intro:this.i18n.translateTextDefault("domain_alias_customize_url","Customize the form URL by replacing the 123formbuilder domain with your own."),learnMore:this.i18n.translateTextDefault("learnMore","Learn more"),learnMoreLink:"//www.123formbuilder.com/docs/domain-aliasing/",firstStep:this.i18n.translateTextDefault("domain_alias_step_1","Get in touch and let us know which subdomain you want to use;"),secondStep:this.i18n.translateTextDefault("domain_alias_step_2","Take the CNAME record sent by us and set up your subdomain to point to it;"),thirdStep:this.i18n.translateTextDefault("domain_alias_step_3","Add your subdomain below and save the changes."),domainAliasError:this.i18n.translateTextDefault("domain_alias_cname_not_found","CNAME record was not found. Please set it up following the instructions below. If you need assistance, please"),contactUs:this.i18n.translateTextDefault("domain_alias_contact_us","contact us"),domainAlias:this.i18n.translateTextDefault("domain_alias_title","Domain alias"),contactUsHref:"/contactus.html",inputPlaceholderText:"eg. forms.yourdomain.com"}}},{key:"getWixModalText",value:function(){var e=this.getDefaultModalText();return{intro:e.intro,firstStep:this.i18n.translateTextDefault("domain_alias_step_1_wix","Add a custom domain name below and save the changes. Tip: use only lowercase, and avoid spaces, symbols or special characters."),secondStep:this.i18n.translateTextDefault("domain_alias_step_2_wix","Once it\u2019s saved \u201c.myfor.ms\u201d will be appended by default."),domainAliasError:e.domainAliasError,contactUs:e.contactUs,domainAlias:e.domainAlias,contactUsHref:e.contactUsHref,inputPlaceholderText:e.inputPlaceholderText}}},{key:"addDomainAliasToDropdown",value:function(e,t){var n=this,i=e.getJQuery(),r=i("[data-overlay-tab][data-overlay-embed-type]"),a="form-link",o="form-link";null!==r&&(a=r.attr("data-overlay-tab"),o=r.attr("data-overlay-embed-type"));var s=JSON.stringify({form_id:e.getFormId(),user_id:e.getUserId(),PHPSESSID:e.getSessionId(),needs_upgrade:!1,needs_alias_upgrade:0,tab:a,embed_type:o,activate_alias_option:!0});i.post("ajax_call.php",{module:"modules/publish/ajax_calls.php",action:"add_domain_alias",parameters:s,value:document.querySelector("[data-role=domain-value]").value},(function(r){var a=JSON.parse(r);if("OK"===a.status){if(null!==n.domainsDropdown){var o=a.new_alias,s=i("[data-role=menu-panel][data-number-of-existing-domains]"),l=parseInt(i(s).attr("data-number-of-existing-domains"));s.attr("data-number-of-existing-domains",l+1),s.attr("data-domain-alias-checkbox-state","true"),void 0!==n.domainsDropdown&&n.domainsDropdown.clearAllItems(),n.domainsDropdown.withSingleItem({id:"5",caption:o}).withSelectedItemId(o),0==l&&n.domainsDropdown.handleDropdownComponentElementChangeEvent(o)}i(t.body).has("data-domain-alias-error")&&i(t.body).removeAttr("data-domain-alias-error"),t.close()}else"UPGRADE"===a.status?e.getCommandDispatcher().triggerPaywall(it.k.DOMAIN_ALIAS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,a.toPlan):i(t.body).attr("data-domain-alias-error","1")}))}}]),e}();function Ws(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var js=function(e){u()(n,e);var t=Ws(n);function n(e,i){var r;return o()(this,n),r=t.call(this),v()(A()(r),"userService",void 0),v()(A()(r),"loader",void 0),v()(A()(r),"domainAliasDialog",void 0),v()(A()(r),"platformMetricsManager",void 0),r.userService=Xt.a.getInstance(),r.loader=e,r.domainAliasDialog=new Gs(i),r}return l()(n,[{key:"addPanelCheckboxEventListeners",value:function(){var e=this;setTimeout((function(){e.getRootNode().parentElement.setAttribute("data-domain-alias-checkbox-state",String(e.checkboxInputNode.checked))}),10),this.checkboxInputNode.onchange=function(){var t=0===+e.getRootNode().parentElement.getAttribute("data-number-of-existing-domains"),n=$("[data-overlay-tab][data-overlay-embed-type]"),i="form-link",r="form-link";e.trackPlatformMetric("publish_domain_alias_click"),null!==n&&(i=n.attr("data-overlay-tab"),r=n.attr("data-overlay-embed-type"));var a=e.isChecked(),o=JSON.stringify({form_id:e.getDependency("formId"),user_id:e.getDependency("userId"),PHPSESSID:e.getDependency("sessionId"),needs_upgrade:!1,needs_alias_upgrade:0,tab:i,embed_type:r,activate_alias_option:!0,selected_alias:e.domainAlias});e.userService.canUseFormDomainAliasing()?$.post("ajax_call.php",{module:"modules/publish/ajax_calls.php",action:"change_alias_option",parameters:o,value:a?1:0},(function(n){try{var i=JSON.parse(n);if("OK"===i.status)if(t)e.isChecked()&&e.domainAliasDialog.displayDomainAliasAddDialog(e.loader,e.checkboxInputNode);else{if(e.isChecked()){var r=document.querySelector('textarea[data-role="code-container"]');r&&(r.textContent=i.generated_code)}e.getRootNode().parentElement.setAttribute("data-domain-alias-checkbox-state",String(e.checkboxInputNode.checked))}else"UPGRADE"===i.status?(e.checkboxInputNode.checked=!1,e.triggerPaywall(Zt.a.ENABLE_FORM_DOMAIN_ALIASING)):(e.checkboxInputNode.checked=!1,e.getDependency("UI").alert("Error saving setting","There was an error saving the domain alias setting."))}catch(a){console.error(a)}})):(e.checkboxInputNode.checked=!1,e.triggerPaywall(Zt.a.ENABLE_FORM_DOMAIN_ALIASING))}}},{key:"trackPlatformMetric",value:function(e){this.platformMetricsManager||(this.platformMetricsManager=this.getParent().getDependency(gr.PLATFORM_METRICS_DEPENDECY)),this.platformMetricsManager.trackPlatformMetric(e)}},{key:"triggerPaywall",value:function(e){var t={feature:e,target:this.userService.getUpgradeOptions(e)},n=Object(Dr.e)(t);this.store.dispatch(n)}}]),n}(us);function Ks(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var zs=function(e){u()(n,e);var t=Ks(n);function n(e){var i;return o()(this,n),i=t.call(this),v()(A()(i),"jq",void 0),i.jq=e,setTimeout((function(){i.getRootNode().parentElement.setAttribute("data-number-of-existing-domains",i.getItems().length.toString())}),10),i}return l()(n,[{key:"handleDropdownComponentElementChangeEvent",value:function(e){var t=this,n=$("[data-overlay-tab][data-overlay-embed-type]"),i="form-link",r="form-link",a=e;null!==n&&(i=n.attr("data-overlay-tab"),r=n.attr("data-overlay-embed-type"));var o=JSON.stringify({form_id:this.getDependency("formId"),user_id:this.getDependency("userId"),PHPSESSID:this.getDependency("sessionId"),needs_upgrade:!1,needs_alias_upgrade:0,tab:i,embed_type:r,selected_alias:a});this.jq.post("ajax_call.php",{module:"modules/publish/ajax_calls.php",action:"change_domain_alias",parameters:o,value:a},(function(e){try{var n=JSON.parse(e);"OK"===n.status?document.querySelector('textarea[data-role="code-container"]').textContent=n.generated_code:t.getDependency("UI").alert("Error saving setting","There was an error adding the domain to the database.")}catch(i){console.error(i)}}))}}]),n}(Hs);function Xs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Zs=function(e){u()(n,e);var t=Xs(n);function n(){var e;return o()(this,n),(e=t.call(this)).getRootNode().setAttribute("data-overlay-type","facebook"),e.getRootNode().setAttribute("data-overlay-tab","facebook"),e.getRootNode().setAttribute("data-overlay-embed-type","facebook"),e}return l()(n,[{key:"getModel",value:function(){return this.trackEvent("page_view_publish_facebook"),this.model.embedCode=Object(ft.b)(),this.model.embedTypeId=O.Z.APP_FACEBOOK,this.includeHTMLOverlayComponentModuleFunctionality()}},{key:"trackCopyTextEvent",value:function(){var e=this.getRootNode().querySelector("[data-role=copy-code-button]");return this.model.embedCode="EMBED CODE EXAMPLE FACEBOOK",this.model.embedTypeId=O.Z.APP_FACEBOOK,this.trackEvent("publish_copy_btn_facebook"),y()(_()(n.prototype),"trackCopyTextEvent",this).call(this,e),this.includeHTMLOverlayComponentModuleFunctionality()}},{key:"trackInputClickEvent",value:function(){y()(_()(n.prototype),"trackInputClickEvent",this).call(this),this.trackEvent("publish_copy_btn_facebook")}}]),n}(xs);function qs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Js=function(e){u()(n,e);var t=qs(n);function n(){var e;return o()(this,n),(e=t.call(this)).getRootNode().setAttribute("data-overlay-type","google-sites"),e.getRootNode().setAttribute("data-overlay-tab","google-sites"),e.getRootNode().setAttribute("data-overlay-embed-type","google-sites"),e}return l()(n,[{key:"getModel",value:function(){return this.trackEvent("page_view_publish_google"),this.model.embedCode="".concat(this.domainProtocolPrefix+this.domainAlias,"/google-sites-gadget-form-").concat(this.getDependency("formId"),".xml"),this.model.embedTypeId=O.Z.APP_GOOGLE,this.includeHTMLOverlayComponentModuleFunctionality()}}]),n}(xs);function Qs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var $s=function(e){u()(n,e);var t=Qs(n);function n(){var e;return o()(this,n),(e=t.call(this)).getRootNode().setAttribute("data-overlay-type","iframe"),e.getRootNode().setAttribute("data-overlay-tab","embed-code"),e.getRootNode().setAttribute("data-overlay-embed-type","iframe"),e}return l()(n,[{key:"getModel",value:function(){var e="".concat(this.domainProtocolPrefix+this.domainAlias,"/my-contact-form-").concat(this.getDependency("formId"),".html");return this.model.embedCode="\x3c!-- "+this.domainAlias+' script begins here --\x3e\n<iframe allowTransparency="true" style="min-height:300px; height:inherit; overflow:auto;" width="100%" id="contactform123" name="contactform123" marginwidth="0" marginheight="0" frameborder="0" src="'+e+'">\n<p>Your browser does not support iframes. The contact form cannot be displayed. Please use another contact method (phone, fax etc)</p>\n</iframe>\n\x3c!-- '+this.domainAlias+" script ends here --\x3e",this.model.embedTypeId=O.Z.IFRAME,this.includeHTMLOverlayComponentModuleFunctionality()}},{key:"onOverlayInitialized",value:function(){y()(_()(n.prototype),"onOverlayInitialized",this).call(this),this.trackPlatformMetric("page_view_publish_iframe")}}]),n}(xs);function el(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var tl=function(e){u()(n,e);var t=el(n);function n(){var e;return o()(this,n),(e=t.call(this)).getRootNode().setAttribute("data-overlay-type","javascript"),e.getRootNode().setAttribute("data-overlay-tab","embed-code"),e.getRootNode().setAttribute("data-overlay-embed-type","javascript"),e}return l()(n,[{key:"getModel",value:function(){return this.model.embedCode="\x3c!-- ".concat(this.domainAlias," script begins here --\x3e\n")+'<script type="text/javascript" defer src="'.concat(this.domainProtocolPrefix).concat(this.domainAlias,"/embed/")+"".concat(this.getDependency("formId"),'.js" data-role="form" data-default-width="650px"><\/script>\n')+"\x3c!-- ".concat(this.domainAlias," script ends here --\x3e"),this.model.embedTypeId=O.Z.JAVASCRIPT,this.includeHTMLOverlayComponentModuleFunctionality()}},{key:"onOverlayInitialized",value:function(){y()(_()(n.prototype),"onOverlayInitialized",this).call(this),this.trackPlatformMetric("page_view_publish_javascript")}}]),n}(xs);function nl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var il=function(e){u()(n,e);var t=nl(n);function n(){var e;return o()(this,n),(e=t.call(this)).getRootNode().setAttribute("data-overlay-type","joomla"),e.getRootNode().setAttribute("data-overlay-tab","joomla"),e.getRootNode().setAttribute("data-overlay-embed-type","joomla"),e}return l()(n,[{key:"getModel",value:function(){return this.trackEvent("page_view_publish_joomla"),this.model.embedCode="[123-form-builder i"+this.getDependency("formId")+"]",this.model.embedTypeId=O.Z.APP_JOOMLA,this.includeHTMLOverlayComponentModuleFunctionality()}}]),n}(xs);function rl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var al=function(e){u()(n,e);var t=rl(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"buttonBackgroundColorPicker",void 0),v()(A()(e),"buttonTextColorPicker",void 0),v()(A()(e),"fontValue","arialblk"),v()(A()(e),"fontPlacement","1"),v()(A()(e),"hasEmbedCode",!0),e.getRootNode().setAttribute("data-overlay-type","lightbox"),e.getRootNode().setAttribute("data-overlay-tab","embed-code"),e.getRootNode().setAttribute("data-overlay-embed-type","lightbox-text-link"),e}return l()(n,[{key:"withPublishSettings",value:function(e){return y()(_()(n.prototype),"withPublishSettings",this).call(this,e),this}},{key:"getModel",value:function(){var e=this;return setTimeout((function(){e.includeEventListeners(),e.appendUIColorPickerElement(),e.determineAndUpdateModelStateAccordingToEmbedType(),e.initUIDropDownElements(),e.getRootNode().hasAttribute("data-overlay-embed-type")&&-1!==e.getRootNode().getAttribute("data-overlay-embed-type").indexOf("lightbox")&&!e.getRootNode().hasAttribute("data-selected-embed-type")&&(e.getRootNode().setAttribute("data-selected-embed-type","0"),e.updateModelAccordingToEmbedType(0))}),10),this.model.embedCode=this.getEmbedCode(zi.TEXT),this.model.embedTypeId=O.Z.LIGHTBOX_TEXT_LINK,this.includeHTMLOverlayComponentModuleFunctionality()}},{key:"determineAndUpdateModelStateAccordingToEmbedType",value:function(){var e=void 0!==n.htmlOverlayHelper["embed-type"]?n.htmlOverlayHelper["embed-type"]:"",t=this.getHtmlOverlayHelperEmbedNumericAttribute(e)||0;document.querySelector('[data-role=lightbox-option][data-lightbox-type="'+t+'"]').setAttribute("data-is-selected","1"),this.updateModelAccordingToEmbedType(t)}},{key:"updateModelAccordingToEmbedType",value:function(e){document.getElementById("lightbox-embed-content").textContent=this.getEmbedCode(e),this.model.embedCode=this.getEmbedCode(e);var t=O.Z.LIGHTBOX_TEXT_LINK;switch(e){case zi.AUTO_POPUP:t=O.Z.LIGHTBOX_AUTO_POPUP;break;case zi.FLOATING_BUTTON:t=O.Z.LIGHTBOX_FLOATING_BUTTON;break;case zi.IMAGE:t=O.Z.LIGHTBOX_IMAGE_LINK;break;case zi.TEXT:default:t=O.Z.LIGHTBOX_TEXT_LINK}this.model.embedTypeId=t,document.getElementById("lightbox-section-title").textContent=this.getInputDefaultTitle(e),document.getElementById("lightbox-input-value").value=this.getInputContentValue(e),document.getElementById("lightbox-input-value").setAttribute("data-embed-type",""+e),this.setFloatingButtonProperties();var n=this.getRootNode().querySelector("[data-role=copy-code-button]");n&&(n.textContent="Copy code"),this.updateEmbedCode()}},{key:"setFloatingButtonProperties",value:function(){var e=this;setTimeout((function(){document.querySelector("[data-button-property-type=background-color] [data-type=color] div").style.backgroundColor=e.getFlotingButtonPropertyValue("background-color"),document.querySelector("[data-button-property-type=text-color] [data-type=color] div").style.backgroundColor=e.getFlotingButtonPropertyValue("text-color"),document.querySelector("[data-button-property-type=font] [data-role=dropdown-value-label]").textContent=e.getFlotingButtonPropertyValue("font"),document.querySelector("[data-button-property-type=placement] [data-role=dropdown-value-label]").textContent=e.getFlotingButtonPropertyValue("placement")}),10)}},{key:"includeEventListeners",value:function(){for(var e=this,t=this.getRootNode().querySelectorAll("[data-role=lightbox-option]"),n=0,i=t.length;n<i;n++){t[n].onclick=function(t){e.setChosenLightboxEmbedType(t),e.checkStickyActionBar()}}this.getRootNode().querySelector("[id=lightbox-input-value]").onkeyup=function(t){e.updateHtmlOverlayHelper(t)},setTimeout((function(){for(var t=e.getRootNode().querySelectorAll("[data-role=lightbox-properties-container] [data-ui-role=ui-element][data-type=color]"),n=0,i=t.length;n<i;n++)t[n].onchange=function(t){e.updateHtmlOverlayHelper(t)}}),10)}},{key:"updateHtmlOverlayHelper",value:function(e){var t=e.srcElement||e.target,i=+t.dataset.embedType||+this.getRootNode().dataset.selectedEmbedType,r="";"dropdown-value-label"===t.dataset.role||"text-dropdown-overlay"===t.parentElement.dataset.role?this.updateHtmlOverlayHelperForDropdowns(e,i):"color"===t.dataset.type?this.updateHtmlOverlayHelperForColorPickers(t,i):null!==t.value&&void 0!==i&&null!==(r=this.getHtmlOverlayHelperEmbedAttribute(+i))&&""!==r&&(n.htmlOverlayHelper[r]=t.value,document.getElementById("lightbox-embed-content").textContent=this.getEmbedCode(+i))}},{key:"updateHtmlOverlayHelperForColorPickers",value:function(e,t){var i=e.firstChild.style.backgroundColor;if(i&&void 0!==t){var r=this.getHtmlOverlayHelperEmbedAttribute(+t);if(null!==r&&""!==r){var a=e.closest("[data-role=lightbox-property]").dataset.buttonPropertyType;n.htmlOverlayHelper[r+"-"+a]=i}}}},{key:"updateHtmlOverlayHelperForDropdowns",value:function(e,t){var i=e.srcElement||e.target;if(void 0!==i.dataset.value){var r=this.getHtmlOverlayHelperEmbedAttribute(+t)||"",a=i.closest("[data-role=lightbox-property]").dataset.buttonPropertyType;n.htmlOverlayHelper[r+"-"+a]=document.querySelector("[data-button-property-type="+a+"] [data-role=dropdown-value-label]").textContent}}},{key:"setChosenLightboxEmbedType",value:function(e){var t=this.getRootNode().querySelectorAll("[data-role=lightbox-option]"),i=e.srcElement||e.target;if(i.hasAttribute("data-lightbox-type")){var r=+i.getAttribute("data-lightbox-type");i.setAttribute("data-is-selected","1"),n.htmlOverlayHelper["embed-type"]=this.getHtmlOverlayHelperEmbedAttribute(+r),this.updateModelAccordingToEmbedType(r),this.getRootNode().setAttribute("data-selected-embed-type",""+r),this.getRootNode().setAttribute("data-overlay-tab",i.getAttribute("data-overlay-tab")),this.getRootNode().setAttribute("data-overlay-embed-type",i.getAttribute("data-overlay-type"))}for(var a=0,o=t.length;a<o;a++)null!==t[a]&&i!==t[a]&&t[a].removeAttribute("data-is-selected")}},{key:"getEmbedCode",value:function(e){var t="\x3c!-- ".concat(this.domainAlias," script begins here --\x3e\n")+'<script type="text/javascript" defer src="'.concat(this.domainProtocolPrefix).concat(this.domainAlias,"/embed/")+"".concat(this.getDependency("formId"),'.js?type=lightbox" data-role="form" data-default-width="650px"'),i=this.getHtmlOverlayHelperEmbedAttribute(e),r=n.htmlOverlayHelper[i];switch(e){case zi.TEXT:var a=void 0!==r?r:"Contact us";t+='data-embed-type="lightbox-text-link" data-embed-text-link="'+a+'"',this.model.embedOptions["data-embed-type"]="lightbox-text-link",this.model.embedOptions["data-embed-text-link"]=a;break;case zi.IMAGE:var o=void 0!==r?r:"https://cdn-main.123contactform.com/images3/contactbutton2.png";t+='data-embed-type="lightbox-image-link" data-embed-image-link='+o,this.model.embedOptions["data-embed-type"]="lightbox-image-link",this.model.embedOptions["data-embed-image-link"]=o;break;case zi.AUTO_POPUP:var s=void 0!==r?r:"3";t+='data-embed-type="lightbox-auto-popup" data-embed-popup-seconds="'+s+'"',this.model.embedOptions["data-embed-type"]="lightbox-auto-popup",this.model.embedOptions["data-embed-popup-seconds"]=s;break;case zi.FLOATING_BUTTON:var l=this.buttonBackgroundColorPicker.getValue().replace("#",""),c=this.buttonTextColorPicker.getValue().replace("#","");if("black"===l){var u=n.htmlOverlayHelper["embed-lightbox-floating-button-background-color"];l=void 0!==u?u:"000000"}if("black"===c){var d=n.htmlOverlayHelper["embed-lightbox-floating-button-text-color"];c=void 0!==d?d:"000000"}var p=this.domainProtocolPrefix+this.domainAlias+"/verticalbutton2.php?&bg="+l+"&fnt="+c+"&pos="+this.fontPlacement+"&text="+(void 0!==r?r:"Contact us")+"&font="+this.fontValue;t+='data-embed-type="lightbox-floating-button" data-embed-image-link="'+p+'" data-embed-placement="'+this.fontPlacement+'"',this.model.embedOptions["data-embed-type"]="lightbox-floating-button",this.model.embedOptions["data-embed-image-link"]=p,this.model.embedOptions["data-embed-placement"]=this.fontPlacement;break;default:t+="EMBED CODE EXAMPLE lightbox test "}return t+="><\/script>\n\x3c!-- "+this.domainAlias+" script ends here --\x3e"}},{key:"getInputDefaultTitle",value:function(e){var t="";switch(e){case zi.TEXT:t=this.translateDefaultText("publish_lightbox_link_enter_text","Enter the text you want to use for the link");break;case zi.IMAGE:t=this.translateDefaultText("publish_lightbox_image_enter_text","Enter the URL of the image you want to use for the link");break;case zi.FLOATING_BUTTON:t=this.translateDefaultText("publish_lightbox_floating_enter_text","Button text");break;case zi.AUTO_POPUP:t=this.translateDefaultText("publish_lightbox_auto_enter_text","Number of seconds after which the lightbox should pop up")}return t}},{key:"getInputContentValue",value:function(e){var t="",i=this.getHtmlOverlayHelperEmbedAttribute(e),r=n.htmlOverlayHelper[i];switch(e){case zi.TEXT:case zi.FLOATING_BUTTON:t=void 0!==r?r:this.translateDefaultText("publish_lightbox_contact_us","Contact us");break;case zi.IMAGE:t=void 0!==r?r:"https://cdn-main.123contactform.com/images3/contactbutton2.png";break;case zi.AUTO_POPUP:t=void 0!==r?r:"3"}return t}},{key:"getFlotingButtonPropertyValue",value:function(e){var t="",i=n.htmlOverlayHelper["embed-lightbox-floating-button-"+e];switch(e){case"background-color":t=void 0!==i?i:"#5d3d3d";break;case"text-color":t=void 0!==i?i:"#ffffff";break;case"font":t=void 0!==i?i:"Arial";break;case"placement":t=void 0!==i?i:"Left"}return t}},{key:"getHtmlOverlayHelperEmbedAttribute",value:function(e){var t="";switch(e){case zi.TEXT:t="embed-lightbox-text";break;case zi.IMAGE:t="embed-lightbox-image";break;case zi.FLOATING_BUTTON:t="embed-lightbox-floating-button";break;case zi.AUTO_POPUP:t="embed-lightbox-auto-popup"}return t}},{key:"getHtmlOverlayHelperEmbedNumericAttribute",value:function(e){var t=0;switch(e){case"embed-lightbox-text":t=zi.TEXT;break;case"embed-lightbox-image":t=zi.IMAGE;break;case"embed-lightbox-floating-button":t=zi.FLOATING_BUTTON;break;case"embed-lightbox-auto-popup":t=zi.AUTO_POPUP}return t}},{key:"appendUIColorPickerElement",value:function(){var e=this,t=this.getRootNode().querySelectorAll("[data-role=lightbox-property] [data-role=color-picker-container]");if(t.length>0)for(var n=0,i=t.length;n<i;n++){var r=L.a.createElement(L.a.ELEMENT_TYPE_COLOR);t[n].appendChild(r.getRootNode()),0==n&&(this.buttonBackgroundColorPicker=r,this.buttonBackgroundColorPicker.setValue(this.getFlotingButtonPropertyValue("background-color"))),1==n&&(this.buttonTextColorPicker=r,this.buttonTextColorPicker.setValue(this.getFlotingButtonPropertyValue("text-color")))}document.addEventListener("touchend",(function(t){var n=t.srcElement||t.target,i=$("[data-role=color-overlay]"),r=e.getParent().getDependency("jq");if(0!==i.length)for(var a=0,o=i.length;a<o;a++){var s=i.get(a);s===n||r.contains(s,n)||n.hasAttribute("data-type")&&"color"===n.getAttribute("data-type")?s.style.display="block":s.style.display="none"}})),this.buttonBackgroundColorPicker.setChangeCallback((function(){e.determineAndUpdateModelStateAccordingToEmbedType()})),this.buttonTextColorPicker.setChangeCallback((function(){e.determineAndUpdateModelStateAccordingToEmbedType()}))}},{key:"initUIDropDownElements",value:function(){var e=this,t=this.getRootNode().querySelector("#button-font-dropdown"),n=this.getRootNode().querySelector("#button-placement-dropdown"),i=this.getParent().getDependency("jq");t.onclick=function(i){n.parentElement.removeAttribute("data-is-open"),e.toggleDropdown(t),e.updateHtmlOverlayHelper(i)},n.onclick=function(i){t.parentElement.removeAttribute("data-is-open"),e.toggleDropdown(n),e.updateHtmlOverlayHelper(i)},this.initDropdown(t,(function(t){e.fontValue=t,e.determineAndUpdateModelStateAccordingToEmbedType()})),this.initDropdown(n,(function(t){e.fontPlacement=t,e.determineAndUpdateModelStateAccordingToEmbedType()}));document.body.addEventListener("mousedown",(function(e){var r=e.srcElement||e.target,a=i("[data-role=menu-panel-dropdown][data-is-open] [data-role=text-dropdown-overlay]");if(0!==a.length){for(var o=0,s=a.length;o<s;o++){var l=a.get(o);if(l===r||i.contains(l,r)||r.parentElement===t||r.parentElement===n)return}n.parentElement.removeAttribute("data-is-open"),t.parentElement.removeAttribute("data-is-open")}}),!0)}},{key:"initDropdown",value:function(e,t){var n=this.getParent().getDependency("jq");n(e).find("[data-value]").click((function(i){var r=i.srcElement||i.target,a=r.getAttribute("data-value"),o=r.textContent;n(e).find("[data-role=dropdown-value-label]").text(o),null!==t&&t(a)}))}},{key:"toggleDropdown",value:function(e){e.parentElement.hasAttribute("data-is-open")?e.parentElement.removeAttribute("data-is-open"):e.parentElement.setAttribute("data-is-open","1")}},{key:"onOverlayInitialized",value:function(){y()(_()(n.prototype),"onOverlayInitialized",this).call(this),this.trackPlatformMetric("page_view_publish_lightbox")}}]),n}(xs);function ol(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(al,"htmlOverlayHelper",{});var sl=function(e){u()(n,e);var t=ol(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"facebookBtn",void 0),v()(A()(e),"twitterBtn",void 0),v()(A()(e),"googleplusBtn",void 0),v()(A()(e),"linkedinBtn",void 0),v()(A()(e),"emailBtn",void 0),e.getRootNode().setAttribute("data-overlay-type","link"),e.getRootNode().setAttribute("data-overlay-tab","form-link"),e.getRootNode().setAttribute("data-overlay-embed-type","form-link"),e}return l()(n,[{key:"getModel",value:function(){var e=this;return setTimeout((function(){e.initializeButtons(),e.setButtonListeners()}),100),this.model.embedCode="".concat(this.domainProtocolPrefix+this.domainAlias,"/").concat(this.formPrefix).concat(this.getDependency("formId"),"/").concat(this.getCompactFormName(this.getDependency("formName"))),this.model.embedTypeId=O.Z.LINK,this.includeHTMLOverlayComponentModuleFunctionality()}},{key:"popitup",value:function(e,t,n,i,r){var a=window.screenLeft?window.screenLeft:screen.left,o=window.screenTop?window.screenTop:screen.top,s=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-i/2+a,l=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-r/2+o,c=window.open(t,n,"scrollbars=yes, width=".concat(i,", height=").concat(r,", top=").concat(l,", left=").concat(s));return window.focus&&c.focus(),!1}},{key:"setButtonListeners",value:function(){var e=this;return this.facebookBtn.addEventListener("click",(function(){e.popitup("Facebook","https://www.facebook.com/sharer/sharer.php?u=".concat(e.getFormLink()),"xtf",500,250),e.metricsManager.trackPlatformMetric("publish_social_share_click")})),this.twitterBtn.addEventListener("click",(function(){e.popitup("Twitter","https://twitter.com/share?text=".concat(e.getFormLink(),"&url=false"),"xtf",500,250),e.metricsManager.trackPlatformMetric("publish_social_share_click")})),this.googleplusBtn.addEventListener("click",(function(){e.popitup("Google Plus","https://plus.google.com/share?url=".concat(e.getFormLink()),"xtf",500,250),e.metricsManager.trackPlatformMetric("publish_social_share_click")})),this.linkedinBtn.addEventListener("click",(function(){e.popitup("Linkedin","https://www.linkedin.com/cws/share?url=".concat(e.getFormLink()),"xtf",500,250),e.metricsManager.trackPlatformMetric("publish_social_share_click")})),this.emailBtn.addEventListener("click",(function(){e.metricsManager.trackPlatformMetric("publish_social_share_click"),window.location.href="mailto:?subject=Check out this form&body=".concat(e.getFormLink())})),this.getParent().getParent().on("ssl-changed",(function(t){e.domainProtocolPrefix=t?"https://":"http://"})),this}},{key:"getFormLink",value:function(){return"".concat(("//"===this.domainProtocolPrefix?"http://":this.domainProtocolPrefix)+this.domainAlias,"/").concat(this.formPrefix)+"".concat(this.getDependency("formId"),"/").concat(this.getCompactFormName(this.getDependency("formName")))}},{key:"initializeButtons",value:function(){this.facebookBtn=document.querySelector("[data-role=social-media-container] [data-role=social-media-element][data-social-media-type=facebook-share]"),this.twitterBtn=document.querySelector("[data-role=social-media-container] [data-role=social-media-element][data-social-media-type=twitter-share]"),this.googleplusBtn=document.querySelector("[data-role=social-media-container] [data-role=social-media-element][data-social-media-type=google-plus-share]"),this.linkedinBtn=document.querySelector("[data-role=social-media-container] [data-role=social-media-element][data-social-media-type=linkedin-share]"),this.emailBtn=document.querySelector("[data-role=social-media-container] [data-role=social-media-element][data-social-media-type=mail-share]")}},{key:"onOverlayInitialized",value:function(){this.metricsManager=this.getParent().getDependency(gr.PLATFORM_METRICS_DEPENDECY),null!==this.metricsManager&&this.metricsManager.trackPlatformMetric("page_view_publish_formlink")}},{key:"getPanelType",value:function(){return O.Z.LINK}}]),n}(xs);function ll(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var cl=function(e){u()(n,e);var t=ll(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"hasEmbedCode",!0),e.getRootNode().setAttribute("data-overlay-type","link"),e.getRootNode().setAttribute("data-overlay-tab","embed-code"),e.getRootNode().setAttribute("data-overlay-embed-type","embed-html-text"),e}return l()(n,[{key:"getModel",value:function(){var e=this;return setTimeout((function(){e.includeEventListeners(),e.determineAndUpdateModelStateAccordingToEmbedType()}),100),this.model.embedCode=this.getEmbedCode(Xi.TEXT),this.model.embedTypeId=O.Z.EMBED_HTML_TEXT,this.includeHTMLOverlayComponentModuleFunctionality()}},{key:"determineAndUpdateModelStateAccordingToEmbedType",value:function(){var e=void 0!==n.htmlOverlayHelper["embed-type"]?n.htmlOverlayHelper["embed-type"]:"",t=this.getHtmlOverlayHelperEmbedNumericAttribute(e)||0;document.querySelector('[data-role=link-to-form-option][data-link-to-form-type="'+t+'"]').setAttribute("data-is-selected","1"),this.updateModelAccordingToEmbedType(t)}},{key:"includeEventListeners",value:function(){var e=this;this.getRootNode().querySelector("[data-role=link-to-form-options-container]").onclick=function(t){e.updateModelContentAccordingToEmbedType(t),e.checkStickyActionBar()},this.getRootNode().querySelector("[id=link-input-value]").onkeyup=function(t){e.updateHtmlOverlayHelper(t)}}},{key:"updateModelAccordingToEmbedType",value:function(e){document.getElementById("link-to-form-embed-content").textContent=this.getEmbedCode(e),this.model.embedCode=this.getEmbedCode(e);var t=O.Z.EMBED_HTML_TEXT;switch(e){case Xi.IMAGE:t=O.Z.EMBED_HTML_IMAGE;break;case Xi.TEXT:default:t=O.Z.EMBED_HTML_TEXT}this.model.embedTypeId=t,document.getElementById("link-section-title").textContent=this.getInputDefaultTitle(e),document.getElementById("link-input-value").value=this.getInputContentValue(e),document.getElementById("link-input-value").setAttribute("data-embed-type",""+e),this.updateEmbedCode()}},{key:"updateModelContentAccordingToEmbedType",value:function(e){var t=this.getRootNode().querySelectorAll("[data-role=link-to-form-option]"),i=e.srcElement||e.target;if(i.hasAttribute("data-link-to-form-type")){var r=+i.getAttribute("data-link-to-form-type");i.setAttribute("data-is-selected","1"),n.htmlOverlayHelper["embed-type"]=this.getHtmlOverlayHelperEmbedAttribute(+r),this.updateModelAccordingToEmbedType(r),this.getRootNode().setAttribute("data-selected-embed-type",""+r),this.getRootNode().querySelector("input[name=publish_type]").setAttribute("value",this.getHtmlOverlayHelperEmbedAttribute(r)),this.getRootNode().setAttribute("data-overlay-tab",i.getAttribute("data-overlay-tab")),this.getRootNode().setAttribute("data-overlay-embed-type",i.getAttribute("data-overlay-type"))}for(var a=0,o=t.length;a<o;a++)null!==t[a]&&i!==t[a]&&t[a].removeAttribute("data-is-selected")}},{key:"getEmbedCode",value:function(e){var t="",i=this.getHtmlOverlayHelperEmbedAttribute(e),r=n.htmlOverlayHelper[i],a=this.domainProtocolPrefix+this.domainAlias+"/".concat(this.formPrefix)+this.getDependency("formId")+"/"+this.getCompactFormName(this.getDependency("formName"));switch(e){case Xi.TEXT:var o=void 0!==r?r:this.translateDefaultText("publish_contact_us_link_label","Contact us");t='<a href="'+a+'" class="blueLink13">'+o+"</a>",this.model.embedOptions.embedUrl=a,this.model.embedOptions.embedLinkText=o;break;case Xi.IMAGE:var s=void 0!==r?r:"https://cdn-main.123contactform.com/images3/contactbutton2.png";t='<a href="'+a+'"><img border="0" src='+s+"></a>",this.model.embedOptions.embedUrl=a,this.model.embedOptions.embedImageUrl=s}return t}},{key:"getInputDefaultTitle",value:function(e){var t="";switch(e){case Xi.TEXT:t=this.translateDefaultText("publish_link_to_form_link_text_label","The text you want to use for the link");break;case Xi.IMAGE:t=this.translateDefaultText("publish_link_to_form_customize_image_label","Customize image")}return t}},{key:"getInputContentValue",value:function(e){var t="",i=this.getHtmlOverlayHelperEmbedAttribute(e),r=n.htmlOverlayHelper[i];switch(e){case Xi.TEXT:t=void 0!==r?r:this.translateDefaultText("publish_contact_us_link_label","Contact us");break;case Xi.IMAGE:t=void 0!==r?r:"https://cdn-main.123contactform.com/images3/contactbutton2.png"}return t}},{key:"updateHtmlOverlayHelper",value:function(e){var t=e.srcElement||e.target,i=t.dataset.embedType,r="";null!==t.value&&void 0!==i&&null!==(r=this.getHtmlOverlayHelperEmbedAttribute(+i))&&""!==r&&(n.htmlOverlayHelper[r]=t.value,document.getElementById("link-to-form-embed-content").textContent=this.getEmbedCode(+i))}},{key:"getHtmlOverlayHelperEmbedAttribute",value:function(e){var t="";switch(e){case Xi.TEXT:t="embed-html-text";break;case Xi.IMAGE:t="embed-html-image"}return t}},{key:"getHtmlOverlayHelperEmbedNumericAttribute",value:function(e){var t=0;switch(e){case"embed-html-text":t=Xi.TEXT;break;case"embed-html-image":t=Xi.IMAGE}return t}},{key:"onOverlayInitialized",value:function(){y()(_()(n.prototype),"onOverlayInitialized",this).call(this),this.trackPlatformMetric("page_view_publish_link_to_form")}}]),n}(xs);function ul(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(cl,"htmlOverlayHelper",{});var dl=function(e){u()(n,e);var t=ul(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"includeHTMLOverlayComponentModuleFunctionality",value:function(){var e=this;return setTimeout((function(){var t=e.getRootNode().querySelector("[data-role=copy-code-button]"),n=e.getRootNode().querySelector("textarea[data-role=code-container]"),i=e.getRootNode().querySelector("[data-role=view-demo-button]"),r=e.getRootNode().querySelector(".publish-learn-more-link"),a=e.getRootNode().querySelector("[data-role=install-app-button]"),o=e.getRootNode().querySelector("[data-role=embed-form-button]");null!==o&&(o.onclick=function(){if(e.trackPlatformMetric("specific_publish_embed_btn_click"),void 0===e.dependencies.formId||void 0===e.dependencies.command)return!1;e.dependencies.command.loader.getPlatformDetails().isWix?e.dependencies.command.publishFormOnWix(e.dependencies.formId):e.dependencies.command.publishFormOnWeebly(e.dependencies.formId,e.model.embedTypeId,e.model.embedOptions)}),null!==t&&(t.onclick=function(){e.copyToClipboard(t,xs.COPIED_STATE_UPDATE_DELAY),e.trackPlatformMetric("specific_publish_copy_btn_click")}),null!==n&&(n.onclick=function(){e.copyToClipboard(t,xs.COPIED_STATE_UPDATE_DELAY),e.trackPlatformMetric("publish_input_click")}),null!==i&&(i.onclick=function(){e.trackPlatformMetric("specific_publish_example_click")}),null!==r&&(r.onclick=function(){e.trackEvent("publish_learn_more_click")}),null!==a&&(a.onclick=function(){window.open(Object(ft.b)(),"_blank"),e.trackEvent("publish_install_btn_facebook")}),e.getEncryptedEmbedCode(),e.translateI18NElements()}),10),this.model}},{key:"onOverlayInitialized",value:function(){null==this.metricsManager&&(this.metricsManager=this.getParent().getDependency(gr.PLATFORM_METRICS_DEPENDECY)),this.metricsManager.trackPlatformMetric("specific_publish_embed")}}]),n}(tl);function pl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var hl=function(e){u()(n,e);var t=pl(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"includeHTMLOverlayComponentModuleFunctionality",value:function(){var e=this;return setTimeout((function(){var t=e.getRootNode().querySelector("[data-role=copy-code-button]"),n=e.getRootNode().querySelector("textarea[data-role=code-container]"),i=e.getRootNode().querySelector("[data-role=view-demo-button]"),r=e.getRootNode().querySelector(".publish-learn-more-link"),a=e.getRootNode().querySelector("[data-role=install-app-button]"),o=e.getRootNode().querySelector("[data-role=embed-form-button]");null!==o&&(o.onclick=function(){if(e.trackPlatformMetric("specific_publish_embed_btn_click"),void 0===e.dependencies.formId||void 0===e.dependencies.command)return!1;e.dependencies.command.publishFormOnWeebly(e.dependencies.formId,e.model.embedTypeId,e.model.embedOptions)}),null!==t&&(t.onclick=function(){e.copyToClipboard(t,xs.COPIED_STATE_UPDATE_DELAY),e.trackPlatformMetric("specific_publish_copy_btn_click")}),null!==n&&(n.onclick=function(){e.copyToClipboard(t,xs.COPIED_STATE_UPDATE_DELAY),e.trackPlatformMetric("publish_input_click")}),null!==i&&(i.onclick=function(){e.trackPlatformMetric("specific_publish_example_click")}),null!==r&&(r.onclick=function(){e.trackEvent("publish_learn_more_click")}),null!==a&&(a.onclick=function(){window.open(Object(ft.b)(),"_blank"),e.trackEvent("publish_install_btn_facebook")}),e.getEncryptedEmbedCode(),e.translateI18NElements()}),10),this.model}},{key:"onOverlayInitialized",value:function(){null==this.metricsManager&&(this.metricsManager=this.getParent().getDependency(gr.PLATFORM_METRICS_DEPENDECY)),this.metricsManager.trackPlatformMetric("specific_publish_lightbox")}}]),n}(al);function _l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var gl=function(e){u()(n,e);var t=_l(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"includeHTMLOverlayComponentModuleFunctionality",value:function(){var e=this;return setTimeout((function(){var t=e.getRootNode().querySelector("[data-role=copy-code-button]"),n=e.getRootNode().querySelector("textarea[data-role=code-container]"),i=e.getRootNode().querySelector("[data-role=view-demo-button]"),r=e.getRootNode().querySelector(".publish-learn-more-link"),a=e.getRootNode().querySelector("[data-role=install-app-button]"),o=e.getRootNode().querySelector("[data-role=embed-form-button]");null!==o&&(o.onclick=function(){if(e.trackPlatformMetric("specific_publish_embed_btn_click"),void 0===e.dependencies.formId||void 0===e.dependencies.command)return!1;e.dependencies.command.publishFormOnWeebly(e.dependencies.formId,e.model.embedTypeId,e.model.embedOptions)}),null!==t&&(t.onclick=function(){e.copyToClipboard(t,xs.COPIED_STATE_UPDATE_DELAY),e.trackPlatformMetric("specific_publish_copy_btn_click")}),null!==n&&(n.onclick=function(){e.copyToClipboard(t,xs.COPIED_STATE_UPDATE_DELAY),e.trackPlatformMetric("publish_input_click")}),null!==i&&(i.onclick=function(){e.trackPlatformMetric("specific_publish_example_click")}),null!==r&&(r.onclick=function(){e.trackEvent("publish_learn_more_click")}),null!==a&&(a.onclick=function(){window.open(Object(ft.b)(),"_blank"),e.trackEvent("publish_install_btn_facebook")}),e.getEncryptedEmbedCode(),e.translateI18NElements()}),10),this.model}},{key:"onOverlayInitialized",value:function(){null==this.metricsManager&&(this.metricsManager=this.getParent().getDependency(gr.PLATFORM_METRICS_DEPENDECY)),this.metricsManager.trackPlatformMetric("specific_publish_link")}}]),n}(cl);function ml(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var fl=function(e){u()(n,e);var t=ml(n);function n(){var e;return o()(this,n),(e=t.call(this)).getRootNode().setAttribute("data-overlay-type","salesforce-community"),e.getRootNode().setAttribute("data-overlay-tab","salesforce-community"),e.getRootNode().setAttribute("data-overlay-embed-type","salesforce-community"),e}return l()(n,[{key:"getModel",value:function(){return this.trackEvent("page_view_publish_salesforce_community"),this.model.isOnSalesforceCommunity=this.isOnSalesforceCommunity,this.getIsOnSalesforceCommunity(),this.includeHTMLOverlayComponentModuleFunctionality()}}]),n}(xs);function El(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var yl=function(e){u()(n,e);var t=El(n);function n(){var e;return o()(this,n),(e=t.call(this)).getRootNode().setAttribute("data-overlay-type","twitter"),e.getRootNode().setAttribute("data-overlay-tab","twitter"),e.getRootNode().setAttribute("data-overlay-embed-type","twitter"),e}return l()(n,[{key:"getModel",value:function(){var e=this;return this.trackEvent("page_view_publish_twitter"),this.model.embedCode="Loading ...",this.model.embedTypeId=O.Z.APP_TWITTER,this.useThirdPartyShortener?this.getShortUrl().then((function(t){e.model.embedCode=t,e.loadOverlayComponentUI(e.includeHTMLOverlayComponentModuleFunctionality())})):(this.model.embedCode=this.getFullUrl(),this.loadOverlayComponentUI(this.includeHTMLOverlayComponentModuleFunctionality())),this.includeHTMLOverlayComponentModuleFunctionality()}},{key:"getShortUrl",value:function(){var e="".concat(this.domainProtocolPrefix+this.domainAlias,"/").concat(this.formPrefix).concat(this.getDependency("formId"),"/")+"".concat(this.getCompactFormName(this.getDependency("formName"))),t=this.getDependency("jq");return t.Deferred((function(n){t.ajax({type:"POST",url:"https://www.googleapis.com/urlshortener/v1/url?key=AIzaSyAHouy3P-7v738jDVmOQ9KwiCm9otY-9Go",data:JSON.stringify({longUrl:"https:".concat(e)}),contentType:"application/json",success:function(e){e&&e.id&&n.resolve(e.id)},error:function(){n.reject()}})}))}},{key:"getFullUrl",value:function(){var e="//"===this.domainProtocolPrefix?"http://":this.domainProtocolPrefix;return"".concat(e).concat(this.domainAlias,"/").concat(this.formPrefix).concat(this.getDependency("formId"),"/")}}]),n}(xs);function Tl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var vl=function(e){u()(n,e);var t=Tl(n);function n(){var e;return o()(this,n),(e=t.call(this)).getRootNode().setAttribute("data-overlay-type","salesforce"),e.getRootNode().setAttribute("data-overlay-tab","exacttarget"),e.getRootNode().setAttribute("data-overlay-embed-type","exacttarget"),e}return l()(n,[{key:"getModel",value:function(){this.trackEvent("page_view_publish_salesforce");var e=this.translateDefaultText("publish_contact_us_link_label","Contact us");return this.model.embedCode="<span style='border:1px solid #ccc; padding:5px; margin:3px; display:block; font-size:14px; text-align:center; font-weight:bold; -moz-border-radius:5px; -webkit-border-radius:5px; border-radius:5px;'>"+"<a href=''".concat(this.domainProtocolPrefix).concat(this.domainAlias,"/").concat(this.formPrefix).concat(this.getDependency("formId"),"/")+"".concat(this.getCompactFormName(this.getDependency("formName")),"' class='blueLink13'>").concat(e,"</a></span>"),this.model.embedTypeId=O.Z.APP_SALESFORCE,this.includeHTMLOverlayComponentModuleFunctionality()}}]),n}(yl);function Ol(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var bl=function(e){u()(n,e);var t=Ol(n);function n(){var e;return o()(this,n),(e=t.call(this)).getRootNode().setAttribute("data-overlay-type","shopify"),e.getRootNode().setAttribute("data-overlay-tab","shopify"),e.getRootNode().setAttribute("data-overlay-embed-type","shopify"),e}return l()(n,[{key:"getModel",value:function(){return this.model.embedCode='<div class="123formbuilder" fid="'+this.getDependency("formId")+'"></div>',this.model.embedTypeId=O.Z.APP_SHOPIFY,this.includeHTMLOverlayComponentModuleFunctionality()}},{key:"onOverlayInitialized",value:function(){this.trackEvent("page_view_publish_shopify")}}]),n}(xs);function Cl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Il=function(e){u()(n,e);var t=Cl(n);function n(){var e;return o()(this,n),(e=t.call(this)).getRootNode().setAttribute("data-overlay-type","unbounce"),e.getRootNode().setAttribute("data-overlay-tab","unbounce"),e.getRootNode().setAttribute("data-overlay-embed-type","unbounce"),e}return l()(n,[{key:"getModel",value:function(){return this.trackEvent("page_view_publish_unbounce"),this.model.embedCode="\x3c!-- ".concat(this.domainAlias," script begins here --\x3e\n")+'<script type="text/javascript" defer src="'.concat(this.domainProtocolPrefix).concat(this.domainAlias,"/embed/")+"".concat(this.getDependency("formId"),'.js" data-role="form"><\/script>\n')+"\x3c!-- ".concat(this.domainAlias," script ends here --\x3e")+"<script type=\"text/javascript\">var ubx=window.ub.page;var oImg=document.createElement('img');"+"oImg.setAttribute('src', '//".concat(this.domainAlias,"/ub_setvars.php?ub_variant_id='+ubx.variantId+'&ub_visitor_id='+ubx.visitorId+'&ub_page_id='+ubx.id+'&ub_page_name='+ubx.name);")+"oImg.style.display='none';document.body.appendChild(oImg);<\/script>",this.model.embedTypeId=O.Z.APP_UNBOUNCE,this.includeHTMLOverlayComponentModuleFunctionality()}}]),n}(xs);function Rl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Pl=function(e){u()(n,e);var t=Rl(n);function n(){var e;return o()(this,n),(e=t.call(this)).getRootNode().setAttribute("data-overlay-type","wordpress"),e.getRootNode().setAttribute("data-overlay-tab","wordpress"),e.getRootNode().setAttribute("data-overlay-embed-type","wordpress"),e}return l()(n,[{key:"getModel",value:function(){return this.trackEvent("page_view_publish_wordpress"),this.model.embedCode="[123-form-builder i"+this.getDependency("formId")+"]",this.model.embedTypeId=O.Z.APP_WORDPRESS,this.includeHTMLOverlayComponentModuleFunctionality()}}]),n}(xs);function Nl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Al=function(e){u()(n,e);var t=Nl(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"type",qi.DIVIDER),e.getRootNode().setAttribute("data-role","menu-panel-divider"),e}return n}(ar);function Sl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Ll=function(e){u()(n,e);var t=Sl(n);function n(){var e;return o()(this,n),(e=t.call(this)).getRootNode().innerHTML='<div id="publish-platforms-expandable-search-container"></div>',e}return n}(br),Dl=function(){function e(t,n,i){o()(this,e),v()(this,"isBuilderSidebarExperiment",void 0),v()(this,"loader",void 0),v()(this,"panelGroup",void 0),v()(this,"panel",void 0),v()(this,"publishPanel",void 0),v()(this,"onCloseCb",void 0),v()(this,"isHiddenSSLOption",!1),v()(this,"formSettings",void 0),v()(this,"platformSpecificEmbedComponent",null),v()(this,"embedCaption",{link:{text:"Link",i18n:"edt_link_caption"},embed:{text:"Embed",i18n:"edt_embed"},platforms:{text:"Platforms",i18n:"edt_platforms"}}),v()(this,"domainsDropdownItem",void 0),v()(this,"customWebsiteDefaultTabId","javascript-publish-method"),v()(this,"isExpandableSearchMounted",!1),v()(this,"userService",void 0),this.panelGroup=t,this.loader=n,this.onCloseCb=null!==i&&void 0!==i?i:null,this.isBuilderSidebarExperiment=Fi.a.getInstance().isBuilderSidebarExperimentActive(),this.formSettings=this.loader.getFormSettings(),this.domainsDropdownItem=new zs(this.loader.getJQuery()).withLabel("Domains","edt_domains").withVisibilityState(!1).withId("publish-domains-dropdown").withSelectedItemId(this.formSettings.publishSettings.domainAliasURL).withBackendSetItems(this.loader.getReusableDomainAliases()),this.userService=Xt.a.getInstance(),this.init()}return l()(e,[{key:"init",value:function(){var e=this,t=this.loader.getPlatformDetails();t&&((t.isShopify||t.isBigCommerce||t.isWeebly||t.isWix)&&(this.embedCaption.link.text="Direct link",this.embedCaption.link.i18n="edt_link_caption_from_other_platform",this.embedCaption.embed.text="Custom website",this.embedCaption.embed.i18n="edt_embed_from_other_platform"),t.isShopify&&(this.isHiddenSSLOption=!0,this.formSettings.publishSettings.ssl=!0,this.platformSpecificEmbedComponent=this.createPlatformSpecificElement(this.loader,this.formSettings,"Shopify",O.ab.PLATFORM_SHOPIFY,"shopify")),t.isBigCommerce&&(this.platformSpecificEmbedComponent=this.createPlatformSpecificElement(this.loader,this.formSettings,"BigCommerce",O.ab.PLATFORM_BIG_COMMERCE,"bigcommerce")),t.isWeebly&&(this.isHiddenSSLOption=!0,this.formSettings.publishSettings.ssl=!0,this.platformSpecificEmbedComponent=this.createPlatformSpecificElement(this.loader,this.formSettings,"Weebly",O.ab.PLATFORM_WEEBLY,"weebly")),t.isWix&&(this.formSettings.publishSettings.ssl=!0,this.platformSpecificEmbedComponent=this.createPlatformSpecificElement(this.loader,this.formSettings,"Wix",O.ab.PLATFORM_WIX,"wix",!0)));var n=new Ll;n.withBackButton(!0),this.panel=(new lo).withDependency("formId",this.loader.getFormId()).withDependency("formName","").withDependency("userId",this.loader.getUserId()).withDependency("sessionId",this.loader.getSessionId()).withDependency("commandDispatcher",this.loader.getCommandDispatcher()).withDependency("UI",this.loader.getUI()).withDependency("i18n",this.loader.getI18n()).withDependency("jq",this.loader.getJQuery()).withDependency("editorPanelGroup",this.loader.getEditorPanelGroup()).withDependency("userDetails",this.loader.getUserDetails()).withDependency("userFeatures",this.loader.getLoaderDependency(O.M.USER_FEATURES)).withDependency(gr.PLATFORM_METRICS_DEPENDECY,new gr(this.loader.getPlatformDetails())).appendChild((new br).withBackButton(!this.isBuilderSidebarExperiment).withCaption("Publish","edt_header_publish").withCloseButton("inspector-close-button-container").withId("publish-back-button")).appendChildIf(t&&(t.isWeebly||t.isShopify||t.isBigCommerce||t.isWix),this.platformSpecificEmbedComponent).appendChildIf(t&&t.isSalesforce,(new _s).withImageIcon("/modules/Typescript/Form/resources/publish/icons/salesforce.png").withCaption("Salesforce Marketing Cloud").withId(O.ab.PLATFORM_SALESFORCE).appendChild((new vl).setResourceURLAddress("/modules/Typescript/Form/resources/publish/salesforce.html").withCaption("Salesforce Marketing Cloud").withPublishSettings(this.formSettings))).appendChildIf(t&&t.isSalesforce,(new _s).withImageIcon("/modules/Typescript/Form/resources/publish/icons/salesforce-community.png").withCaption("Salesforce Community").withId(O.ab.PLATFORM_SALESFORCE_COMMUNITY).appendChild((new fl).setResourceURLAddress("/modules/Typescript/Form/resources/publish/salesforce-community.html").withCaption("Salesforce Community").withPublishSettings(this.formSettings))).appendChild((new _s).withCustomFontIcon("i123-link").withCaption(this.embedCaption.link.text,this.embedCaption.link.i18n).withId(O.ab.LINK).appendChild((new sl).setResourceURLAddress("/modules/Typescript/Form/resources/publish/link.html").withCaption("Link").withPublishSettings(this.formSettings))).appendChildIf(!t.isWix,(new _s).withCustomFontIcon("i123-code").withCaption(this.embedCaption.embed.text,this.embedCaption.embed.i18n).withId(O.ab.EMBED_JAVASCRIPT).withPlatformMetric("page_view_publish_embed").appendChild((new lo).withId("embed-container").appendChild((new br).withBackButton(this.isBuilderSidebarExperiment).withCaption("Embed methods","edt_embed_methods").withId("embed-panel-header")).appendChild((new Lr).addPerfectScrollbar(this.loader.getCommandDispatcher()).appendChildIf(t&&!t.isShopify&&!t.isBigCommerce&&!t.isWeebly,(new _s).withCustomFontIcon("i123-code").withCaption("Javascript").withId("javascript-publish-method").appendChild((new tl).setResourceURLAddress("/modules/Typescript/Form/resources/publish/javascript.html").withCaption("Javascript").withPublishSettings(this.formSettings))).appendChild((new _s).withCustomFontIcon("i123-iframe").withCaption("IFrame").withId("iframe-publish-method").appendChild((new $s).setResourceURLAddress("/modules/Typescript/Form/resources/publish/iFrame.html").withCaption("IFrame").withPublishSettings(this.formSettings))).appendChild((new _s).withCustomFontIcon("i123-open-new").withCaption("Link to form","edt_embed_methods_link_to_form").withId("link-to-form-publish-method").appendChild((new cl).setResourceURLAddress("/modules/Typescript/Form/resources/publish/link-to-form.html").withCaption("Link to form").withPublishSettings(this.formSettings))).appendChild((new _s).withCustomFontIcon("i123-lightbox").withCaption("Lightbox","edt_embed_methods_lightbox").withId("lightbox-publish-method").appendChild((new al).setResourceURLAddress("/modules/Typescript/Form/resources/publish/lightbox.html").withCaption("Lightbox").withPublishSettings(this.formSettings)))))).appendChild((new _s).withCustomFontIcon("i123-platforms").withCaption(this.embedCaption.platforms.text,this.embedCaption.platforms.i18n).withId(O.ab.PUBLISH_PLATFORMS).withPlatformMetric("page_view_publish_platforms").appendChild((new lo).withId("platforms-container").appendChild(n).appendChild((new Lr).addPerfectScrollbar(this.loader.getCommandDispatcher()).withId("platforms-scrollable-container").appendChildIf(this.formSettings.displayPublishPlugins&&t&&!t.isShopify,(new _s).withImageIcon("/modules/Typescript/Form/resources/publish/icons/shopify.png").withCaption("Shopify").withId(O.ab.PLATFORM_SHOPIFY).appendChild((new bl).setResourceURLAddress("/modules/Typescript/Form/resources/publish/shopify/shopify.html").withCaption("Shopify"))).appendChildIf(this.formSettings.displayPublishPlugins&&t&&!t.isBigCommerce,(new _s).withImageIcon("/modules/Typescript/Form/resources/publish/icons/bigcommerce.png").withCaption("Big Commerce").withId(O.ab.PLATFORM_BIG_COMMERCE).appendChild((new Fs).setResourceURLAddress("/modules/Typescript/Form/resources/publish/big-commerce.html").withCaption("Big Commerce").withPublishSettings(this.formSettings))).appendChildIf(this.formSettings.displayPublishPlugins,(new _s).withImageIcon("/modules/Typescript/Form/resources/publish/icons/facebook.png").withCaption("Facebook").withId(O.ab.PLATFORM_FACEBOOK).appendChild((new Zs).setResourceURLAddress("/modules/Typescript/Form/resources/publish/facebook.html").withCaption("Facebook").withPublishSettings(this.formSettings))).appendChild((new _s).withImageIcon("/modules/Typescript/Form/resources/publish/icons/blogger.png").withCaption("Blogger").withId(O.ab.PLATFORM_BLOGGER).appendChild((new Ys).setResourceURLAddress("/modules/Typescript/Form/resources/publish/blogger.html").withCaption("Blogger").withPublishSettings(this.formSettings))).appendChildIf(this.formSettings.displayPublishPlugins,(new _s).withImageIcon("/modules/Typescript/Form/resources/publish/icons/wordpress.png").withCaption("Wordpress").withId(O.ab.PLATFORM_WORDPRESS).appendChild((new Pl).setResourceURLAddress("/modules/Typescript/Form/resources/publish/wordpress.html").withCaption("Wordpress"))).appendChildIf(this.formSettings.displayPublishPlugins,(new _s).withImageIcon("/modules/Typescript/Form/resources/publish/icons/joomla.png").withCaption("Joomla").withId(O.ab.PLATFORM_JOOMLA).appendChild((new il).setResourceURLAddress("/modules/Typescript/Form/resources/publish/joomla.html").withCaption("Joomla").withPublishSettings(this.formSettings))).appendChildIf(t&&!t.isSalesforce,(new _s).withImageIcon("/modules/Typescript/Form/resources/publish/icons/salesforce.png").withCaption("Salesforce Marketing Cloud").withId(O.ab.PLATFORM_SALESFORCE).appendChild((new vl).setResourceURLAddress("/modules/Typescript/Form/resources/publish/salesforce.html").withCaption("Salesforce Marketing Cloud").withPublishSettings(this.formSettings))).appendChild((new _s).withImageIcon("/modules/Typescript/Form/resources/publish/icons/unbounce.png").withCaption("Unbounce").withId(O.ab.PLATFORM_UNBOUNCE).appendChild((new Il).setResourceURLAddress("/modules/Typescript/Form/resources/publish/unbounce.html").withCaption("Unbounce").withPublishSettings(this.formSettings))).appendChild((new _s).withImageIcon("/modules/Typescript/Form/resources/publish/icons/googlesites.png").withCaption("Google Sites").withId(O.ab.PLATFORM_GOOGLE_SITES).appendChild((new Js).setResourceURLAddress("/modules/Typescript/Form/resources/publish/google-sites.html").withCaption("Google Sites").withPublishSettings(this.formSettings))).appendChild((new _s).withImageIcon("/modules/Typescript/Form/resources/publish/icons/twitter.png").withCaption("Twitter").withId(O.ab.PLATFORM_TWITTER).appendChild((new yl).setResourceURLAddress("/modules/Typescript/Form/resources/publish/twitter.html").withCaption("Twitter").withPublishSettings(this.formSettings)))))).appendChild(new Al).appendChild((new Ir).setCaption("Options","edt_panel_options")).appendChild(new js(this.loader,this.domainsDropdownItem).withCaption("Use your domain","edt_use_your_domain").withId("publish-use-domain-alias-checkbox").withChecked(this.formSettings.publishSettings.domainAliasOn).withDomainAlias(this.formSettings.publishSettings.domainAliasURL)).appendChild(this.domainsDropdownItem).appendChild((new _s).withCaption("Add a new domain").withId("publish-add-new-domain").withExpanderIconIncluded(!0).withRegularItem(!0)).appendChild((new Ir).withId("plan-notification-ribbon")),this.panel.withId("publish-form"),this.publishPanel=this.panel,this.panel.on("open",(function(){(!e.panelGroup.getActivePanel()||e.panelGroup.getActivePanel()&&"publish-form"!==e.panelGroup.getActivePanel().getId())&&e.panelGroup.setActivePanel("publish-form")})).on("user_feature_changed_boolean",(function(t,n){var i=e.loader.getLoaderDependency(O.M.USER_FEATURES)||{};i[t]=n,e.loader.withUserFeatures(i),$.ajax({url:"/ajax_call.php",data:{module:"modules/UserFeatures/index.php",action:"updateFeature",featureName:t,featureValue:n}}).done((function(e){console.log("successful feature updated: ".concat(t))})).fail((function(e){console.error(new Error("error while updating feature: ".concat(t," \n ").concat(String(e))))}))})),this.panel.getElementById("publish-back-button").on("back",(function(){e.isBuilderSidebarExperiment||setTimeout((function(){var e=Object(ve.j)(O.d.EDITOR);Object(Te.a)()(e)}),100)})),t&&(t.isWeebly||t.isShopify||t.isBigCommerce)&&(this.customWebsiteDefaultTabId="iframe-publish-method"),this.addPlatformItemClickHandler(this.panelGroup,this.panel,O.ab.PLATFORM_BIG_COMMERCE,"bigcommerce-embed-in-page-publish-method"),this.addPlatformItemClickHandler(this.panelGroup,this.panel,O.ab.PLATFORM_SHOPIFY,"shopify-embed-in-page-publish-method"),this.addPlatformItemClickHandler(this.panelGroup,this.panel,O.ab.PLATFORM_WEEBLY,"weebly-embed-in-page-publish-method"),this.addPlatformItemClickHandler(this.panelGroup,this.panel,O.ab.EMBED_JAVASCRIPT,this.customWebsiteDefaultTabId),this.panel.getElementById("platforms-publish-method").on("click",(function(){document.body.hasAttribute("data-mobile-interactions")||e.panelGroup.getPanelById("publish-form").getElementById("platforms-scrollable-container").openFirstElement();e.isExpandableSearchMounted||e.mountExpandableSearch(n)})),this.panel.getElementById("publish-add-new-domain").on("click",(function(){new Gs(e.domainsDropdownItem).displayDomainAliasAddDialog(e.loader)})),this.panelGroup.withPanel(this.panel),setTimeout((function(){document.getElementById("publish-platforms-expandable-search-container")&&e.mountExpandableSearch(n)}))}},{key:"mountExpandableSearch",value:function(e){this.isExpandableSearchMounted=!0;var t=this.loader.getI18n();tr.a.render(di()(ws,{title:t.translateTextDefault("edt_platforms","Platforms"),onChangeCb:function(t){e.getParent(qi.COMPONENT).trigger("filter",t)}}),document.getElementById("publish-platforms-expandable-search-container"))}},{key:"createPlatformSpecificElement",value:function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o="/modules/Typescript/Form/resources/publish/icons/".concat(r,".").concat(a?"svg":"png"),s=(new _s).withImageIcon(o).withCaption(n).withId(i);return e.getPlatformDetails().isWix?s.appendChild(this.createWixPanelItemChildren(e,t,r)):s.appendChild((new lo).appendChild((new br).withBackButton(!0).withCaption("Embed methods","edt_embed_methods").withId("".concat(r,"-embed-panel-header"))).appendChild(this.createPanelItemChildren(e,t,r))),s}},{key:"createPanelItemChildren",value:function(e,t,n){return(new Lr).addPerfectScrollbar(e.getCommandDispatcher()).appendChild((new _s).withCustomFontIcon("i123-iframe").withCaption("Embed in page","edt_embed_methods_embed_in_page").withId("".concat(n,"-embed-in-page-publish-method")).appendChild((new dl).withDependency("formId",e.getFormId()).withDependency("command",e.getCommandDispatcher()).setResourceURLAddress("/modules/Typescript/Form/resources/publish/".concat(n,"/embed-in-page.html")).withCaption("Embed in page","edt_embed_methods_embed_in_page").withPublishSettings(t))).appendChild((new _s).withCustomFontIcon("i123-open-new").withCaption("Link to form","edt_embed_methods_link_to_form").withId("".concat(n,"-link-to-form-publish-method")).appendChild((new gl).withDependency("formId",e.getFormId()).withDependency("command",e.getCommandDispatcher()).setResourceURLAddress("/modules/Typescript/Form/resources/publish/".concat(n,"/link-to-form.html")).withCaption("Link to form").withPublishSettings(t))).appendChild((new _s).withCustomFontIcon("i123-lightbox").withCaption("Lightbox","edt_embed_methods_lightbox").withId("".concat(n,"-lightbox-publish-method")).appendChild((new hl).withDependency("formId",e.getFormId()).withDependency("command",e.getCommandDispatcher()).setResourceURLAddress("/modules/Typescript/Form/resources/publish/".concat(n,"/lightbox.html")).withCaption("Lightbox").withPublishSettings(t)))}},{key:"createWixPanelItemChildren",value:function(e,t,n){return(new dl).withDependency("formId",e.getFormId()).withDependency("command",e.getCommandDispatcher()).setResourceURLAddress("/modules/Typescript/Form/resources/publish/".concat(n,"/embed-in-page.html")).withCaption("Embed in page","edt_embed_methods_embed_in_page").withPublishSettings(t)}},{key:"addPlatformItemClickHandler",value:function(e,t,n,i){t.getElementById(n)&&t.getElementById(n).on("click",(function(){var t=document.body.hasAttribute("data-mobile-interactions"),r=i;t&&(r=n),e.getPanelById("publish-form").openElementById(r)}))}}]),e}();function wl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var kl,Ml,xl,Ul,Fl,Bl,Yl,Vl,Hl,Gl,Wl,jl,Kl,zl,Xl,Zl,ql,Jl,Ql,$l,ec,tc,nc,ic=function(e){u()(n,e);var t=wl(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"rootNode",void 0),v()(A()(e),"id",null),e.rootNode=document.createElement("div"),e.rootNode.setAttribute("data-role","editor-panel"),e}return l()(n,[{key:"getId",value:function(){return this.id}},{key:"withId",value:function(e){return null!==e&&e?(this.id=String(e),this.rootNode.setAttribute("id",this.id)):(this.rootNode.removeAttribute("id"),this.id=null),this}},{key:"getRootNode",value:function(){return this.rootNode}}],[{key:"create",value:function(e){return(new n).withId(e)}}]),n}(ir.a),rc=function(e){var t=e.querySelectorAll(".collapsible-section");t&&t.forEach((function(e){var t=e.querySelector(".collapsible-section__trigger");t&&t.addEventListener("click",(function(){return e.classList.toggle("collapsed")}))}))},ac=function(){function e(t,n){o()(this,e),v()(this,"panel",void 0),v()(this,"loader",void 0),v()(this,"jQuery",void 0),this.panel=t,this.loader=n,this.jQuery=n.getJQuery(),this.configureOptionsPanel(),this.configureThemePickerPanel(),this.configureThemeCustomCSSPanel()}return l()(e,[{key:"configureOptionsPanel",value:function(){var e=this,t=this.loader.getI18n().translateText("expandableSearch_themesTitle"),n=this.loader.getI18n().translateText("expandableSearch_themesPlaceholder"),i=(new ic).withId("options");i.getRootNode().innerHTML='\n            <div data-role="panel-switcher" data-target-panel="editor">\n                <div id="themes-expandable-search-container"></div>\n            </div>\n\n            <div data-role="vertical-content">\n                <div data-role="theme-actions-panel"></div>\n            </div>\n        ',i.on("hide",(function(){e.jQuery(i.getRootNode()).find("[data-role=panel-switcher]").removeAttr("data-is-focused").removeAttr("filter-search-mode")})).on("show",(function(){e.jQuery("#settings-filter").val(""),e.loader.execCommand("filter-settings",""),e.loader.getCommandDispatcher().trackEvent("show_layout_options_click",{},50)})),this.jQuery(i.getRootNode()).on("click","button[data-role=change-theme]",(function(){e.loader.getCommandDispatcher().setActiveEditorPanel("theme-panel"),e.loader.getCommandDispatcher().trackEvent("theme_btn_change_click")})).on("click","button[data-role=save-theme]",(function(){var t=e.jQuery("#options div[data-role=theme-actions-panel] div[data-role=theme][data-theme-id]").attr("data-theme-id");if(t){var n;try{n=JSON.parse(t)}catch(i){return}e.loader.getCommandDispatcher().saveTheme(n),e.loader.getCommandDispatcher().trackEvent("theme_btn_save_as_click")}})).on("click","button[data-role=add-custom-css]",(function(){e.loader.getCommandDispatcher().setActiveEditorPanel("theme-custom-css")})).on("focus","#settings-filter",(function(t){e.jQuery(t.currentTarget).closest("[data-role=panel-switcher]").attr("data-is-focused","1")})).on("blur","#settings-filter",(function(t){e.jQuery("#options #settings-filter").val()||(e.jQuery(t.currentTarget).closest("[data-role=panel-switcher]").removeAttr("data-is-focused"),e.jQuery(t.currentTarget).closest("[data-role=panel-switcher]").removeAttr("filter-search-mode"))})).on("click","div[data-role=panel-switcher] span[data-role=close]",(function(t){e.jQuery(t.currentTarget).closest("[data-role=panel-switcher]").removeAttr("data-is-focused"),e.jQuery(t.currentTarget).closest("[data-role=panel-switcher]").removeAttr("filter-search-mode"),e.loader.execCommand("filter-settings",""),e.jQuery("#settings-filter").val(""),e.loader.getCommandDispatcher().trackEvent("theme_search_clear",{},2e3)})).on("click","div[data-role=panel-switcher] span[data-role=search]",(function(t){e.jQuery(t.currentTarget).closest("[data-role=panel-switcher]").attr("filter-search-mode","1").find("input#settings-filter").focus()})).on("input","[data-role=property][data-property-name] textarea:not([data-role=secondary]), [data-role=property][data-property-name] input:not([type=radio]):not([type=checkbox]):not([data-role=secondary]), [data-ui-role=ui-element]:not([data-role=secondary])",(function(t){e.loader.getCommandDispatcher().dispatchPropertyChangeInThemePanel(t.currentTarget,"value")})).on("change","[data-role=property][data-property-name] select:not([data-role=secondary]), [data-ui-role=ui-element]:not([data-role=secondary])",(function(t){var n,i;"options.masterTextColor"===(null===(n=t.currentTarget)||void 0===n||null===(i=n.closest)||void 0===i?void 0:i.call(n,"[data-property-name]").getAttribute("data-property-name"))&&e.updateTextColorPropertiesIntoPanel(t.currentTarget.value),e.loader.getCommandDispatcher().dispatchPropertyChangeInThemePanel(t.currentTarget,"value")})).on("click","[data-role=property][data-property-name] input[type=checkbox]:not([data-role=secondary]), [data-role=property][data-property-name] input[type=radio]:not([data-role=secondary])",(function(t){e.loader.getCommandDispatcher().dispatchPropertyChangeInThemePanel(t.currentTarget,"checked")})).on("input","#settings-filter",(function(t){var n=t.currentTarget.value;e.loader.execCommand("filter-settings",n),e.loader.getCommandDispatcher().resetScrollbarPosition("#options div[data-role=vertical-content]"),e.loader.getCommandDispatcher().trackEvent("themes_search",{},2e3)})),this.panel.withPanel(i);tr.a.render(di()(fi.Fragment,{},void 0,di()(ws,{title:t,placeholder:n,onChangeCb:this.filterSettings.bind(this),onClearCb:function(){e.loader.getCommandDispatcher().trackEvent("themes_search_clear",{},2e3)}})),document.getElementById("themes-expandable-search-container")),this.loader.on("options-sidebar-initialised",(function(){rc(i.getRootNode())}))}},{key:"updateTextColorPropertiesIntoPanel",value:function(e){["label.normal.color","instructions.normal.color","input.normal.color","button.secondary.normal.color"].forEach((function(t){var n=document.querySelector('[data-property-name="'.concat(t,'"] label > [data-ui-role="ui-element"] > div'));n&&(n.style.backgroundColor=e)}))}},{key:"filterSettings",value:function(e){this.loader.execCommand("filter-settings",e),this.loader.getCommandDispatcher().resetScrollbarPosition("#options div[data-role=vertical-content]"),e&&this.loader.getCommandDispatcher().trackEvent("themes_search",{},2e3)}},{key:"configureThemePickerPanel",value:function(){var e=this,t=ic.create("theme-panel");t.on("hide",(function(){e.loader.getEngine().getTheme().enterEditMode()})).on("show",(function(){e.loader.getEngine().getTheme().enterPreviewMode()})),this.jQuery(t.getRootNode()).on("click","div[data-role=theme][data-theme-id]",(function(t){var n=e.jQuery(t.currentTarget).attr("data-theme-id"),i="null"===n?null:~~n;e.jQuery("#theme-panel").attr("data-allow-revert",e.jQuery(t.currentTarget).is("[data-role=current-theme] > [data-role=theme]")?null:"1").find("[data-role=theme].selected").removeClass("selected"),e.jQuery(t.currentTarget).addClass("selected"),e.loader.getCommandDispatcher().setThemeById(i)})).on("click","button[data-role=discard-theme-changes]",(function(){e.loader.getCommandDispatcher().discardThemeChanges()})).on("click","button[data-role=import-legacy-themes]",(function(){e.loader.getCommandDispatcher().displayLegacyEditorThemesDialog()})).on("click","a[data-role=back-button]",(function(){e.loader.execCommand("set-active-panel","options")})),this.panel.withPanel(t)}},{key:"configureThemeCustomCSSPanel",value:function(){var e=this,t=ic.create("theme-custom-css");t.on("show",(function(){e.loader.getCommandDispatcher().updateCustomCSSPanel(),e.loader.getEngine().getTheme().enterPreviewMode()})).on("hide",(function(){e.loader.getEngine().getTheme().enterEditMode()})),this.jQuery(t.getRootNode()).on("blur","textarea[data-role=custom-css]",(function(t){var n=e.jQuery(t.currentTarget).attr("data-previous-value");""===t.currentTarget.value&&e.loader.execCommand("update-custom-css-errors",!1,"custom-css"),t.currentTarget.value!==n&&e.loader.execCommand("save-custom-css-text",t.currentTarget.value)})).on("blur","input[data-role=custom-css-from-url]",(function(t){var n=e.jQuery(t.currentTarget).attr("data-previous-value");""===t.currentTarget.value&&e.loader.execCommand("update-custom-css-errors",!1,"custom-css-from-url"),t.currentTarget.value!==n&&e.loader.execCommand("save-custom-css-url",t.currentTarget.value)})).on("click","a[data-role=back-button]",(function(){e.loader.execCommand("set-active-panel","options")})),this.panel.withPanel(t)}}]),e}(),oc=function(){function e(){o()(this,e)}return l()(e,null,[{key:"configurePanels",value:function(e,t,n,i){this.configureEditorPanel(e,t,n),this.configureItemPanel(e,t,n,i)}},{key:"configureEditorPanel",value:function(e,t,n){var i,r=ic.create("editor");r.on("hide",(function(){n(r.getRootNode()).find("[data-role=controls-filter]").removeAttr("data-is-focused")})).on("show",(function(){i&&i.setState({value:"",isExpanded:!1}),t.execCommand("filter-controls",""),t.getSelection().clear(),t.getEngine().getDocument().setActiveElement(null)})),n(r.getRootNode()).on("click","div[data-role=control][data-type-id], div[data-role=container][data-type-id]",(function(){var e=~~n(this).attr("data-type-id");e&&(t.execCommand("append-element",e),t.execCommand("filter-controls",""),i&&i.setState({value:"",isExpanded:!1}))})).on("click","div[data-role=setting]",(function(){var e=n(this).attr("data-type-id");e&&(t.execCommand("add-setting",e),i&&i.setState({value:"",isExpanded:!1}))}));var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.execCommand("filter-controls",e),t.getCommandDispatcher().resetScrollbarPosition("#editor > div[data-role=vertical-content]"),e&&t.getCommandDispatcher().trackEvent("edt_control_search",{},2e3)},o=function(){t.getCommandDispatcher().trackEvent("edt_controls_search_clear",{},2e3)};t.on("editor-sidebar-initialised",(function(){var e=t.getI18n().translateText("expandableSearch_editorTitle"),n=t.getI18n().translateText("expandableSearch_editorPlaceholder");rc(r.getRootNode()),tr.a.render(di()(fi.Fragment,{},void 0,Ei.a.createElement(ws,{title:e,placeholder:n,onChangeCb:a,onClearCb:o,ref:function(e){i=e}})),document.getElementById("editor-controls-search"))})),e.withPanel(r)}},{key:"configureItemPanel",value:function(e,t,n,i){var r=ic.create("item");r.getRootNode().innerHTML='\n            <div data-role="panel-switcher" data-target-panel="editor">\n                <a href="javascript:void(0)" data-role="back-button">\n                    <span class="i-lg i123-arrow-left2"></span>\n                </a>\n                <span data-role="item-type-name"></span>\n            </div>\n\n            <div data-role="vertical-content"></div>\n            ',n(r.getRootNode()).each((function(){var e=this,r=function(){return"setting"===e.getAttribute("data-target-element-type")&&!e.getAttribute("data-target-element")},a=function(){return!!e.getAttribute("data-target-element")&&"setting"!==e.getAttribute("data-target-element-type")};n(e).on("input","[data-role=property][data-property-name] textarea:not([data-role=secondary]), [data-role=property][data-property-name] input:not([type=radio]):not([type=checkbox]):not([data-role=secondary]):not([data-role=markdown-url]):not([data-role=markdown-url-text])",(function(){a()?t.getCommandDispatcher().dispatchPropertyChangeInInspector(i,e,this,"value"):r()?t.getCommandDispatcher().dispatchSettingPropertyChangeInInspector(i,e,this,"value"):console.error("UNHANDLED INPUT EVENT IN INSPECTOR PANEL!")})).on("change","[data-role=property][data-property-name] select:not([data-role=secondary])",(function(){a()?t.getCommandDispatcher().dispatchPropertyChangeInInspector(i,e,this,"value"):r()?t.getCommandDispatcher().dispatchSettingPropertyChangeInInspector(i,e,this,"value"):console.error("UNHANDLED CHANGE EVENT IN INSPECTOR PANEL!")})).on("click","[data-role=property][data-property-name] input[type=checkbox]:not([data-role=secondary]), [data-role=property][data-property-name] input[type=radio]:not([data-role=secondary])",(function(o){a()?t.isUserPreventedFromSelectingBothHiddenAndRequiredSettings(e,o,n,i,this)||t.getCommandDispatcher().dispatchPropertyChangeInInspector(i,e,this,"checked"):r()?t.getCommandDispatcher().dispatchSettingPropertyChangeInInspector(i,e,this,"checked"):console.error("UNHANDLED CLICK EVENT IN INSPECTOR PANEL!")})).on("click","> div[data-role=vertical-content] > [data-role=editing-capabilities] > button[data-role]",(function(o){if(a()){var s,l=n(this).attr("data-role");if(s=n(e).attr("data-target-element")){var c=i.getElementByHash(s);if(!c)return;t.execCommand("element-command",c,l)}else t.execCommand("selection-command",l)}else if(r()){var u=e.getAttribute("data-target-setting-id"),d=this.getAttribute("data-role");if(!u||!d)return;t.execCommand("editor-setting-command",u,d)}else console.error("UNHANDLED INSPECTOR COMMAND!")})).on("click","a[data-role=back-button]",(function(){t.isMobileInteractionsEnabled()?t.getEditorPanelGroup().setVisible(!1):t.execCommand("set-active-panel","editor")}))})),e.withPanel(r),t.on("item-sidebar-initialised",(function(){rc(r.getRootNode())})),r.on("show",(function(){var e=r.getRootNode().attributes["data-target-element-type"].value.replace(/\s+/g,"-").toLowerCase();t.getCommandDispatcher().trackEvent("control_edit_".concat(e),{},50)}))}},{key:"configureThemes",value:function(e,t,n){new ac(e,t)}},{key:"configureNewNotificationsPanel",value:function(e,t){var n=new Ps({panelGroup:e,formId:t.getFormId(),api:t.getAPI(),ui:t.getUI(),i18n:t.getI18n(),resourceManager:t.getEngine().getResourceManager(),commandDispatcher:t.getCommandDispatcher(),form:t.getEngine().getDocument(),userDetails:t.getLoaderDependency(O.M.USER_DETAILS),defaultNotificationsPreferences:t.getLoaderDependency(O.M.DEFAULT_NOTIFICATIONS_PREFERENCES),userFeatures:t.getLoaderDependency(O.M.USER_FEATURES)});e.withPanel(n.getRootPanel())}},{key:"configureTranslations",value:function(e,t){new window.TranslationsController(e,t)}},{key:"configureEmbedFormPanel",value:function(e,t){var n=new Dl(e,t,this.closePublishPanel.bind(this));e.withPanel(n.panel),this.publishPanel=n.panel}},{key:"getPublishPanel",value:function(){return this.publishPanel}},{key:"closePublishPanel",value:function(){var e=Object(ve.j)(O.d.EDITOR);Object(Te.a)()(e)}}]),e}();v()(oc,"publishPanel",void 0),function(e){e.FREE_PLAN_LIMIT="FREE_PLAN_LIMIT",e.SALESFORCE_TRIAL="SALESFORCE_TRIAL",e.MARKETING_PROMOTION="MARKETING_PROMOTION"}(kl||(kl={})),function(e){e.FORMS="FORMS",e.RULES="RULES"}(Ml||(Ml={})),function(e){e.PROMO="PROMO",e.CONTAINER="CONTAINER"}(xl||(xl={})),function(e){e.ANCHOR="ANCHOR",e.ANCHOR_NEW_TAB="ANCHOR_NEW_TAB",e.MENU="MENU",e.MENU_HOVER="MENU_HOVER",e.EVENT="EVENT",e.MENU_BACK="MENU_BACK",e.PREVIEW_FORM="PREVIEW_FORM",e.CUSTOM="CUSTOM"}(Ul||(Ul={})),function(e){e[e.NONE=0]="NONE",e[e.VIEW=1]="VIEW",e[e.EDIT=2]="EDIT"}(Fl||(Fl={})),function(e){e.HEADER_EVENT="HeaderEvent",e.MY_FORMS_CONTAINER="myFormsContainer",e.USERS_CONTAINER="usersContainer",e.SHOW_WIZARD_SWITCHER="showWizardSwitcher"}(Bl||(Bl={})),function(e){e[e.MENU_GET_LINK=1]="MENU_GET_LINK",e[e.MENU_EMBED_CODE=2]="MENU_EMBED_CODE",e[e.MENU_BLOGGER=3]="MENU_BLOGGER",e[e.MENU_SALESFORCE_MARKETING_CLOUD=4]="MENU_SALESFORCE_MARKETING_CLOUD",e[e.MENU_UNBOUNCE=5]="MENU_UNBOUNCE",e[e.MENU_GOOGLE_SITES=6]="MENU_GOOGLE_SITES",e[e.MENU_TWITTER=7]="MENU_TWITTER",e[e.MENU_SHOPIFY=8]="MENU_SHOPIFY",e[e.MENU_BIGCOMMERCE=9]="MENU_BIGCOMMERCE",e[e.MENU_PREVIEW_FORM=10]="MENU_PREVIEW_FORM",e[e.MENU_FACEBOOK=11]="MENU_FACEBOOK",e[e.MENU_JOOMLA=12]="MENU_JOOMLA",e[e.MENU_WORDPRESS=13]="MENU_WORDPRESS",e[e.MENU_EMBED_IN_PAGE=14]="MENU_EMBED_IN_PAGE",e[e.MENU_LINK_TO_FORM=15]="MENU_LINK_TO_FORM",e[e.MENU_LIGHTBOX=16]="MENU_LIGHTBOX",e[e.MENU_DIRECT_LINK=17]="MENU_DIRECT_LINK",e[e.MENU_CUSTOM_WEBSITE=18]="MENU_CUSTOM_WEBSITE",e[e.MENU_PLATFORMS=19]="MENU_PLATFORMS",e[e.MENU_SALESFORCE_COMMUNITY=20]="MENU_SALESFORCE_COMMUNITY",e[e.MENU_PUBLISH_ON_WIX=21]="MENU_PUBLISH_ON_WIX"}(Yl||(Yl={})),function(e){e[e.ACCOUNT_MENU_HELP_KNOWLEDGE_BASE=11]="ACCOUNT_MENU_HELP_KNOWLEDGE_BASE",e[e.ACCOUNT_MENU_HELP_SUPPORT=12]="ACCOUNT_MENU_HELP_SUPPORT",e[e.ACCOUNT_MENU_HELP_CONTACT=13]="ACCOUNT_MENU_HELP_CONTACT",e[e.ACCOUNT_MENU_HELP_TERMS_OF_SERVICE=14]="ACCOUNT_MENU_HELP_TERMS_OF_SERVICE",e[e.ACCOUNT_MENU_HELP_PRIVACY=15]="ACCOUNT_MENU_HELP_PRIVACY"}(Vl||(Vl={})),function(e){e.EMAIL_AND_SMS="EmailAndSMS",e.PUBLISH_WEEBLY="PublishOnWeebly",e.PRODUCTS="Products",e.TRANSLATIONS="Translations",e.UNDO="Undo",e.REDO="Redo",e.EDIT_TITLE_BOX="EditTitleBox",e.CUSTOMIZE_THEME="CustomizeTheme",e.ADD_FIELDS="AddFields",e.EDIT_TITLE="EditTitle",e.SHOW_WHATS_NEW="ShowWhatsNew",e.CHANGE_TAB="ChangeTab",e.SHOW_SUPPORT="ShowSupport",e.SEARCH_FORMS_STRING="SearchFormString",e.SEARCH_FORMS_CLEAR_STRING="SearchFormsClearString",e.NEW_FOLDER="NewFolder",e.SORT_BY="SortBy",e.ITEMS_PER_PAGE="ItemsPerPage",e.SELECT_ALL_VISIBLE_FORMS="SelectAllVisibleForms",e.DESELECT_ALL_FORMS="DeselectAllForms",e.DUPLICATE_SELECTED_FORMS="DuplicateSelectedForms",e.DELETE_SELECTED_FORMS="DeleteSelectedForms",e.PUBLISH_PLATFORMS="PublishPlatforms",e.PUBLISH_GET_LINK="PublishGetLink",e.PUBLISH_EMBED_CODE="PublishEmbedCode",e.PUBLISH_SHOPIFY="PublishShopify",e.PUBLISH_BIG_COMMERCE="PublishBigCommerce",e.PUBLISH_FACEBOOK="PublishFacebook",e.PUBLISH_BLOGGER="PublishBlogger",e.PUBLISH_WORDPRESS="PublishWordpress",e.PUBLISH_JOOMLA="PublishJoomla",e.PUBLISH_SALESFORCE="PublishSalesforce",e.PUBLISH_UNBOUNCE="PublishUnbounce",e.PUBLISH_GOOGLE_SITES="PublishGoogleSites",e.PUBLISH_TWITTER="PublishTwitter",e.PUBLISH_SALESFORCE_COMMUNITY="PublishSalesforceCommunity",e.PUBLISH_SALESFORCE_PLATFORMS="PublishSalesforcePlatforms",e.PUBLISH_WEEBLY_LINK="PublishLinkOnWeebly",e.PUBLISH_WEEBLY_LIGHTBOX="PublishLightboxOnWeebly",e.PUBLISH_WEEBLY_PLATFORMS="PublishPlatformsOnWeebly",e.PUBLISH_WIX_PLATFORMS="PublishPlatformsOnWix",e.PUBLISH_BIG_COMMERCE_LINK="PublishLinkBigCommerce",e.PUBLISH_BIG_COMMERCE_LIGHTBOX="PublishLightboxBigCommerce",e.PUBLISH_BIG_COMMERCE_PLATFORMS="PublishPlatformsOnBigCommerce",e.PUBLISH_SHOPIFY_LINK="PublishLinkShopify",e.PUBLISH_SHOPIFY_LIGHTBOX="PublishLightboxShopify",e.PUBLISH_SHOPIFY_PLATFORMS="PublishPlatformsOnShopify",e.PAYMENTS="Payments",e.WHITE_LABEL="WhiteLabel",e.SHOW_WIZARD_SWITCHER="ShowWizardSwitcher",e.NEW_FORM="NewForm",e.RELOAD_FORMS="ReloadForms"}(Hl||(Hl={})),function(e){e.TASKS="tasks",e.REQUESTS="requests",e.WORKFLOWS="workflows",e.WORKFLOWS_TEMPLATES="wf_templates",e.WORKFLOWS_EDIT="workflows_edit",e.USERS="usrman"}(Gl||(Gl={})),function(e){e.EDIT_FIELDS="edit_fields",e.SUBMISSIONS="submissions",e.PUBLISH="publish",e.REPORTS="reports",e.SETTINGS="settings",e.DASHBOARD="dashboard",e.SET_SELECTED_LANGUAGE="setselectedlanguage",e.MY_FORMS="your_forms",e.MYACCOUNT="myaccount",e.SALESFORCE_OBJECTS="salesforce_objects",e.SALESFORCE_MAPPING="salesforce-mapping",e.NEW_FORM="new_form",e.USRMAN="usrman",e.MYACCOUNT_UPGRADE="myaccount_upgrade",e.FEATURES_MATRIX="features-matrix",e.FEATURES_MATRIX_WIX="features-matrix-wix",e.FEATURES_MATRIX_WEEBLY="features-matrix-weebly",e.FORM_TEMPLATE="form_template",e.WHITE_LABEL="white_label",e.CANCEL_SUBSCRIPTION="cancel_subscription",e.INSIGHTS="insights"}(Wl||(Wl={})),function(e){e.WIX="wix",e.WEEBLY="weebly",e.CAPTAIN_FORM="captainForm",e.BETA="beta",e.SALESFORCE="salesForce",e.WORKFLOWS="workflows",e.SHOPIFY="shopify",e.BIG_COMMERCE="bigcommerce",e.MAIN_123="123"}(jl||(jl={})),function(e){e[e.NOTIFICATIONS=1]="NOTIFICATIONS",e[e.THEMES=2]="THEMES",e[e.APPS=3]="APPS",e[e.PAYMENTS=4]="PAYMENTS",e[e.SECURITY=5]="SECURITY",e[e.RULES=6]="RULES",e[e.TRANSLATIONS=7]="TRANSLATIONS",e[e.ADVANCED=8]="ADVANCED",e[e.THANK_YOU=10]="THANK_YOU",e[e.NONE=0]="NONE",e[e.APPROVALS=9]="APPROVALS",e[e.HOOKS=11]="HOOKS"}(Kl||(Kl={})),function(e){e.SELECT_ITEM="selectItem",e.DESELECT_ITEM="deselectItem",e.HIDE_SELECTION_BAR="hideSelectionBar",e.SHOW_SELECTION_BAR="showSelectionBar",e.SELECT_ALL_FORMS="SelectAllForms",e.MOVE_SELECTED_FORMS="MoveSelectedForms",e.SELECTION_PER_PAGE="SelectionPerPage"}(zl||(zl={})),function(e){e.ICON_BUTTON="IconButton",e.BUTTON="Button"}(Xl||(Xl={})),function(e){e.ICON_BUTTON="IconButton",e.BUTTON="Button"}(Zl||(Zl={})),function(e){e.SHOPIFY_REVIEW="https://apps.shopify.com/123formbuilder#modal-show=ReviewListingModal"}(ql||(ql={})),function(e){e.DUPLICATE="i123-duplicate",e.MOVE_TO="i123-move_to",e.DELETE="i123-delete"}(Jl||(Jl={})),function(e){e.LARGE="i-lg"}(Ql||(Ql={})),function(e){e[e.STANDARD_USER=0]="STANDARD_USER",e[e.ADMINISTRATOR=1]="ADMINISTRATOR",e[e.VIEWER=2]="VIEWER",e[e.COMPANY_ADMINISTRATOR=3]="COMPANY_ADMINISTRATOR"}($l||($l={})),function(e){e[e.OK=0]="OK",e[e.PAYMENT_PROBLEMS=1]="PAYMENT_PROBLEMS",e[e.PHISHING=2]="PHISHING",e[e.USES_ADVANCED_FEATURES=3]="USES_ADVANCED_FEATURES",e[e.SUBMISSIONS_EXCEEDED=4]="SUBMISSIONS_EXCEEDED"}(ec||(ec={})),function(e){e.HAMBURGER="ui_hamburger",e.HEADER="ui_header",e.SUBHEADER="ui_subheader",e.TITLE_INPUT="ui_title_input",e.ACTION_BAR="ui_action_bar",e.SELECTION_BAR="ui_selection_bar",e.SEARCH_BOX="ui_search_box"}(tc||(tc={})),function(e){e[e.SETTINGS=0]="SETTINGS",e[e.SUBMISSIONS=1]="SUBMISSIONS",e[e.REPORTS=2]="REPORTS",e[e.FORM_EDITOR=3]="FORM_EDITOR"}(nc||(nc={}));var sc=function(){function e(){o()(this,e),v()(this,"isNotificationsV2Initialised",!1),v()(this,"isTranslationsInitialised",!1),v()(this,"isThemesInitialised",!1),v()(this,"isPublishInitialised",!1),v()(this,"store",void 0),v()(this,"currentRoute",""),v()(this,"editorPanelGroup",void 0),v()(this,"loader",void 0),v()(this,"URLHandler",void 0),v()(this,"sidebarSwitcher",void 0),v()(this,"isSidebarSwitcherMounted",!1),v()(this,"editorPanelConfig",void 0),this.editorPanelConfig=oc,this.URLHandler=gi.a,this.store=Object(Te.c)(),this.store.subscribe(this.handleChange.bind(this)),this.createSidebarIfNeeded(),this.removeActiveStateIfNewForm()}return l()(e,[{key:"setPanelGroup",value:function(e){this.editorPanelGroup=e}},{key:"setLoader",value:function(e){this.loader=e}},{key:"createSidebarIfNeeded",value:function(){window.BOOTSTRAP_DATA&&window.BOOTSTRAP_DATA.builderSidebarExperiment?this.sidebarSwitcher=new nr:this.sidebarSwitcher={render:function(e){}}}},{key:"handleChange",value:function(){var e,t=window.innerWidth,n=Object(Te.b)(Oe.h),i=this.currentRoute===n,r=null===(e=this.editorPanelGroup)||void 0===e?void 0:e.isVisible(),a=Object(Te.b)(Oe.o).type===ve.a.NAVIGATE;if(i&&r&&t<=900&&a)return this.editorPanelGroup.setVisible(!1),void window.localStorage.setItem("noSidebarActiveState","1");i||(this.currentRoute=n),this.isSidebarSwitcherMounted?a&&this.updateView():(this.isSidebarSwitcherMounted=!0,this.sidebarSwitcher.render(this.canNavigate.bind(this)))}},{key:"updateView",value:function(){switch(this.currentRoute){case O.d.NOTIFICATIONS:this.showLoader(),this.redirectToNotificationsV2();break;case O.d.OLD_NOTIFICATIONS:this.redirectToNotificationsV1();break;case O.d.TRANSLATIONS:this.redirectToTranslations();break;case O.d.THEMES:this.redirectToThemes();break;case O.d.EDITOR:this.redirectToEditor();break;case O.d.PUBLISH:case O.d.PUBLISH_GET_LINK:case O.d.PUBLISH_WEEBLY_LINK:case O.d.PUBLISH_WEEBLY_LIGHTBOX:case O.d.PUBLISH_WEEBLY_PLATFORMS:case O.d.PUBLISH_WEEBLY:case O.d.PUBLISH_BIG_COMMERCE_LINK:case O.d.PUBLISH_BIG_COMMERCE_LIGHTBOX:case O.d.PUBLISH_BIG_COMMERCE_PLATFORMS:case O.d.PUBLISH_BIG_COMMERCE:case O.d.PUBLISH_SHOPIFY_LINK:case O.d.PUBLISH_SHOPIFY_LIGHTBOX:case O.d.PUBLISH_SHOPIFY_PLATFORMS:case O.d.PUBLISH_SHOPIFY:case O.d.PUBLISH_EMBED_CODE:case O.d.PUBLISH_BLOGGER:case O.d.PUBLISH_FACEBOOK:case O.d.PUBLISH_GOOGLE_SITES:case O.d.PUBLISH_JOOMLA:case O.d.PUBLISH_TWITTER:case O.d.PUBLISH_UNBOUNCE:case O.d.PUBLISH_WORDPRESS:case O.d.PUBLISH_PLATFORMS:case O.d.PUBLISH_PLATFORM_SHOPIFY:case O.d.PUBLISH_PLATFORM_WEEBLY:case O.d.PUBLISH_WIX_PLATFORMS:case O.d.PUBLISH_PLATFORM_BIG_COMMERCE:case O.d.PUBLISH_SALESFORCE:case O.d.PUBLISH_SALESFORCE_COMMUNITY:case O.d.PUBLISH_SALESFORCE_PLATFORMS:this.redirectToPublishV2(this.currentRoute);break;case O.d.PUBLISH_V1:this.redirectToPublishV1();break;case O.d.PAYMENTS:this.redirectToPayments();break;case O.d.PAYMENTS_V1:this.redirectToPaymentsV1();break;default:console.error("Route not implemented yet for: ".concat(this.currentRoute))}}},{key:"showLoader",value:function(){console.warn("Showing loader")}},{key:"redirectToNotificationsV2",value:function(){this.isNotificationsV2Initialised||this.editorPanelConfig.configureNewNotificationsPanel(this.editorPanelGroup,this.loader),this.isNotificationsV2Initialised=!0,this.editorPanelGroup.setVisible(!0),this.editorPanelGroup.setActivePanel(Zi.NOTIFICATIONS),this.disableUndoService(),this.URLHandler.setNewUrl(Zi.NOTIFICATIONS)}},{key:"redirectToNotificationsV1",value:function(){var e=this.loader.getHeader().getModel(),t=e.settings.formId,n=e.settings.pageName,i=e.settings.isSampleForm,r=i||n?"&click_from=".concat(n).concat(i?"_sample":""):"";this.URLHandler.setRawUrl("/index.php?p=settings&id=".concat(t,"&tab=1").concat(r))}},{key:"redirectToTranslations",value:function(){this.isTranslationsInitialised||this.editorPanelConfig.configureTranslations(this.editorPanelGroup,this.loader),this.isTranslationsInitialised=!0,this.editorPanelGroup.setVisible(!0),this.editorPanelGroup.setActivePanel(O.d.TRANSLATIONS),this.disableUndoService(),this.URLHandler.setNewUrl(O.d.TRANSLATIONS)}},{key:"redirectToThemes",value:function(){this.isThemesInitialised||(this.editorPanelConfig.configureThemes(this.editorPanelGroup,this.loader,this.loader.getJQuery()),this.loader.commands.loadThemePropertiesIntoPanel(),this.loader.commands.loadAvailableThemes()),this.isThemesInitialised=!0,this.editorPanelGroup.setVisible(!0),this.editorPanelGroup.setActivePanel(O.d.THEMES),this.resetUndoService(),this.URLHandler.setNewUrl(O.d.THEMES)}},{key:"redirectToEditor",value:function(){this.URLHandler.setNewUrl(O.d.EDITOR),this.loader.openEditorPanel(O.d.EDITOR)}},{key:"redirectToPublishV2",value:function(t){var n=window.innerWidth;if(this.isPublishInitialised||(this.editorPanelConfig.configureEmbedFormPanel(this.editorPanelGroup,this.loader),this.isPublishInitialised=!0),t||(t=O.d.PUBLISH_GET_LINK),n<=900&&(t=O.d.PUBLISH),this.editorPanelGroup.setVisible(!0),this.URLHandler.setNewUrl(t),this.loader.execCommand("set-active-panel","publish-form"),this.editorPanelGroup.setActivePanel(t),!(n<=900)){var i=this.editorPanelGroup.getPanelById("publish-form"),r=e.getPublishPanelName(t);i.openElementById(r)}}},{key:"redirectToPayments",value:function(){var e=this;this.currentRoute!=O.d.EDITOR&&this.loader.openEditorPanel(O.d.EDITOR),setTimeout((function(){var t;(null===(t=e.editorPanelGroup)||void 0===t?void 0:t.isVisible())&&(e.loader.commands.scrollToPaymentsInInspector(),e.URLHandler.setNewUrl(O.d.PAYMENTS))}),1e3)}},{key:"redirectToPaymentsV1",value:function(){var e=this.getFormId(),t=this.URLHandler.computeStaticUrl(O.d.PAYMENTS_V1,e,"edit_fields");this.URLHandler.setRawUrl(t)}},{key:"redirectToPublishV1",value:function(){var e=this.getFormId(),t=this.URLHandler.computeStaticUrl(O.d.PUBLISH_V1,e,"edit_fields");this.URLHandler.setRawUrl(t)}},{key:"canNavigate",value:function(){return this.currentRoute===O.d.NOTIFICATIONS?this.editorPanelGroup.getActivePanel().getUserConfirmationForDiscardingUnsavedChanges()?Promise.resolve():Promise.reject():Promise.resolve()}},{key:"disableUndoService",value:function(){this.updateUndoService(!1,!1)}},{key:"resetUndoService",value:function(){var e=this.loader.getUndoService().canRedo(),t=this.loader.getUndoService().canUndo();this.updateUndoService(t,e)}},{key:"updateUndoService",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.loader.getHeader().setButtonInteractionState(Hl.REDO,t),this.loader.getHeader().setButtonInteractionState(Hl.UNDO,e)}},{key:"getFormId",value:function(){return Object(Te.b)(Oe.j)}},{key:"getPublishPanelByTabId",value:function(e){switch(e){case O.cb.LINK:return O.d.PUBLISH_GET_LINK;case O.cb.EMBED_JAVASCRIPT:return O.d.PUBLISH_EMBED_CODE;case O.cb.PLATFORM_BIG_COMMERCE:return this.loader.getPlatformDetails().isBigCommerce?O.d.PUBLISH_BIG_COMMERCE:O.d.PUBLISH_PLATFORM_BIG_COMMERCE;case O.cb.PLATFORM_BLOGGER:return O.d.PUBLISH_BLOGGER;case O.cb.PLATFORM_FACEBOOK:return O.d.PUBLISH_FACEBOOK;case O.cb.PLATFORM_GOOGLE_SITES:return O.d.PUBLISH_GOOGLE_SITES;case O.cb.PLATFORM_JOOMLA:return O.d.PUBLISH_JOOMLA;case O.cb.PLATFORM_SHOPIFY:return this.loader.getPlatformDetails().isShopify?O.d.PUBLISH_SHOPIFY:O.d.PUBLISH_PLATFORM_SHOPIFY;case O.cb.PLATFORM_TWITTER:return O.d.PUBLISH_TWITTER;case O.cb.PLATFORM_UNBOUNCE:return O.d.PUBLISH_UNBOUNCE;case O.cb.PLATFORM_WORDPRESS:return O.d.PUBLISH_WORDPRESS;case O.cb.PLATFORM_WEEBLY:return this.loader.getPlatformDetails().isWeebly?O.d.PUBLISH_WEEBLY:O.d.PUBLISH_PLATFORM_WEEBLY;case O.cb.PUBLISH_PLATFORMS:return O.d.PUBLISH_PLATFORMS;case O.cb.PLATFORM_SALESFORCE:return O.d.PUBLISH_SALESFORCE;case O.cb.PLATFORM_SALESFORCE_COMMUNITY:return O.d.PUBLISH_SALESFORCE_COMMUNITY;case O.cb.PLATFORM_WIX:return O.d.PUBLISH_WIX_PLATFORMS;default:return O.d.PUBLISH_GET_LINK}}},{key:"removeActiveStateIfNewForm",value:function(){var e=this.URLHandler.getUrlVars();e&&"firsttime"===e.action&&window.localStorage.setItem("noSidebarActiveState","1")}}],[{key:"getPublishPanelName",value:function(e){switch(e){case O.d.PUBLISH_WEEBLY:return O.bb.PUBLISH_WEEBLY;case O.d.PUBLISH_WEEBLY_LINK:return O.bb.PUBLISH_WEEBLY_LINK;case O.d.PUBLISH_WEEBLY_LIGHTBOX:return O.bb.PUBLISH_WEEBLY_LIGHTBOX;case O.d.PUBLISH_WEEBLY_PLATFORMS:return O.bb.PUBLISH_PLATFORM_SHOPIFY;case O.d.PUBLISH_BIG_COMMERCE:return O.bb.PUBLISH_BIG_COMMERCE;case O.d.PUBLISH_BIG_COMMERCE_LINK:return O.bb.PUBLISH_BIG_COMMERCE_LINK;case O.d.PUBLISH_BIG_COMMERCE_LIGHTBOX:return O.bb.PUBLISH_BIG_COMMERCE_LIGHTBOX;case O.d.PUBLISH_BIG_COMMERCE_PLATFORMS:return O.bb.PUBLISH_PLATFORM_SHOPIFY;case O.d.PUBLISH_SHOPIFY:return O.bb.PUBLISH_SHOPIFY;case O.d.PUBLISH_SHOPIFY_LINK:return O.bb.PUBLISH_SHOPIFY_LINK;case O.d.PUBLISH_SHOPIFY_LIGHTBOX:return O.bb.PUBLISH_SHOPIFY_LIGHTBOX;case O.d.PUBLISH_SHOPIFY_PLATFORMS:return O.bb.PUBLISH_PLATFORM_BIG_COMMERCE;case O.d.PUBLISH_EMBED_CODE:return O.bb.PUBLISH_EMBED_CODE;case O.d.PUBLISH_BLOGGER:return O.bb.PUBLISH_BLOGGER;case O.d.PUBLISH_FACEBOOK:return O.bb.PUBLISH_FACEBOOK;case O.d.PUBLISH_GOOGLE_SITES:return O.bb.PUBLISH_GOOGLE_SITES;case O.d.PUBLISH_JOOMLA:return O.bb.PUBLISH_JOOMLA;case O.d.PUBLISH_TWITTER:return O.bb.PUBLISH_TWITTER;case O.d.PUBLISH_UNBOUNCE:return O.bb.PUBLISH_UNBOUNCE;case O.d.PUBLISH_WORDPRESS:return O.bb.PUBLISH_WORDPRESS;case O.d.PUBLISH_PLATFORM_BIG_COMMERCE:return O.bb.PUBLISH_PLATFORM_BIG_COMMERCE;case O.d.PUBLISH_PLATFORM_SHOPIFY:return O.bb.PUBLISH_PLATFORM_SHOPIFY;case O.d.PUBLISH_PLATFORM_WEEBLY:return O.bb.PUBLISH_PLATFORM_WEEBLY;case O.d.PUBLISH_SALESFORCE:return O.bb.PUBLISH_SALESFORCE;case O.d.PUBLISH_SALESFORCE_COMMUNITY:return O.bb.PUBLISH_SALESFORCE_COMMUNITY;case O.d.PUBLISH_SALESFORCE_PLATFORMS:return O.bb.PUBLISH_PLATFORM_SHOPIFY;case O.d.PUBLISH_PLATFORMS:return O.bb.PUBLISH_PLATFORMS;case O.d.PUBLISH_WIX_PLATFORMS:return O.bb.PUBLISH_PLATFORM_WIX;default:return O.bb.PUBLISH_LINK}}}]),e}(),lc=n(64),cc=n(225);function uc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var dc=function(e){u()(n,e);var t=uc(n);function n(e){var i;return o()(this,n),i=t.call(this),v()(A()(i),"panels",[]),v()(A()(i),"insertionNode",void 0),v()(A()(i),"activePanel",null),i.insertionNode=e,i.insertionNode.onclick=function(e){var t=i.insertionNode,n=t.offsetLeft,r=t.offsetWidth;e.clientX>n+r&&i.setVisible(!1)},i}return l()(n,[{key:"getPanels",value:function(){return this.panels}},{key:"withPanel",value:function(e){return this.panels.push(e),e.getRootNode().style.display="none",this.insertionNode.appendChild(e.getRootNode()),this}},{key:"getPanelById",value:function(e){for(var t=0,n=this.panels.length;t<n;t++)if(this.panels[t].getId()===e)return this.panels[t];return null}},{key:"setActivePanel",value:function(e,t){var n,i,r=this.getPanelById(e),a=this.getActivePanel(),o=a?a.getId():null;if(!r)return this.insertionNode.removeAttribute("data-visible-panel"),void this.trigger("panel-changed",null,o);if(this.activePanel){if(this.activePanel.setOpened)for(var s=this.activePanel.getChildren(),l=0,c=s.length;l<c;l++)s[l].setOpened&&s[l].setOpened(!1);this.activePanel.getRootNode().style.display="none",this.activePanel.trigger("hide")}switch(this.activePanel=r,this.activePanel.trigger("show"),this.activePanel.getRootNode().style.display="",e){case"translations":null===(n=CFTracker)||void 0===n||n.event("translations_open"),console.log("track :: translations_open");break;case"options":null===(i=CFTracker)||void 0===i||i.event("themes_open")}this.insertionNode.setAttribute("data-visible-panel",this.activePanel.getId()||"");var u=this.activePanel.getRootNode().querySelector("[data-role=vertical-content]");u&&(t=void 0!==t?parseInt(String(t),10):0,u.scrollTop=t,setTimeout((function(){u.scrollTop=t}),100)),this.trigger("panel-changed",this.activePanel,o)}},{key:"getActivePanel",value:function(){return this.activePanel}},{key:"isVisible",value:function(){return this.insertionNode.hasAttribute("data-visible")}},{key:"setVisible",value:function(e){(e=!!e)?this.insertionNode.setAttribute("data-visible","1"):(this.insertionNode.removeAttribute("data-visible"),this.activePanel&&this.activePanel.setOpened&&this.setActivePanel(null)),this.trigger("visibility-state-changed")}}]),n}(ir.a);function pc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var hc=function(e){u()(n,e);var t=pc(n);function n(e){var i;return o()(this,n),i=t.call(this),v()(A()(i),"loader",void 0),v()(A()(i),"oAuthReturnInterval",void 0),v()(A()(i),"oAuthTimeout",void 0),i.loader=e,i}return l()(n,[{key:"connect",value:function(e){if(e){var t="formId="+this.loader.getEngine().getDocument().getId()+"&settingTypeId="+e,n=location.hostname+"/modules/GenericOAuthFlow/index.php",i=location.protocol,r=open(encodeURI(i+"//"+n+"?"+t),"newEditorOAuthWindow");this.oAuthReturnInterval=setInterval((function(){r.postMessage("123fb-finishOAuthFlow","*")}),500),this.oAuthTimeout=setTimeout(this.clearIntervals,9e5)}}},{key:"clearIntervals",value:function(){clearInterval(this.oAuthReturnInterval),clearTimeout(this.oAuthTimeout)}},{key:"connectCallback",value:function(e,t){this.loader.getEngine().getDocument().oAuthApplicationSaveData(e,t),this.clearIntervals()}},{key:"disconnect",value:function(e){this.loader.getEngine().getDocument().oAuthApplicationDisconnect(e)}}]),n}(ir.a),_c=function(){function e(t){o()(this,e),v()(this,"modelStructure",void 0),this.modelStructure=t}return l()(e,[{key:"isDataCompliantWithModel",value:function(e){for(var t in e)if(!this.modelStructure.hasOwnProperty(t))return!1;return!0}}]),e}(),gc=function(){function e(t,n,i){o()(this,e),v()(this,"paymentProcessorsList",void 0),v()(this,"jq",void 0),v()(this,"api",void 0),this.api=t,this.jq=n,this.paymentProcessorsList=i}return l()(e,[{key:"getModel",value:function(e){if(null===this.paymentProcessorsList)throw new Error("Please initialize the Payment Processors List first.");if(void 0===this.paymentProcessorsList[e])throw new Error("Please specify a valid Processor ID.");return this.api.GET("/v2/settings/payments/processor/model",{paymentProcessorId:e}).fail((function(e){throw new Error(e)}))}},{key:"save",value:function(e,t,n){var i=this;return this.jq.Deferred((function(r){var a;try{a=i.getModel(t)}catch(o){r.reject(o)}void 0!==a&&a.done((function(a){new _c(a).isDataCompliantWithModel(n)?i.api.PUT_JSON("/v2/settings/payments/processor/configuration",{formId:e,processorId:t,data:n}).done((function(e){r.resolve(!0)})).fail((function(e){r.reject(e)})):r.reject(new Error("Data is not compliant with ".concat(i.paymentProcessorsList[t]," Model.")))}))})).promise()}},{key:"getProcList",value:function(){return this.paymentProcessorsList}}]),e}(),mc=n(87),fc=function(){function e(t){o()(this,e),v()(this,"plugins",[]),v()(this,"engine",void 0),this.engine=t}return l()(e,[{key:"getPlugin",value:function(e){for(var t=0,n=this.plugins.length;t<n;t++)if(this.plugins[t].getPluginTypeId()===e)return this.plugins[t];return null}},{key:"withPlugin",value:function(e){return this.plugins.push(e),this}}]),e}();v()(fc,"NO_PLUGIN",null),v()(fc,"SISOW_PLUGIN",1);var Ec=function(){function e(){o()(this,e)}return l()(e,[{key:"render",value:function(e,t){e.innerHTML=""}},{key:"getValues",value:function(e,t){return null}},{key:"getPluginTypeId",value:function(){return fc.NO_PLUGIN}}]),e}(),yc=function(){function e(){o()(this,e)}return l()(e,[{key:"render",value:function(t,n){t.innerHTML=e.htmlMarkupText||"",L.a.upgradeDOMNodeFromForm(t)}},{key:"getValues",value:function(e,t){var n={};return function(t){t(e).find("[data-role=frontend-plugin] select[name], [data-role=frontend-plugin] input[name]").each((function(){var e=this.getAttribute("name");e&&(n[e]=this.value||"")}))}(L.a.getJQuery()),n}},{key:"getPluginTypeId",value:function(){return fc.SISOW_PLUGIN}}],[{key:"withHTMLMarkupText",value:function(e){this.htmlMarkupText=e}}]),e}();function Tc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(yc,"htmlMarkupText","<b>Sisow Plugin not initialized!</b>");var vc=function(e){u()(n,e);var t=Tc(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"quizScore",0),v()(A()(e),"updateInAsyncMode",void 0),v()(A()(e),"commandDispatcher",void 0),v()(A()(e),"enabled",!1),setTimeout((function(){e.updateInImmediateMode()}),500),e.updateInAsyncMode=ie.a.create((function(){e.updateInImmediateMode()}),500),e}return l()(n,[{key:"updateInImmediateMode",value:function(){var e=this;this.commandDispatcher&&this.enabled&&(console.warn("QUIZ SCORE: START UPDATE"),this.commandDispatcher.getQuizScoreResults().then((function(t){var n=t.details.quizScore;console.warn("QUIZ SCORE: GOT POINTS: "+n),e.quizScore!==n&&(e.quizScore=n,e.trigger("change"))})).fail((function(e){console.error(e)})))}},{key:"getCurrentQuizScore",value:function(){return this.quizScore}},{key:"withCommandDispatcher",value:function(e){return this.commandDispatcher=e,this}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(e){return this.enabled=!!e,this}}]),n}(ir.a),Oc=n(270),bc=n(280),Cc=n(275),Ic=n(279),Rc=n(273),Pc=n(282),Nc=n(276),Ac=n(281),Sc=n(274),Lc=n(278),Dc=n(272),wc=n(277),kc=n(271);function Mc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var xc=function(e){u()(n,e);var t=Mc(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"wixTheme",void 0),v()(A()(e),"defaults",{colors:{selected:{color:"#0396ff"}},form:{background:{color:"transparent",image:"",position:"top left",repeat:"repeat",size:"original",attachment:"fixed"},font:{family:"'Open Sans', sans-serif",size:"14px",weight:"normal",style:"normal",line:{height:"1.2em"}},color:"#3e6680"},page:{background:{color:"#ffffff",image:"",position:"center",repeat:"no-repeat",size:"cover",attachment:"scroll"},border:{width:"0px",style:"none",color:"#3e6680"},margin:{bottom:"40px",top:"40px"},padding:{top:"20px",left:"20px",right:"20px",bottom:"20px"},shadow:{visibility:"1"}},container:{padding:{horizontal:"8px",vertical:"8px"}},control:{border:{width:"0px",style:"none",radius:"0px"},disabled:{background:{color:"transparent"},border:{color:"transparent"}},focused:{background:{color:"rgba(204,204,204,.4)"},border:{color:"transparent"}},selected:{background:{color:"rgba(204,204,204,.4)"},border:{color:"transparent"}},error:{background:{color:"transparent"},border:{color:"transparent"}},hover:{background:{color:"rgba(204,204,204,.2)"},border:{color:"transparent"}},normal:{background:{color:"transparent"},border:{color:"transparent"}},required:{star:{color:"rgba(255, 0, 0, 1)"}}},input:{border:{width:"1px",style:"solid",radius:"3px"},font:{family:"'Open Sans', sans-serif",size:"14px",weight:"normal",style:"normal",line:{height:"1.2em"}},padding:{vertical:"8px",horizontal:"8px"},margin:{vertical:"16px"},disabled:{background:{color:"transparent"},border:{color:"rgba(204,204,204,.5)"},color:"rgba(76,76,76,.5)"},focused:{background:{color:"rgba(0, 148, 255, .1)"},border:{color:"#0396ff"},color:"#4c4c4c"},selected:{background:{color:"rgba(0,153,204,.1)"},border:{color:"#0099cc"},color:"#4c4c4c"},error:{background:{color:"rgba(250, 72, 72, .11)"},border:{color:"#fa4848"},color:"#3e6680"},hover:{background:{color:"transparent"},border:{color:"#0396ff"},color:"#4c4c4c"},normal:{background:{color:"transparent"},border:{color:"#cccccc"},color:"#4c4c4c",placeholderColor:"initial"}},checkbox:{width:"16px",height:"16px",margin:"8px"},radio:{width:"16px",height:"16px",margin:"8px",appearance:""},label:{padding:{top:"10px",bottom:"8px"},margin:{top:"0px",bottom:"0px"},disabled:{color:"rgba(76,76,76,.5)"},focused:{color:"#3e6680"},selected:{color:"#4c4c4c"},error:{color:"#4c4c4c"},hover:{color:"#3e6680"},normal:{color:"#3e6680"}},instructions:{font:{family:"'Open Sans', sans-serif",size:"12px",weight:"normal",style:"normal",line:{height:"1.2em"}},padding:{top:"4px",bottom:"0px"},margin:{top:"0px",bottom:"0px"},disabled:{color:"rgba(170,170,170,.5)"},focused:{color:"#aaaaaa"},selected:{color:"#aaaaaa"},hover:{color:"#aaaaaa"},error:{color:"#aaaaaa"},normal:{color:"#aaaaaa"}},error:{font:{family:"'Open Sans', sans-serif",size:"12px",weight:"normal",style:"normal",line:{height:"1.2em"}},padding:{top:"4px",bottom:"0px"},normal:{color:"#fa4848"}},button:{font:{family:"'Open Sans', sans-serif",size:"14px",weight:"normal",style:"normal",line:{height:"2em"}},padding:{vertical:"8px",horizontal:"40px"},border:{width:"1px",style:"solid",radius:"3px"},primary:{normal:{border:{color:"transparent"},background:{color:"#19a8ce"},color:"#ffffff"},hover:{border:{color:"transparent"},background:{color:"#17a7ce"},color:"#ffffff"},disabled:{border:{color:"transparent"},background:{color:"rgba(76,76,76,.5)"},color:"#ffffff"}},secondary:{normal:{border:{color:"#676573"},background:{color:"#ffffff"},color:"#656573"},hover:{border:{color:"#656573"},background:{color:"#ffffff"},color:"#656573"},disabled:{border:{color:"rgba(76,76,76,.5)"},background:{color:"transparent"},color:"rgba(76,76,76,.5)"}}},table:{header:{background:{color:"#ececec"}}}}),v()(A()(e),"localThemeProperties",void 0),e.localThemeProperties=JSON.parse(JSON.stringify(e.defaults)),e.init(),e}return l()(n,[{key:"overrideExternalManagedThemeProperties",value:function(e){if(e&&this.wixTheme){var t=["string","number","boolean"];try{this.localThemeProperties.colors.selected.color=this.wixTheme.colors.linkColor.value,this.localThemeProperties.form.background.color="transparent",this.localThemeProperties.form.font.family=this.extractFontSettingPart(O.y.FONT_FAMILY,this.wixTheme.fonts.labelFontStyle),this.localThemeProperties.form.font.size=this.extractFontSettingPart(O.y.FONT_SIZE,this.wixTheme.fonts.labelFontStyle),this.localThemeProperties.form.font.weight=this.extractFontSettingPart(O.y.FONT_WEIGHT,this.wixTheme.fonts.labelFontStyle),this.localThemeProperties.form.font.style=this.extractFontSettingPart(O.y.FONT_STYLE,this.wixTheme.fonts.labelFontStyle),this.localThemeProperties.form.font.line.height=this.extractFontSettingPart(O.y.FONT_LINE_HEIGHT,this.wixTheme.fonts.labelFontStyle),this.localThemeProperties.form.color=this.wixTheme.colors.nameColor.value,this.localThemeProperties.page.background.color=this.wixTheme.colors.bodyBg.value,this.localThemeProperties.page.border.color="transparent",this.localThemeProperties.control.focused.background.color=this.wixTheme.colors.focusFieldBg.value,this.localThemeProperties.control.focused.border.color=this.wixTheme.colors.focusTextdColor.value,this.localThemeProperties.control.error.background.color="transparent",this.localThemeProperties.control.error.border.color="transparent",this.localThemeProperties.control.hover.background.color="transparent",this.localThemeProperties.control.hover.border.color="transparent",this.localThemeProperties.control.normal.background.color="transparent",this.localThemeProperties.control.normal.border.color="transparent",this.localThemeProperties.control.required.star.color=this.wixTheme.colors.requireColor.value,this.localThemeProperties.input.font.family=this.extractFontSettingPart(O.y.FONT_FAMILY,this.wixTheme.fonts.fieldFont),this.localThemeProperties.input.font.size=this.extractFontSettingPart(O.y.FONT_SIZE,this.wixTheme.fonts.fieldFont),this.localThemeProperties.input.font.weight=this.extractFontSettingPart(O.y.FONT_WEIGHT,this.wixTheme.fonts.fieldFont),this.localThemeProperties.input.font.style=this.extractFontSettingPart(O.y.FONT_STYLE,this.wixTheme.fonts.fieldFont),this.localThemeProperties.input.font.line.height=this.extractFontSettingPart(O.y.FONT_LINE_HEIGHT,this.wixTheme.fonts.fieldFont),this.localThemeProperties.input.focused.background.color=this.wixTheme.colors.focusFieldBg.value,this.localThemeProperties.input.focused.border.color=this.wixTheme.colors.borderColorFields.value,this.localThemeProperties.input.focused.color=this.wixTheme.colors.focusTextdColor.value,this.localThemeProperties.input.error.background.color=this.wixTheme.colors.validationBgColor.value,this.localThemeProperties.input.error.border.color=this.wixTheme.colors.borderColorFields.value,this.localThemeProperties.input.error.color=this.wixTheme.colors.errormsgColor.value,this.localThemeProperties.input.hover.background.color=this.wixTheme.colors.fieldBg.value,this.localThemeProperties.input.hover.border.color=this.wixTheme.colors.borderColorFields.value,this.localThemeProperties.input.hover.color=this.wixTheme.colors.fieldColor.value,this.localThemeProperties.input.normal.background.color=this.wixTheme.colors.fieldBg.value,this.localThemeProperties.input.normal.border.color=this.wixTheme.colors.borderColorFields.value,this.localThemeProperties.input.normal.color=this.wixTheme.colors.fieldColor.value,this.localThemeProperties.input.normal.placeholderColor=this.wixTheme.colors.placeholderColor.value,this.localThemeProperties.label.focused.color=this.wixTheme.colors.labelColor.value,this.localThemeProperties.label.error.color=this.wixTheme.colors.errormsgColor.value,this.localThemeProperties.label.hover.color=this.wixTheme.colors.labelColor.value,this.localThemeProperties.label.normal.color=this.wixTheme.colors.labelColor.value,this.localThemeProperties.instructions.font.family=this.extractFontSettingPart(O.y.FONT_FAMILY,this.wixTheme.fonts.labelInfoFontStyle),this.localThemeProperties.instructions.font.size=this.extractFontSettingPart(O.y.FONT_SIZE,this.wixTheme.fonts.labelInfoFontStyle),this.localThemeProperties.instructions.font.weight=this.extractFontSettingPart(O.y.FONT_WEIGHT,this.wixTheme.fonts.labelInfoFontStyle),this.localThemeProperties.instructions.font.style=this.extractFontSettingPart(O.y.FONT_STYLE,this.wixTheme.fonts.labelInfoFontStyle),this.localThemeProperties.instructions.font.line.height=this.extractFontSettingPart(O.y.FONT_LINE_HEIGHT,this.wixTheme.fonts.labelInfoFontStyle),this.localThemeProperties.instructions.focused.color=this.wixTheme.colors.labelInfoColor.value,this.localThemeProperties.instructions.error.color=this.wixTheme.colors.errormsgColor.value,this.localThemeProperties.instructions.hover.color=this.wixTheme.colors.labelInfoColor.value,this.localThemeProperties.instructions.normal.color=this.wixTheme.colors.labelInfoColor.value,this.localThemeProperties.error.font.family=this.extractFontSettingPart(O.y.FONT_FAMILY,this.wixTheme.fonts.labelFontStyle),this.localThemeProperties.error.font.size=this.extractFontSettingPart(O.y.FONT_SIZE,this.wixTheme.fonts.labelFontStyle),this.localThemeProperties.error.font.weight=this.extractFontSettingPart(O.y.FONT_WEIGHT,this.wixTheme.fonts.labelFontStyle),this.localThemeProperties.error.font.style=this.extractFontSettingPart(O.y.FONT_STYLE,this.wixTheme.fonts.labelFontStyle),this.localThemeProperties.error.font.line.height=this.extractFontSettingPart(O.y.FONT_LINE_HEIGHT,this.wixTheme.fonts.labelFontStyle),this.localThemeProperties.error.normal.color=this.wixTheme.colors.errormsgColor.value,this.localThemeProperties.button.font.family=this.extractFontSettingPart(O.y.FONT_FAMILY,this.wixTheme.fonts.buttonFontStyle),this.localThemeProperties.button.font.size=this.extractFontSettingPart(O.y.FONT_SIZE,this.wixTheme.fonts.buttonFontStyle),this.localThemeProperties.button.font.weight=this.extractFontSettingPart(O.y.FONT_WEIGHT,this.wixTheme.fonts.buttonFontStyle),this.localThemeProperties.button.font.style=this.extractFontSettingPart(O.y.FONT_STYLE,this.wixTheme.fonts.buttonFontStyle),this.localThemeProperties.button.font.line.height=this.extractFontSettingPart(O.y.FONT_LINE_HEIGHT,this.wixTheme.fonts.buttonFontStyle),this.localThemeProperties.button.primary.normal.border.color=this.wixTheme.colors.borderColorButton.value,this.localThemeProperties.button.primary.normal.background.color=this.wixTheme.colors.buttonsBg.value,this.localThemeProperties.button.primary.normal.color=this.wixTheme.colors.buttonsColor.value,this.localThemeProperties.button.primary.hover.border.color=this.wixTheme.colors.borderColorButton.value,this.localThemeProperties.button.primary.hover.background.color=this.wixTheme.colors.buttonsBg.value,this.localThemeProperties.button.primary.hover.color=this.wixTheme.colors.buttonsColor.value,this.localThemeProperties.button.secondary.normal.border.color=this.wixTheme.colors.borderColorButton.value,this.localThemeProperties.button.secondary.normal.background.color=this.wixTheme.colors.buttonsBg.value,this.localThemeProperties.button.secondary.normal.color=this.wixTheme.colors.buttonsColor.value,this.localThemeProperties.button.secondary.hover.border.color=this.wixTheme.colors.borderColorButton.value,this.localThemeProperties.button.secondary.hover.background.color=this.wixTheme.colors.buttonsBg.value,this.localThemeProperties.button.secondary.hover.color=this.wixTheme.colors.buttonsColor.value,this.wixTheme.numbers&&"number"===typeof this.wixTheme.numbers.borderRadius?(this.localThemeProperties.button.border.radius=this.wixTheme.numbers.borderRadius+"px",this.localThemeProperties.input.border.radius=this.wixTheme.numbers.borderRadius+"px"):(this.localThemeProperties.button.border.radius=this.defaults.button.border.radius,this.localThemeProperties.input.border.radius=this.defaults.input.border.radius),this.wixTheme.numbers&&"number"===typeof this.wixTheme.numbers.borderWidth?(this.localThemeProperties.button.border.width=this.wixTheme.numbers.borderWidth+"px",this.localThemeProperties.input.border.width=this.wixTheme.numbers.borderWidth+"px"):(this.localThemeProperties.button.border.width=this.defaults.button.border.width,this.localThemeProperties.input.border.width=this.defaults.input.border.width),function e(n,i){if(n&&i)for(var r in n)if(n.hasOwnProperty(r)&&i.hasOwnProperty(r)){var a=Qt()(n[r]);a===Qt()(i[r])&&(t.indexOf(a)>-1?i[r]=n[r]:P()(n[r],Object)&&P()(i[r],Object)&&e(n[r],i[r]))}}(this.localThemeProperties,e)}catch(n){console.warn("WARNING: FAILED TO MEREG WIX DEFAULT PROPERTIES! EXCEPTION IS SHOWN BELOW"),console.error(n)}}}},{key:"setWixTheme",value:function(e){this.wixTheme=e,console.warn("THEME: ",this.wixTheme),this.trigger("change")}},{key:"init",value:function(){var e,t=window.Wix;t&&(console.warn("WIX sdk detected! Initializing External Theme"),e=this,t.addEventListener(t.Events.STYLE_PARAMS_CHANGE,(function(t){console.warn("WIX: Events.STYLE_PARAMS_CHANGE event!"),e.setWixTheme(t)})),t.Styles.getStyleParams((function(t){console.warn("WIX: GOT Styles.getStyleParams"),e.setWixTheme(t)})))}},{key:"extractFontSettingPart",value:function(e,t){var n,i=/^font\:([^ ]+) ([^ ]+) ([^ ]+) ([\d]+px)\/([^ ]+) ([\s\S]+)$/;switch(e){case O.y.FONT_SIZE:return~~t.size+"px";case O.y.FONT_FAMILY:return(n=i.exec(t.value))?n[6].replace(/"/g,"'"):'"Open Sans",sans-serif';case O.y.FONT_LINE_HEIGHT:return(n=i.exec(t.value))?n[4]:"14px";case O.y.FONT_STYLE:return t.style.italic?"italic":"normal";case O.y.FONT_WEIGHT:return t.style.bold?"bold":"normal";default:return null}}},{key:"isPropertyManaged",value:function(e){for(var t,n=String(e||"").split(/[_.]/),i=this.localThemeProperties,r=0,a=n.length;r<a;r++){if(void 0===i[t=n[r]])return!1;i=i[t]}return!0}},{key:"hasExternalStorage",value:function(){return!0}},{key:"getThemeStrategy",value:function(){return O.nb.WIX_THEME_MANAGED_BY_WIX}},{key:"setProperty",value:function(e,t){}},{key:"getDefaultThemeProperties",value:function(){return JSON.parse(JSON.stringify(this.defaults))}}]),n}(ir.a);function Uc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Fc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uc(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Yc=function(e){u()(n,e);var t=Bc(n);function n(){var e;o()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),v()(A()(e),"defaults",{colors:{selected:{color:"#0099cc"}},form:{background:{color:"transparent",image:"",position:"center",repeat:"no-repeat",size:"cover",attachment:"scroll"},font:{family:"'Open Sans', sans-serif",size:"14px",weight:"normal",style:"normal",line:{height:"1.2em"}},color:"#4c4c4c"},page:{background:{color:"#ffffff",image:"",position:"center",repeat:"no-repeat",size:"cover",attachment:"scroll"},border:{width:"0px",style:"none",color:"#4c4c4c"},margin:{bottom:"40px",top:"40px"},padding:{top:"20px",left:"20px",right:"20px",bottom:"20px"},shadow:{visibility:"1"}},container:{padding:{horizontal:"8px",vertical:"8px"}},control:{border:{width:"0px",style:"none",radius:"0px"},disabled:{background:{color:"transparent"},border:{color:"transparent"}},focused:{background:{color:"rgba(204,204,204,.4)"},border:{color:"transparent"}},selected:{background:{color:"rgba(204,204,204,.4)"},border:{color:"transparent"}},error:{background:{color:"transparent"},border:{color:"transparent"}},hover:{background:{color:"rgba(204,204,204,.2)"},border:{color:"transparent"}},normal:{background:{color:"transparent"},border:{color:"transparent"}},required:{star:{color:"rgba(255, 0, 0, 1)"}}},input:{border:{width:"1px",style:"solid",radius:"3px"},font:{family:"'Open Sans', sans-serif",size:"14px",weight:"normal",style:"normal",line:{height:"1.2em"}},padding:{vertical:"8px",horizontal:"8px"},margin:{vertical:"16px"},disabled:{background:{color:"transparent"},border:{color:"rgba(204,204,204,.5)"},color:"rgba(76,76,76,.5)"},focused:{background:{color:"rgba(0,153,204,.1)"},border:{color:"#0099cc"},color:"#4c4c4c"},selected:{background:{color:"rgba(0,153,204,.1)"},border:{color:"#0099cc"},color:"#4c4c4c"},error:{background:{color:"rgba(250,72,72,.11)"},border:{color:"#fa4848"},color:"#4c4c4c"},hover:{background:{color:"transparent"},border:{color:"#0099cc"},color:"#4c4c4c"},normal:{background:{color:"transparent"},border:{color:"#cccccc"},color:"#4c4c4c"}},checkbox:{width:"16px",height:"16px",margin:"8px"},radio:{width:"16px",height:"16px",margin:"8px",appearance:""},label:{padding:{top:"10px",bottom:"8px"},margin:{top:"0px",bottom:"0px"},disabled:{color:"rgba(76,76,76,.5)"},focused:{color:"#4c4c4c"},selected:{color:"#4c4c4c"},error:{color:"#4c4c4c"},hover:{color:"#4c4c4c"},normal:{color:"#4c4c4c"}},instructions:{font:{family:"'Open Sans', sans-serif",size:"12px",weight:"normal",style:"normal",line:{height:"1.2em"}},padding:{top:"4px",bottom:"0px"},margin:{top:"0px",bottom:"0px"},disabled:{color:"rgba(170,170,170,.5)"},focused:{color:"#aaaaaa"},selected:{color:"#aaaaaa"},hover:{color:"#aaaaaa"},error:{color:"#aaaaaa"},normal:{color:"#aaaaaa"}},error:{font:{family:"'Open Sans', sans-serif",size:"12px",weight:"normal",style:"normal",line:{height:"1.2em"}},padding:{top:"4px",bottom:"0px"},normal:{color:"#fa4848"}},button:{font:{family:"'Open Sans', sans-serif",size:"14px",weight:"normal",style:"normal",line:{height:"2em"}},padding:{vertical:"8px",horizontal:"40px"},border:{width:"1px",style:"solid",radius:"3px"},primary:{normal:{border:{color:"transparent"},background:{color:"#4c4c4c"},color:"#ffffff"},hover:{border:{color:"transparent"},background:{color:"#707070"},color:"#ffffff"},disabled:{border:{color:"transparent"},background:{color:"rgba(76,76,76,.5)"},color:"#ffffff"}},secondary:{normal:{border:{color:"#4c4c4c"},background:{color:"transparent"},color:"#4c4c4c"},hover:{border:{color:"transparent"},background:{color:"#4c4c4c"},color:"#ffffff"},disabled:{border:{color:"rgba(76,76,76,.5)"},background:{color:"transparent"},color:"rgba(76,76,76,.5)"}}},table:{header:{background:{color:"#ececec"}}}}),v()(A()(e),"defaultThemeV2",Fc({},e.defaults,{colors:{selected:{color:"#2a2a2a"}},form:{background:Fc({},e.defaults.form.background,{color:"#ffffff"}),font:Fc({},e.defaults.form.font,{family:"Lato",size:"16px"}),color:"#2a2a2a"},page:Fc({},e.defaults.page,{shadow:{visibility:""}}),input:Fc({},e.defaults.input,{font:Fc({},e.defaults.input.font,{family:"Lato",size:"16px"}),focused:{background:{color:"#edf2f7"},border:{color:"#a0aec0"},color:"#2a2a2a"},error:Fc({},e.defaults.input.error,{background:{color:"transparent"},color:"#2a2a2a"}),hover:{background:{color:"#edf2f7"},border:{color:"#a0aec0"},color:"#2a2a2a"},normal:Fc({},e.defaults.input.normal,{border:{color:"#a0aec0"},color:"#2a2a2a"})}),label:Fc({},e.defaults.label,{focused:{color:"#2a2a2a"},error:{color:"#2a2a2a"},hover:{color:"#2a2a2a"},normal:{color:"#2a2a2a"}}),instructions:Fc({},e.defaults.instructions,{font:Fc({},e.defaults.instructions.font,{family:"Lato",size:"14px"}),focused:{color:"#808080"},hover:{color:"#808080"},error:{color:"#808080"},normal:{color:"#808080"}}),error:Fc({},e.defaults.error,{font:Fc({},e.defaults.error.font,{family:"Lato",size:"14px"})}),button:Fc({},e.defaults.button,{font:Fc({},e.defaults.button.font,{family:"Lato",size:"16px",weight:"bold"}),padding:Fc({},e.defaults.button.padding,{horizontal:"30px"}),primary:Fc({},e.defaults.button.primary,{normal:Fc({},e.defaults.button.primary.normal,{background:{color:"#0142a2"}}),hover:Fc({},e.defaults.button.primary.hover,{background:{color:"#002151"}})}),secondary:Fc({},e.defaults.button.secondary,{normal:Fc({},e.defaults.button.secondary.normal,{border:{color:"#2a2a2a"},color:"#2a2a2a"}),hover:Fc({},e.defaults.button.secondary.hover,{background:{color:"#2a2a2a"}})})})})),e}return l()(n,[{key:"getThemeStrategy",value:function(){return O.nb.INTERNAL}},{key:"overrideExternalManagedThemeProperties",value:function(e){}},{key:"isPropertyManaged",value:function(e){return!1}},{key:"hasExternalStorage",value:function(){return!1}},{key:"setProperty",value:function(e,t){}},{key:"getDefaultThemeProperties",value:function(){var e,t=Fi.a.getInstance(),n=(null===(e=t.isDefaultThemeV2Active)||void 0===e?void 0:e.call(t))?this.defaultThemeV2:this.defaults;return JSON.parse(JSON.stringify(n))}}]),n}(ir.a);function Vc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Hc=function(e){u()(n,e);var t=Vc(n);function n(e,i){var r;return o()(this,n),r=t.call(this),v()(A()(r),"saveThemeToExternalStorageThrottler",void 0),v()(A()(r),"readOnlyMode",void 0),v()(A()(r),"engine",void 0),v()(A()(r),"defaults",{colors:{selected:{color:"#0396ff"}},form:{background:{color:"transparent",image:"",position:"top left",repeat:"repeat",size:"original",attachment:"fixed"},font:{family:"'Open Sans', sans-serif",size:"14px",weight:"normal",style:"normal",line:{height:"1.2em"}},color:"#3e6680"},page:{background:{color:"#ffffff",image:"",position:"center",repeat:"no-repeat",size:"cover",attachment:"scroll"},border:{width:"0px",style:"none",color:"#3e6680"},margin:{bottom:"40px",top:"40px"},padding:{top:"20px",left:"20px",right:"20px",bottom:"20px"},shadow:{visibility:"1"}},container:{padding:{horizontal:"8px",vertical:"8px"}},control:{border:{width:"0px",style:"none",radius:"0px"},disabled:{background:{color:"transparent"},border:{color:"transparent"}},focused:{background:{color:"rgba(204,204,204,.4)"},border:{color:"transparent"}},selected:{background:{color:"rgba(204,204,204,.4)"},border:{color:"transparent"}},error:{background:{color:"transparent"},border:{color:"transparent"}},hover:{background:{color:"rgba(204,204,204,.2)"},border:{color:"transparent"}},normal:{background:{color:"transparent"},border:{color:"transparent"}},required:{star:{color:"rgba(255, 0, 0, 1)"}}},input:{border:{width:"1px",style:"solid",radius:"3px"},font:{family:"'Open Sans', sans-serif",size:"14px",weight:"normal",style:"normal",line:{height:"1.2em"}},padding:{vertical:"8px",horizontal:"8px"},margin:{vertical:"16px"},disabled:{background:{color:"transparent"},border:{color:"rgba(204,204,204,.5)"},color:"rgba(76,76,76,.5)"},focused:{background:{color:"rgba(0, 148, 255, .1)"},border:{color:"#0396ff"},color:"#4c4c4c"},selected:{background:{color:"rgba(0,153,204,.1)"},border:{color:"#0099cc"},color:"#4c4c4c"},error:{background:{color:"rgba(250, 72, 72, .11)"},border:{color:"#fa4848"},color:"#3e6680"},hover:{background:{color:"transparent"},border:{color:"#0396ff"},color:"#4c4c4c"},normal:{background:{color:"transparent"},border:{color:"#cccccc"},color:"#4c4c4c"}},checkbox:{width:"16px",height:"16px",margin:"8px"},radio:{width:"16px",height:"16px",margin:"8px",appearance:""},label:{padding:{top:"10px",bottom:"8px"},margin:{top:"0px",bottom:"0px"},disabled:{color:"rgba(76,76,76,.5)"},focused:{color:"#3e6680"},selected:{color:"#4c4c4c"},error:{color:"#4c4c4c"},hover:{color:"#3e6680"},normal:{color:"#3e6680"}},instructions:{font:{family:"'Open Sans', sans-serif",size:"12px",weight:"normal",style:"normal",line:{height:"1.2em"}},padding:{top:"4px",bottom:"0px"},margin:{top:"0px",bottom:"0px"},disabled:{color:"rgba(170,170,170,.5)"},focused:{color:"#aaaaaa"},selected:{color:"#aaaaaa"},hover:{color:"#aaaaaa"},error:{color:"#aaaaaa"},normal:{color:"#aaaaaa"}},error:{font:{family:"'Open Sans', sans-serif",size:"12px",weight:"normal",style:"normal",line:{height:"1.2em"}},padding:{top:"4px",bottom:"0px"},normal:{color:"#fa4848"}},button:{font:{family:"'Open Sans', sans-serif",size:"14px",weight:"normal",style:"normal",line:{height:"2em"}},padding:{vertical:"8px",horizontal:"40px"},border:{width:"1px",style:"solid",radius:"3px"},primary:{normal:{border:{color:"transparent"},background:{color:"#19a8ce"},color:"#ffffff"},hover:{border:{color:"transparent"},background:{color:"#17a7ce"},color:"#ffffff"},disabled:{border:{color:"transparent"},background:{color:"rgba(76,76,76,.5)"},color:"#ffffff"}},secondary:{normal:{border:{color:"#676573"},background:{color:"#ffffff"},color:"#656573"},hover:{border:{color:"#656573"},background:{color:"#ffffff"},color:"#656573"},disabled:{border:{color:"rgba(76,76,76,.5)"},background:{color:"transparent"},color:"rgba(76,76,76,.5)"}}},table:{header:{background:{color:"#ececec"}}}}),v()(A()(r),"themeId",null),v()(A()(r),"localThemeProperties",void 0),r.localThemeProperties=JSON.parse(JSON.stringify(r.defaults)),r.readOnlyMode=e,r.engine=i,r.saveThemeToExternalStorageThrottler=ie.a.create((function(){r.saveTheme(r.themeId),r.themeId=null}),1e3),i.on("theme-before-render",(function(){r.loadInitialThemeProperties()})),r.on("theme-id-changed",(function(e){r.themeId=e,r.saveThemeToExternalStorageThrottler()})),r}return l()(n,[{key:"getThemeStrategy",value:function(){return O.nb.WIX_THEME}},{key:"hasExternalStorage",value:function(){return!0}},{key:"overrideExternalManagedThemeProperties",value:function(e){if(e&&this.localThemeProperties){var t=["string","number","boolean"];!function e(n,i){if(n&&i)for(var r in n)if(n.hasOwnProperty(r)&&i.hasOwnProperty(r)){var a=Qt()(n[r]);a===Qt()(i[r])&&(t.indexOf(a)>-1?i[r]=n[r]:P()(n[r],Object)&&P()(i[r],Object)&&e(n[r],i[r]))}}(this.localThemeProperties,e)}}},{key:"isPropertyManaged",value:function(e){return!0}},{key:"setProperty",value:function(e,t){this.setPropertyWithoutEmittingEvents(e,t),this.saveThemeToExternalStorageThrottler()}},{key:"flatten",value:function(e,t,n){if(e&&"object"===Qt()(e))for(var i in e)if(e.hasOwnProperty(i)){if(t.push(i),"object"===Qt()(e[i]))this.flatten(e[i],t,n);else{var r=S.a.getNormalizedCSSColorNotationFromString(e[i]),a=!!r,o={name:t.join("_"),value:a?r:e[i]};n.push(o)}t.pop()}}},{key:"enumerateProperties",value:function(){var e=[];return this.flatten(this.localThemeProperties,[],e),e}},{key:"saveTheme",value:function(e){this.readOnlyMode||this.engine.getLoader().execCommand("save-external-theme",e)}},{key:"loadInitialThemeProperties",value:function(){var e=this.engine.getLoader().getLoaderDependency(O.M.EXTERNAL_THEME_INITIAL_PROPERTIES);if(e&&Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)this.setPropertyWithoutEmittingEvents(e[t].name,e[t].value);this.trigger("change")}}},{key:"setPropertyWithoutEmittingEvents",value:function(e,t){if(null===t||"string"===typeof t)for(var n,i=String(e||"").split(/[_.]/),r=this.localThemeProperties,a=0,o=i.length;a<o;a++){if(void 0===r[n=i[a]])return void console.warn("WixThemeWithExternalStorage.setPropertyWithoutEmittingEvents: Invalid property name!");a<o-1?r=r[n]:r[n]=t}else console.warn("WixThemeWithExternalStorage.setPropertyWithoutEmittingEvents: Invalid property value!")}},{key:"getDefaultThemeProperties",value:function(){return JSON.parse(JSON.stringify(this.defaults))}}]),n}(ir.a),Gc=n(235),Wc=function(){function e(){o()(this,e)}return l()(e,null,[{key:"addNoFollowOnLinks",value:function(e){var t=document.createElement("div"),n=t.getElementsByTagName("a");return t.innerHTML=e,Array.prototype.forEach.call(n,(function(e){return e.setAttribute("rel","nofollow ugc")})),t.innerHTML}}]),e}();function jc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Kc=function(e){u()(n,e);var t=jc(n);function n(e,i,r,a){var s;return o()(this,n),s=t.call(this),v()(A()(s),"jq",void 0),v()(A()(s),"api",void 0),v()(A()(s),"translations",void 0),v()(A()(s),"lang",void 0),v()(A()(s),"version",null),v()(A()(s),"htmlDOMNode",document.createElement("span")),v()(A()(s),"intlWarnings",{}),v()(A()(s),"resourceManager",void 0),s.jq=e,s.lang=r,s.api=i,s.resourceManager=a,s}return l()(n,[{key:"clear",value:function(){return this.translations=void 0,this}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return void 0!==this.translations?function(e,t){return t.Deferred((function(t){t.resolve(e)})).promise()}(this,this.jq):function(t,n,i,r){return n.Deferred((function(n){t.resourceManager.get(null===e?"".concat(i.getApiRootAddress(),"/v2/language/").concat(r):e).then((function(e){"string"===typeof e&&(e=JSON.parse(e)),t.lang=e.lang,t.translations=e.data,t.version=e.version,t.trigger("load"),n.resolve(t)})).fail((function(e){n.reject("Failed to load intl: ".concat(e))}))})).promise()}(this,this.jq,this.api,this.lang)}},{key:"getVersion",value:function(){return this.version}},{key:"getLanguageCode",value:function(){return this.lang}},{key:"translateText",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e){if(void 0===this.translations)return null;var r="undefined"!==typeof this.translations[e=String(e)||""]&&null!==this.translations[e]?this.translations[e]:("undefined"==typeof(o=this).intlWarnings[e]&&(console.warn("I18n: key ".concat(JSON.stringify(e)," is not defined!")),o.intlWarnings[e]=!0),e);r=r.replace(/\$([\s]+)?\{([\d]+)\}/g,(function(){var e=~~(arguments.length<=2?void 0:arguments[2]);return String(n[e]||"${".concat(e,"}"))}));var a=0;return r=r.replace(/%(s|d)/g,(function(){var e=String(n[a]||(arguments.length<=0?void 0:arguments[0]));return a++,e}))}return e;var o}},{key:"translateHTMLText",value:function(e){if(void 0===this.translations)return null;var t,n=String(e||"");return t=this,n.replace(/\[\[([a-zA-Z0-9_\$\-]+)(\!)?\]\]/g,(function(){var e=(arguments.length<=2?void 0:arguments[2])?t.translateText(arguments.length<=1?void 0:arguments[1]):t.escapeHTML(t.translateText(arguments.length<=1?void 0:arguments[1]));return U.a.parse(e)})).replace(/<!--[^\-]+-->/g,"")}},{key:"escapeHTML",value:function(e){this.htmlDOMNode.textContent=String(e||"");var t=this.htmlDOMNode.innerHTML;return this.htmlDOMNode.textContent="",t}},{key:"translateDOMNode",value:function(e){!function(t,n){t(e).find("[data-i18n-text]").each((function(){var e=this.getAttribute("data-i18n-text"),t=n.translateText(e);if(t&&t!==e){var i={};this.hasAttribute("data-i18n-param")&&(i=Object(ft.p)(this.getAttribute("data-i18n-param"))),t=t.replace(/\{\{([a-zA-Z0-9_$]+)\}\}/g,(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i[n[0]]||e})),this.hasAttribute("data-skip-markdown")?this.textContent=t:this.innerHTML=M.a.sanitizeHTML(U.a.parse(t))}})),t(e).find("[data-i18n-placeholder]").each((function(){var e=this.getAttribute("data-i18n-placeholder"),t=n.translateText(e);t&&t!==e&&(this.hasAttribute("data-i18n-markdown-text")?this.placeholder=U.a.toPlainText(t):this.placeholder=t)})),t(e).find("[data-i18n-title]").each((function(){var e=this.getAttribute("data-i18n-title"),t=n.translateText(e);t&&t!==e&&(this.title=t)})),t(e).find("[data-i18n-html]").each((function(){var e=this.getAttribute("data-i18n-html"),t=n.translateText(e);t&&t!==e&&(t=Wc.addNoFollowOnLinks(t),this.innerHTML=M.a.sanitizeHTMLUsingUserRights(t))})),t(e).find("[data-i18n-attribute-name][data-i18n-attribute-value]").each((function(){var e=this.getAttribute("data-i18n-attribute-name"),t=this.getAttribute("data-i18n-attribute-value");if(e&&t){var i=n.translateText(t);i&&i!==t&&this.setAttribute(e,i)}}))}(this.jq,this)}},{key:"translateTextDefault",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=this.translateText.apply(this,[e].concat(i));return e&&a&&a!==e?a:t}}]),n}(ir.a),zc=function(){function e(t){o()(this,e),v()(this,"document",void 0),this.document=t}return l()(e,[{key:"getMapping",value:function(e,t,n){t=t||0;var i=/^(control[-_]{0,1})?([\d]+)([-_]([\d]+))?/.exec(String(e||""));if(!i)return null;var r=parseInt(i[2]),a=parseInt(i[4]||"0"),o=null;if(!(o=n?this.document.getElementByIdAndRepeatedPath(r,t,n):this.document.getElementById(r,t)))return null;if(O.p.CONTROL!==o.getElementKind())return null;var s=o.getPropertyDescriptorByInputIndex(a);if(null===s){if(0!==a)return null;var l=o.enumerateIndexes();if(l&&l.length&&(s=o.getPropertyDescriptorByInputIndex(l[0]||0)),null===s)return null}return s.element=o,s}},{key:"getDocument",value:function(){return this.document}}]),e}(),Xc=n(12),Zc=n(156);function qc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Jc=function(e){u()(n,e);var t=qc(n);function n(e,i){var r;return o()(this,n),r=t.call(this),v()(A()(r),"loader",void 0),v()(A()(r),"translator",void 0),v()(A()(r),"controlsCache",{}),v()(A()(r),"repeatablePromisesChain",void 0),r.loader=e,r.translator=i,r.init(),r.repeatablePromisesChain=r.getJQuery().Deferred((function(e){e.resolve()})).promise(),r}return l()(n,[{key:"clearControlsCache",value:function(){this.controlsCache={}}},{key:"getControlInstanceById",value:function(e){if(null===this.translator.getMapping(e))return null;var t=this.translator.getMapping(e);return t?t.element:null}},{key:"getControlValueById",value:function(e){if("language"===e)return this.loader.getI18n().getLanguageCode();if("quiz_score"===e)return this.loader.getQuizScoreService().getCurrentQuizScore();var t,n=this.translator.getMapping(e);return null!==n?(t=n.element.getElementKind()!==O.p.CONTROL||n.element.isVisible(!0)?n.element.getProperty(n.targetPropertyFQN):0,n.parser?n.parser(t):t):void 0}},{key:"setControlValueById",value:function(e,t,n,i){var r=this;if(null!==i&&null!==n&&"object"===Qt()(i)&&n.length>0&&n.length===i.length)try{this.loader.getRules().getRules().length?this.loader.getRules().getDatabase().on("idle",(function(){for(var a=r.loader.getRules(),o=a.getRules(),s=[],l=0,c=o.length;l<c;l++){var u=o[l];"undefined"===typeof u.repeatablePath&&s.push(JSON.parse(JSON.stringify(u)))}a.resetRules(s),r.loader.getViewFormContext()!==O.vb.SAVE_FOR_LATER&&r.setControlValueWithRepeatableSubmitData(e,t,n,i)})):this.setControlValueWithRepeatableSubmitData(e,t,n,i)}catch(d){console.warn("Failed to populate repeatable data. Occurred error is displayed in console."),console.error(d)}else{var a=[b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_PHONE,b.a.CONTROL_TYPE_ADDRESS,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_NAME,b.a.CONTROL_TYPE_DATE];if("object"===Qt()(t)&&a.includes(this.translator.getMapping(e,0).element.getTypeId())){var o=this.translator.getMapping(e,0,i);try{var s=t,l=o.element.getFirstParentContainer(),c=S.a.getRepeatableContainerParent(l),u=s.length||c.getChildren().length;c.setProperty("configuration.maxNumberOfGroupsAllowed",u),t=s.shift()[0],n=s.map((function(e){return e[0]}))}catch(d){}}this.setControlValueByIdOnRepeatedIndex(e,t,0,i);try{n&&function(){for(var t=r.translator.getMapping(e,0,i).element.getFirstParentContainer(),a=S.a.getRepeatableContainerParent(t),o=a.getChildren().length,s=0,l=n.length-o+1;s<l;s++)r.repeatablePromisesChain=r.repeatablePromisesChain.then((function(){return a.addNewGroup()})).then((function(e){return r.waitForGroupPaths(e)})).then((function(e){return r.cloneElementRules(e)}));r.repeatablePromisesChain.then((function(){setTimeout((function(){r.loader.getEngine().getDocument().rebuildHashMap()}),1),setTimeout((function(){for(var t=0,a=n.length;t<a;t++)r.setControlValueByIdOnRepeatedIndex(e,n[t],t+1,i)}),1)})).then((function(){r.loader.getEngine().trigger("repeatable-prefill-done")}))}()}catch(d){console.warn("Failed to populate repeatable data. Occurred error is displayed in console."),console.error(d)}}}},{key:"calculateRepeatablePathNumbers",value:function(e){var t={};return"object"===Qt()(e)&&null!==e[0]&&e.forEach((function(e){var n=e.split(".");"object"===Qt()(n)&&void 0!==n[0]&&("number"===typeof t[n[0]]&&t[n[0]]?t[n[0]]+=1:t[n[0]]=1)})),t}},{key:"setControlValueWithRepeatableSubmitData",value:function(e,t,n,i){for(var r=this,a=this.getJQuery().Deferred((function(e){e.resolve()})).promise(),o=this.calculateRepeatablePathNumbers(i),s=function(t,n){a=a.then((function(){for(var n=r.translator.getMapping(e,0,i[t]).element.getFirstParentContainer(),a=S.a.getRepeatableContainerParent(n),s=a.getProperty("configuration.maxNumberOfGroupsAllowed"),l=0,c=0,u=i.length;c<u;c++)(null!==i[t]&&i[t].replace(/(\.[\d]*)$/,"")===i[c].replace(/(\.[\d]*)$/,"")||null===i[t])&&l++;if(l>s)s=l;else if(null!==i[t]){var d=i[t].split(".");if("object"===Qt()(d)&&void 0!==d[0]&&"number"===typeof o[d[0]]&&void 0!==a.getChildren()&&o[d[0]]<=a.getChildren().length)return}else if(a.getChildren().length-1>=t&&null===i[t])return;return a.setProperty("configuration.maxNumberOfGroupsAllowed",s),a.addNewGroup()})).then((function(e){return r.waitForGroupPaths(e)}))},l=0,c=n.length;l<c;l++)s(l);a.then((function(){setTimeout((function(){r.loader.getEngine().getDocument().rebuildHashMap()}),1),setTimeout((function(){for(var t=0,a=n.length;t<a;t++)if(null!==i[t]){var o=parseInt(i[t].match("([\\d]*)$")[0]),s=i[t].replace(/(\.[\d]*)$/,"");r.setControlValueByIdOnRepeatedIndex(e,n[t],o-1,s)}else r.setControlValueByIdOnRepeatedIndex(e,n[t],t,i[t])}),1)}))}},{key:"shouldAddPathsToPrefillValue",value:function(e){return-1!==this.loader.getControlsThatHaveRepeatablePathsAddedToPrefillValue().indexOf(e.replace("control_",""))}},{key:"waitForGroupPaths",value:function(e){return this.getJQuery().Deferred((function(t){!function(e){var n=setInterval((function(){!function(e,t){if("undefined"===typeof t)clearInterval(n),e.resolve();else{t.updateRepeatableElementAttributes(),t.flatten().forEach((function(e){if(e.getTypeId()===b.a.CONTAINER_TYPE_REPEATABLE_GROUP){var t=e;1===t.getRepeatableGroupIndexAttribute()&&t.resetRepeatableElementAttributes()}})),(t.getRepeatableGroupPathAttribute()||"").length&&(clearInterval(n),e.resolve(t))}}(t,e)}),1)}(e)})).promise()}},{key:"cloneElementRules",value:function(e){var t=this;return this.getJQuery().Deferred((function(n){if("undefined"!==typeof e){for(var i=t.loader.getRules(),r=i.getRules(),a=[],o=0,s=r.length;o<s;o++){var l=r[o],c=l.controlId,u=String(e.getRepeatableGroupPathAttribute()),d=e.flatten();if("undefined"===typeof l.repeatablePath)for(var p=0,h=d.length;p<h;p++){var _=d[p].getId();if(null!==_&&i.areTheSameControlIDs(String(c),String(_))&&u.length){var g=JSON.parse(JSON.stringify(l)),m=g.actions,f=[];g.controlId="control_"+_+"_rp"+u,g.eventType=Xc.a.TEXT_INPUT,g.repeatablePath=u;for(var E=0,y=m.length;E<y;E++){var T=m[E];/^REMOTE/.test(T.jql)&&(T.jql=T.jql.replace(":control_"+_,":this")+" AND RepeatablePath="+u,f.push(T))}f.length&&(g.actions=f,a.push(g))}}}i.withRules(a)}n.resolve()})).promise()}},{key:"setControlValueByIdOnRepeatedIndex",value:function(e,t,n,i){var a=this.translator.getMapping(e,n,i),o=Qt()(t),s=t;if(null!==a){var l=a.element;if("string"===o&&t.length&&this.shouldAddPathsToPrefillValue(e))t=s=l.getFirstParentOfType(b.a.CONTAINER_TYPE_REPEATABLE_GROUP).getRepeatableGroupPathAttribute()+". "+t;if("string"===o)try{s=JSON.parse(t),o=Qt()(s)}catch(E){s=t}switch(a.element.getTypeId()){case b.a.CONTROL_TYPE_DROPDOWN:if("value.value"===a.targetPropertyFQN&&this.setDropdownValue(a.element,t)){l.trigger("change.rules");break}case b.a.CONTROL_TYPE_CHECKBOX:this.setCheckboxValue(a.element,t,a)?l.trigger("change.rules"):console.warn("Abstraction layer: Failed to set CheckBox value");break;case b.a.CONTROL_TYPE_RADIO:var c=this.castValueToNativeFormat(s,a);this.setRadioValue(a.element,c,a)?l.trigger("change.rules"):console.warn("Abstraction layer: Failed to set Radio value");break;case b.a.CONTROL_TYPE_TEXT:case b.a.CONTROL_TYPE_TEXTAREA:case b.a.CONTROL_TYPE_EMAIL:case b.a.CONTROL_TYPE_WEBSITE:this.setTextBasedControlValue(a.element,t,a)||console.warn("Abstraction layer: Failed to set text control value!"),""===this.castValueToNativeFormat(s,a)&&a.element.setProperty(a.targetPropertyFQN,null),l.trigger("change.rules");break;case b.a.CONTROL_TYPE_PHONE:var u=a.element;u.hasError(r.a.BACKEND_ERR_INVALID_VALUE)&&u.removeError(r.a.BACKEND_ERR_INVALID_VALUE);var d=this.castValueToNativeFormat(s,a),p=a.element,h=""===d||null===d?null:p.getFormattedPhoneNumberAccordingToValidationType(d).replace(/\s+/g,"-");a.element.setProperty(a.targetPropertyFQN,h),l.trigger("change.rules");break;case b.a.CONTROL_TYPE_DATE:var _=this.castValueToNativeFormat(s,a),g=a.element;if(_){var m=g.formatDateString(_);a.element.setProperty(a.targetPropertyFQN,m),l.trigger("change.rules")}break;default:var f=this.castValueToNativeFormat(s,a);a.element.setProperty(a.targetPropertyFQN,f),l.trigger("change.rules")}try{a.element.synchronizeValue()}catch(E){}}}},{key:"setRadioValue",value:function(e,t,n){if(Array.isArray(t)){for(var i=0,r=t.length;i<r;i++)if(!Array.isArray(t[i])||1!==t[i].length||"string"!==typeof t[i][0]&&"boolean"!==typeof t[i][0])return!1;for(var a=0,o=t.length;a<o;a++)if(!this.setRadioValue(e,t[a][0],n))return!1;return!0}if("boolean"!==typeof t&&"string"!==typeof t)return!1;var s=n.inputIndex,l=e.getValue(),c=e.getProperty("choices.values"),u={value:l.value,index:l.index};if("boolean"===typeof t){for(var d=0,p=c.length;d<p;d++)if(d===s)return t&&(u.value=c[d].text,u.index=d),u.value===l.value&&u.index===l.index||e.setValue(u),!0;return!1}if("string"===typeof t){!1;for(var h=0,_=c.length;h<_;h++)if(""===t&&e.clearValue(),c[h].text.trim()==t)return u.index=h,u.value=c[h].text,(u.value!==l.value||u.index!==l.index)&&e.setValue(u),!0;return!!e.getProperty("choices.allowOther")&&(u.value=t||null,u.index=null,(u.value!==l.value||u.index!==l.index)&&e.setValue(u),!0)}return!1}},{key:"setCheckboxValue",value:function(e,t,n){if(Array.isArray(t)){var i=[];e.setValue({values:[]});for(var r=0,a=t.length;r<a;r++)if(Array.isArray(t[r][0]))for(var o=t[r][0],s=0,l=o.length;s<l;s++){if(""===o[s])return!1;i.push(o[s])}else{if(!Array.isArray(t[r])||1!==t[r].length||"string"!==typeof t[r][0]&&"boolean"!==typeof t[r][0])return!1;i.push(t[r][0])}var c=e.getProperty("choices.values")||[],u={element:e,targetPropertyFQN:n.targetPropertyFQN,optional:n.optional,type:n.type,inputIndex:n.inputIndex},d=!1;try{d=i&&i[0]&&"boolean"===typeof JSON.parse(i[0])}catch(O){}if(1===c.length&&1===i.length&&d){if(u.inputIndex=0,!this.setCheckboxValue(e,JSON.parse(i[0]),u))return!1}else for(var p=0,h=c.length;p<h;p++){if(i.indexOf(c[p].text)>-1&&(u.inputIndex=p,!this.setCheckboxValue(e,c[p].text,u)))return!1}return!0}if("boolean"!==typeof t&&"string"!==typeof t)return!1;var _,g,m=n.inputIndex,f=JSON.parse(JSON.stringify(e.getValue().values)),E=e.getProperty("choices.values");if(null===E)return!1;var y=!1;if("string"===typeof t&&(y="0"===t&&E.length>1,t=this.castValueToNativeFormat(t,n)),"boolean"===typeof t)return void 0!==(_=E[m].text)&&(t||y?(-1===f.indexOf(_)&&(f.push(_),e.setValue({values:f})),!0):(-1!==(m=f.indexOf(_))&&(f.splice(m,1),e.setValue({values:f})),!0));if("string"===typeof t){if("no"!==t){g=[];for(var T=0,v=E.length;T<v;T++)!E[T].isOther&&f.indexOf(E[T].text)>-1&&g.push(E[T].text);"no"!==t&&g.push(t),e.setValue({values:g})}return!0}return!1}},{key:"setDropdownValue",value:function(e,t){if("string"===typeof t||"number"===typeof t||null===t)return e.setValue({value:null===t?null:String(t)}),!0;var i=n.castToStringArray(t);if(null!==i){for(var r=[],a=0,o=i.length;a<o;a++)r.push({text:i[a],isDefault:0===a});return e.setProperty("choices.values",r),e.updateChoices(),e.withForceSelectedIndex(-2),r.length?(e.setProperty("value.index",0),e.setProperty("value.value",r[0].text)):(e.setProperty("value.index",null),e.setProperty("value.value",null)),!0}var s=n.castToString2Array(t);if(null!==s){for(var l=[],c=0,u=s.length;c<u;c++)l.push({value:s[c][0],text:s[c][1],isDefault:0===c});return e.setProperty("choices.values",l),e.updateChoices(),e.withForceSelectedIndex(-2),l.length?(e.setProperty("value.index",0),e.setProperty("value.value",l[0].value)):(e.setProperty("value.index",null),e.setProperty("value.value",null)),!0}return!1}},{key:"castValueToNativeFormat",value:function(e,t){if((null===e||""===e)&&t.optional)return null;switch(t.type){case"int":return!0!==e&&!1!==e||(e=~~e),Math.floor(parseInt(String(e||"0"))||0);case"float":case"number":return!0!==e&&!1!==e||(e=~~e),parseFloat(String(e||"0"))||0;case"sint":return String(Math.floor(parseInt(String(e||"0"))||0));case"sfloat":return String(parseFloat(String(e||"0"))||0);case"bool":case"boolean":switch(e){case!0:case 1:case"yes":case"y":case"on":case"1":case"true":return!0;case!1:case 0:case"no":case"n":case"off":case"":case"0":case"false":return!1;default:return!!e}case"string":return!0!==e&&!1!==e||(e=~~e),String(e)||"";default:return e}}},{key:"isControlChecked",value:function(e){var t=String(e||""),n=/^(control[-_]{0,1})?([\d]+)[-_]([\d]+)$/.exec(t);if(!n)return!1;var i=parseInt(n[2]),r=parseInt(n[3]);if(!i)return!1;var a=this.translator.getDocument().getElementById(i);if(!a)return!1;switch(a.getTypeId()){case b.a.CONTROL_TYPE_RADIO:case b.a.CONTROL_TYPE_LIKERT_SCALE:return this.isRadioControlOptionChecked(a,r);case b.a.CONTROL_TYPE_CHECKBOX:case b.a.CONTROL_TYPE_TERMS_OF_SERVICE:return this.isCheckboxControlOptionChecked(a,r);default:return!1}}},{key:"isRadioControlOptionChecked",value:function(e,t){var n;if(n=this.controlsCache[e.getHash()+"_"+t])return n.checked;if(!(n=e.getRootNode().querySelector('input[type=radio][data-index="'+t+'"]'))){var i=e.getProperty("choices.values");if(Array.isArray(i)&&t===i.length)e.getProperty("choices.allowOther")&&(n=e.getRootNode().querySelector('input[type=radio][data-index="-1"]'))}return this.controlsCache[e.getHash()+"_"+t]=n,!!n&&n.checked}},{key:"isCheckboxControlOptionChecked",value:function(e,t){var n;return(n=this.controlsCache[e.getHash()+"_"+t])?n.checked:(n=e.getRootNode().querySelector('input[type=checkbox][data-index="'+t+'"]'),this.controlsCache[e.getHash()+"_"+t]=n,!!n&&n.checked)}},{key:"getControlById",value:function(e){throw new Error("Method not implemented.")}},{key:"controlExistsInForm",value:function(e){return"language"===e||("quiz_score"===e||null!==this.translator.getMapping(e))}},{key:"getControlUpdateValueStrategy",value:function(e){return it.c.BY_USING_PROPRIETARY_DOM_ABSTRACTION_LAYER_METHOD}},{key:"initializeControlValueWhenTheFormIsPrefillingASubmission",value:function(e,t){this.setControlValueById(e,t)}},{key:"getControls",value:function(){throw new Error("Method not implemented.")}},{key:"reinitializeControlThirdPartyPluginsAfterItsValueHasBeenUpdated",value:function(e){throw new Error("Method not implemented.")}},{key:"getJQuery",value:function(){return this.loader.getJQuery()}},{key:"init",value:function(){var e;(e=this).on("initialize",(function(){var t=[];Zc.a.getInstance().getLogger().log("Abstraction Layer V2: triggering startup control events");for(var n=0,i=e.loader.getRules().getRules(),r=i.length;n<r;n++)i[n].isRule||i[n].eventType===Xc.a.INIT||i[n].eventType===Xc.a.ALL_EVENTS?-1===t.indexOf(i[n].controlId)&&(e.trigger("control-event",Xc.a.INIT,null,i[n].controlId,e.getControlValueById(i[n].controlId)),t.push(i[n].controlId)):e.loader.getLoaderType()!==O.B.VIEW||e.loader.getViewFormContext()!==O.vb.SAVE_FOR_LATER&&e.loader.getViewFormContext()!==O.vb.EDIT_SUBMISSION&&e.loader.getViewFormContext()!==O.vb.APPROVAL||i[n].eventType===Xc.a.REINITIALIZE&&(e.trigger("control-event",Xc.a.REINITIALIZE,null,i[n].controlId,e.getControlValueById(i[n].controlId)),t.push(i[n].controlId))})),e.on("compute-form-rules",(function(t){for(var n=!1,i=0,r=e.loader.getRules().getRules(),a=r.length;i<a;i++)r[i].isRule&&(n||(n=!0),e.trigger("control-event",r[i].eventType,e.getControlValueById(r[i].controlId),r[i].controlId));n?e.loader.getRules().getDatabase().on("idle",(function n(){t&&t(),e.loader.getRules().getDatabase().off("idle",n)})):t&&t()})),e.on("compute-single-control-rule",(function(t){for(var n=t.target,i=0,r=e.loader.getRules().getRules().filter((function(e){var t=e.actions[0].jql,i=new RegExp("WHERE name IN\\( 'control_"+n+"'\\)","g"),r=new RegExp("calculated = 1","g");if(t.match(i)&&t.match(r))return e})),a=r.length;i<a;i++)r[i].isRule&&e.trigger("control-event",r[i].eventType,e.getControlValueById(r[i].controlId),r[i].controlId)}))}},{key:"getCurrentLanguage",value:function(){return this.loader.getI18n().getLanguageCode()}},{key:"getBindingProvider",value:function(){return e=this,{canBind:function(e){return e&&/^control_([\d]+)(_[\d]+)?$/.test(e)},getBindedValue:function(t){return e.getControlValueById(t)}};var e}},{key:"setTextBasedControlValue",value:function(e,t,n){if(!e.hasProperty("options.suggestions")||!Array.isArray(t)||Array.isArray(t)&&1===t.length){var i=this.castValueToNativeFormat(t,n);return n.element.setProperty(n.targetPropertyFQN,i),e.hasSuggestions&&e.setProperty("options.suggestions",null),!0}if(n.element.setProperty(n.targetPropertyFQN,null),e.hasSuggestions){for(var r=[],a="",o=0,s=t.length;o<s;o++)(a=Array.isArray(t[o])?t[o].join(", "):String(0===t[o]?"0":t[o]?t[o]:""))&&r.push(a);e.setProperty("options.suggestions",r.join("\n"))}}}],[{key:"castToStringArray",value:function(e){if(!P()(e,Array))return null;for(var t=[],n=0,i=e.length;n<i;n++)switch(!0){case null===e[n]:t.push("");break;case"number"===typeof e[n]:t.push(isFinite(e[n])?String(e[n]):"0");break;case"string"===typeof e[n]:t.push(e[n]);break;default:return null}return t}},{key:"castToString2Array",value:function(e){var t,n;if(!P()(e,Array))return null;t=[];for(var i=0,r=e.length;i<r;i++){if(!P()(e[i],Array))return null;if(e[i].length<1)return null;n=[];for(var a=0;a<2;a++)switch(!0){case void 0===e[i][a]:if(1!==a)return null;n.push(e[i][0]);break;case null===e[i][a]:n.push("");break;case"number"===typeof e[i][a]:n.push(isFinite(e[i][a])?String(e[i][a]):"0");break;case"string"===typeof e[i][a]:n.push(e[i][a]);break;default:return null}t.push(n)}return t}}]),n}(ir.a),Qc=function(){function e(t){o()(this,e),v()(this,"engine",void 0),this.engine=t}return l()(e,[{key:"canBind",value:function(e){return"fixed_amount"===e}},{key:"getBindedValue",value:function(e){var t=this.engine.getDocument().getConfiguration().getProperty("fixedAmount");return"fixed_amount"===e&&null!==t?t:0}}]),e}(),$c=function(){function e(t){o()(this,e),v()(this,"domAbstractionLayer",void 0),this.domAbstractionLayer=t}return l()(e,[{key:"IS_CONTROL_CHECKED",value:function(e){return this.domAbstractionLayer.isControlChecked(e)}},{key:"IS_NOT_CONTROL_CHECKED",value:function(e){return!this.domAbstractionLayer.isControlChecked(e)}}]),e}(),eu=function(){function e(t){o()(this,e),v()(this,"engine",void 0),this.engine=t}return l()(e,[{key:"canBind",value:function(e){return"language"===e}},{key:"getBindedValue",value:function(e){var t=this.engine.getLoader().getI18n().getLanguageCode();return"en"===t&&(t="gb"),t}}]),e}(),tu=function(){function e(t,n){o()(this,e),v()(this,"engine",void 0),v()(this,"quizScoreService",void 0),this.engine=t,this.quizScoreService=n}return l()(e,[{key:"canBind",value:function(e){return"quiz_score"===e}},{key:"getBindedValue",value:function(e){return this.quizScoreService.getCurrentQuizScore()}}]),e}(),nu=function(){function e(){o()(this,e),v()(this,"parsedQueryString",{});var t=Object(ft.o)(window.location.toString());this.parsedQueryString=Object(ft.p)((t.search||"?").substr(1))}return l()(e,[{key:"canBind",value:function(e){return e&&/^request_/.test(e)}},{key:"getBindedValue",value:function(e){if(!this.parsedQueryString)return"";var t=/^request_(.*)$/.exec(e);return void 0===this.parsedQueryString[t[1]]?"":this.parsedQueryString[t[1]]}}]),e}(),iu=function(){function e(t,n,i){o()(this,e),v()(this,"abstractionLayer",void 0),v()(this,"database",void 0),v()(this,"document",void 0),v()(this,"controlsFlattenCache",void 0),v()(this,"calculationSQLByTargetControl",{}),this.abstractionLayer=t,this.database=n,this.document=i}return l()(e,[{key:"getControlEventTypeWhenUserChangesControl",value:function(e,t){if(null===e)return t;var n;if(n=/^control_([\d]+)/.exec(e)){var i=parseInt(n[1]),r=this.document.getElementById(i);if(r)switch(r.getTypeId()){case b.a.CONTROL_TYPE_DROPDOWN:case b.a.CONTROL_TYPE_FILE:return Xc.a.CHANGE}}return t}},{key:"indexRuleTarget",value:function(e,t){if(e&&e.action&&e.action.target&&Array.isArray(e.action.target))for(var n=0,i=e.action.target.length;n<i;n++){var r=String(e.action.target[n]||"");r&&(this.calculationSQLByTargetControl[r]=this.calculationSQLByTargetControl[r]||[],this.calculationSQLByTargetControl[r].push(t))}}},{key:"buildAction",value:function(e){var t,n=this,i=[],r=[],a=this;switch(e.action.type){case O.eb.HIDE_CONTROL:t="UPDATE controls SET visible = IF("+e.expression+" , false, true) WHERE name IN( 'control_"+e.action.target.join("','control_")+"') LIMIT "+e.action.target.length;break;case O.eb.SHOW_CONTROL:t="UPDATE controls SET visible = IF("+e.expression+" , true, false) WHERE name IN( 'control_"+e.action.target.join("','control_")+"') LIMIT "+e.action.target.length;break;case O.eb.CALCULATE:t="UPDATE controls SET readOnly = true, calculated = 1, value = IF( visible, STRING("+e.expression+"), STRING(0)) WHERE name IN( 'control_"+e.action.target.join("','control_")+"') LIMIT "+e.action.target.length,this.indexRuleTarget(e,t)}try{this.database.createStatement(t)}catch(p){return console.warn("Failed to create JQL rule statement: "+t),console.error(p),null}e.expression.replace(/IS_(NOT_)?CONTROL_CHECKED\('(control_[\d]+_[\d]+)'\)/g,(function(e){return r.push({controlId:arguments.length<=2?void 0:arguments[2],eventType:Xc.a.CHECK}),r.push({controlId:arguments.length<=2?void 0:arguments[2],eventType:Xc.a.UNCHECK}),""})).replace(/:(control[-_]{0,1})?([\d]+)([-_]([\d]+))?/g,(function(e){var t=e.slice(1);return r.push({controlId:t,eventType:a.getControlEventTypeWhenUserChangesControl(t,a.getControlEventTypeForRules(t))}),""})).replace(/:language[^a-z0-9_]/g,(function(e){return r.push({controlId:"language",eventType:Xc.a.ALL_EVENTS}),""})).replace(/:quiz_score/g,(function(e){return r.push({controlId:"quiz_score",eventType:Xc.a.ALL_EVENTS}),n.document.getEngine().getLoader().getQuizScoreService().setEnabled(!0),""}));var o,s=null;O.eb.CALCULATE===e.action.type&&(s=!0,e.expression.replace(/control[-_]{0,1}([\d]+)([-_]([\d]+))?/g,(function(e){return r.push({controlId:e,eventType:a.getControlEventTypeWhenUserChangesControl(e,Xc.a.TEXT_INPUT)}),s=!1,""})));for(var l=0,c=r.length;l<c;l++){o=!0;for(var u=0,d=i.length;u<d;u++)if(i[u].eventType===r[l].eventType&&i[u].controlId===r[l].controlId){o=!1;break}o&&i.push({controlId:r[l].controlId,eventType:r[l].eventType,actions:[{controlId:r[l].controlId,jql:t}],isRule:!0})}return!0===s&&0===i.length&&e.action.target&&1===e.action.target.length&&i.push({controlId:"control_"+e.action.target[0],actions:[{controlId:"control_"+e.action.target[0],jql:t}],eventType:Xc.a.ALL_EVENTS,isRule:!0}),i}},{key:"getControlEventTypeForRules",value:function(e){"undefined"===typeof this.controlsFlattenCache&&(this.controlsFlattenCache=this.document.flatten());var t=null,n=null;if("number"===typeof e)t=e;else if("string"===typeof e){var i=/^(control[\-_])?([\d]+)([\-_]([\d]+))?$/.exec(e);if(!i)return Xc.a.TEXT_INPUT;t=parseInt(i[2],10),i[4]&&(n=parseInt(i[4],10))}if(null===t)return Xc.a.TEXT_INPUT;for(var r=0,a=this.controlsFlattenCache.length;r<a;r++){if(this.controlsFlattenCache[r].getId()===t)switch(this.controlsFlattenCache[r].getTypeId()){case b.a.CONTROL_TYPE_ADDRESS:if(k.INDEX_COUNTRY===n)return Xc.a.CHANGE;default:return Xc.a.TEXT_INPUT}}return Xc.a.TEXT_INPUT}},{key:"getCalculationSQLStatements",value:function(e){return this.calculationSQLByTargetControl[e]||null}}]),e}(),ru=n(142),au=function(){function e(t,n){var i;o()(this,e),v()(this,"translator",void 0),v()(this,"calculationsThrottler",void 0),v()(this,"table",void 0),v()(this,"domAbstractionLayer",void 0),v()(this,"calculatedControlsWhichNeedToTriggerRulesAgain",[]),v()(this,"triggerRulesForCalculatedControlsThrottle",void 0),this.translator=t,this.domAbstractionLayer=n,(i=this).calculationsThrottler=ie.a.create((function(){i.translator.getDocument().realTimeCalculationsThrottler()}),1),i.triggerRulesForCalculatedControlsThrottle=ie.a.create((function(){i.triggerRulesAgainForCalculatedControls()}),100),this.initializeTableColumns(),this.initializeControls()}return l()(e,[{key:"createSubPropertyInputRow",value:function(e,t,n,i,r){var a=this,o=this.table.createRow().withPropertyGetter("index",(function(){return t})).withPropertyGetter("name",(function(){return e})).withPropertyGetter("readOnly",(function(){return i.isReadOnly(n)})).withPropertySetter("readOnly",(function(e){i.setReadOnly(n,e)})).withPropertyGetter("disabled",(function(){return i.isDisabled(n)})).withPropertySetter("disabled",(function(e){i.setDisabled(n,e)})).withPropertyGetter("value",(function(){return r.getControlValueById(e)})).withPropertySetter("value",(function(t){r.setControlValueById(e,t)})).withPropertyGetter("visible",(function(){return i.isVisible()})).withPropertySetter("visible",(function(e){i.setVisible(e)})).withPropertyGetter("calculated",(function(){return!1})).withPropertySetter("calculated",(function(e){e&&(a.calculatedControlsWhichNeedToTriggerRulesAgain.push(i.getId()),a.triggerRulesForCalculatedControlsThrottle(),a.calculationsThrottler())}));i.getTypeId()!==b.a.CONTROL_TYPE_RADIO&&i.getTypeId()!==b.a.CONTROL_TYPE_CHECKBOX||o.withPropertyGetter("checked",(function(){return r.isControlChecked(e)})).withPropertySetter("checked",(function(t){console.warn("Failed to set checked state of the control "+e)}))}},{key:"appendMainControlRow",value:function(e,t,n,i){var r=this;this.table.createRow().withPropertyGetter("index",(function(){return t})).withPropertyGetter("name",(function(){return e})).withPropertyGetter("readOnly",(function(){return n.isReadOnly(null)})).withPropertySetter("readOnly",(function(e){n.setReadOnly(null,e)})).withPropertyGetter("disabled",(function(){return n.isDisabled(null)})).withPropertySetter("disabled",(function(e){n.setDisabled(null,e)})).withPropertyGetter("value",(function(){return i.getControlValueById(e)})).withPropertySetter("value",(function(t){i.setControlValueById(e,t)})).withPropertyGetter("visible",(function(){return n.isVisible(!0)})).withPropertySetter("visible",(function(e){n.setVisible(e)})).withPropertyGetter("label",(function(){return n.hasProperty("label.labelText")?n.getProperty("label.labelText"):null})).withPropertySetter("label",(function(e){n.hasProperty("label.labelText")&&n.setProperty("label.labelText",String(e)||null)})).withPropertyGetter("calculated",(function(){return!1})).withPropertySetter("calculated",(function(e){e&&(r.calculationsThrottler(),n.getTypeId()===b.a.CONTROL_TYPE_FORMULA&&n.onValueCalculatedThrottler(),r.calculatedControlsWhichNeedToTriggerRulesAgain.push(n.getId()),r.triggerRulesForCalculatedControlsThrottle())}))}},{key:"appendRowForElementWithoutValue",value:function(e,t){this.table.createRow().withPropertyGetter("index",(function(){return t})).withPropertyGetter("name",(function(){return"control_"+e.getId()})).withPropertyGetter("readOnly",(function(){return!1})).withPropertyGetter("disabled",(function(){return!1})).withPropertyGetter("value",(function(){return null})).withPropertyGetter("visible",(function(){return e.isVisible()})).withPropertySetter("visible",(function(t){e.setVisible(t)})).withPropertyGetter("label",(function(){return null})).withPropertyGetter("calculated",(function(){return!1}))}},{key:"appendRowForRepeatableContainer",value:function(e,t,n){this.table.createRow().withPropertyGetter("index",(function(){return t})).withPropertyGetter("name",(function(){return"control_repeatable-".concat(n)})).withPropertyGetter("readOnly",(function(){return!1})).withPropertyGetter("disabled",(function(){return!1})).withPropertyGetter("value",(function(){return null})).withPropertyGetter("visible",(function(){return e.isVisible()})).withPropertySetter("visible",(function(t){e.setVisible(t)})).withPropertyGetter("label",(function(){return null})).withPropertyGetter("calculated",(function(){return!1}))}},{key:"initializeControls",value:function(){for(var e=this.domAbstractionLayer,t=0,n=0,i=0,r=this.translator.getDocument().flatten(),a=r.length;i<a;i++)if(O.p.CONTROL===r[i].getElementKind()){if(r[i].getTypeId()===b.a.CONTROL_TYPE_IMAGE||r[i].getTypeId()===b.a.CONTROL_TYPE_SOCIAL){this.appendRowForElementWithoutValue(r[i],t),t++;continue}if(r[i].getTypeId()===b.a.CONTROL_TYPE_HTML_BLOCK){this.appendHTMLElementRow(r[i],t),t++;continue}var o=0,s=r[i].getId(),l=r[i].enumerateIndexes();if(null!==s)if(null===l)for(;null!==r[i].getPropertyDescriptorByInputIndex(o);)this.createSubPropertyInputRow("control_"+s+"_"+o,t,o,r[i],e),0===o&&(t++,this.appendMainControlRow("control_"+s,t,r[i],e)),t++,o++;else{l.sort((function(e,t){return e-t}));for(var c=0,u=l.length;c<u;c++)o=l[c],this.createSubPropertyInputRow("control_"+s+"_"+o,t,o,r[i],e),t++;this.appendMainControlRow("control_"+s,t,r[i],e)}}else if(O.p.CONTAINER===r[i].getElementKind()&&r[i].getTypeId()===b.a.CONTAINER_TYPE_REPEATABLE){n++,this.appendRowForRepeatableContainer(r[i],t,n),t++;continue}this.addVirtualLanguageRow(),this.addActionBarButtonRows()}},{key:"addVirtualLanguageRow",value:function(){var e=this.translator.getDocument().getEngine().getLoader().getI18n(),t=this.translator.getDocument().getId(),n=this.translator.getDocument().getEngine().getLoader().getApiRootAddress();this.table.createRow().withPropertyGetter("visible",(function(){return!1})).withPropertyGetter("disabled",(function(){return!1})).withPropertyGetter("readOnly",(function(){return!1})).withPropertyGetter("index",(function(){return null})).withPropertyGetter("name",(function(){return"language"})).withPropertyGetter("value",(function(){return e.getLanguageCode()})).withPropertySetter("value",(function(i){"string"===typeof i&&2==i.length&&e.clear().get(n+"/v2/language/"+i+"/"+t)})).withPropertyGetter("html",(function(){return null}))}},{key:"addActionBarButtonRows",value:function(){for(var e=this.translator.getDocument(),t=e.getNumberOfPages(),n=0;n<t;n++)n+1<t&&function(t,n){n.table.createRow().withPropertyGetter("name",(function(){return"control_button_next_page_"+t})).withPropertyGetter("visible",(function(){return e.getPageByIndex(t).getActionBarButtonVisibility(O.a.NEXT_PAGE)})).withPropertySetter("visible",(function(n){e.getPageByIndex(t).setActionBarButtonVisibility(O.a.NEXT_PAGE,!!n)})).withPropertyGetter("disabled",(function(){return!1})).withPropertyGetter("readOnly",(function(){return!1})).withPropertyGetter("index",(function(){return null})).withPropertyGetter("value",(function(){return null})).withPropertyGetter("html",(function(){return null}))}(n,this),n>0&&function(t,n){n.table.createRow().withPropertyGetter("name",(function(){return"control_button_previous_page_"+t})).withPropertyGetter("visible",(function(){return e.getPageByIndex(t).getActionBarButtonVisibility(O.a.PREVIOUS_PAGE)})).withPropertySetter("visible",(function(n){e.getPageByIndex(t).setActionBarButtonVisibility(O.a.PREVIOUS_PAGE,!!n)})).withPropertyGetter("disabled",(function(){return!1})).withPropertyGetter("readOnly",(function(){return!1})).withPropertyGetter("index",(function(){return null})).withPropertyGetter("value",(function(){return null})).withPropertyGetter("html",(function(){return null}))}(n,this),n===t-1&&(function(t,n){n.table.createRow().withPropertyGetter("name",(function(){return"control_button_submit"})).withPropertyGetter("visible",(function(){return e.getPageByIndex(t).getActionBarButtonVisibility(O.a.SUBMIT)})).withPropertySetter("visible",(function(n){e.getPageByIndex(t).setActionBarButtonVisibility(O.a.SUBMIT,!!n)})).withPropertyGetter("disabled",(function(){return!1})).withPropertyGetter("readOnly",(function(){return!1})).withPropertyGetter("index",(function(){return null})).withPropertyGetter("value",(function(){return null})).withPropertyGetter("html",(function(){return null}))}(n,this),function(t,n){n.table.createRow().withPropertyGetter("name",(function(){return"control_button_reset"})).withPropertyGetter("visible",(function(){return e.getPageByIndex(t).getActionBarButtonVisibility(O.a.RESET)})).withPropertySetter("visible",(function(n){e.getPageByIndex(t).setActionBarButtonVisibility(O.a.RESET,!!n)})).withPropertyGetter("disabled",(function(){return!1})).withPropertyGetter("readOnly",(function(){return!1})).withPropertyGetter("index",(function(){return null})).withPropertyGetter("value",(function(){return null})).withPropertyGetter("html",(function(){return null}))}(n,this))}},{key:"getTable",value:function(){return this.table}},{key:"initializeTableColumns",value:function(){this.table=ru.a.createVirtualTable([{default:0,type:Xc.d.NUMBER,name:"index"},{default:"",type:Xc.d.STRING,name:"name"},{default:"",type:Xc.d.STRING,name:"label"},{default:!0,type:Xc.d.BOOLEAN,name:"visible"},{default:!1,type:Xc.d.BOOLEAN,name:"readOnly"},{default:!1,type:Xc.d.BOOLEAN,name:"disabled"},{default:null,type:Xc.d.NULL,name:"value"},{default:!1,type:Xc.d.BOOLEAN,name:"checked"},{default:!1,type:Xc.d.BOOLEAN,name:"calculated"},{default:"",type:Xc.d.STRING,name:"html"}])}},{key:"triggerRulesAgainForCalculatedControls",value:function(){if(this.calculatedControlsWhichNeedToTriggerRulesAgain&&this.calculatedControlsWhichNeedToTriggerRulesAgain.length){for(var e=[],t=0,n=this.calculatedControlsWhichNeedToTriggerRulesAgain.length;t<n;t++)-1===e.indexOf(this.calculatedControlsWhichNeedToTriggerRulesAgain[t])&&e.push(this.calculatedControlsWhichNeedToTriggerRulesAgain[t]);this.calculatedControlsWhichNeedToTriggerRulesAgain=[];for(var i=this.translator.getDocument().getControlsList(),r=0,a=i.length;r<a;r++)e.indexOf(i[r].getId())>-1&&this.triggerControlChangeForControl(i[r])}}},{key:"triggerControlChangeForControl",value:function(e){switch(e.getTypeId()){case b.a.CONTROL_TYPE_CHECKBOX:case b.a.CONTROL_TYPE_RADIO:this.domAbstractionLayer.trigger("control-event",Xc.a.CHECK,null,"control_"+e.getId(),null);break;case b.a.CONTROL_TYPE_DROPDOWN:this.domAbstractionLayer.trigger("control-event",Xc.a.CHANGE,null,"control_"+e.getId(),null);break;default:this.domAbstractionLayer.trigger("control-event",Xc.a.TEXT_INPUT,null,"control_"+e.getId(),null)}}},{key:"appendHTMLElementRow",value:function(e,t){this.table.createRow().withPropertyGetter("index",(function(){return t})).withPropertyGetter("name",(function(){return"control_"+e.getId()})).withPropertyGetter("readOnly",(function(){return!1})).withPropertyGetter("disabled",(function(){return!1})).withPropertyGetter("value",(function(){return null})).withPropertyGetter("visible",(function(){return e.isVisible()})).withPropertySetter("visible",(function(t){e.setVisible(t)})).withPropertyGetter("label",(function(){return null})).withPropertyGetter("calculated",(function(){return!1})).withPropertyGetter("html",(function(){return e.getProperty("configuration.innerHTML")})).withPropertySetter("html",(function(t){e.setProperty("configuration.innerHTML",String(t))}))}}],[{key:"create",value:function(t,n){return new e(t,n).getTable()}}]),e}();function ou(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var su=function(e){u()(n,e);var t=ou(n);function n(e){var i;return o()(this,n),i=t.call(this),v()(A()(i),"worker",void 0),v()(A()(i),"currentMessageId",0),n.instance=A()(i),i.worker=new Worker(e||"jqlworker.js"),i.addWorkerMessageListener(),i}return l()(n,[{key:"addWorkerMessageListener",value:function(){var e=this;this.worker.addEventListener("message",(function(t){e.trigger(t.data.type,t)}))}}],[{key:"getInstance",value:function(){return n.instance||new n,n.instance}}]),l()(n,[{key:"postMessage",value:function(e,t,n,i,r){this.worker.postMessage({type:e,action:t,instanceId:n,messageId:i,data:r})}},{key:"getUniqueMessageId",value:function(){return++this.currentMessageId}}]),n}(ir.a);function lu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(su,"instance",void 0);var cu=function(e){u()(n,e);var t=lu(n);function n(e){var i;return o()(this,n),i=t.call(this),v()(A()(i),"workerConnector",void 0),v()(A()(i),"promiseResolves",{}),v()(A()(i),"promiseRejects",{}),v()(A()(i),"instanceId",void 0),v()(A()(i),"resolve",(function(e,t){i.promiseResolves[e]&&(i.promiseResolves[e](t),i.promiseResolves[e]=null,i.promiseRejects[e]=null)})),v()(A()(i),"reject",(function(e,t){i.promiseRejects[e]&&(i.promiseRejects[e](t),i.promiseResolves[e]=null,i.promiseRejects[e]=null)})),i.workerConnector=su.getInstance(),i.instanceId=e|n.getUniqueId(),i.workerConnector.on(i.getType(),i.handleWorkerMessage.bind(A()(i))),i}return l()(n,[{key:"handleWorkerMessage",value:function(e){}},{key:"getType",value:function(){return""}}]),l()(n,[{key:"getInstanceId",value:function(){return this.instanceId}},{key:"isMessageForThisInstance",value:function(e){return e.data.targetInstanceId===this.getInstanceId()}},{key:"getMessageIdAndSavePromise",value:function(e,t){var n=this.workerConnector.getUniqueMessageId();return this.promiseResolves[n]=e,this.promiseRejects[n]=t,n}},{key:"postRequest",value:function(e,t){var n=this;return new Promise((function(i,r){var a=n.getMessageIdAndSavePromise(i,r);n.workerConnector.postMessage(n.getType(),e,n.getInstanceId(),a,t)}))}},{key:"postResponse",value:function(e,t){this.workerConnector.postMessage(this.getType(),e,this.getInstanceId(),null,t)}}],[{key:"getUniqueId",value:function(){return++n.instanceIdCounter}}]),n}(ir.a);function uu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(cu,"instanceIdCounter",0);var du=function(e){u()(n,e);var t=uu(n);function n(e){var i;return o()(this,n),i=t.call(this,e),v()(A()(i),"propertyGetters",{}),v()(A()(i),"propertyGetterCurrentId",0),v()(A()(i),"propertySetters",{}),v()(A()(i),"propertySetterCurrentId",0),n.instances[i.getInstanceId()]=A()(i),i}return l()(n,[{key:"handleWorkerMessage",value:function(e){this.isMessageForThisInstance(e)&&this.resolve(e.data.messageId,e.data)}},{key:"getType",value:function(){return n.TYPE}}]),l()(n,[{key:"withPropertyGetter",value:function(e,t){var n=this.getPropertyGetterId();return this.propertyGetters[n]=t,this.postRequest(JQLWorkerMessageTypes.WITH_PROPERTY_GETTER,{propertyName:e,propertyGetterId:n})}},{key:"withPropertySetter",value:function(e,t){var n=this.getPropertySetterId();return this.propertySetters[n]=t,this.postRequest(JQLWorkerMessageTypes.WITH_PROPERTY_SETTER,{propertyName:e,propertySetterId:n})}},{key:"getPropertyGetterId",value:function(){return++this.propertyGetterCurrentId}},{key:"getPropertySetterId",value:function(){return++this.propertySetterCurrentId}}],[{key:"getVirtualRow",value:function(e){return n.instances.hasOwnProperty(e)?n.instances[e]:new n(e)}}]),n}(cu);function pu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(du,"TYPE","virtualrow"),v()(du,"instances",{});var hu=function(e){u()(n,e);var t=pu(n);function n(e,i){var r;return o()(this,n),r=t.call(this,i),v()(A()(r),"name",void 0),r.name=e,n.instances[r.getInstanceId()]=A()(r),r}return l()(n,[{key:"handleWorkerMessage",value:function(e){this.isMessageForThisInstance(e)&&this.resolve(e.data.messageId,e.data)}},{key:"getName",value:function(){return this.name}},{key:"setName",value:function(e){this.name=e,n.instances[e]=this}},{key:"getType",value:function(){return n.TYPE}}]),l()(n,[{key:"alterIndexes",value:function(e){return this.postRequest(JQLWorkerMessageTypes.ALTER_INDEXES,{newIndexes:e})}},{key:"describe",value:function(){return this.postRequest(JQLWorkerMessageTypes.DESCRIBE,{}).then((function(e){return e.message.tableDescription}))}},{key:"getIndexes",value:function(){return this.postRequest(JQLWorkerMessageTypes.GET_INDEXES,{}).then((function(e){return e.message.indexes}))}},{key:"isIndexable",value:function(){return this.postRequest(JQLWorkerMessageTypes.IS_INDEXABLE,{}).then((function(e){return e.message.isIndexableResult}))}},{key:"isRemote",value:function(){return this.postRequest(JQLWorkerMessageTypes.IS_REMOTE,{}).then((function(e){return e.message.isRemoteResult}))}},{key:"isTransactional",value:function(){return this.postRequest(JQLWorkerMessageTypes.IS_TRANSACTIONAL,{}).then((function(e){return e.message.isTransactionalResult}))}},{key:"isVirtual",value:function(){return this.postRequest(JQLWorkerMessageTypes.IS_VIRTUAL,{}).then((function(e){return e.message.isVirtualResult}))}}],[{key:"getTable",value:function(e,t){return n.instances.hasOwnProperty(e)?n.instances[e]:t?new n(t,e):new JQLWorkerVirtualTable(e)}},{key:"deleteInstance",value:function(e){delete n.instances[e]}}]),n}(cu);function _u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(hu,"TYPE","table"),v()(hu,"instances",{});var gu=function(e){u()(n,e);var t=_u(n);function n(e){var i,r;return o()(this,n),(r=t.call(this,null,e)).workerConnector.on(y()((i=A()(r),_()(n.prototype)),"getType",i).call(i),r.handleWorkerMessage),r}return l()(n,[{key:"getType",value:function(){return n.TYPE}}]),l()(n,[{key:"instantiate",value:function(e){return this.postRequest(JQLWorkerMessageTypes.INSTANTIATE_VIRTUAL_TABLE,{columnDefinitions:e,tableInstanceId:this.getInstanceId()}).then((function(e){return e.message.instantiationResult}))}},{key:"createRow",value:function(){return this.postRequest(JQLWorkerMessageTypes.CREATE_ROW,{virtualRowInstanceId:cu.getUniqueId()}).then((function(e){return du.getVirtualRow(e.message.virtualRowInstanceId)}))}}]),n}(hu);function mu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(gu,"TYPE","virtualtable");var fu=function(e){u()(n,e);var t=mu(n);function n(e){var i;return o()(this,n),i=t.call(this,e),n.instances[i.getInstanceId()]=A()(i),i}return l()(n,[{key:"handleWorkerMessage",value:function(e){this.isMessageForThisInstance(e)&&this.resolve(e.data.messageId,e.data)}},{key:"getType",value:function(){return n.TYPE}}]),l()(n,[{key:"getStatementType",value:function(){return this.postRequest(JQLWorkerMessageTypes.GET_STATEMENT_TYPE,{}).then((function(e){return e.message.statementType}))}}],[{key:"getStatement",value:function(e){return n.instances.hasOwnProperty(e)?n.instances[e]:new n(e)}}]),n}(cu);function Eu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(fu,"TYPE","statement"),v()(fu,"instances",{});var yu=function(e){u()(n,e);var t=Eu(n);function n(e){var i;return o()(this,n),i=t.call(this,e),n.instances[i.getInstanceId()]=A()(i),i}return l()(n,[{key:"handleWorkerMessage",value:function(e){this.isMessageForThisInstance(e)&&this.resolve(e.data.messageId,e.data)}},{key:"getType",value:function(){return n.TYPE}}]),l()(n,[{key:"getRowsAsArray",value:function(){return this.postRequest(JQLWorkerMessageTypes.GET_ROWS_AS_ARRAY,{}).then((function(e){return e.message.rows}))}},{key:"getAffectedRows",value:function(){return this.postRequest(JQLWorkerMessageTypes.GET_AFFECTED_ROWS,{}).then((function(e){return e.message.affectedRows}))}},{key:"getRows",value:function(){return this.postRequest(JQLWorkerMessageTypes.GET_ROWS,{}).then((function(e){return e.message.rows}))}},{key:"getCalcFoundRows",value:function(){return this.postRequest(JQLWorkerMessageTypes.GET_CALC_FOUND_ROWS,{}).then((function(e){return e.message.foundRows}))}}],[{key:"getStatementResult",value:function(e){return n.instances.hasOwnProperty(e)?n.instances[e]:new n(e)}}]),n}(cu);function Tu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(yu,"TYPE","statementResult"),v()(yu,"instances",{});var vu=function(e){u()(n,e);var t=Tu(n);function n(e){var i;return o()(this,n),i=t.call(this,e),v()(A()(i),"functions",{}),v()(A()(i),"bindingProviders",{}),v()(A()(i),"bindingProviderCurrentId",0),v()(A()(i),"bindings",{}),v()(A()(i),"bindingsCurrentId",0),i}return l()(n,[{key:"handleWorkerMessage",value:function(e){if(this.isMessageForThisInstance(e))switch(e.data.type){case JQLWorkerMessageTypes.CALL_FUNCTION:var t=e.data.message.functionName,n=this.functions[t](e.data.message.functionArgs);this.postResponse(JQLWorkerMessageTypes.CALL_FUNCTION,{result:n});break;case JQLWorkerMessageTypes.CAN_BIND:var i=e.data.message.bindingProviderId,r=e.data.message.bindingName;this.bindingProviders[i]&&this.postResponse(JQLWorkerMessageTypes.CAN_BIND,{canBind:this.bindingProviders[i].canBind(r)});break;case JQLWorkerMessageTypes.DB_EVENT_BUSY:this.trigger("busy");break;case JQLWorkerMessageTypes.DB_EVENT_IDLE:this.trigger("idle");break;default:this.resolve(e.data.messageId,e.data)}}},{key:"getType",value:function(){return n.TYPE}}]),l()(n,[{key:"createStatement",value:function(e){return this.postRequest(JQLWorkerMessageTypes.CREATE_STATEMENT,{sqlStatement:e,statementInstanceId:cu.getUniqueId()}).then((function(e){return fu.getStatement(e.message.statementInstanceId)}))}},{key:"createTableFromCSVFile",value:function(e){return this.postRequest(JQLWorkerMessageTypes.CREATE_TABLE_FROM_CSV_FILE,{request:e})}},{key:"createVirtualTable",value:function(e){return this.postRequest(JQLWorkerMessageTypes.CREATE_VIRTUAL_TABLE,{columnDefinitions:e,tableInstanceId:cu.getUniqueId()}).then((function(e){return gu.getTable(e.message.tableInstanceId)}))}},{key:"deleteAllAssociatedSettingsAndAllTables",value:function(){return this.postRequest(JQLWorkerMessageTypes.DELETE_ALL_ASSOCIATED_SETTINGS_AND_TABLES,{})}},{key:"downloadTableAsCSV",value:function(e){return this.postRequest(JQLWorkerMessageTypes.DOWNLOAD_TABLE_AS_CSV,{tableName:e}).then((function(e){return e.message.tableCSV}))}},{key:"dropTable",value:function(e){return this.postRequest(JQLWorkerMessageTypes.DROP_TABLE,{tableName:e}).then((function(e){var t=e.message.dropTableResult;return t&&hu.deleteInstance(e.message.tableInstanceId),t}))}},{key:"enumerateTables",value:function(){return this.postRequest(JQLWorkerMessageTypes.ENUMERATE_TABLES,{}).then((function(e){var t=e.message.tableInstanceIds,n=[];return t.forEach((function(e){var t=hu.getTable(e);n.push({name:t.getName(),instance:t})})),n}))}},{key:"executeStatement",value:function(e,t){var n;return t&&(n=this.getBindingsId(),this.bindings[n]=t),this.postRequest(JQLWorkerMessageTypes.EXECUTE_STATEMENT,{statementInstanceId:e.getInstanceId(),bindingsId:n,statementResultInstanceId:cu.getUniqueId()}).then((function(e){return yu.getStatementResult(e.message.statementResultInstanceId)}))}},{key:"getJQLFormConfiguration",value:function(){return this.postRequest(JQLWorkerMessageTypes.GET_JQL_FORM_CONFIGURATION,{}).then((function(e){return e.message.jqlFormConfiguration}))}},{key:"getTable",value:function(e){return this.postRequest(JQLWorkerMessageTypes.GET_TABLE,{tableName:e}).then((function(e){return hu.getTable(e.message.tableInstanceId)}))}},{key:"hasLocalFunction",value:function(e){return this.postRequest(JQLWorkerMessageTypes.HAS_LOCAL_FUNCTION,{functionName:e}).then((function(e){return e.message.hasTableResult}))}},{key:"hasTable",value:function(e){return this.postRequest(JQLWorkerMessageTypes.HAS_TABLE,{tableName:e}).then((function(e){return e.message.hasTableResult}))}},{key:"initPlanner",value:function(){return this.postRequest(JQLWorkerMessageTypes.INIT_PLANNER,{})}},{key:"instantiate",value:function(){return this.postRequest(JQLWorkerMessageTypes.INSTANTIATE_DATABASE,{instanceId:this.getInstanceId()})}},{key:"saveJQLFormConfiguration",value:function(e){return this.postRequest(JQLWorkerMessageTypes.SAVE_JQL_FORM_CONFIGURATION,{configuration:e}).then((function(e){return e.message.jqlFormConfiguration}))}},{key:"unmountTable",value:function(e){return this.postRequest(JQLWorkerMessageTypes.UNMOUNT_TABLE,{tableName:e})}},{key:"withAuthorizationToken",value:function(e){return this.postRequest(JQLWorkerMessageTypes.SET_AUTHORIZATION_TOKEN,{authorizationToken:e})}},{key:"withAuthorizationTokenSalesforce",value:function(e){return this.postRequest(JQLWorkerMessageTypes.SET_SALESFORCE_AUTHORIZATION_TOKEN,{authorizationTokenSalesforce:e})}},{key:"withFunction",value:function(e,t,n,i){return this.functions[e]=t,this.postRequest(JQLWorkerMessageTypes.WITH_FUNCTION,{functionName:e,local:n,remote:i})}},{key:"withRPCEndpointName",value:function(e){return this.postRequest(JQLWorkerMessageTypes.SET_RPC_ENDPOINT_NAME,{rpcEndpointName:e})}},{key:"withRPCEndpointSalesforceName",value:function(e){return this.postRequest(JQLWorkerMessageTypes.SET_RPC_ENDPOINT_SALESFORCE_NAME,{rpcEndpointSalesforceName:e})}},{key:"withTable",value:function(e,t){return t.setName(e),this.postRequest(JQLWorkerMessageTypes.WITH_TABLE,{tableName:e})}},{key:"withTablesList",value:function(e){return this.postRequest(JQLWorkerMessageTypes.WITH_TABLES,{tables:e})}},{key:"withAutoBindingProvider",value:function(e){var t=this.getBindingProviderId();return this.bindingProviders[t]=e,this.postRequest(JQLWorkerMessageTypes.WITH_AUTO_BINDING_PROVIDER,{bindingProviderId:t})}},{key:"getBindingProviderId",value:function(){return++this.bindingProviderCurrentId}},{key:"getBindingsId",value:function(){return++this.bindingsCurrentId}}]),n}(cu);function Ou(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(vu,"TYPE","database");var bu=function(e){u()(n,e);var t=Ou(n);function n(){return o()(this,n),t.call(this)}return l()(n,[{key:"addPanelCheckboxEventListeners",value:function(){var e=this;this.checkboxInputNode.onchange=function(){var t=$("[data-overlay-tab][data-overlay-embed-type]"),n="form-link",i="form-link",r=e.getParent().getDependency("jq");null!==t&&(n=t.attr("data-overlay-tab"),i=t.attr("data-overlay-embed-type"));var a={form_id:e.getDependency("formId"),user_id:e.getDependency("userId"),PHPSESSID:e.getDependency("sessionId"),needs_upgrade:!1,needs_alias_upgrade:0,tab:n,embed_type:i,activate_alias_option:!0,selected_alias:e.domainAlias},o=e.isChecked(),s=JSON.stringify(a);r.post("ajax_call.php",{module:"modules/publish/ajax_calls.php",action:"change_ssl_option",parameters:s,value:o?1:0},(function(t){try{var n=JSON.parse(t);if("OK"===n.status){var i=n.generated_code;if("twitter"==a.tab){var r=n.generated_code.split("/");r.pop(),i=r.join("/")}document.querySelector('textarea[data-role="code-container"]').textContent=i,e.getParent().trigger("ssl-changed",o)}else"UPGRADE"===n.status?(e.checkboxInputNode.checked=!1,e.getDependency("commandDispatcher").triggerPaywall(it.k.SSL_NOT_SUPPORTED_IN_CURRENT_USER_PLAN)):(e.checkboxInputNode.checked=!1,e.getDependency("UI").alert("Error saving setting","There was an error saving the secured SSL setting."))}catch(s){console.error(s)}})),e.trackEvent("publish_connection_ssl_click")}}}]),n}(us),Cu=n(302),Iu=n(218);function Ru(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Pu=function(e){u()(n,e);var t=Ru(n);function n(e){var i;return o()(this,n),i=t.call(this),v()(A()(i),"platformSupportedLanguages",void 0),v()(A()(i),"languages",void 0),v()(A()(i),"document",void 0),i.document=e,i}return l()(n,[{key:"getLanguages",value:function(){return this.languages}},{key:"setSupportedFormLanguages",value:function(e){this.platformSupportedLanguages=[];for(var t=0,n=(e||[]).length;t<n;t++)this.platformSupportedLanguages.push(e[t]);return this}},{key:"setAvailableFormLanguages",value:function(e){this.languages=[];for(var t=0,n=(e||[]).length;t<n;t++){var i=new Iu.a(this,e[t].code3,e[t].code2,e[t].default);this.languages.push(i)}return this.trigger("translations-list-changed"),this}},{key:"enumeratePlatformSupportedLanguages",value:function(){return this.platformSupportedLanguages||[]}},{key:"enumerateAvailableFormLanguages",value:function(){return(this.languages||[]).filter((function(e){return!(!e.getNativeName()&&!e.getName())}))}},{key:"addLanguage",value:function(e){return this.languages.push(e),this.trigger("translations-list-changed"),this}},{key:"getLanguageByCode",value:function(e){if(!e)return null;for(var t=0,n=this.languages.length;t<n;t++)if(this.languages[t].getCode3()===e||this.languages[t].getCode2()===e)return this.languages[t];return null}},{key:"removeLanguage",value:function(e){if(!e)throw new Error("Invalid argument!");for(var t=0,n=this.languages.length;t<n;t++)if(this.languages[t]===e)return this.languages.splice(t,1),void this.trigger("translations-list-changed");throw new Error("Language "+e.getName()+" not found!")}}]),n}(ir.a),Nu=n(303),Au=n(154),Su=function(){function e(t,n){var i=this;o()(this,e),v()(this,"undoButtonDOMNode",void 0),v()(this,"redoButtonDOMNode",void 0),v()(this,"undoTriggered",void 0),v()(this,"redoTriggered",void 0),this.undoButtonDOMNode=document.querySelector(t)||null,this.redoButtonDOMNode=document.querySelector(n)||null,this.undoButtonDOMNode.addEventListener("click",(function(){var e=i.undoTriggered();i.setButtonState(e.canUndo,e.canRedo)}),!1),this.redoButtonDOMNode.addEventListener("click",(function(){var e=i.redoTriggered();i.setButtonState(e.canUndo,e.canRedo)}),!1)}return l()(e,[{key:"setButtonState",value:function(e,t){this.undoButtonDOMNode&&(e?(this.undoButtonDOMNode.style.opacity="",this.undoButtonDOMNode.style.pointerEvents="auto"):(this.undoButtonDOMNode.style.opacity=".2",this.undoButtonDOMNode.style.pointerEvents="none")),this.redoButtonDOMNode&&(t?(this.redoButtonDOMNode.style.opacity="",this.redoButtonDOMNode.style.pointerEvents="auto"):(this.redoButtonDOMNode.style.opacity=".2",this.redoButtonDOMNode.style.pointerEvents="none"))}}]),e}(),Lu=function(){function e(t){var n=this;o()(this,e),v()(this,"header",void 0),v()(this,"undoTriggered",void 0),v()(this,"redoTriggered",void 0),this.header=t,this.header.on(Bl.HEADER_EVENT,(function(e){if("Undo"===e.key){var t=n.undoTriggered();n.header.setButtonInteractionState(Hl.UNDO,t.canUndo),n.header.setButtonInteractionState(Hl.REDO,t.canRedo)}if("Redo"===e.key){var i=n.redoTriggered();n.header.setButtonInteractionState(Hl.UNDO,i.canUndo),n.header.setButtonInteractionState(Hl.REDO,i.canRedo)}}))}return l()(e,[{key:"setButtonState",value:function(e,t){this.header.setButtonInteractionState(Hl.UNDO,e),this.header.setButtonInteractionState(Hl.REDO,t)}}]),e}();function Du(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var wu=function(e){u()(n,e);var t=Du(n);function n(e,i){var r;return o()(this,n),r=t.call(this),v()(A()(r),"engine",void 0),v()(A()(r),"chunks",[]),v()(A()(r),"paused",!0),v()(A()(r),"lastActionName",null),v()(A()(r),"requestSavedThrottler",void 0),v()(A()(r),"hasSaveRequests",!1),v()(A()(r),"lastSaveTime",void 0),v()(A()(r),"undoPointer",-1),v()(A()(r),"undoServiceInteractionProvider",void 0),r.engine=e,r.undoServiceInteractionProvider=i,r.lastSaveTime=+new Date,r.requestSavedThrottler=ie.a.create((function(){r.requestSaveInImmediateMode()}),1e3),r.init(),r.undoServiceInteractionProvider.setButtonState(r.canUndo(),r.canRedo()),r}return l()(n,[{key:"init",value:function(){var e=this;this.on("user-action",(function(t){e.lastActionName=t,e.requestSaveInImmediateMode()})),this.on("pause",(function(){console.log("pause"),e.paused=!0})),this.on("resume",(function(){console.log("resume"),e.paused=!1})),this.on("request-save",(function(){e.hasSaveRequests=!0,e.requestSavedThrottler()})),this.on("save",(function(){e.requestSaveInImmediateMode()})),this.undoServiceInteractionProvider.undoTriggered=function(){return e.undo(),{canUndo:e.canUndo(),canRedo:e.canRedo()}},this.undoServiceInteractionProvider.redoTriggered=function(){return e.redo(),{canUndo:e.canUndo(),canRedo:e.canRedo()}}}},{key:"undo",value:function(){if(this.canUndo()){this.undoPointer--;var e=this.chunks[this.undoPointer].data;this.lastActionName=this.chunks[this.undoPointer].description,this.paused=!0,this.engine.loadFromString(e,!0),this.paused=!1,this.trigger("change")}}},{key:"redo",value:function(){if(this.canRedo()){this.undoPointer++;var e=this.chunks[this.undoPointer].data;this.lastActionName=this.chunks[this.undoPointer].description,this.paused=!0,this.engine.loadFromString(e,!0),this.paused=!1,this.trigger("change")}}},{key:"requestSaveInImmediateMode",value:function(){if(this.paused)console.warn("UndoService paused. Cannot record chunk.");else{console.warn("save "+this.lastActionName),this.hasSaveRequests=!1;var e=JSON.stringify(this.engine.getDocument().serialize()),t=!1,i=+new Date;if(!this.chunks.length||e!==this.chunks[this.undoPointer].data){if(this.removeChunksAfterUndoPointer(),(0===this.chunks.length||this.lastActionName!==this.chunks[this.chunks.length-1].description||i-this.lastSaveTime>n.MAX_CHUNK_SAVE_TIME)&&(t=!0),t){console.log("create undo chunk");var r={description:this.lastActionName,data:e};for(this.chunks.push(r),this.undoPointer++;this.chunks.length>n.MAX_UNDO_LEVELS+1;)this.chunks.shift(),this.undoPointer--}else this.chunks[this.undoPointer].data=e,console.log("update chunk");this.lastSaveTime=i,this.undoServiceInteractionProvider.setButtonState(this.canUndo(),this.canRedo())}}}},{key:"canUndo",value:function(){return this.undoPointer>0}},{key:"canRedo",value:function(){return this.undoPointer+1<this.chunks.length}},{key:"removeChunksAfterUndoPointer",value:function(){this.chunks.splice(this.undoPointer+1)}}]),n}(ir.a);v()(wu,"MAX_UNDO_LEVELS",10),v()(wu,"MAX_CHUNK_SAVE_TIME",5e3);var ku=function(){function e(t,n){o()(this,e),v()(this,"elements",{}),v()(this,"form",void 0),v()(this,"engine",void 0),v()(this,"reinitElements",[]),this.form=t,this.engine=n}return l()(e,[{key:"add",value:function(e,t){this.elements[e]=t}},{key:"destroy",value:function(){this.elements=null,this.form=null,this.engine=null,this.reinitElements=null}},{key:"createElement",value:function(e,t,n,i,r,a,o){var s;if(null!==o&&this.elements[o]&&e===this.elements[o].getTypeId()?((s=this.elements[o]).getElementKind()===O.p.CONTAINER&&s.removeAllChildren(),s.properties=t,this.reinitElements.push(s)):s=this.engine.createElement(e,t),!n&&!o){var l=Object(ve.v)(e,t,s.getHash());Object(Te.a)()(l)}return s.withId(n).withColspan(i).withHeight(r).withErrors(a).setAttached(!0),s}},{key:"reinitReusedElements",value:function(){console.time("reinit_reused_elements");for(var e,t=this.form.getLabelPlacement(),n=this.form.getInstructionsPlacement(),i=0,r=this.reinitElements.length;i<r;i++)this.reinitElements[i].onCreated(),this.reinitElements[i].setupI18n(),this.reinitElements[i].getElementKind()===O.p.CONTROL&&(this.reinitElements[i].rendererType=void 0,e=je.a.getSuggestedRenderer(this.reinitElements[i],t,n),this.reinitElements[i].setRendererType(e));console.timeEnd("reinit_reused_elements")}}]),e}(),Mu=function(){function e(t){o()(this,e),v()(this,"engine",void 0),this.engine=t}return l()(e,[{key:"readFormNode",value:function(t,n,i,r,a){var o,s,l,c,u,d,p,h,_,g,m;if(!P()(t,Array))throw new Error("Error unserializing structure: Array expected!");if(t[0]!==e.UNSERIALIZER_VERSION)throw new Error("Unserializer version mismatch: got "+JSON.stringify(t[0])+", expected "+JSON.stringify(Uu.LATEST_VERSION));if(t.splice(0,1),t.length!=e.SERIALIZED_NODE_CHUNK_LENGTH+e.SERIALIZED_FORM_OVERHEAD_CHUNK_LENGTH)throw new Error("The root structure of a serialized form must have exactly "+(e.SERIALIZED_NODE_CHUNK_LENGTH+e.SERIALIZED_FORM_OVERHEAD_CHUNK_LENGTH)+" items, but this structure has "+t.length+" items");if(o=t[e.POS_NODE_TYPE_ID],s=t[e.POS_NODE_ID],l=t[e.POS_NODE_PROPERTIES],u=t[e.POS_NODE_ERRORS],c=t[e.POS_NODE_CHILDREN],p=t[e.POS_FORM_HEADER],h=t[e.POS_FORM_CAPTCHA],_=t[e.POS_FORM_ACTIONBAR],g=t[e.POS_FORM_THEME],m=t[e.POS_FORM_CONFIG],o!==b.a.ELEMENT_TYPE_FORM)throw new Error("The value of element[0] in a serialized form must be exactly "+JSON.stringify(b.a.ELEMENT_TYPE_FORM));if(n.withProperties(l),n.id=s,n.withErrors(u),!p||!P()(p,Array))throw new Error("Error deserializing form: The embedded header is not a <IFormSerializationData>");if(p.length!==e.SERIALIZED_NODE_CHUNK_LENGTH)throw new Error("Error deserializing form: Header length mismatch: got "+JSON.stringify(p.length)+", expected "+JSON.stringify(e.SERIALIZED_NODE_CHUNK_LENGTH));if(p[0]!==b.a.CONTROL_TYPE_FORM_HEADER)throw new Error("Error deserializing form: Header element type id mismatch: got "+JSON.stringify(p[0])+", expected "+JSON.stringify(b.a.CONTROL_TYPE_FORM_HEADER));if(!h||!P()(h,Array))throw new Error("Error deserializing form: The embedded captcha is not a <IFormSerializationData>!");if(h.length!==e.SERIALIZED_NODE_CHUNK_LENGTH)throw new Error("Error deserializing form: Captcha length mismatch: got "+JSON.stringify(h.length)+", expected "+JSON.stringify(e.SERIALIZED_NODE_CHUNK_LENGTH));if(h[0]!==b.a.CONTROL_TYPE_CAPTCHA)throw new Error("Error deserializing form: Captcha element type id mismatch: got "+JSON.stringify(h[0])+", expected "+JSON.stringify(b.a.CONTROL_TYPE_CAPTCHA));if(!_||!P()(_,Array))throw new Error("Error deserializing form: The embedded footer is not a <IFormSerializationData>");if(_.length!==e.SERIALIZED_NODE_CHUNK_LENGTH)throw new Error("Error deserializing form: Header length mismatch: got "+JSON.stringify(_.length)+", expected "+JSON.stringify(e.SERIALIZED_NODE_CHUNK_LENGTH));if(_[0]!==b.a.CONTROL_TYPE_ACTION_BAR)throw new Error("Error deserializing form: ActionBar element type id mismatch: got "+JSON.stringify(_[0])+", expected "+JSON.stringify(b.a.CONTROL_TYPE_ACTION_BAR));if(null!==m&&!P()(m,Object))throw new Error("Error deserializing form: Configuration property should be null|object");if(n.getHeader().withId(p[e.POS_NODE_ID]).withProperties(p[e.POS_NODE_PROPERTIES]),n.getCaptcha().withId(h[e.POS_NODE_ID]).withProperties(h[e.POS_NODE_PROPERTIES]),n.getActionBar().withId(_[e.POS_NODE_ID]).withProperties(_[e.POS_NODE_PROPERTIES]),P()(g,Array))for(var f=0,E=g.length;f<E;f++)i.setProperty(g[f].name,g[f].value);if(null!==m)for(var y in m)m.hasOwnProperty(y)&&n.getConfiguration().withProperty(y,m[y]);if(i.recomputeInImmediateMode(),null!==c){d={node:null,nextReadIndex:0};do{null!==(d=this.readNextNode(c,d.nextReadIndex,r,a))&&n.appendChild(d.node)}while(null!==d)}}},{key:"readNextNode",value:function(t,n,i,r){var a,o,s,l,c,u,d,p,h,_,g=(t||[]).length;if(!P()(t,Array))return null;if(!t.length)return null;if(n===g)return null;if(n>g-e.SERIALIZED_NODE_CHUNK_LENGTH)throw new Error("Unserialize failed: Read outside serialized data bounds!");if(a=t[n+e.POS_NODE_TYPE_ID],o=t[n+e.POS_NODE_ID],h=t[n+e.POS_NODE_HASH],s=t[n+e.POS_NODE_PROPERTIES],d=t[n+e.POS_NODE_ERRORS],l=t[n+e.POS_NODE_CHILDREN],c=t[n+e.POS_NODE_COLSPAN],u=t[n+e.POS_NODE_HEIGHT],p=r.createElement(a,s,o,c,u,d,h),null!==l){_={node:null,nextReadIndex:0};do{null!==(_=this.readNextNode(l,_.nextReadIndex,i,r))&&p.appendChild(_.node)}while(null!==_)}return{node:p,nextReadIndex:n+e.SERIALIZED_NODE_CHUNK_LENGTH}}},{key:"unserialize",value:function(e,t){console.time("unserialize");var n=this.engine.getDocument(),i=this.engine.getTheme(),r=this.engine,a=n.createUnserializerBag(!t);n.clear(),n.disableEvents(),n.getConfiguration().disableEvents(),i.disableEvents(),r.disableEvents();var o=r.getLoader().getSelection();this.readFormNode(e,n,i,r,a),a.reinitReusedElements(),a.destroy(),r.enableEvents(),i.enableEvents(),n.enableEvents(),n.getConfiguration().enableEvents(),n.rebuildHashMap(),n.trigger("load"),n.repaginateInImmediateMode(),i.recomputeInImmediateMode(),null!==o&&(o.enableEvents(),o.synchronize()),function(e){for(var t=0,n=e.length;t<n;t++)i.trigger("property-changed",e[t].name,e[t].value);i.trigger("changed")}(i.enumerateProperties()),n.getHeader().updateHTMLContent(),n.getActionBar().updateDOMAttributes(),n.updateInstructionsTextAlignment(),n.updateLabelTextAlignment(),n.updateTextDirection(),n.updateLabelPlacement(),n.getEngine().getLoader().execCommand("form-name-changed"),n.getCaptcha().onCreated(),n.setupCaptcha(),n.getEngine().getTheme().updateCustomFormCSSFromUrl(),n.getEngine().getTheme().updateCustomFormCSSText(),console.timeEnd("unserialize"),n.getEngine().getLoader().trigger("unserialize")}}]),e}();v()(Mu,"UNSERIALIZER_VERSION","v0.5"),v()(Mu,"SERIALIZED_NODE_CHUNK_LENGTH",8),v()(Mu,"SERIALIZED_FORM_OVERHEAD_CHUNK_LENGTH",5),v()(Mu,"POS_NODE_TYPE_ID",0),v()(Mu,"POS_NODE_ID",1),v()(Mu,"POS_NODE_HASH",2),v()(Mu,"POS_NODE_PROPERTIES",3),v()(Mu,"POS_NODE_ERRORS",4),v()(Mu,"POS_NODE_CHILDREN",5),v()(Mu,"POS_NODE_COLSPAN",6),v()(Mu,"POS_NODE_HEIGHT",7),v()(Mu,"POS_FORM_HEADER",8),v()(Mu,"POS_FORM_CAPTCHA",9),v()(Mu,"POS_FORM_ACTIONBAR",10),v()(Mu,"POS_FORM_THEME",11),v()(Mu,"POS_FORM_CONFIG",12);var xu=function(){function e(t){o()(this,e),v()(this,"engine",void 0),this.engine=t}return l()(e,[{key:"readFormNode",value:function(t,n,i,r,a){var o,s,l,c,u,d,p,h,_,g,m,f;if(!P()(t,Array))throw new Error("Error unserializing structure: Array expected!");if(t[0]!==e.UNSERIALIZER_VERSION)throw new Error("Unserializer version mismatch: got "+JSON.stringify(t[0])+", expected "+JSON.stringify(Uu.LATEST_VERSION));if(t.splice(0,1),t.length!=e.SERIALIZED_NODE_CHUNK_LENGTH+e.SERIALIZED_FORM_OVERHEAD_CHUNK_LENGTH)throw new Error("The root structure of a serialized form must have exactly "+(e.SERIALIZED_NODE_CHUNK_LENGTH+e.SERIALIZED_FORM_OVERHEAD_CHUNK_LENGTH)+" items, but this structure has "+t.length+" items");if(o=t[e.POS_NODE_TYPE_ID],s=t[e.POS_NODE_ID],l=t[e.POS_NODE_PROPERTIES],u=t[e.POS_NODE_ERRORS],c=t[e.POS_NODE_CHILDREN],p=t[e.POS_FORM_HEADER],h=t[e.POS_FORM_CAPTCHA],_=t[e.POS_FORM_ACTIONBAR],g=t[e.POS_FORM_THEME],m=t[e.POS_FORM_CONFIG],f=t[e.POS_FORM_SETTINGS],o!==b.a.ELEMENT_TYPE_FORM)throw new Error("The value of element[0] in a serialized form must be exactly "+JSON.stringify(b.a.ELEMENT_TYPE_FORM));if(n.withProperties(l),n.id=s,n.withErrors(u),!p||!P()(p,Array))throw new Error("Error deserializing form: The embedded header is not a <IFormSerializationData>");if(p.length!==e.SERIALIZED_NODE_CHUNK_LENGTH)throw new Error("Error deserializing form: Header length mismatch: got "+JSON.stringify(p.length)+", expected "+JSON.stringify(e.SERIALIZED_NODE_CHUNK_LENGTH));if(p[0]!==b.a.CONTROL_TYPE_FORM_HEADER)throw new Error("Error deserializing form: Header element type id mismatch: got "+JSON.stringify(p[0])+", expected "+JSON.stringify(b.a.CONTROL_TYPE_FORM_HEADER));if(!h||!P()(h,Array))throw new Error("Error deserializing form: The embedded captcha is not a <IFormSerializationData>!");if(h.length!==e.SERIALIZED_NODE_CHUNK_LENGTH)throw new Error("Error deserializing form: Captcha length mismatch: got "+JSON.stringify(h.length)+", expected "+JSON.stringify(e.SERIALIZED_NODE_CHUNK_LENGTH));if(h[0]!==b.a.CONTROL_TYPE_CAPTCHA)throw new Error("Error deserializing form: Captcha element type id mismatch: got "+JSON.stringify(h[0])+", expected "+JSON.stringify(b.a.CONTROL_TYPE_CAPTCHA));if(!_||!P()(_,Array))throw new Error("Error deserializing form: The embedded footer is not a <IFormSerializationData>");if(_.length!==e.SERIALIZED_NODE_CHUNK_LENGTH)throw new Error("Error deserializing form: Header length mismatch: got "+JSON.stringify(_.length)+", expected "+JSON.stringify(e.SERIALIZED_NODE_CHUNK_LENGTH));if(_[0]!==b.a.CONTROL_TYPE_ACTION_BAR)throw new Error("Error deserializing form: ActionBar element type id mismatch: got "+JSON.stringify(_[0])+", expected "+JSON.stringify(b.a.CONTROL_TYPE_ACTION_BAR));if(null!==m&&!P()(m,Object))throw new Error("Error deserializing form: Configuration property should be null|object");if(null!==f&&!Array.isArray(f))throw new Error("Error deserializing form: Settings property should be array|null");if(n.getHeader().withId(p[e.POS_NODE_ID]).withProperties(p[e.POS_NODE_PROPERTIES]),n.getCaptcha().withId(h[e.POS_NODE_ID]).withProperties(h[e.POS_NODE_PROPERTIES]),n.getActionBar().withId(_[e.POS_NODE_ID]).withProperties(_[e.POS_NODE_PROPERTIES]),P()(g,Array))for(var E=0,y=g.length;E<y;E++)i.setProperty(g[E].name,g[E].value);if(null!==m)for(var T in m)m.hasOwnProperty(T)&&n.getConfiguration().withProperty(T,m[T]);if(null!==f)for(var v=0,O=f.length;v<O;v++){var C=r.getFactory().createEditorSettingByTypeId(f[v],n,f[v+1]);if(f[v+2]&&f[v+2].length)for(var I=0,R=f[v+2].length;I<R;I++)C.withError(f[v+2][I]);n.withEditorSetting(C),v+=2}if(i.recomputeInImmediateMode(),null!==c){d={node:null,nextReadIndex:0};do{null!==(d=this.readNextNode(c,d.nextReadIndex,r,a))&&n.appendChild(d.node)}while(null!==d)}}},{key:"readNextNode",value:function(t,n,i,r){var a,o,s,l,c,u,d,p,h,_,g=(t||[]).length;if(!P()(t,Array))return null;if(!t.length)return null;if(n===g)return null;if(n>g-e.SERIALIZED_NODE_CHUNK_LENGTH)throw new Error("Unserialize failed: Read outside serialized data bounds!");if(a=t[n+e.POS_NODE_TYPE_ID],o=t[n+e.POS_NODE_ID],h=t[n+e.POS_NODE_HASH],s=t[n+e.POS_NODE_PROPERTIES],d=t[n+e.POS_NODE_ERRORS],l=t[n+e.POS_NODE_CHILDREN],c=t[n+e.POS_NODE_COLSPAN],u=t[n+e.POS_NODE_HEIGHT],p=r.createElement(a,s,o,c,u,d,h),null!==l){_={node:null,nextReadIndex:0};do{null!==(_=this.readNextNode(l,_.nextReadIndex,i,r))&&p.appendChild(_.node)}while(null!==_)}return{node:p,nextReadIndex:n+e.SERIALIZED_NODE_CHUNK_LENGTH}}},{key:"unserialize",value:function(e,t){console.time("unserialize");var n=this.engine.getDocument(),i=this.engine.getTheme(),r=this.engine,a=n.createUnserializerBag(!t);n.clear(),n.disableEvents(),n.getConfiguration().disableEvents(),i.disableEvents(),r.disableEvents();var o=r.getLoader().getSelection();this.readFormNode(e,n,i,r,a),a.reinitReusedElements(),a.destroy(),r.enableEvents(),i.enableEvents(),n.enableEvents(),n.getConfiguration().enableEvents(),n.rebuildHashMap(),n.trigger("load"),n.repaginateInImmediateMode(),i.recomputeInImmediateMode(),null!==o&&(o.enableEvents(),o.synchronize()),function(e){for(var t=0,n=e.length;t<n;t++)i.trigger("property-changed",e[t].name,e[t].value);i.trigger("changed")}(i.enumerateProperties()),n.getHeader().updateHTMLContent(),n.getActionBar().updateDOMAttributes(),n.updateInstructionsTextAlignment(),n.updateLabelTextAlignment(),n.updateTextDirection(),n.updateLabelPlacement(),n.getEngine().getLoader().execCommand("form-name-changed"),n.getCaptcha().onCreated(),n.setupCaptcha(),n.getEngine().getTheme().updateCustomFormCSSFromUrl(),n.getEngine().getTheme().updateCustomFormCSSText(),console.timeEnd("unserialize"),n.getEngine().getLoader().trigger("unserialize")}}]),e}();v()(xu,"UNSERIALIZER_VERSION","v0.6"),v()(xu,"SERIALIZED_NODE_CHUNK_LENGTH",8),v()(xu,"SERIALIZED_FORM_OVERHEAD_CHUNK_LENGTH",6),v()(xu,"POS_NODE_TYPE_ID",0),v()(xu,"POS_NODE_ID",1),v()(xu,"POS_NODE_HASH",2),v()(xu,"POS_NODE_PROPERTIES",3),v()(xu,"POS_NODE_ERRORS",4),v()(xu,"POS_NODE_CHILDREN",5),v()(xu,"POS_NODE_COLSPAN",6),v()(xu,"POS_NODE_HEIGHT",7),v()(xu,"POS_FORM_HEADER",8),v()(xu,"POS_FORM_CAPTCHA",9),v()(xu,"POS_FORM_ACTIONBAR",10),v()(xu,"POS_FORM_THEME",11),v()(xu,"POS_FORM_CONFIG",12),v()(xu,"POS_FORM_SETTINGS",13);var Uu=function(){function e(t){o()(this,e),v()(this,"engine",void 0),v()(this,"cache",{}),this.engine=t}return l()(e,[{key:"unserialize",value:function(e,t){var n=this.getSerializationVersion(e),i=this.createUnserializer(n);try{i.unserialize(e,t)}catch(a){var r;throw null===(r=CFTracker)||void 0===r||r.event("form_unserialization_error"),a}}},{key:"getSerializationVersion",value:function(e){return e&&e[0]&&e.length?e[0]:null}},{key:"createUnserializer",value:function(e){var t;if(void 0!==this.cache[e])return this.cache[e];switch(e){case Fu.UNSERIALIZER_VERSION:return this.cache[Fu.UNSERIALIZER_VERSION]=new Fu(this.engine);case Mu.UNSERIALIZER_VERSION:return this.cache[Mu.UNSERIALIZER_VERSION]=new Mu(this.engine);case xu.UNSERIALIZER_VERSION:return this.cache[xu.UNSERIALIZER_VERSION]=new xu(this.engine);default:throw null===(t=CFTracker)||void 0===t||t.event("form_unserialization_version_mismatch_error"),new Error("Failed to create unserializer for version "+JSON.stringify(e))}}}]),e}();v()(Uu,"LATEST_VERSION","v0.6");var Fu=function(){function e(t){o()(this,e),v()(this,"engine",void 0),this.engine=t}return l()(e,[{key:"readFormNode",value:function(t,n,i,r,a){var o,s,l,c,u,d,p,h,_,g;if(!P()(t,Array))throw new Error("Error unserializing structure: Array expected!");if(t[0]!==e.UNSERIALIZER_VERSION)throw new Error("Unserializer version mismatch: got "+JSON.stringify(t[0])+", expected "+JSON.stringify(Uu.LATEST_VERSION));if(t.splice(0,1),t.length!=e.SERIALIZED_NODE_CHUNK_LENGTH+e.SERIALIZED_FORM_OVERHEAD_CHUNK_LENGTH)throw new Error("The root structure of a serialized form must have exactly "+(e.SERIALIZED_NODE_CHUNK_LENGTH+e.SERIALIZED_FORM_OVERHEAD_CHUNK_LENGTH)+" items, but this structure has "+t.length+" items");if(o=t[e.POS_NODE_TYPE_ID],s=t[e.POS_NODE_ID],l=t[e.POS_NODE_PROPERTIES],u=t[e.POS_NODE_ERRORS],c=t[e.POS_NODE_CHILDREN],p=t[e.POS_FORM_HEADER],h=t[e.POS_FORM_CAPTCHA],_=t[e.POS_FORM_ACTIONBAR],g=t[e.POS_FORM_THEME],o!==b.a.ELEMENT_TYPE_FORM)throw new Error("The value of element[0] in a serialized form must be exactly "+JSON.stringify(b.a.ELEMENT_TYPE_FORM));if(n.withProperties(l),n.id=s,n.withErrors(u),!p||!P()(p,Array))throw new Error("Error deserializing form: The embedded header is not a <IFormSerializationData>");if(p.length!==e.SERIALIZED_NODE_CHUNK_LENGTH)throw new Error("Error deserializing form: Header length mismatch: got "+JSON.stringify(p.length)+", expected "+JSON.stringify(e.SERIALIZED_NODE_CHUNK_LENGTH));if(p[0]!==b.a.CONTROL_TYPE_FORM_HEADER)throw new Error("Error deserializing form: Header element type id mismatch: got "+JSON.stringify(p[0])+", expected "+JSON.stringify(b.a.CONTROL_TYPE_FORM_HEADER));if(!h||!P()(h,Array))throw new Error("Error deserializing form: The embedded captcha is not a <IFormSerializationData>!");if(h.length!==e.SERIALIZED_NODE_CHUNK_LENGTH)throw new Error("Error deserializing form: Captcha length mismatch: got "+JSON.stringify(h.length)+", expected "+JSON.stringify(e.SERIALIZED_NODE_CHUNK_LENGTH));if(h[0]!==b.a.CONTROL_TYPE_CAPTCHA)throw new Error("Error deserializing form: Captcha element type id mismatch: got "+JSON.stringify(h[0])+", expected "+JSON.stringify(b.a.CONTROL_TYPE_CAPTCHA));if(!_||!P()(_,Array))throw new Error("Error deserializing form: The embedded footer is not a <IFormSerializationData>");if(_.length!==e.SERIALIZED_NODE_CHUNK_LENGTH)throw new Error("Error deserializing form: Header length mismatch: got "+JSON.stringify(_.length)+", expected "+JSON.stringify(e.SERIALIZED_NODE_CHUNK_LENGTH));if(_[0]!==b.a.CONTROL_TYPE_ACTION_BAR)throw new Error("Error deserializing form: ActionBar element type id mismatch: got "+JSON.stringify(_[0])+", expected "+JSON.stringify(b.a.CONTROL_TYPE_ACTION_BAR));if(n.getHeader().withId(p[e.POS_NODE_ID]).withProperties(p[e.POS_NODE_PROPERTIES]),n.getCaptcha().withId(h[e.POS_NODE_ID]).withProperties(h[e.POS_NODE_PROPERTIES]),n.getActionBar().withId(_[e.POS_NODE_ID]).withProperties(_[e.POS_NODE_PROPERTIES]),P()(g,Array))for(var m=0,f=g.length;m<f;m++)i.setProperty(g[m].name,g[m].value);if(i.recomputeInImmediateMode(),null!==c){d={node:null,nextReadIndex:0};do{null!==(d=this.readNextNode(c,d.nextReadIndex,r,a))&&n.appendChild(d.node)}while(null!==d)}}},{key:"readNextNode",value:function(t,n,i,r){var a,o,s,l,c,u,d,p,h,_,g=(t||[]).length;if(!P()(t,Array))return null;if(!t.length)return null;if(n===g)return null;if(n>g-e.SERIALIZED_NODE_CHUNK_LENGTH)throw new Error("Unserialize failed: Read outside serialized data bounds!");if(a=t[n+e.POS_NODE_TYPE_ID],o=t[n+e.POS_NODE_ID],h=t[n+e.POS_NODE_HASH],s=t[n+e.POS_NODE_PROPERTIES],d=t[n+e.POS_NODE_ERRORS],l=t[n+e.POS_NODE_CHILDREN],c=t[n+e.POS_NODE_COLSPAN],u=t[n+e.POS_NODE_HEIGHT],p=r.createElement(a,s,o,c,u,d,h),null!==l){_={node:null,nextReadIndex:0};do{null!==(_=this.readNextNode(l,_.nextReadIndex,i,r))&&p.appendChild(_.node)}while(null!==_)}return{node:p,nextReadIndex:n+e.SERIALIZED_NODE_CHUNK_LENGTH}}},{key:"unserialize",value:function(e,t){console.time("unserialize");var n=this.engine.getDocument(),i=this.engine.getTheme(),r=this.engine,a=n.createUnserializerBag(!t);n.clear(),n.disableEvents(),i.disableEvents(),r.disableEvents();var o=r.getLoader().getSelection();this.readFormNode(e,n,i,r,a),a.reinitReusedElements(),a.destroy(),r.enableEvents(),i.enableEvents(),n.enableEvents(),n.rebuildHashMap(),n.trigger("load"),n.repaginateInImmediateMode(),i.recomputeInImmediateMode(),null!==o&&(o.enableEvents(),o.synchronize()),function(e){for(var t=0,n=e.length;t<n;t++)i.trigger("property-changed",e[t].name,e[t].value);i.trigger("changed")}(i.enumerateProperties()),n.getHeader().updateHTMLContent(),n.getActionBar().updateDOMAttributes(),n.updateInstructionsTextAlignment(),n.updateLabelTextAlignment(),n.updateTextDirection(),n.updateLabelPlacement(),n.getEngine().getLoader().execCommand("form-name-changed"),n.getCaptcha().onCreated(),console.timeEnd("unserialize"),n.getEngine().getLoader().trigger("unserialize")}}]),e}();function Bu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(Fu,"UNSERIALIZER_VERSION","v0.4"),v()(Fu,"SERIALIZED_NODE_CHUNK_LENGTH",8),v()(Fu,"SERIALIZED_FORM_OVERHEAD_CHUNK_LENGTH",4),v()(Fu,"POS_NODE_TYPE_ID",0),v()(Fu,"POS_NODE_ID",1),v()(Fu,"POS_NODE_HASH",2),v()(Fu,"POS_NODE_PROPERTIES",3),v()(Fu,"POS_NODE_ERRORS",4),v()(Fu,"POS_NODE_CHILDREN",5),v()(Fu,"POS_NODE_COLSPAN",6),v()(Fu,"POS_NODE_HEIGHT",7),v()(Fu,"POS_FORM_HEADER",8),v()(Fu,"POS_FORM_CAPTCHA",9),v()(Fu,"POS_FORM_ACTIONBAR",10),v()(Fu,"POS_FORM_THEME",11);var Yu=function(e){u()(n,e);var t=Bu(n);function n(e,i){var r;return o()(this,n),r=t.call(this),v()(A()(r),"xhr",void 0),v()(A()(r),"file",void 0),v()(A()(r),"uploaded",null),v()(A()(r),"service",void 0),v()(A()(r),"bindedUploadProgress",void 0),v()(A()(r),"bindedReadyStateChange",void 0),v()(A()(r),"bindedErrorListener",void 0),v()(A()(r),"controlId",void 0),v()(A()(r),"uploaderInstanceIndex",void 0),v()(A()(r),"state",void 0),v()(A()(r),"packAsArchive",!1),v()(A()(r),"storedFileNameOnServer",void 0),v()(A()(r),"storedFilePathOnServer",void 0),v()(A()(r),"qosCleanupCallbacks",{}),v()(A()(r),"isImageChoice",!1),r.file=e,r.uploaded=0,r.service=i,r.state=O.tb.NOT_STARTED,r}return l()(n,[{key:"isOfflineForm",value:function(){return this.service.getDocument().getEngine().getLoader().getLoaderType()===O.B.VIEW&&this.service.getDocument().getEngine().getLoader().getViewFormEnvironmentContext()===O.wb.MOBILE_APP_OFFLINE}},{key:"onUploadProgress",value:function(e){var t=e.position||e.loaded,n=e.totalSize||e.total;this.trigger("progress",Math.floor(t/n*1e3)/10)}},{key:"onReadyStateChange",value:function(e){if(4===this.xhr.readyState){if(200===this.xhr.status){try{var t,n=this.xhr.responseText;if(!n)throw new Error("Server returned a empty response text");try{t=JSON.parse(n)}catch(e){throw new Error("Failed to decode as JSON the server response text!")}if(void 0===t.files)throw new Error('The "files" property is missing from server JSON response!');if(!t.files.length)throw new Error('The "files" property returned by server has no length!');if(1!==t.files.length)throw new Error('The length of the "files" property is different than 1. Unhandled scenario?');if(!t.files[0])throw new Error("The first file returned by the response should be an object!");if(void 0===t.files[0].error)throw new Error('The "files[0]" property returned by the server is missing a property called "error"!');if("SUCCES"!==t.files[0].error)throw new Error(t.files[0].error);this.storedFileNameOnServer=t.files[0].name,this.storedFilePathOnServer=t.files[0].uploadedFileFullPath||null,this.trigger("got-file-data",""),this.state=O.tb.SUCCESS,this.trigger("success")}catch(e){this.trigger("error",e),this.state=O.tb.ERROR}this.destroy(this.xhr)}else this.state=O.tb.ERROR,this.trigger("error",new Error("There was a response network problem while uploading the file with HTTP status code: ".concat(this.xhr.status)));this.destroy(this.xhr),this.xhr=void 0}}},{key:"onError",value:function(e){this.state=O.tb.ERROR,this.trigger("error"),this.destroy(this.xhr)}},{key:"createXHR",value:function(){var e=this,t=new XMLHttpRequest;return t.upload.addEventListener("progress",this.bindedUploadProgress=function(t){return e.onUploadProgress(t)},!0),t.addEventListener("readystatechange",this.bindedReadyStateChange=function(t){return e.onReadyStateChange(t)},!0),t.addEventListener("error",this.bindedErrorListener=function(t){return e.onError(t)},!0),t}},{key:"destroy",value:function(e){try{e.abort()}catch(t){}try{this.bindedUploadProgress&&e.upload.removeEventListener("progress",this.bindedUploadProgress,!0),this.bindedReadyStateChange&&e.removeEventListener("readystatechange",this.bindedReadyStateChange,!0),this.bindedErrorListener&&e.removeEventListener("error",this.bindedErrorListener,!0)}catch(t){}this.bindedReadyStateChange=null,this.bindedUploadProgress=null,this.bindedErrorListener=null}},{key:"upload",value:function(){if(this.isOfflineForm())i=this,this.service.getJQuery(),(r=new FileReader).addEventListener("load",(function(){var e=r.result.toString().split(",");i.trigger("got-file-data",e[1]),i.trigger("progress",100),i.state=O.tb.SUCCESS,i.trigger("success")})),i.trigger("start"),i.trigger("progress",0),r.readAsDataURL(i.file);else{void 0!==this.xhr&&this.destroy(this.xhr),this.state=O.tb.PROGRESS,this.trigger("start");var e=[];if(null!==this.getUploaderInstanceIndex()&&e.push("id=".concat(String(this.getUploaderInstanceIndex()))),null!==this.getControlId()){var t=this.isImageChoice?"choice_control_id":"control_id";e.push("".concat(t,"=").concat(String(this.getControlId())))}this.isArchived()&&e.push("multiple_uploads=1");var n=new FormData;n.append("file".concat(this.uploaderInstanceIndex),this.file),this.xhr=this.createXHR(),this.xhr.open("post",this.service.getUploadEndpoint()+(e.length?"&".concat(e.join("&")):""),!0),this.xhr.send(n),this.trigger("progress",0)}var i,r}},{key:"remove",value:function(){return function(e,t){if(void 0!==e.xhr)return t.Deferred((function(t){e.destroy(e.xhr),e.xhr=void 0,e.state=O.tb.REMOVED,e.trigger("remove"),t.resolve(!0)})).promise();if(O.tb.SUCCESS!==e.state||e.isOfflineForm())return t.Deferred((function(t){e.state=O.tb.REMOVED,e.trigger("remove"),t.resolve(!0)})).promise();var n=[];if(null!==e.getUploaderInstanceIndex()&&n.push("id=".concat(String(e.getUploaderInstanceIndex()))),null!==e.getControlId()){var i=e.isImageChoice?"choice_control_id":"control_id";n.push("".concat(i,"=").concat(String(e.getControlId())))}return n.push("action=remove"),e.isArchived()&&(n.push("multiple_uploads=1"),n.push("filename=".concat(encodeURIComponent(e.getStoredFileNameOnServer()||e.file.name)))),t.Deferred((function(i){t.get("".concat(e.service.getUploadEndpoint(),"&").concat(n.join("&"))).then((function(t){"Upload Removed"===t?(e.state=O.tb.REMOVED,e.trigger("remove"),i.resolve(!0)):i.reject(new Error("The server returned a unhandled response: ".concat(JSON.stringify(t))))})).fail((function(e){i.reject(e)}))})).promise()}(this,this.service.getJQuery())}},{key:"getSize",value:function(){return this.file.size}},{key:"getName",value:function(){return this.file.name}},{key:"withControlId",value:function(e){return this.controlId=e,this}},{key:"setIsImageChoice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.isImageChoice=e,this}},{key:"getControlId",value:function(){return this.controlId||null}},{key:"withUploaderInstanceIndex",value:function(e){return this.uploaderInstanceIndex=e,this}},{key:"getUploaderInstanceIndex",value:function(){return this.uploaderInstanceIndex||null}},{key:"getState",value:function(){return this.state}},{key:"withArchivePacking",value:function(e){return this.packAsArchive=!!e,this}},{key:"isArchived",value:function(){return this.packAsArchive}},{key:"getStoredFileNameOnServer",value:function(){return O.tb.SUCCESS===this.state&&this.storedFileNameOnServer||null}},{key:"getStoredFileURLFromCloud",value:function(){return O.tb.SUCCESS===this.state&&this.storedFilePathOnServer||null}},{key:"getMimeType",value:function(){return this.file.type}}]),n}(ir.a);function Vu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Hu=function(e){u()(n,e);var t=Vu(n);function n(e,i,r,a){var s;return o()(this,n),s=t.call(this),v()(A()(s),"jq",void 0),v()(A()(s),"document",void 0),v()(A()(s),"userId",void 0),v()(A()(s),"sessionKey",void 0),v()(A()(s),"qos",[]),v()(A()(s),"qosSchedulerThreadId",null),v()(A()(s),"mimeTypeService",void 0),s.jq=e,s.document=i,s.userId=r||null,s.sessionKey="cfr_".concat(+new Date,".").concat(~~(1e3*Math.random())),s.mimeTypeService=a,s}return l()(n,[{key:"getMimeType",value:function(e){return this.mimeTypeService.getMimeType(e)}},{key:"createUpload",value:function(e){return new Yu(e,this)}},{key:"getDocument",value:function(){return this.document}},{key:"getUploadEndpoint",value:function(){return"".concat("/uploadajax.php?uid=").concat(String(this.userId||""),"&fid=").concat(String(this.document.getId()||""),"&sessionKey=").concat(this.sessionKey,"&PHPSESSID=").concat(this.document.getEngine().getLoader().getLoaderDependency(O.M.SESSION_ID)||"","&context=").concat(this.document.getEngine().getLoader().getLoaderType()===O.B.VIEW?"form-view":"editor")}},{key:"getJQuery",value:function(){return this.jq}},{key:"onUploadQOSEnter",value:function(e){var t;t=this,e.on("success",e.qosCleanupCallbacks.success=function(){t.removeFromQOS(e)}),e.on("error",e.qosCleanupCallbacks.error=function(){t.removeFromQOS(e)}),e.on("remove",e.qosCleanupCallbacks.remove=function(){t.removeFromQOS(e)})}},{key:"onUploadQOSLeave",value:function(e){void 0!==e.qosCleanupCallbacks.success&&(e.off("success",e.qosCleanupCallbacks.success),e.qosCleanupCallbacks.success=void 0),void 0!==e.qosCleanupCallbacks.error&&(e.off("error",e.qosCleanupCallbacks.error),e.qosCleanupCallbacks.error=void 0),void 0!==e.qosCleanupCallbacks.remove&&(e.off("remove",e.qosCleanupCallbacks.remove),e.qosCleanupCallbacks.remove=void 0)}},{key:"addToQOS",value:function(e){for(var t=0,n=this.qos.length;t<n;t++)if(this.qos[t]===e)return e;return this.qos.push(e),this.onUploadQOSEnter(e),this.startQOSSchedulerThreadId(),e}},{key:"removeFromQOS",value:function(e){for(var t=0,n=this.qos.length;t<n;t++)if(this.qos[t]===e){this.onUploadQOSLeave(e),this.qos.splice(t,1);break}return e}},{key:"isQOSIdle",value:function(){return 0===this.qos.length}},{key:"qosGetNext",value:function(){for(var e=0,t=this.qos.length;e<t&&this.qos[e].getState()!==O.tb.PROGRESS;e++)if(this.qos[e].getState()===O.tb.NOT_STARTED)return this.qos[e];return null}},{key:"stopQOSSchedulerThreadId",value:function(){null!==this.qosSchedulerThreadId&&(window.clearInterval(this.qosSchedulerThreadId),this.qosSchedulerThreadId=null,console.warn("UploadsService: QOS stopped"),this.trigger("qos-done"))}},{key:"startQOSSchedulerThreadId",value:function(){var e;null===this.qosSchedulerThreadId&&((e=this).qosSchedulerThreadId=window.setInterval((function(){if(e.isQOSIdle())e.stopQOSSchedulerThreadId();else{var t=e.qosGetNext();t&&t.upload()}}),200),console.warn("UploadsService: QOS started"),e.trigger("qos-start"))}},{key:"flushQueuedUploads",value:function(){return function(e,t){return null===e.qosSchedulerThreadId?t.Deferred((function(e){e.resolve(!0)})).promise():t.Deferred((function(t){e.on("qos-done",(function n(){e.off("qos-done",n),t.resolve(!0)}))})).promise()}(this,this.jq)}},{key:"getSessionKey",value:function(){return this.sessionKey||null}},{key:"removeSubmittedUpload",value:function(e,t,n){if("string"!==typeof e||!e)throw new Error("Invalid argument sessionId: string expected!");if("string"!==typeof t||!t)throw new Error("Invalid argument: submissionId: string expected!");if("number"!==typeof n||n<=0)throw new Error("Invalid argument: uploaderInstanceIndex: number > 0 expected");return function(i,r){return i.Deferred((function(a){i.get("/uploadajax.php?action=remove&id=".concat(n,"&PHPSESSID=").concat(encodeURIComponent(e),"&submissionid=").concat(encodeURIComponent(t),"&sessionKey=").concat(encodeURIComponent(r.sessionKey))).then((function(e){"Upload Removed"===e?a.resolve(!0):a.reject(new Error(e))})).fail((function(e){a.reject("string"===typeof e?new Error(e):e)}))})).promise()}(this.jq,this)}}]),n}(ir.a),Gu=n(122),Wu=function(){function e(){o()(this,e),v()(this,"rootNode",void 0),v()(this,"dropdown",void 0),this.rootNode=document.createElement("div"),this.rootNode.setAttribute("data-role","dropdown-component"),this.dropdown=document.createElement("select"),this.rootNode.appendChild(this.dropdown),this.rootNode.appendChild(document.createElement("div"))}return l()(e,[{key:"getRoot",value:function(){return this.rootNode}},{key:"getSelectedIndex",value:function(){return this.dropdown.selectedIndex}},{key:"setSelectedIndex",value:function(e){return this.dropdown.selectedIndex=e,this}},{key:"addGroup",value:function(e,t){var n=document.createElement("optgroup");return n.setAttribute("data-id",e),n.setAttribute("label",t),this.dropdown.appendChild(n),this}},{key:"addOption",value:function(e,t,n,i){var r=document.createElement("option");if(r.text=e.text,r.value=e.value,r.disabled=!!e.isSeparator||!!e.disabled,r.hidden=!!e.hidden,r.setAttribute("data-is-default",e.isDefault),i)this.dropdown.add(r,i.previousSibling);else if(t)this.dropdown.add(r,t.nextSibling);else if(n){var a=this.dropdown.querySelector('optgroup[data-id="'.concat(n,'"]'));a&&a.appendChild(r)}else this.dropdown.add(r);return this}},{key:"getOptionByValue",value:function(e){return Object(Ur.a)(this.dropdown.options,(function(t){return t.value===e}))}},{key:"getOptionAt",value:function(e){return this.dropdown.options.item(e)}},{key:"removeOption",value:function(e){return this.dropdown.remove(e),this}},{key:"getValue",value:function(){return this.dropdown.value}},{key:"setValue",value:function(e){return this.dropdown.value=e,this}},{key:"hasValue",value:function(e){return Object(Yr.a)(this.dropdown.options,(function(t){return t.value===e}))}},{key:"getValues",value:function(){for(var e=[],t=0,n=this.dropdown.options.length;t<n;t++)e.push(this.dropdown.options[t].value);return e}},{key:"getTexts",value:function(){for(var e=[],t=0,n=this.dropdown.options.length;t<n;t++)e.push(this.dropdown.options[t].text);return e}},{key:"setValueByText",value:function(e){for(var t=0,n=this.dropdown.options.length;t<n;t++)if(this.dropdown.options[t].text===e){this.dropdown.selectedIndex=t;break}}},{key:"getText",value:function(){return this.dropdown.options[this.dropdown.selectedIndex].text}},{key:"clear",value:function(){for(;this.dropdown.options.length;)this.dropdown.remove(0);for(var e=this.dropdown.getElementsByTagName("optgroup");e.length;)this.dropdown.removeChild(e[0]);return this}},{key:"setOptions",value:function(e){this.clear();for(var t=0,n=e.length;t<n;t++)this.addOption(e[t]);return this}},{key:"setSelectedOptionByValue",value:function(e){this.dropdown.value=e}}]),e}(),ju=n(284),Ku=n(173),zu=n(285),Xu=n(286),Zu=n(69),qu=n(287),Ju=n(288),Qu=n(194),$u=n(283),ed=n(172),td=function(){function e(){o()(this,e)}return l()(e,null,[{key:"measureTextWidth",value:function(e,t){var n=window.getComputedStyle(t);this.temporarySpan.parentNode||(document.body.appendChild(this.temporarySpan),this.temporarySpan.style.cssText=" position: fixed; left: -20000px; top: -20000px; display: block; padding: 0 !important; "),this.temporarySpan.style.fontFamily=n.fontFamily,this.temporarySpan.style.fontSize=n.fontSize,this.temporarySpan.textContent=e;var i=this.temporarySpan.offsetWidth;return this.temporarySpan.textContent="",i}}]),e}();v()(td,"temporarySpan",document.createElement("span"));var nd=function(){function e(){o()(this,e)}return l()(e,null,[{key:"getId",value:function(){return this.id++,String(this.id)}}]),e}();v()(nd,"id",0);var id=function(){function e(){o()(this,e),v()(this,"root",void 0),v()(this,"value",void 0),v()(this,"caption",void 0),v()(this,"id",void 0),this.root=document.createElement("div"),this.root.setAttribute("data-role","readonly-keyword"),this.id=nd.getId(),this.root.setAttribute("data-id",this.id)}return l()(e,[{key:"getRoot",value:function(){return this.root}},{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){return this.value=e,this.onValueOrCaptionChanged(),this}},{key:"getCaption",value:function(){return this.caption}},{key:"setCaption",value:function(e){return this.caption=e,this.root.textContent=e,this.onValueOrCaptionChanged(),this}},{key:"getType",value:function(){return oo.a.TAG}},{key:"setType",value:function(e){throw new Error("Cannot set type of readonly tags")}},{key:"getId",value:function(){return this.id}},{key:"onValueOrCaptionChanged",value:function(){!this.caption&&this.value&&(this.root.textContent=this.value)}}]),e}(),rd=function(){function e(){var t=this;o()(this,e),v()(this,"root",void 0),v()(this,"input",void 0),v()(this,"id",void 0),v()(this,"placeholder",void 0),this.root=document.createElement("div"),this.root.setAttribute("data-role","editable-keyword"),this.input=document.createElement("input"),this.input.type="text",this.root.appendChild(this.input),this.id=nd.getId(),this.root.setAttribute("data-id",this.id),this.input.oninput=function(){t.adjustInputWidth()},this.adjustInputWidth()}return l()(e,[{key:"getRoot",value:function(){return this.root}},{key:"getValue",value:function(){return this.input.value}},{key:"setValue",value:function(e){return this.input.value=e,this.adjustInputWidth(),this}},{key:"getCaption",value:function(){return null}},{key:"setCaption",value:function(e){throw new Error("Editable keywords don't have caption")}},{key:"getType",value:function(){return oo.a.TEXT}},{key:"setType",value:function(e){throw new Error("Cannot set type of editable tags")}},{key:"getId",value:function(){return this.id}},{key:"adjustInputWidth",value:function(){this.placeholder?this.input.style.width="".concat(Math.max(td.measureTextWidth(this.input.value,this.input),td.measureTextWidth(this.placeholder,this.input))+15,"px"):this.input.style.width="".concat(td.measureTextWidth(this.input.value,this.input)+15,"px")}},{key:"getInput",value:function(){return this.input}},{key:"setPlaceholder",value:function(e){return this.placeholder=e,this.input.placeholder=String(e||"")||"",this}},{key:"getPlaceholder",value:function(){return this.placeholder}}]),e}(),ad=function(){function e(t){o()(this,e),v()(this,"root",void 0),v()(this,"configuration",void 0),v()(this,"valuesSection",void 0),v()(this,"dropdownSection",void 0),v()(this,"values",[]),v()(this,"editableNode",void 0),v()(this,"errorDOMNode",void 0),this.root=document.createElement("div"),this.root.setAttribute("data-role","tags-component"),this.valuesSection=document.createElement("div"),this.valuesSection.setAttribute("data-role","values"),this.dropdownSection=document.createElement("div"),this.dropdownSection.setAttribute("data-role","dropdown"),this.root.appendChild(this.valuesSection),this.root.appendChild(this.dropdownSection),this.configuration=t||e.createDefaultConfiguration(),this.initializeNativeDropdown(),this.initializeEditableNode(),t.editableTextBackground&&t.allowText&&this.root.setAttribute("data-text-has-background","1"),t.allowText&&t.textValidationCallback&&t.customErrorMessage&&(this.errorDOMNode=document.createElement("div"),this.errorDOMNode.setAttribute("data-role","error"),this.errorDOMNode.textContent=t.customErrorMessage,this.root.appendChild(this.errorDOMNode)),this.initEvents()}return l()(e,[{key:"getRoot",value:function(){return this.root}},{key:"getValue",value:function(){for(var e=[],t=0,n=this.values.length;t<n;t++){var i={};i.type=this.values[t].getType(),i.value=this.values[t].getValue();var r=this.values[t].getCaption();r&&(i.caption=r),i.value&&e.push(i)}return e}},{key:"initializeNativeDropdown",value:function(){var e=this;if(this.configuration.allowKeywords){this.root.setAttribute("data-expandable","1");var t=document.createElement("select");if(this.dropdownSection.appendChild(t),this.configuration.createValuesCallback){for(var n=this.configuration.createValuesCallback(),i=0,r=n.length;i<r;i++){var a=document.createElement("option");a.text=n[i].text||n[i].value,a.value=n[i].value,t.add(a)}var o=document.createElement("span");o.className="i123-add",this.dropdownSection.appendChild(o)}t.value=null,t.selectedIndex=-1,setTimeout((function(){t.value=null,t.selectedIndex=-1}),10),t.addEventListener("change",(function(n){var i=t.value,r=t.options[t.selectedIndex].text;t.value=null,t.selectedIndex=-1,e.appendReadonlyKeyword(i,r)}),!0),t.onmouseover=function(){t.value=null}}}},{key:"appendReadonlyKeyword",value:function(e,t){var n=(new id).setValue(e).setCaption(t);this.values.push(n),this.editableNode?this.valuesSection.insertBefore(n.getRoot(),this.editableNode.getRoot()):this.valuesSection.appendChild(n.getRoot()),this.onValuesChanged()}},{key:"initEvents",value:function(){var e=this;!function(t,n){t(e.valuesSection).on("click","[data-role=readonly-keyword]",(function(e){for(var i=t(this).attr("data-id"),r=0,a=n.values.length;r<a;r++)n.values[r].getId()===i&&(n.values.splice(r,1),a=n.values.length,this.parentNode.removeChild(this))})),e.configuration.allowText&&t(e.root).on("click",(function(t){1===t.which&&t.target===e.root&&"INPUT"!==t.target.nodeName&&"SELECT"!==t.target.nodeName&&(e.editableNode&&(e.editableNode.getInput()!==document.activeElement?e.editableNode.getInput().focus():e.appendKeywordOperation()),t.preventDefault(),t.stopPropagation())}))}(L.a.getJQuery(),this)}},{key:"onValuesChanged",value:function(){}},{key:"initializeEditableNode",value:function(){var e=this,t=L.a.getJQuery();this.configuration.allowText&&(this.editableNode=new rd,this.configuration.placeholder&&this.editableNode.setPlaceholder(this.configuration.placeholder),this.valuesSection.appendChild(this.editableNode.getRoot()),setTimeout((function(){e.editableNode.adjustInputWidth()}),100),this.editableNode.getInput().onblur=function(){e.appendKeywordOperation()},t(this.editableNode.getInput()).keydown((function(t){var n=t.keyCode||t.charCode;n!==V.a.KEY_TAB&&n!==V.a.KEY_ENTER||e.editableNode.getValue()&&(e.appendKeywordOperation(),t.preventDefault(),t.stopPropagation())})))}},{key:"appendKeywordOperation",value:function(){var e=this;if(this.editableNode.getValue()){if(this.configuration.textValidationCallback&&!this.configuration.textValidationCallback(this.editableNode.getValue()))return this.editableNode.getInput().value="",void this.showError();var t=new rd;this.appendEditableKeyword(t),t.setValue(this.editableNode.getValue()),this.editableNode.setValue(""),function(n,i){n(t.getInput()).on("input",(function(){""===this.value&&i.removeKeyword(t)})),n(t.getInput()).on("focus",(function(){n(t.getInput()).select()})),e.configuration.textValidationCallback&&n(t.getInput()).on("blur",(function(n){e.configuration.textValidationCallback(t.getValue())||(i.removeKeyword(t),i.showError())}))}(L.a.getJQuery(),this)}}},{key:"removeKeyword",value:function(e){var t=this.values[this.values.indexOf(e)-1]||this.values[this.values.indexOf(e)+1]||null;if(e.getRoot().parentNode)try{e.getRoot().parentNode.removeChild(e.getRoot())}catch(n){}this.values.splice(this.values.indexOf(e),1),t&&"editable-keyword"===t.getRoot().getAttribute("data-role")?t.getInput().focus():this.editableNode.getInput().focus()}},{key:"appendEditableKeyword",value:function(e){this.values.push(e),this.valuesSection.insertBefore(e.getRoot(),this.editableNode.getRoot()),this.onValuesChanged()}},{key:"showError",value:function(){var e=this;this.errorDOMNode&&(this.root.setAttribute("data-show-error",""),setTimeout((function(){e.root.removeAttribute("data-show-error")}),3e3))}},{key:"setValue",value:function(e){if(e)for(var t=0,n=e.length;t<n;t++){if(!this.configuration.allowText&&e[t].type===oo.a.TEXT)throw new Error("Tags of type text are not allowed!");if(!this.configuration.allowKeywords&&e[t].type===oo.a.TAG)throw new Error("Tags of type keyword are not allowed!")}for(var i=0,r=this.values.length;i<r;i++)this.values[i].getRoot().parentNode.removeChild(this.values[i].getRoot());var a,o;if(this.values=[],e)for(var s=0,l=e.length;s<l;s++)switch(e[s].type){case oo.a.TAG:(a=new id).setCaption(e[s].caption||e[s].value),a.setValue(e[s].value),this.editableNode?this.valuesSection.insertBefore(a.getRoot(),this.editableNode.getRoot()):this.valuesSection.appendChild(a.getRoot()),this.values.push(a);break;case oo.a.TEXT:o=new rd,this.editableNode?this.valuesSection.insertBefore(o.getRoot(),this.editableNode.getRoot()):this.valuesSection.appendChild(o.getRoot()),o.setValue(e[s].value),this.values.push(o)}}},{key:"generateSerializedValues",value:function(){for(var e="",t=0,n=this.values.length;t<n;t++)e=this.values[t].getType()===oo.a.TAG?"".concat(e+this.values[t].getValue().trim()," "):"".concat(e+(this.values[t].getCaption()?this.values[t].getCaption().trim():this.values[t].getValue()?this.values[t].getValue().trim():"")," ");return e=e.trim()}}],[{key:"createDefaultConfiguration",value:function(){return{componentName:"undefined",allowText:!0,editableTextBackground:!1,allowKeywords:!0,createValuesCallback:function(){return[{text:"Foo",value:"foo"}]}}}}]),e}(),od=n(161),sd=n(289),ld=n(290),cd=function(){function e(){var t=this;o()(this,e),v()(this,"rootNode",void 0),v()(this,"loadRequests",0),v()(this,"lazyLoaderThrottle",void 0),this.rootNode=document.createElement("div"),this.rootNode.setAttribute("data-role","page-loader"),this.rootNode.textContent="Loading data...",this.lazyLoaderThrottle=ie.a.create((function(){t.updateLoaderState()}),200)}return l()(e,[{key:"show",value:function(){this.rootNode.parentNode||(document.body.appendChild(this.rootNode),document.body.setAttribute("data-is-loading",""))}},{key:"hide",value:function(){this.rootNode.parentNode&&(document.body.removeChild(this.rootNode),document.body.removeAttribute("data-is-loading"))}},{key:"updateLoaderState",value:function(){this.loadRequests>0?this.show():this.hide()}},{key:"onLoadRequestStart",value:function(){this.loadRequests++,this.lazyLoaderThrottle()}},{key:"onLoadRequestEnd",value:function(){this.loadRequests--,this.loadRequests<0&&(this.loadRequests=0),this.updateLoaderState()}}]),e}(),ud=function(){function e(t){o()(this,e),v()(this,"root",void 0),v()(this,"textarea",void 0),v()(this,"textWithHighlightContainer",void 0),v()(this,"dropdownSection",void 0),v()(this,"nativeDropdown",void 0),v()(this,"configuration",void 0),this.root=document.createElement("div"),this.root.setAttribute("data-role","textarea-tags-component"),this.textarea=document.createElement("textarea"),this.textarea.setAttribute("data-role","text-container"),this.textWithHighlightContainer=document.createElement("div"),this.textWithHighlightContainer.className="container";var n=document.createElement("div");n.className="backdrop";var i=document.createElement("div");i.className="highlights",n.appendChild(i),this.textWithHighlightContainer.appendChild(n),this.textWithHighlightContainer.appendChild(this.textarea),this.dropdownSection=document.createElement("div"),this.dropdownSection.setAttribute("data-role","dropdown"),this.root.appendChild(this.textWithHighlightContainer),this.root.appendChild(this.dropdownSection),this.configuration=t||e.createDefaultConfiguration(),this.initializeNativeDropdown(),this.initializeTextarea(),this.addEventListeners()}return l()(e,[{key:"getRoot",value:function(){return this.root}},{key:"getValue",value:function(){return this.textarea.value}},{key:"setValue",value:function(e){return this.textarea.value=e,this}},{key:"addEventListeners",value:function(){var e=this;this.textarea.addEventListener("input",(function(){e.handleInputOnTextarea()})),this.textarea.addEventListener("scroll",(function(){e.handleScrollOnTextarea()}))}},{key:"initializeNativeDropdown",value:function(){var e=this;if(this.nativeDropdown=document.createElement("select"),this.dropdownSection.appendChild(this.nativeDropdown),this.configuration.createValuesCallback){for(var t=this.configuration.createValuesCallback(),n=0,i=t.length;n<i;n++){var r=document.createElement("option");r.text=t[n].text||t[n].value,r.value=t[n].value,this.nativeDropdown.add(r)}var a=document.createElement("span");a.className="i123-add",this.dropdownSection.appendChild(a)}this.nativeDropdown.value=null,this.nativeDropdown.selectedIndex=-1,setTimeout((function(){e.nativeDropdown.value=null,e.nativeDropdown.selectedIndex=-1}),10),this.nativeDropdown.addEventListener("change",(function(){var t=e.nativeDropdown.options[e.nativeDropdown.selectedIndex].value;e.nativeDropdown.value=null,e.nativeDropdown.selectedIndex=-1,e.appendFormInputText(e.encodeFormInputValue(t)),e.handleInputOnTextarea(),e.textarea.focus()}),!0),this.nativeDropdown.onmouseover=function(){e.nativeDropdown.value=null}}},{key:"initializeTextarea",value:function(){this.configuration.defaultValue&&(this.textarea.value=this.configuration.defaultValue)}},{key:"appendFormInputText",value:function(e){var t=this.textarea.value;t+=" ".concat(e," "),this.textarea.value=t}},{key:"encodeFormInputValue",value:function(e){return"[%".concat(e,"%]")}},{key:"handleInputOnTextarea",value:function(){var e=this,t=L.a.getJQuery(),n=this.textarea.value;this.textWithHighlightContainer.querySelector(".highlights").innerHTML=this.applyHighlights(n),setTimeout((function(){e.textarea.style.cssText="height:auto; padding:0";var n=e.textarea.scrollHeight,i=e.textarea.scrollHeight+20;t(e.textWithHighlightContainer).find(".backdrop")[0].style.cssText="height:".concat(n,"px"),e.textWithHighlightContainer.style.cssText="height:".concat(i,"px"),e.textarea.style.cssText="height:".concat(n,"px")}),0)}},{key:"applyHighlights",value:function(e){if(this.configuration.highlightRegex){var t=new RegExp(this.configuration.highlightRegex,"g");return e.replace(/\n$/g,"\n\n").replace(t,"<mark>$&</mark>")}}},{key:"handleScrollOnTextarea",value:function(){var e=L.a.getJQuery(),t=e(this.textarea).scrollTop();e(this.textWithHighlightContainer.querySelector(".backdrop")).scrollTop(t)}},{key:"updateTextarea",value:function(){this.handleInputOnTextarea()}},{key:"overwriteDefaultValue",value:function(){this.textarea.value=""}}],[{key:"createDefaultConfiguration",value:function(){return{createValuesCallback:function(){return[{text:"",value:"",type:oo.a.TAG}]}}}}]),e}(),dd=function(){function e(t,n,i){o()(this,e),v()(this,"jq",void 0),v()(this,"document",void 0),v()(this,"manager",void 0),v()(this,"isResizing",!1),v()(this,"targetElementThatIsResizing",void 0),v()(this,"targetEdgeThatIsResizing",null),v()(this,"visualResizerHandleElement",null),v()(this,"initialMouseCoordinatesWhenDragStarted",{left:0,top:0}),this.jq=t,this.document=n,this.manager=i,this.targetElementThatIsResizing=null,this.targetEdgeThatIsResizing=null,this.visualResizerHandleElement=window.document.createElement("div"),this.visualResizerHandleElement.setAttribute("data-role","mouse-resizer"),this.init()}return l()(e,[{key:"canBeExecutedWhenOperationTypeIs",value:function(e,t,n){switch(e){case O.m.NONE:if(!n.shiftKey&&(t===O.O.MOUSE_MOVE||t===O.O.MOUSE_DOWN))return!0;break;case O.m.ELEMENT_RESIZE:return!0}return!1}},{key:"handleMouseMove",value:function(e){return this.isResizing?O.N.LEFT!==qe.a.getMouseButtonFromEvent(e)?(this.abortOperation(),!1):this.handleMouseMoveWhenResizingIsActive(e):this.handleMouseMoveWhenResizingIsInactive(e)}},{key:"handleMouseDown",value:function(e){var t=e.target||e.srcElement;if(null===this.targetEdgeThatIsResizing||null===this.targetElementThatIsResizing||this.isResizing||!this.jq(t).is("#form [data-role=page] > [data-role=mouse-resizer]"))return!1;switch(this.isResizing=!0,this.document.getEngine().getLoader().getLoaderDependency(O.M.UNDO_SERVICE).trigger("user-action","resize-start"),this.initialMouseCoordinatesWhenDragStarted.left=e.clientX,this.initialMouseCoordinatesWhenDragStarted.top=e.clientY,this.targetEdgeThatIsResizing){case O.o.TOP:case O.o.BOTTOM:this.manager.setCurrentOperationType(O.m.ELEMENT_RESIZE,{"data-drag-direction":"vertical"});break;case O.o.LEFT:case O.o.RIGHT:this.manager.setCurrentOperationType(O.m.ELEMENT_RESIZE,{"data-drag-direction":"horizontal"});break;default:this.manager.setCurrentOperationType(O.m.ELEMENT_RESIZE)}return!0}},{key:"handleMouseUp",value:function(e){var t=e.target||e.srcElement;if(this.isResizing){this.targetElementThatIsResizing.getTypeId()===b.a.CONTAINER_TYPE_DIV&&this.targetElementThatIsResizing.getColspan()===this.targetElementThatIsResizing.getParentPage().getColspan()&&this.targetElementThatIsResizing.unwrap(),this.cancelTheResizingMechanism(),this.manager.setCurrentOperationType(O.m.NONE);var n=null,i=t.attributes["data-role"];return i&&"control"===i.value&&t.attributes["data-type"]&&(n=t.attributes["data-type"].value),i&&"container"===i.value&&t.childNodes.length>0&&t.childNodes[0].attributes["data-type"]&&(n=t.childNodes[0].attributes["data-type"].value),this.document.getEngine().getLoader().execCommand("track-event","control_resize_".concat(n)),this.document.getEngine().getLoader().execCommand("track-event","control_resize_element_".concat(n)),this.document.getEngine().getLoader().getLoaderDependency(O.M.UNDO_SERVICE).trigger("user-action","resize-end"),!0}return!1}},{key:"handleMouseMoveWhenResizingIsActive",value:function(e){var t=0,n=e.clientX,i=e.clientY;switch(this.targetEdgeThatIsResizing){case O.o.TOP:t=i-this.initialMouseCoordinatesWhenDragStarted.top;break;case O.o.RIGHT:t=this.initialMouseCoordinatesWhenDragStarted.left-n;break;case O.o.BOTTOM:t=this.initialMouseCoordinatesWhenDragStarted.top-i;break;case O.o.LEFT:t=n-this.initialMouseCoordinatesWhenDragStarted.left}var r=this.targetElementThatIsResizing.getColspan(),a=this.targetElementThatIsResizing.getHeight();if(this.document.getEngine().getLoader().execCommand("resize-element",this.targetElementThatIsResizing,this.targetEdgeThatIsResizing,t),r!==this.targetElementThatIsResizing.getColspan()||a!==this.targetElementThatIsResizing.getHeight()){this.handleResizingInitialization(this.targetElementThatIsResizing.getRootNode(),e,this.targetEdgeThatIsResizing),this.isResizing=!0;var o=this.visualResizerHandleElement.getBoundingClientRect();this.initialMouseCoordinatesWhenDragStarted.left=o.left+~~(o.width/2),this.initialMouseCoordinatesWhenDragStarted.top=o.top+~~(o.height/2)}return e.stopPropagation(),e.preventDefault(),!0}},{key:"handleMouseMoveWhenResizingIsInactive",value:function(e){var t=e.target||e.srcElement||null;return!(!qe.a.canMakeResize||null===t)&&this.handleResizingInitialization(t,e)}},{key:"handleResizingInitialization",value:function(t,n,i){return function(t,r,a){try{var o={left:(_=a.getBoundingClientRect()).left,right:_.right,top:_.top,bottom:_.bottom,width:_.width,height:_.height},s=t(a).closest("[data-hash]").attr("data-hash"),l=t("[data-role=page]").attr("data-hash");if(!s||l==s)return!1;var c,u={left:n.clientX,top:n.clientY},d=function(t){var n,s,l,c=r.document.getElementByHash(t),d=c.getFirstParentContainer();if(d&&d.getTypeId()){if(d.getTypeId()===b.a.CONTAINER_TYPE_REPEATABLE_GROUP)return c;if(n=c.getParent().getFirstChild()===c,s=c.getParent().getLastChild()===c,n||s)switch(l=function(e){return{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width,height:e.height}}(d.getRootNode().getBoundingClientRect()),!0){case n&&i===O.o.LEFT:case s&&i===O.o.RIGHT:a=d.getRootNode(),o=l;break;case n&&s:e.DISTANCE_HORIZONTAL_PRIORITY*(u.left-o.left)<=8||e.DISTANCE_HORIZONTAL_PRIORITY*(o.left+o.width-u.left)<=8?(a=d.getRootNode(),o=l):d=null;break;case n:e.DISTANCE_HORIZONTAL_PRIORITY*(u.left-o.left)<=8?(a=d.getRootNode(),o=l):d=null;break;case s:e.DISTANCE_HORIZONTAL_PRIORITY*(o.left+o.width-u.left)<=8?(a=d.getRootNode(),o=l):d=null;break;default:d=null}else d=null}return d||c}(s),p=[{edge:O.o.RIGHT,distance:e.DISTANCE_HORIZONTAL_PRIORITY*(o.left+o.width-u.left)},{edge:O.o.BOTTOM,distance:e.DISTANCE_VERTICAL_PRIORITY*(o.top+o.height-u.top)},{edge:O.o.LEFT,distance:e.DISTANCE_HORIZONTAL_PRIORITY*(u.left-o.left)}];if(void 0===i){if(p.sort((function(e,t){return e.distance-t.distance})),c=p[0].edge,p[0].distance>10){if(d.getTypeId()===b.a.CONTROL_TYPE_LIKERT_SCALE||d.getTypeId()===b.a.CONTAINER_TYPE_LIKERT_WRAPPER)return!1;c=r.getDefaultTargetEdge(d)}}else c=i;var h=d.getResizingCapability();switch(c){case O.o.TOP:if(h!==O.db.TOP_ONLY&&h!==O.db.TOP_AND_BOTTOM&&h!==O.db.ALL)return r.cancelTheResizingMechanism(),!1;break;case O.o.RIGHT:if(h!==O.db.RIGHT_ONLY&&h!==O.db.LEFT_AND_RIGHT&&h!==O.db.ALL)return r.cancelTheResizingMechanism(),!1;break;case O.o.BOTTOM:if(h!==O.db.BOTTOM_ONLY&&h!==O.db.TOP_AND_BOTTOM&&h!==O.db.ALL)return r.cancelTheResizingMechanism(),!1;break;case O.o.LEFT:if(h!==O.db.LEFT_ONLY&&h!==O.db.LEFT_AND_RIGHT&&h!==O.db.ALL)return r.cancelTheResizingMechanism(),!1}switch(c){case O.o.TOP:r.visualResizerHandleElement.setAttribute("data-resizer-orientation","horizontal"),r.visualResizerHandleElement.setAttribute("data-target-edge","top"),r.visualResizerHandleElement.style.top="".concat(o.top,"px"),r.visualResizerHandleElement.style.left="".concat(o.left,"px"),r.visualResizerHandleElement.style.width="".concat(o.width,"px"),r.visualResizerHandleElement.style.height="";break;case O.o.RIGHT:r.visualResizerHandleElement.setAttribute("data-resizer-orientation","vertical"),r.visualResizerHandleElement.setAttribute("data-target-edge","right"),r.visualResizerHandleElement.style.top="".concat(o.top,"px"),r.visualResizerHandleElement.style.left="".concat(o.right,"px"),r.visualResizerHandleElement.style.height="".concat(o.height,"px"),r.visualResizerHandleElement.style.width="";break;case O.o.BOTTOM:r.visualResizerHandleElement.setAttribute("data-resizer-orientation","horizontal"),r.visualResizerHandleElement.setAttribute("data-target-edge","bottom"),r.visualResizerHandleElement.style.top="".concat(o.bottom,"px"),r.visualResizerHandleElement.style.left="".concat(o.left,"px"),r.visualResizerHandleElement.style.width="".concat(o.width,"px"),r.visualResizerHandleElement.style.height="";break;case O.o.LEFT:r.visualResizerHandleElement.setAttribute("data-resizer-orientation","vertical"),r.visualResizerHandleElement.setAttribute("data-target-edge","left"),r.visualResizerHandleElement.style.top="".concat(o.top,"px"),r.visualResizerHandleElement.style.left="".concat(o.left,"px"),r.visualResizerHandleElement.style.height="".concat(o.height,"px"),r.visualResizerHandleElement.style.width=""}r.setResizingMechanismTarget(d,c)}catch(n){r.document.normalize()}var _}(this.jq,this,t)}},{key:"cancelTheResizingMechanism",value:function(){this.visualResizerHandleElement.parentNode&&this.visualResizerHandleElement.parentNode.removeChild(this.visualResizerHandleElement),this.targetElementThatIsResizing=null,this.targetEdgeThatIsResizing=null,this.isResizing=!1,document.body.removeAttribute("data-drag-direction")}},{key:"setResizingMechanismTarget",value:function(e,t){var n;this.visualResizerHandleElement.parentNode!==(n=e.getParentPage().getRootNode())&&(n?n.appendChild(this.visualResizerHandleElement):this.visualResizerHandleElement.parentNode&&this.visualResizerHandleElement.parentNode.removeChild(this.visualResizerHandleElement)),this.targetElementThatIsResizing=e,this.targetEdgeThatIsResizing=t,this.isResizing=!1}},{key:"handleDocumentBodyScroll",value:function(){this.cancelTheResizingMechanism()}},{key:"init",value:function(){var e;(e=this).manager.on("resize-end",(function(){try{e.document.normalize(),console.log("resize: normalization completed")}catch(t){throw console.warn("Failed to perform document normalization after resize operation completed"),t}}))}},{key:"abortOperation",value:function(){this.cancelTheResizingMechanism(),this.manager.setCurrentOperationType(O.m.NONE)}},{key:"getDefaultTargetEdge",value:function(e){var t=e.getTypeId(),n=e.getForm().getProperty("options.direction"),i=e.getForm().getProperty("options.labelPlacement");if(i===O.A.TOP_ALIGNED&&n===O.G.RIGHT_TO_LEFT)return O.o.LEFT;switch(t){case b.a.CONTROL_TYPE_FORM_HEADER:case b.a.CONTROL_TYPE_HEADING:case b.a.CONTAINER_TYPE_REPEATABLE_GROUP:case b.a.CONTAINER_TYPE_REPEATABLE:case b.a.CONTROL_TYPE_HTML_BLOCK:case b.a.CONTROL_TYPE_SIGNATURE:case b.a.CONTROL_TYPE_WIDGET_PDF:case b.a.CONTROL_TYPE_WIDGET_FACEBOOK:case b.a.CONTROL_TYPE_IMAGE:case b.a.CONTROL_TYPE_WIDGET_VIDEO:case b.a.CONTROL_TYPE_SOCIAL:switch(n){case O.G.RIGHT_TO_LEFT:return O.o.LEFT;case O.G.LEFT_TO_RIGHT:default:return O.o.RIGHT}default:switch(e.getRendererType()){case O.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL:case O.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD:return O.o.LEFT;case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL:case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD:case O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL:case O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD:case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:case O.r.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:case O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:case O.r.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:case O.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:case O.r.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:case O.r.CUSTOM_CONTROL_RENDERER:default:try{if(i===O.A.RIGHT_ALIGNED&&e.getProperty("label.isCompactField")&&n===O.G.RIGHT_TO_LEFT)return O.o.LEFT}catch(r){}return O.o.RIGHT}}}}]),e}();v()(dd,"DISTANCE_VERTICAL_PRIORITY",1),v()(dd,"DISTANCE_HORIZONTAL_PRIORITY",1);var pd=n(65),hd=function(){function e(t,n,i){var r;o()(this,e),v()(this,"DRAG_AND_DROP_START_AFTER_INITIAL_DISTANCE",20),v()(this,"jq",void 0),v()(this,"document",void 0),v()(this,"manager",void 0),v()(this,"isDragging",void 0),v()(this,"dragOverlay",void 0),v()(this,"dragSource",void 0),v()(this,"createElementTypeId",void 0),v()(this,"dragExistingElementHash",void 0),v()(this,"dragExistingElement",void 0),v()(this,"initialMouseDownPosition",{left:0,top:0}),v()(this,"dropReferenceElement",void 0),v()(this,"dropReferenceEdge",void 0),v()(this,"dropEdgeIndicator",void 0),v()(this,"moveDropReferenceToDirectRowFromThePageDebouncer",void 0),v()(this,"isDuplicateInsteadOfDrag",!1),this.jq=t,this.document=n,this.manager=i,this.isDragging=!1,this.dragOverlay=window.document.createElement("div"),this.dragOverlay.setAttribute("data-role","drag-overlay"),this.dragSource=null,this.createElementTypeId=null,this.dropReferenceElement=null,this.dropReferenceEdge=null,this.dropEdgeIndicator=window.document.createElement("div"),this.dropEdgeIndicator.setAttribute("data-role","drop-edge-indicator"),this.dragExistingElement=null,(r=this).moveDropReferenceToDirectRowFromThePageDebouncer=ie.a.create((function(){r.moveDropReferenceToDirectRowFromThePage()}),1500)}return l()(e,[{key:"canBeExecutedWhenOperationTypeIs",value:function(e,t,n){switch(e){case O.m.NONE:if(!n.shiftKey&&(t===O.O.MOUSE_MOVE||t===O.O.MOUSE_DOWN))return!0;break;case O.m.DRAG:return!0}return!1}},{key:"handleMouseMove",value:function(e){return O.N.LEFT!==qe.a.getMouseButtonFromEvent(e)&&(this.isDragging||this.dragOverlay||this.dragSource)?(this.abortOperation(),!1):this.isDragging?O.N.LEFT!==qe.a.getMouseButtonFromEvent(e)?(this.abortOperation(),!1):this.handleMouseMoveWhileDragAndDropIsActive(e):this.handleMouseMoveWhileDragAndDropIsInactive(e)}},{key:"handleMouseMoveWhileDragAndDropIsInactive",value:function(e){if(null===this.dragSource)return!1;var t={left:e.clientX,top:e.clientY};return S.a.computeDistance(this.initialMouseDownPosition,t)>=this.DRAG_AND_DROP_START_AFTER_INITIAL_DISTANCE&&(this.isDuplicateInsteadOfDrag=e.ctrlKey||e.metaKey,this.prepareDragAndDropOperation(t),!0)}},{key:"prepareDragAndDropOperation",value:function(e){var t;this.dragOverlay.style.left="".concat(e.left,"px"),this.dragOverlay.style.top="".concat(e.top,"px"),this.manager.setCurrentOperationType(O.m.DRAG);var n=null===(t=this.document.getEngine().getLoader().getSelection().getVirtualControl())||void 0===t?void 0:t.getElements();n?Object(H.a)(n,(function(e){e.getRootNode().setAttribute("data-is-drag-source","1")})):this.dragExistingElement&&this.dragExistingElement.getRootNode().setAttribute("data-is-drag-source","1"),this.updateDragAndDropOverlayContent(),this.isDragging=!0,this.document.getEngine().getLoader().getLoaderDependency(O.M.UNDO_SERVICE).trigger("user-action","drag-and-drop-start")}},{key:"updateDragAndDropOverlayContent",value:function(){this.dragOverlay.innerHTML="Loading...";var e,t={category:"basic",icon:"i123-image",isContainer:!1,keywords:"element",name:"Element",typeId:this.createElementTypeId,isVirtual:!1,index:99999,accessibilityFields:O.v.NONE};if(this.dragExistingElement)e=JSON.parse(JSON.stringify(this.dragExistingElement._static().getConfiguration()))||t,this.isDuplicateInsteadOfDrag=this.isDuplicateInsteadOfDrag&&this.dragExistingElement&&this.dragExistingElement.isDuplicatable(),e.isMoveOperation=!0,e.isDuplicateOperation=this.isDuplicateInsteadOfDrag;else{var n=this.document.getEngine().getFactory().getItemStaticClassByTypeNameOrTypeId(this.createElementTypeId);(e=n.getConfiguration&&JSON.parse(JSON.stringify(n.getConfiguration()))||t).isMoveOperation=!1}!function(t){var n,i,r=t.document.getEngine().getLoader().getSelection().getVirtualControl(),a=(null===r||void 0===r?void 0:r.getElements().length)||0,o="/modules/Typescript/Form/resources/drag-and-drop-overlay.html";if(null===r||void 0===r||null===(n=r.getElements()[0])||void 0===n?void 0:n.hasProperty("label.labelText")){var s=r.getElements()[0];e.labelText=s.getProperty("label.labelText"),e.icon=s._static().getConfiguration().icon}!r&&(null===(i=t.dragExistingElement)||void 0===i?void 0:i.hasProperty("label.labelText"))&&(e.labelText=t.dragExistingElement.getProperty("label.labelText")),t.dragOverlay.classList.add("drag-overlay"),a>1&&(t.dragOverlay.classList.add("drag-overlay--multiple"),o="/modules/Typescript/Form/resources/drag-and-drop-multiple-elements.html",e.badgeText=a<100?a.toString():"99+"),t.document.getEngine().getResourceManager().get(o).then((function(n){var i=new Nt.a(n);e.isMac=!x.a.meetsRequirements("mac * desktop * *"),t.dragOverlay.innerHTML=i.parse(e),t.document.getEngine().getI18n().translateDOMNode(t.dragOverlay),document.body.appendChild(t.dragOverlay)}))}(this)}},{key:"handleMouseMoveWhileDragAndDropIsActive",value:function(e){if(!this.isDragging)return!1;var t={left:e.clientX,top:e.clientY};this.dragOverlay.style.left="".concat(t.left,"px"),this.dragOverlay.style.top="".concat(t.top,"px");var n=e.target||e.srcElement;return this.document.getEngine().getJQuery()(n).is("#form [data-role=page] [data-role=page-body], #form [data-role=page] [data-role=page-body] *, #form [data-role=repeatable-group] > [data-role=body]")?(this.document.getRootNode().removeAttribute("data-no-dnd-reference"),!!n&&function(e,i){var r,a,o,s=!1;if(!e(n).is("[data-role=page-body] [data-role=control][data-hash], [data-role=page-body] [data-role=container][data-type=repeatable][data-hash], [data-role=page-body] [data-role=container][data-type=virtual-form-table-row][data-hash], [data-role=page-body] [data-role=container][data-type=repeatable-group][data-hash] > [data-role=body], [data-role=page-body] [data-role=container][data-type=likert-wrapper][data-hash]")&&!(s=e(n).is("[data-role=page-body]:empty")))return!1;if(e(n).is("div[data-role=container][data-type=likert-wrapper] div[data-role=input-row] *"))return!1;if(!(r=s?e(n).parent("[data-role=page][data-type=page]").attr("data-hash"):e(n).closest("[data-hash]").attr("data-hash")))return!1;if(!(a=i.document.getElementByHash(r)))return!1;if(!function(){if(i.dragSource===O.l.STARTED_FROM_EDITOR_PANEL){var t,n=i.document.getEngine().getFactory().getItemStaticClassByTypeNameOrTypeId(i.createElementTypeId),o=null;if(n&&n.getDropDestinationCSSSelector&&null!==(t=n.getDropDestinationCSSSelector()))return e(a.getRootNode()).closest(t).each((function(){o=this})),!!o&&(!!o.hasAttribute("data-hash")&&(!!(r=o.getAttribute("data-hash"))&&!!(a=i.document.getElementByHash(r))))}return!0}())return!1;if(s)o=a.getHeaderContainerDOMNode().getBoundingClientRect(),i.setDropTargetElement(a,O.o.TOP,o);else{var l=i.getElementClosestEdge(a,t);if(null===l)return!1;a.getTypeId()===pd.a.CONTAINER_TYPE_ROW?i.setDropTargetElementWhenCursorIsDirectlyOverARowElement(a,l,t):(o=a.getRootNode().getBoundingClientRect(),i.setDropTargetElement(a,l.edge,o))}return!0}(this.jq,this)):(this.document.getRootNode().setAttribute("data-no-dnd-reference",""),this.dropReferenceElement=null,this.dropReferenceEdge=null,!1)}},{key:"getElementClosestEdge",value:function(e,t){var n,i,r;return r=e.getRootNode().getBoundingClientRect(),i=[],(n=(this.dragSource===O.l.STARTED_FROM_EDITOR_PANEL?(this.document.getEngine().getFactory().getItemStaticClassByTypeNameOrTypeId(this.createElementTypeId)||{}).getDropSupportedEdges?this.document.getEngine().getFactory().getItemStaticClassByTypeNameOrTypeId(this.createElementTypeId).getDropSupportedEdges():null:this.dragExistingElement._static().getDropSupportedEdges())||[O.o.TOP,O.o.RIGHT,O.o.BOTTOM,O.o.LEFT]).indexOf(O.o.TOP)>-1&&i.push({distance:t.top-r.top,edge:O.o.TOP}),n.indexOf(O.o.LEFT)>-1&&i.push({distance:t.left-r.left,edge:O.o.LEFT}),n.indexOf(O.o.RIGHT)>-1&&i.push({distance:r.left+r.width-t.left,edge:O.o.RIGHT}),n.indexOf(O.o.BOTTOM)>-1&&i.push({distance:r.top+r.height-t.top,edge:O.o.BOTTOM}),i.length?(i.sort((function(e,t){return e.distance-t.distance})),i[0]):null}},{key:"setDropTargetElementWhenCursorIsDirectlyOverARowElement",value:function(e,t,n){var i=e.getRootNode().getBoundingClientRect();if(t.distance<10||this.createElementTypeId===pd.a.CONTROL_TYPE_PAGE_BREAK)this.setDropTargetElement(e,t.edge,i);else{for(var r,a=e.getChildren()||[],o=null,s=null,l=0,c=a.length;l<c;l++)null!==(r=this.getElementClosestEdge(a[l],n))&&(null===o||r.distance<s.distance)&&(o=a[l],s=r);null===o?this.setDropTargetElement(e,t.edge,i):this.setDropTargetElement(o,s.edge,o.getRootNode().getBoundingClientRect())}}},{key:"setDropTargetElement",value:function(e,t,n){var i=e.getTypeId()===pd.a.CONTAINER_TYPE_PAGE;if(e!==this.dragExistingElement)if(this.dropReferenceElement=e,this.dropReferenceEdge=t,i)this.dropEdgeIndicator.style.width="".concat(n.width,"px"),this.dropEdgeIndicator.style.top="".concat(n.top+n.height,"px"),this.dropEdgeIndicator.style.left="".concat(n.left,"px"),this.dropEdgeIndicator.style.height="",this.dropEdgeIndicator.setAttribute("data-edge","top"),this.dropEdgeIndicator.parentNode!==this.dropReferenceElement.getHeaderContainerDOMNode()&&this.dropReferenceElement.getHeaderContainerDOMNode().appendChild(this.dropEdgeIndicator);else{switch(t){case O.o.TOP:this.dropEdgeIndicator.style.width="".concat(n.width,"px"),this.dropEdgeIndicator.style.top="".concat(n.top,"px"),this.dropEdgeIndicator.style.left="".concat(n.left,"px"),this.dropEdgeIndicator.style.height="",this.dropEdgeIndicator.setAttribute("data-edge","top");break;case O.o.BOTTOM:this.dropEdgeIndicator.style.width="".concat(n.width,"px"),this.dropEdgeIndicator.style.top="".concat(n.top+n.height,"px"),this.dropEdgeIndicator.style.left="".concat(n.left,"px"),this.dropEdgeIndicator.style.height="",this.dropEdgeIndicator.setAttribute("data-edge","bottom");break;case O.o.RIGHT:this.dropEdgeIndicator.style.left="".concat(n.left+n.width,"px"),this.dropEdgeIndicator.style.top="".concat(n.top,"px"),this.dropEdgeIndicator.style.height="".concat(n.height,"px"),this.dropEdgeIndicator.style.width="",this.dropEdgeIndicator.setAttribute("data-edge","right");break;default:case O.o.LEFT:this.dropEdgeIndicator.style.left="".concat(n.left,"px"),this.dropEdgeIndicator.style.top="".concat(n.top,"px"),this.dropEdgeIndicator.style.height="".concat(n.height,"px"),this.dropEdgeIndicator.style.width="",this.dropEdgeIndicator.setAttribute("data-edge","left")}this.dropEdgeIndicator.parentNode!==this.dropReferenceElement.getParentPage().getRootNode()&&this.dropReferenceElement.getParentPage().getRootNode().appendChild(this.dropEdgeIndicator),this.moveDropReferenceToDirectRowFromThePageDebouncer()}else this.cancelDropTargetIndicator()}},{key:"cancelDropTargetIndicator",value:function(){this.dropReferenceElement=null,this.dropReferenceEdge=null,this.dropEdgeIndicator.parentNode&&this.dropEdgeIndicator.parentNode.removeChild(this.dropEdgeIndicator)}},{key:"handleMouseDown",value:function(e){if(O.N.LEFT!==qe.a.getMouseButtonFromEvent(e))return!1;var t=e.target||e.srcElement;return!!t&&(this.jq(t).is("[data-role=container][data-type=likert-wrapper] *")&&(t=this.jq(t).closest("[data-role=container][data-type=likert-wrapper]").get(0)),function(n,i){var r;switch(!0){case n(t).is("[data-role=page-header], [data-role=page-header] *, [data-role=page-footer], [data-role=page-footer] *"):return!1;case n(t).is("#editor [data-role=control][data-type-id], #editor[data-role=container][data-type-id], #editor [data-role=control][data-type-id] *, #editor[data-role=container][data-type-id] *"):if(!(r=~~n(t).closest("[data-type-id]").attr("data-type-id")))return!1;i.createElementTypeId=r,i.dragSource=O.l.STARTED_FROM_EDITOR_PANEL,i.dragExistingElementHash=null,i.dragExistingElement=null;break;case n(t).is("#form [data-role=control][data-hash], #form [data-role=container][data-hash]"):if(i.createElementTypeId=null,i.dragSource=O.l.STARTED_FROM_FORM,i.dragExistingElementHash=n(t).attr("data-hash"),i.dragExistingElement=i.document.getElementByHash(i.dragExistingElementHash),i.dragExistingElement&&i.dragExistingElement.getTypeId()!==pd.a.CONTAINER_TYPE_ROW){if(!i.dragExistingElement.isDragable())return i.createElementTypeId=null,i.dragExistingElementHash=null,i.dragSource=null,!1;break}default:return i.createElementTypeId=null,i.dragSource=null,i.dragExistingElementHash=null,i.dragExistingElement=null,!1}return i.initialMouseDownPosition.left=e.clientX,i.initialMouseDownPosition.top=e.clientY,e.preventDefault(),e.stopPropagation(),!0}(this.jq,this))}},{key:"cancelTheDragAndDropMechanism",value:function(){this.document.getEngine().getLoader().getSelection().rebuildVirtualSelectionControl(),this.dragExistingElementHash&&this.document.getElementByHash(this.dragExistingElementHash).getRootNode().removeAttribute("data-is-drag-source"),this.document.getEngine().getJQuery()("[data-is-drag-source]").removeAttr("data-is-drag-source"),this.createElementTypeId=null,this.dragSource=null,this.dragExistingElementHash=null,this.dragExistingElement=null,this.isDragging=!1,this.isDuplicateInsteadOfDrag=!1,this.dragOverlay.parentNode&&this.dragOverlay.parentNode.removeChild(this.dragOverlay),this.document.getRootNode().removeAttribute("data-no-dnd-reference"),this.cancelDropTargetIndicator(),this.manager.setCurrentOperationType(O.m.NONE)}},{key:"isValidDropEvent",value:function(e){var t=e.target||e.srcElement,n=this.jq(t).is(["#form [data-role=control][data-hash]","#form [data-role=container][data-hash]","#form [data-role=virtual-form-table-row][data-hash]","#form [data-role=page] > [data-role=page-body]:empty","#form [data-role=page] > [data-role=page-header]","#form [data-role=page] > [data-role=page-header] *","#form [data-role=page] > [data-role=page-footer]","#form [data-role=page] > [data-role=page-footer] *","#form [data-role=container][data-type=repeatable-group] > [data-role=body]"].join(","))&&null!==this.dropReferenceElement&&null!==this.dropReferenceEdge;return n||console.warn(t),n}},{key:"handleMouseUp",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var n=this.dragSource===O.l.STARTED_FROM_FORM&&(e.ctrlKey||e.metaKey)&&this.dragExistingElement&&this.dragExistingElement.isDuplicatable();if(this.isDragging){try{if(this.dropReferenceElement&&this.isValidDropEvent(e))switch(this.dragSource){case O.l.STARTED_FROM_FORM:var i=this.document.getEngine().getLoader().getSelection().getVirtualControl(),r=(null===i||void 0===i?void 0:i.getElements())||[],a=n;if(r.length>1){var o=this.document.getForm().getSelectableControls().filter((function(e){return r.includes(e)}));this.dropReferenceEdge!==O.o.BOTTOM&&this.dropReferenceEdge!==O.o.RIGHT||(o=o.reverse()),Object(H.a)(o,(function(e){!e.isDuplicatable()&&n||t.document.getEngine().getLoader().execCommand("drop",e,t.dropReferenceElement,t.dropReferenceEdge,n,a)}));break}this.document.getEngine().getLoader().execCommand("drop",this.dragExistingElement,this.dropReferenceElement,this.dropReferenceEdge,n);break;case O.l.STARTED_FROM_EDITOR_PANEL:this.document.getEngine().getLoader().execCommand("drop",this.createElementTypeId,this.dropReferenceElement,this.dropReferenceEdge,!1)}this.document.getEngine().getLoader().getLoaderDependency(O.M.UNDO_SERVICE).trigger("user-action","drag-and-drop-end")}catch(e){throw this.cancelTheDragAndDropMechanism(),e}return this.cancelTheDragAndDropMechanism(),!0}return!1}},{key:"handleDocumentBodyScroll",value:function(){this.cancelDropTargetIndicator()}},{key:"handleFormPageLeave",value:function(){}},{key:"moveDropReferenceToDirectRowFromThePage",value:function(){if(this.isDragging&&null!==this.dropReferenceElement&&null!==this.dropReferenceEdge){var e=this.dropReferenceElement;if(this.dropReferenceEdge===O.o.TOP||this.dropReferenceEdge===O.o.BOTTOM)for(;e.getParent().getTypeId()!==pd.a.CONTAINER_TYPE_PAGE;)e=e.getParent();else{if(!e||!e.getParent())return;if(!(e=e.getFirstParentContainer())||!e.getParent())return;if(e.getParent().getElementKind()!==pd.a.CONTAINER_TYPE_ROW)return}e!==this.dropReferenceElement&&this.setDropTargetElement(e,this.dropReferenceEdge,e.getRootNode().getBoundingClientRect())}}},{key:"abortOperation",value:function(){this.cancelTheDragAndDropMechanism()}}]),e}(),_d=function(){function e(t,n,i){o()(this,e),v()(this,"jq",void 0),v()(this,"document",void 0),v()(this,"manager",void 0),v()(this,"selectOverlay",void 0),v()(this,"isSelecting",!1),v()(this,"originalPointWhenSelectionStarted",{left:0,top:0}),v()(this,"currentSelectionPoint",{left:0,top:0}),this.jq=t,this.document=n,this.manager=i,this.selectOverlay=window.document.createElement("div"),this.selectOverlay.setAttribute("data-role","select-area")}return l()(e,[{key:"canBeExecutedWhenOperationTypeIs",value:function(e,t,n){switch(e){case O.m.NONE:if(n.shiftKey&&t===O.O.MOUSE_DOWN)return!0;break;case O.m.SELECT:return!0}return!1}},{key:"handleMouseMove",value:function(e){return!!this.isSelecting&&(this.currentSelectionPoint.left=e.clientX,this.currentSelectionPoint.top=e.clientY,this.updateSelectionOverlayCoordinates(),this.document.getEngine().getLoader().execCommand("select-rectangle-while-dragging",this.originalPointWhenSelectionStarted,this.currentSelectionPoint),e.preventDefault(),e.stopPropagation(),!0)}},{key:"handleMouseDown",value:function(e){if(this.isSelecting)return!1;var t=e.srcElement||e.target;return!!t&&(!!this.jq(t).is("#form, #form *")&&(this.originalPointWhenSelectionStarted.left=e.clientX,this.originalPointWhenSelectionStarted.top=e.clientY,this.currentSelectionPoint.left=e.clientX,this.currentSelectionPoint.top=e.clientY,this.updateSelectionOverlayCoordinates(),document.body.appendChild(this.selectOverlay),this.isSelecting=!0,this.manager.setCurrentOperationType(O.m.SELECT),e.preventDefault(),void e.stopPropagation()))}},{key:"updateSelectionOverlayCoordinates",value:function(){var e=Math.min(this.originalPointWhenSelectionStarted.left,this.currentSelectionPoint.left),t=Math.min(this.originalPointWhenSelectionStarted.top,this.currentSelectionPoint.top),n=Math.abs(this.originalPointWhenSelectionStarted.left-this.currentSelectionPoint.left),i=Math.abs(this.originalPointWhenSelectionStarted.top-this.currentSelectionPoint.top);this.selectOverlay.style.left="".concat(e,"px"),this.selectOverlay.style.top="".concat(t,"px"),this.selectOverlay.style.width="".concat(n,"px"),this.selectOverlay.style.height="".concat(i,"px")}},{key:"abortSelectionMechanism",value:function(){this.isSelecting=!1,this.selectOverlay.parentNode&&this.selectOverlay.parentNode.removeChild(this.selectOverlay),this.document.getEngine().getLoader().execCommand("select-rectangle-while-dragging",this.originalPointWhenSelectionStarted,this.originalPointWhenSelectionStarted)}},{key:"handleMouseUp",value:function(e){var t,n,i,r;return this.isSelecting&&(t=JSON.parse(JSON.stringify(this.originalPointWhenSelectionStarted)),n=JSON.parse(JSON.stringify(this.currentSelectionPoint)),i=!!e.ctrlKey||!!e.metaKey,r=this.document.getEngine().getLoader(),setTimeout((function(){r.execCommand("select-rectangle",t,n,i)}),1)),this.abortSelectionMechanism(),this.manager.setCurrentOperationType(O.m.NONE),e.preventDefault(),e.stopPropagation(),!0}},{key:"handleDocumentBodyScroll",value:function(e){}},{key:"abortOperation",value:function(){this.abortSelectionMechanism(),this.manager.setCurrentOperationType(O.m.NONE)}}]),e}(),gd=function(){function e(t,n,i){o()(this,e),v()(this,"jq",void 0),v()(this,"document",void 0),v()(this,"manager",void 0),this.jq=t,this.document=n,this.manager=i}return l()(e,[{key:"canBeExecutedWhenOperationTypeIs",value:function(e,t,n){return!1}},{key:"handleMouseMove",value:function(e){return!1}},{key:"handleMouseDown",value:function(e){return!1}},{key:"handleMouseUp",value:function(e){return!1}},{key:"handleDocumentBodyScroll",value:function(){}},{key:"abortOperation",value:function(){}}]),e}(),md=function(){function e(t,n,i){o()(this,e),v()(this,"jq",void 0),v()(this,"document",void 0),v()(this,"manager",void 0),v()(this,"isResizing",void 0),v()(this,"targetElementThatIsResizing",void 0),v()(this,"visualResizerHandleElement",void 0),v()(this,"initialMouseCoordinatesWhenDragStarted",{left:0,top:0}),this.jq=t,this.document=n,this.manager=i,this.visualResizerHandleElement=window.document.createElement("div"),this.visualResizerHandleElement.setAttribute("data-role","label-resizer")}return l()(e,[{key:"canBeExecutedWhenOperationTypeIs",value:function(e,t,n){switch(e){case O.m.NONE:if(!n.shiftKey&&(t===O.O.MOUSE_MOVE||t===O.O.MOUSE_DOWN))return!0;break;case O.m.LABEL_RESIZE:return!0}return!1}},{key:"handleMouseMove",value:function(e){return this.isResizing?O.N.LEFT!==qe.a.getMouseButtonFromEvent(e)?(this.abortOperation(),!1):this.handleMouseMoveWhenResizingIsActive(e):this.handleMouseMoveWhenResizingIsInactive(e)}},{key:"handleMouseMoveWhenResizingIsActive",value:function(e){var t=e.clientX,n=(e.clientY,O.A.LEFT_ALIGNED===this.document.getLabelPlacement()||this.targetElementThatIsResizing.getRenderedLabelPlacement()===O.A.LEFT_ALIGNED),i=n?t-this.initialMouseCoordinatesWhenDragStarted.left:this.initialMouseCoordinatesWhenDragStarted.left-t,r=n?~~this.targetElementThatIsResizing.getRootNode().getAttribute("data-label-width"):this.targetElementThatIsResizing.getColspan()-~~this.targetElementThatIsResizing.getRootNode().getAttribute("data-label-width");this.document.getEngine().getLoader().execCommand("resize-label-by-delta",this.targetElementThatIsResizing,r,i),this.setResizingMechanismTarget(this.targetElementThatIsResizing),this.isResizing=!0;var a=this.visualResizerHandleElement.getBoundingClientRect();return this.initialMouseCoordinatesWhenDragStarted.left=a.left+~~(a.width/2),this.initialMouseCoordinatesWhenDragStarted.top=a.top+~~(a.height/2),!0}},{key:"handleMouseMoveWhenResizingIsInactive",value:function(e){var t=e.target||e.srcElement||null;return!(!this.jq(t).is("[data-role=control]")&&!this.jq(t).is("[data-role=container][data-type=likert-wrapper]"))&&(null!==t&&this.handleResizingInitialization(t,e))}},{key:"handleResizingInitialization",value:function(e,t){return function(e,t,n){(i=n.getBoundingClientRect()).left,i.right,i.top,i.bottom,i.width,i.height;var i,r=e(n).attr("data-hash");if(!r)return!1;var a=t.document.getElementByHash(r);a.hasProperty("label.widthInUnits")&&(t.visualResizerHandleElement.onmouseover=function(){e("[data-role=mouse-resizer]").hide()},t.visualResizerHandleElement.onmouseout=function(){t.isResizing||e("[data-role=mouse-resizer]").show()},t.setResizingMechanismTarget(a))}(this.jq,this,e)}},{key:"setResizingMechanismTarget",value:function(e){this.visualResizerHandleElement.parentNode!==e.getRootNode()&&e.getRootNode().appendChild(this.visualResizerHandleElement),this.targetElementThatIsResizing=e,this.isResizing=!1}},{key:"cancelTheResizingMechanism",value:function(){this.visualResizerHandleElement.parentNode&&this.visualResizerHandleElement.parentNode.removeChild(this.visualResizerHandleElement),this.targetElementThatIsResizing=null,this.isResizing=!1,this.jq(this.visualResizerHandleElement).trigger("mouseout")}},{key:"handleMouseDown",value:function(e){var t=e.target||e.srcElement;return null!==this.targetElementThatIsResizing&&!this.isResizing&&t===this.visualResizerHandleElement&&(this.isResizing=!0,this.manager.setCurrentOperationType(O.m.LABEL_RESIZE),this.initialMouseCoordinatesWhenDragStarted.left=e.clientX,this.initialMouseCoordinatesWhenDragStarted.top=e.clientY,this.document.getEngine().getLoader().getLoaderDependency(O.M.UNDO_SERVICE).trigger("user-action","label-resize-start"),!0)}},{key:"handleMouseUp",value:function(e){return!!this.isResizing&&(this.cancelTheResizingMechanism(),this.manager.setCurrentOperationType(O.m.NONE),this.document.getEngine().getLoader().execCommand("track-event","control_resize"),this.document.getEngine().getLoader().execCommand("track-event","control_resize_label"),this.document.getEngine().getLoader().getLoaderDependency(O.M.UNDO_SERVICE).trigger("user-action","label-resize-end"),!0)}},{key:"handleDocumentBodyScroll",value:function(){this.cancelTheResizingMechanism()}},{key:"abortOperation",value:function(){this.cancelTheResizingMechanism(),this.manager.setCurrentOperationType(O.m.NONE)}}]),e}();function fd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Ed=function(e){u()(n,e);var t=fd(n);function n(e,i,r){var a;return o()(this,n),a=t.call(this),v()(A()(a),"jq",void 0),v()(A()(a),"rootNode",void 0),v()(A()(a),"document",void 0),v()(A()(a),"operationType",void 0),v()(A()(a),"plugins",[]),v()(A()(a),"scroller",void 0),v()(A()(a),"scrollJoystickUp",void 0),v()(A()(a),"scrollJoystickDown",void 0),v()(A()(a),"autoScrollDirection",null),v()(A()(a),"autoScrollInterval",0),v()(A()(a),"headerHeight",0),v()(A()(a),"pageHeight",0),a.jq=e,a.rootNode=i,a.document=r,a.operationType=O.m.NONE,a.plugins.push(new gd(a.jq,a.document,A()(a))),a.plugins.push(new dd(a.jq,a.document,A()(a))),a.plugins.push(new md(a.jq,a.document,A()(a))),a.plugins.push(new hd(a.jq,a.document,A()(a))),a.plugins.push(new _d(a.jq,a.document,A()(a))),a.initAutoScrollingEngine(),a.init(),a}return l()(n,[{key:"initAutoScrollingEngine",value:function(){var e=this;this.scroller=document.createElement("div"),this.scroller.setAttribute("data-role","mousemanager-scroller-helper"),this.scrollJoystickUp=document.createElement("div"),this.scrollJoystickUp.setAttribute("data-role","mousemanager-scroller-joystick-up"),this.scrollJoystickDown=document.createElement("div"),this.scrollJoystickDown.setAttribute("data-role","mousemanager-scroller-joystick-down"),document.body.appendChild(this.scroller),document.body.appendChild(this.scrollJoystickUp),document.body.appendChild(this.scrollJoystickDown),this.jq(this.scrollJoystickUp).on("mouseenter",(function(){e.autoScrollDirection=O.o.TOP})),this.jq(this.scrollJoystickUp).on("mouseleave",(function(){e.autoScrollDirection=null})),this.jq(this.scrollJoystickDown).on("mouseenter",(function(){e.autoScrollDirection=O.o.BOTTOM})),this.jq(this.scrollJoystickDown).on("mouseleave",(function(){e.autoScrollDirection=null}))}},{key:"startAutoscrollInterval",value:function(){var e=this;this.autoScrollInterval||(this.autoScrollInterval=setInterval((function(){e.operationType!==O.m.NONE&&null!==e.autoScrollDirection&&(e.autoScrollDirection===O.o.TOP?e.scrollUp():e.autoScrollDirection===O.o.BOTTOM&&e.scrollDown())}),100))}},{key:"stopAutoScrollInterval",value:function(){clearInterval(this.autoScrollInterval),this.autoScrollInterval=0}},{key:"init",value:function(){var e;e=this,this.jq,document.body.addEventListener("mousemove",(function(t){for(var n=0,i=e.plugins.length;n<i&&(!e.plugins[n].canBeExecutedWhenOperationTypeIs(e.operationType,O.O.MOUSE_MOVE,t)||!e.plugins[n].handleMouseMove(t));n++);e.operationType!==O.m.NONE&&(e.scroller.style.top="".concat(t.pageY+e.getScrollPosition()-e.headerHeight,"px"))}),!0),document.body.addEventListener("mousedown",(function(t){for(var n=0,i=e.plugins.length;n<i&&(!e.plugins[n].canBeExecutedWhenOperationTypeIs(e.operationType,O.O.MOUSE_DOWN,t)||!e.plugins[n].handleMouseDown(t));n++);}),!0),document.body.addEventListener("mouseup",(function(t){for(var n=0,i=e.plugins.length;n<i&&(!e.plugins[n].canBeExecutedWhenOperationTypeIs(e.operationType,O.O.MOUSE_UP,t)||!e.plugins[n].handleMouseUp(t));n++);}),!0),document.body.addEventListener("scroll",(function(t){for(var n=0,i=e.plugins.length;n<i;n++)e.plugins[n].handleDocumentBodyScroll(t)}),!0),window.addEventListener("scroll",(function(t){for(var n=0,i=e.plugins.length;n<i;n++)e.plugins[n].handleDocumentBodyScroll(t)}),!0),window.addEventListener("keydown",(function(t){if(27===(t.keyCode||t.charCode)&&e.operationType!==O.m.NONE)for(var n=0,i=e.plugins.length;n<i;n++)e.plugins[n].canBeExecutedWhenOperationTypeIs(e.operationType,O.O.MOUSE_MOVE,t)&&e.plugins[n].abortOperation()}),!1)}},{key:"setCurrentOperationType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!1,i=this.operationType;if(this.operationType!==e&&(n=!0),null!==t)for(var r in t)t.hasOwnProperty(r)&&document.body.setAttribute(r,t[r]);else document.body.removeAttribute("data-drag-direction");if(this.operationType=e,this.operationType===O.m.NONE)this.scroller.style.display=this.scrollJoystickUp.style.display=this.scrollJoystickDown.style.display="none",this.stopAutoScrollInterval();else{try{this.headerHeight=this.document.getForm().getEngine().getLoader().getLoaderDependency(O.M.EDITOR_HEADER).getDOMNode().offsetHeight}catch(a){this.headerHeight=0}this.pageHeight=this.getPageHeight(),this.scroller.style.display="block",this.operationType===O.m.DRAG&&(this.scrollJoystickUp.style.display=this.scrollJoystickDown.style.display="block"),this.startAutoscrollInterval()}switch(this.operationType){case O.m.DRAG:document.body.setAttribute("data-mouse-gesture-type","drag"),n&&this.trigger("drag-start");break;case O.m.LABEL_RESIZE:document.body.setAttribute("data-mouse-gesture-type","label-resize"),n&&this.trigger("label-resize-start");break;case O.m.ELEMENT_RESIZE:n&&this.trigger("resize-start"),document.body.setAttribute("data-mouse-gesture-type","element-resize");break;case O.m.SELECT:n&&this.trigger("select-start"),document.body.setAttribute("data-mouse-gesture-type","select");break;case O.m.NONE:default:switch(document.body.removeAttribute("data-mouse-gesture-type"),i){case O.m.DRAG:n&&(this.trigger("drag-end"),this.document.trigger("change"));break;case O.m.LABEL_RESIZE:n&&this.trigger("label-resize-end");break;case O.m.ELEMENT_RESIZE:n&&this.trigger("resize-end");break;case O.m.SELECT:n&&this.trigger("select-end")}}}},{key:"getOperationTypeName",value:function(e){switch(e){case O.m.NONE:return"none";case O.m.ELEMENT_RESIZE:return"element-resize";case O.m.DRAG:return"drag";case O.m.LABEL_RESIZE:return"label-resize";case O.m.SELECT:return"select";default:return JSON.stringify(e||null)}}},{key:"getPageHeight",value:function(){return this.document.getRootNode().getBoundingClientRect().height}},{key:"getScrollPosition",value:function(){return-(this.document.getRootNode().getBoundingClientRect().top-this.headerHeight)}},{key:"scrollDown",value:function(){var e=parseInt(this.scroller.style.top)+20;e>this.pageHeight&&(e=this.pageHeight),this.scroller.style.top="".concat(e,"px"),this.scroller.scrollIntoView(!1)}},{key:"scrollUp",value:function(){this.scroller.style.top="".concat(parseInt(this.scroller.style.top)-20,"px"),this.scroller.scrollIntoView(!0)}}]),n}(ir.a),yd=n(68);function Td(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var vd=function(e){u()(n,e);var t=Td(n);function n(e){var i,r;return o()(this,n),i=t.call(this),v()(A()(i),"save",void 0),v()(A()(i),"engine",void 0),(r=A()(i)).save=ie.a.create((function(){r.saveImmediate()}),1e3),i.engine=e,i}return l()(n,[{key:"saveImmediate",value:function(){localStorage&&localStorage.setItem("viewForm",JSON.stringify(this.engine.getDocument().serialize()))}},{key:"load",value:function(){if(localStorage){var e=localStorage.getItem("viewForm");if(null!==e)return void this.engine.loadFromString(e)}this.engine.loadFromString('[ "v0.4", -1, null, null, {}, null, [ 90001, null, null, {}, null, [], 20, null ], 20, null, [ 27, null, null, {}, null, null, 20, null ], [ 28, null, null, {}, null, null, 20, null ], [ 29, null, null, {}, null, null, 20, null ], [] ]')}}]),n}(ir.a),Od=n(21),bd=n(61);function Cd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Id=function(e){u()(n,e);var t=Cd(n);function n(e){var i;o()(this,n),i=t.call(this),v()(A()(i),"properties",{});var r=A()(i);return i.on("change",(function(t,n,i){if(r.has("hasProcessorsInjected")){var a=e.getLoader().getCommandDispatcher();if("isPaymentSandboxEnabled"===t&&(a.updateEditorSettingsPanel(),a.refreshPaymentsAvailabilityStatus()),"isPaymentEnabled"===t&&(n===i||n||e.getLoader().getCommandDispatcher().setPaymentsInActivationProcess(!0),!0!==i||e.getDocument().hasEditorSetting(K.a.PAYMENT_SUMMARY_EDITOR_SETTING)||a.addSetting(K.a.PAYMENT_SUMMARY_EDITOR_SETTING),!1===i&&e.getDocument().hasEditorSetting(K.a.PAYMENT_SUMMARY_EDITOR_SETTING))){var o=e.getDocument().getEditorSettingByTypeId(K.a.PAYMENT_SUMMARY_EDITOR_SETTING);e.getDocument().removeEditorSetting(o)}}})),i}return l()(n,[{key:"isPrimitive",value:function(e){var t=Qt()(e);return"string"===t||"number"===t&&isFinite(e)||"boolean"===t||null===e}},{key:"withProperty",value:function(e,t){if("string"!==typeof e||""===e)throw new Error("Illegal argument: propertyName: string not empty expected!");var n=e in this.properties?this.properties[e]:null,i=void 0===t?null:t;return this.properties[e]=i,this.trigger("change",e,n,i),this}},{key:"deleteProperty",value:function(e){if("string"!==typeof e||""===e)throw new Error("Illegal argument: propertyName: string not empty expected!");return void 0!==this.properties[e]&&(delete this.properties[e],this.trigger("change")),this}},{key:"getProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"!==typeof e||""===e)throw new Error("Illegal argument: propertyName: string not empty expected!");return void 0===this.properties[e]?t:this.properties[e]}},{key:"has",value:function(e){return"string"===typeof e&&""!==e&&void 0!==this.properties[e]}},{key:"clear",value:function(){this.properties={}}},{key:"toObject",value:function(){return JSON.parse(JSON.stringify(this.properties))}}]),n}(ir.a),Rd=n(167);function Pd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Nd=function(e){u()(n,e);var t=Pd(n);function n(e,i){var r;return o()(this,n),r=t.call(this,e),v()(A()(r),"elements",void 0),v()(A()(r),"commonProperties",{}),v()(A()(r),"propertyValues",{}),r.addElements(i),r.computeCommonProperties(),r}return l()(n,[{key:"getId",value:function(){return null}},{key:"getTypeId",value:function(){return b.a.VIRTUAL_SELECTION_CONTROL}},{key:"getHash",value:function(){return n.STATIC_HASH}},{key:"getElementName",value:function(){return"Selection"}},{key:"createRootNodeElement",value:function(){}},{key:"getElementKind",value:function(){return O.p.CONTROL}},{key:"serialize",value:function(){return null}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"computeCommonProperties",value:function(){for(var e,t,i,r,a,o=0,s=this.elements.length;o<s;o++)for(var l=0,c=(e=this.elements[o].enumerateProperties()).length;l<c;l++)if(t=e[l].name,i=e[l].optional,r=e[l].type,!0===n.SUPPORTED_PROPERTIES[t]){if(o>0){if(void 0===this.commonProperties[t])continue;if(this.commonProperties[t].type!==r||this.commonProperties[t].optional!==i){delete this.commonProperties[t];continue}for(var u in this.commonProperties)this.commonProperties.hasOwnProperty(u)&&!this.elements[o].hasProperty(u)&&delete this.commonProperties[u]}else this.commonProperties[t]={name:t,optional:i,type:r,virtual:!1};"configuration.defaultValue"===t&&void 0!==this.commonProperties[t]&&[b.a.CONTROL_TYPE_TIME,b.a.CONTROL_TYPE_DATE].indexOf(this.elements[o].getTypeId())>-1&&delete this.commonProperties[t]}for(var d in this.commonProperties)if(this.commonProperties.propertyIsEnumerable(d))for(var p=0,h=this.elements.length;p<h;p++){if(!this.elements[p].hasProperty(d)){delete this.commonProperties[d];break}if(a=this.elements[p].getProperty(d),0===p)this.propertyValues[d]=a;else if(this.propertyValues[d]!==a){this.propertyValues[d]=this.getDefaultValueForPropertyType(this.commonProperties[d]);break}}}},{key:"hasProperty",value:function(e){return void 0!==this.commonProperties[e]}},{key:"getProperty",value:function(e){if(!this.hasProperty(e))throw new Error("Unknown property "+JSON.stringify(e));return this.propertyValues[e]}},{key:"setProperty",value:function(e,t){this.propertyValues[e]=t;for(var n=0,i=this.elements.length;n<i;n++)this.elements[n].setProperty(e,t);return this}},{key:"enumerateProperties",value:function(){var e=[];for(var t in this.commonProperties)this.commonProperties.hasOwnProperty(t)&&e.push(this.commonProperties[t]);return e}},{key:"isRemovable",value:function(){for(var e=0,t=this.elements.length;e<t;e++)if(!this.elements[e].isRemovable())return!1;return!0}},{key:"isResizable",value:function(){return!1}},{key:"isDuplicatable",value:function(){var e=this.elements.length;if(16<this.elements.length)return!1;for(var t=0;t<e;t++)if(!this.elements[t].isDuplicatable())return!1;return!0}},{key:"isSelectable",value:function(){return!1}},{key:"isDragable",value:function(){return!1}},{key:"isCompactFieldPlaceholderSupported",value:function(){return!1}},{key:"getResizingCapability",value:function(){return O.db.NONE}},{key:"getParentPage",value:function(){return null}},{key:"getParent",value:function(){return null}},{key:"hasValueCompatibleWith",value:function(e){return!1}},{key:"getPropertyDescriptorByInputIndex",value:function(e){return null}},{key:"getValue",value:function(){return null}},{key:"onValueChanged",value:function(){}},{key:"getDefaultValueForPropertyType",value:function(e){switch(e.type){case"string":return"";case"int":case"float":case"number":return 0;case"snumber":case"sfloat":return"0";case"bool":case"boolean":return!1;default:return null}}},{key:"getElements",value:function(){return this.elements}},{key:"addElements",value:function(e){var t;this.elements=[];for(var n=0,i=e.length;n<i;n++)(t=e[n].getTypeId())!==b.a.CONTAINER_TYPE_PAGE&&t!==b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE&&e[n].isSelectable()&&this.elements.push(e[n])}}],[{key:"getConfiguration",value:function(){return{typeId:b.a.VIRTUAL_SELECTION_CONTROL,name:"Selection",isContainer:!1,category:"",keywords:"",icon:"",isVirtual:!1,i18nName:"",i18nKeywords:"",index:-1,accessibilityFields:O.v.NONE}}}]),n}(i.a);function Ad(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(Nd,"STATIC_HASH","zzzzzzzz"),v()(Nd,"SUPPORTED_PROPERTIES",{"label.labelText":!0,"label.isBold":!0,"label.isItalic":!0,"instructions.text":!0,"instructions.showInstructionsOnClick":!0,"label.visibilityMode":!0,"options.required":!0,"options.hidden":!0,"configuration.defaultValue":!0,"options.hipaaField":!0});var Sd=function(e){u()(n,e);var t=Ad(n);function n(e,i){var r;return o()(this,n),r=t.call(this,null,i),v()(A()(r),"engine",void 0),v()(A()(r),"hashMap",{}),v()(A()(r),"hashMapKeys",[]),v()(A()(r),"orphanElementsHashMap",{}),v()(A()(r),"header",void 0),v()(A()(r),"actionBar",void 0),v()(A()(r),"captcha",void 0),v()(A()(r),"couponCode",void 0),v()(A()(r),"repaginate",void 0),v()(A()(r),"numberOfPages",0),v()(A()(r),"hasPaymentSummaryPage",!1),v()(A()(r),"activeElement",void 0),v()(A()(r),"errorsDOMNode",void 0),v()(A()(r),"rules",void 0),v()(A()(r),"realTimeCalculationsThrottler",void 0),v()(A()(r),"lastCalculationServerResponse",void 0),v()(A()(r),"currentPageIndex",null),v()(A()(r),"previewOnlyMode",!1),v()(A()(r),"previewModeListeners",[]),v()(A()(r),"configuration",void 0),v()(A()(r),"editorSettings",[]),v()(A()(r),"userService",void 0),r.engine=e,r.rootNode=e.getForm(),r.errorsDOMNode=document.createElement("div"),r.errorsDOMNode.setAttribute("data-role","form-errors"),r.form=A()(r),r.configuration=new Id(r.getEngine()),r.userService=Xt.a.getInstance(),r.init(),r.updateInstructionsTextAlignment(),r.updateLabelTextAlignment(),r.updateTextDirection(),r.updateLabelPlacement(),r.updateErrorsText(),r}return l()(n,[{key:"getTypeId",value:function(){return b.a.ELEMENT_TYPE_FORM}},{key:"getElementName",value:function(){return"Form"}},{key:"getControlsList",value:function(){for(var e=[],t=this.flatten(),n=0,i=t.length;n<i;n++)t[n].getElementKind()===O.p.CONTROL&&e.push(t[n]);return e}},{key:"getSelectableControls",value:function(){var e=this.flatten(),t=[];return Object(H.a)(e,(function(e){var n=e.getElementKind(),i=e.getTypeId(),r=n===O.p.CONTROL&&i!==b.a.CONTROL_TYPE_LIKERT_SCALE,a=n===O.p.CONTAINER&&i===b.a.CONTAINER_TYPE_LIKERT_WRAPPER,o=n===O.p.CONTAINER&&i===b.a.CONTAINER_TYPE_REPEATABLE;(r||a||o)&&t.push(e)})),t}},{key:"getPageWidth",value:function(){var e,t=this.getProperty("options.widthInPixels"),n=this.getProperty("options.widthInPercents"),i=this.engine.getDocumentSize();return null===n&&null===t&&(n=100),null!==n&&n>100&&(n=100),null!==t?e=t:null!==n&&(e=~~(i.width/100*n)),this.engine.getLoader().getLoaderDependency(O.M.DISABLED_MOBILE_INTERACTION)&&0===Math.min(e,i.width)?Math.max(e,i.width):Math.min(e,i.width)}},{key:"createRootNodeElement",value:function(){}},{key:"getRootNode",value:function(){return this.engine.getForm()}},{key:"getForm",value:function(){return this}},{key:"getParent",value:function(){return null}},{key:"isAttached",value:function(){return!0}},{key:"init",value:function(){switch(this.getEngine().getLoader().getLoaderType()){case O.B.EDIT:this.getRootNode().setAttribute("data-loader-type","editor"),this.getRootNode().setAttribute("data-is-loading","true");break;case O.B.VIEW:this.getRootNode().setAttribute("data-loader-type","viewer")}this.header=this.engine.createElement(b.a.CONTROL_TYPE_FORM_HEADER,void 0,this),this.actionBar=this.engine.createElement(b.a.CONTROL_TYPE_ACTION_BAR,void 0,this),this.captcha=this.engine.createElement(b.a.CONTROL_TYPE_CAPTCHA,void 0,this),this.setupCaptcha(),this.header.setAttached(!0),this.actionBar.setAttached(!0),this.captcha.setAttached(!0),function(e){var t;e.realTimeCalculationsThrottler=ie.a.create((function(){e.trigger("calculate",!1)}),250),Object.defineProperty(window,"$9",{get:function(){return e.activeElement||null},set:function(){throw new Error("Property is read-only!")}}),e.repaginate=ie.a.create((function(){e.isEventTriggeringEnabled()&&e.repaginateInImmediateMode()}),0),e.on("node-insertion",(function(t){for(var n=t.flatten(),i=0,r=n.length;i<r;i++)e.hashMap[n[i].getHash()]=n[i],n[i].setAttached(!0);e.hashMapKeys=Object.keys(e.hashMap),e.trigger("node-insertion-trigger",t),e.trigger("change")})),e.on("node-removal",(function(t){for(var n=t.flatten(),i=0,r=n.length;i<r;i++)delete e.hashMap[n[i].getHash()],n[i].setAttached(!1);e.hashMapKeys=Object.keys(e.hashMap),e.trigger("change")})),e.on("node-attribute-changed",(function(t,n,i){e.trigger("change")})),(t=e.getEngine().getLoader().getLoaderDependency(O.M.TRANSLATIONS_LANGUAGE_CODES))&&t.length>1&&e.getRootNode().setAttribute("data-has-language-selector",""),e.on("translate",(function(){e.getHeader().setupI18n(),e.getCaptcha().setupI18n(),mc.a.getInstance().setupI18n();for(var t=0,n=e.getControlsList(),i=n.length;t<i;t++)n[t].setupI18n()})),e.configuration.on("change",(function(){e.trigger("change")}));var n=e.getEngine().getLoader().getLoaderDependency(O.M.FORM_SETTINGS);n&&n.allowPreviewMode&&e.rootNode.setAttribute("data-allow-preview-mode","")}(this)}},{key:"getEngine",value:function(){return this.engine}},{key:"appendChild",value:function(e){if(!e||e.getTypeId()!==b.a.CONTAINER_TYPE_PAGE&&e.getTypeId()!==b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE)throw new Error("Element type "+e.getElementName()+" is not supported directly in the form root!");var t;e.getTypeId()===b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE?(this.getDOMInsertionNode().appendChild(e.getPageSeparatorDOMNode()),t=y()(_()(n.prototype),"appendChild",this).call(this,e)):(t=y()(_()(n.prototype),"appendChild",this).call(this,e),this.getDOMInsertionNode().appendChild(e.getPageSeparatorDOMNode()));var i=this.engine.getLoader().getLoaderDependency(O.M.EDITOR_SETTINGS_PANEL);return i&&this.getDOMInsertionNode().appendChild(i),this.repaginate(),t}},{key:"insertBefore",value:function(e,t){if(!t||t.getTypeId()!==b.a.CONTAINER_TYPE_PAGE&&t.getTypeId()!==b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE)throw new Error("Element type not supported directly in the form root!");if(e===t)throw new Error("Invalid argument: reference and child are the same!");for(var n=!1,i=0,r=this.children.length;i<r;i++)if(this.children[i]===t){this.children.splice(i,1),n=!0;break}for(var a=-1,o=0,s=this.children.length;o<s;o++)if(this.children[o]===e){a=o;break}if(-1===a)throw new Error("Insertion failed: reference child is not contained by it's parent");return this.children.splice(a,0,t),n||null===t.getParent()||t.getParent().removeChild(t),t.withParent(this),this.getDOMInsertionNode().insertBefore(t.getPageSeparatorDOMNode(),e.getRootNode()),this.getDOMInsertionNode().insertBefore(t.getRootNode(),e.getRootNode()),!n&&this.isAttached()&&this.getForm().trigger("node-insertion",t),n||this.getRootNode().setAttribute("data-num-children",String(this.children.length)),this.repaginate(),t}},{key:"insertAfter",value:function(e,t){if(!t||t.getTypeId()!==b.a.CONTAINER_TYPE_PAGE&&t.getTypeId()!==b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE)throw new Error("Element type not supported directly in the form root!");if(e===t)throw new Error("Invalid argument: reference and child are the same!");for(var n=!1,i=0,r=this.children.length;i<r;i++)if(this.children[i]===t){this.children.splice(i,1),n=!0;break}for(var a=-1,o=0,s=this.children.length;o<s;o++)if(this.children[o]===e){a=o;break}if(-1===a)throw new Error("Insertion failed: reference child is not contained by it's parent");this.children.splice(a+1,0,t),n||null===t.getParent()||t.getParent().removeChild(t),t.withParent(this);var l=e.getRootNode().nextSibling.nextSibling;return this.userService.canHideBackLink()||t.getTypeId()!==b.a.CONTAINER_TYPE_PAGE||(l=l.nextSibling),this.getDOMInsertionNode().insertBefore(t.getRootNode(),l),this.getDOMInsertionNode().insertBefore(t.getPageSeparatorDOMNode(),t.getRootNode().nextSibling),!n&&this.isAttached()&&this.getForm().trigger("node-insertion",t),n||this.getRootNode().setAttribute("data-num-children",String(this.children.length)),this.repaginate(),t}},{key:"serialize",value:function(){var e=y()(_()(n.prototype),"serialize",this).call(this);if(e.splice(0,0,Uu.LATEST_VERSION),!P()(e,Array))return e;if(e.push(this.header.serialize()),e.push(this.captcha.serialize()),e.push(this.actionBar.serialize()),this.engine.getTheme().getExternalTheme().hasExternalStorage()?e.push(null):e.push(this.engine.getTheme().enumerateProperties()),e.push(this.configuration.toObject()),this.editorSettings&&this.editorSettings.length){for(var t=[],i=0,r=this.editorSettings.length;i<r;i++)for(var a=this.editorSettings[i].serialize(),o=0,s=a.length;o<s;o++)t.push(a[o]);e.push(t)}else e.push(null);return e}},{key:"removeChild",value:function(e){for(var t=!1,n=0,i=this.children.length;n<i;n++)if(this.children[n]===e){this.children.splice(n,1),t=!0;break}if(!t)throw new Error("Attempted to remove a non-existent element!");if(e.getTypeId()!==b.a.CONTAINER_TYPE_PAGE&&e.getTypeId()!==b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE)throw new Error("Invalid argument: element. PageContainer type expected!");return e.withParent(null),this.getDOMInsertionNode().removeChild(e.getPageSeparatorDOMNode()),this.getDOMInsertionNode().removeChild(e.getRootNode()),this.isAttached()&&this.getForm().trigger("node-removal",e),this.getRootNode().setAttribute("data-num-children",String(this.children.length)),this.repaginate(),e}},{key:"clear",value:function(){var e=this;this.hashMap={},this.hashMapKeys=[],this.children=[],this.configuration.clear(),this.editorSettings=[],this.getRootNode().innerHTML="",this.getRootNode().appendChild(this.engine.getTheme().getStyleElement()),setTimeout((function(){e.engine.getLoader().getLoaderType()===O.B.VIEW&&(e.getRootNode().appendChild(e.engine.getTheme().getFormCustomCSSFromUrlElement()),e.getRootNode().appendChild(e.engine.getTheme().getFormCustomCSSTextStyleElement()))}),50)}},{key:"rebuildHashMap",value:function(){this.hashMap={};for(var e=this.flatten(),t=0,n=e.length;t<n;t++)this.hashMap[e[t].getHash()]=e[t];this.hashMapKeys=Object.keys(this.hashMap)}},{key:"getHeader",value:function(){return this.header}},{key:"withHeader",value:function(e){return this.header=e||null,this.repaginate(),this}},{key:"getCouponCode",value:function(){return this.couponCode||null}},{key:"withCouponCode",value:function(e){return this.couponCode=e||null,this}},{key:"getActionBar",value:function(){return this.actionBar}},{key:"withActionBar",value:function(e){return this.actionBar=e||null,this.repaginate(),this}},{key:"getCaptcha",value:function(){return this.captcha}},{key:"repaginateInImmediateMode",value:function(){var e=0,t=null;this.hasPaymentSummaryPage=!1;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getTypeId();if(r===b.a.CONTAINER_TYPE_PAGE||r===b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE){var a=this.children[n];a.withIndex(n),a.renderFooter(),a.withIsLastPage(!1),r===b.a.CONTAINER_TYPE_PAGE?t=a:this.hasPaymentSummaryPage=!0,e++}}this.hasPaymentSummaryPage?this.getRootNode().setAttribute("data-has-after-submit-payment-summary","1"):this.getRootNode().removeAttribute("data-has-after-submit-payment-summary"),null!==t&&t.withIsLastPage(!0),this.numberOfPages=e,this.renderPageHeadersInImmediateMode()}},{key:"renderPageHeadersInImmediateMode",value:function(){for(var e=0,t=this.children.length;e<t;e++)this.children[e].getTypeId()!==b.a.CONTAINER_TYPE_PAGE&&this.children[e].getTypeId()!==b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE||this.children[e].renderHeader()}},{key:"getPageByIndex",value:function(e){for(var t=0,n=this.children.length;t<n;t++)if((this.children[t].getTypeId()===b.a.CONTAINER_TYPE_PAGE||this.children[t].getTypeId()===b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE)&&e===this.children[t].getIndex())return this.children[t];return null}},{key:"getLastPageContainer",value:function(){for(var e=this.numberOfPages-1;e>=0;e--)if(this.children[e].getTypeId()===b.a.CONTAINER_TYPE_PAGE)return this.children[e];return null}},{key:"getNumberOfPages",value:function(){return this.getHasPaymentSummaryPage()?this.numberOfPages-1:this.numberOfPages}},{key:"getNumberOfPagesIncludingPaymentSummary",value:function(){return this.numberOfPages}},{key:"getHasPaymentSummaryPage",value:function(){return this.hasPaymentSummaryPage}},{key:"getElementByHash",value:function(e){var t;switch(!0){case!!this.hashMap[e]:return this.hashMap[e];case!!this.orphanElementsHashMap[e]:return this.orphanElementsHashMap[e];case e===this.getHash():return this;case e===this.header.getHash():return this.header;case e===this.captcha.getHash():return this.captcha;case e===this.actionBar.getHash():return this.actionBar;case this.couponCode&&e===this.couponCode.getHash():return this.couponCode;case this.engine.getLoader().getLoaderType()===O.B.EDIT&&e===Nd.STATIC_HASH:return this.getEngine().getLoader().getSelection().getVirtualControl();case!!(t=this.findElementByHashInsideOrphans(e)):return t;default:return null}}},{key:"getElementById",value:function(e,t){t=t||0;for(var n=-1,i=0,r=this.hashMapKeys.length;i<r;i++)if(e===this.hashMap[this.hashMapKeys[i]].getId()&&++n===t)return this.hashMap[this.hashMapKeys[i]];return null}},{key:"getElementsById",value:function(e){for(var t=[],n=0,i=this.hashMapKeys.length;n<i;n++)e===this.hashMap[this.hashMapKeys[n]].getId()&&t.push(this.hashMap[this.hashMapKeys[n]]);return t}},{key:"getElementByIdAndRepeatedPath",value:function(e,t,n){t=t||0,n=n||"";for(var i=this.getElementsById(e),r=-1,a=0;a<i.length;a++){var o=i[a],s=o.getFirstParentOfType(b.a.CONTAINER_TYPE_REPEATABLE_GROUP),l=new RegExp("^"+n);if(s&&l.test(String(s.getRepeatableGroupPathAttribute()))&&++r===t)return o}return null}},{key:"getActiveElement",value:function(){return this.activeElement||null}},{key:"setActiveElement",value:function(e){e!==this.activeElement&&(this.activeElement&&(this.activeElement.getRootNode().removeAttribute("data-is-active"),this.activeElement.onFocusLeave(),this.trigger("blur",e)),this.activeElement=e||null,this.activeElement&&(this.activeElement.getRootNode().setAttribute("data-is-active","1"),this.activeElement.onFocusEnter()),S.a.refreshFrameHeightOnWix(),this.trigger("focus",e))}},{key:"getDOMInsertionNode",value:function(){return this.engine.getForm()}},{key:"normalize",value:function(){try{!function(e,t){var i,r,a=0,o=null,s=0;do{i=!0;for(var l=function(a,l){var c;(r=e(n.NORMALIZE_RULES[a].cssSelector)).length&&(c=n.NORMALIZE_RULES[a],r.each((function(){if(null===o){var i=e(this).attr("data-hash");if(!i)return this.parentNode&&this.parentNode.removeChild(this),void(o=new Error("While executing the normalization selector "+JSON.stringify(n.NORMALIZE_RULES[a])+" we found a element which does not have it's hash id set. Normalization failed for this reason!"));var r=t.getElementByHash(i);if(null===r)return this.parentNode&&this.parentNode.removeChild(this),void(o=new Error("While executing the normalization selector "+JSON.stringify(n.NORMALIZE_RULES[a])+" we found in the DOM a element that does not exist in the form, with hash "+r+"! Normalization failed for this reason!"));var l=r.getParent();if(null===l)return this.parentNode&&this.parentNode.removeChild(this),void(o=new Error("While executing the normalization selector "+JSON.stringify(n.NORMALIZE_RULES[a])+" we found in the DOM a element that is not attached in it's parent! Normalization failed for this reason!"));c.callback?c.callback(r):l.removeChild(r),s++}})),i=!1)},c=0,u=n.NORMALIZE_RULES.length;c<u;c++)l(c);if(a++,null!==o)throw o;if(a>1e3)throw new Error("Infinite loop detected in normalization algorithm! The normalization algorithm has been aborted!");s>0&&console.log("gc: automatically removed "+s+" elements from from")}while(!i)}(this.engine.getJQuery(),this)}catch(e){throw this.rebuildHashMap(),e}this.rebuildHashMap()}},{key:"updateInstructionsTextAlignment",value:function(){if(this.hasProperty("options.instructionsTextAlignment"))switch(this.getProperty("options.instructionsTextAlignment")){case O.mb.CENTER:this.getRootNode().setAttribute("data-instructions-text-alignment","center");break;case O.mb.JUSTIFY:this.getRootNode().setAttribute("data-instructions-text-alignment","justify");break;case O.mb.RIGHT:this.getRootNode().setAttribute("data-instructions-text-alignment","right");break;default:this.getRootNode().setAttribute("data-instructions-text-alignment","left")}else this.getRootNode().removeAttribute("data-instructions-text-alignment")}},{key:"updateLabelPlacement",value:function(){if(this.hasProperty("options.labelPlacement"))switch(this.getProperty("options.labelPlacement")){case O.A.RIGHT_ALIGNED:this.getRootNode().setAttribute("data-label-placement","right");break;case O.A.TOP_ALIGNED:this.getRootNode().setAttribute("data-label-placement","top");break;case O.A.LEFT_ALIGNED:default:this.getRootNode().setAttribute("data-label-placement","left")}}},{key:"updateLabelTextAlignment",value:function(){if(this.hasProperty("options.labelTextAlignment"))switch(this.getProperty("options.labelTextAlignment")){case O.mb.CENTER:this.getRootNode().setAttribute("data-label-text-alignment","center");break;case O.mb.JUSTIFY:this.getRootNode().setAttribute("data-label-text-alignment","justify");break;case O.mb.RIGHT:this.getRootNode().setAttribute("data-label-text-alignment","right");break;default:this.getRootNode().setAttribute("data-label-text-alignment","left")}else this.getRootNode().removeAttribute("data-label-text-alignment")}},{key:"updateTextDirection",value:function(){if(this.hasProperty("options.direction")){switch(this.getProperty("options.direction")){case O.G.RIGHT_TO_LEFT:this.getRootNode().setAttribute("data-text-direction","rtl");break;default:this.getRootNode().setAttribute("data-text-direction","ltr")}this.trigger("update-text-direction")}else this.getRootNode().removeAttribute("data-text-direction")}},{key:"getLabelPlacement",value:function(){return this.engine.getTheme().isMobileLayout()?O.A.TOP_ALIGNED:this.getProperty("options.labelPlacement")}},{key:"getInstructionsPlacement",value:function(){return this.engine.getTheme().isMobileLayout()?O.z.BELOW_LABEL:this.getProperty("options.instructionsPlacement")}},{key:"createUnserializerBag",value:function(e){var t,n=new ku(this,this.engine);if(!e)for(var i=0,r=this.hashMapKeys.length;i<r;i++)t=this.hashMap[this.hashMapKeys[i]],n.add(this.hashMapKeys[i],t);return n}},{key:"getParentPage",value:function(){return null}},{key:"getMaxColspan",value:function(){return 20}},{key:"getColspan",value:function(){return 20}},{key:"getCouponCodeValue",value:function(){return this.couponCode?this.couponCode.getValue().value:null}},{key:"calculate",value:function(){for(var e,t={formId:this.getId(),sessionId:this.engine.getLoader().getSessionId(),submission:[],couponCode:this.getCouponCodeValue(),language:this.engine.getI18n().getLanguageCode()},n={},i=0,r=this.flatten(),a=r.length;i<a;i++)r[i].removeAllBackendErrors(),r[i].getElementKind()===O.p.CONTROL&&void 0!==(e=r[i].getValue())&&(void 0===n[r[i].getId()]?(t.submission.push({id:r[i].getId(),value:e,hash:r[i].getHash(),typeId:r[i].getTypeId(),visible:r[i].isVisible(!0)}),n[r[i].getId()]=t.submission.length-1):(t.submission[n[r[i].getId()]].repeat=t.submission[n[r[i].getId()]].repeat||[],t.submission[n[r[i].getId()]].repeat.push({id:r[i].getId(),value:e,hash:r[i].getHash(),typeId:r[i].getTypeId(),visible:r[i].isVisible(!0)})));return function(e,n){return e.Deferred((function(i){n.trigger("calculate-start");var r="/sf_calc_actions.php?formId="+encodeURIComponent(String(t.formId))+"&PHPSESSID="+n.getEngine().getLoader().getSessionId();e.ajax({url:r,data:JSON.stringify(t),type:"POST",crossDomain:!1,contentType:"application/json",dataType:"json"}).then((function(e){n.lastCalculationServerResponse=JSON.parse(JSON.stringify(e)),n.trigger("calculate-ok",e),i.resolve(e)})).fail((function(e){n.lastCalculationServerResponse=null,n.trigger("calculate-error",e),i.reject(e)})).always((function(){n.trigger("calculate-complete")}))})).promise()}(this.getEngine().getJQuery(),this)}},{key:"getLastCalculationServerResponse",value:function(){return this.lastCalculationServerResponse||null}},{key:"getQueryParams",value:function(){var e,t,n=/\+/g,i=/([^&=]+)=?([^&]*)/g,r=function(e){var t;t=e.replace(n," ").replace("[%ANDCHAR%]","&");try{return decodeURIComponent(t)}catch(i){return t=t.replace(/\[%ANDCHAR%\]/g,"&"),Ci.a.getInstance().track("decode_URI_failure_after_submit"),decodeURIComponent(t)}},a=window.location.search.substring(1);for(e={};t=i.exec(a);)e[r(t[1])]=r(t[2]);return e}},{key:"submit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O.F.SUBMIT,t=arguments.length>1?arguments[1]:void 0;void 0===(t=t||{}).targetPage&&(t.targetPage=null);var n=this.getQueryParams(),i=n.hasOwnProperty("instance")&&n.instance,r=!!window.mobileApp,a=null;r&&window.mobileApp.userId&&(a=parseInt(window.mobileApp.userId));for(var o,s={action:e,formId:this.getId(),location:i&&void 0!==n.refEn&&null!==n.refEn?atob(n.refEn):"undefined"!==typeof n.ref?n.ref:window.location.toString(),referrer:i&&void 0!==n._referrerEn_&&null!==n._referrerEn_?atob(n._referrerEn_):"undefined"!==typeof n._referrer_?n._referrer_:document.referrer.toString(),partial:!1,sessionId:this.engine.getLoader().getSessionId(),submission:[],sessionKey:this.engine.getUploadsService().getSessionKey(),submissionXMLDateTimeStart:this.engine.getLoader().getLoaderDependency(O.M.SUBMISSION_XML_DATETIME_START),currentPage:this.getCurrentPageIndex(),targetPage:t.targetPage,totalPages:this.getNumberOfPages(),couponCode:this.getCouponCodeValue(),language:this.engine.getI18n().getLanguageCode(),differenceBetweenClientAndServerTime:this.engine.getLoader().getLoaderDependency(O.M.DIFFERENCE_BETWEEN_CLIENT_AND_SERVER_TIME),wixUserSessionToken:null!=document.body.getAttribute("data-wix-user-token")?document.body.getAttribute("data-wix-user-token"):null,isMobileApp:r,submissionUserId:a},l={},c=0,u=this.flatten(),d=u.length;c<d;c++){var p=u[c];if(p.getTypeId()===b.a.CONTAINER_TYPE_REPEATABLE_GROUP){var h=p;h.removeRepeatableAttributes(h)}}for(var _=0,g=this.flatten(),m=g.length;_<m;_++){var f=g[_];if(f.getTypeId()===b.a.CONTAINER_TYPE_REPEATABLE_GROUP){var E=f;E.resetRepeatableElementAttributes()}}for(var y=0,T=this.flatten(),v=T.length;y<v;y++){var C=T[y];if(C.removeAllBackendErrors(),C.getElementKind()===O.p.CONTROL&&void 0!==(o=C.getValue()))if(void 0===l[C.getId()]){var I=C.getFirstParentOfType(b.a.CONTAINER_TYPE_REPEATABLE_GROUP),R="";I&&(R=I.getRepeatableGroupPathAttribute()),s.submission.push({id:C.getId(),value:o,hash:C.getHash(),typeId:C.getTypeId(),visible:C.isVisible(!0),path:R}),l[C.getId()]=s.submission.length-1}else{var P=C.getFirstParentOfType(b.a.CONTAINER_TYPE_REPEATABLE_GROUP),N="";P&&(N=P.getRepeatableGroupPathAttribute()),s.submission[l[C.getId()]].repeat=s.submission[l[C.getId()]].repeat||[],s.submission[l[C.getId()]].repeat.push({id:C.getId(),value:o,hash:C.getHash(),typeId:C.getTypeId(),visible:C.isVisible(!0),path:N})}}return this.removeAllBackendErrors(),this.captcha.removeAllBackendErrors(),s.submission.push({id:this.captcha.getId(),value:this.captcha.getValue()||null,hash:this.captcha.getHash(),typeId:this.captcha.getTypeId(),visible:this.captcha.isVisible()}),s.submission.push({id:this.getId(),value:null,hash:this.getHash(),typeId:this.getTypeId(),visible:!0}),function(t,n){return lt.a.ENABLE_SUBMISSION_PREVENTION_ON_QUIZ_TIMER_EXPIRATION&&O.F.SWITCH_PAGE!==e&&-1===n.engine.getLoader().getLoaderDependency(O.M.CURRENT_QUIZ_TIMER)?t.Deferred((function(e){e.reject(new Error(n.getEngine().getI18n().translateText("textdef_144")))})).promise():t.Deferred((function(i){n.trigger("submit-start",e),t(n.getRootNode()).find("[data-role=control][data-type=form-action-bar] button[data-role]").each((function(){this.disabled=!0,O.F.SUBMIT===e&&"submit"==this.getAttribute("data-role")&&(n.getEngine().getLoader().getLoaderType()===O.B.VIEW&&!1===n.getEngine().getLoader().isEnabledAutoSubmit()?this.setAttribute("data-autosubmit",""):this.setAttribute("data-is-submitting",""))}));var r=window.location.toString(),a=n.getEngine().getLoader().getLoaderDependency(O.M.SELECTED_PAYMENT_PROCESSOR_TYPE_ID);if(null!==a&&(s.selectedPaymentProcessorTypeId=Math.abs(a),s.selectedPaymentProcessorExtraParams=n.getEngine().getLoader().getLoaderDependency(O.M.SELECTED_PAYMENT_PROCESSOR_EXTRA_DATA),s.isSecondaryPaymentProcessorTypeId=a<0),-1===r.indexOf("PHPSESSID")&&(r=n.addParameterToUrl(r,"PHPSESSID",n.getEngine().getLoader().getSessionId())),n.getEngine().getLoader().getLoaderType()===O.B.VIEW&&n.getEngine().getLoader().getViewFormEnvironmentContext()===O.wb.MOBILE_APP_OFFLINE){var o={ok:!0,action:O.F.SWITCH_PAGE};n.trigger("submit-ok",o),t(n.getRootNode()).find("[data-role=control][data-type=form-action-bar] button[data-role]").each((function(){this.disabled=!1,O.F.SUBMIT===e&&"submit"==this.getAttribute("data-role")&&this.removeAttribute("data-is-submitting")})),n.trigger("submit-complete",e),O.F.SUBMIT===e?window.postMessage(JSON.stringify({type:"submission-data",submission:s}),"*"):e===O.F.SAVE_FOR_LATER?window.postMessage(JSON.stringify({type:"save-for-later-data",submission:s}),"*"):i.resolve(o)}else t.ajax({url:r,data:JSON.stringify(s),type:"POST",crossDomain:!1,contentType:"application/json",dataType:"json",headers:{"X-PHPSESSID":s.sessionId}}).then((function(e){n.trigger("submit-ok",e),i.resolve(e)})).fail((function(e){var t;n.trigger("submit-error",e),null===(t=CFTracker)||void 0===t||t.event("form_submit_invalid_response"),i.reject(e)})).always((function(){t(n.getRootNode()).find("[data-role=control][data-type=form-action-bar] button[data-role]").each((function(){this.disabled=!1,O.F.SUBMIT===e&&"submit"==this.getAttribute("data-role")&&this.removeAttribute("data-is-submitting")})),n.trigger("submit-complete",e)}))})).promise()}(this.getEngine().getJQuery(),this)}},{key:"addParameterToUrl",value:function(e,t,n){if(e){var i=e.indexOf("#"),r="",a=e,o=[e];i>-1&&(r="#"+(o=e.split("#"))[1],a=o[0]);var s=a.indexOf("?");return(a+=s>-1?"&"+t+"="+n:"?"+t+"="+n)+r}}},{key:"reset",value:function(){for(var e=this.engine.getLoader().getRules().getDOMAbstractionLayer(),t=0,n=this.flatten(),i=n.length;t<i;t++)if(n[t].getElementKind()===O.p.CONTROL){n[t].onReset();var r="control_".concat(n[t].getId());e.trigger("control-event",Xc.a.TEXT_INPUT,n[t].getRootNode(),r,null)}e.clearControlsCache(),e.trigger("compute-form-rules"),this.getCaptcha().onReset()}},{key:"updateErrorsText",value:function(){var e=this.getErrors();if(null===e)this.getRootNode().removeAttribute("data-has-errors"),this.errorsDOMNode.parentNode&&this.errorsDOMNode.parentNode.removeChild(this.errorsDOMNode);else{this.getRootNode().setAttribute("data-has-errors","1"),this.errorsDOMNode.innerHTML="";for(var t=0,n=e.length;t<n;t++)this.appendErrorNode(JSON.parse(JSON.stringify(e[t])));this.getRootNode().appendChild(this.errorsDOMNode)}}},{key:"appendErrorNode",value:function(e){var t="generic-backend-error.html";switch(e.code){case r.a.NET_ERR_FATAL_SUBMISSION_BAD_RESPONSE:t="2099-submission-fatal-error.html";break;case r.a.BACKEND_ERR_FATAL_FORM_IS_INACTIVE:case r.a.BACKEND_ERR_FATAL_FORM_IS_UNAVAILABLE:case r.a.BACKEND_ERR_FATAL_INVALID_FORM_DOMAIN:case r.a.BACKEND_ERR_FATAL_FORM_GENERAL_MAINTENANCE:case r.a.BACKEND_ERR_FATAL_FORM_GENERIC_EXCEPTION:}!function(n,i){n.getEngine().getResourceManager().get("/modules/Typescript/Form/resources/form-errors/"+t).then((function(t){if(n.hasError(e.code)){var r=new Nt.a(t);i(n.errorsDOMNode).append(r.parse(e))}})).fail((function(t){if(n.hasError(e.code)){var r=new Nt.a('<div data-role="error" data-error-code="{{code}}">\n{{code}} - {{message}}</div>');i(n.errorsDOMNode).append(r.parse(e))}}))}(this,this.engine.getJQuery())}},{key:"addError",value:function(e,t){var i=y()(_()(n.prototype),"addError",this).call(this,e,t);return i&&this.updateErrorsText(),i}},{key:"removeError",value:function(e){var t=y()(_()(n.prototype),"removeError",this).call(this,e);return t&&this.updateErrorsText(),t}},{key:"removeAllBackendErrors",value:function(){var e=y()(_()(n.prototype),"removeAllBackendErrors",this).call(this);return e&&this.updateErrorsText(),e}},{key:"withErrors",value:function(e){return y()(_()(n.prototype),"withErrors",this).call(this,e),this.updateErrorsText(),this}},{key:"withRules",value:function(e){return this.rules=e||null,this}},{key:"getRules",value:function(){return this.rules||null}},{key:"updateI18n",value:function(){this.engine.getI18n().translateDOMNode(document.body)}},{key:"getCurrentPageIndex",value:function(){return this.currentPageIndex}},{key:"setCurrentPageIndex",value:function(e){if(null!==e&&("number"!==typeof e||~~e!==e))throw new Error("Invalid argument: int expected!");if(e!==this.currentPageIndex){this.currentPageIndex=e;for(var t=0,n=this.getNumberOfPages();t<n;t++)null===this.currentPageIndex||t===this.currentPageIndex?this.getPageByIndex(t).getRootNode().setAttribute("data-is-current-page","1"):this.getPageByIndex(t).getRootNode().removeAttribute("data-is-current-page");this.trigger("page-changed",this.currentPageIndex)}}},{key:"isSelectable",value:function(){return!1}},{key:"isDragable",value:function(){return!1}},{key:"getWidthUnit",value:function(){var e=this.getProperty("options.widthInPixels"),t=this.getProperty("options.widthInPercents");return null!==e||null===t?"px":"%"}},{key:"setWidthUnit",value:function(e){switch(e){case"%":this.setProperty("options.widthInPixels",null),null===this.getProperty("options.widthInPercents")&&this.setProperty("options.widthInPercents",100);break;case"px":default:null===this.getProperty("options.widthInPixels")&&this.setProperty("options.widthInPixels",640)}}},{key:"setPreviewMode",value:function(e){var t=this.engine.getLoader().getLoaderDependency(O.M.FORM_SETTINGS);if(t&&t.allowPreviewMode){if((e=!!e)!==this.previewOnlyMode){if(this.previewOnlyMode=e,this.previewOnlyMode){this.rootNode.setAttribute("data-is-preview-mode-enabled","");this.previewModeListeners.push({element:window,eventName:"keydown",eventPhase:!0,callback:function(e){e.srcElement||e.target;V.a.KEY_TAB!==(e.keyCode||e.charCode)&&(L.a.getJQuery()(e.srcElement).is("[data-type=form-action-bar] button[data-role]")||L.a.getJQuery()(e.target).is("[data-type=form-action-bar] button[data-role]")||L.a.getJQuery()(e.srcElement).is("[data-type=form-captcha] input")||L.a.getJQuery()(e.target).is("[data-type=form-captcha] input"))||(e.preventDefault(),e.stopPropagation())}});for(var n=0,i=this.previewModeListeners.length;n<i;n++)this.previewModeListeners[n].element.addEventListener(this.previewModeListeners[n].eventName,this.previewModeListeners[n].callback,this.previewModeListeners[n].eventPhase)}else{this.rootNode.removeAttribute("data-is-preview-mode-enabled");for(var r=0,a=this.previewModeListeners.length;r<a;r++)this.previewModeListeners[r].element.removeEventListener(this.previewModeListeners[r].eventName,this.previewModeListeners[r].callback,this.previewModeListeners[r].eventPhase),this.previewModeListeners[r]=null;this.previewModeListeners.splice(0,this.previewModeListeners.length)}S.a.refreshFrameHeightOnWix()}}else console.warn("Form::setPreviewMode(): Request ignored, form does not support preview mode!")}},{key:"isPreviewModeEnabled",value:function(){return this.previewOnlyMode}},{key:"getConfiguration",value:function(){return this.configuration}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"registerOrphanElement",value:function(e){if(!e)throw new Error("Invalid argument: element: IFormElement expected!");if(void 0!==this.orphanElementsHashMap[e.getHash()])throw new Error("Element "+e.getHash()+" is already registered as a orphan element!");this.orphanElementsHashMap[e.getHash()]=e}},{key:"unregisterOrphanElement",value:function(e){if(!e)throw new Error("Invalid argument: element: IFormElement expected!");if(void 0===this.orphanElementsHashMap[e.getHash()])throw new Error("Element "+e.getHash()+" was not previously registered as a orphan element!");delete this.orphanElementsHashMap[e.getHash()]}},{key:"setupCaptcha",value:function(){var e=this;if(this.captcha&&!this.captcha.getParent()){var t=this.engine.createElement(b.a.CONTAINER_TYPE_ROW,void 0,this);this.registerOrphanElement(t),t.appendChild(this.captcha),this.captcha.withParent(t)}setTimeout((function(){var t=e.configuration.getProperty("captchaWidthInUnits");null!==t?e.captcha.withColspan(t):e.captcha.withColspan(20);var n=e.configuration.getProperty("captchaLeftMarginInUnits");e.captcha.setMarginLeft(n)}),10)}},{key:"findElementByHashInsideOrphans",value:function(e){for(var t in this.orphanElementsHashMap)if(this.orphanElementsHashMap.hasOwnProperty(t)){var n=this.orphanElementsHashMap[t];if(n.getElementKind()===O.p.CONTAINER)for(var i=0,r=n.getChildren(),a=r.length;i<a;i++)if(r[i].getHash()===e)return r[i]}}},{key:"hasEditorSetting",value:function(e){for(var t=0,n=this.editorSettings.length;t<n;t++)if(this.editorSettings[t].getTypeId()===e)return!0;return!1}},{key:"withEditorSetting",value:function(e){if(this.hasEditorSetting(e.getTypeId()))throw new Error("Editor setting "+e.getTypeId()+" is already added in form!");return this.editorSettings.push(e),this.trigger("editor-settings-changed"),this.trigger("errors-changed",e),this.trigger("change"),this}},{key:"getEditorSettings",value:function(){return this.editorSettings.slice(0)}},{key:"removeEditorSetting",value:function(e){for(var t=0,n=this.editorSettings.length;t<n;t++)if(this.editorSettings[t]===e){this.editorSettings.splice(t,1),this.trigger("editor-settings-changed"),this.trigger("errors-changed",e),this.trigger("change"),this.engine.getLoader().execCommand("set-active-panel","editor");break}return this}},{key:"toggleEditorSettingEnabledState",value:function(e){return e.setProperty("isEnabled",!e.getProperty("isEnabled")),this.trigger("editor-settings-changed"),this.trigger("errors-changed",e),this.trigger("change"),this}},{key:"oAuthApplicationSaveData",value:function(e,t){t=S.a.clone(t);var n=this.getEditorSettingByTypeId(e),i=this.engine.getLoader();if(null!==n){for(var r in i.getUndoService().trigger("user-action","update-setting-"+e),t)t.hasOwnProperty(r)&&t.propertyIsEnumerable(r)&&n.hasProperty(r)&&n.setProperty(r,t[r]);this.trigger("editor-settings-changed"),this.trigger("errors-changed",n),this.trigger("change"),i.getCommandDispatcher().loadEditorSettingIntoPanel(n)}}},{key:"oAuthApplicationDisconnect",value:function(e){var t=this.getEditorSettingByTypeId(e);switch(this.engine.getLoader().getUndoService().trigger("user-action","update-setting-"+e),e){case K.a.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING:case K.a.PAYMENT_PROCESSOR_STRIPE_CHECKOUT_EDITOR_SETTING:case K.a.PAYMENT_PROCESSOR_SQUARE_EDITOR_SETTING:case K.a.PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING:t.oAuthDisconnect()}this.trigger("editor-settings-changed"),this.trigger("errors-changed",t),this.trigger("change")}},{key:"removeEditorSettingByTypeId",value:function(e){for(var t=0,n=this.editorSettings.length;t<n;t++)if(this.editorSettings[t].getTypeId()===e){var i=this.editorSettings.splice(t,1);this.trigger("editor-settings-changed"),this.trigger("errors-changed",i[0]),this.trigger("change");break}return this}},{key:"getEditorSettingByTypeId",value:function(e){for(var t=0,n=this.editorSettings.length;t<n;t++)if(this.editorSettings[t].getTypeId()===e)return this.editorSettings[t];return null}},{key:"setProperty",value:function(e,t){if(y()(_()(n.prototype),"setProperty",this).call(this,e,t),"options.direction"==e){var i=O.mb.LEFT;O.G.RIGHT_TO_LEFT==t&&(i=O.mb.RIGHT),this.setProperty("options.labelTextAlignment",i),this.setProperty("options.instructionsTextAlignment",i)}return this}},{key:"enumerateTranslations",value:function(){for(var e,t=[],n=0,i=this.flatten(),r=i.length;n<r;n++)if(i[n]!==this&&(e=i[n].enumerateTranslations())&&e.length)for(var a=0,o=e.length;a<o;a++)t.push(e[a]);var s=[];this.getHeader()&&s.push(this.getHeader()),this.getCaptcha()&&s.push(this.getCaptcha()),this.getActionBar()&&s.push(this.getActionBar());for(var l=0,c=s.length;l<c;l++)if((e=s[l].enumerateTranslations())&&e.length)for(var u=0,d=e.length;u<d;u++)t.push(e[u]);return t}},{key:"initApplicationControls",value:function(){var e=this,t=this.getConfiguration().getProperty("linkedInAutoFill");return t&&this.getChildren().forEach((function(n){if(n.getTypeId()===b.a.CONTAINER_TYPE_PAGE||n.getTypeId()===b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE){var i=n.getDOMInsertionNode();if(!i.querySelector('[data-role="control"][data-type="linkedin-autofill"]')){var r=document.createElement("div");r.setAttribute("data-role","control"),r.setAttribute("data-type","linkedin-autofill"),r.innerHTML='\n                    <div>\n                        <button type="button">\n                            <span class="linkedin-logo">IN</span>\n                            <div class="linkedin-button-text-container">\n                                <span data-i18n-text="edt_text_autofill_with">Autofill with</span> <strong>LinkedIn</strong>\n                            </div>\n                        </button>\n                    </div>\n                ',r.addEventListener("click",(function(){var e=screen.width/2-175,n=screen.height/2-250;window.open(t.authorizeURI,"linkedInWindow","toolbar=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=350, height=500, top="+n+", left="+e)})),window.addEventListener("message",(function(t){var n=t.data;for(var i in n)if(n.hasOwnProperty(i))try{if(-1===i.indexOf("-"))e.getElementById(+i).setProperty("value.value",n[i]);else{var r=i.split("-"),a=e.getElementById(+r[0]),o=a.getPropertyDescriptorByInputIndex(+r[1]).targetPropertyFQN;a.setProperty(o,n[i])}}catch(t){}})),i.insertAdjacentElement("afterbegin",r)}}})),this}},{key:"getMasterFont",value:function(){var e=this.engine.getTheme().getMergedProperties();return Object(Rd.a)(e)}},{key:"setAllFonts",value:function(e){var t=this.engine.getTheme();t.setProperty("form_font_family",e),t.setProperty("instructions_font_family",e),t.setProperty("input_font_family",e),t.setProperty("error_font_family",e),t.setProperty("button_font_family",e)}},{key:"getMasterTextColor",value:function(){var e=this.engine.getTheme().getMergedProperties();return Object(Rd.b)(e)}},{key:"setAllTextColor",value:function(e){var t=this.engine.getTheme();t.setProperty("label_normal_color",e),t.setProperty("instructions_normal_color",e),t.setProperty("input_normal_color",e),t.setProperty("button_secondary_normal_color",e)}}],[{key:"getConfiguration",value:function(){return null}},{key:"addNormalizationSelector",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"!==typeof e||""===e)throw new Error("Invalid argument: expected string not empty!");if(null!==t&&"function"!==typeof t)throw new Error("Invalid argument: ");n.NORMALIZE_RULES.push({cssSelector:e,callback:t})}}]),n}(vn.a);function Ld(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(Sd,"NORMALIZE_RULES",[]),v()(Sd,"nodeName","form"),v()(Sd,"attributes",{}),v()(Sd,"runtime",null);var Dd=function(e){u()(n,e);var t=Ld(n);function n(e){var i;return o()(this,n),i=t.call(this),v()(A()(i),"items",{}),v()(A()(i),"length",0),v()(A()(i),"document",void 0),v()(A()(i),"onChange",void 0),v()(A()(i),"virtualControl",null),i.document=e,i.init(),i}return l()(n,[{key:"has",value:function(e){return e&&this.items[e.getHash()]===e}},{key:"add",value:function(e){return e&&!this.has(e)&&(this.items[e.getHash()]=e,this.length++,this.trigger("add",e),this.onChange()),this}},{key:"remove",value:function(e){return e&&this.has(e)&&(this.length--,delete this.items[e.getHash()],this.trigger("remove",e),this.onChange()),this}},{key:"set",value:function(e){if(e&&1===this.length&&this.has(e))return this;this.clear(),e&&this.add(e)}},{key:"getLength",value:function(){return this.length}},{key:"clear",value:function(){if(this.length>0){var e=this.getItems();this.length=0,this.items={};for(var t=0,n=e.length;t<n;t++)this.trigger("remove",e[t]);this.onChange()}return this}},{key:"getItems",value:function(){var e=[];if(this.length>0)for(var t in this.items)this.items.hasOwnProperty(t)&&this.items.propertyIsEnumerable(t)&&e.push(this.items[t]);return e}},{key:"init",value:function(){var e;(e=this).onChange=ie.a.create((function(){e.trigger("change")}),0),e.document.on("node-removal",(function(t){if(t)for(var n=t.flatten(),i=n.length,r=0;r<i;r++)e.remove(n[r])}))}},{key:"synchronize",value:function(){for(var e=this.getItems(),t=0,n=e.length;t<n;t++)this.document.getElementByHash(e[t].getHash())||this.remove(e[t])}},{key:"isSingle",value:function(){return 1===this.length}},{key:"rebuildVirtualSelectionControl",value:function(){return this.length>1?this.virtualControl=new Nd(this.document,this.getItems()):this.virtualControl=null,this}},{key:"getVirtualControl",value:function(){return this.virtualControl}}]),n}(ir.a),wd=function(){function e(t,n){o()(this,e),v()(this,"engine",void 0),v()(this,"document",void 0),this.engine=t,this.document=n}return l()(e,[{key:"dispatch",value:function(t,n,i,r){for(var a,o=0,s=e.hooks.length;o<s;o++)a=!0,null!==e.hooks[o].elementTypeId&&("number"===typeof e.hooks[o].elementTypeId?e.hooks[o].elementTypeId!==t.getTypeId()&&(a=!1):P()(e.hooks[o].elementTypeId,Array)?-1===e.hooks[o].elementTypeId.indexOf(t.getTypeId())&&(a=!1):a=!1),a&&null!==e.hooks[o].propertySelector&&("string"===typeof e.hooks[o].propertySelector?n!==e.hooks[o].propertySelector&&(a=!1):P()(e.hooks[o].propertySelector,RegExp)&&e.hooks[o].propertySelector.test(n)||(a=!1)),a&&e.hooks[o].callback(this.engine,this.document,t,n,i,r)}}],[{key:"addPropertyChangeEventListener",value:function(t,n,i){if(null!==t&&"number"!==typeof t){if(!P()(t,Array))throw new Error("Invalid argument elementTypeId: null|number|number[] expected!");if(!t.length)throw new Error("Invalid argument: elementTypeId is array, but has no elements (GlobalEventHandler.addPropertyChangeEventListener)");for(var r=0,a=t.length;r<a;r++)if("number"!=typeof t[r])throw new Error("Invalid argument elementTypeId: null|number|number[] expected!")}if(null!==n&&(!n||"string"!==typeof n&&!P()(n,RegExp)))throw new Error("Invalid argument: propertyName: expected null|string|RegExp");if(!i||!P()(i,Function))throw new Error("Invalid argument: callbackFunction: expected <IGlobalEventHandlerCallback>Function");e.hooks.push({elementTypeId:t,propertySelector:n,callback:i})}}]),e}();v()(wd,"hooks",[]);var kd=n(10),Md=n(63),xd=n(237);function Ud(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Fd=function(e){u()(n,e);var t=Ud(n);function n(e,i){var r,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return o()(this,n),r=t.call(this),v()(A()(r),"fonts",[]),v()(A()(r),"loadedFonts",{}),v()(A()(r),"jq",void 0),a&&r.initializeFonts(e),r.jq=i,r}return l()(n,[{key:"initializeFonts",value:function(e){var t=this;e.get("/modules/Typescript/Form/resources/google-web-fonts.json").then((function(e){t.fonts=JSON.parse(e).sort((function(e,t){var n=e.family.toLowerCase(),i=t.family.toLowerCase();return n===i?0:n<i?-1:1})),t.trigger("load")})).fail((function(e){this.trigger("error",e)}))}},{key:"getFontsList",value:function(){for(var e,t=[],n=0,i=this.fonts.length;n<i;n++)e=this.fonts[n].family.toLowerCase().replace(/ /g,"-"),t.push({fontFamily:this.fonts[n].family,cssClassAaBbCc:"gf-"+e+"-abc",cssClassFontName:"gf-"+e});return t}},{key:"getFontByName",value:function(e){for(var t=e.toLowerCase(),n=0,i=this.fonts.length;n<i;n++){var r=this.fonts[n].family.toLowerCase().replace(/ /g,"-");if(this.fonts[n].family.toLowerCase()===t)return{fontFamily:this.fonts[n].family,cssClassAaBbCc:"gf-"+r+"-abc",cssClassFontName:"gf-"+r}}return null}},{key:"loadFont",value:function(e){if(void 0!==this.loadedFonts[e])return this.loadedFonts[e];var t=function(t,n){return e?t.isSystemFont(e)?n.Deferred((function(e){e.resolve(!0)})).promise():n.Deferred((function(t){var n=document.createElement("link");n.setAttribute("type","text/css"),n.setAttribute("rel","stylesheet"),n.setAttribute("href","//fonts.googleapis.com/css?family="+encodeURIComponent(e)),n.onload=function(){t.resolve(!0)},n.onerror=function(){t.reject(new Error('Failed to load Google Web Font: "'+e+'"'))},document.getElementsByTagName("head")[0].appendChild(n)})).promise():n.Deferred((function(t){t.reject(new Error("Invalid font name:"+JSON.stringify(e)))}))}(this,this.jq);return this.loadedFonts[e]=t,t}},{key:"isSystemFont",value:function(e){for(var t=e.split(","),i=0,r=t.length;i<r;i++){var a=t[i].replace(/(^[ '"]+|[ "']+$)/g,"").toLowerCase();if(n.SYSTEM_FONTS.indexOf(a)>-1)return!0}return!1}}]),n}(ir.a);function Bd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}v()(Fd,"SYSTEM_FONTS",["open sans","georgia","panatino linotype","palatino linotype","book antiqua","palatino","times new roman","times","arial","helvetica","arial black","gadget","comic sans ms","cursive","impact","charcoal","lucida sans unicode","lucida grande","tahoma","geneva","verdana","courier new","courier","monospace","sans-serif","serif"]);var Yd=function(e){u()(n,e);var t=Bd(n);function n(e,i){var r;return o()(this,n),r=t.call(this),v()(A()(r),"document",void 0),v()(A()(r),"jq",void 0),r.document=e,r.jq=i,r.init(),r}return l()(n,[{key:"init",value:function(){!function(e,t){e(t.document.getRootNode()).on("keydown","label[data-role=checkbox], label[data-role=radio], div[data-role=star]",(function(t){var n=t.keyCode||t.charCode;13!==n&&10!==n&&32!==n||(e(this).trigger("click"),t.preventDefault(),t.stopPropagation())})).on("focus","[data-is-single-focused], [data-is-single-focused] *",(function(t){e(this).is("[data-is-focus-target]")||e(this).closest("[data-is-single-focused]").find("[data-is-focus-target]").focus()})).on("keydown","[data-is-single-focused], [data-is-single-focused] *",(function(t){if(V.a.KEY_TAB===(t.keyCode||t.charCode)){var n,i=e(this).closest("div[data-role=page]").get(0)||null,r=e(this).closest("[data-is-single-focused]").get(0)||null,a=[],o=[],s=!1,l=t.shiftKey;e(i).find("input:not([disabled]), a[href]:not([disabled]), select:not([disabled]), textarea:not([disabled]), label[data-role=checkbox], label[data-role=radio], button:not([disabled]), *[data-is-single-focused]").each((function(){e.contains(r,this)||this.offsetWidth&&this.offsetHeight&&(this===r?s=!0:s?o.push(this):a.push(this))})),null!==(n=l?a.pop()||o.pop()||null:o.shift()||a.shift()||null)&&(n.focus(),document.activeElement!==n?setTimeout((function(){e(n).focus()}),0):(t.preventDefault(),t.stopPropagation()))}}))}(this.jq,this)}}]),n}(ir.a),Vd=n(125),Hd=n(104),Gd=n(155),Wd=n(146),jd=n(121),Kd=n(141),zd=n(255),Xd=function(){function e(t,n){o()(this,e),v()(this,"i18nService",void 0),v()(this,"countryCache",void 0),v()(this,"languageCache",void 0),v()(this,"countryCodeRegexp",void 0),v()(this,"userCountryCode",void 0),this.i18nService=t,this.userCountryCode=n}return l()(e,[{key:"getLanguagesList",value:function(){if(void 0===this.languageCache){this.languageCache=[];var t=[];for(var n in e.ALL)if(e.ALL.hasOwnProperty(n)&&e.ALL.propertyIsEnumerable(n))for(var i=0,r=e.ALL[n].languages.length;i<r;i++)-1===t.indexOf(e.ALL[n].languages[i].code)&&(null!==e.ALL[n].languages[i].code&&this.languageCache.push(e.ALL[n].languages[i]),t.push(e.ALL[n].languages[i].code));this.languageCache.sort((function(e,t){var n=e.name.toLowerCase(),i=t.name.toLowerCase();return n===i?0:n<i?-1:1}))}return this.languageCache}},{key:"getCountriesList",value:function(){if(void 0===this.countryCache)for(var t in this.countryCache=[],e.ALL)e.ALL.hasOwnProperty(t)&&e.ALL.propertyIsEnumerable(t)&&this.countryCache.push(e.ALL[t]);return this.countryCache}},{key:"getCountryByISOCode",value:function(t){return e.ALL[String(t||"").toUpperCase()]||null}},{key:"getCountryIdByISOCode",value:function(t){return t=String(t||"").toUpperCase(),void 0!==e.ALL[t]?e.ALL[t].id:null}},{key:"getCountryNameByISOCode",value:function(t){return t=String(t||"").toUpperCase(),void 0!==e.ALL[t]?e.ALL[t].name:null}},{key:"getCountryI18nNameByISOCode",value:function(t){return t=String(t||"").toUpperCase(),void 0!==e.ALL[t]?e.ALL[t].i18n:null}},{key:"getCountryISOCodeByCountryName",value:function(t){for(var n in t=String(t||"").toLowerCase(),e.ALL)if(e.ALL.hasOwnProperty(n)&&e.ALL.propertyIsEnumerable(n)&&(e.ALL[n].name.toLowerCase()===t||e.ALL[n].nativeName.toLowerCase()===t))return n;return null}},{key:"getCorrectedCountryName",value:function(e){return"Republic of the Congo"===e?"Congo (Republic)":"Democratic Republic of the Congo"===e?"Congo (Democratic Republic)":e}},{key:"getCountryCodeRegExp",value:function(){if(void 0!==this.countryCodeRegexp)return this.countryCodeRegexp;var t=[];for(var n in e.ALL)if(e.ALL.propertyIsEnumerable(n)&&e.ALL.hasOwnProperty(n)&&e.ALL[n].callingCodes)for(var i=0,r=e.ALL[n].callingCodes.length;i<r;i++)if(e.ALL[n].callingCodes[i]){for(var a=!0,o=0,s=t.length;o<s;o++)if(t[o]===e.ALL[n].callingCodes[i]){a=!1;break}a&&t.push(e.ALL[n].callingCodes[i])}return t.sort((function(e,t){var n,i;return(n=e.length)===(i=t.length)?e===t?0:t>e?1:-1:i-n})),this.countryCodeRegexp=new RegExp("^(\\+|00)("+t.join("|")+")"),this.countryCodeRegexp}},{key:"getCountryCodesByCallingArea",value:function(t){var n=[];for(var i in t=String(t||"").replace(/^(\+|00)/g,""),e.ALL)if(e.ALL.propertyIsEnumerable(i)&&e.ALL.hasOwnProperty(i)&&e.ALL[i].callingCodes)for(var r=0,a=e.ALL[i].callingCodes.length;r<a;r++)if(e.ALL[i].callingCodes[r]===t){n.push(i);break}return n.length?n:null}},{key:"getUserCountryCode",value:function(){return this.userCountryCode}}]),e}();v()(Xd,"ALL",{AF:{name:"Afghanistan",i18n:"country_afg",nativeName:"\u0627\u0641\u063a\u0627\u0646\u0633\u062a\u0627\u0646",callingCodes:["93"],timeZones:["UTC+04:30"],id:1,index:0,code:"AF",languages:[{code:"ps",name:"Pashto",nativeName:"\u067e\u069a\u062a\u0648"},{code:"uz",name:"Uzbek",nativeName:"O\u02bbzbek"},{code:"tk",name:"Turkmen",nativeName:"T\xfcrkmen"}]},AX:{name:"Aland Islands",i18n:"country_ax",nativeName:"\xc5land",callingCodes:["358"],timeZones:["UTC+02:00"],id:2,index:1,code:"AX",languages:[{code:"sv",name:"Swedish",nativeName:"Svenska"}]},AL:{name:"Albania",i18n:"country_alb",nativeName:"Shqip\xebria",callingCodes:["355"],timeZones:["UTC+01:00"],id:3,index:2,code:"AL",languages:[{code:"sq",name:"Albanian",nativeName:"Shqip"}]},DZ:{name:"Algeria",i18n:"country_alg",nativeName:"\u0627\u0644\u062c\u0632\u0627\u0626\u0631",callingCodes:["213"],timeZones:["UTC+01:00"],id:4,index:3,code:"DZ",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},AS:{name:"American Samoa",i18n:"country_as",nativeName:"American Samoa",callingCodes:["1684"],timeZones:["UTC-11:00"],id:5,index:4,code:"AS",languages:[{code:"en",name:"English",nativeName:"English"},{code:"sm",name:"Samoan",nativeName:"gagana fa'a Samoa"}]},AD:{name:"Andorra",i18n:"country_and",nativeName:"Andorra",callingCodes:["376"],timeZones:["UTC+01:00"],id:6,index:5,code:"AD",languages:[{code:"ca",name:"Catalan",nativeName:"catal\xe0"}]},AO:{name:"Angola",i18n:"country_ang",nativeName:"Angola",callingCodes:["244"],timeZones:["UTC+01:00"],id:7,index:6,code:"AO",languages:[{code:"pt",name:"Portuguese",nativeName:"Portugu\xeas"}]},AI:{name:"Anguilla",i18n:"country_ai",nativeName:"Anguilla",callingCodes:["1264"],timeZones:["UTC-04:00"],id:8,index:7,code:"AI",languages:[{code:"en",name:"English",nativeName:"English"}]},AQ:{name:"Antarctica",i18n:"country_aq",nativeName:"Antarctica",callingCodes:null,timeZones:["UTC-03:00","UTC+03:00","UTC+05:00","UTC+06:00","UTC+07:00","UTC+08:00","UTC+10:00","UTC+12:00"],id:9,index:8,code:"AQ",languages:[{code:"en",name:"English",nativeName:"English"},{code:"ru",name:"Russian",nativeName:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"}]},AG:{name:"Antigua and Barbuda",i18n:"country_ant",nativeName:"Antigua and Barbuda",callingCodes:["1268"],timeZones:["UTC-04:00"],id:10,index:9,code:"AG",languages:[{code:"en",name:"English",nativeName:"English"}]},AR:{name:"Argentina",i18n:"country_arg",nativeName:"Argentina",callingCodes:["54"],timeZones:["UTC-03:00"],id:11,index:10,code:"AR",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"},{code:"gn",name:"Guaran\xed",nativeName:"Ava\xf1e'\u1ebd"}]},AM:{name:"Armenia",i18n:"country_arm",nativeName:"\u0540\u0561\u0575\u0561\u057d\u057f\u0561\u0576",callingCodes:["374"],timeZones:["UTC+04:00"],id:12,index:11,code:"AM",languages:[{code:"hy",name:"Armenian",nativeName:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576"},{code:"ru",name:"Russian",nativeName:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"}]},AW:{name:"Aruba",i18n:"country_aru",nativeName:"Aruba",callingCodes:["297"],timeZones:["UTC-04:00"],id:13,index:12,code:"AW",languages:[{code:"nl",name:"Dutch; flemish",nativeName:"Dutch; flemish"},{code:"pa",name:"Punjabi (Eastern)",nativeName:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40"}]},AU:{name:"Australia",i18n:"country_austra",nativeName:"Australia",callingCodes:["61"],timeZones:["UTC+05:00","UTC+06:30","UTC+07:00","UTC+08:00","UTC+09:30","UTC+10:00","UTC+10:30","UTC+11:30"],id:14,index:13,code:"AU",languages:[{code:"en",name:"English",nativeName:"English"}],regions:["Australian Capital Territory","New South Wales","Northern Territory","Queensland","South Australia","Tasmania","Victoria","Western Australia"]},AT:{name:"Austria",i18n:"country_austri",nativeName:"\xd6sterreich",callingCodes:["43"],timeZones:["UTC+01:00"],id:15,index:14,code:"AT",languages:[{code:"de",name:"German",nativeName:"Deutsch"}]},AZ:{name:"Azerbaijan",i18n:"country_aze",nativeName:"Az\u0259rbaycan",callingCodes:["994"],timeZones:["UTC+04:00"],id:16,index:15,code:"AZ",languages:[{code:"az",name:"Azerbaijani",nativeName:"az\u0259rbaycan dili"}]},BS:{name:"Bahamas",i18n:"country_baha",nativeName:"Bahamas",callingCodes:["1242"],timeZones:["UTC-05:00"],id:17,index:16,code:"BS",languages:[{code:"en",name:"English",nativeName:"English"}]},BH:{name:"Bahrain",i18n:"country_bahr",nativeName:"\u200f\u0627\u0644\u0628\u062d\u0631\u064a\u0646",callingCodes:["973"],timeZones:["UTC+03:00"],id:18,index:17,code:"BH",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},BD:{name:"Bangladesh",i18n:"country_ban",nativeName:"Bangladesh",callingCodes:["880"],timeZones:["UTC+06:00"],id:19,index:18,code:"BD",languages:[{code:"bn",name:"Bengali",nativeName:"\u09ac\u09be\u0982\u09b2\u09be"}]},BB:{name:"Barbados",i18n:"country_bar",nativeName:"Barbados",callingCodes:["1246"],timeZones:["UTC-04:00"],id:20,index:19,code:"BB",languages:[{code:"en",name:"English",nativeName:"English"}]},BY:{name:"Belarus",i18n:"country_bela",nativeName:"\u0411\u0435\u043b\u0430\u0440\u0443\u0301\u0441\u044c",callingCodes:["375"],timeZones:["UTC+03:00"],id:21,index:20,code:"BY",languages:[{code:"be",name:"Belarusian",nativeName:"\u0431\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f \u043c\u043e\u0432\u0430"},{code:"ru",name:"Russian",nativeName:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"}]},BE:{name:"Belgium",i18n:"country_belg",nativeName:"Belgi\xeb",callingCodes:["32"],timeZones:["UTC+01:00"],id:22,index:21,code:"BE",languages:[{code:"nl",name:"Dutch; flemish",nativeName:"Dutch; flemish"},{code:"fr",name:"French",nativeName:"fran\xe7ais"},{code:"de",name:"German",nativeName:"Deutsch"}]},BZ:{name:"Belize",i18n:"country_beli",nativeName:"Belize",callingCodes:["501"],timeZones:["UTC-06:00"],id:23,index:22,code:"BZ",languages:[{code:"en",name:"English",nativeName:"English"},{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},BJ:{name:"Benin",i18n:"country_ben",nativeName:"B\xe9nin",callingCodes:["229"],timeZones:["UTC+01:00"],id:24,index:23,code:"BJ",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},BM:{name:"Bermuda",i18n:"country_ber",nativeName:"Bermuda",callingCodes:["1441"],timeZones:["UTC-04:00"],id:25,index:24,code:"BM",languages:[{code:"en",name:"English",nativeName:"English"}]},BT:{name:"Bhutan",i18n:"country_bhu",nativeName:"\u02bcbrug-yul",callingCodes:["975"],timeZones:["UTC+06:00"],id:26,index:25,code:"BT",languages:[{code:"dz",name:"Dzongkha",nativeName:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41"}]},BO:{name:"Bolivia",i18n:"country_bol",nativeName:"Bolivia",callingCodes:["591"],timeZones:["UTC-04:00"],id:27,index:26,code:"BO",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"},{code:"ay",name:"Aymara",nativeName:"aymar aru"},{code:"qu",name:"Quechua",nativeName:"Runa Simi"}]},BQ:{name:"Bonaire, Sint Eustatius and Saba",i18n:"country_bq",nativeName:"Bonaire",callingCodes:["5997"],timeZones:["UTC-04:00"],id:28,index:27,code:"BQ",languages:[{code:"nl",name:"Dutch; flemish",nativeName:"Dutch; flemish"}]},BA:{name:"Bosnia and Herzegowina",i18n:"country_bos",nativeName:"Bosna i Hercegovina",callingCodes:["387"],timeZones:["UTC+01:00"],id:29,index:28,code:"BA",languages:[{code:"bs",name:"Bosnian",nativeName:"bosanski jezik"},{code:"hr",name:"Croatian",nativeName:"hrvatski jezik"},{code:"sr",name:"Serbian",nativeName:"\u0441\u0440\u043f\u0441\u043a\u0438 \u0458\u0435\u0437\u0438\u043a"}]},BW:{name:"Botswana",i18n:"country_bot",nativeName:"Botswana",callingCodes:["267"],timeZones:["UTC+02:00"],id:30,index:29,code:"BW",languages:[{code:"en",name:"English",nativeName:"English"},{code:"tn",name:"Tswana",nativeName:"Setswana"}]},BV:{name:"Bouvet Island",i18n:"country_bv",nativeName:"Bouvet\xf8ya",callingCodes:[""],timeZones:["UTC+01:00"],id:31,index:30,code:"BV",languages:[{code:"no",name:"Norwegian",nativeName:"Norsk"},{code:"nb",name:"Norwegian Bokm\xe5l",nativeName:"Norsk bokm\xe5l"},{code:"nn",name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"}]},BR:{name:"Brazil",i18n:"country_bra",nativeName:"Brasil",callingCodes:["55"],timeZones:["UTC-05:00","UTC-04:00","UTC-03:00","UTC-02:00"],id:32,index:31,code:"BR",languages:[{code:"pt",name:"Portuguese",nativeName:"Portugu\xeas"}]},IO:{name:"British Indian Ocean Territory",i18n:"country_io",nativeName:"British Indian Ocean Territory",callingCodes:["246"],timeZones:["UTC+06:00"],id:33,index:32,code:"IO",languages:[{code:"en",name:"English",nativeName:"English"}]},UM:{name:"United States Minor Outlying Islands",i18n:"country_um",nativeName:"United States Minor Outlying Islands",callingCodes:[""],timeZones:["UTC-11:00","UTC-10:00","UTC+12:00"],id:237,index:33,code:"UM",languages:[{code:"en",name:"English",nativeName:"English"}]},VG:{name:"Virgin Islands (British)",i18n:"country_bvi",nativeName:"British Virgin Islands",callingCodes:["1284"],timeZones:["UTC-04:00"],id:243,index:34,code:"VG",languages:[{code:"en",name:"English",nativeName:"English"}]},VI:{name:"Virgin Islands (U.S.)",i18n:"country_vi",nativeName:"Virgin Islands of the United States",callingCodes:["1340"],timeZones:["UTC-04:00"],id:244,index:35,code:"VI",languages:[{code:"en",name:"English",nativeName:"English"}]},BN:{name:"Brunei Darussalam",i18n:"country_bru",nativeName:"Negara Brunei Darussalam",callingCodes:["673"],timeZones:["UTC+08:00"],id:34,index:36,code:"BN",languages:[{code:"ms",name:"Malay",nativeName:"bahasa Melayu"}]},BG:{name:"Bulgaria",i18n:"country_bul",nativeName:"\u0411\u044a\u043b\u0433\u0430\u0440\u0438\u044f",callingCodes:["359"],timeZones:["UTC+02:00"],id:35,index:37,code:"BG",languages:[{code:"bg",name:"Bulgarian",nativeName:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a"}]},BF:{name:"Burkina Faso",i18n:"country_burk",nativeName:"Burkina Faso",callingCodes:["226"],timeZones:["UTC"],id:36,index:38,code:"BF",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"},{code:"ff",name:"Fula",nativeName:"Fulfulde"}]},BI:{name:"Burundi",i18n:"country_buru",nativeName:"Burundi",callingCodes:["257"],timeZones:["UTC+02:00"],id:37,index:39,code:"BI",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"},{code:"rn",name:"Kirundi",nativeName:"Ikirundi"}]},KH:{name:"Cambodia",i18n:"country_camb",nativeName:"K\xe2mp\u016dch\xe9a",callingCodes:["855"],timeZones:["UTC+07:00"],id:38,index:40,code:"KH",languages:[{code:"km",name:"Khmer",nativeName:"\u1781\u17d2\u1798\u17c2\u179a"}]},CM:{name:"Cameroon",i18n:"country_came",nativeName:"Cameroon",callingCodes:["237"],timeZones:["UTC+01:00"],id:39,index:41,code:"CM",languages:[{code:"en",name:"English",nativeName:"English"},{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},CA:{name:"Canada",i18n:"country_can",nativeName:"Canada",callingCodes:["1"],timeZones:["UTC-08:00","UTC-07:00","UTC-06:00","UTC-05:00","UTC-04:00","UTC-03:30"],id:40,index:42,code:"CA",languages:[{code:"en",name:"English",nativeName:"English"},{code:"fr",name:"French",nativeName:"fran\xe7ais"}],regions:["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Northwest Territories","Nova Scotia","Nunavut","Ontario","Prince Edward Island","Quebec","Saskatchewan","Yukon"]},CV:{name:"Cabo Verde",i18n:"country_cap",nativeName:"Cabo Verde",callingCodes:["238"],timeZones:["UTC-01:00"],id:41,index:43,code:"CV",languages:[{code:"pt",name:"Portuguese",nativeName:"Portugu\xeas"}]},KY:{name:"Cayman Islands",i18n:"country_cym",nativeName:"Cayman Islands",callingCodes:["1345"],timeZones:["UTC-05:00"],id:42,index:44,code:"KY",languages:[{code:"en",name:"English",nativeName:"English"}]},CF:{name:"Central African Republic",i18n:"country_cen",nativeName:"K\xf6d\xf6r\xf6s\xease t\xee B\xeaafr\xeeka",callingCodes:["236"],timeZones:["UTC+01:00"],id:43,index:45,code:"CF",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"},{code:"sg",name:"Sango",nativeName:"y\xe2ng\xe2 t\xee s\xe4ng\xf6"}]},TD:{name:"Chad",i18n:"country_cha",nativeName:"Tchad",callingCodes:["235"],timeZones:["UTC+01:00"],id:44,index:46,code:"TD",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"},{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},CL:{name:"Chile",i18n:"country_chil",nativeName:"Chile",callingCodes:["56"],timeZones:["UTC-06:00","UTC-04:00"],id:45,index:47,code:"CL",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},CN:{name:"China",i18n:"country_chin",nativeName:"\u4e2d\u56fd",callingCodes:["86"],timeZones:["UTC+08:00"],id:46,index:48,code:"CN",languages:[{code:"yue",name:"Yue",nativeName:"Yue",manuallyAdded:!0},{code:"wu",name:"Wu",nativeName:"Wu",manuallyAdded:!0},{code:"zh",name:"Chinese",nativeName:"\u4e2d\u6587 (Zh\u014dngw\xe9n)"}]},CX:{name:"Christmas Island",i18n:"country_cx",nativeName:"Christmas Island",callingCodes:["61"],timeZones:["UTC+07:00"],id:47,index:49,code:"CX",languages:[{code:"en",name:"English",nativeName:"English"}]},CC:{name:"Cocos (Keeling) Islands",i18n:"country_cc",nativeName:"Cocos (Keeling) Islands",callingCodes:["61"],timeZones:["UTC+06:30"],id:48,index:50,code:"CC",languages:[{code:"en",name:"English",nativeName:"English"}]},CO:{name:"Colombia",i18n:"country_col",nativeName:"Colombia",callingCodes:["57"],timeZones:["UTC-05:00"],id:49,index:51,code:"CO",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},KM:{name:"Comoros",i18n:"country_com",nativeName:"Komori",callingCodes:["269"],timeZones:["UTC+03:00"],id:50,index:52,code:"KM",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"},{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},CG:{name:"Congo (Republic)",i18n:"country_con",nativeName:"R\xe9publique du Congo",callingCodes:["242"],timeZones:["UTC+01:00"],id:51,index:53,code:"CG",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"},{code:"ln",name:"Lingala",nativeName:"Ling\xe1la"}]},CD:{name:"Congo (Democratic Republic)",i18n:"country_con",nativeName:"R\xe9publique d\xe9mocratique du Congo",callingCodes:["243"],timeZones:["UTC+01:00","UTC+02:00"],id:52,index:54,code:"CD",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"},{code:"ln",name:"Lingala",nativeName:"Ling\xe1la"},{code:"kg",name:"Kongo",nativeName:"Kikongo"},{code:"sw",name:"Swahili",nativeName:"Kiswahili"},{code:"lu",name:"Luba-Katanga",nativeName:"Tshiluba"}]},CK:{name:"Cook Islands",i18n:"country_ck",nativeName:"Cook Islands",callingCodes:["682"],timeZones:["UTC-10:00"],id:53,index:55,code:"CK",languages:[{code:"en",name:"English",nativeName:"English"}]},CR:{name:"Costa Rica",i18n:"country_cos",nativeName:"Costa Rica",callingCodes:["506"],timeZones:["UTC-06:00"],id:54,index:56,code:"CR",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},HR:{name:"Croatia (Hrvatska)",i18n:"country_cro",nativeName:"Hrvatska",callingCodes:["385"],timeZones:["UTC+01:00"],id:56,index:57,code:"HR",languages:[{code:"sh",name:"Serbo-Croatian",nativeName:"Serbo-Croatian"},{code:"hr",name:"Croatian",nativeName:"hrvatski jezik"}]},CU:{name:"Cuba",i18n:"country_cub",nativeName:"Cuba",callingCodes:["53"],timeZones:["UTC-05:00"],id:57,index:58,code:"CU",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},CW:{name:"Cura\xe7ao",i18n:"country_cura",nativeName:"Cura\xe7ao",callingCodes:["599"],timeZones:["UTC-04:00"],id:58,index:59,code:"CW",languages:[{code:"nl",name:"Dutch; flemish",nativeName:"Dutch; flemish"},{code:"pa",name:"Punjabi (Eastern)",nativeName:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40"},{code:"en",name:"English",nativeName:"English"}]},CY:{name:"Cyprus",i18n:"country_cyp",nativeName:"\u039a\u03cd\u03c0\u03c1\u03bf\u03c2",callingCodes:["357"],timeZones:["UTC+02:00"],id:59,index:60,code:"CY",languages:[{code:"el",name:"Greek (modern)",nativeName:"\u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac"},{code:"tr",name:"Turkish",nativeName:"T\xfcrk\xe7e"},{code:"hy",name:"Armenian",nativeName:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576"}]},CZ:{name:"Czech Republic",i18n:"country_cze",nativeName:"\u010cesk\xe1 republika",callingCodes:["420"],timeZones:["UTC+01:00"],id:60,index:61,code:"CZ",languages:[{code:"cs",name:"Czech",nativeName:"\u010de\u0161tina"},{code:"sk",name:"Slovak",nativeName:"sloven\u010dina"}]},DK:{name:"Denmark",i18n:"country_den",nativeName:"Danmark",callingCodes:["45"],timeZones:["UTC-04:00","UTC-03:00","UTC-01:00","UTC","UTC+01:00"],id:61,index:62,code:"DK",languages:[{code:"da",name:"Danish",nativeName:"dansk"}]},DJ:{name:"Djibouti",i18n:"country_dji",nativeName:"Djibouti",callingCodes:["253"],timeZones:["UTC+03:00"],id:62,index:63,code:"DJ",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"},{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},DM:{name:"Dominica",i18n:"country_dom",nativeName:"Dominica",callingCodes:["1767"],timeZones:["UTC-04:00"],id:63,index:64,code:"DM",languages:[{code:"en",name:"English",nativeName:"English"}]},DO:{name:"Dominican Republic",i18n:"country_domr",nativeName:"Rep\xfablica Dominicana",callingCodes:["1809","1829","1849"],timeZones:["UTC-04:00"],id:64,index:65,code:"DO",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},EC:{name:"Ecuador",i18n:"country_ecu",nativeName:"Ecuador",callingCodes:["593"],timeZones:["UTC-06:00","UTC-05:00"],id:65,index:66,code:"EC",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},EG:{name:"Egypt",i18n:"country_egy",nativeName:"\u0645\u0635\u0631\u200e",callingCodes:["20"],timeZones:["UTC+02:00"],id:66,index:67,code:"EG",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},SV:{name:"El Salvador",i18n:"country_els",nativeName:"El Salvador",callingCodes:["503"],timeZones:["UTC-06:00"],id:67,index:68,code:"SV",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},GQ:{name:"Equatorial Guinea",i18n:"country_equ",nativeName:"Guinea Ecuatorial",callingCodes:["240"],timeZones:["UTC+01:00"],id:68,index:69,code:"GQ",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"},{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},ER:{name:"Eritrea",i18n:"country_eri",nativeName:"\u12a4\u122d\u1275\u122b",callingCodes:["291"],timeZones:["UTC+03:00"],id:69,index:70,code:"ER",languages:[{code:"ti",name:"Tigrinya",nativeName:"\u1275\u130d\u122d\u129b"},{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"},{code:"en",name:"English",nativeName:"English"}]},EE:{name:"Estonia",i18n:"country_est",nativeName:"Eesti",callingCodes:["372"],timeZones:["UTC+02:00"],id:70,index:71,code:"EE",languages:[{code:"et",name:"Estonian",nativeName:"eesti"}]},ET:{name:"Ethiopia",i18n:"country_eth",nativeName:"\u12a2\u1275\u12ee\u1335\u12eb",callingCodes:["251"],timeZones:["UTC+03:00"],id:71,index:72,code:"ET",languages:[{code:"am",name:"Amharic",nativeName:"\u12a0\u121b\u122d\u129b"}]},FK:{name:"Falkland Islands (Malvinas)",i18n:"country_fk",nativeName:"Falkland Islands",callingCodes:["500"],timeZones:["UTC-04:00"],id:72,index:73,code:"FK",languages:[{code:"en",name:"English",nativeName:"English"}]},FO:{name:"Faroe Islands",i18n:"country_fa",nativeName:"F\xf8royar",callingCodes:["298"],timeZones:["UTC+00:00"],id:73,index:74,code:"FO",languages:[{code:"fo",name:"Faroese",nativeName:"f\xf8royskt"}]},FJ:{name:"Fiji",i18n:"country_fij",nativeName:"Fiji",callingCodes:["679"],timeZones:["UTC+12:00"],id:74,index:75,code:"FJ",languages:[{code:"en",name:"English",nativeName:"English"},{code:"fj",name:"Fijian",nativeName:"vosa Vakaviti"},{code:"hi",name:"Hindi",nativeName:"\u0939\u093f\u0928\u094d\u0926\u0940"},{code:"ur",name:"Urdu",nativeName:"\u0627\u0631\u062f\u0648"}]},FI:{name:"Finland",i18n:"country_fin",nativeName:"Suomi",callingCodes:["358"],timeZones:["UTC+02:00"],id:75,index:76,code:"FI",languages:[{code:"fi",name:"Finnish",nativeName:"suomi"},{code:"sv",name:"Swedish",nativeName:"svenska"}]},FR:{name:"France",i18n:"country_fra",nativeName:"France",callingCodes:["33"],timeZones:["UTC-10:00","UTC-09:30","UTC-09:00","UTC-08:00","UTC-04:00","UTC-03:00","UTC+01:00","UTC+03:00","UTC+04:00","UTC+05:00","UTC+11:00","UTC+12:00"],id:76,index:77,code:"FR",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},GF:{name:"French Guiana",i18n:"country_gf",nativeName:"Guyane fran\xe7aise",callingCodes:["594"],timeZones:["UTC-03:00"],id:77,index:78,code:"GF",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},PF:{name:"French Polynesia",i18n:"country_pf",nativeName:"Polyn\xe9sie fran\xe7aise",callingCodes:["689"],timeZones:["UTC-10:00","UTC-09:30","UTC-09:00"],id:78,index:79,code:"PF",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},TF:{name:"French Southern Territories",i18n:"country_tf",nativeName:"Territoire des Terres australes et antarctiques fran\xe7aises",callingCodes:[""],timeZones:["UTC+05:00"],id:79,index:80,code:"TF",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},GA:{name:"Gabon",i18n:"country_gab",nativeName:"Gabon",callingCodes:["241"],timeZones:["UTC+01:00"],id:80,index:81,code:"GA",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},GM:{name:"Gambia",i18n:"country_gam",nativeName:"Gambia",callingCodes:["220"],timeZones:["UTC+00:00"],id:81,index:82,code:"GM",languages:[{code:"en",name:"English",nativeName:"English"}]},GE:{name:"Georgia",i18n:"country_geo",nativeName:"\u10e1\u10d0\u10e5\u10d0\u10e0\u10d7\u10d5\u10d4\u10da\u10dd",callingCodes:["995"],timeZones:["UTC-05:00"],id:82,index:83,code:"GE",languages:[{code:"ka",name:"Georgian",nativeName:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8"}]},DE:{name:"Germany",i18n:"country_ger",nativeName:"Deutschland",callingCodes:["49"],timeZones:["UTC+01:00"],id:83,index:84,code:"DE",languages:[{code:"de",name:"German",nativeName:"Deutsch"}]},GH:{name:"Ghana",i18n:"country_gha",nativeName:"Ghana",callingCodes:["233"],timeZones:["UTC"],id:84,index:85,code:"GH",languages:[{code:"en",name:"English",nativeName:"English"}]},GI:{name:"Gibraltar",i18n:"country_gi",nativeName:"Gibraltar",callingCodes:["350"],timeZones:["UTC+01:00"],id:85,index:86,code:"GI",languages:[{code:"en",name:"English",nativeName:"English"}]},GR:{name:"Greece",i18n:"country_gree",nativeName:"\u0395\u03bb\u03bb\u03ac\u03b4\u03b1",callingCodes:["30"],timeZones:["UTC+02:00"],id:86,index:87,code:"GR",languages:[{code:"el",name:"Greek (modern)",nativeName:"\u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac"}]},GL:{name:"Greenland",i18n:"country_gl",nativeName:"Kalaallit Nunaat",callingCodes:["299"],timeZones:["UTC-04:00","UTC-03:00","UTC-01:00","UTC+00:00"],id:87,index:88,code:"GL",languages:[{code:"kl",name:"Kalaallisut",nativeName:"kalaallisut"}]},GD:{name:"Grenada",i18n:"country_gren",nativeName:"Grenada",callingCodes:["1473"],timeZones:["UTC-04:00"],id:88,index:89,code:"GD",languages:[{code:"en",name:"English",nativeName:"English"}]},GP:{name:"Guadeloupe",i18n:"country_gp",nativeName:"Guadeloupe",callingCodes:["590"],timeZones:["UTC-04:00"],id:89,index:90,code:"GP",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},GU:{name:"Guam",i18n:"country_gu",nativeName:"Guam",callingCodes:["1671"],timeZones:["UTC+10:00"],id:90,index:91,code:"GU",languages:[{code:"en",name:"English",nativeName:"English"},{code:"ch",name:"Chamorro",nativeName:"Chamoru"},{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},GT:{name:"Guatemala",i18n:"country_gua",nativeName:"Guatemala",callingCodes:["502"],timeZones:["UTC-06:00"],id:91,index:92,code:"GT",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},GG:{name:"Guernsey",i18n:"country_gg",nativeName:"Guernsey",callingCodes:["44"],timeZones:["UTC+00:00"],id:92,index:93,code:"GG",languages:[{code:"en",name:"English",nativeName:"English"},{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},GN:{name:"Guinea",i18n:"country_gui",nativeName:"Guin\xe9e",callingCodes:["224"],timeZones:["UTC"],id:93,index:94,code:"GN",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"},{code:"ff",name:"Fula",nativeName:"Fulfulde"}]},GW:{name:"Guinea-bissau",i18n:"country_guib",nativeName:"Guin\xe9-Bissau",callingCodes:["245"],timeZones:["UTC"],id:94,index:95,code:"GW",languages:[{code:"pt",name:"Portuguese",nativeName:"Portugu\xeas"}]},GY:{name:"Guyana",i18n:"country_guy",nativeName:"Guyana",callingCodes:["592"],timeZones:["UTC-04:00"],id:95,index:96,code:"GY",languages:[{code:"en",name:"English",nativeName:"English"}]},HT:{name:"Haiti",i18n:"country_hai",nativeName:"Ha\xefti",callingCodes:["509"],timeZones:["UTC-05:00"],id:96,index:97,code:"HT",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"},{code:"ht",name:"Haitian",nativeName:"Krey\xf2l ayisyen"}]},HM:{name:"Heard Island and McDonald Islands",i18n:"country_hm",nativeName:"Heard Island and McDonald Islands",callingCodes:[""],timeZones:["UTC+05:00"],id:97,index:98,code:"HM",languages:[{code:"en",name:"English",nativeName:"English"}]},VA:{name:"Holy See (Vatican City State)",i18n:"country_va",nativeName:"Sancta Sedes",callingCodes:["379"],timeZones:["UTC+01:00"],id:98,index:99,code:"VA",languages:[{code:"la",name:"Latin",nativeName:"latine"},{code:"it",name:"Italian",nativeName:"Italiano"},{code:"fr",name:"French",nativeName:"fran\xe7ais"},{code:"de",name:"German",nativeName:"Deutsch"}]},HN:{name:"Honduras",i18n:"country_hon",nativeName:"Honduras",callingCodes:["504"],timeZones:["UTC-06:00"],id:99,index:100,code:"HN",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},HK:{name:"Hong Kong",i18n:"country_hong",nativeName:"\u9999\u6e2f",callingCodes:["852"],timeZones:["UTC+08:00"],id:100,index:101,code:"HK",languages:[{code:"en",name:"English",nativeName:"English"},{code:"zh",name:"Chinese",nativeName:"\u4e2d\u6587 (Zh\u014dngw\xe9n)"}]},HU:{name:"Hungary",i18n:"country_hun",nativeName:"Magyarorsz\xe1g",callingCodes:["36"],timeZones:["UTC+01:00"],id:101,index:102,code:"HU",languages:[{code:"hu",name:"Hungarian",nativeName:"magyar"}]},IS:{name:"Iceland",i18n:"country_ice",nativeName:"\xcdsland",callingCodes:["354"],timeZones:["UTC"],id:102,index:103,code:"IS",languages:[{code:"is",name:"Icelandic",nativeName:"\xcdslenska"}]},IN:{name:"India",i18n:"country_indi",nativeName:"\u092d\u093e\u0930\u0924",callingCodes:["91"],timeZones:["UTC+05:30"],id:103,index:104,code:"IN",languages:[{code:"te",name:"Telugu",nativeName:"Telugu"},{code:"mr",name:"Marathi",nativeName:"Marathi"},{code:"hi",name:"Hindi",nativeName:"\u0939\u093f\u0928\u094d\u0926\u0940"},{code:"en",name:"English",nativeName:"English"}]},id:{name:"Indonesia",i18n:"country_indo",nativeName:"Indonesia",callingCodes:["62"],timeZones:["UTC+07:00","UTC+08:00","UTC+09:00"],id:104,index:105,code:"ID",languages:[{code:"jv",name:"Javanese",nativeName:"Bahasa Indonesia"}]},CI:{name:"Cote D'ivoire",i18n:"country_ci",nativeName:"C\xf4te d'Ivoire",callingCodes:["225"],timeZones:["UTC"],id:55,index:106,code:"CI",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},IR:{name:"Iran",i18n:"country_iran",nativeName:"\u0627\u06cc\u0631\u0627\u0646",callingCodes:["98"],timeZones:["UTC+03:30"],id:105,index:107,code:"IR",languages:[{code:"fa",name:"Persian (Farsi)",nativeName:"\u0641\u0627\u0631\u0633\u06cc"}]},IQ:{name:"Iraq",i18n:"country_iraq",nativeName:"\u0627\u0644\u0639\u0631\u0627\u0642",callingCodes:["964"],timeZones:["UTC+03:00"],id:106,index:108,code:"IQ",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"},{code:"ku",name:"Kurdish",nativeName:"Kurd\xee"}]},IE:{name:"Ireland",i18n:"country_ire",nativeName:"\xc9ire",callingCodes:["353"],timeZones:["UTC"],id:107,index:109,code:"IE",languages:[{code:"ga",name:"Irish",nativeName:"Gaeilge"},{code:"en",name:"English",nativeName:"English"}]},IM:{name:"Isle of Man",i18n:"country_im",nativeName:"Isle of Man",callingCodes:["44"],timeZones:["UTC+00:00"],id:108,index:110,code:"IM",languages:[{code:"en",name:"English",nativeName:"English"},{code:"gv",name:"Manx",nativeName:"Gaelg"}]},IL:{name:"Israel",i18n:"country_isr",nativeName:"\u05d9\u05b4\u05e9\u05b0\u05c2\u05e8\u05b8\u05d0\u05b5\u05dc",callingCodes:["972"],timeZones:["UTC+02:00"],id:109,index:111,code:"IL",languages:[{code:"he",name:"Hebrew (modern)",nativeName:"\u05e2\u05d1\u05e8\u05d9\u05ea"},{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},IT:{name:"Italy",i18n:"country_ita",nativeName:"Italia",callingCodes:["39"],timeZones:["UTC+01:00"],id:110,index:112,code:"IT",languages:[{code:"it",name:"Italian",nativeName:"Italiano"}]},JM:{name:"Jamaica",i18n:"country_jam",nativeName:"Jamaica",callingCodes:["1876"],timeZones:["UTC-05:00"],id:111,index:113,code:"JM",languages:[{code:"en",name:"English",nativeName:"English"}]},JP:{name:"Japan",i18n:"country_jap",nativeName:"\u65e5\u672c",callingCodes:["81"],timeZones:["UTC+09:00"],id:112,index:114,code:"JP",languages:[{code:"ja",name:"Japanese",nativeName:"\u65e5\u672c\u8a9e (\u306b\u307b\u3093\u3054)"}]},JE:{name:"Jersey",i18n:"country_je",nativeName:"Jersey",callingCodes:["44"],timeZones:["UTC+01:00"],id:113,index:115,code:"JE",languages:[{code:"en",name:"English",nativeName:"English"},{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},JO:{name:"Jordan",i18n:"country_jor",nativeName:"\u0627\u0644\u0623\u0631\u062f\u0646",callingCodes:["962"],timeZones:["UTC+03:00"],id:114,index:116,code:"JO",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},KZ:{name:"Kazakhstan",i18n:"country_kaz",nativeName:"\u049a\u0430\u0437\u0430\u049b\u0441\u0442\u0430\u043d",callingCodes:["76","77"],timeZones:["UTC+05:00","UTC+06:00"],id:115,index:117,code:"KZ",languages:[{code:"kk",name:"Kazakh",nativeName:"\u049b\u0430\u0437\u0430\u049b \u0442\u0456\u043b\u0456"},{code:"ru",name:"Russian",nativeName:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"}]},KE:{name:"Kenya",i18n:"country_ken",nativeName:"Kenya",callingCodes:["254"],timeZones:["UTC+03:00"],id:116,index:118,code:"KE",languages:[{code:"en",name:"English",nativeName:"English"},{code:"sw",name:"Swahili",nativeName:"Kiswahili"}]},KI:{name:"Kiribati",i18n:"country_kir",nativeName:"Kiribati",callingCodes:["686"],timeZones:["UTC+12:00","UTC+13:00","UTC+14:00"],id:117,index:119,code:"KI",languages:[{code:"en",name:"English",nativeName:"English"}]},KW:{name:"Kuwait",i18n:"country_kuw",nativeName:"\u0627\u0644\u0643\u0648\u064a\u062a",callingCodes:["965"],timeZones:["UTC+03:00"],id:120,index:120,code:"KW",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},KG:{name:"Kyrgyzstan",i18n:"country_kyr",nativeName:"\u041a\u044b\u0440\u0433\u044b\u0437\u0441\u0442\u0430\u043d",callingCodes:["996"],timeZones:["UTC+06:00"],id:121,index:121,code:"KG",languages:[{code:"ky",name:"Kyrgyz",nativeName:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430"},{code:"ru",name:"Russian",nativeName:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"}]},LA:{name:"Lao People's Democratic Republic",i18n:"country_la",nativeName:"\u0eaa\u0e9b\u0e9b\u0ea5\u0eb2\u0ea7",callingCodes:["856"],timeZones:["UTC+07:00"],id:122,index:122,code:"LA",languages:[{code:"lo",name:"Lao",nativeName:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7"}]},LV:{name:"Latvia",i18n:"country_lat",nativeName:"Latvija",callingCodes:["371"],timeZones:["UTC+02:00"],id:123,index:123,code:"LV",languages:[{code:"lv",name:"Latvian",nativeName:"latvie\u0161u valoda"}]},LB:{name:"Lebanon",i18n:"country_leb",nativeName:"\u0644\u0628\u0646\u0627\u0646",callingCodes:["961"],timeZones:["UTC+02:00"],id:124,index:124,code:"LB",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"},{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},LS:{name:"Lesotho",i18n:"country_les",nativeName:"Lesotho",callingCodes:["266"],timeZones:["UTC+02:00"],id:125,index:125,code:"LS",languages:[{code:"en",name:"English",nativeName:"English"},{code:"st",name:"Southern Sotho",nativeName:"Sesotho"}]},LR:{name:"Liberia",i18n:"country_libe",nativeName:"Liberia",callingCodes:["231"],timeZones:["UTC"],id:126,index:126,code:"LR",languages:[{code:"en",name:"English",nativeName:"English"}]},LY:{name:"Libyan Arab Jamahiriya",i18n:"country_liby",nativeName:"\u200f\u0644\u064a\u0628\u064a\u0627",callingCodes:["218"],timeZones:["UTC+01:00"],id:127,index:127,code:"LY",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},LI:{name:"Liechtenstein",i18n:"country_lie",nativeName:"Liechtenstein",callingCodes:["423"],timeZones:["UTC+01:00"],id:128,index:128,code:"LI",languages:[{code:"de",name:"German",nativeName:"Deutsch"}]},LT:{name:"Lithuania",i18n:"country_lit",nativeName:"Lietuva",callingCodes:["370"],timeZones:["UTC+02:00"],id:129,index:129,code:"LT",languages:[{code:"lt",name:"Lithuanian",nativeName:"lietuvi\u0173 kalba"}]},LU:{name:"Luxembourg",i18n:"country_lux",nativeName:"Luxembourg",callingCodes:["352"],timeZones:["UTC+01:00"],id:130,index:130,code:"LU",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"},{code:"de",name:"German",nativeName:"Deutsch"},{code:"lb",name:"Luxembourgish",nativeName:"L\xebtzebuergesch"}]},MO:{name:"Macau",i18n:"country_mo",nativeName:"\u6fb3\u9580",callingCodes:["853"],timeZones:["UTC+08:00"],id:131,index:131,code:"MO",languages:[{code:"zh",name:"Chinese",nativeName:"\u4e2d\u6587 (Zh\u014dngw\xe9n)"},{code:"pt",name:"Portuguese",nativeName:"Portugu\xeas"}]},MK:{name:"Macedonia",i18n:"country_mac",nativeName:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0438\u0458\u0430",callingCodes:["389"],timeZones:["UTC+01:00"],id:132,index:132,code:"MK",languages:[{code:"mk",name:"Macedonian",nativeName:"\u043c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438 \u0458\u0430\u0437\u0438\u043a"}]},MG:{name:"Madagascar",i18n:"country_mad",nativeName:"Madagasikara",callingCodes:["261"],timeZones:["UTC+03:00"],id:133,index:133,code:"MG",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"},{code:"mg",name:"Malagasy",nativeName:"fiteny malagasy"}]},MW:{name:"Malawi",i18n:"country_malaw",nativeName:"Malawi",callingCodes:["265"],timeZones:["UTC+02:00"],id:134,index:134,code:"MW",languages:[{code:"en",name:"English",nativeName:"English"},{code:"ny",name:"Chichewa",nativeName:"chiChe\u0175a"}]},MY:{name:"Malaysia",i18n:"country_malay",nativeName:"Malaysia",callingCodes:["60"],timeZones:["UTC+08:00"],id:135,index:135,code:"MY",languages:[{code:"my",name:"Malaysian",nativeName:"\u0628\u0647\u0627\u0633 \u0645\u0644\u064a\u0633\u064a\u0627"}]},MV:{name:"Maldives",i18n:"country_mald",nativeName:"Maldives",callingCodes:["960"],timeZones:["UTC+05:00"],id:136,index:136,code:"MV",languages:[{code:"dv",name:"Divehi",nativeName:"\u078b\u07a8\u0788\u07ac\u0780\u07a8"}]},ML:{name:"Mali",i18n:"country_mali",nativeName:"Mali",callingCodes:["223"],timeZones:["UTC"],id:137,index:137,code:"ML",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},MT:{name:"Malta",i18n:"country_malt",nativeName:"Malta",callingCodes:["356"],timeZones:["UTC+01:00"],id:138,index:138,code:"MT",languages:[{code:"mt",name:"Maltese",nativeName:"Malti"},{code:"en",name:"English",nativeName:"English"}]},MH:{name:"Marshall Islands",i18n:"country_mar",nativeName:"M\u0327aje\u013c",callingCodes:["692"],timeZones:["UTC+12:00"],id:139,index:139,code:"MH",languages:[{code:"en",name:"English",nativeName:"English"},{code:"mh",name:"Marshallese",nativeName:"Kajin M\u0327aje\u013c"}]},MQ:{name:"Martinique",i18n:"country_mart",nativeName:"Martinique",callingCodes:["596"],timeZones:["UTC-04:00"],id:140,index:140,code:"MQ",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},MR:{name:"Mauritania",i18n:"country_mauritn",nativeName:"\u0645\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u0627",callingCodes:["222"],timeZones:["UTC"],id:141,index:141,code:"MR",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},MU:{name:"Mauritius",i18n:"country_maurits",nativeName:"Maurice",callingCodes:["230"],timeZones:["UTC+04:00"],id:142,index:142,code:"MU",languages:[{code:"en",name:"English",nativeName:"English"}]},YT:{name:"Mayotte",i18n:"country_yt",nativeName:"Mayotte",callingCodes:["262"],timeZones:["UTC+03:00"],id:143,index:143,code:"YT",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},MX:{name:"Mexico",i18n:"country_mex",nativeName:"M\xe9xico",callingCodes:["52"],timeZones:["UTC-08:00","UTC-07:00","UTC-06:00"],id:144,index:144,code:"MX",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},FM:{name:"Micronesia (Federated States)",i18n:"country_mic",nativeName:"Micronesia",callingCodes:["691"],timeZones:["UTC+10:00","UTC+11"],id:145,index:145,code:"FM",languages:[{code:"en",name:"English",nativeName:"English"}]},MD:{name:"Moldova",i18n:"country_mol",nativeName:"Moldova",callingCodes:["373"],timeZones:["UTC+02:00"],id:146,index:146,code:"MD",languages:[{code:"ro",name:"Romanian",nativeName:"Rom\xe2n\u0103"}]},MC:{name:"Monaco",i18n:"country_mona",nativeName:"Monaco",callingCodes:["377"],timeZones:["UTC+01:00"],id:147,index:147,code:"MC",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},MN:{name:"Mongolia",i18n:"country_mong",nativeName:"\u041c\u043e\u043d\u0433\u043e\u043b \u0443\u043b\u0441",callingCodes:["976"],timeZones:["UTC+07:00","UTC+08:00"],id:148,index:148,code:"MN",languages:[{code:"mn",name:"Mongolian",nativeName:"\u041c\u043e\u043d\u0433\u043e\u043b \u0445\u044d\u043b"}]},ME:{name:"Montenegro",i18n:"country_mont",nativeName:"\u0426\u0440\u043d\u0430 \u0413\u043e\u0440\u0430",callingCodes:["382"],timeZones:["UTC+01:00"],id:149,index:149,code:"ME",languages:[{code:"me",name:"Montenegrin",nativeName:"Montenegrin",manuallyAdded:!0},{code:"sr",name:"Serbian",nativeName:"\u0441\u0440\u043f\u0441\u043a\u0438 \u0458\u0435\u0437\u0438\u043a"},{code:"bs",name:"Bosnian",nativeName:"bosanski jezik"},{code:"sq",name:"Albanian",nativeName:"Shqip"},{code:"hr",name:"Croatian",nativeName:"hrvatski jezik"}]},MS:{name:"Montserrat",i18n:"country_ms",nativeName:"Montserrat",callingCodes:["1664"],timeZones:["UTC-04:00"],id:150,index:150,code:"MS",languages:[{code:"en",name:"English",nativeName:"English"}]},MA:{name:"Morocco",i18n:"country_mor",nativeName:"\u0627\u0644\u0645\u063a\u0631\u0628",callingCodes:["212"],timeZones:["UTC"],id:151,index:151,code:"MA",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},MZ:{name:"Mozambique",i18n:"country_moz",nativeName:"Mo\xe7ambique",callingCodes:["258"],timeZones:["UTC+02:00"],id:152,index:152,code:"MZ",languages:[{code:"pt",name:"Portuguese",nativeName:"Portugu\xeas"}]},MM:{name:"Myanmar",i18n:"country_mya",nativeName:"Myanma",callingCodes:["95"],timeZones:["UTC+06:30"],id:153,index:153,code:"MM",languages:[{code:"my",name:"Burmese",nativeName:"\u1017\u1019\u102c\u1005\u102c"}]},NA:{name:"Namibia",i18n:"country_nam",nativeName:"Namibia",callingCodes:["264"],timeZones:["UTC+01:00"],id:154,index:154,code:"NA",languages:[{code:"en",name:"English",nativeName:"English"},{code:"af",name:"Afrikaans",nativeName:"Afrikaans"}]},NR:{name:"Nauru",i18n:"country_nau",nativeName:"Nauru",callingCodes:["674"],timeZones:["UTC+12:00"],id:155,index:155,code:"NR",languages:[{code:"en",name:"English",nativeName:"English"},{code:"na",name:"Nauruan",nativeName:"Dorerin Naoero"}]},NP:{name:"Nepal",i18n:"country_nep",nativeName:"\u0928\u0947\u092a\u093e\u0932",callingCodes:["977"],timeZones:["UTC+05:45"],id:156,index:156,code:"NP",languages:[{code:"ne",name:"Nepali",nativeName:"\u0928\u0947\u092a\u093e\u0932\u0940"}]},NL:{name:"Netherlands",i18n:"country_net",nativeName:"Nederland",callingCodes:["31"],timeZones:["UTC-04:00","UTC+01:00"],id:157,index:157,code:"NL",languages:[{code:"nl",name:"Dutch; flemish",nativeName:"Dutch; flemish"}]},NC:{name:"New Caledonia",i18n:"country_nc",nativeName:"Nouvelle-Cal\xe9donie",callingCodes:["687"],timeZones:["UTC+11:00"],id:158,index:158,code:"NC",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},NZ:{name:"New Zealand",i18n:"country_new",nativeName:"New Zealand",callingCodes:["64"],timeZones:["UTC-11:00","UTC-10:00","UTC+12:00","UTC+12:45","UTC+13:00"],id:159,index:159,code:"NZ",languages:[{code:"en",name:"English",nativeName:"English"},{code:"mi",name:"M\u0101ori",nativeName:"te reo M\u0101ori"}]},NI:{name:"Nicaragua",i18n:"country_nic",nativeName:"Nicaragua",callingCodes:["505"],timeZones:["UTC-06:00"],id:160,index:160,code:"NI",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},NE:{name:"Niger",i18n:"country_nig",nativeName:"Niger",callingCodes:["227"],timeZones:["UTC+01:00"],id:161,index:161,code:"NE",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},NG:{name:"Nigeria",i18n:"country_niga",nativeName:"Nigeria",callingCodes:["234"],timeZones:["UTC+01:00"],id:162,index:162,code:"NG",languages:[{code:"en",name:"English",nativeName:"English"}]},NU:{name:"Niue",i18n:"country_nu",nativeName:"Niu\u0113",callingCodes:["683"],timeZones:["UTC-11:00"],id:163,index:163,code:"NU",languages:[{code:"en",name:"English",nativeName:"English"}]},NF:{name:"Norfolk Island",i18n:"country_nf",nativeName:"Norfolk Island",callingCodes:["672"],timeZones:["UTC+11:30"],id:164,index:164,code:"NF",languages:[{code:"en",name:"English",nativeName:"English"}]},KP:{name:"Korea (Democratic People's Republic of)",i18n:"country_kp",nativeName:"\ubd81\ud55c",callingCodes:["850"],timeZones:["UTC+09:00"],id:118,index:165,code:"KP",languages:[{code:"ko",name:"Korean",nativeName:"\ud55c\uad6d\uc5b4"}]},MP:{name:"Northern Mariana Islands",i18n:"country_mp",nativeName:"Northern Mariana Islands",callingCodes:["1670"],timeZones:["UTC+10:00"],id:165,index:166,code:"MP",languages:[{code:"en",name:"English",nativeName:"English"},{code:"ch",name:"Chamorro",nativeName:"Chamoru"}]},NO:{name:"Norway",i18n:"country_nor",nativeName:"Norge",callingCodes:["47"],timeZones:["UTC+01:00"],id:166,index:167,code:"NO",languages:[{code:"no",name:"Norwegian",nativeName:"Norsk"},{code:"nb",name:"Norwegian Bokm\xe5l",nativeName:"Norsk bokm\xe5l"},{code:"nn",name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"}]},OM:{name:"Oman",i18n:"country_oma",nativeName:"\u0639\u0645\u0627\u0646",callingCodes:["968"],timeZones:["UTC+04:00"],id:167,index:168,code:"OM",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},PK:{name:"Pakistan",i18n:"country_pak",nativeName:"Pakistan",callingCodes:["92"],timeZones:["UTC+05:00"],id:168,index:169,code:"PK",languages:[{code:"en",name:"English",nativeName:"English"},{code:"ur",name:"Urdu",nativeName:"\u0627\u0631\u062f\u0648"}]},PW:{name:"Palau",i18n:"country_pal",nativeName:"Palau",callingCodes:["680"],timeZones:["UTC+09:00"],id:169,index:170,code:"PW",languages:[{code:"en",name:"English",nativeName:"English"}]},PS:{name:"Palestinian Occupied Territories",i18n:"country_pse",nativeName:"\u0641\u0644\u0633\u0637\u064a\u0646",callingCodes:["970"],timeZones:["UTC+02:00"],id:170,index:171,code:"PS",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},PA:{name:"Panama",i18n:"country_pan",nativeName:"Panam\xe1",callingCodes:["507"],timeZones:["UTC-05:00"],id:171,index:172,code:"PA",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},PG:{name:"Papua New Guinea",i18n:"country_pap",nativeName:"Papua Niugini",callingCodes:["675"],timeZones:["UTC+10:00"],id:172,index:173,code:"PG",languages:[{code:"en",name:"English",nativeName:"English"}]},PY:{name:"Paraguay",i18n:"country_par",nativeName:"Paraguay",callingCodes:["595"],timeZones:["UTC-04:00"],id:173,index:174,code:"PY",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"},{code:"gn",name:"Guaran\xed",nativeName:"Ava\xf1e'\u1ebd"}]},PE:{name:"Peru",i18n:"country_per",nativeName:"Per\xfa",callingCodes:["51"],timeZones:["UTC-05:00"],id:174,index:175,code:"PE",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},PH:{name:"Philippines",i18n:"country_phi",nativeName:"Pilipinas",callingCodes:["63"],timeZones:["UTC+08:00"],id:175,index:176,code:"PH",languages:[{code:"ph",name:"Filipino",nativeName:"Filipino",manuallyAdded:!0},{code:"en",name:"English",nativeName:"English"}]},PN:{name:"Pitcairn",i18n:"country_pn",nativeName:"Pitcairn Islands",callingCodes:["64"],timeZones:["UTC-08:00"],id:176,index:177,code:"PN",languages:[{code:"en",name:"English",nativeName:"English"}]},PL:{name:"Poland",i18n:"country_pol",nativeName:"Polska",callingCodes:["48"],timeZones:["UTC+01:00"],id:177,index:178,code:"PL",languages:[{code:"pl",name:"Polish",nativeName:"j\u0119zyk polski"}]},PT:{name:"Portugal",i18n:"country_por",nativeName:"Portugal",callingCodes:["351"],timeZones:["UTC-01:00","UTC"],id:178,index:179,code:"PT",languages:[{code:"pt",name:"Portuguese",nativeName:"Portugu\xeas"}]},PR:{name:"Puerto Rico",i18n:"country_pri",nativeName:"Puerto Rico",callingCodes:["1787","1939"],timeZones:["UTC-04:00"],id:179,index:180,code:"PR",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"},{code:"en",name:"English",nativeName:"English"}]},QA:{name:"Qatar",i18n:"country_qat",nativeName:"\u0642\u0637\u0631",callingCodes:["974"],timeZones:["UTC+03:00"],id:180,index:181,code:"QA",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},XK:{name:"Kosovo, Republic of",i18n:"country_kos",nativeName:"Republika e Kosov\xebs",callingCodes:["383"],timeZones:["UTC+01:00"],id:250,index:182,code:"XK",languages:[{code:"sq",name:"Albanian",nativeName:"Shqip"},{code:"sr",name:"Serbian",nativeName:"\u0441\u0440\u043f\u0441\u043a\u0438 \u0458\u0435\u0437\u0438\u043a"}]},RE:{name:"Reunion",i18n:"country_re",nativeName:"La R\xe9union",callingCodes:["262"],timeZones:["UTC+04:00"],id:181,index:183,code:"RE",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},RO:{name:"Romania",i18n:"country_rom",nativeName:"Rom\xe2nia",callingCodes:["40"],timeZones:["UTC+02:00"],id:182,index:184,code:"RO",languages:[{code:"ro",name:"Romanian",nativeName:"Rom\xe2n\u0103"}]},RU:{name:"Russian Federation",i18n:"country_rus",nativeName:"\u0420\u043e\u0441\u0441\u0438\u044f",callingCodes:["7"],timeZones:["UTC+03:00","UTC+04:00","UTC+06:00","UTC+07:00","UTC+08:00","UTC+09:00","UTC+10:00","UTC+11:00","UTC+12:00"],id:183,index:185,code:"RU",languages:[{code:"ru",name:"Russian",nativeName:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"}]},RW:{name:"Rwanda",i18n:"country_rwa",nativeName:"Rwanda",callingCodes:["250"],timeZones:["UTC+02:00"],id:184,index:186,code:"RW",languages:[{code:"rw",name:"Kinyarwanda",nativeName:"Ikinyarwanda"},{code:"en",name:"English",nativeName:"English"},{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},BL:{name:"Saint Barth\xe9lemy",i18n:"country_bl",nativeName:"Saint-Barth\xe9lemy",callingCodes:["590"],timeZones:["UTC-04:00"],id:185,index:187,code:"BL",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},SH:{name:"Saint Helena, Ascension and Tristan da Cunha",i18n:"country_sh",nativeName:"Saint Helena",callingCodes:["290"],timeZones:["UTC+00:00"],id:186,index:188,code:"SH",languages:[{code:"en",name:"English",nativeName:"English"}]},KN:{name:"Saint Kitts and Nevis",i18n:"country_stk",nativeName:"Saint Kitts and Nevis",callingCodes:["1869"],timeZones:["UTC-04:00"],id:187,index:189,code:"KN",languages:[{code:"en",name:"English",nativeName:"English"}]},LC:{name:"Saint Lucia",i18n:"country_stl",nativeName:"Saint Lucia",callingCodes:["1758"],timeZones:["UTC-04:00"],id:188,index:190,code:"LC",languages:[{code:"en",name:"English",nativeName:"English"}]},MF:{name:"Saint Martin",i18n:"country_mf",nativeName:"Saint-Martin",callingCodes:["590"],timeZones:["UTC-04:00"],id:189,index:191,code:"MF",languages:[{code:"en",name:"English",nativeName:"English"},{code:"fr",name:"French",nativeName:"fran\xe7ais"},{code:"nl",name:"Dutch; flemish",nativeName:"Dutch; flemish"}]},PM:{name:"Saint Pierre and Miquelon",i18n:"country_pm",nativeName:"Saint-Pierre-et-Miquelon",callingCodes:["508"],timeZones:["UTC-03:00"],id:190,index:192,code:"PM",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},VC:{name:"Saint Vincent and The Grenadines",i18n:"country_sai",nativeName:"Saint Vincent and the Grenadines",callingCodes:["1784"],timeZones:["UTC-04:00"],id:191,index:193,code:"VC",languages:[{code:"en",name:"English",nativeName:"English"}]},WS:{name:"Samoa",i18n:"country_sam",nativeName:"Samoa",callingCodes:["685"],timeZones:["UTC+13:00"],id:192,index:194,code:"WS",languages:[{code:"sm",name:"Samoan",nativeName:"gagana fa'a Samoa"},{code:"en",name:"English",nativeName:"English"}]},SM:{name:"San Marino",i18n:"country_san",nativeName:"San Marino",callingCodes:["378"],timeZones:["UTC+01:00"],id:193,index:195,code:"SM",languages:[{code:"it",name:"Italian",nativeName:"Italiano"}]},ST:{name:"Sao Tome and Principe",i18n:"country_sao",nativeName:"S\xe3o Tom\xe9 e Pr\xedncipe",callingCodes:["239"],timeZones:["UTC"],id:194,index:196,code:"ST",languages:[{code:"pt",name:"Portuguese",nativeName:"Portugu\xeas"}]},SA:{name:"Saudi Arabia",i18n:"country_sau",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629",callingCodes:["966"],timeZones:["UTC+03:00"],id:195,index:197,code:"SA",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},SN:{name:"Senegal",i18n:"country_sen",nativeName:"S\xe9n\xe9gal",callingCodes:["221"],timeZones:["UTC"],id:196,index:198,code:"SN",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},RS:{name:"Serbia",i18n:"country_ser",nativeName:"\u0421\u0440\u0431\u0438\u0458\u0430",callingCodes:["381"],timeZones:["UTC+01:00"],id:197,index:199,code:"RS",languages:[{code:"sr",name:"Serbian",nativeName:"\u0441\u0440\u043f\u0441\u043a\u0438 \u0458\u0435\u0437\u0438\u043a"}]},SC:{name:"Seychelles",i18n:"country_sey",nativeName:"Seychelles",callingCodes:["248"],timeZones:["UTC+04:00"],id:198,index:200,code:"SC",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"},{code:"en",name:"English",nativeName:"English"}]},SL:{name:"Sierra Leone",i18n:"country_sie",nativeName:"Sierra Leone",callingCodes:["232"],timeZones:["UTC"],id:199,index:201,code:"SL",languages:[{code:"en",name:"English",nativeName:"English"}]},SG:{name:"Singapore",i18n:"country_sin",nativeName:"Singapore",callingCodes:["65"],timeZones:["UTC+08:00"],id:200,index:202,code:"SG",languages:[{code:"en",name:"English",nativeName:"English"},{code:"ms",name:"Malay",nativeName:"bahasa Melayu"},{code:"ta",name:"Tamil",nativeName:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd"},{code:"zh",name:"Chinese",nativeName:"\u4e2d\u6587 (Zh\u014dngw\xe9n)"}]},SX:{name:"Sint Maarten (Dutch part)",i18n:"country_sx",nativeName:"Sint Maarten",callingCodes:["1721"],timeZones:["UTC-04:00"],id:201,index:203,code:"SX",languages:[{code:"nl",name:"Dutch; flemish",nativeName:"Dutch; flemish"},{code:"en",name:"English",nativeName:"English"}]},SK:{name:"Slovakia (Slovak Republic)",i18n:"country_slok",nativeName:"Slovensko",callingCodes:["421"],timeZones:["UTC+01:00"],id:202,index:204,code:"SK",languages:[{code:"sk",name:"Slovak",nativeName:"sloven\u010dina"}]},SI:{name:"Slovenia",i18n:"country_slon",nativeName:"Slovenija",callingCodes:["386"],timeZones:["UTC+01:00"],id:203,index:205,code:"SI",languages:[{code:"sl",name:"Slovene",nativeName:"slovenski jezik"}]},SB:{name:"Solomon Islands",i18n:"country_sol",nativeName:"Solomon Islands",callingCodes:["677"],timeZones:["UTC+11:00"],id:204,index:206,code:"SB",languages:[{code:"en",name:"English",nativeName:"English"}]},SO:{name:"Somalia",i18n:"country_som",nativeName:"Soomaaliya",callingCodes:["252"],timeZones:["UTC+03:00"],id:205,index:207,code:"SO",languages:[{code:"so",name:"Somali",nativeName:"Soomaaliga"},{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},ZA:{name:"South Africa",i18n:"country_sou",nativeName:"South Africa",callingCodes:["27"],timeZones:["UTC+02:00"],id:206,index:208,code:"ZA",languages:[{code:"af",name:"Afrikaans",nativeName:"Afrikaans"},{code:"en",name:"English",nativeName:"English"},{code:"nr",name:"Southern Ndebele",nativeName:"isiNdebele"},{code:"st",name:"Southern Sotho",nativeName:"Sesotho"},{code:"ss",name:"Swati",nativeName:"SiSwati"},{code:"tn",name:"Tswana",nativeName:"Setswana"},{code:"ts",name:"Tsonga",nativeName:"Xitsonga"},{code:"ve",name:"Venda",nativeName:"Tshiven\u1e13a"},{code:"xh",name:"Xhosa",nativeName:"isiXhosa"},{code:"zu",name:"Zulu",nativeName:"isiZulu"}]},GS:{name:"South Georgia and the South Sandwich Islands",i18n:"country_gs",nativeName:"South Georgia",callingCodes:["500"],timeZones:["UTC-02:00"],id:207,index:209,code:"GS",languages:[{code:"en",name:"English",nativeName:"English"}]},KR:{name:"Korea (Republic of)",i18n:"country_kr",nativeName:"\ub300\ud55c\ubbfc\uad6d",callingCodes:["82"],timeZones:["UTC+09:00"],id:119,index:210,code:"KR",languages:[{code:"ko",name:"Korean",nativeName:"\ud55c\uad6d\uc5b4"}]},SS:{name:"South Sudan",i18n:"country_ssd",nativeName:"South Sudan",callingCodes:["211"],timeZones:["UTC+03:00"],id:208,index:211,code:"SS",languages:[{code:"en",name:"English",nativeName:"English"}]},ES:{name:"Spain",i18n:"country_spa",nativeName:"Espa\xf1a",callingCodes:["34"],timeZones:["UTC","UTC+01:00"],id:209,index:212,code:"ES",languages:[{code:"val",name:"Valencian",nativeName:"Valenci\xe0",manuallyAdded:!0},{code:"ca",name:"Catalan",nativeName:"catal\xe0"},{code:"cas",name:"Castellano",nativeName:"Castellano",manuallyAdded:!0},{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},LK:{name:"Sri Lanka",i18n:"country_sri",nativeName:"\u015br\u012b la\u1e43k\u0101va",callingCodes:["94"],timeZones:["UTC+05:30"],id:210,index:213,code:"LK",languages:[{code:"si",name:"Sinhalese",nativeName:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd"},{code:"ta",name:"Tamil",nativeName:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd"}]},SD:{name:"Sudan",i18n:"country_sud",nativeName:"\u0627\u0644\u0633\u0648\u062f\u0627\u0646",callingCodes:["249"],timeZones:["UTC+03:00"],id:211,index:214,code:"SD",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"},{code:"en",name:"English",nativeName:"English"}]},SR:{name:"Suriname",i18n:"country_sur",nativeName:"Suriname",callingCodes:["597"],timeZones:["UTC-03:00"],id:212,index:215,code:"SR",languages:[{code:"nl",name:"Dutch; flemish",nativeName:"Dutch; flemish"}]},SJ:{name:"Svalbard and Jan Mayen",i18n:"country_sj",nativeName:"Svalbard og Jan Mayen",callingCodes:["4779"],timeZones:["UTC+01:00"],id:213,index:216,code:"SJ",languages:[{code:"no",name:"Norwegian",nativeName:"Norsk"}]},SZ:{name:"Swaziland",i18n:"country_swa",nativeName:"Swaziland",callingCodes:["268"],timeZones:["UTC+02:00"],id:214,index:217,code:"SZ",languages:[{code:"en",name:"English",nativeName:"English"},{code:"ss",name:"Swati",nativeName:"SiSwati"}]},SE:{name:"Sweden",i18n:"country_swe",nativeName:"Sverige",callingCodes:["46"],timeZones:["UTC+01:00"],id:215,index:218,code:"SE",languages:[{code:"sv",name:"Swedish",nativeName:"svenska"}]},CH:{name:"Switzerland",i18n:"country_swi",nativeName:"Schweiz",callingCodes:["41"],timeZones:["UTC+01:00"],id:216,index:219,code:"CH",languages:[{code:"de",name:"German",nativeName:"Deutsch"},{code:"fr",name:"French",nativeName:"fran\xe7ais"},{code:"it",name:"Italian",nativeName:"Italiano"}]},SY:{name:"Syrian Arab Republic",i18n:"country_syr",nativeName:"\u0633\u0648\u0631\u064a\u0627",callingCodes:["963"],timeZones:["UTC+02:00"],id:217,index:220,code:"SY",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},TW:{name:"Taiwan; Republic of China (ROC)",i18n:"country_tai",nativeName:"\u81fa\u7063",callingCodes:["886"],timeZones:["UTC+08:00"],id:218,index:221,code:"TW",languages:[{code:"zh",name:"Chinese",nativeName:"\u4e2d\u6587 (Zh\u014dngw\xe9n)"}]},TJ:{name:"Tajikistan",i18n:"country_taj",nativeName:"\u0422\u043e\u04b7\u0438\u043a\u0438\u0441\u0442\u043e\u043d",callingCodes:["992"],timeZones:["UTC+05:00"],id:219,index:222,code:"TJ",languages:[{code:"tg",name:"Tajik",nativeName:"\u0442\u043e\u04b7\u0438\u043a\u04e3"},{code:"ru",name:"Russian",nativeName:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"}]},TZ:{name:"Tanzania",i18n:"country_tan",nativeName:"Tanzania",callingCodes:["255"],timeZones:["UTC+03:00"],id:220,index:223,code:"TZ",languages:[{code:"sw",name:"Swahili",nativeName:"Kiswahili"},{code:"en",name:"English",nativeName:"English"}]},TH:{name:"Thailand",i18n:"country_tha",nativeName:"\u0e1b\u0e23\u0e30\u0e40\u0e17\u0e28\u0e44\u0e17\u0e22",callingCodes:["66"],timeZones:["UTC+07:00"],id:221,index:224,code:"TH",languages:[{code:"th",name:"Thai",nativeName:"\u0e44\u0e17\u0e22"}]},TL:{name:"Timor-Leste",i18n:"country_eas",nativeName:"Timor-Leste",callingCodes:["670"],timeZones:["UTC+09:00"],id:222,index:225,code:"TL",languages:[{code:"pt",name:"Portuguese",nativeName:"Portugu\xeas"}]},TG:{name:"Togo",i18n:"country_tog",nativeName:"Togo",callingCodes:["228"],timeZones:["UTC"],id:223,index:226,code:"TG",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},TK:{name:"Tokelau",i18n:"country_tk",nativeName:"Tokelau",callingCodes:["690"],timeZones:["UTC+13:00"],id:224,index:227,code:"TK",languages:[{code:"en",name:"English",nativeName:"English"}]},TO:{name:"Tonga",i18n:"country_ton",nativeName:"Tonga",callingCodes:["676"],timeZones:["UTC+13:00"],id:225,index:228,code:"TO",languages:[{code:"en",name:"English",nativeName:"English"},{code:"to",name:"Tonga (Tonga Islands)",nativeName:"faka Tonga"}]},TT:{name:"Trinidad and Tobago",i18n:"country_tri",nativeName:"Trinidad and Tobago",callingCodes:["1868"],timeZones:["UTC-04:00"],id:226,index:229,code:"TT",languages:[{code:"en",name:"English",nativeName:"English"}]},TN:{name:"Tunisia",i18n:"country_tun",nativeName:"\u062a\u0648\u0646\u0633",callingCodes:["216"],timeZones:["UTC+01:00"],id:227,index:230,code:"TN",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},TR:{name:"Turkey",i18n:"country_turke",nativeName:"T\xfcrkiye",callingCodes:["90"],timeZones:["UTC+02:00"],id:228,index:231,code:"TR",languages:[{code:"tr",name:"Turkish",nativeName:"T\xfcrk\xe7e"}]},TM:{name:"Turkmenistan",i18n:"country_turkm",nativeName:"T\xfcrkmenistan",callingCodes:["993"],timeZones:["UTC+05:00"],id:229,index:232,code:"TM",languages:[{code:"tk",name:"Turkmen",nativeName:"T\xfcrkmen"},{code:"ru",name:"Russian",nativeName:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"}]},TC:{name:"Turks and Caicos Islands",i18n:"country_tc",nativeName:"Turks and Caicos Islands",callingCodes:["1649"],timeZones:["UTC-04:00"],id:230,index:233,code:"TC",languages:[{code:"en",name:"English",nativeName:"English"}]},TV:{name:"Tuvalu",i18n:"country_tuv",nativeName:"Tuvalu",callingCodes:["688"],timeZones:["UTC+12:00"],id:231,index:234,code:"TV",languages:[{code:"en",name:"English",nativeName:"English"}]},UG:{name:"Uganda",i18n:"country_uga",nativeName:"Uganda",callingCodes:["256"],timeZones:["UTC+03:00"],id:232,index:235,code:"UG",languages:[{code:"en",name:"English",nativeName:"English"},{code:"sw",name:"Swahili",nativeName:"Kiswahili"}]},UA:{name:"Ukraine",i18n:"country_ukr",nativeName:"\u0423\u043a\u0440\u0430\u0457\u043d\u0430",callingCodes:["380"],timeZones:["UTC+02:00"],id:233,index:236,code:"UA",languages:[{code:"uk",name:"Ukrainian",nativeName:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"}]},AE:{name:"United Arab Emirates",i18n:"country_uae",nativeName:"\u062f\u0648\u0644\u0629 \u0627\u0644\u0625\u0645\u0627\u0631\u0627\u062a \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0645\u062a\u062d\u062f\u0629",callingCodes:["971"],timeZones:["UTC+04"],id:234,index:237,code:"AE",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},GB:{name:"United Kingdom",i18n:"country_uki",nativeName:"United Kingdom",callingCodes:["441481","441624","441534","44"],timeZones:["UTC-08:00","UTC-05:00","UTC-04:00","UTC-03:00","UTC-02:00","UTC","UTC+01:00","UTC+02:00","UTC+06:00"],id:235,index:238,code:"GB",languages:[{code:"en",name:"English",nativeName:"English"}],regions:["England","Scotland","Wales","Northern Ireland"]},US:{name:"United States",i18n:"country_ust",nativeName:"United States",callingCodes:["1"],timeZones:["UTC-12:00","UTC-11:00","UTC-10:00","UTC-09:00","UTC-08:00","UTC-07:00","UTC-06:00","UTC-05:00","UTC-04:00","UTC+10:00","UTC+12:00"],id:236,index:239,code:"US",languages:[{code:"en",name:"English",nativeName:"English"}],regions:["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","Washington D.C.","West Virginia","Wisconsin","Wyoming"]},UY:{name:"Uruguay",i18n:"country_uru",nativeName:"Uruguay",callingCodes:["598"],timeZones:["UTC-03:00"],id:238,index:240,code:"UY",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},UZ:{name:"Uzbekistan",i18n:"country_uzb",nativeName:"O\u2018zbekiston",callingCodes:["998"],timeZones:["UTC+05:00"],id:239,index:241,code:"UZ",languages:[{code:"uz",name:"Uzbek",nativeName:"O\u02bbzbek"},{code:"ru",name:"Russian",nativeName:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"}]},VU:{name:"Vanuatu",i18n:"country_van",nativeName:"Vanuatu",callingCodes:["678"],timeZones:["UTC+11:00"],id:240,index:242,code:"VU",languages:[{code:"bi",name:"Bislama",nativeName:"Bislama"},{code:"en",name:"English",nativeName:"English"},{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},VE:{name:"Venezuela",i18n:"country_ven",nativeName:"Venezuela",callingCodes:["58"],timeZones:["UTC-04:00"],id:241,index:243,code:"VE",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},VN:{name:"Vietnam",i18n:"country_vie",nativeName:"Vi\u1ec7t Nam",callingCodes:["84"],timeZones:["UTC+07:00"],id:242,index:244,code:"VN",languages:[{code:"vi",name:"Vietnamese",nativeName:"Ti\u1ebfng Vi\u1ec7t"}]},WF:{name:"Wallis and Futuna Islands",i18n:"country_wf",nativeName:"Wallis et Futuna",callingCodes:["681"],timeZones:["UTC+12:00"],id:245,index:245,code:"WF",languages:[{code:"fr",name:"French",nativeName:"fran\xe7ais"}]},EH:{name:"Western Sahara",i18n:"country_eh",nativeName:"\u0627\u0644\u0635\u062d\u0631\u0627\u0621 \u0627\u0644\u063a\u0631\u0628\u064a\u0629",callingCodes:["212"],timeZones:["UTC+00:00"],id:246,index:246,code:"EH",languages:[{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"}]},YE:{name:"Yemen",i18n:"country_yem",nativeName:"\u0627\u0644\u064a\u064e\u0645\u064e\u0646",callingCodes:["967"],timeZones:["UTC+03:00"],id:247,index:247,code:"YE",languages:[{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}]},ZM:{name:"Zambia",i18n:"country_zam",nativeName:"Zambia",callingCodes:["260"],timeZones:["UTC+02:00"],id:248,index:248,code:"ZM",languages:[{code:"en",name:"English",nativeName:"English"}]},ZW:{name:"Zimbabwe",i18n:"country_zim",nativeName:"Zimbabwe",callingCodes:["263"],timeZones:["UTC+02:00"],id:249,index:249,code:"ZW",languages:[{code:"en",name:"English",nativeName:"English"},{code:"sn",name:"Shona",nativeName:"chiShona"},{code:"nd",name:"Northern Ndebele",nativeName:"isiNdebele"}]}});var Zd=function(){function e(t){o()(this,e),v()(this,"geolocation",void 0),this.geolocation=t}return l()(e,[{key:"parsePhoneNumber",value:function(e){var t,n={areaCode:null,countryISOCodes:null,localPhoneNumber:null};return(e=String(e||"").replace(/[ \-\.]/g,""))?((t=this.geolocation.getCountryCodeRegExp().exec(e))&&(n.areaCode=t[0],e=e.slice(t[0].length),n.countryISOCodes=this.geolocation.getCountryCodesByCallingArea(n.areaCode)),n.localPhoneNumber=e,n.localPhoneNumber?n:null):null}}]),e}(),qd=n(134),Jd=function(){function e(t){o()(this,e),v()(this,"i18n",void 0),v()(this,"defaultMimeType","application/octet-stream"),v()(this,"mimeTypes",{"3dm":"x-world/x-3dmf","3dmf":"x-world/x-3dmf",a:"application/octet-stream",aab:"application/x-authorware-bin",aam:"application/x-authorware-map",aas:"application/x-authorware-seg",abc:"text/vnd.abc",acgi:"text/html",afl:"video/animaflex",ai:"application/postscript",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",aim:"application/x-aim",aip:"text/x-audiosoft-intra",ani:"application/x-navi-animation",aos:"application/x-nokia-9000-communicator-add-on-software",aps:"application/mime",arc:"application/octet-stream",arj:"application/octet-stream",art:"image/x-jg",asf:"video/x-ms-asf",asm:"text/x-asm",asp:"text/asp",asx:"video/x-ms-asf-plugin",au:"audio/x-au",avi:"video/x-msvideo",avs:"video/avs-video",bcpio:"application/x-bcpio",bin:"application/x-macbinary",bm:"image/bmp",bmp:"image/x-windows-bmp",boo:"application/book",book:"application/book",boz:"application/x-bzip2",bsh:"application/x-bsh",bz:"application/x-bzip",bz2:"application/x-bzip2",c:"text/x-c","c++":"text/plain",cat:"application/vnd.ms-pki.seccat",cc:"text/x-c",ccad:"application/clariscad",cco:"application/x-cocoa",cdf:"application/x-netcdf",cer:"application/x-x509-ca-cert",cha:"application/x-chat",chat:"application/x-chat",class:"application/x-java-class",com:"text/plain",conf:"text/plain",cpio:"application/x-cpio",cpp:"text/x-c",cpt:"application/x-cpt",crl:"application/pkix-crl",crt:"application/x-x509-user-cert",csh:"text/x-script.csh",css:"text/css",cxx:"text/plain",dcr:"application/x-director",deepv:"application/x-deepv",def:"text/plain",der:"application/x-x509-ca-cert",dif:"video/x-dv",dir:"application/x-director",dl:"video/x-dl",doc:"application/msword",dot:"application/msword",dp:"application/commonground",drw:"application/drafting",dump:"application/octet-stream",dv:"video/x-dv",dvi:"application/x-dvi",dwf:"model/vnd.dwf",dwg:"image/x-dwg",dxf:"image/x-dwg",dxr:"application/x-director",el:"text/x-script.elisp",elc:"application/x-elc",env:"application/x-envoy",eps:"application/postscript",es:"application/x-esrehber",etx:"text/x-setext",evy:"application/x-envoy",exe:"application/octet-stream",f:"text/x-fortran",f77:"text/x-fortran",f90:"text/x-fortran",fdf:"application/vnd.fdf",fif:"image/fif",fli:"video/x-fli",flo:"image/florian",flx:"text/vnd.fmi.flexstor",fmf:"video/x-atomic3d-feature",for:"text/x-fortran",fpx:"image/vnd.net-fpx",frl:"application/freeloader",funk:"audio/make",g:"text/plain",g3:"image/g3fax",gif:"image/gif",gl:"video/x-gl",gsd:"audio/x-gsm",gsm:"audio/x-gsm",gsp:"application/x-gsp",gss:"application/x-gss",gtar:"application/x-gtar",gz:"application/x-gzip",gzip:"multipart/x-gzip",h:"text/x-h",hdf:"application/x-hdf",help:"application/x-helpfile",hgl:"application/vnd.hp-hpgl",hh:"text/x-h",hlb:"text/x-script",hlp:"application/x-winhelp",hpg:"application/vnd.hp-hpgl",hpgl:"application/vnd.hp-hpgl",hqx:"application/x-mac-binhex40",hta:"application/hta",htc:"text/x-component",htm:"text/html",html:"text/html",htmls:"text/html",htt:"text/webviewhtml",htx:"text/html",ice:"x-conference/x-cooltalk",ico:"image/x-icon",idc:"text/plain",ief:"image/ief",iefs:"image/ief",iges:"model/iges",igs:"model/iges",ima:"application/x-ima",imap:"application/x-httpd-imap",inf:"application/inf",ins:"application/x-internett-signup",ip:"application/x-ip2",isu:"video/x-isvideo",it:"audio/it",iv:"application/x-inventor",ivr:"i-world/i-vrml",ivy:"application/x-livescreen",jam:"audio/x-jam",jav:"text/x-java-source",java:"text/x-java-source",jcm:"application/x-java-commerce",jfif:"image/pjpeg","jfif-tbnl":"image/jpeg",jpe:"image/pjpeg",jpeg:"image/pjpeg",jpg:"image/jpeg",jps:"image/x-jps",js:"text/ecmascript",jut:"image/jutvision",kar:"music/x-karaoke",ksh:"text/x-script.ksh",la:"audio/x-nspaudio",lam:"audio/x-liveaudio",latex:"application/x-latex",lha:"application/x-lha",lhx:"application/octet-stream",list:"text/plain",lma:"audio/x-nspaudio",log:"text/plain",lsp:"text/x-script.lisp",lst:"text/plain",lsx:"text/x-la-asf",ltx:"application/x-latex",lzh:"application/x-lzh",lzx:"application/x-lzx",m:"text/x-m",m1v:"video/mpeg",m2a:"audio/mpeg",m2v:"video/mpeg",m3u:"audio/x-mpequrl",man:"application/x-troff-man",map:"application/x-navimap",mar:"text/plain",mbd:"application/mbedlet",mc$:"application/x-magic-cap-package-1.0",mcd:"application/x-mathcad",mcf:"text/mcf",mcp:"application/netmc",me:"application/x-troff-me",mht:"message/rfc822",mhtml:"message/rfc822",mid:"x-music/x-midi",midi:"x-music/x-midi",mif:"application/x-mif",mime:"www/mime",mjf:"audio/x-vnd.audioexplosion.mjuicemediafile",mjpg:"video/x-motion-jpeg",mm:"application/x-meme",mme:"application/base64",mod:"audio/x-mod",moov:"video/quicktime",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"video/x-mpeq2a",mp3:"video/x-mpeg",mpa:"video/mpeg",mpc:"application/x-project",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpga:"audio/mpeg",mpp:"application/vnd.ms-project",mpt:"application/x-project",mpv:"application/x-project",mpx:"application/x-project",mrc:"application/marc",ms:"application/x-troff-ms",mv:"video/x-sgi-movie",my:"audio/make",mzz:"application/x-vnd.audioexplosion.mzz",nap:"image/naplps",naplps:"image/naplps",nc:"application/x-netcdf",ncm:"application/vnd.nokia.configuration-message",nif:"image/x-niff",niff:"image/x-niff",nix:"application/x-mix-transfer",nsc:"application/x-conference",nvd:"application/x-navidoc",o:"application/octet-stream",oda:"application/oda",omc:"application/x-omc",omcd:"application/x-omcdatamaker",omcr:"application/x-omcregerator",p:"text/x-pascal",p10:"application/x-pkcs10",p12:"application/x-pkcs12",p7a:"application/x-pkcs7-signature",p7c:"application/x-pkcs7-mime",p7m:"application/x-pkcs7-mime",p7r:"application/x-pkcs7-certreqresp",p7s:"application/pkcs7-signature",part:"application/pro_eng",pas:"text/pascal",pbm:"image/x-portable-bitmap",pcl:"application/x-pcl",pct:"image/x-pict",pcx:"image/x-pcx",pdb:"chemical/x-pdb",pdf:"application/pdf",pfunk:"audio/make.my.funk",pgm:"image/x-portable-greymap",pic:"image/pict",pict:"image/pict",pkg:"application/x-newton-compatible-pkg",pko:"application/vnd.ms-pki.pko",pl:"text/x-script.perl",plx:"application/x-pixclscript",pm:"text/x-script.perl-module",pm4:"application/x-pagemaker",pm5:"application/x-pagemaker",png:"image/png",pnm:"image/x-portable-anymap",pot:"application/vnd.ms-powerpoint",pov:"model/x-pov",ppa:"application/vnd.ms-powerpoint",ppm:"image/x-portable-pixmap",pps:"application/vnd.ms-powerpoint",ppt:"application/x-mspowerpoint",ppz:"application/mspowerpoint",pre:"application/x-freelance",prt:"application/pro_eng",ps:"application/postscript",psd:"application/octet-stream",pvu:"paleovu/x-pv",pwz:"application/vnd.ms-powerpoint",py:"text/x-script.phyton",pyc:"application/x-bytecode.python",qcp:"audio/vnd.qcelp",qd3:"x-world/x-3dmf",qd3d:"x-world/x-3dmf",qif:"image/x-quicktime",qt:"video/quicktime",qtc:"video/x-qtc",qti:"image/x-quicktime",qtif:"image/x-quicktime",ra:"audio/x-realaudio",ram:"audio/x-pn-realaudio",ras:"image/x-cmu-raster",rast:"image/cmu-raster",rexx:"text/x-script.rexx",rf:"image/vnd.rn-realflash",rgb:"image/x-rgb",rm:"audio/x-pn-realaudio",rmi:"audio/mid",rmm:"audio/x-pn-realaudio",rmp:"audio/x-pn-realaudio-plugin",rng:"application/vnd.nokia.ringing-tone",rnx:"application/vnd.rn-realplayer",roff:"application/x-troff",rp:"image/vnd.rn-realpix",rpm:"audio/x-pn-realaudio-plugin",rt:"text/vnd.rn-realtext",rtf:"text/richtext",rtx:"text/richtext",rv:"video/vnd.rn-realvideo",s:"text/x-asm",s3m:"audio/s3m",saveme:"application/octet-stream",sbk:"application/x-tbook",scm:"video/x-scm",sdml:"text/plain",sdp:"application/x-sdp",sdr:"application/sounder",sea:"application/x-sea",set:"application/set",sgm:"text/x-sgml",sgml:"text/x-sgml",sh:"text/x-script.sh",shar:"application/x-shar",shtml:"text/x-server-parsed-html",sid:"audio/x-psid",sit:"application/x-stuffit",skd:"application/x-koan",skm:"application/x-koan",skp:"application/x-koan",skt:"application/x-koan",sl:"application/x-seelogo",smi:"application/smil",smil:"application/smil",snd:"audio/x-adpcm",sol:"application/solids",spc:"text/x-speech",spl:"application/futuresplash",spr:"application/x-sprite",sprite:"application/x-sprite",src:"application/x-wais-source",ssi:"text/x-server-parsed-html",ssm:"application/streamingmedia",sst:"application/vnd.ms-pki.certstore",step:"application/step",stl:"application/x-navistyle",stp:"application/step",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",svf:"image/x-dwg",svr:"x-world/x-svr",swf:"application/x-shockwave-flash",t:"application/x-troff",talk:"text/x-speech",tar:"application/x-tar",tbk:"application/x-tbook",tcl:"text/x-script.tcl",tcsh:"text/x-script.tcsh",tex:"application/x-tex",texi:"application/x-texinfo",texinfo:"application/x-texinfo",text:"text/plain",tgz:"application/x-compressed",tif:"image/x-tiff",tiff:"image/x-tiff",tr:"application/x-troff",tsi:"audio/tsp-audio",tsp:"audio/tsplayer",tsv:"text/tab-separated-values",turbot:"image/florian",txt:"text/plain",uil:"text/x-uil",uni:"text/uri-list",unis:"text/uri-list",unv:"application/i-deas",uri:"text/uri-list",uris:"text/uri-list",ustar:"multipart/x-ustar",uu:"text/x-uuencode",uue:"text/x-uuencode",vcd:"application/x-cdlink",vcs:"text/x-vcalendar",vda:"application/vda",vdo:"video/vdo",vew:"application/groupwise",viv:"video/vnd.vivo",vivo:"video/vnd.vivo",vmd:"application/vocaltec-media-desc",vmf:"application/vocaltec-media-file",voc:"audio/x-voc",vos:"video/vosaic",vox:"audio/voxware",vqe:"audio/x-twinvq-plugin",vqf:"audio/x-twinvq",vql:"audio/x-twinvq-plugin",vrml:"x-world/x-vrml",vrt:"x-world/x-vrt",vsd:"application/x-visio",vst:"application/x-visio",vsw:"application/x-visio",w60:"application/wordperfect6.0",w61:"application/wordperfect6.1",w6w:"application/msword",wav:"audio/x-wav",wb1:"application/x-qpro",wbmp:"image/vnd.wap.wbmp",web:"application/vnd.xara",wiz:"application/msword",wk1:"application/x-123",wmf:"windows/metafile",wml:"text/vnd.wap.wml",wmlc:"application/vnd.wap.wmlc",wmls:"text/vnd.wap.wmlscript",wmlsc:"application/vnd.wap.wmlscriptc",word:"application/msword",wp:"application/wordperfect",wp5:"application/wordperfect",wp6:"application/wordperfect",wpd:"application/wordperfect",wq1:"application/x-lotus",wri:"application/mswrite",wrl:"application/x-world",wrz:"model/vrml",wsc:"text/scriplet",wsrc:"application/x-wais-source",wtk:"application/x-wintalk",xbm:"image/x-xbitmap",xdr:"video/x-amt-demorun",xgz:"xgl/drawing",xif:"image/vnd.xiff",xl:"application/excel",xla:"application/x-msexcel",xlb:"application/excel",xlc:"application/x-excel",xld:"application/x-excel",xll:"application/vnd.ms-excel",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlt:"application/excel",xlv:"application/excel",xlw:"application/vnd.ms-excel",xm:"audio/xm",xml:"text/xml",xmz:"xgl/movie",xpix:"application/x-vnd.ls-xpix",xpm:"image/xpm","x-png":"image/png",xsr:"video/x-amt-showrun",xwd:"image/x-xwd",xyz:"chemical/x-pdb",z:"application/x-compressed",zip:"application/zip",zoo:"application/octet-stream",zsh:"text/x-script.zsh"}),this.i18n=t}return l()(e,[{key:"getMimeType",value:function(e){var t,n=/\.([^.]+)$/.exec(e);return n?(t=n[1].toLowerCase(),this.mimeTypes[t]||this.defaultMimeType):this.defaultMimeType}},{key:"getMimeClass",value:function(e){var t=this.getMimeType(e),n=/^([^\/]+)\/([^$]+)$/.exec(t);if(!n)return it.g.OTHER;switch(!0){case"image"==n[1]:return it.g.PICTURE;case"video"===n[1]:return it.g.VIDEO;case"audio"===n[1]:return it.g.AUDIO;default:return it.g.OTHER}}},{key:"getFileThumbnailMarkup",value:function(e){switch(this.getMimeClass(e)){case it.g.PICTURE:return'<span class="i123-image i-lg font-icon"></span>';case it.g.AUDIO:case it.g.OTHER:case it.g.VIDEO:case it.g.DOCUMENT:return'<span class="i123-file i-lg font-icon"></span>'}}},{key:"getFileExtension",value:function(e){var t=/.([^.]+)$/.exec(e);return t?t[1].toUpperCase():""}},{key:"toSentenceCase",value:function(e){for(var t="",n=!0,i=0,r=e.length;i<r;i++)" "==e[i]?(n=!0,t=t.concat(" ")):(t=t.concat(n?e[i].toUpperCase():e[i]),n=!1);return t}},{key:"guessApplicationNameFromMimeType",value:function(e){var t=e.toLowerCase().replace(/[^a-z0-9A-Z]+/g," ").replace(/(^v(endor|nd))/g,"").replace(/^x /g,"").replace(/[\s]+/g," ").replace(/(^ | $)/g,"");return this.toSentenceCase(t)}},{key:"getHumanFriendlyFileDescription",value:function(e){var t=this.getFileExtension(e),n=this.getMimeClass(e),i=this.getMimeType(e),r=[];switch(!0){case n===it.g.AUDIO:return this.i18n.translateText("uploadsManager_MIMETYPE_AudioLike",t);case n===it.g.VIDEO:return this.i18n.translateText("uploadsManager_MIMETYPE_VideoLike",t);case n===it.g.PICTURE:return this.i18n.translateText("uploadsManager_MIMETYPE_ImageLike",t);case["ZIP","RAR","GZ","7Z","ARJ"].indexOf(t)>-1:return this.i18n.translateText("uploadsManager_MIMETYPE_ArchiveLike",t);case!!(r=/^application\/([^$]+)$/.exec(i)):return this.i18n.translateText("uploadsManager_MIMETYPE_ApplicationLike",this.guessApplicationNameFromMimeType(r[1]));default:return this.i18n.translateText("uploadsManager_MIMETYPE_UnknownLike",t)}}}]),e}(),Qd=n(92),$d=n(300),ep=n(301),tp=function(){function e(t){o()(this,e),v()(this,"parsed",""),v()(this,"remain",""),v()(this,"lineNum",1),v()(this,"fileName","<UNKNOWN>"),this.remain=t}return l()(e,[{key:"consume",value:function(e){if(e<0)throw new Error("Invalid argument");var t=this.remain.substr(0,e),n=t.length;if(0!==n){for(var i=0;i<n;i++)"\r"===t.charAt(i)?(i+1<n&&"\n"==t.charAt(i+1)&&i++,this.lineNum++):"\n"==t.charAt(i)&&this.lineNum++;this.parsed+=t,this.remain=this.remain.substr(n)}}},{key:"tell",value:function(){return this.parsed.length}},{key:"available",value:function(){return this.remain.length}},{key:"eof",value:function(){return""===this.remain}},{key:"line",value:function(){return this.lineNum}},{key:"file",value:function(){return this.fileName}},{key:"setFileName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.fileName=e||"<UNKNOWN>"}},{key:"canReadString",value:function(e){return"string"===typeof e&&this.remain.substr(0,e.length)===e}},{key:"canReadExpression",value:function(e){return e?e.exec(this.remain):null}},{key:"toString",value:function(){return this.remain}},{key:"nextToken",value:function(){return this.eof()?"END_OF_FILE":(e=/^([\s]+)?([^\s]+)/.exec(this.remain))?e[0]:"";var e}}]),e}(),np=function(){function e(){o()(this,e)}return l()(e,null,[{key:"isArray",value:function(e){return e&&P()(e,Array)}},{key:"isComplex",value:function(e){return e&&"object"===Qt()(e)}},{key:"hasProperty",value:function(t,n){return e.isComplex(t)&&t.hasOwnProperty(n)}},{key:"getProperty",value:function(t,n){return e.hasProperty(t,n)?t[n]:null}},{key:"getKeys",value:function(t){if(e.isComplex(t)){var n=[];if(e.isArray(t))for(var i=0,r=t.length;i<r;i++)n.push(String(i));else for(var a in t)t.hasOwnProperty(a)&&n.push(a);return n}return[]}},{key:"isString",value:function(e){return"string"===typeof e}},{key:"isSet",value:function(e){return void 0!==e}},{key:"isInt",value:function(e){return"number"===typeof e&&isFinite(e)&&!isNaN(e)&&Math.round(e)===e}},{key:"arrayKeyExists",value:function(t,n){return e.isComplex(n)&&n.hasOwnProperty(t)}},{key:"arrayMerge",value:function(e,t){for(var n=[],i=0,r=e.length;i<r;i++)n.push(e[i]);for(var a=0,o=t.length;a<o;a++)n.push(t[a]);return n}},{key:"arrayValues",value:function(t){return e.isArray(t)?t.slice(0):[]}},{key:"arrayUnique",value:function(t){if(!e.isArray(t))return[];var n,i,r,a,o=[];for(r=0,a=t.length;r<a;r++){for(n=!1,i=0;i<r;i++)if(t[r]===t[i]){n=!0;break}n||o.push(t[r])}return o}},{key:"isFloat",value:function(e){return"number"===typeof e&&isFinite(e)&&!isNaN(e)&&Math.round(e)!==e}},{key:"reverseString",value:function(e){for(var t="",n=e.length-1;n>-1;n--)t+=e.charAt(n);return t}}]),e}();function ip(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var rp=function(e){u()(n,e);var t=ip(n);function n(e,i,r){var a;return o()(this,n),a=t.call(this,e),v()(A()(a),"runtime",null),a.setFileName(i),a.runtime=r,a.parse(),a}return l()(n,[{key:"parseType",value:function(){if(!n.readWhiteSpaceOrComment(this))throw new Error("Unexpected token ".concat(JSON.stringify(this.nextToken())," at line: ").concat(this.line()," in file ").concat(this.file()));var e=n.readString("TOK_VARIABLE_NAME",this);if(!1===e)throw new Error("Unexpected token ".concat(JSON.stringify(this.nextToken()),", expected type name, at line: ").concat(this.line()," in file ").concat(this.file()));var t=null;if(n.readWhiteSpaceOrComment(this),n.read("TOK_EXTENDS",this)&&(n.readWhiteSpaceOrComment(this),!1===(t=n.readString("TOK_VARIABLE_NAME",this))))throw new Error("Unexpected token ".concat(JSON.stringify(this.nextToken()),", expected extended type name, at line: ").concat(this.line()," in file ").concat(this.file()));var i,r=this.runtime.addType(e,t);if(n.readWhiteSpaceOrComment(this),!n.read("TOK_BLOCK_BEGIN",this))throw new Error("Unexpected token ".concat(JSON.stringify(this.nextToken()),', expected "{", at line: ').concat(this.line()," in file ").concat(this.file()));do{if(n.readWhiteSpaceOrComment(this),this.canReadExpression(n.tokens.TOK_BLOCK_END))break;(i=n.readTypeProperty(this,r)).isIndex?r.addIndex(i.indexType.type,{type:i.type,optional:i.optional}):r.addProperty(i.name,{type:i.type,optional:i.optional})}while(i);if(!n.read("TOK_BLOCK_END",this))throw new Error("Unexpected token ".concat(JSON.stringify(this.nextToken()),', expected "}", at line: ').concat(this.line()," in file ").concat(this.file(),", buffer: ").concat(JSON.stringify(this.toString())));return r}},{key:"parseValidator",value:function(){if(!n.readWhiteSpaceOrComment(this))throw new Error("Unexpected token ".concat(JSON.stringify(this.nextToken())," at line: ").concat(this.line()," in file ").concat(this.file()));var e,t,i,r;if(e=n.readString("TOK_VARIABLE_NAME",this),t=null,n.readWhiteSpaceOrComment(this),n.read("TOK_EXTENDS",this)&&(n.readWhiteSpaceOrComment(this),!1===(t=n.readString("TOK_VARIABLE_NAME",this))))throw new Error("Unexpected token ".concat(JSON.stringify(this.nextToken()),", expected extended validator name, at line: ").concat(this.line()," in file ").concat(this.file()));if(i=this.runtime.addValidator(e,t),n.readWhiteSpaceOrComment(this),!n.read("TOK_BLOCK_BEGIN",this))throw new Error("Unexpected token ".concat(JSON.stringify(this.nextToken()),', expected "{", at line: ').concat(this.line()," in file ").concat(this.file()));do{if(n.readWhiteSpaceOrComment(this),this.canReadExpression(n.tokens.TOK_BLOCK_END))break;r=n.readValidatorProperty(this,i)}while(r);if(!n.read("TOK_BLOCK_END",this))throw new Error("Unexpected token ".concat(JSON.stringify(this.nextToken()),', expected "}", at line: ').concat(this.line()," in file ").concat(this.file(),", buffer: ").concat(JSON.stringify(this.toString())));return i}},{key:"parse",value:function(){for(;!this.eof();)switch(!0){case n.read("WHITESPACE",this):case n.read("COMMENT",this):break;case n.read("TOK_TYPE",this):this.parseType();break;case n.read("TOK_VALIDATOR",this):this.parseValidator();break;default:throw new Error("Unknown token ".concat(JSON.stringify(this.nextToken())," at line: ").concat(this.line()," in file ").concat(this.file()))}}}],[{key:"read",value:function(e,t){if(!np.isString(e))throw new Error("Invalid argument tokenName: expected string");if(np.arrayKeyExists(e,n.tokens)){var i=null;switch(e){case"TOK_TYPE":i=4;break;case"TOK_VALIDATOR":i=9;break;case"TOK_EXTENDS":i=7}var r=t.canReadExpression(n.tokens[e]);return!!r&&(t.consume(null===i?r[0].length:i),!0)}throw new Error("Unknown parser token name: ".concat(e))}},{key:"readString",value:function(e,t){if(!np.isString(e))throw new Error("Invalid argument tokenName: expected string");if(np.arrayKeyExists(e,n.tokens)){var i=t.canReadExpression(n.tokens[e]);return!!i&&(t.consume(i[0].length),i[0])}throw new Error("Unknown parser token name: ".concat(e))}},{key:"readWhiteSpaceOrComment",value:function(e){if(e.eof())return!1;var t=0,i=!1;do{i=!1,n.read("WHITESPACE",e)||n.read("COMMENT",e)?(i=!0,t++):e.eof()&&(i=!0)}while(!0===i);return t>0}},{key:"readTypeProperty",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n.readWhiteSpaceOrComment(e);var r={isIndex:!1,indexType:!1,name:!1,optional:!1,type:!1};if(n.read("TOK_SQBRACKET_BEGIN",e)){if(r.indexType=n.readTypeProperty(e,t,!1),r.optional)throw new Error("Indexes cannot be optional, at line ".concat(e.line()," in file ").concat(e.file()));if(r.isIndex=!0,n.readWhiteSpaceOrComment(e),!n.read("TOK_SQBRACKET_END",e))throw new Error("Unexpected token ".concat(JSON.stringify(e.nextToken()),', expected "]", at line ').concat(e.line()," in file ").concat(e.file()))}else{if(r.name=n.readString("TOK_VARIABLE_NAME",e),!1===r.name)throw new Error("Unexpected token ".concat(JSON.stringify(e.nextToken()),", expected key name, at line ").concat(e.line()," in file ").concat(e.file()));r.optional=n.read("TOK_QUESTION",e),n.readWhiteSpaceOrComment(e)}if(!n.read("TOK_DOUBLEDOT",e))throw new Error("Unexpected token ".concat(JSON.stringify(e.nextToken()),', expected ":", at line ').concat(e.line()," in file ").concat(e.file()));if(n.readWhiteSpaceOrComment(e),!(r.type=n.readString("TOK_VARIABLE_NAME",e)))throw new Error("Unexpected token ".concat(JSON.stringify(e.nextToken()),", expected TYPE_DEF, at line ").concat(e.line()," in file ").concat(e.file()));if(n.read("TOK_SQBRACKET_BEGIN",e)){if(!n.read("TOK_SQBRACKET_END",e))throw new Error("Unexpected token ".concat(JSON.stringify(e.nextToken()),', expected "]", at line ').concat(e.line()," in file ").concat(e.file()));r.type="".concat(r.type,"[]")}if(n.readWhiteSpaceOrComment(e),i&&!n.read("TOK_SEMICOLON",e))throw new Error("Unexpected token ".concat(JSON.stringify(e.nextToken()),', expected ";", at line ').concat(e.line()," in file ").concat(e.file()));return r}},{key:"readInlineValue",value:function(e){var t,i=n.readString("TOK_NUMBER",e);if(np.isString(i))return parseFloat(String(i));if(i=n.readString("TOK_STRING",e),np.isString(i)){t="";for(var r=0,a=(i=i.substr(1,i.length-2)).length;r<a;r++)if("\\"==i[r])if(r<a-1){switch(i.charAt(r+1)){case"n":t+="\n";break;case"r":t+="\r";break;case"\t":t+="\t";break;default:t+=i.charAt(r+1)}r++}else t+=i.charAt(r);else t+=i.charAt(r);return t}return!1!==(i=n.readString("TOK_BOOLEAN",e))?"true"===i:null}},{key:"readEnumValues",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.readWhiteSpaceOrComment(e),!n.read("TOK_RBRACKET_BEGIN",e))throw new Error("Unexpected token ".concat(e.nextToken(),', expected "(", at line ').concat(e.line()," in file ").concat(e.file()));var i,r,a=[];do{i=!1,n.readWhiteSpaceOrComment(e),(r=t?n.readInlineValue(e):n.readString("TOK_VARIABLE_NAME",e))&&(a.push(r),n.readWhiteSpaceOrComment(e),n.read("TOK_COMMA",e)&&(i=!0))}while(i);if(n.readWhiteSpaceOrComment(e),!n.read("TOK_RBRACKET_END",e))throw new Error("Unexpected token ".concat(e.nextToken(),', expected ")", at line ').concat(e.line()," in file ").concat(e.file()));return a}},{key:"getValidatorPropertyRules",value:function(e){var t,i,r,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TOK_SEMICOLON",s=[];do{if(!1===(t=n.readString("TOK_VALIDATOR_PROPERTY",e)))throw new Error("Unexpected token ".concat(e.nextToken(),", expected validator operator, on line ").concat(e.line()," in file ").concat(e.file()));switch(t=t.substr(1),n.readWhiteSpaceOrComment(e),t){case"index":if(i=null,!n.read("TOK_SQBRACKET_BEGIN",e))throw new Error("Unexpected token ".concat(e.nextToken(),', expected "[", on line ').concat(e.line()," in file ").concat(e.file()));n.readWhiteSpaceOrComment(e),i=n.getValidatorPropertyRules(e,"TOK_SQBRACKET_END");break;case"instanceof":i=n.readString("TOK_VARIABLE_NAME",e);break;case"oneof":i=n.readEnumValues(e);break;case"require":if(e.canReadString("("))i=n.readEnumValues(e);else if(null===(i=n.readString("TOK_VARIABLE_NAME",e)))throw new Error("Unexpected token ".concat(JSON.stringify(e.nextToken()),", expected validator name or list of validators, on line ").concat(e.line()," in file ").concat(e.file()));break;case"in":case"nin":if(!e.canReadString("("))throw new Error("Unexpected token ".concat(JSON.stringify(e.nextToken()),', expected "(", on line ').concat(e.line()," in file ").concat(e.file()));i=n.readEnumValues(e,!0);break;default:i=n.readInlineValue(e)}if(null===i)throw new Error("Unexpected token ".concat(e.nextToken(),", expected <value>, at line ").concat(e.line()," in file ").concat(e.file()));if(n.readWhiteSpaceOrComment(e),n.read("TOK_VALIDATOR_PTR",e)?(n.readWhiteSpaceOrComment(e),null!==(r=n.readInlineValue(e))&&n.readWhiteSpaceOrComment(e)):r=null,!1===(a=n.read("TOK_COMMA",e))){if(!1===n.read(o,e))throw new Error("Unexpected token ".concat(e.nextToken(),", expected <").concat(o,'> or ",", at line ').concat(e.line()," in file ").concat(e.file()));n.readWhiteSpaceOrComment(e)}if(e.eof())throw new Error("Unexpected end of buffer, @ line ".concat(e.line()," in file ").concat(e.file()));s.push({operator:t,value:i,error:r}),a&&n.readWhiteSpaceOrComment(e)}while(a);return s}},{key:"readValidatorProperty",value:function(e,t){var i,r,a;if(n.readWhiteSpaceOrComment(e),e.canReadString("@")){i=n.getValidatorPropertyRules(e);try{for(var o in i)i.hasOwnProperty(r)&&(r=i[o],t.addRootCondition(r.operator,r.value,r.error))}catch(l){throw new Error("Parser error, at line ".concat(e.line()," in file ").concat(e.file(),": ").concat(l.getMessage()))}}else{if(!1===(a=n.readString("TOK_VARIABLE_NAME",e)))throw new Error("Unexpected token ".concat(e.nextToken(),", expected <operator> or <property>, at line ").concat(e.line()," in file ").concat(e.file()));if(n.readWhiteSpaceOrComment(e),!n.read("TOK_DOUBLEDOT",e))throw new Error("Unexpected token ".concat(e.nextToken(),', expected ":", at line ').concat(e.line()," in file ").concat(e.file()));n.readWhiteSpaceOrComment(e),i=n.getValidatorPropertyRules(e);try{for(var s in i)i.hasOwnProperty(r)&&(r=i[s],t.addPropertyCondition(a,r.operator,r.value,r.error))}catch(l){throw new Error("Parser error, at line ".concat(e.line()," in file ").concat(e.file(),": ").concat(l.getMessage()))}}return t}}]),n}(tp);v()(rp,"tokens",{WHITESPACE:/^([\s]+)/,COMMENT:/^(\/\/[^\n\r]+|\/\*[\s\S\r\n]+?\*\/)/,TOK_TYPE:/^type(\s|\/)/,TOK_VALIDATOR:/^validator(\s|\/)/,TOK_EXTENDS:/^extends(\s|\/)/,TOK_VARIABLE_NAME:/^[a-zA-Z_]([a-zA-Z0-9_]+)?/,TOK_BLOCK_BEGIN:/^\{/,TOK_BLOCK_END:/^\}/,TOK_SQBRACKET_BEGIN:/^\[/,TOK_SQBRACKET_END:/^\]/,TOK_RBRACKET_BEGIN:/^\(/,TOK_RBRACKET_END:/^\)/,TOK_QUESTION:/^\?/,TOK_DOUBLEDOT:/^\:/,TOK_SEMICOLON:/^;/,TOK_VALIDATOR_PROPERTY:/^@[a-zA-Z_]([a-zA-Z0-9_]+)?/,TOK_VALIDATOR_PTR:/^=>/,TOK_NUMBER:/^(\-)?[\d]+(\.[\d]+)?/,TOK_STRING:/^("(?:[^"\\\\]|\\\\.)*"|\'(?:[^\'\\\\]|\\\\.)*\')/,TOK_BOOLEAN:/^(true|false)/,TOK_NULL:/^null/,TOK_COMMA:/^,/});var ap=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(o()(this,e),v()(this,"runtime",void 0),v()(this,"name",void 0),v()(this,"_extends",null),v()(this,"properties",null),v()(this,"index",null),this.runtime=t,this.name=n,null!==i){if("string"!==typeof i)throw new Error("extendsType argument must be string|null");this._extends=i}}return l()(e,[{key:"test",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=np.isArray(t);if(!np.isComplex(e))return n&&t.push("array | object expected"),!1;for(var i,r,a,o,s=this.getRequiredProperties(),l=0,c=s.length;l<c;l++)if(i=s[l],!np.hasProperty(e,i))return n&&t.push("object ".concat(JSON.stringify(e)," does not implement a property called ").concat(JSON.stringify(i))),!1;for(var u=0,d=np.getKeys(e),p=d.length;u<p;u++){if(r=d[u],a=np.getProperty(e,r),!(o=this.getPropertyType(r)))return n&&t.push("property ".concat(JSON.stringify(r),' is not implemented in type "').concat(this.name,'"')),!1;if(null===a){if(!this.isOptionalProperty(r))return n&&t.push("property ".concat(JSON.stringify(r)," cannot be null")),!1}else if(!this.runtime.isTypeOf(a,o))return n&&t.push("property ".concat(JSON.stringify(r)," must be of type ").concat(JSON.stringify(o))),!1}return!0}},{key:"isOptionalProperty",value:function(e){return void 0===this.properties[e]||this.properties[e].optional}},{key:"testArray",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=np.isArray(n);if(!np.isComplex(e))return i&&n.push("array | object expected"),!1;for(var r=0,a=(t=np.getKeys(e)).length;r<a;r++){if(-1===t.indexOf(String(r)))return i&&n.push("array | complex type expected"),!1;if(!this.test(np.getProperty(e,String(r)),n))return i&&n.push("index #".concat(String(r)," is not a ").concat(this.name)),!1}return!0}},{key:"addProperty",value:function(e,t){if(null===this.properties&&(this.properties={}),!np.isString(e)||""===e)throw new Error("Invalid argument: propertyName must be of type string!");if(!np.isComplex(t))throw new Error("Invalid argument: propertyType must be of type object!");if(np.isSet(this.properties[e]))throw new Error('Duplicate property "'.concat(e,'" in interface "').concat(this.name,'"'));this.properties[e]=t}},{key:"addIndex",value:function(e,t){if(null!==this.index)throw new Error('Interface "'.concat(this.name,'" already has a assigned index'));if(!np.isString(e)||""===e)throw new Error("Invalid argument ( indexNameType )");if("int"!=e&&"number"!=e&&"string"!=e)throw new Error("Invalid index name type. Index names can be of type int|number|string");if(!np.isArray(t))throw new Error("Invalid argument: indexValueType must be of type array!");this.index={keyType:e,valueType:t}}},{key:"toString",value:function(){if(null===this.index&&null===this.properties)return this.name;var e,t="interface ".concat(this.name).concat(null===this._extends?"":" extends ".concat(this._extends)," {"),n=[];if(null!==this.index&&n.push("    [ index: ".concat(this.index.keyType," ]: ").concat(this.runtime.typeToString(this.index.valueType))),null!==this.properties)for(var i in this.properties)this.properties.hasOwnProperty(i)&&(e=this.properties[i],n.push("    ".concat(i).concat(e.optional?"?":"",": ").concat(this.runtime.typeToString(e))));return n.length&&(t="".concat(t,"\n").concat(n.join(";\n"),";\n")),t="".concat(t,"}")}},{key:"validPropertyKey",value:function(e){if(null===this.properties&&null===this.index)return!1;if(!np.isString(e)&&!np.isInt(e))return!1;if(np.isString(e)&&""===e)return!1;if(null!==this.properties&&np.arrayKeyExists(e,this.properties))return!0;if(null!==this.index&&this.runtime.isTypeOf(e,this.index.keyType))return!0;if(null!==this._extends){var t=this.runtime.getType(this._extends);if(t)return t.validPropertyKey(e)}return!1}},{key:"getPropertyType",value:function(e){if(null===this.properties&&null===this.index)return!1;if(!np.isString(e)&&!np.isInt(e))return!1;if(np.isString(e)&&""===e)return!1;if(null!==this.properties&&np.arrayKeyExists(e,this.properties))return this.properties[e].type;if(null!==this.index&&this.runtime.isTypeOf(e,this.index.keyType))return this.index.valueType.type;if(null!==this._extends){var t=this.runtime.getType(this._extends);if(t)return t.getPropertyType(e)}return!1}},{key:"getRequiredProperties",value:function(){var e=[];if(null!==this.properties)for(var t in this.properties)this.properties.propertyIsEnumerable(t)&&!1===this.properties[t].optional&&e.push(t);else e=[];if(null!==this._extends){var n=this.runtime.getType(this._extends);n&&(e=np.arrayMerge(e,n.getRequiredProperties()))}return np.arrayValues(np.arrayUnique(e))}},{key:"getTypeDescriptor",value:function(){return{properties:this.properties,extendsType:this._extends,name:this.name}}}]),e}();function op(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var sp=function(e){u()(n,e);var t=op(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"test",value:function(e){return void 0!==e}}]),n}(ap);function lp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var cp=function(e){u()(n,e);var t=lp(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"test",value:function(e){return!0===e||!1===e}}]),n}(ap);function up(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var dp=function(e){u()(n,e);var t=up(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"test",value:function(e){return np.isFloat(e)}}]),n}(ap);function pp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var hp=function(e){u()(n,e);var t=pp(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"test",value:function(e){return np.isInt(e)}}]),n}(ap);function _p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var gp=function(e){u()(n,e);var t=_p(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"test",value:function(e,t){return"number"===typeof e&&isFinite(e)}}]),n}(ap);function mp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var fp=function(e){u()(n,e);var t=mp(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"test",value:function(e){return"string"===typeof e&&/^(0|(\-)?[1-9]([0-9]+)?)\.[0-9]+$/.test(e)}}]),n}(ap);function Ep(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var yp=function(e){u()(n,e);var t=Ep(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"test",value:function(e){return!!np.isString(e)&&/^(0|(\-)?[1-9]([0-9]+)?)$/.test(e)}}]),n}(ap);function Tp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var vp=function(e){u()(n,e);var t=Tp(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"test",value:function(e){return"string"===typeof e&&/^(0|(\-)?[1-9]([0-9]+)?)(\.[0-9]+)?$/.test(e)}}]),n}(ap);function Op(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var bp=function(e){u()(n,e);var t=Op(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"test",value:function(e){return"string"===typeof e}}]),n}(ap),Cp=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(o()(this,e),v()(this,"runtime",null),v()(this,"name",null),v()(this,"_extends",null),v()(this,"extended",!1),v()(this,"rootRules",null),v()(this,"propertyRules",null),v()(this,"lastTestedValue",null),this.runtime=t,this.name=n,null!==i&&!np.isString(i))throw new Error("Invalid argument: extendsValidator: null|string expected!");this._extends=i}return l()(e,[{key:"addRootCondition",value:function(e,t){throw new Error("Validator::addRootCondition (and some more methods) are not ported to javascript version!")}},{key:"addPropertyCondition",value:function(e,t,n){throw new Error("Validator::addPropertyCondition (and some more methods) are not ported to javascript version!")}},{key:"test",value:function(e){throw new Error("Validator::test (and some more methods) are not ported to javascript version")}}]),e}(),Ip=function(){function e(){o()(this,e),v()(this,"types",null),v()(this,"validators",null),this.types={int:new hp(this,"int"),sint:new yp(this,"sint"),float:new dp(this,"float"),sfloat:new fp(this,"sfloat"),number:new gp(this,"number"),snumber:new vp(this,"snumber"),boolean:new cp(this,"boolean"),string:new bp(this,"string"),any:new sp(this,"any")},this.validators={}}return l()(e,[{key:"addType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.isTypeName(e))throw new Error("Invalid type name `".concat(JSON.stringify(e),"`. The type name must be a string"));return this.isTypeRegistered(e)?this.types[e]:this.types[e]=new ap(this,e,t)}},{key:"addValidator",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.isValidatorName(e))throw new Error("Invalid validator name");return this.isValidatorRegistered(e)?this.validators[e]:this.validators[e]=new Cp(this,e,t)}},{key:"isTypeName",value:function(e){return!(!np.isString(e)||""===e||!/^[a-zA-Z_]([a-zA-Z0-9_]+)?(\[\])?$/.test(e))}},{key:"isValidatorName",value:function(e){return!(!np.isString(e)||""===e||!/^[a-zA-Z_]([a-zA-Z0-9_]+)?$/.test(e))}},{key:"isTypeRegistered",value:function(e){return np.isString(e)&&np.arrayKeyExists(e,this.types)}},{key:"isValidatorRegistered",value:function(e){return np.isString(e)&&np.arrayKeyExists(e,this.validators)}},{key:"isTypeOf",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null!==n&&n.splice(0,n.length),this.isTypeName(t)){var i,r="]["==np.reverseString(t).substr(0,2);if(r&&(t=t.substr(0,t.length-2)),this.isTypeRegistered(t))return r?(i=this.types[t].testArray(e,n),np.isArray(n)&&0===n.length&&(n=null),i):(i=this.types[t].test(e,n),np.isArray(n)&&0===n.length&&(n=null),i);throw new Error('Type "'.concat(t,'" is not declared'))}throw new Error("Argument typeName must be a valid type string name")}},{key:"isValidatableBy",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null!==n&&n.splice(0,n.length),this.isValidatorName(t)){var i;if(this.isValidatorRegistered(t))return i=this.validators[t].test(e,n),np.isArray(n)&&0===n.length&&(n=null),i;throw new Error('Validator "'.concat(t,'" is not declared'))}throw new Error("Argument validatorName must be a valid validator string name")}},{key:"typeToString",value:function(e){if(np.isString(e))return e;if(np.isComplex(e)&&np.isString(e.type))return e.type;throw new Error("Invalid argument: string|IPropertyDefinition expected")}},{key:"toString",value:function(){var e=[];for(var t in this.types)this.types.hasOwnProperty(t)&&-1===["string","int","float","boolean","number","any"].indexOf(t)&&e.push(t.toString());for(var n in this.validators)this.validators.hasOwnProperty(n)&&e.push(n.toString());return e.join("\n\n")}},{key:"getType",value:function(e){return np.isString(e)&&np.isSet(this.types[e])?this.types[e]:null}},{key:"getValidator",value:function(e){return np.isString(e)&&np.isSet(this.validators[e])?this.validators[e]:null}},{key:"load",value:function(e){if(!np.isString(e))throw new Error("Invalid argument definitionFileBufferContents. Must be string!");if(""===e)throw new Error("Invalid argument definitionFileBufferContents. Must be non-empty!");return new rp(e,"<Buffer>",this),this}},{key:"hasType",value:function(e){return!(!np.isString(e)||!this.types.hasOwnProperty(e))}},{key:"describeType",value:function(e){if(!this.hasType(e))return"void";switch(e){case"int":case"sint":case"float":case"sfloat":case"number":case"snumber":case"boolean":case"string":case"any":return"native";default:return"user defined"}}},{key:"getTypeDescriptor",value:function(e){return this.hasType(e)?this.types[e].getTypeDescriptor():null}}],[{key:"createFromString",value:function(t){var n=new e;if(!np.isString(t))throw new Error("Failed to load definitions from string: ".concat(JSON.stringify(t)));return n.load(t),n}}]),e}(),Rp=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o()(this,e),v()(this,"capabilities",void 0),v()(this,"userService",void 0),v()(this,"isViewForm",!1),this.capabilities=t,this.isViewForm=n,this.userService=Xt.a.getInstance()}return l()(e,[{key:"getName",value:function(){return"full"}},{key:"getAllElements",value:function(){return[pe.nodeName,st.nodeName,Q.nodeName,ze.nodeName,W.nodeName,Ae.nodeName,In.nodeName,nt.nodeName,te.nodeName,Me.nodeName,_e.nodeName,we.nodeName,k.nodeName,Ve.nodeName,q.nodeName,ut.nodeName,We.nodeName,pt.nodeName,Be.nodeName,Qe.nodeName,at.nodeName,Ce.nodeName,le.nodeName,Re.nodeName,Ue.nodeName,Se.a.nodeName,vt.nodeName,mt.nodeName,yt.nodeName,et.nodeName,X.nodeName,oe.nodeName,Rn.a.nodeName,Nn.nodeName,bn.nodeName,Dn.nodeName,kn.nodeName]}},{key:"getAllEditorSettings",value:function(){return[K.a.PAYMENT_PRODUCTS_EDITOR_SETTING,K.a.PAYMENT_COUPON_CODES_EDITOR_SETTING,K.a.PAYMENT_SUMMARY_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_PAYPAL_PAYFLOW_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_PAYPAL_PRO_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_BRAINTREE_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_STRIPE_CHECKOUT_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_PAYU_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_SQUARE_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_SISOW_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_PAYFAST_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_WORLDPAY_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_AUTHORIZE_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_SAGEPAY_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_CIVICA_EDITOR_SETTING]}},{key:"getSupportedElements",value:function(){return[pe.nodeName,st.nodeName,Q.nodeName,ze.nodeName,W.nodeName,Ae.nodeName,In.nodeName,nt.nodeName,te.nodeName,Me.nodeName,_e.nodeName,we.nodeName,k.nodeName,Ve.nodeName,q.nodeName,ut.nodeName,We.nodeName,pt.nodeName,Qe.nodeName,at.nodeName,Ce.nodeName,le.nodeName,Re.nodeName,Ue.nodeName,Se.a.nodeName,et.nodeName,yt.nodeName,vt.nodeName,X.nodeName,oe.nodeName,Rn.a.nodeName,Nn.nodeName,bn.nodeName,Dn.nodeName,kn.nodeName,fe.nodeName]}},{key:"getSupportedEditorSettings",value:function(){return[K.a.PAYMENT_PRODUCTS_EDITOR_SETTING,K.a.PAYMENT_COUPON_CODES_EDITOR_SETTING,K.a.PAYMENT_SUMMARY_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_PAYPAL_PAYFLOW_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_PAYPAL_PRO_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_BRAINTREE_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_STRIPE_CHECKOUT_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_PAYU_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_SQUARE_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_SISOW_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_PAYFAST_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_WORLDPAY_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_AUTHORIZE_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_SAGEPAY_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING,K.a.PAYMENT_PROCESSOR_CIVICA_EDITOR_SETTING]}},{key:"getUnsupportedElements",value:function(){for(var e=this.getAllElements(),t=this.getSupportedElements(),n=[],i=0,r=e.length;i<r;i++)-1===t.indexOf(e[i])&&n.push(e[i]);return n}},{key:"getUnsupportedEditorSettings",value:function(){for(var e=this.getAllEditorSettings(),t=this.getSupportedEditorSettings(),n=[],i=0,r=e.length;i<r;i++)-1===t.indexOf(e[i])&&n.push(e[i]);return n}},{key:"createItemByTypeId",value:function(e,t,n){if(!this.isViewForm&&!this.userService.isControlSupported(e))return new ue(t,n).withTypeId(e);switch(e){case b.a.ELEMENT_TYPE_FORM:throw new Error("Operation is not supported by this factory. Use the FormUnserializer instead to create a new form!");case b.a.CONTAINER_TYPE_ROW:return new Sn(t,n);case b.a.CONTROL_TYPE_ADDRESS:return new k(t,n);case b.a.CONTROL_TYPE_CHECKBOX:return new W(t,n);case b.a.CONTROL_TYPE_DATE:return new q(t,n);case b.a.CONTROL_TYPE_DROPDOWN:return new Q(t,n);case b.a.CONTROL_TYPE_EMAIL:return new _e(t,n);case b.a.CONTROL_TYPE_FILE:return new te(t,n);case b.a.CONTROL_TYPE_HEADING:return new Ce(t,n);case b.a.CONTROL_TYPE_HTML_BLOCK:return new le(t,n);case b.a.CONTROL_TYPE_IMAGE:return new Re(t,n);case b.a.CONTROL_TYPE_LIKERT_SCALE:return new Ae(t,n);case b.a.CONTROL_TYPE_MAP:return new Se.a(t,n);case b.a.CONTROL_TYPE_NAME:return new we(t,n);case b.a.CONTROL_TYPE_NUMBER:return new Me(t,n);case b.a.CONTROL_TYPE_PAGE_BREAK:return new Ue(t,n);case b.a.CONTROL_TYPE_PASSWORD:return new Be(t,n);case b.a.CONTROL_TYPE_PHONE:return new Ve(t,n);case b.a.CONTROL_TYPE_PRICE:return new We(t,n);case b.a.CONTROL_TYPE_RADIO:return new ze(t,n);case b.a.CONTROL_TYPE_SIGNATURE:return new Qe(t,n);case b.a.CONTROL_TYPE_SOCIAL:return new et(t,n);case b.a.CONTROL_TYPE_STAR_RATING:return new nt(t,n);case b.a.CONTROL_TYPE_TERMS_OF_SERVICE:return new at(t,n);case b.a.CONTROL_TYPE_TEXT:return new pe(t,n);case b.a.CONTROL_TYPE_TEXTAREA:return new st(t,n);case b.a.CONTROL_TYPE_TIME:return new ut(t,n);case b.a.CONTROL_TYPE_WEBSITE:return new pt(t,n);case b.a.CONTROL_TYPE_FORM_HEADER:return new ye(t,n);case b.a.CONTROL_TYPE_CAPTCHA:return new Y(t,n);case b.a.CONTROL_TYPE_ACTION_BAR:return new I(t,n);case b.a.CONTROL_TYPE_WIDGET_FACEBOOK:return new mt(t,n);case b.a.CONTROL_TYPE_WIDGET_PDF:return new yt(t,n);case b.a.CONTROL_TYPE_WIDGET_VIDEO:return new vt(t,n);case b.a.CONTROL_TYPE_SEPARATOR:return new Ze(t,n);case b.a.CONTROL_TYPE_COUPON:return new X(t,n);case b.a.CONTROL_TYPE_FORMULA:return new oe(t,n);case b.a.CONTAINER_TYPE_DIV:return new bn(t,n);case b.a.CONTAINER_TYPE_PAGE:return new Rn.a(t,n);case b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE:return new Nn(t,n);case b.a.CONTAINER_TYPE_LIKERT_WRAPPER:return new In(t,n);case b.a.CONTAINER_TYPE_REPEATABLE:return new Dn(t,n);case b.a.CONTAINER_TYPE_REPEATABLE_GROUP:return new kn(t,n);case b.a.CONTROL_TYPE_FEE:return new fe(t,n);default:throw new Error("FormItemFactory.createItemByTypeId(): Don't know how to create a item with type id ".concat(JSON.stringify(e)))}}},{key:"createEditorSettingByTypeId",value:function(e,t,n){switch(e){case K.a.PAYMENT_PRODUCTS_EDITOR_SETTING:return new Kn.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_COUPON_CODES_EDITOR_SETTING:return new jn.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_SUMMARY_EDITOR_SETTING:return new zn.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING:return new ei.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING:return new $n.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_PROCESSOR_PAYPAL_PAYFLOW_EDITOR_SETTING:return new ti.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_PROCESSOR_PAYPAL_PRO_EDITOR_SETTING:return new ni.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_PROCESSOR_BRAINTREE_EDITOR_SETTING:return new Zn.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING:return new li.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_PROCESSOR_STRIPE_CHECKOUT_EDITOR_SETTING:return new si.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_PROCESSOR_PAYU_EDITOR_SETTING:return new ii.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_PROCESSOR_SQUARE_EDITOR_SETTING:return new oi.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_PROCESSOR_SISOW_EDITOR_SETTING:return new ai.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_PROCESSOR_PAYFAST_EDITOR_SETTING:return new Qn.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_PROCESSOR_WORLDPAY_EDITOR_SETTING:return new ci.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_PROCESSOR_AUTHORIZE_EDITOR_SETTING:return new Xn.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_PROCESSOR_SAGEPAY_EDITOR_SETTING:return new ri.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING:return new Jn.a(n,t,t.getEngine().getRuntime());case K.a.PAYMENT_PROCESSOR_CIVICA_EDITOR_SETTING:return new qn.a(n,t,t.getEngine().getRuntime());default:throw new Error("Failed to create editor setting ".concat(JSON.stringify(e),": Unknown setting type id"))}}},{key:"getItemStaticClassByTypeNameOrTypeId",value:function(e){switch(e){case Sd.nodeName:case b.a.ELEMENT_TYPE_FORM:return Sd;case Sn.nodeName:case b.a.CONTAINER_TYPE_ROW:return Sn;case k.nodeName:case b.a.CONTROL_TYPE_ADDRESS:return k;case W.nodeName:case b.a.CONTROL_TYPE_CHECKBOX:return W;case q.nodeName:case b.a.CONTROL_TYPE_DATE:return q;case Q.nodeName:case b.a.CONTROL_TYPE_DROPDOWN:return Q;case _e.nodeName:case b.a.CONTROL_TYPE_EMAIL:return _e;case te.nodeName:case b.a.CONTROL_TYPE_FILE:return te;case Ce.nodeName:case b.a.CONTROL_TYPE_HEADING:return Ce;case le.nodeName:case b.a.CONTROL_TYPE_HTML_BLOCK:return le;case Re.nodeName:case b.a.CONTROL_TYPE_IMAGE:return Re;case Ae.nodeName:case b.a.CONTROL_TYPE_LIKERT_SCALE:return Ae;case Se.a.nodeName:case b.a.CONTROL_TYPE_MAP:return Se.a;case we.nodeName:case b.a.CONTROL_TYPE_NAME:return we;case Me.nodeName:case b.a.CONTROL_TYPE_NUMBER:return Me;case Ue.nodeName:case b.a.CONTROL_TYPE_PAGE_BREAK:return Ue;case Be.nodeName:case b.a.CONTROL_TYPE_PASSWORD:return Be;case Ve.nodeName:case b.a.CONTROL_TYPE_PHONE:return Ve;case We.nodeName:case b.a.CONTROL_TYPE_PRICE:return We;case ze.nodeName:case b.a.CONTROL_TYPE_RADIO:return ze;case Qe.nodeName:case b.a.CONTROL_TYPE_SIGNATURE:return Qe;case et.nodeName:case b.a.CONTROL_TYPE_SOCIAL:return et;case nt.nodeName:case b.a.CONTROL_TYPE_STAR_RATING:return nt;case at.nodeName:case b.a.CONTROL_TYPE_TERMS_OF_SERVICE:return at;case pe.nodeName:case b.a.CONTROL_TYPE_TEXT:return pe;case st.nodeName:case b.a.CONTROL_TYPE_TEXTAREA:return st;case ut.nodeName:case b.a.CONTROL_TYPE_TIME:return ut;case pt.nodeName:case b.a.CONTROL_TYPE_WEBSITE:return pt;case ye.nodeName:case b.a.CONTROL_TYPE_FORM_HEADER:return ye;case Y.nodeName:case b.a.CONTROL_TYPE_CAPTCHA:return Y;case I.nodeName:case b.a.CONTROL_TYPE_ACTION_BAR:return I;case bn.nodeName:case b.a.CONTAINER_TYPE_DIV:return bn;case Rn.a.nodeName:case b.a.CONTAINER_TYPE_PAGE:return Rn.a;case Nn.nodeName:case b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE:return Nn;case In.nodeName:case b.a.CONTAINER_TYPE_LIKERT_WRAPPER:return In;case vt.nodeName:case b.a.CONTROL_TYPE_WIDGET_VIDEO:return vt;case yt.nodeName:case b.a.CONTROL_TYPE_WIDGET_PDF:return yt;case mt.nodeName:case b.a.CONTROL_TYPE_WIDGET_FACEBOOK:return mt;case X.nodeName:case b.a.CONTROL_TYPE_COUPON:return X;case oe.nodeName:case b.a.CONTROL_TYPE_FORMULA:return oe;case Dn.nodeName:case b.a.CONTAINER_TYPE_REPEATABLE:return Dn;case kn.nodeName:case b.a.CONTAINER_TYPE_REPEATABLE_GROUP:return kn;case fe.nodeName:case b.a.CONTROL_TYPE_FEE:return fe;default:return null}}},{key:"getAvailableControlsList",value:function(){for(var e=this.getSupportedElements(),t=[],n=0,i=e.length;n<i;n++)t.push(this.getItemStaticClassByTypeNameOrTypeId(e[n]).getConfiguration());return t}},{key:"getAvailableSettingsList",value:function(){for(var e=this.getSupportedEditorSettings(),t=[],n=0,i=e.length;n<i;n++)t.push(K.a.getSettingClassByTypeId(e[n]).getConfiguration());return t}},{key:"getUnavailableControlsList",value:function(){for(var e=this.getUnsupportedElements(),t=[],n=0,i=e.length;n<i;n++)t.push(this.getItemStaticClassByTypeNameOrTypeId(e[n]).getConfiguration());return t}},{key:"getUnavailableEditorSettingsList",value:function(){for(var e=this.getUnsupportedEditorSettings(),t=[],n=0,i=e.length;n<i;n++)t.push(K.a.getSettingClassByTypeId(e[n]).getConfiguration());return t}},{key:"addEditorSettingCapabilities",value:function(e,t){for(var n=0,i=t.factory.supportedSettingsTypeIds.length;n<i;n++){var r=t.factory.supportedSettingsTypeIds[n];K.a.getSettingClassByTypeId(r).defaultProperties=t.settings[r].defaultProperties}}},{key:"addControlsCapabilities",value:function(e,t){for(var n in t.controls)if(t.controls.hasOwnProperty(n)){var i=this.getItemStaticClassByTypeNameOrTypeId(t.controls[n].nodeName);for(var r in t.controls[n].nodeAttributes)if(t.controls[n].nodeAttributes.hasOwnProperty(r)){var a=t.controls[n].nodeAttributes[r],o=t.controls[n].nodeAttributesDefaultValues[r];this.addControlAttributeToStaticControlClass(i,r,a,o,e)}}}},{key:"runEditorCapabilitiesUnitTests",value:function(e,t){console.time("run_runtime_unit_tests");for(var n=0,i=0,r=t.factory.supportedSettingsTypeIds.length;i<r;i++){var a=t.factory.supportedSettingsTypeIds[i];if(!t.settings[a])throw new Error("".concat("Unit test failed: The capabilities reported that they support creation of setting type ").concat(JSON.stringify(a)," but the setting type ").concat(JSON.stringify(a),' is not defined in "capabilities.settings"'));if(n++,"object"!==Qt()(t.settings[a]))throw new Error("Object expected for setting type id ".concat(a));if(!t.settings[a].interface)throw new Error("Typescript interface expected for setting type id ".concat(a));if("user defined"!==e.describeType(t.settings[a].interface))throw new Error("Typescript interface ".concat(t.settings[a].interface," for setting type id ").concat(a," is not declared"));if(!t.settings[a].defaultProperties)throw new Error("Default setting properties expected for setting type id ".concat(a));if(null===K.a.getSettingClassByTypeId(a))throw new Error("Current factory implementation does not know how to create a editor setting of type".concat(JSON.stringify(a)));n++}for(var o in t.controls)if(t.controls.hasOwnProperty(o)){for(var s in t.controls[o].nodeAttributes){if("object"!==Qt()(t.controls[o].nodeAttributesDefaultValues))throw new Error("Unit tests failed: The control capabilities of control ".concat(JSON.stringify(t.controls[o].nodeName),' does not have a property called "nodeAttributesDefaultValues" of type object'));if(n++,t.controls[o].nodeAttributes.hasOwnProperty(s)){var l=t.controls[o].nodeAttributes[s];if("user defined"!==e.describeType(l))throw new Error("Unit tests failed: The control ".concat(JSON.stringify(t.controls[o])," attribute ").concat(JSON.stringify(s)," implements a type called ").concat(JSON.stringify(t.controls[o].nodeAttributes[s]),", but that type is not registered in the BrowserFS/Runtime engine."));if(n++,"object"!==Qt()(t.controls[o].nodeAttributesDefaultValues[s]))throw new Error("Unit tests failed: The control ".concat(JSON.stringify(t.controls[o])," attribute ").concat(JSON.stringify(s),' does not have it\'s corresponding default attribute values declared in "nodeAttributesDefaultValues" sibling property'));n++}}var c=this.getItemStaticClassByTypeNameOrTypeId(t.controls[o].nodeName);if(null===c)throw new Error("Current factory implementation does not know how to create a control of type".concat(JSON.stringify(t.controls[o].nodeName)));if(n++,"object"!==Qt()(c.attributes))throw new Error("The class that is implementing the item of type ".concat(JSON.stringify(t.controls[o].nodeName),' does not implement a static property called "attributes" of type object'));if(n++,null!==c.runtime)throw new Error("The class that is implementing the item of type ".concat(JSON.stringify(t.controls[o].nodeName),' does not implement a static property called "runtime" with value = null'));if(n++,"string"!==typeof c.nodeName)throw new Error("The class that is implementing the item of type ".concat(JSON.stringify(t.controls[o].nodeName),' does not implement a static property called "nodeName" of type string'));n++}console.timeEnd("run_runtime_unit_tests"),console.log("editor unit tests completed: ",n," tests passed")}},{key:"addControlAttributeToStaticControlClass",value:function(e,t,n,i,r){var a=e.attributes||{};a[t]={type:n,properties:{}};var o=r.getTypeDescriptor(n);if(o.properties)for(var s in o.properties)o.properties.hasOwnProperty(s)&&(a[t].properties[s]={type:o.properties[s].type,optional:o.properties[s].optional,defaultValue:i[s]});e.attributes=a,e.runtime=e.runtime||r}},{key:"getMaxNumberOfControls",value:function(e){return this.userService.getControlTotalLimitForControlType(e)}},{key:"isUnsupportedElement",value:function(e){for(var t=0,n=this.getUnavailableControlsList(),i=n.length;t<i;t++)if(n[t].typeId===e)return!0;return!1}},{key:"getUnsupportedProperties",value:function(){return[]}}]),e}(),Pp=n(187),Np=n(236);function Ap(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Sp=function(e){u()(n,e);var t=Ap(n);function n(e,i,r,a,s){var l;o()(this,n),l=t.call(this),v()(A()(l),"loader",void 0),v()(A()(l),"factory",void 0),v()(A()(l),"jq",void 0),v()(A()(l),"resourceManager",void 0),v()(A()(l),"theme",void 0),v()(A()(l),"documentSize",void 0),v()(A()(l),"form",void 0),v()(A()(l),"document",void 0),v()(A()(l),"capabilities",void 0),v()(A()(l),"runtime",void 0),v()(A()(l),"unserializer",void 0),v()(A()(l),"globalEventHandler",void 0),v()(A()(l),"reconfigureLayout",void 0),v()(A()(l),"geolocation",void 0),v()(A()(l),"validator",void 0),v()(A()(l),"currency",void 0),v()(A()(l),"uploadsService",void 0),v()(A()(l),"fileUtils",void 0),v()(A()(l),"timeUtils",void 0),v()(A()(l),"phoneUtils",void 0),v()(A()(l),"paymentProcessorsPluginFactory",void 0),L.a.withJQuery(i),l.form=r,l.loader=e;var c=l.loader.getLoaderType()===O.B.VIEW;switch(l.factory=new Rp(a,c),l.jq=i,l.capabilities=a,l.resourceManager=new Pp.a(l.jq,s),l.loader.getLoaderDependency(O.M.THEME_STRATEGY)){case O.nb.WIX_THEME_MANAGED_BY_WIX:l.theme=new Vd.a(A()(l),new xc);break;case O.nb.WIX_THEME:l.theme=new Vd.a(A()(l),new Hc(l.loader.getLoaderType()===O.B.VIEW,A()(l)));break;case O.nb.INTERNAL:default:l.theme=new Vd.a(A()(l),new Yc)}return l.document=new Sd(A()(l)),l.runtime=Ip.createFromString(a.factory.attributeDefinitions),l.unserializer=new Uu(A()(l)),l.globalEventHandler=new wd(A()(l),l.document),l.geolocation=new Xd(l.loader.getI18n(),l.loader.getLoaderDependency(O.M.GEOLOCATION_USER_COUNTRY_CODE)),l.phoneUtils=new Zd(l.geolocation),l.validator=new j.a(l.loader.getI18n(),a,l.phoneUtils),l.currency=He.share(l.loader.getI18n()),l.uploadsService=new Hu(l.jq,l.document,l.loader.getUserId(),new Jd(l.loader.getI18n())),l.fileUtils=new Kd.a(l.loader.getI18n()),l.timeUtils=Qd.a.createInstanceInNonSingletonModeWithoutInternationalizationSupport(),l.paymentProcessorsPluginFactory=new fc(A()(l)).withPlugin(new Ec).withPlugin(new yc),l.init(),l}return l()(n,[{key:"getI18n",value:function(){return this.loader.getI18n()}},{key:"getJQuery",value:function(){return this.jq}},{key:"getFactory",value:function(){return this.factory}},{key:"getLoader",value:function(){return this.loader}},{key:"getResourceManager",value:function(){return this.resourceManager}},{key:"getForm",value:function(){return this.form}},{key:"getDocumentSize",value:function(){return this.documentSize}},{key:"getDocument",value:function(){return this.document}},{key:"getTheme",value:function(){return this.theme}},{key:"getUnserializer",value:function(){return this.unserializer}},{key:"getGeolocation",value:function(){return this.geolocation||null}},{key:"getCurrency",value:function(){return this.currency||null}},{key:"getValidator",value:function(){return this.validator}},{key:"getCapabilities",value:function(){return this.capabilities}},{key:"onResize",value:function(){var e=this.form.offsetWidth,t=this.form.offsetHeight,n=!this.documentSize||e!==this.documentSize.width;this.documentSize=this.documentSize||{width:0,height:0},this.documentSize.width=e,this.documentSize.height=t,n&&this.theme.recompute(),S.a.refreshFrameHeightOnWix(),this.trigger("resize")}},{key:"reconfigureLayoutInImmediateMode",value:function(){for(var e,t=this.document.getLabelPlacement(),n=this.document.getInstructionsPlacement(),i=0,r=this.document.flatten(),a=r.length;i<a;i++)r[i].isRenderingSupported()&&(e=je.a.getSuggestedRenderer(r[i],t,n),r[i].rendererType=void 0,r[i].setRendererType(e));e=je.a.getSuggestedRenderer(this.document.getCaptcha(),t,n),this.document.getCaptcha().rendererType=void 0,this.document.getCaptcha().setRendererType(e)}},{key:"init",value:function(){console.log("engine::init()"),function(e,t){t.reconfigureLayout=ie.a.create((function(){t.reconfigureLayoutInImmediateMode()}),0),t.on("theme-ready",(function(){t.document.getRootNode().setAttribute("data-theme-is-ready","1"),S.a.refreshFrameHeightOnWix()})),t.factory.runEditorCapabilitiesUnitTests(t.runtime,t.capabilities),t.factory.addControlsCapabilities(t.runtime,t.capabilities),t.factory.addEditorSettingCapabilities(t.runtime,t.capabilities),t.form.appendChild(t.theme.getStyleElement()),document.body.appendChild(t.theme.getFormCustomCSSFromUrlElement()),document.body.appendChild(t.theme.getFormCustomCSSTextStyleElement()),window.document.body.appendChild(t.theme.getThemeThumbnailsStyleElement()),t.document.on("node-property-changed",(function(e,n,i,r){t.globalEventHandler.dispatch(e,n,i,r)})),t.document.on("node-attribute-changed",(function(e,n,i){t.globalEventHandler.dispatch(e,n,i,null)})),t.document.getHeader().onCreated(),t.document.getHeader().setupI18n(),t.document.getCaptcha().onCreated(),t.document.getCaptcha().setupI18n(),t.document.getActionBar().onCreated(),t.document.getActionBar().setupI18n(),e(window).on("resize",(function(){t.onResize()})),t.loader.on("i18n-loaded",(function(){t.timeUtils=new Qd.a(t.getI18n()),t.document.updateI18n()})),t.onResize(),setTimeout((function(){S.a.refreshFrameHeightOnWix()}),300)}(this.jq,this)}},{key:"createElement",value:function(e,t,n){var i=this.factory.createItemByTypeId(e,n||this.document,t);if(i.onCreated(),i.setupI18n(),this.document){var r=this.document.getLabelPlacement(),a=this.document.getInstructionsPlacement();if(i.isRenderingSupported()){var o=je.a.getSuggestedRenderer(i,r,a);i.setRendererType(o)}}return i}},{key:"loadFromString",value:function(e,t){this.unserializer.unserialize(JSON.parse(e),t||!1)}},{key:"updateState",value:function(e){if(e){var t,n,i=[];for(var r in this.document.disableEvents(),e)if("settings"!==r)e.hasOwnProperty(r)&&e.propertyIsEnumerable(r)&&null!==(t=this.document.getElementByHash(r))&&(-1===i.indexOf(t)&&t.getErrors()!==(e[r].errors||null)&&i.push(t),t.withId(e[r].id||null).withErrors(e[r].errors||null),[b.a.CONTROL_TYPE_DROPDOWN,b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_RADIO].indexOf(t.getTypeId())>-1&&this.getLoader().execCommand("reset-used-choices",t));else{for(var a in e.settings)e.settings.propertyIsEnumerable(a)&&null!==(n=this.document.getEditorSettingByTypeId(a))&&(-1===i.indexOf(n)&&n.getErrors()!==(e.settings[a]||null)&&i.push(n),n.withErrors(e.settings[a]));this.loader.getCommandDispatcher().trackPaymentsActivation()}this.document.enableEvents();for(var o=0,s=i.length;o<s;o++)this.document.trigger("errors-changed",i[o])}}},{key:"getUploadsService",value:function(){return this.uploadsService}},{key:"getFileUtils",value:function(){return this.fileUtils}},{key:"getTimeUtils",value:function(){return this.timeUtils}},{key:"getPhoneUtils",value:function(){return this.phoneUtils}},{key:"getPaymentProcessorsPluginFactory",value:function(){return this.paymentProcessorsPluginFactory}},{key:"getRuntime",value:function(){return this.runtime}},{key:"setSubmissionPhase",value:function(e,t){this.getDocument().getRootNode().setAttribute("data-submission-phase",n.getSubmissionPhaseName(t?e:null));var i=document.createElement("div");switch(i.setAttribute("data-submission-phase",n.getSubmissionPhaseName(t?e:null)),this.getDocument().getRootNode().appendChild(i),e){case O.E.SHOW_REPORT:this.loader.getCommandDispatcher().onSubmissionPhaseShowReport(t,i);break;case O.E.SHOW_QUIZ_RESULTS:this.loader.getCommandDispatcher().onSubmissionPhaseShowQuizResults(t,i);break;case O.E.SHOW_HTML:this.loader.getCommandDispatcher().onSubmissionPhaseShowHTML(t,i);break;case O.E.REDIRECT:this.loader.getCommandDispatcher().onSubmissionPhaseRedirect(t,i);break;case O.E.TEXT_AND_REDIRECT:this.loader.getCommandDispatcher().onSubmissionPhaseTextAndRedirect(t,i);break;case O.E.SHOW_TEXT:this.loader.getCommandDispatcher().onSubmissionPhaseShowText(t,i);break;case null:default:this.loader.getCommandDispatcher().onSubmissionPhaseUnhandled(t,i)}t&&void 0!==t.setURL&&this.loader.getCommandDispatcher().setPageURL(t.setURL)}}],[{key:"getSubmissionPhaseName",value:function(e){switch(e){case O.E.SHOW_REPORT:return"show-report";case O.E.SHOW_QUIZ_RESULTS:return"show-quiz-results";case O.E.SHOW_HTML:return"show-html";case O.E.REDIRECT:return"redirect";case O.E.TEXT_AND_REDIRECT:return"text-and-redirect";case O.E.SHOW_TEXT:return"show-text";case null:default:return"unhandled"}}}]),n}(ir.a),Lp=n(304),Dp=function(){function e(t,n){o()(this,e),v()(this,"engine",void 0),v()(this,"loader",void 0),v()(this,"isPaymentProcessorChooserPluginInstalled",!1),v()(this,"isQuizTimerCountdownPluginInstalled",!1),v()(this,"quizTimerCountdownValue",void 0),v()(this,"isSubmitting",!1),v()(this,"lastCalculationHTMLMarkup",void 0),v()(this,"detailedInvoiceDialog",null),this.engine=t,this.loader=n,Nt.a.addHelper({name:"auto_uid",func:function(e){return Wd.a.nextString}}),Nt.a.addHelper({name:"auto_uid_last_string",func:function(e){return Wd.a.lastString}})}return l()(e,[{key:"navigateToRelativePageNumber",value:function(e){var t=this,n=this.engine.getDocument().getCurrentPageIndex();this.engine.getDocument().submit(O.F.SWITCH_PAGE,{targetPage:n+e}).then((function(i){if(console.log(JSON.stringify(i,void 0,4)),!i||void 0===i.ok)throw new Error("Oups, server responded with a unintelligible response!");if(i.ok)n+=e,t.engine.getDocument().setCurrentPageIndex(n),t.scrollToPageTop(n);else{if(void 0!==i.error)throw console.error(i.error),new Error("Error proceeding to "+(1===e?"next":"previous")+" page");t.handleSubmitErrors(i)}t.loader.getViewFormContext()===O.vb.APPROVAL&&Qe.drawSignaturesInPage(t.loader)})).fail((function(e){t.engine.getLoader().getUI().alert("Error",String(e))})).always((function(){S.a.scrollToTopOfFormWhenFormIsEmbeddedUnderIOS()}))}},{key:"scrollToPageTop",value:function(e){var t=this;this.loader.getFormSettings().autoFocusParentTop?window.parent.parent.scrollTo(0,0):(document.body.scrollTop=0,setTimeout((function(){var n=t.engine.getDocument().getPageByIndex(e).getHeaderContainerDOMNode();S.a.refreshFrameHeightOnWix(),S.a.allBrowsersCompatibleScrollIntoView(n)}),100))}},{key:"printPage",value:function(){window.print()}},{key:"reset",value:function(){this.engine.getDocument().reset(),this.engine.getDocument().setCurrentPageIndex(0),this.scrollToPageTop(0)}},{key:"preview",value:function(){this.engine.getDocument().setPreviewMode(!this.engine.getDocument().isPreviewModeEnabled()),this.scrollToPageTop(0)}},{key:"getFirstElementWithErrorsOnCurrentPage",value:function(){for(var e=this.engine.getDocument().getCurrentPageIndex(),t=this.engine.getDocument().getPageByIndex(e).flatten(),n=0,i=t.length;n<i;n++)if(t[n].getElementKind()===O.p.CONTROL&&t[n].isVisible()&&t[n].getErrors())return t[n];return null}},{key:"getFirstElementWithErrorsOnForm",value:function(){for(var e=0,t=this.engine.getDocument().flatten(),n=t.length;e<n;e++)if(t[e].getElementKind()===O.p.CONTROL&&t[e].isVisible()&&t[e].getErrors())return t[e];return null}},{key:"handleActionBarCommand",value:function(e){var t=null;switch(e){case"submit":lt.a.ENABLE_SUBMISSION_PREVENTION_ON_QUIZ_TIMER_EXPIRATION&&-1===this.loader.getLoaderDependency(O.M.CURRENT_QUIZ_TIMER)?this.loader.getUI().alert("",this.loader.getI18n().translateText("textdef_144")):(t=this.getFirstElementWithErrorsOnForm())?S.a.scrollElementIntoView(t.getRootNode()):this.submit(O.F.SUBMIT);break;case"update":(t=this.getFirstElementWithErrorsOnForm())?S.a.scrollElementIntoView(t.getRootNode()):this.submit(O.F.UPDATE);break;case"previous-page":(t=this.getFirstElementWithErrorsOnCurrentPage())?t.getRootNode().scrollIntoView(!1):this.navigateToRelativePageNumber(-1);break;case"next-page":(t=this.getFirstElementWithErrorsOnCurrentPage())?t.getRootNode().scrollIntoView(!1):this.navigateToRelativePageNumber(1);break;case"print":this.printPage();break;case"reset":this.reset();break;case"preview":this.preview();break;case"save-for-later":this.submit(O.F.SAVE_FOR_LATER);break;case"approve":(t=this.getFirstElementWithErrorsOnForm())?t.getRootNode().scrollIntoView():this.submit(O.F.APPROVE);break;case"reject":(t=this.getFirstElementWithErrorsOnForm())?t.getRootNode().scrollIntoView():this.submit(O.F.REJECT);break;case"calculate":this.recalculateForm(!0);break;default:console.warn("ViewFormDispatcher.handleActionBarCommand("+JSON.stringify(e)+"): Unrecognized command")}}},{key:"getQuizScoreResults",value:function(){return this.engine.getDocument().submit(O.F.CALCULATE_QUIZ_SCORE)}},{key:"submit",value:function(e){var t=this;if(setTimeout((function(){if(t.isSubmitting){var e=t.loader.getI18n().translateTextDefault("submitting_pleaseWait","Submitting, please wait\u2026");t.loader.createLoader(e)}}),3e3),!this.isSubmitting&&!this.loader.isEnabledAutoSubmit()){this.isSubmitting=!0;var n=this.loader.getLoaderDependency(O.M.IS_WORKFLOWS_VIEW_FORM_EMBED);!function(t,i){i.submit(e).then((function(e){e.ok?n?setTimeout(location.reload):(t.engine.setSubmissionPhase(void 0===e.action?null:e.action,void 0===e.details?null:e.details),setTimeout((function(){t.loader.getFormSettings().autoFocusParentTop?window.parent.parent.scrollTo(0,0):t.engine.getForm().scrollIntoView()}),100)):t.handleSubmitErrors(e)})).fail((function(e){i.addError(r.a.NET_ERR_FATAL_SUBMISSION_BAD_RESPONSE,"Bad server response")})).always((function(){t.loader.hideLoader(),t.isSubmitting=!1,S.a.scrollToTopOfFormWhenFormIsEmbeddedUnderIOS()}))}(this,this.engine.getDocument())}}},{key:"handleSubmitErrors",value:function(e){if(e.errors){var t,n,i=null,r=!0;for(var a in e.errors){if(e.errors.hasOwnProperty(a)&&e.errors.propertyIsEnumerable(a)&&(t=this.engine.getDocument().getElementByHash(a))){if(t.withErrors(e.errors[a]),t.getTypeId()===b.a.CONTROL_TYPE_ADDRESS&&t.updateFieldsWithErrors(),null!==t.getParentPage())n=t.getParentPage().getIndex();else switch(t.getTypeId()){case b.a.CONTROL_TYPE_CAPTCHA:n=t.getForm().getNumberOfPages()-1;break;default:n=null}i=null===i?n:Math.min(i,n)}if(r){var o=this.engine.getDocument().getElementByHash(a).getRootNode();if((x.a.isIOS()||x.a.isMAC())&&window.Wix)!function(){var e=o.getBoundingClientRect(),t=e.top,n=e.height;window.Wix.getBoundingRectAndOffsets((function(e){window.Wix.scrollTo(e.offsets.x,e.offsets.y+t-n)}))}();else if(x.a.isMAC()&&window.parentIFrame){var s=o.getBoundingClientRect(),l=s.top,c=s.height;window.parentIFrame.scrollToOffset(0,l-c)}else if(window.MSInputMethodContext&&document.documentMode){var u=o.getBoundingClientRect(),d=u.top,p=u.height;document.documentElement.scrollTop=d-p}else o.scrollIntoView(!1);r=!1}}S.a.refreshFrameHeightOnWix(),null!==i&&this.engine.getDocument().setCurrentPageIndex(i)}}},{key:"handleErrorActionCommand",value:function(e){switch(e){case"clear-submit-net-error":this.engine.getDocument().removeError(r.a.NET_ERR_FATAL_SUBMISSION_BAD_RESPONSE)}}},{key:"onSubmissionPhaseShowReport",value:function(e,t){t.textContent="[TODO] Show report: "+JSON.stringify(e)}},{key:"onSubmissionPhaseShowQuizResults",value:function(e,t){t.textContent="[TODO] Show quiz results: "+JSON.stringify(e)}},{key:"onSubmissionPhaseShowHTML",value:function(e,t){t.innerHTML=e.html,this.loader.getI18n().translateDOMNode(t)}},{key:"openURL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get",i=arguments.length>3?arguments[3]:void 0,r=this.loader.getLoaderDependency(O.M.SESSION_ID),a="/url-redirect.php?url=".concat(encodeURIComponent(e)),o={target:t,method:n,token:this.loader.getCSRFToken(),uniqueViewId:this.loader.getUniqueViewId(),uniqueViewIdKey:this.loader.getUniqueViewIdKey()};r&&(o.PHPSESSID=r),Si()(o,i),Object(H.a)(o,(function(e,t){a+="&".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e))})),gi.a.setRawUrl(a)}},{key:"onSubmissionPhaseRedirect",value:function(e,t){this.openURL(e.url,e.target,"get",e.additional_url_parameters)}},{key:"onSubmissionPhaseTextAndRedirect",value:function(e,t){!function(n,i){n.engine.getResourceManager().get("/modules/Typescript/Form/resources/form-actions/text-and-redirect.html").then((function(r){e.timer=~~(~~e.timer/1e3);var a=new Nt.a(r);t.innerHTML=a.parse(e),function r(){e.timer<=0?n.openURL(e.url,e.target):(e.timer--,i(t).find("span.timer").text(String(e.timer)),setTimeout(r,1e3))}()}))}(this,this.engine.getJQuery())}},{key:"onSubmissionPhaseShowText",value:function(e,t){t.textContent=e.text||"Your form has been submitted"}},{key:"onSubmissionPhaseUnhandled",value:function(e,t){var n;n=this,this.engine.getJQuery(),n.engine.getResourceManager().get("/modules/Typescript/Form/resources/form-actions/unhandled.html").then((function(i){var r=new Nt.a(i);t.innerHTML=r.parse(e),n.openURL(e.url,e.target)}))}},{key:"updatePaymentsSelectorCreditCardLogo",value:function(e){var t=e.selectedIndex,n=e.options[t].getAttribute("data-logos"),i=JSON.parse(atob(n)),r=this.engine.getJQuery(),a=this.engine.getDocument().getConfiguration().getProperty("hasAccessibilityEnabled",!1);r(e).closest("label").find("span[data-role=credit-cards-list]").each((function(){var e;this.innerHTML="";for(var t=0,n=i.length;t<n;t++)(e=document.createElement("img")).src=i[t],a&&(e.tabIndex=0),this.appendChild(e)}))}},{key:"initPaymentsSelector",value:function(e){!function(t,n){if(n(e).find("select").each((function(){var n=L.a.createElement(L.a.ELEMENT_TYPE_DROPDOWN),i=t.engine.getDocument().getConfiguration().getProperty("hasAccessibilityEnabled",!1),r=Array.prototype.slice.call(this.options,0),a=Object(Fr.a)(r,(function(e){return e.selected}));Object(H.a)(r,(function(e,t){n.add(e,t)})),n.setSelectedIndex(a),n.setAttribute("data-role","i123-input"),i&&n.setAttribute("tabindex","0"),this.parentNode.insertBefore(n.getRootNode(),this),this.parentNode.removeChild(this),t.updatePaymentsSelectorCreditCardLogo(n.getRootNode()),t.updatePaymentsSelectorCreditCardExtraOptions(e,n.getRootNode())})),!t.isPaymentProcessorChooserPluginInstalled){var i=null,r=null,a=ie.a.create((function(){t.updatePaymentsSelectorCreditCardExtraOptions(r,i)}),10);n(t.engine.getForm()).on("change","div[data-role=control][data-type=payments-selector] label[data-role=secondary] div[data-ui-role=ui-element][data-type=dropdown]",(function(){var e=n(this).closest("[data-type=payments-selector]").get(0);t.updatePaymentsSelectorCreditCardLogo(this),i=this,r=e,a(),n(this).closest("label").find("input[type=radio]").each((function(){this.checked=!0}))})),n(t.engine.getForm()).on("click mousedown mouseup","div[data-role=control][data-type=payments-selector] div[data-ui-role=ui-element][data-type=dropdown]",(function(){n(this).closest("label").find("input[type=radio]").each((function(){this.checked=!0}))})),n(t.engine.getForm()).on("click","div[data-role=control][data-type=payments-selector] input[type=radio]",(function(){var e=n(this).closest("[data-type=payments-selector]").get(0);i=this,r=e,a()})),t.isPaymentProcessorChooserPluginInstalled=!0}}(this,this.engine.getJQuery())}},{key:"updatePaymentsSelectorCreditCardExtraOptions",value:function(e,t){var n=null;if("input"===t.nodeName.toLowerCase())if(-1!==~~t.getAttribute("value"))n=~~t.getAttribute("data-frontend-plugin-type-id")||null;else{var i=t.parentNode.querySelector("select");i&&(n=~~i.options[i.selectedIndex].getAttribute("data-frontend-plugin-type-id")||null)}else{var r=t.options,a=t.selectedIndex;r&&void 0!==a&&-1!==a&&(n=~~r[a].getAttribute("data-frontend-plugin-type-id")||null)}var o=this.engine.getPaymentProcessorsPluginFactory().getPlugin(n),s=e.querySelector("div[data-role=frontend-plugin]");o.render(s,this.engine),e.setAttribute("data-plugin-type-id",JSON.stringify(n))}},{key:"getSelectedPaymentProcessorExtraData",value:function(){return function(e,t){var n=null;return e.isPaymentProcessorChooserPluginInstalled&&t(e.engine.getForm()).find("div[data-role=control][data-type=payments-selector]").each((function(){var t=this.getAttribute("data-plugin-type-id");if(t){var i=JSON.parse(t),r=e.engine.getPaymentProcessorsPluginFactory().getPlugin(i);n=r.getValues(this,e.engine)}})),n}(this,this.engine.getJQuery())}},{key:"getSelectedPaymentProcessorTypeId",value:function(){var e=null;return this.isPaymentProcessorChooserPluginInstalled&&function(t,n){n(t.engine.getForm()).find("div[data-role=control][data-type=payments-selector] input[type=radio]").each((function(){if(this.checked){var t=~~this.value;-1===t?n(this).closest("label").find("select").each((function(){e=-1*~~this.value})):e=t}}))}(this,this.engine.getJQuery()),e}},{key:"setPageURL",value:function(e){try{if(!e)return;history.replaceState({},document.title,e.replace(/^(https?:)?\/\/[a-zA-Z0-9\.]+\//g,"/"))}catch(t){console.warn("Failed to set URL: ",e,": ",t)}}},{key:"getLastCalculationHTMLMarkup",value:function(){return this.lastCalculationHTMLMarkup||null}},{key:"recalculateForm",value:function(e){if((console.warn("CALCULATE: ",e?"MANUAL":"REALTIME"),!e)&&!this.loader.getLoaderDependency(O.M.SHOW_REALTIME_CALCULATIONS))return;!function(e,t,n,i){i.when(t.get("/modules/Typescript/Form/resources/form-invoice.html"),n.calculate()).then((function(t,r){if(!r||!r.invoiceObject||r&&0===r.invoiceObject.total)i(n.getRootNode()).find("[data-role=page-header] [data-role=control][data-type=realtime-calculations]").attr("data-is-empty","1"),i(n.getRootNode()).find("[data-role=page-footer] [data-type=payment-summary]").attr("data-is-empty","1"),e.loader.trigger("form_has_products_or_fixed_fees_changed",!0);else{i(n.getRootNode()).find("[data-role=page-header] [data-role=control][data-type=realtime-calculations]").removeAttr("data-is-empty"),i(n.getRootNode()).find("[data-role=page-footer] [data-type=payment-summary]").removeAttr("data-is-empty"),e.loader.trigger("form_has_products_or_fixed_fees_changed",!1),e.lastCalculationHTMLMarkup=mc.a.getInstance().computeLastCalculationHTMLMarkup(t,r,e.loader.getLoaderDependency(O.M.DETAILED_INVOICE_OPTIONS));var a=r.currencyHTML+r.invoiceObject.total;i(n.getRootNode()).find("[data-role=page-header] [data-role=control][data-type=realtime-calculations] [data-role=calculation-total]").each((function(){this.innerHTML=a,e.loader.getI18n().translateDOMNode(this)})),i(n.getRootNode()).find("[data-role=page-footer] [data-type=payment-summary]").html(e.lastCalculationHTMLMarkup).each((function(){e.loader.getI18n().translateDOMNode(this)})),e.addNewLineIfNeeded(n.getRootNode(),i),e.detailedInvoiceDialog&&(e.detailedInvoiceDialog.body.innerHTML=e.lastCalculationHTMLMarkup,e.loader.getI18n().translateDOMNode(e.detailedInvoiceDialog.body)),mc.a.getInstance().setupI18n()}S.a.refreshFrameHeightOnWix()}))}(this,this.engine.getResourceManager(),this.engine.getDocument(),this.engine.getJQuery())}},{key:"startQuizTimerCountdownThread",value:function(){this.isQuizTimerCountdownPluginInstalled||null!==this.loader.getQuizTimer()&&(!function(e,t,n,i){var r=n.getLoaderDependency(O.M.INITIAL_QUIZ_TIMER);Object.defineProperty(e,"quizTimerCountdownValue",{get:function(){return r}});var a=window.setInterval((function(){if(null===r||r<0)window.clearInterval(a);else{var n,o,s,l,c,u,d=r;d-=3600*(n=Math.floor(d/3600)),s=d-=60*(o=Math.floor(d/60)),l=n<10?"0"+n:String(n),c=o<10?"0"+o:String(o),u=s<10?"0"+s:String(s),i(t.getRootNode()).find("div[data-role=page] > [data-role=page-header] > [data-role=quiz-timer] > div[data-role]").each((function(){switch(this.getAttribute("data-role")){case"hours":i(this).find(".value").text(l);break;case"minutes":i(this).find(".value").text(c);break;case"seconds":i(this).find(".value").text(u)}})),0===(r-=1)&&e.submit(O.F.SUBMIT_QUIZ)}}),1e3)}(this,this.engine.getDocument(),this.loader,this.engine.getJQuery()),this.isQuizTimerCountdownPluginInstalled=!0)}},{key:"setFormLanguage",value:function(e){!function(t,n,i,r,a){t.clear().get(i).then((function(){r(n.getRootNode()).find("[data-role=language-selector] select").each((function(){this.value=e})),r.get("/ajax_call.php",{theToken:a.getCSRFToken(),lang:t.getLanguageCode(),formId:n.getId(),module:"modules/Form/useLanguage.php",engine:"TranslationsV2"})}))}(this.loader.getI18n(),this.engine.getDocument(),this.loader.getApiRootAddress()+"/v2/language/"+e+"/"+this.loader.getFormId(),this.loader.getJQuery(),this.loader)}},{key:"focusOnFirstFormField",value:function(){var e=!1;this.engine.getJQuery()(this.engine.getDocument().getPageByIndex(0).getRootNode()).find("> [data-role=page-body]").find("input:not([type=hidden]), textarea, select, [tabindex]").each((function(){e||(this.focus(),document.activeElement===this&&(e=!0))}))}},{key:"showDetailedInvoiceDialog",value:function(){var e=this;null===this.detailedInvoiceDialog&&(this.detailedInvoiceDialog=this.loader.getUI().createDialog(this.loader.getI18n().translateText("textdef_114"),[],{onCloseButtonClick:function(){e.detailedInvoiceDialog=null},width:"644px"}),this.loader.getJQuery()(this.detailedInvoiceDialog.body).closest(".ui-dialog").attr("data-dialog-role","detailed-invoice-dialog")),this.detailedInvoiceDialog.body.innerHTML=this.lastCalculationHTMLMarkup||"",this.loader.getJQuery()(this.detailedInvoiceDialog.body).perfectScrollbar(),this.addNewLineIfNeeded(this.detailedInvoiceDialog.body,this.loader.getJQuery()),this.loader.getI18n().translateDOMNode(this.detailedInvoiceDialog.body),mc.a.getInstance().setupI18n()}},{key:"exploreJQLDatabase",value:function(){var e;(e=this).loader.getRules().exploreDatabase({getJQuery:function(){return e.loader.getJQuery()},getResourceManager:function(){return e.engine.getResourceManager()},createNotification:function(e,t,n,i){console.warn("NOTIFICATION: ",e)},alert:function(t,n,i){return e.loader.getUI().alert(t,n,i)},createDialog:function(t,n,i){return e.loader.getUI().createDialog(t,n,i)},getDatabase:function(){return Zc.a.getInstance().getDatabase()}})}},{key:"addNewLineIfNeeded",value:function(e,t){t(e).find("[data-role=detailed-invoice] [data-role=description]").each((function(){var e=this.textContent.split("\n");e[0];if(e.length>1){this.textContent=e[0];for(var t=1,n=e.length;t<n;t++)this.appendChild(document.createElement("br")),this.appendChild(document.createTextNode(e[t]))}}))}}]),e}(),wp=n(340);function kp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}function Mp(){var e=Qr()(["\n    font-size: 22px;\n    color: #FFF !important;\n    padding: 1px;\n    border-radius: 3px;\n    margin-left: 9px;\n\n    &:hover {\n        cursor: pointer;\n        background-color: rgba(255, 255, 255, 0.2);\n    }\n"]);return Mp=function(){return e},e}var xp,Up=ea.a.i(Mp()),Fp=function(e){u()(n,e);var t=kp(n);function n(e){var i;return o()(this,n),(i=t.call(this,e)).onClick=i.onClick.bind(A()(i)),i}return l()(n,[{key:"render",value:function(){return di()(Up,{onClick:this.onClick,className:"i123 i123-close icon"})}},{key:"onClick",value:function(){this.props.onClick&&this.props.onClick()}}]),n}(fi.Component),Bp=n(166),Yp=(n(569),di()(Fp,{})),Vp=Object(yi.connect)((function(e){return{toasters:e.alerts.toasters}}),(function(e){return{onToasterClose:function(t){e(Object(Bp.b)(t))}}}))((function(e){var t=Object(fi.useState)([]),n=Di()(t,2),i=n[0],r=n[1],a=e.toasters,o=e.position,s=void 0===o?"bottom-left":o;return Object(fi.useEffect)((function(){r(e.toasters);var t=!e.toasters||e.toasters.length<=0,n=i.length>e.toasters.length;t||n||a.forEach((function(t){Object(wp.toast)((function(){return di()("div",{},void 0,di()("span",{},void 0,t.message),t.action&&di()(Ha,{variant:Ar.TEXT,type:t.action.type,label:t.action.label,isInToaster:!0,onClick:t.action.onClick}))}),{type:t.type,toastId:t.id}),e.onToasterClose(t.id)}))}),[a]),di()(wp.ToastContainer,{position:s,closeButton:Yp,hideProgressBar:!0})})),Hp=n(36),Gp=n.n(Hp),Wp=n(124),jp=n.n(Wp),Kp=function(e){return{feature:e.activePaywall.feature,target:e.activePaywall.target,planPrices:e.activePaywall.planPrices,isLoading:e.activePaywall.isLoading}},zp=function(e){return{onPaywallClose:function(){e(Object(Dr.a)())}}},Xp=n(152),Zp=n(89);!function(e){e.PAYWALL_2022_OPEN="paywall_2022_open",e.PAYWALL_2022_UPGRADE="paywall_2022_upgrade",e.PAYWALL_2022_CLOSE="paywall_2022_close",e.USER_UPGRADE_BTN_CLICK="user_upgrade_btn_click",e.HOTSPOT_SHOWN="hotspot_shown",e.HOTSPOT_DISMISSED="hotspot_dismissed",e.VISIT_RULES_FROM_TY_PAGE="visit_rules_from_thankyou_page"}(xp||(xp={}));var qp,Jp,Qp=n(115);!function(e){e.TOP_LEFT="top_left",e.TOP_RIGHT="top_right",e.TOP_FIXED="top_fixed",e.CENTER_LEFT="center_left",e.CENTER_RIGHT="center_right",e.BOTTOM_LEFT="bottom_left",e.BOTTOM_RIGHT="bottom_right",e.LEFT="left",e.RIGHT="right"}(qp||(qp={})),function(e){e.ENABLED="Enabled",e.DISABLED="Disabled"}(Jp||(Jp={}));n(572);var $p=di()("span",{className:"switch__toggle"}),eh=function(e){var t=Object(fi.useState)(e.label),n=Di()(t,2),i=n[0],r=n[1];Object(fi.useEffect)((function(){e.hasStateLabel&&r(a(e.isChecked))}),[e.isChecked]);var a=function(e){return e?Jp.ENABLED:Jp.DISABLED},o=function(e){return vi()("switch__label",{"switch__label--position--left":e.labelPosition===qp.LEFT,"switch__state-label":e.hasStateLabel})}(e),s=vi()("switch__label__text","text-base",{"switch__label__text--sr-only":e.hideLabelText});return di()("div",{className:"switch",title:e.tooltip,style:e.style},void 0,di()("label",{className:o},void 0,di()("input",{id:e.id,type:"checkbox",className:"switch__input",checked:e.isChecked,disabled:e.isDisabled,onChange:function(t){e.hasStateLabel&&r(a(t.target.checked)),e.onChange&&e.onChange(e.id,t.target.checked)},role:"checkbox","aria-checked":e.isChecked,"aria-labelledby":i,"data-testid":e.testid}),$p,di()("span",{className:s},void 0,i)))};eh.defaultProps={isChecked:!1,isDisabled:!1,hideLabelText:!1,hasStateLabel:!1};var th=eh;n(574);function nh(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}function ih(){var e=Qr()(["\n    display: inline-block;\n    padding: ",";\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    font-family: ",";\n    font-size: ",";\n    font-weight: ",";\n    text-transform: uppercase;\n    text-align: center;\n    color: ",";\n    background-color: ",";\n"]);return ih=function(){return e},e}var rh='"Open Sans", Helvetica, Arial, sans-serif',ah="12px",oh=600,sh="4px 8px",lh=ea.a.span(ih(),sh,rh,ah,oh,(function(e){return e.theme.color}),(function(e){return e.theme.backgroundColor})),ch=function(e){u()(n,e);var t=nh(n);function n(e){var i;o()(this,n),i=t.call(this,e),v()(A()(i),"props",void 0),v()(A()(i),"theme",{color:"",backgroundColor:""}),v()(A()(i),"style",void 0);switch(e.type){case Nr.PRIMARY:i.theme.color=na,i.theme.backgroundColor=ia;break;case Nr.POSITIVE:i.theme.color=oa,i.theme.backgroundColor=sa;break;case Nr.NEGATIVE:i.theme.color=la,i.theme.backgroundColor=ca;break;case Nr.PENDING:i.theme.color=da,i.theme.backgroundColor=pa;break;default:i.theme.color=ma,i.theme.backgroundColor=fa}switch(e.position){case qp.TOP_LEFT:i.style={position:"absolute",top:"0",left:"0",padding:"4px 8px 4px 20px",borderBottomRightRadius:"3px",borderTopRightRadius:"3px"};break;case qp.CENTER_LEFT:i.style={position:"absolute",top:"50%",left:"0",transform:"translate3d(0, -50%, 0)",padding:"4px 8px 4px 20px",borderBottomRightRadius:"3px",borderTopRightRadius:"3px"};break;case qp.BOTTOM_LEFT:i.style={position:"absolute",bottom:"0",left:"0",padding:"4px 8px 4px 20px",borderBottomRightRadius:"3px",borderTopRightRadius:"3px"};break;case qp.TOP_RIGHT:i.style={position:"absolute",top:"0",right:"0",padding:"4px 20px 4px 8px",borderBottomLeftRadius:"3px",borderTopLeftRadius:"3px"};break;case qp.CENTER_RIGHT:i.style={position:"absolute",top:"50%",right:"0",transform:"translate3d(0, -50%, 0)",padding:"4px 20px 4px 8px",borderBottomLeftRadius:"3px",borderTopLeftRadius:"3px"};break;case qp.BOTTOM_RIGHT:i.style={position:"absolute",bottom:"0",right:"0",padding:"4px 20px 4px 8px",borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px"};break;default:i.style={borderRadius:"3px"}}return i}return l()(n,[{key:"shouldComponentUpdate",value:function(e){return!Object(Zr.a)(e,this.props)}},{key:"render",value:function(){var e=n.computeBadgeClasses(this.props);return di()($r.ThemeProvider,{theme:this.theme},void 0,di()(lh,{className:e,title:this.props.text,style:this.style},void 0,this.props.text,this.props.children))}}],[{key:"computeBadgeClasses",value:function(e){return vi()("badge","badge--".concat(e.type),v()({},"".concat(e.className),!!e.className))}}]),n}(fi.Component);v()(ch,"defaultProps",{type:Nr.PRIMARY});var uh,dh=n(95),ph=n(245),hh=n(19),_h=function(e){var t=e.text,n=Object(fi.useRef)(null),i=(new DOMParser).parseFromString(t,"text/html");return Object(fi.useEffect)((function(){if(0!==i.body.getElementsByTagName("parsererror").length)throw new Error("Error parsing translation");return n.current.innerHTML=i.body.innerHTML,function(){n.current.innerHTML=""}}),[t]),Ei.a.createElement("div",{ref:n})},gh=di()("i",{className:"i123-save2"}),mh=di()("i",{className:"i123-check"}),fh=di()("i",{className:"i123-check"}),Eh=di()("i",{className:"i123-check"}),yh=di()("i",{className:"i123-check"}),Th=di()("i",{className:"i123-check"}),vh=di()("i",{className:"i123-check"}),Oh=di()("i",{className:"i123-check"}),bh=di()("i",{className:"i123-check"}),Ch=di()("i",{className:"i123-check"}),Ih=di()("i",{className:"i123-money-back"}),Rh=function(e){var t=e.billingCycle,n=Object(fi.useContext)(C_),i=n.getPlanPrice,r=n.userPlan,a=n.trackUpgradeEvent,o=new F.a,s=r.toLowerCase()===Xp.a.FREE;return di()("div",{className:"tab-panel tab-panel_gold","data-testid":"paywallGoldTabPanel"},void 0,di()("h2",{className:"tab-panel__plan-name","data-testid":"paywallGoldPlanName"},void 0,o.translateTextDefault("paywall_2022_gold_tab_panel_plan_name","Gold")),di()("h3",{},void 0,o.translateTextDefault("paywall_2022_gold_tab_panel_plan_description","For individuals who need ongoing data collection.")),di()("div",{className:"price__container d-flex"},void 0,di()("p",{className:"price__value","data-testid":"paywallGoldPrice"},void 0,"$".concat(i(hh.a.GOLD,t))),di()("p",{className:"price__per-month"},void 0,"".concat(o.translateTextDefault("paywall_2022_tab_panel_per_month","per month")," /\n            ").concat(t===Zp.a.YEARLY?o.translateTextDefault("paywall_2022_tab_panel_billed_yearly","billed yearly"):o.translateTextDefault("paywall_2022_tab_panel_billed_monthly","billed monthly")))),t===Zp.a.YEARLY&&di()(ch,{className:"badge__price-save","data-testid":"paywallGoldSaveBadge"},void 0,gh,di()("p",{className:"m-0"},void 0,o.translateTextDefault("paywall_2022_tab_panel_gold_save_badge","save $60"))),di()("p",{className:"features-available"},void 0,o.translateTextDefault("paywall_2022_tab_panel_features_available","FEATURES AVAILABLE")),di()("div",{className:"features__container"},void 0,di()("div",{className:"features__column"},void 0,di()("div",{"data-testid":"paywallGoldPremiumFieldsFeature"},void 0,mh,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_premium_fields_feature","Premium fields")})),di()("div",{"data-testid":"paywallGold1UsersFeature"},void 0,fh,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_1_users_feature","1+ users")}),di()("i",{className:"i-md i123-info2",title:o.translateTextDefault("paywall_2022_tab_panel_1_users_feature_tooltip","Buy bundles up to 10 users")})),di()("div",{"data-testid":"paywallGold20FormsFeature"},void 0,Eh,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_20_forms_feature","20 forms")})),di()("div",{"data-testid":"paywallGold5000SubmissionsFeature"},void 0,yh,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_5000_submissions_feature","5,000 submissions")}),di()("i",{className:"i-md i123-info2",title:o.translateTextDefault("paywall_2022_tab_panel_submissions_feature_tooltip","US/EU server")})),di()("div",{"data-testid":"paywallGoldConnectTo1000AppsFeature"},void 0,Th,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_connect_to_1000_apps_feature","Connect to 1000 apps")}),di()("i",{className:"i-md i123-info2",title:o.translateTextDefault("paywall_2022_tab_panel_connect_to_1000_apps_feature_tooltip","Wix, Dropbox, Google Sheets, Mailchimp, Zendesk, HubSpot, Zapier and more")})),di()("div",{"data-testid":"paywallGoldConditionalLogicFeature"},void 0,vh,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_conditional_logic_feature","Conditional logic for your forms")})),di()("div",{"data-testid":"paywallGoldCustomEmailNotificationFeature"},void 0,Oh,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_custom_email_notification_feature","Custom e-mail notification")})),di()("div",{"data-testid":"paywallGold500MBStorageFeature"},void 0,bh,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_500mb_storage_feature","500 MB storage")}))),di()("div",{className:"features__column"},void 0,di()("div",{"data-testid":"paywallGoldFileUploadsFeature"},void 0,Ch,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_file_uploads_feature","Collect file uploads with your forms")})))),s?Ei.a.createElement(Ei.a.Fragment,null,di()(Ha,{label:o.translateTextDefault("paywall_2022_upgrade","Upgrade"),className:"upgrade-button",testid:"paywallGoldUpgradeButton",onClick:function(){a(hh.a.GOLD),Object(ft.r)(Object(ft.d)(it.l.GOLD,t))}}),di()("div",{className:"money-back-guarantee"},void 0,Ih,di()("p",{},void 0,o.translateTextDefault("paywall_2022_money_back_guarantee","30 days money-back guarantee")))):null)},Ph=di()("i",{className:"i123-save2"}),Nh=di()("i",{className:"i123-check"}),Ah=di()("i",{className:"i123-check"}),Sh=di()("i",{className:"i123-check"}),Lh=di()("i",{className:"i123-check"}),Dh=di()("i",{className:"i123-check"}),wh=di()("i",{className:"i123-check"}),kh=di()("i",{className:"i123-check"}),Mh=di()("i",{className:"i123-check"}),xh=di()("i",{className:"i123-check"}),Uh=di()("i",{className:"i123-check"}),Fh=di()("i",{className:"i123-check"}),Bh=di()("i",{className:"i123-money-back"}),Yh=function(e){var t=e.billingCycle,n=Object(fi.useContext)(C_),i=n.getPlanPrice,r=n.userPlan,a=n.trackUpgradeEvent,o=new F.a,s=r.toLowerCase()===Xp.a.FREE||r.toLowerCase()===hh.a.GOLD;return di()("div",{className:"tab-panel tab-panel_platinum","data-testid":"paywallPlatinumTabPanel"},void 0,di()("h2",{className:"tab-panel__plan-name","data-testid":"paywallPlatinumPlanName"},void 0,o.translateTextDefault("paywall_2022_platinum_tab_panel_plan_name","Platinum")),di()("h3",{},void 0,o.translateTextDefault("paywall_2022_platinum_tab_panel_plan_description","For individuals and growing teams who need advanced features.")),di()("div",{className:"price__container d-flex"},void 0,di()("p",{className:"price__value","data-testid":"paywallPlatinumPrice"},void 0,"$".concat(i(hh.a.PLATINUM,t))),di()("p",{className:"price__per-month"},void 0,"".concat(o.translateTextDefault("paywall_2022_tab_panel_per_month","per month")," /\n            ").concat(t===Zp.a.YEARLY?o.translateTextDefault("paywall_2022_tab_panel_billed_yearly","billed yearly"):o.translateTextDefault("paywall_2022_tab_panel_billed_monthly","billed monthly")))),t===Zp.a.YEARLY&&di()(ch,{className:"badge__price-save","data-testid":"paywallPlatinumSaveBadge"},void 0,Ph,di()("p",{className:"m-0"},void 0,o.translateTextDefault("paywall_2022_tab_panel_platinum_save_badge","save $84"))),di()("p",{className:"features-available"},void 0,o.translateTextDefault("paywall_2022_tab_panel_features_available","FEATURES AVAILABLE")),di()("div",{className:"features__container"},void 0,di()("div",{className:"features__column"},void 0,di()("div",{"data-testid":"paywallGoldPremiumFieldsFeature"},void 0,Nh,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_premium_fields_feature","Premium fields")})),di()("div",{"data-testid":"paywallGold1UsersFeature"},void 0,Ah,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_1_users_feature","1+ users")}),di()("i",{className:"i-md i123-info2",title:o.translateTextDefault("paywall_2022_tab_panel_1_users_feature_tooltip","Buy bundles up to 10 users")})),di()("div",{"data-testid":"paywallGoldUnlimitedFormsFeature"},void 0,Sh,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_unlimited_forms_feature","Unlimited forms")})),di()("div",{"data-testid":"paywallGold20000SubmissionsFeature"},void 0,Lh,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_20000_submissions_feature","20,000 submissions")}),di()("i",{className:"i-md i123-info2",title:o.translateTextDefault("paywall_2022_tab_panel_submissions_feature_tooltip","US/EU server")})),di()("div",{"data-testid":"paywallGoldConnectTo1000AppsFeature"},void 0,Dh,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_connect_to_1000_apps_feature","Connect to 1000 apps")}),di()("i",{className:"i-md i123-info2",title:o.translateTextDefault("paywall_2022_tab_panel_connect_to_1000_apps_feature_tooltip","Wix, Dropbox, Google Sheets, Mailchimp, Zendesk, HubSpot, Zapier and more")})),di()("div",{"data-testid":"paywallGoldConditionalLogicFeature"},void 0,wh,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_conditional_logic_feature","Conditional logic for your forms")})),di()("div",{"data-testid":"paywallGoldCustomEmailNotificationFeature"},void 0,kh,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_custom_email_notification_feature","Custom e-mail notification")})),di()("div",{"data-testid":"paywallGold2GBStorageFeature"},void 0,Mh,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_2gb_storage_feature","2 GB storage")}))),di()("div",{className:"features__column"},void 0,di()("div",{"data-testid":"paywallGoldFileUploadsFeature"},void 0,xh,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_file_uploads_feature","Collect file uploads with your forms")})),di()("div",{"data-testid":"paywallGoldCustomFormBrandingFeature"},void 0,Uh,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_custom_form_branding_feature","Custom form branding")})),di()("div",{"data-testid":"paywallGoldPaymentsFeature"},void 0,Fh,di()(_h,{text:o.translateTextDefault("paywall_2022_tab_panel_payments_feature","Take payments with your forms")})))),s?Ei.a.createElement(Ei.a.Fragment,null,di()(Ha,{label:o.translateTextDefault("paywall_2022_upgrade","Upgrade"),className:"upgrade-button",testid:"paywallPlatinumUpgradeButton",onClick:function(){a(hh.a.PLATINUM),Object(ft.r)(Object(ft.d)(it.l.PLATINUM,t))}}),di()("div",{className:"money-back-guarantee"},void 0,Bh,di()("p",{},void 0,o.translateTextDefault("paywall_2022_money_back_guarantee","30 days money-back guarantee")))):null)},Vh=n(224),Hh=di()("p",{className:"price__value","data-testid":"paywallEnterprisePrice"},void 0,"$199.99"),Gh=di()("i",{className:"i123-check"}),Wh=di()("i",{className:"i123-check"}),jh=di()("i",{className:"i123-check"}),Kh=di()("i",{className:"i123-check"}),zh=di()("i",{className:"i123-check"}),Xh=di()("i",{className:"i123-check"}),Zh=di()("i",{className:"i123-check"}),qh=di()("i",{className:"i123-check"}),Jh=di()("i",{className:"i123-check"}),Qh=di()("i",{className:"i123-check"}),$h=di()("i",{className:"i123-check"}),e_=di()("i",{className:"i123-check"}),t_=di()("i",{className:"i123-check"}),n_=di()("i",{className:"i123-check"}),i_=di()("i",{className:"i123-check"}),r_=function(){var e=Object(fi.useContext)(C_),t=e.closePaywall,n=e.trackUpgradeEvent,i=new F.a;return di()("div",{className:"tab-panel tab-panel_enterprise","data-testid":"paywallEnterpriseTabPanel"},void 0,di()("h2",{className:"tab-panel__plan-name","data-testid":"paywallEnterprisePlanName"},void 0,i.translateTextDefault("paywall_2022_enterprise_tab_panel_plan_name","Enterprise")),di()("h3",{},void 0,i.translateTextDefault("paywall_2022_enterprise_tab_panel_plan_description","For companies who need enhanced security and advanced compliance.")),di()("div",{className:"price__container d-flex"},void 0,di()("p",{className:"price__starting-from"},void 0,i.translateTextDefault("paywall_2022_tab_panel_starting_from","Starting from")),di()("div",{className:"d-flex"},void 0,Hh,di()("p",{className:"price__per-month"},void 0,"".concat(i.translateTextDefault("paywall_2022_tab_panel_per_month","per month"),"\n              /\n              ").concat(i.translateTextDefault("paywall_2022_tab_panel_billed_yearly","billed yearly"))))),di()("p",{className:"features-available"},void 0,i.translateTextDefault("paywall_2022_tab_panel_features_available","FEATURES AVAILABLE")),di()("div",{className:"features__container"},void 0,di()("div",{className:"features__column"},void 0,di()("div",{"data-testid":"paywallEnterprisePremiumFieldsFeature"},void 0,Gh,di()(_h,{text:i.translateTextDefault("paywall_2022_tab_panel_premium_fields_feature","Premium fields")})),di()("div",{"data-testid":"paywallEnterpriseCustomUsersFeature"},void 0,Wh,di()(_h,{text:i.translateTextDefault("paywall_2022_tab_panel_custom_users_feature","Custom users")})),di()("div",{"data-testid":"paywallEnterpriseUnlimitedFormsFeature"},void 0,jh,di()(_h,{text:i.translateTextDefault("paywall_2022_tab_panel_unlimited_forms_feature","Unlimited forms")})),di()("div",{"data-testid":"paywallEnterpriseUnlimitedSubmissionsFeature"},void 0,Kh,di()(_h,{text:i.translateTextDefault("paywall_2022_tab_panel_unlimited_submissions_feature","Unlimited submissions")}),di()("i",{className:"i-md i123-info2",title:i.translateTextDefault("paywall_2022_tab_panel_submissions_feature_tooltip","US/EU server")})),di()("div",{"data-testid":"paywallEnterpriseConnectTo1000AppsFeature"},void 0,zh,di()(_h,{text:i.translateTextDefault("paywall_2022_tab_panel_connect_to_1000_apps_feature","Connect to 1000 apps")}),di()("i",{className:"i-md i123-info2",title:i.translateTextDefault("paywall_2022_tab_panel_connect_to_1000_apps_feature_tooltip","Wix, Dropbox, Google Sheets, Mailchimp, Zendesk, HubSpot, Zapier and more")})),di()("div",{"data-testid":"paywallEnterpriseConditionalLogicFeature"},void 0,Xh,di()(_h,{text:i.translateTextDefault("paywall_2022_tab_panel_conditional_logic_feature","Conditional logic for your forms")})),di()("div",{"data-testid":"paywallEnterpriseCustomEmailNotificationFeature"},void 0,Zh,di()(_h,{text:i.translateTextDefault("paywall_2022_tab_panel_custom_email_notification_feature","Custom e-mail notification")})),di()("div",{"data-testid":"paywallEnterprise10GBStorageFeature"},void 0,qh,di()(_h,{text:i.translateTextDefault("paywall_2022_tab_panel_10gb_storage_feature","10GB+ storage")}))),di()("div",{className:"features__column"},void 0,di()("div",{"data-testid":"paywallEnterpriseFileUploadsFeature"},void 0,Jh,di()(_h,{text:i.translateTextDefault("paywall_2022_tab_panel_file_uploads_feature","Collect file uploads with your forms")})),di()("div",{"data-testid":"paywallEnterpriseCustomFormBrandingFeature"},void 0,Qh,di()(_h,{text:i.translateTextDefault("paywall_2022_tab_panel_custom_form_branding_feature","Custom form  branding")})),di()("div",{"data-testid":"paywallEnterprisePaymentsFeature"},void 0,$h,di()(_h,{text:i.translateTextDefault("paywall_2022_tab_panel_payments_feature","Take payments with your forms")})),di()("div",{"data-testid":"paywallEnterpriseHippaComplianceFeature"},void 0,e_,di()(_h,{text:i.translateTextDefault("paywall_2022_tab_panel_hippa_compliance_feature","HIPAA compliance")})),di()("div",{"data-testid":"paywallEnterpriseSalesforceIntegrationsFeature"},void 0,t_,di()(_h,{text:i.translateTextDefault("paywall_2022_tab_panel_salesforce_integrations_feature","Salesforce integrations")}),di()("i",{className:"i-md i123-info2",title:i.translateTextDefault("paywall_2022_tab_panel_salesforce_integrations_feature_tooltip","Push or pull data to unlimited objects, URL prefill, real-time prefill and more")})),di()("div",{"data-testid":"paywallEnterpriseSecurityProtocolsFeature"},void 0,n_,di()(_h,{text:i.translateTextDefault("paywall_2022_tab_panel_enterprise_security_protocols_feature","Enterprise-grade security protocols")})),di()("div",{"data-testid":"paywallEnterpriseDedicatedAccountManagerFeature"},void 0,i_,di()(_h,{text:i.translateTextDefault("paywall_2022_tab_panel_dedicated_account_manager_feature","Dedicated account manager")})))),di()(Ha,{label:i.translateTextDefault("paywall_2022_contact_sales","Contact sales"),className:"contact-sales-button",testid:"paywallEnterpriseContactSalesButton",onClick:function(){t(),Object(Vh.a)(),n(hh.a.CORPORATE)}}))};n(576);function a_(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}function o_(){var e=Qr()(["\n    width: 16px;\n    height: 16px;\n    background: ",";\n    border: 2px solid ",";\n    border-radius: 2px;\n    box-sizing: border-box;\n    transition: all 150ms;\n\n    ",":hover + & {\n        border: 2px solid ",";\n    }\n"]);return o_=function(){return e},e}function s_(){var e=Qr()(["\n    border: 0;\n    clip: rect(0 0 0 0);\n    clip-path: inset(50%);\n    height: 1px;\n    margin: -1px;\n    overflow: hidden;\n    padding: 0;\n    position: absolute;\n    white-space: nowrap;\n    width: 1px;\n"]);return s_=function(){return e},e}function l_(){var e=Qr()(["\n    fill: none;\n    stroke: white;\n    stroke-width: 3px;\n"]);return l_=function(){return e},e}function c_(){var e=Qr()(["\n    display: inline-block;\n    vertical-align: middle;\n"]);return c_=function(){return e},e}function u_(){var e=Qr()([""]);return u_=function(){return e},e}!function(e){e.WHITE="white"}(uh||(uh={}));var d_=ea.a.label.attrs((function(e){return{style:{opacity:e.disabled?.5:1,cursor:e.disabled?"not-allowed":"pointer",display:"flex",alignItems:"center"}}}))(u_()),p_=ea.a.div(c_()),h_=ea.a.svg.attrs((function(e){return{style:{visibility:e.checked?"visible":"hidden"}}}))(l_()),__=ea.a.input.attrs({type:"checkbox"})(s_()),g_=ea.a.div(o_(),(function(e){return e.checked?"#068ff6":"transparent"}),(function(e){return e.checked?"#068ff6":"#808080"}),__,(function(e){return e.disabled?e.checked?"#068ff6":"#808080":e.checked?"#068ff6":"#4c4c4c"})),m_=di()("polyline",{points:"20 6 9 17 4 12"}),f_=function(e){u()(n,e);var t=a_(n);function n(){var e;o()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),v()(A()(e),"props",void 0),v()(A()(e),"onChange",(function(t){e.props.onChange&&e.props.onChange(e.props.id,t.target.checked)})),e}return l()(n,[{key:"shouldComponentUpdate",value:function(e){return!Object(Zr.a)(Object(qr.a)(e,["onChange"]),Object(qr.a)(this.props,["onChange"]))}},{key:"render",value:function(){var e=n.computeClasses(this.props);return di()("div",{className:e,style:this.props.style,title:this.props.tooltip},void 0,di()(d_,{disabled:this.props.isDisabled,style:{width:"max-content"}},void 0,di()(p_,{className:"input__checkbox_box"},void 0,di()(__,{id:this.props.id,checked:this.props.isChecked,disabled:this.props.isDisabled,onChange:this.onChange}),di()(g_,{checked:this.props.isChecked,disabled:this.props.isDisabled,className:"input__checkbox__icon-container"},void 0,di()(h_,{viewBox:"0 0 24 28",checked:this.props.isChecked},void 0,m_))),this.props.label&&di()("span",{className:"input__checkbox__label"},void 0,this.props.label)))}}],[{key:"computeClasses",value:function(e){return vi()("input__checkbox",v()({"input__checkbox--positive":e.type===Nr.POSITIVE,"input__checkbox--light-label":!!e.hasLightLabel,"input__checkbox--bold-label":!!e.hasBoldLabel,"input__checkbox--unchecked-variant-white":e.uncheckedVariant===uh.WHITE},"".concat(e.className),!!e.className))}}]),n}(fi.Component);v()(f_,"defaultProps",{isChecked:!1,isDisabled:!1});var E_;n(578);!function(e){e.CONNECT_1000_APPS="connect_1000_apps",e.HIPPA_COMPLIANCE="hippa_compliance",e.SECURITY_PROTOCOLS="security_protocols",e.DEDICATED_ACCOUNT_MANAGER="dedicated_account_manager"}(E_||(E_={}));var y_,T_,v_=function(e){var t,n=e.checkedNumber,i=void 0===n?T_.GOLD:n,r=e.updatePaywallState,a=Object(fi.useContext)(C_).target,o=new F.a,s=(t={},v()(t,Zt.a.FILE_UPLOAD_CONTROL,o.translateTextDefault("paywall_2022_sidepanel_file_uploads_feature","Collect file uploads with your forms")),v()(t,E_.CONNECT_1000_APPS,o.translateTextDefault("paywall_2022_sidepanel_1000_apps_feature","Connect to 1000 apps")),v()(t,Zt.a.CREATE_FORM_RULE,o.translateTextDefault("paywall_2022_sidepanel_conditional_logic_feature","Conditional logic for forms")),v()(t,Zt.a.ADD_CUSTOM_EMAIL_IN_NOTIFICATONS,o.translateTextDefault("paywall_2022_sidepanel_email_notifications_feature","Custom e-mail notifications")),v()(t,Zt.a.ENABLE_FORM_DOMAIN_ALIASING,o.translateTextDefault("paywall_2022_sidepanel_custom_branding_feature","Custom branding")),v()(t,Zt.a.ENABLE_FORM_PAYMENTS,o.translateTextDefault("paywall_2022_sidepanel_payment_feature","Payment")),v()(t,Zt.a.MAXIMUM_FORM_COUNT,o.translateTextDefault("paywall_2022_sidepanel_unlimited_forms_feature","Unlimited forms")),v()(t,Zt.a.CREATE_FORM_FIELD,o.translateTextDefault("paywall_2022_sidepanel_unlimited_fields_feature","Unlimited fields")),v()(t,Zt.a.MAXIMUM_MONTHLY_SUBMISSION_COUNT,o.translateTextDefault("paywall_2022_sidepanel_unlimited_submissions_feature","Unlimited submissions")),v()(t,E_.HIPPA_COMPLIANCE,o.translateTextDefault("paywall_2022_sidepanel_hippa_compliance_feature","HIPPA compliance")),v()(t,Zt.a.SALESFORCE_APP,o.translateTextDefault("paywall_2022_sidepanel_salesforce_integration_feature","Salesforce integration")),v()(t,E_.SECURITY_PROTOCOLS,o.translateTextDefault("paywall_2022_sidepanel_security_protocols_feature","Enterprise-grade security protocols")),v()(t,E_.DEDICATED_ACCOUNT_MANAGER,o.translateTextDefault("paywall_2022_sidepanel_account_manager_feature","Dedicated account manager")),t),l=[Zt.a.FILE_UPLOAD_CONTROL,E_.CONNECT_1000_APPS,Zt.a.CREATE_FORM_RULE,Zt.a.ADD_CUSTOM_EMAIL_IN_NOTIFICATONS,Zt.a.ENABLE_FORM_DOMAIN_ALIASING,Zt.a.ENABLE_FORM_PAYMENTS,Zt.a.MAXIMUM_FORM_COUNT,Zt.a.CREATE_FORM_FIELD,Zt.a.MAXIMUM_MONTHLY_SUBMISSION_COUNT,E_.HIPPA_COMPLIANCE,Zt.a.SALESFORCE_APP,E_.SECURITY_PROTOCOLS,E_.DEDICATED_ACCOUNT_MANAGER],c=new Array(l.length).fill(!0,0,i).fill(!1,i);return Object(fi.useEffect)((function(){var e=a.name===hh.a.PROFESSIONAL||a.name===hh.a.CORPORATE?hh.a.ENTERPRISE:a.name;e=e.toUpperCase(),r([T_[e],y_[e]])}),[]),di()("div",{className:"paywall-inner__sidepanel-checkboxes","data-testid":"paywallSidepanelCheckboxes"},void 0,l.map((function(e,t){return di()(f_,{id:"PaywallInnerCheckbox-".concat(t),label:s[e],tooltip:s[e],isChecked:c[t],onChange:function(){return function(e){var t,n=!c[e],i=function(e,t,n){return e>=t&&e<=n},a=T_.GOLD,o=T_.PLATINUM,s=T_.ENTERPRISE,l=y_.GOLD,u=y_.PLATINUM,d=y_.ENTERPRISE,p=hi()(c);p[e]=e<a||n,i(e,0,a-1)&&(!1===n?p.fill(n,a,p.length):p.fill(n,0,a)),i(e,a,o-1)&&(!1===n?p.fill(n,a,p.length):p.fill(n,0,o)),i(e,o,s-1)&&(!1===n?p.fill(n,o,p.length):p.fill(n,a,p.length));var h=p.filter((function(e){return!0===e})).length;i(h,0,a)&&(t=l),i(h,a+1,o)&&(t=u),i(h,o+1,s)&&(t=d),r([h,t])}(t)},type:Nr.POSITIVE,hasLightLabel:!0,hasBoldLabel:!0,uncheckedVariant:uh.WHITE,"data-testid":"paywallSidepanelCheckbox-".concat(t)},t)})))};n(580);!function(e){e[e.GOLD=0]="GOLD",e[e.PLATINUM=1]="PLATINUM",e[e.ENTERPRISE=2]="ENTERPRISE"}(y_||(y_={})),function(e){e[e.GOLD=4]="GOLD",e[e.PLATINUM=8]="PLATINUM",e[e.ENTERPRISE=13]="ENTERPRISE"}(T_||(T_={}));var O_=di()(dh.c,{},void 0,di()(r_,{})),b_=function(e){var t,n,i,r=new F.a,a=Ei.a.useState,o=Ei.a.useCallback,s=T_.GOLD,l=T_.PLATINUM,c=T_.ENTERPRISE,u=y_.GOLD,d=y_.PLATINUM,p=y_.ENTERPRISE,h=a([s,u]),_=Di()(h,2),g=_[0],m=_[1],f=Di()(g,2),E=f[0],y=f[1],T=(t={},v()(t,u,o((function(){m([s,u])}),[])),v()(t,d,o((function(){m([l,d])}),[])),v()(t,p,o((function(){m([c,p])}),[])),t),O=a(Zp.a.YEARLY),b=Di()(O,2),C=b[0],I=b[1],R=a(!0),P=Di()(R,2),N=P[0],A=P[1];return di()("div",{className:"paywalls-app-2022-inner"},void 0,di()("aside",{className:"paywall-inner__sidepanel","data-testid":"paywallSidepanel"},void 0,di()("header",{},void 0,di()("h2",{"data-testid":"paywallSidepanelTitle"},void 0,r.translateTextDefault("paywall_2022_sidepanel_title","How would you like Premium to help?")),di()("p",{"data-testid":"paywallSidepanelSubtitle"},void 0,r.translateTextDefault("paywall_2022_sidepanel_subtitle","We'll recommend the right plan for you."))),di()(v_,{checkedNumber:E,updatePaywallState:m})),di()("div",{className:"paywall-inner__content-container","data-testid":"paywallInnerContentContainer"},void 0,di()("div",{className:"paywall-inner__content-header"},void 0,di()(Ha,{id:"modal__close-icon",className:"modal__close-icon",icon:"i123-close",label:"",isIconOnly:!0,iconType:Sr.LIGHT,onClick:null===(n=e.paywallModal)||void 0===n||null===(i=n.current)||void 0===i?void 0:i.handleCloseModal,testid:"paywallCloseButton"}),di()("h1",{className:"paywall-inner__content-title","data-testid":"paywallContentTitle"},void 0,r.translateTextDefault("paywall_2022_content_title","Suggested pricing plan")),di()("div",{className:"toggle-billing-cycle__container"},void 0,di()("p",{},void 0,r.translateTextDefault("paywall_2022_toggle_billing_cycle_monthly","MONTHLY")),di()(th,{id:"toggle-billing-cycle",hideLabelText:!0,isChecked:N,onChange:function(e,t){A(t),I(t?Zp.a.YEARLY:Zp.a.MONTHLY)},testid:"paywallToggleBillingCycle"}),di()("p",{},void 0,r.translateTextDefault("paywall_2022_toggle_billing_cycle_yearly","YEARLY")))),di()("div",{className:"paywall-inner__content","data-testid":"paywallInnerContent"},void 0,di()(dh.e,{size:ph.a.FULL_SIZE,activeTabIndexOverride:y},void 0,di()(dh.b,{},void 0,di()(dh.a,{onClick:T[u],testid:"paywallGoldTab"},void 0,r.translateTextDefault("paywall_2022_tab_gold","Gold")),di()(dh.a,{onClick:T[d],testid:"paywallPlatinumTab"},void 0,di()(ch,{type:Nr.SECONDARY,text:r.translateTextDefault("paywall_2022_best_value_badge","Best value"),"data-testid":"paywallBestValueBadge",className:"tab__badge_best-value"}),di()("p",{},void 0,r.translateTextDefault("paywall_2022_tab_platinum","Platinum"))),di()(dh.a,{onClick:T[p],testid:"paywallEnterpriseTab"},void 0,r.translateTextDefault("paywall_2022_tab_enterprise","Enterprise"))),di()(dh.d,{},void 0,di()(dh.c,{},void 0,di()(Rh,{billingCycle:C})),di()(dh.c,{},void 0,di()(Yh,{billingCycle:C})),O_)))))},C_=Object(fi.createContext)(void 0),I_=Object(yi.connect)(Kp,zp)((function(e){var t=Object(yi.useDispatch)(),n=Ei.a.createRef(),i=Ei.a.useState(Xp.a.FREE),r=Di()(i,2),a=r[0],o=r[1],s=e.feature,l=e.target,c=!(!s||!l),u=function(){(0,e.onPaywallClose)(),t(Object(Qp.c)(xp.PAYWALL_2022_CLOSE,!0)),t(Object(Qp.b)(ks.b.CLOSE_PAYWALL,{paywallFeature:s}))};Object(fi.useCallback)(jp()(Gp.a.mark((function e(){var t,n;return Gp.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Xt.a.getInstance(),e.next=3,t.getCurrentIdentity();case 3:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.userDetails);case 5:case"end":return e.stop()}}),e)}))),[])().then((function(e){var t=e.planName;o(t)})),Object(fi.useEffect)((function(){t(Object(Dr.c)())}),[]),Object(fi.useEffect)((function(){if(s&&l&&a){var e={feature:s,targetName:l.name,targetType:l.type,userPlan:a};t(Object(Qp.c)(xp.PAYWALL_2022_OPEN,!0,e)),t(Object(Qp.d)(s)),t(Object(Qp.b)(ks.b.HIT_PAYWALL,{paywallFeature:s}))}}),[s,l,a]);return di()("div",{"data-testid":"paywallsApp2022"},void 0,di()(C_.Provider,{value:{closePaywall:u,target:l,getPlanPrice:function(t,n){var i=e.planPrices.find((function(e){return(null===e||void 0===e?void 0:e.name.toLowerCase())===t.toLowerCase()}));if(n===Zp.a.MONTHLY)return null===i||void 0===i?void 0:i.monthly_price;try{return(null===i||void 0===i?void 0:i.yearly_price)/12}catch(r){console.error("Yearly price of ".concat(t," is invalid"))}},userPlan:a,trackUpgradeEvent:function(e){if(s){var n={feature:s,selectedPlan:e};t(Object(Qp.c)(xp.PAYWALL_2022_UPGRADE,!0,n)),t(Object(Qp.c)(xp.USER_UPGRADE_BTN_CLICK))}}}},void 0,Ei.a.createElement(Wa,{className:"paywalls-app-2022-modal",ref:n,isOpen:c,hasCloseIcon:!0,appElement:document.getElementById("paywalls-app-container"),shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,shouldFocusAfterRender:!0,shouldReturnFocusAfterClose:!0,headerTitle:"",onRequestClose:u,footerButtons:{}},e.isLoading?di()(ja.a,{isDisplayed:e.isLoading}):di()(b_,{paywallModal:n}))))})),R_={modalTitle:"",title:"",subtitle:"",content:"",upgradeText:"Upgrade",image:"/modules/Paywalls/images/generic.png"};function P_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var N_=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P_(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"paywalls_upgrade_to_gold",title:"paywalls_gold_title",subtitle:"paywalls_gold_subtitle",content:"paywalls_gold_content"});function A_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var S_=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A_(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"paywalls_upgrade_to_platinum",title:"paywalls_platinum_title",subtitle:"paywalls_platinum_subtitle",content:"paywalls_platinum_content"});function L_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var D_=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L_(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"paywalls_upgrade_to_professional",title:"paywalls_professional_title",subtitle:"paywalls_professional_subtitle",content:"paywalls_professional_content"});function w_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var k_=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w_(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"paywalls_upgrade_to_individual",title:"paywalls_individual_title",subtitle:"paywalls_individual_subtitle",content:"paywalls_individual_content"});function M_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var x_=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M_(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"paywalls_upgrade_to_starter",title:"paywalls_starter_title",subtitle:"paywalls_starter_subtitle",content:"paywalls_starter_content"});function U_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var F_=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U_(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"paywalls_upgrade_to_silver",title:"paywalls_silver_title",subtitle:"paywalls_silver_subtitle",content:"paywalls_silver_content"});function B_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Y_=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B_(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"paywalls_upgrade_to_team",title:"paywalls_team_title",subtitle:"paywalls_team_subtitle",content:"paywalls_team_content"});function V_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var H_=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V_(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"paywalls_upgrade_to_professional",title:"paywalls_salesforce_professional_title",subtitle:"paywalls_salesforce_professional_subtitle",content:"paywalls_salesforce_professional_content"});function G_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var W_=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G_(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_);function j_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var K_=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j_(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"paywalls_max_fields_or_rules_modal_title",title:"paywalls_max_fields_or_rules_title",subtitle:"paywalls_max_fields_or_rules_subtitle",upgradeText:"paywalls_contact_support"}),z_={};z_["".concat(hh.a.SILVER)]=F_,z_["".concat(hh.a.NEW_SILVER)]=F_,z_["".concat(hh.a.GOLD)]=N_,z_["".concat(hh.a.PLATINUM)]=S_,z_["".concat(hh.a.PROFESSIONAL)]=D_,z_["".concat(hh.a.INDIVIDUAL)]=k_,z_["".concat(hh.a.STARTER)]=x_,z_["".concat(hh.a.NEW_STARTER)]=x_,z_["".concat(hh.a.TEAM)]=Y_,z_["".concat(hh.a.SF_PROFESSIONAL)]=H_,z_["".concat(hh.a.USERS_BUNDLE)]=W_,z_["".concat(hh.a.GET_HELP)]=K_;var X_=z_;function Z_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var q_=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z_(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},N_,{title:"paywalls_new_email_notif_title",subtitle:"paywalls_new_email_notif_gold_subtitle"});function J_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Q_=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J_(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},S_,{title:"paywalls_new_email_notif_title",subtitle:"paywalls_new_email_notif_platinum_subtitle"});function $_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var eg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$_(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},D_,{title:"paywalls_new_email_notif_title",subtitle:"paywalls_new_email_notif_professional_subtitle"});function tg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var ng=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Y_,{title:"paywalls_new_email_notif_title",subtitle:"paywalls_new_email_notif_team_subtitle"});function ig(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var rg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ig(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ig(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k_,{title:"paywalls_new_email_notif_title",content:"paywalls_new_email_notif_individual_content",subtitle:"paywalls_new_email_notif_individual_subtitle"});function ag(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var og=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ag(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ag(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},N_,{title:"paywalls_new_sms_notif_title",subtitle:"paywalls_new_sms_notif_gold_subtitle"});function sg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var lg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},x_,{title:"paywalls_new_sms_notif_title",subtitle:"paywalls_new_sms_notif_starter_subtitle"});function cg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var ug=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},F_,{title:"paywalls_new_sms_notif_title",subtitle:"paywalls_new_sms_notif_silver_subtitle"});function dg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var pg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},S_,{title:"paywalls_new_sms_notif_title",subtitle:"paywalls_new_sms_notif_platinum_subtitle"});function hg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var _g=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},D_,{title:"paywalls_new_sms_notif_title",subtitle:"paywalls_new_sms_notif_professional_subtitle"});function gg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var mg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k_,{title:"paywalls_new_sms_notif_title",subtitle:"paywalls_new_sms_notif_individual_subtitle",content:"paywalls_new_sms_notif_individual_content"});function fg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Eg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Y_,{title:"paywalls_new_sms_notif_title",subtitle:"paywalls_new_sms_notif_team_subtitle"});function yg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Tg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},N_,{title:"paywalls_email_notif_recipients_title",subtitle:"paywalls_email_notif_recipients_gold_subtitle"});function vg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Og=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},x_,{title:"paywalls_email_notif_recipients_title",subtitle:"paywalls_email_notif_recipients_starter_subtitle"});function bg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Cg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Y_,{title:"paywalls_email_notif_recipients_title",subtitle:"paywalls_email_notif_recipients_team_subtitle"});function Ig(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Rg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ig(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ig(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},F_,{title:"paywalls_email_notif_recipients_title",subtitle:"paywalls_email_notif_recipients_silver_subtitle"});function Pg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Ng=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k_,{title:"paywalls_email_notif_recipients_title",subtitle:"paywalls_email_notif_recipients_individual_subtitle"});function Ag(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Sg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ag(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ag(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},N_,{title:"paywalls_email_notif_rules_title",subtitle:"paywalls_email_notif_rules_gold_subtitle"});function Lg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Dg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},x_,{title:"paywalls_email_notif_rules_title",subtitle:"paywalls_email_notif_rules_starter_subtitle"});function wg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var kg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},N_,{title:"paywalls_use_smtp_email_notif_title",subtitle:"paywalls_use_smtp_email_notif_gold_subtitle"});function Mg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var xg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k_,{title:"paywalls_use_smtp_email_notif_title",subtitle:"paywalls_use_smtp_email_notif_individual_subtitle"}),Ug={modalTitle:"paywalls_upgrade_applications_database_manager",title:"paywalls_upgrade_applications_database_manager_title",subtitle:"paywalls_upgrade_applications_database_manager_subtitle",content:"",upgradeText:"paywalls_contact_support",image:"/modules/Paywalls/images/apps2.png"};function Fg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Bg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},N_,{modalTitle:"paywalls_upgrade_applications_api_connector",title:"paywalls_upgrade_applications_api_connector_title",subtitle:"paywalls_upgrade_applications_api_connector_subtitle",image:"/modules/Paywalls/images/apps2.png"});function Yg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Vg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},N_,{title:"paywalls_edit_submission_title",subtitle:"paywalls_edit_submission_subtitle"});function Hg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Gg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},D_,{title:"paywalls_sf_app_title",subtitle:"paywalls_sf_app_subtitle",image:"/modules/Paywalls/images/apps2.png"});function Wg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var jg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},D_,{title:"paywalls_sf_marketing_app_title",subtitle:"paywalls_sf_marketing_app_subtitle",image:"/modules/Paywalls/images/apps2.png"});function Kg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var zg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},H_,{modalTitle:"paywalls_salesforce_mapping_professional_modalTitle",title:"paywalls_salesforce_mapping_professional_title",subtitle:"paywalls_salesforce_mapping_professional_subtitle",content:"",upgradeText:"Upgrade"});function Xg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Zg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},D_,{title:"paywalls_encrypt_data_title",subtitle:"paywalls_encrypt_data_subtitle"});function qg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Jg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Y_,{title:"paywalls_data_encryption_team_title",subtitle:"paywalls_data_encryption_team_subtitle"});function Qg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var $g=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qg(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},N_,{title:"download_submission_as_plain_pdf_title",subtitle:"download_submission_as_plain_pdf_subtitle"});function em(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var tm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?em(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):em(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k_,{title:"download_submission_as_plain_pdf_individual_title",subtitle:"download_submission_as_plain_pdf_individual_subtitle"});function nm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var im=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},F_,{title:"download_submission_as_plain_pdf_silver_title",subtitle:"download_submission_as_plain_pdf_silver_subtitle"});function rm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var am=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},x_,{title:"download_submission_as_plain_pdf_starter_title",subtitle:"download_submission_as_plain_pdf_starter_subtitle"});function om(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var sm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?om(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):om(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},N_,{title:"download_submission_as_form_layout_pdf_title",subtitle:"download_submission_as_form_layout_subtitle"});function lm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var cm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k_,{title:"download_submission_as_form_layout_pdf_individual_title",subtitle:"download_submission_as_form_layout_pdf_individual_subtitle"});function um(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var dm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?um(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):um(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},F_,{title:"download_submission_as_form_layout_pdf_silver_title",subtitle:"download_submission_as_form_layout_pdf_silver_subtitle"});function pm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var hm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},x_,{title:"download_submission_as_form_layout_pdf_starter_title",subtitle:"download_submission_as_form_layout_pdf_starter_subtitle"});function _m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var gm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_m(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"paywalls_upgrade_sf_community",title:"paywalls_upgrade_sf_community_title",subtitle:"paywalls_upgrade_sf_community_subtitle",upgradeText:"Upgrade"});function mm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var fm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},H_,{modalTitle:"paywalls_upgrade_sf_community_sf_professional_modalTitle",title:"paywalls_upgrade_sf_community_sf_professional_title",subtitle:"paywalls_upgrade_sf_community_sf_professional_subtitle",content:"",upgradeText:"paywalls_contact_support"});function Em(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var ym=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Em(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Em(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},x_,{title:"export_submissions_excel_csv_starter_title",subtitle:"paywalls_export_submissions_excel_csv_starter_subtitle"});function Tm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var vm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},N_,{title:"export_submissions_excel_csv_title",subtitle:"export_submissions_excel_csv_subtitle"});function Om(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var bm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Om(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Om(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k_,{title:"export_submissions_excel_csv_individual_title",subtitle:"export_submissions_excel_csv_individual_subtitle"});function Cm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Im=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},F_,{title:"export_submissions_excel_csv_silver_title",subtitle:"export_submissions_excel_csv_silver_subtitle"});function Rm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Pm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},N_,{title:"paywalls_create_form_report_title",subtitle:"paywalls_create_form_report_gold_subtitle"});function Nm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Am=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Y_,{title:"paywalls_create_form_report_team_title",subtitle:"paywalls_create_form_report_team_subtitle"});function Sm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Lm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"paywalls_salesforce_prefill_modal_title",title:"paywalls_salesforce_prefill_title",subtitle:"paywalls_salesforce_prefill_subtitle"});function Dm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var wm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},H_,{modalTitle:"paywalls_salesforce_prefill_sf_professional_modalTitle",title:"paywalls_salesforce_prefill_sf_professional_title",subtitle:"paywalls_salesforce_prefill_sf_professional_subtitle",content:"",upgradeText:"paywalls_contact_support"});function km(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Mm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?km(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):km(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},D_,{title:"paywalls_favicon_title",subtitle:"paywalls_favicon_professional_subtitle"});function xm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Um=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k_,{title:"paywalls_favicon_individual_title",subtitle:"paywalls_favicon_individual_subtitle"});function Fm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Bm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k_,{title:"paywalls_domain_alias_individual_title",subtitle:"paywalls_domain_alias_individual_subtitle"});function Ym(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Vm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ym(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ym(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},S_,{title:"paywalls_domain_alias_title",subtitle:"paywalls_domain_alias_platinum_subtitle"});function Hm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Gm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},x_,{title:"enable_chain_approvals_starter_title",subtitle:"enable_chain_approvals_starter_subtitle"});function Wm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var jm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},F_,{title:"enable_chain_approvals_silver_title",subtitle:"enable_chain_approvals_silver_subtitle"});function Km(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var zm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Km(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Km(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},N_,{title:"enable_chain_approvals_gold_title",subtitle:"enable_chain_approvals_gold_subtitle"});function Xm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Zm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Y_,{title:"enable_chain_approvals_team_title",subtitle:"enable_chain_approvals_team_subtitle"});function qm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Jm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"paywalls_upgrade_applications_database_manager",title:"paywalls_upgrade_applications_database_manager_title",subtitle:"paywalls_upgrade_applications_database_manager_subtitle",image:"/modules/Paywalls/images/apps2.png",upgradeText:"paywalls_contact_support"});function Qm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var $m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"paywalls_upgrade_applications_api_connector",title:"paywalls_upgrade_applications_api_connector_title",subtitle:"paywalls_upgrade_applications_api_connector_subtitle",image:"/modules/Paywalls/images/apps2.png",upgradeText:"paywalls_contact_support"});function ef(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var tf=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ef(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ef(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"paywalls_sf_app_modal_title",title:"paywalls_sf_app_title",subtitle:"paywalls_sf_app_enterprise_subtitle",image:"/modules/Paywalls/images/apps2.png",upgradeText:"paywalls_contact_support"});function nf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var rf=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nf(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"paywalls_sf_marketing_app_modal_title",title:"paywalls_sf_marketing_app_title",subtitle:"paywalls_sf_marketing_app_enterprise_subtitle",image:"/modules/Paywalls/images/apps2.png",upgradeText:"paywalls_contact_support"});function af(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var of=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?af(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):af(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},W_,{modalTitle:"maximum_users_count_modal_title",title:"maximum_users_count_title",subtitle:"maximum_users_count_subtitle",content:"",upgradeText:"paywalls_get_licenses"});function sf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var lf=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sf(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"maximum_users_count_modal_title",title:"maximum_users_count_title",subtitle:"maximum_users_count_subtitle",content:"",upgradeText:"paywalls_contact_support"});function cf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var uf=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cf(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k_,{title:"paywalls_max_forms_individual_title",subtitle:"paywalls_max_forms_individual_subtitle",image:"/modules/Paywalls/images/unlimited_forms.png"});function df(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function pf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var hf=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pf(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?df(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):df(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"paywalls_max_forms_general_modal_title",title:"paywalls_max_forms_general_title",subtitle:"paywalls_max_forms_general_subtitle",upgradeText:"paywalls_get_forms"}));function _f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function gf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var mf=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gf(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_f(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R_,{modalTitle:"paywalls_max_forms_general_modal_title",title:"paywalls_max_forms_general_title",subtitle:"paywalls_max_forms_general_subtitle",upgradeText:"paywalls_contact_support"}));function ff(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Ef=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ff(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ff(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},x_,{title:"paywalls_max_forms_starter_title",subtitle:"paywalls_max_forms_starter_subtitle",image:"/modules/Paywalls/images/unlimited_forms.png"});function yf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Tf=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yf(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k_,{title:"paywalls_hide_back_link_title",subtitle:"paywalls_hide_back_link_individual_subtitle"});function vf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Of=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vf(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k_,{title:"paywalls_add_custom_email_individual_title",subtitle:"paywalls_add_custom_email_individual_subtitle"});function bf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Cf=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bf(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},D_,{subtitle:"paywalls_add_custom_email_professional_subtitle"});function If(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Rf=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?If(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):If(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},x_,{title:"paywalls_create_form_field_starter_title",subtitle:"paywalls_create_form_field_starter_subtitle",image:"/modules/Paywalls/images/unlimited_fields.png"});function Pf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Nf=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pf(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k_,{title:"paywalls_create_form_field_individual_title",subtitle:"paywalls_create_form_field_individual_subtitle",image:"/modules/Paywalls/images/unlimited_fields.png"});function Af(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Sf=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Af(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Af(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},x_,{title:"paywalls_file_upload_control_starter_title",subtitle:"paywalls_file_upload_control_starter_subtitle",image:"/modules/Paywalls/images/file_upload.png"});function Lf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Df=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lf(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k_,{title:"paywalls_file_upload_control_individual_title",subtitle:"paywalls_file_upload_control_individual_subtitle",image:"/modules/Paywalls/images/file_upload.png"});function wf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var kf=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wf(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},x_,{title:"paywalls_create_form_rule_starter_title",subtitle:"paywalls_create_form_rule_starter_subtitle",image:"/modules/Paywalls/images/unlimited_rules.png"});function Mf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var xf=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mf(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k_,{title:"paywalls_create_form_rule_individual_title",subtitle:"paywalls_create_form_rule_individual_subtitle",image:"/modules/Paywalls/images/unlimited_rules.png"});function Uf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Ff=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uf(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},x_,{title:"paywalls_enable_form_payments_starter_title",subtitle:"paywalls_enable_form_payments_starter_subtitle",image:"/modules/Paywalls/images/payments.png"});function Bf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Yf=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bf(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k_,{title:"paywalls_enable_form_payments_individual_title",subtitle:"paywalls_enable_form_payments_individual_subtitle",image:"/modules/Paywalls/images/payments.png"});function Vf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Hf=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vf(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},H_);function Gf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Wf=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gf(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},H_),jf={};jf["".concat(Zt.a.ADD_EMAIL_NOTIFICATION,".").concat(hh.a.GOLD)]=q_,jf["".concat(Zt.a.ADD_EMAIL_NOTIFICATION,".").concat(hh.a.PLATINUM)]=Q_,jf["".concat(Zt.a.ADD_EMAIL_NOTIFICATION,".").concat(hh.a.PROFESSIONAL)]=eg,jf["".concat(Zt.a.ADD_EMAIL_NOTIFICATION,".").concat(hh.a.INDIVIDUAL)]=rg,jf["".concat(Zt.a.ADD_EMAIL_NOTIFICATION,".").concat(hh.a.TEAM)]=ng,jf["".concat(Zt.a.ADD_SMS_NOTIFICATION,".").concat(hh.a.GOLD)]=og,jf["".concat(Zt.a.ADD_SMS_NOTIFICATION,".").concat(hh.a.STARTER)]=lg,jf["".concat(Zt.a.ADD_SMS_NOTIFICATION,".").concat(hh.a.NEW_STARTER)]=lg,jf["".concat(Zt.a.ADD_SMS_NOTIFICATION,".").concat(hh.a.SILVER)]=ug,jf["".concat(Zt.a.ADD_SMS_NOTIFICATION,".").concat(hh.a.NEW_SILVER)]=ug,jf["".concat(Zt.a.ADD_SMS_NOTIFICATION,".").concat(hh.a.PLATINUM)]=pg,jf["".concat(Zt.a.ADD_SMS_NOTIFICATION,".").concat(hh.a.PROFESSIONAL)]=_g,jf["".concat(Zt.a.ADD_SMS_NOTIFICATION,".").concat(hh.a.INDIVIDUAL)]=mg,jf["".concat(Zt.a.ADD_SMS_NOTIFICATION,".").concat(hh.a.TEAM)]=Eg,jf["".concat(Zt.a.ADD_NOTIFICATION_RECIPIENT,".").concat(hh.a.SILVER)]=Rg,jf["".concat(Zt.a.ADD_NOTIFICATION_RECIPIENT,".").concat(hh.a.GOLD)]=Tg,jf["".concat(Zt.a.ADD_NOTIFICATION_RECIPIENT,".").concat(hh.a.STARTER)]=Og,jf["".concat(Zt.a.ADD_NOTIFICATION_RECIPIENT,".").concat(hh.a.NEW_STARTER)]=Og,jf["".concat(Zt.a.ADD_NOTIFICATION_RECIPIENT,".").concat(hh.a.TEAM)]=Cg,jf["".concat(Zt.a.ADD_NOTIFICATION_RECIPIENT,".").concat(hh.a.INDIVIDUAL)]=Ng,jf["".concat(Zt.a.CREATE_EMAIL_NOTIFICATION_RULE,".").concat(hh.a.GOLD)]=Sg,jf["".concat(Zt.a.CREATE_EMAIL_NOTIFICATION_RULE,".").concat(hh.a.STARTER)]=Dg,jf["".concat(Zt.a.CREATE_EMAIL_NOTIFICATION_RULE,".").concat(hh.a.NEW_STARTER)]=Dg,jf["".concat(Zt.a.USE_SMTP_EMAIL_NOTIFICATIONS,".").concat(hh.a.GOLD)]=kg,jf["".concat(Zt.a.USE_SMTP_EMAIL_NOTIFICATIONS,".").concat(hh.a.INDIVIDUAL)]=xg,jf["".concat(Zt.a.VIRTUAL_DATABASE_APP,".").concat(hh.a.CORPORATE)]=Ug,jf["".concat(Zt.a.VIRTUAL_DATABASE_APP,".").concat(hh.a.ENTERPRISE)]=Jm,jf["".concat(Zt.a.VIRTUAL_DATABASE_APP,".").concat(hh.a.CONTACT_US)]=Jm,jf["".concat(Zt.a.API_CONNECTOR_APP,".").concat(hh.a.GOLD)]=Bg,jf["".concat(Zt.a.API_CONNECTOR_APP,".").concat(hh.a.ENTERPRISE)]=$m,jf["".concat(Zt.a.API_CONNECTOR_APP,".").concat(hh.a.CONTACT_US)]=$m,jf["".concat(Zt.a.TOGGLE_DATA_ENCRYPTION,".").concat(hh.a.PROFESSIONAL)]=Zg,jf["".concat(Zt.a.SALESFORCE_APP,".").concat(hh.a.PROFESSIONAL)]=Gg,jf["".concat(Zt.a.SALESFORCE_APP,".").concat(hh.a.ENTERPRISE)]=tf,jf["".concat(Zt.a.SALESFORCE_APP,".").concat(hh.a.CONTACT_US)]=tf,jf["".concat(Zt.a.SALESFORCE_MARKETING_CLOUD_APP,".").concat(hh.a.PROFESSIONAL)]=jg,jf["".concat(Zt.a.USE_OBJECT_MAPPING,".").concat(hh.a.SF_PROFESSIONAL)]=zg,jf["".concat(Zt.a.USE_OBJECT_MAPPING,".").concat(hh.a.CONTACT_US)]=zg,jf["".concat(Zt.a.TOGGLE_DATA_ENCRYPTION,".").concat(hh.a.PROFESSIONAL)]=Zg,jf["".concat(Zt.a.TOGGLE_DATA_ENCRYPTION,".").concat(hh.a.TEAM)]=Jg,jf["".concat(Zt.a.TOGGLE_DATA_ENCRYPTION,".").concat(hh.a.INDIVIDUAL)]=Jg,jf["".concat(Zt.a.SALESFORCE_MARKETING_CLOUD_APP,".").concat(hh.a.ENTERPRISE)]=rf,jf["".concat(Zt.a.SALESFORCE_MARKETING_CLOUD_APP,".").concat(hh.a.CONTACT_US)]=rf,jf["".concat(Zt.a.USE_SALESFORCE_LOOKUP_OBJECTS,".").concat(hh.a.SF_PROFESSIONAL)]=Hf,jf["".concat(Zt.a.USE_SALESFORCE_QUERY,".").concat(hh.a.SF_PROFESSIONAL)]=Wf,jf["".concat(Zt.a.ENABLE_FORM_DOMAIN_ALIASING,".").concat(hh.a.PLATINUM)]=Vm,jf["".concat(Zt.a.ENABLE_FORM_DOMAIN_ALIASING,".").concat(hh.a.INDIVIDUAL)]=Bm,jf["".concat(Zt.a.ADD_FORM_REPORT,".").concat(hh.a.GOLD)]=Pm,jf["".concat(Zt.a.ADD_FORM_REPORT,".").concat(hh.a.TEAM)]=Am,jf["".concat(Zt.a.EXPORT_SUBMISSIONS_EXCEL_CSV,".").concat(hh.a.STARTER)]=ym,jf["".concat(Zt.a.EXPORT_SUBMISSIONS_EXCEL_CSV,".").concat(hh.a.NEW_STARTER)]=ym,jf["".concat(Zt.a.EXPORT_SUBMISSIONS_EXCEL_CSV,".").concat(hh.a.GOLD)]=vm,jf["".concat(Zt.a.EXPORT_SUBMISSIONS_EXCEL_CSV,".").concat(hh.a.INDIVIDUAL)]=bm,jf["".concat(Zt.a.EXPORT_SUBMISSIONS_EXCEL_CSV,".").concat(hh.a.SILVER)]=Im,jf["".concat(Zt.a.EXPORT_SUBMISSIONS_EXCEL_CSV,".").concat(hh.a.NEW_SILVER)]=Im,jf["".concat(Zt.a.DOWNLOAD_SUBMISSION_AS_PLAIN_PDF,".").concat(hh.a.GOLD)]=$g,jf["".concat(Zt.a.DOWNLOAD_SUBMISSION_AS_PLAIN_PDF,".").concat(hh.a.INDIVIDUAL)]=tm,jf["".concat(Zt.a.DOWNLOAD_SUBMISSION_AS_PLAIN_PDF,".").concat(hh.a.SILVER)]=im,jf["".concat(Zt.a.DOWNLOAD_SUBMISSION_AS_PLAIN_PDF,".").concat(hh.a.NEW_SILVER)]=im,jf["".concat(Zt.a.DOWNLOAD_SUBMISSION_AS_PLAIN_PDF,".").concat(hh.a.STARTER)]=am,jf["".concat(Zt.a.DOWNLOAD_SUBMISSION_AS_PLAIN_PDF,".").concat(hh.a.NEW_STARTER)]=am,jf["".concat(Zt.a.DOWNLOAD_SUBMISSION_AS_FORM_LAYOUT_PDF,".").concat(hh.a.GOLD)]=sm,jf["".concat(Zt.a.DOWNLOAD_SUBMISSION_AS_FORM_LAYOUT_PDF,".").concat(hh.a.INDIVIDUAL)]=cm,jf["".concat(Zt.a.DOWNLOAD_SUBMISSION_AS_FORM_LAYOUT_PDF,".").concat(hh.a.SILVER)]=dm,jf["".concat(Zt.a.DOWNLOAD_SUBMISSION_AS_FORM_LAYOUT_PDF,".").concat(hh.a.NEW_SILVER)]=dm,jf["".concat(Zt.a.DOWNLOAD_SUBMISSION_AS_FORM_LAYOUT_PDF,".").concat(hh.a.STARTER)]=hm,jf["".concat(Zt.a.DOWNLOAD_SUBMISSION_AS_FORM_LAYOUT_PDF,".").concat(hh.a.NEW_STARTER)]=hm,jf["".concat(Zt.a.USE_FORM_PREFILL,".").concat(hh.a.CORPORATE)]=Lm,jf["".concat(Zt.a.USE_FORM_PREFILL,".").concat(hh.a.SF_PROFESSIONAL)]=wm,jf["".concat(Zt.a.USE_FORM_PREFILL,".").concat(hh.a.SF_ENTERPRISE)]=wm,jf["".concat(Zt.a.USE_FORM_PREFILL,".").concat(hh.a.CONTACT_US)]=wm,jf["".concat(Zt.a.EDIT_SUBMISSION,".").concat(hh.a.GOLD)]=Vg,jf["".concat(Zt.a.PUBLISH_FORM_ON_SALESFORCE_COMMUNITY,".").concat(hh.a.CORPORATE)]=gm,jf["".concat(Zt.a.PUBLISH_FORM_ON_SALESFORCE_COMMUNITY,".").concat(hh.a.SF_PROFESSIONAL)]=fm,jf["".concat(Zt.a.PUBLISH_FORM_ON_SALESFORCE_COMMUNITY,".").concat(hh.a.SF_ENTERPRISE)]=fm,jf["".concat(Zt.a.PUBLISH_FORM_ON_SALESFORCE_COMMUNITY,".").concat(hh.a.CONTACT_US)]=fm,jf["".concat(Zt.a.SHOW_FAVICON,".").concat(hh.a.PROFESSIONAL)]=Mm,jf["".concat(Zt.a.SHOW_FAVICON,".").concat(hh.a.INDIVIDUAL)]=Um,jf["".concat(Zt.a.ENABLE_CHAIN_APPROVALS,".").concat(hh.a.STARTER)]=Gm,jf["".concat(Zt.a.ENABLE_CHAIN_APPROVALS,".").concat(hh.a.SILVER)]=jm,jf["".concat(Zt.a.ENABLE_CHAIN_APPROVALS,".").concat(hh.a.GOLD)]=zm,jf["".concat(Zt.a.ENABLE_CHAIN_APPROVALS,".").concat(hh.a.TEAM)]=Zm,jf["".concat(Zt.a.MAXIMUM_FORM_COUNT,".").concat(hh.a.INDIVIDUAL)]=uf,jf["".concat(Zt.a.MAXIMUM_FORM_COUNT,".").concat(hh.a.FORMS_BUNDLE)]=hf,jf["".concat(Zt.a.MAXIMUM_FORM_COUNT,".").concat(hh.a.CONTACT_US)]=mf,jf["".concat(Zt.a.MAXIMUM_FORM_COUNT,".").concat(hh.a.NEW_STARTER)]=Ef,jf["".concat(Zt.a.MAXIMUM_FORM_COUNT,".").concat(hh.a.NEW_SILVER)]=Ef,jf["".concat(Zt.a.MAXIMUM_USERS_COUNT,".").concat(hh.a.USERS_BUNDLE)]=of,jf["".concat(Zt.a.MAXIMUM_USERS_COUNT,".").concat(hh.a.CONTACT_US)]=lf,jf["".concat(Zt.a.HIDE_BACKLINK,".").concat(hh.a.INDIVIDUAL)]=Tf,jf["".concat(Zt.a.ADD_CUSTOM_EMAIL_IN_NOTIFICATONS,".").concat(hh.a.INDIVIDUAL)]=Of,jf["".concat(Zt.a.ADD_CUSTOM_EMAIL_IN_NOTIFICATONS,".").concat(hh.a.PROFESSIONAL)]=Cf,jf["".concat(Zt.a.CREATE_FORM_FIELD,".").concat(hh.a.NEW_STARTER)]=Rf,jf["".concat(Zt.a.CREATE_FORM_FIELD,".").concat(hh.a.NEW_SILVER)]=Rf,jf["".concat(Zt.a.CREATE_FORM_FIELD,".").concat(hh.a.INDIVIDUAL)]=Nf,jf["".concat(Zt.a.FILE_UPLOAD_CONTROL,".").concat(hh.a.NEW_STARTER)]=Sf,jf["".concat(Zt.a.FILE_UPLOAD_CONTROL,".").concat(hh.a.NEW_SILVER)]=Sf,jf["".concat(Zt.a.FILE_UPLOAD_CONTROL,".").concat(hh.a.INDIVIDUAL)]=Df,jf["".concat(Zt.a.CREATE_FORM_RULE,".").concat(hh.a.NEW_STARTER)]=kf,jf["".concat(Zt.a.CREATE_FORM_RULE,".").concat(hh.a.NEW_SILVER)]=kf,jf["".concat(Zt.a.CREATE_FORM_RULE,".").concat(hh.a.INDIVIDUAL)]=xf,jf["".concat(Zt.a.ENABLE_FORM_PAYMENTS,".").concat(hh.a.NEW_STARTER)]=Ff,jf["".concat(Zt.a.ENABLE_FORM_PAYMENTS,".").concat(hh.a.NEW_SILVER)]=Ff,jf["".concat(Zt.a.ENABLE_FORM_PAYMENTS,".").concat(hh.a.INDIVIDUAL)]=Yf;var Kf=jf,zf={generic:{modalTitle:"paywalls_upgrade_to_generic",title:"paywalls_generic_title",subtitle:"paywalls_generic_subtitle",content:"",upgradeText:"Upgrade",image:"/modules/Paywalls/images/generic.png"}},Xf=zf,Zf=Si()(Kf,X_,Xf),qf=function(e,t){return e&&t?Object(kr.a)(Zf,"".concat(e,".").concat(t))?Zf["".concat(e,".").concat(t)]:Object(kr.a)(Zf,e)?Zf[e]:Object(kr.a)(Zf,t)?Zf[t]:Zf.generic:R_},Jf=(n(582),function(e){var t=vi()("paywall-inner__figure-wrap",{"paywall-inner__figure-wrap--small-img":!e.templateData.content});return di()("div",{className:"paywall-inner"},void 0,di()("figure",{className:t},void 0,e.templateData.image&&di()("img",{src:e.templateData.image,alt:e.templateData.title})),di()("div",{className:"paywall-inner__main-content"},void 0,e.templateData.title&&di()("h2",{className:"paywall-inner__main-content--title"},void 0,e.templateData.title),e.templateData.subtitle&&di()("p",{className:"paywall-inner__main-content--paragraph",dangerouslySetInnerHTML:{__html:e.templateData.subtitle}}),e.templateData.content&&di()("div",{className:"paywall-inner__main-content-upgrade-wrap",dangerouslySetInnerHTML:{__html:e.templateData.content}})))}),Qf=Ei.a.createContext(Xt.a.getInstance()),$f=n(174),eE=function(){try{var e=window.SnapEngage;e.openProactiveChat(!0,!0),e.startLink()}catch(t){console.error(t)}};n(584);function tE(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var nE=function(e){u()(n,e);var t=tE(n);function n(e){var i;return o()(this,n),i=t.call(this,e),v()(A()(i),"props",void 0),v()(A()(i),"PaywallModal",void 0),v()(A()(i),"i18nService",void 0),v()(A()(i),"metricsService",void 0),v()(A()(i),"customerEventService",void 0),i.PaywallModal=Ei.a.createRef(),i.i18nService=new F.a,i.metricsService=Ci.a.getInstance(),i.customerEventService=ks.a.getInstance(),i}return l()(n,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.feature,n=void 0===t?null:t,i=e.target,r=void 0===i?null:i;if(n&&r){var a={feature:n,targetName:r.name,targetType:r.type};this.metricsService.track("user_upgrade_paywall_open",!0,a),this.customerEventService.triggerInterestInFeatureEvent(n),this.customerEventService.triggerEvent(ks.b.HIT_PAYWALL,{paywallFeature:n})}}},{key:"render",value:function(){var e=this.props,t=e.feature,n=e.target,i=!(!t||!n),r=qf(t,n.name),a={modalTitle:this.i18nService.translateText(r.modalTitle),title:this.i18nService.translateText(r.title),subtitle:this.i18nService.translateText(r.subtitle),content:this.i18nService.translateText(r.content).replace(/<br\/>/g,""),upgradeText:this.i18nService.translateText(r.upgradeText),image:r.image};return di()("div",{"data-testid":"paywalls-app"},void 0,Ei.a.createElement(Wa,{ref:this.PaywallModal,isOpen:i,hasCloseIcon:!0,appElement:document.getElementById("paywalls-app-container"),shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,shouldFocusAfterRender:!0,shouldReturnFocusAfterClose:!0,headerTitle:a.modalTitle,onRequestClose:this.closePaywall.bind(this),footerButtons:{rightSide:[{id:"paywallUpgrade",label:a.upgradeText,type:Nr.PENDING,className:"d-inline-block",onClick:this.onUpgrade.bind(this)}]}},di()(Jf,{templateData:a})))}},{key:"closePaywall",value:function(){(0,this.props.onPaywallClose)(),this.metricsService.track("user_upgrade_paywall_close");var e=this.props.feature,t=void 0===e?null:e;this.customerEventService.triggerEvent(ks.b.CLOSE_PAYWALL,{paywallFeature:t})}},{key:"closeModal",value:function(){this.PaywallModal.current.handleCloseModal()}},{key:"openPricingOverlay",value:function(){var e,t=this.props.onPaywallClose;null===(e=window.pricingOverlay)||void 0===e||e.render(),t()}},{key:"onUpgrade",value:function(){var e,t,n,i=this.props,r=i.feature,a=i.target,o=i.onPaywallClose;if(this.metricsService.track("user_upgrade_btn_click"),this.metricsService.track("user_upgrade_btn_click_from_new_paywall",null,{feature:r}),a.name!==hh.a.CONTACT_US||r!==Zt.a.USE_OBJECT_MAPPING){switch(a.name){case hh.a.GET_HELP:return o(),void eE();case hh.a.CONTACT_US:case hh.a.ENTERPRISE:case hh.a.SF_ENTERPRISE:return o(),void Object(Vh.a)();case hh.a.NEW_STARTER:return o(),void Object(ft.n)();case hh.a.FORMS_BUNDLE:case hh.a.USERS_BUNDLE:return o(),void Object(ft.r)(Object(ft.a)(null===(e=this.context)||void 0===e?void 0:e.getCurrentPlanName(),a.name))}if((null===(t=this.context)||void 0===t||null===(n=t.getAllUpgradeOptions(r))||void 0===n?void 0:n.length)>1)this.openPricingOverlay();else{switch(a.name){case hh.a.INDIVIDUAL:case hh.a.TEAM:Object(ft.r)("/index.php?p=myaccount_upgrade_step2&product=".concat(a.name));break;default:try{var s=$f.a.getPlanIdByPlanName(a.name),l=window.theToken,c={servicedomain:window.location.hostname};window.UpgradeMechanism.runUpgrade(s,0,l,"","",JSON.stringify(c),"")}catch(u){throw new Error("Paywalls: Cannot upgrade user for feature: ".concat(r," and upgrade: ").concat(a.name," with reason: ").concat(u.toString()))}}o()}}else this.openPricingOverlay()}}]),n}(fi.Component);v()(nE,"contextType",Qf);var iE=Object(yi.connect)(Kp,zp)(nE);function rE(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var aE=di()(Ei.a.Fragment,{}),oE=function(e){u()(n,e);var t=rE(n);function n(e){var i;if(o()(this,n),i=t.call(this,e),v()(A()(i),"props",void 0),v()(A()(i),"paywallService",void 0),v()(A()(i),"userService",void 0),v()(A()(i),"metricsService",void 0),v()(A()(i),"I18n",void 0),!window.userService)throw new Error("Dependency not found: userService");return i.userService=window.userService.getInstance(),i.metricsService=Ci.a.getInstance(),i.I18n=new F.a,window.UpgradeMechanism.onCloseUpgardeModal=i.closePaywall.bind(A()(i)),i}return l()(n,[{key:"componentDidUpdate",value:function(){var e=this,t=this.props,n=t.feature,i=void 0===n?null:n,r=t.target,a=void 0===r?null:r;i&&a&&this.userService.getCurrentIdentity().then((function(t){var n,r,o,s={toPlan:$f.a.getPlanIdByPlanName(a.name),trackDescription:"",platform:t.userDetails.platform,planName:t.userDetails.planName,serverPlatform:t.userDetails.serverPlatform,servicedomain:location.hostname},l=window.theToken,c={servicedomain:window.location.hostname};switch(e.paywallService=window.Paywall.getInstance(),i){case Zt.a.ADD_EMAIL_NOTIFICATION:n=it.k.MAXIMUM_NUMBER_OF_EMAIL_NOTIFICATIONS_REACHED,s.ability=_o.a.NEW_EMAIL,e.metricsService.track("user_upgrade_popup_open_notifications");break;case Zt.a.ADD_SMS_NOTIFICATION:n=it.k.MAXIMUM_NUMBER_OF_SMS_NOTIFICATIONS_REACHED,s.ability=_o.a.NEW_SMS,e.metricsService.track("user_upgrade_popup_open_notifications");break;case Zt.a.ADD_NOTIFICATION_RECIPIENT:n=it.k.MAXIMUM_NUMBER_OF_EMAIL_NOTIFICATIONS_REACHED,s.ability=_o.a.COUNT_EMAIL_RECIPIENTS,e.metricsService.track("user_upgrade_popup_open_notifications");break;case Zt.a.USE_SMTP_EMAIL_NOTIFICATIONS:n=it.k.SMTP_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,s.ability=_o.a.USE_SMTP,e.metricsService.track("user_upgrade_popup_open_notifications");break;case Zt.a.CREATE_EMAIL_NOTIFICATION_RULE:n=it.k.NOTIFICATIONS_ADD_RULES,s.ability=_o.a.COUNT_EMAIL_RULES,e.metricsService.track("user_upgrade_popup_open_notifications");break;case Zt.a.ADD_EMAIL_NOTIFICATION_ATTACHMENT:n=it.k.ATTACHMENTS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,s.ability=_o.a.ADD_FILE_ATTACHMENTS,s.trackDescription="notifications_add_file_attachments",e.metricsService.track("user_upgrade_popup_open_notifications");break;case Zt.a.DOWNLOAD_SUBMISSION_AS_PLAIN_PDF:n=it.k.ATTACHMENTS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,s.ability=_o.a.ADD_SUBMISSION_PDF_ATTACHMENTS,s.trackDescription="notifications_add_submission_pdf_attachments",e.metricsService.track("user_upgrade_popup_open_notifications");break;case Zt.a.DOWNLOAD_SUBMISSION_AS_FORM_LAYOUT_PDF:n=it.k.ATTACHMENTS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,s.ability=_o.a.ADD_FORM_LAYOUT_ATTACHMENTS,s.trackDescription="notifications_add_form_layout_attachments",e.metricsService.track("user_upgrade_popup_open_notifications");break;case Zt.a.CUSTOMIZE_EMAIL_NOTIFICATION_TEMPLATE:n=it.k.EDIT_NOTIFICATION_TEMPLATE_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,s.ability=_o.a.CUSTOMIZE_EMAIL_TEMPLATES,s.trackDescription="notifications_customize_email_templates",e.metricsService.track("user_upgrade_popup_open_notifications");break;case Zt.a.VIRTUAL_DATABASE_APP:n=it.k.GENERIC_UPGRADE_REASON,r="This application is available starting with the Enterprise plan. Please click the Request demo button below.",s.message=e.I18n.translateTextDefault("userAccountUpgradeApplicationToCorporate",r);break;case Zt.a.SALESFORCE_APP:return n=it.k.GENERIC_UPGRADE_REASON,c.extra_event_details="openSalesForceTab",void window.UpgradeMechanism.runUpgrade(1e3,1e3,l,"","",JSON.stringify(c),n.toString());case Zt.a.SALESFORCE_MARKETING_CLOUD_APP:n=it.k.GENERIC_UPGRADE_REASON,r="This application is available starting with the Professional plan. Please click the <b>Upgrade</b> button below and choose your preferred service plan.",s.message=e.I18n.translateTextDefault("userAccountUpgradeApplicationToEnterprise",r);break;case Zt.a.API_CONNECTOR_APP:n=it.k.GENERIC_UPGRADE_REASON,r="This application is available starting with the Gold plan. Please click the <b>Upgrade</b> button below and choose your preferred service plan.",s.message=e.I18n.translateTextDefault("userAccountUpgrade_23",r);break;case Zt.a.TOGGLE_DATA_ENCRYPTION:n=it.k.ENCRIPTION_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,r="Data Encryption is only available starting with Professional Plan.",s.message=e.I18n.translateTextDefault("data_encryption_plan_update_user_account",r);break;case Zt.a.ADD_FORM_REPORT:n=it.k.GENERIC_UPGRADE_REASON,r="You have reached the maximum number of reports allowed for your service plan. Please upgrade for more!",s.message=e.I18n.translateTextDefault("userAccountUpgrade",r);break;case Zt.a.EDIT_SUBMISSION:n=it.k.GENERIC_UPGRADE_REASON,r="Editing submissions at a later time is available only for upgraded users. Click the Upgrade button below and subscribe to a paid plan in order to gain access to this feature.",s.message=e.I18n.translateTextDefault("editSubmissionLegacyPaywall",r);break;case Zt.a.PUBLISH_FORM_ON_SALESFORCE_COMMUNITY:n=it.k.SALESFORCE_COMMUNITY_SHARING_NOT_SUPPORTED_IN_CURRENT_USER_PLAN;break;case Zt.a.ENABLE_FORM_DOMAIN_ALIASING:n=it.k.DOMAIN_ALIAS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,r="Domain Aliasing is available only for Platinum and Professional accounts. Click the Upgrade button below in order to gain access to this feature.",s.message=e.I18n.translateTextDefault("publish_one12",r);break;case Zt.a.EXPORT_SUBMISSIONS_EXCEL_CSV:n=it.k.GENERIC_UPGRADE_REASON,r="Upgrade to export your submissions to CSV/Excel",s.message=e.I18n.translateTextDefault("submission_export_paywall",r);break;case Zt.a.DOWNLOAD_SUBMISSION_AS_FORM_LAYOUT_PDF:n=it.k.GENERIC_UPGRADE_REASON,r="Submissions attached as PDF files to the notification emails are available only for upgraded users. Click the Upgrade button below and subscribe to a paid plan in order to gain access to this feature.",s.message=e.I18n.translateTextDefault("download_form_layout_pdf_submission_legacy_paywall",r);break;case Zt.a.USE_FORM_PREFILL:n=it.k.SALESFORCE_PREFILL_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,r="The real-time prefill feature is available on Professional only during the trial. Please upgrade your account to Enterprise to further use it after the trial ends.",s.message=e.I18n.translateTextDefault("paywall_upgrade_enterprise_content",r);break;case Zt.a.USE_OBJECT_MAPPING:n=it.k.GENERIC_UPGRADE_REASON,r="The Salesforce integration is available starting with the Professional plan. Please upgrade your account to save the changes.",s.message=e.I18n.translateTextDefault("paywall_upgrade_professional_content",r);break;case Zt.a.SHOW_FAVICON:n=it.k.GENERIC_UPGRADE_REASON,r="Upgrade to Professional and add the URL of your favicon to add your brand to the form. ",s.message=e.I18n.translateTextDefault("paywalls_favicon_professional_subtitle",r);break;case Zt.a.ENABLE_CHAIN_APPROVALS:n=it.k.GENERIC_UPGRADE_REASON,r="This application is available starting with the Gold plan. Please click the Upgrade button below and choose your preferred service plan.",s.message=e.I18n.translateTextDefault("enable_chain_approvals_legacy_paywall",r);break;case Zt.a.CREATE_FORM_FIELD:a.name===hh.a.GET_HELP?(n=it.k.GET_HELP_WITH_SETUP,s.buttonType=it.f.CONTACT_SUPPORT,window.openChatWindow=eE,o="openChatWindow();"):(n=it.k.NUMBER_OF_FIELDS_EXCEEDED_IN_CURRENT_USER_PLAN,s.trackDescription="Fields Limit Exceeded",s.message="You have reached the maximum number of fields allowed for your plan.",s.servicedomain=window.location.hostname);break;case Zt.a.CREATE_FORM_RULE:n=it.k.GET_HELP_WITH_SETUP,s.buttonType=it.f.CONTACT_SUPPORT,window.openChatWindow=eE,o="openChatWindow();";break;case Zt.a.ADD_CUSTOM_EMAIL_IN_NOTIFICATONS:n=it.k.GENERIC_UPGRADE_REASON,r="Upgrade to Professional and add custom email addresses in Reply-to in notifications.",s.message=e.I18n.translateTextDefault("paywalls_add_custom_email_professional_subtitle",r);break;case Zt.a.FILE_UPLOAD_CONTROL:n=it.k.CONTROL_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,s.trackDescription="Upload Field",s.controlNotSupported="UPLOAD_FIELD",s.message=e.I18n.translateText("userAccountUpgrade_9");break;case Zt.a.USE_SALESFORCE_LOOKUP_OBJECTS:n=it.k.SALESFORCE_LOOKUP_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,r="The Salesforce integration is available starting with the Professional plan. Please upgrade your account to save the changes.",s.message=e.I18n.translateTextDefault("paywall_upgrade_professional_content",r);break;case Zt.a.USE_SALESFORCE_QUERY:n=it.k.SALESFORCE_QUERY_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,r="The Salesforce integration is available starting with the Professional plan. Please upgrade your account to save the changes.",s.message=e.I18n.translateTextDefault("paywall_upgrade_professional_content",r);break;case Zt.a.WEB_HOOKS_APP:case Zt.a.MARKETO_APP:case Zt.a.VERTICAL_RESPONSE_APP:n=it.k.GENERIC_UPGRADE_REASON,r="This application is available starting with the Platinum plan. Please click the <b>Upgrade</b> button below and choose your preferred service plan.",s.message=e.I18n.translateTextDefault("userAccountUpgrade_24",r);break;case Zt.a.MAIL_CHIMP_APP:case Zt.a.GOOGLE_GROUPS_APP:case Zt.a.TWITTER_APP:case Zt.a.ICONTACT_APP:case Zt.a.UNBOUNCE_APP:case Zt.a.BIG_CONTACTS_APP:case Zt.a.GOOGLE_DRIVE_APP:case Zt.a.SMARTSHEET_APP:case Zt.a.ACTIVE_CAMPAIGN_APP:case Zt.a.CAMPAIGN_MONITOR_APP:case Zt.a.EGNYTE_APP:case Zt.a.EVERNOTE_APP:case Zt.a.GET_RESPONSE_APP:case Zt.a.WORDPRESS_POSTS_APP:case Zt.a.TOP_PRODUCER_APP:case Zt.a.A_WEBER_APP:case Zt.a.PIPELINE_DEALS_APP:case Zt.a.ZENDESK_APP:case Zt.a.ZOHO_CRM_APP:case Zt.a.CONSTANT_CONTACT_APP:case Zt.a.DROPBOX_APP:case Zt.a.GOOGLE_CALENDAR_APP:case Zt.a.ENORMAIL_APP:n=it.k.GENERIC_UPGRADE_REASON,r="This application is available starting with the Gold plan. Please click the <b>Upgrade</b> button below and choose your preferred service plan.",s.message=e.I18n.translateTextDefault("userAccountUpgrade_23",r);break;case Zt.a.PASSWORD_CONTROL:n=it.k.CONTROL_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,s.trackDescription="Password",s.controlNotSupported="PASSWORD",s.message=e.I18n.translateText("ajax_editFieldPasswordPaid");break;case Zt.a.COUPON_CODE_CONTROL:n=it.k.CONTROL_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,s.trackDescription="Coupon",s.controlNotSupported="COUPON",s.message=e.I18n.translateText("userAccountUpgrade_80");break;case Zt.a.FORMULA_CONTROL:n=it.k.CONTROL_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,s.trackDescription="Formula",s.controlNotSupported="FORMULA",s.message=e.I18n.translateText("userAccountUpgrade_82");break;case Zt.a.REPEATABLE_CONTAINER:n=it.k.CONTROL_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,s.trackDescription="Repeatable Container",s.controlNotSupported="REPEATABLE_CONTAINER",s.message=e.I18n.translateText("userAccountUpgrade_83");break;case Zt.a.FEE_CONTROL:n=it.k.CONTROL_NOT_SUPPORTED_IN_CURRENT_USER_PLAN;break;case Zt.a.HTML_BLOCK_CONTROL:n=it.k.HTML_BLOCK_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,s.trackDescription="HTML Block",s.controlNotSupported="HTML_BLOCK",s.message=e.I18n.translateText("userAccountUpgrade_8");break;case Zt.a.FIELD_VALIDATION_CONTROL_OPTION:n=it.k.VALIDATOR_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,s.trackDescription="Field Validation",s.message=e.I18n.translateText("paywall_upgrade_validation_3");break;case Zt.a.LIMIT_CHOICES_CONTROL_OPTION:n=it.k.LIMIT_NUMBER_OF_TIME_OPTIONS_CAN_BE_CHOSEN,s.trackDescription="Limit times options can be chosen",s.message=e.I18n.translateText("paywallUpgrade_limitChoices");break;case Zt.a.QUIZ_CONTROL_OPTION:n=it.k.QUIZ_OPTIONS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN,s.trackDescription="Assigning points to questions is available only for upgraded users",s.message=e.I18n.translateText("userAccountUpgrade_11");break;case Zt.a.ADD_FORM_LANGUAGE:n=it.k.MAXIMUM_NUMBER_OF_TRANSLATIONS_REACHED,s.trackDescription="Translations",s.message=e.I18n.translateText("userAccountUpgrade_30");break;case Zt.a.LIKERT_SCALE_CONTROL:n=it.k.MAXIMUM_NUMBER_OF_LIKERT_STATEMENTS_IN_CURRENT_USER_PLAN,s.trackDescription="Likert Scale",s.message=e.I18n.translateText("userAccountUpgrade_8");break;case Zt.a.HIDE_BACKLINK:n=it.k.GENERIC_UPGRADE_REASON;break;default:throw new Error("Paywalls: Unknown feature")}var u=o||"UpgradeMechanism.runUpgrade(".concat($f.a.getPlanIdByPlanName(a.name),",0,'").concat(l,"','','','").concat(JSON.stringify(c),"','").concat(n,"')");e.paywallService.withUpgradeMechanismCode(u).withJQuery(jQuery.noConflict()).createPaywallDialog(n,s),e.metricsService.track("user_upgrade_popup_open"),window.$=jQuery.noConflict()}))}},{key:"closePaywall",value:function(){(0,this.props.onPaywallClose)()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.feature,i=void 0===n?null:n,r=t.target,a=void 0===r?null:r;return e.feature&&e.target&&(i!=e.feature||a!=e.target)}},{key:"render",value:function(){return aE}}]),n}(fi.Component),sE=Object(yi.connect)(Kp,zp)(oE),lE=function(){function e(){o()(this,e)}return l()(e,null,[{key:"getPaywallComponent",value:function(){var e=Fi.a.getInstance();return e.isPaywalls2022Active()?I_:e.isPaywallsV2Active()?iE:sE}}]),e}(),cE=n(399),uE=n.n(cE),dE=function(e){var t=e.id,n=void 0===t?"":t,i=e.text,r=void 0===i?"":i,a=e.image,o=void 0===a?"":a,s=e.index,l=void 0===s?0:s,c=e.total,u=void 0===c?0:c,d=e.isCountable,p=void 0===d||d,h=e.nextButton,_=void 0!==h&&h,g=e.cancelButton,m=void 0!==g&&g,f=e.completeButton,E=void 0!==f&&f;return di()("div",{className:"onboarding"},void 0,o&&di()("div",{className:"onboarding__image"},void 0,di()("img",{className:"onboarding__image--size",src:o,alt:"step-".concat(n)})),di()("div",{className:"onboarding__text",dangerouslySetInnerHTML:{__html:r}}),di()("div",{className:"onboarding__footer"},void 0,(l||u)&&p&&di()("div",{className:"onboarding__steps"},void 0,l,"/",u),(_||m||E)&&di()("div",{className:"onboarding__buttons"},void 0,m&&di()("button",{className:"onboarding__buttons--secondary",onClick:m.clickAction},void 0,m.label),E&&di()("button",{className:"onboarding__buttons--primary",onClick:E.clickAction},void 0,E.label),_&&di()("button",{className:"onboarding__buttons--primary",onClick:_.clickAction},void 0,_.label))))};n(586);function pE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function hE(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var _E=di()(Ei.a.Fragment,{}),gE=function(e){u()(n,e);var t=hE(n);function n(e){var i;o()(this,n),i=t.call(this,e),v()(A()(i),"props",void 0),v()(A()(i),"tour",void 0);var r=e.steps,a=e.tourOptions,s=e.onTourStart,l=void 0===s?"":s,c=e.onTourCancel,u=void 0===c?"":c,d=e.onTourComplete,p=void 0===d?"":d;i.tour=new uE.a.Tour(a),l&&i.tour.on("start",l),p&&i.tour.on("complete",p),u&&i.tour.on("cancel",u);var h=[],_=Object(xr.a)(r,(function(e){return!1!==e.isCountable})),g=_.length;return r.forEach((function(e,t){h[e.id]=document.createElement("div");var n=Object(Fr.a)(_,e)+1;tr.a.render(di()(dE,{id:e.id,text:e.text,index:n,total:g,image:e.image,nextButton:e.nextButton,cancelButton:e.cancelButton,completeButton:e.completeButton,isCountable:e.isCountable}),h[e.id]);var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pE(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{text:h[e.id]});setTimeout((function(){i.tour.addStep(r)}))})),i}return l()(n,[{key:"getTour",value:function(){return this.tour}},{key:"startTour",value:function(){this.tour.start()}},{key:"cancelTour",value:function(){this.tour.cancel()}},{key:"nextStep",value:function(){this.tour.next()}},{key:"completeTour",value:function(){this.tour.complete()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.onTourStart,n=void 0===t?"":t,i=e.onTourCancel,r=void 0===i?"":i,a=e.onTourComplete,o=void 0===a?"":a;n&&this.tour.off("start",n),o&&this.tour.off("complete",o),r&&this.tour.off("cancel",r)}},{key:"render",value:function(){return _E}}]),n}(fi.Component);n(588);function mE(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var fE=function(e){u()(n,e);var t=mE(n);function n(e){var i;return o()(this,n),i=t.call(this,e),v()(A()(i),"onboardingAppRef",void 0),v()(A()(i),"steps",void 0),v()(A()(i),"tourOptions",void 0),v()(A()(i),"shortTextSelector",'div[data-role="control"][data-type-id="23"]'),v()(A()(i),"tour",void 0),v()(A()(i),"cookieService",void 0),v()(A()(i),"cookieTourFinished","isOnboardingFinished"),v()(A()(i),"translationsService",void 0),v()(A()(i),"featureService",void 0),v()(A()(i),"metricsService",void 0),v()(A()(i),"state",void 0),i.cookieService=new jd.a,i.translationsService=new F.a,i.featureService=Fi.a.getInstance(),i.metricsService=Ci.a.getInstance(),i.state={isTourStarted:!1},i.onboardingAppRef=Ei.a.createRef(),i.tourOptions={defaultStepOptions:{scrollTo:!0},useModalOverlay:!0,exitOnEsc:!1,keyboardNavigation:!1},i.steps=[{isCountable:!1,id:"step-1",image:"/modules/Typescript/Builder/OnboardingController/assets/step-1-min.gif",text:"\n                  <p>\n                    ".concat(i.translationsService.translateText("builder_onboarding_step1_content"),"\n                  </p>\n          "),nextButton:{clickAction:i.nextStep.bind(A()(i)),label:i.translationsService.translateTextDefault("lets_get_started","Let's get started")},cancelButton:{clickAction:i.cancelTour.bind(A()(i)),label:i.translationsService.translateTextDefault("notifications_onboarding_remind_me_later","Remind me later")},arrow:!1},{id:"step-2",text:"\n                  <h3>\n                    ".concat(i.translationsService.translateText("builder_onboarding_step2_title"),"\n                  </h3>\n                  <p>\n                    ").concat(i.translationsService.translateText("builder_onboarding_step2_content"),"\n                  </p>\n                "),nextButton:{clickAction:function(){document.querySelector(i.shortTextSelector).click()},label:i.translationsService.translateTextDefault("notifications_onboarding_next_text","Next")},attachTo:{element:i.shortTextSelector,on:"right-start"},highlightClass:"onboarding-short-text__highlight",scrollTo:{behavior:"smooth",block:"center"},advanceOn:{selector:i.shortTextSelector,event:"click"},popperOptions:{modifiers:[{name:"offset",options:{offset:[0,10]}}]},when:{hide:function(){i.showFullScreenOverlay()}}},{id:"step-3",text:"\n                  <h3>\n                    ".concat(i.translationsService.translateText("builder_onboarding_step3_title"),"\n                  </h3>\n                  <p>\n                    ").concat(i.translationsService.translateText("builder_onboarding_step3_content"),"\n                  </p>\n                "),nextButton:{clickAction:i.nextStep.bind(A()(i)),label:i.translationsService.translateTextDefault("notifications_onboarding_next_text","Next")},scrollTo:{behavior:"smooth",block:"center"},arrow:!1,attachTo:{element:'div[data-role="attribute-group"][data-name="label"]',on:"right-start"},popperOptions:{modifiers:[{name:"offset",options:{offset:[0,10]}}]},when:{show:function(){i.removeFullScreenOverlay(),document.querySelector('div[data-property-name="label-visibilityMode"]').style.pointerEvents="none"},hide:function(){document.querySelector('div[data-property-name="label-visibilityMode"]').style.pointerEvents="unset"}},beforeShowPromise:function(){var e;return setTimeout((function(){e()}),1e3),new Promise((function(t){e=t}))}},{id:"step-4",image:"/modules/Typescript/Builder/OnboardingController/assets/step-4-min.gif",text:"\n                  <h3>\n                    ".concat(i.translationsService.translateText("builder_onboarding_step4_title"),"\n                  </h3>\n                  <p>\n                    ").concat(i.translationsService.translateText("builder_onboarding_step4_content"),"\n                  </p>\n                "),nextButton:{clickAction:i.nextStep.bind(A()(i)),label:i.translationsService.translateTextDefault("notifications_onboarding_next_text","Next")},when:{hide:function(){document.querySelector('a[data-role="back-button"]').click(),i.showFullScreenOverlay()}},attachTo:{element:'div[data-role="page"][data-is-last-page="yes"] div[data-role="page-body"] div[data-role="container"]:last-child',on:"left-start"},popperOptions:{modifiers:[{name:"offset",options:{offset:[0,10]}}]}},{id:"step-5",image:"/modules/Typescript/Builder/OnboardingController/assets/step-5-min.gif",text:"\n                  <h3>\n                    ".concat(i.translationsService.translateText("builder_onboarding_step5_title"),"\n                  </h3>\n                  <p>\n                    ").concat(i.translationsService.translateText("builder_onboarding_step5_content"),"\n                  </p>\n                "),arrow:!1,canClickTarget:!1,attachTo:{element:'div[data-role="page-header"] div[data-role="control"][data-type-id="27"]',on:"left-start"},when:{show:function(){document.querySelector('div[data-role="page"]').style.pointerEvents="none",i.removeFullScreenOverlay()},hide:function(){document.querySelector('div[data-role="page"]').style.pointerEvents=""}},highlightClass:"onboarding-header__highlight",nextButton:{clickAction:i.nextStep.bind(A()(i)),label:i.translationsService.translateTextDefault("notifications_onboarding_next_text","Next")},popperOptions:{modifiers:[{name:"offset",options:{offset:[0,10]}}]},beforeShowPromise:function(){var e;return setTimeout((function(){e()}),1e3),new Promise((function(t){e=t}))},scrollToHandler:function(){document.body.scrollTo({top:0,left:0,behavior:"smooth"})}},{id:"step-6",image:"/modules/Typescript/Builder/OnboardingController/assets/step-6-min.gif",text:"\n                  <h3>\n                    ".concat(i.translationsService.translateText("builder_onboarding_step6_title"),"\n                  </h3>\n                  <p>\n                    ").concat(i.translationsService.translateText("builder_onboarding_step6_content"),"\n                  </p>\n                "),nextButton:{clickAction:i.nextStep.bind(A()(i)),label:i.translationsService.translateTextDefault("notifications_onboarding_next_text","Next")},arrow:!1,attachTo:{element:'div[data-role="control"][data-type-id="14"]',on:"right-start"},scrollToHandler:function(e){document.querySelector('#inspector-panel-group div[data-role="vertical-content"]').scrollTo({top:e.offsetTop,left:0})},popperOptions:{modifiers:[{name:"offset",options:{offset:[0,10]}}]}},{id:"step-7",image:"/modules/Typescript/Builder/OnboardingController/assets/step-7-min.gif",text:"\n                  <h3>\n                    ".concat(i.translationsService.translateText("builder_onboarding_step7_title"),"\n                  </h3>\n                  <p>\n                    ").concat(i.translationsService.translateText("builder_onboarding_step7_content"),"\n                  </p>\n                "),nextButton:{clickAction:i.nextStep.bind(A()(i)),label:i.translationsService.translateTextDefault("notifications_onboarding_next_text","Next")},arrow:!1,canClickTarget:!1,attachTo:{element:'div[title="Preview form"]',on:"bottom-end"},scrollTo:!1,popperOptions:{modifiers:[{name:"offset",options:{offset:[0,10]}}]}},{id:"step-8",image:"/modules/Typescript/Builder/OnboardingController/assets/step-8-min.gif",text:"\n                  <h3>\n                    ".concat(i.translationsService.translateText("builder_onboarding_step8_title"),"\n                  </h3>\n                  <p>\n                    ").concat(i.translationsService.translateText("builder_onboarding_step8_content"),"\n                  </p>\n                "),completeButton:{clickAction:i.completeTour.bind(A()(i)),label:i.translationsService.translateTextDefault("complete","Complete")},arrow:!1,attachTo:{element:'button[data-action-key="PublishGetLink"]',on:"bottom-end"},canClickTarget:!1,popperOptions:{modifiers:[{name:"offset",options:{offset:[0,10]}}]}}],i}return l()(n,[{key:"cancelTour",value:function(){this.tour.cancel(),this.cookieService.setSessionCookie(this.cookieTourFinished,!0),this.metricsService.track("builder_onboarding_skipped")}},{key:"nextStep",value:function(){this.tour.next()}},{key:"completeTour",value:function(){this.tour.complete(),this.cookieService.setCookie(this.cookieTourFinished,(new Date).toISOString(),9999),this.metricsService.track("builder_onboarding_completed")}},{key:"onTourStart",value:function(){this.metricsService.track("builder_onboarding_started"),document.querySelector("body").classList.add("onboarding-tour-active")}},{key:"onTourExit",value:function(){document.querySelector("body").classList.remove("onboarding-tour-active")}},{key:"showFullScreenOverlay",value:function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.classList.add("shepherd-modal-overlay-container","shepherd-modal-is-visible"),e.id="custom-overlay-container";var t=window.innerHeight,n=window.innerWidth,i="M".concat(n,",").concat(t,"H0V0H").concat(n,"V").concat(t,"ZM0,0a0,0,0,0,0-0,0V0a0,0,0,0,0,0,0H0a0,0,0,0,0,0-0V0a0,0,0,0,0-0-0Z"),r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttributeNS(null,"d",i),e.appendChild(r),document.body.appendChild(e)}},{key:"removeFullScreenOverlay",value:function(){var e;null===(e=document.querySelector("svg#custom-overlay-container"))||void 0===e||e.remove()}},{key:"componentDidUpdate",value:function(){var e=this,t=window.ed,n=this.cookieService.getCookie(this.cookieTourFinished),i=document.body.hasAttribute("data-mobile-interactions");!t||this.state.isTourStarted||n||i||(this.setState({isTourStarted:!0}),setTimeout((function(){e.tour.start()}),1e3))}},{key:"shouldComponentUpdate",value:function(){return this.featureService.isBuilderOnboardingActive()}},{key:"componentDidMount",value:function(){this.featureService.isBuilderOnboardingActive()&&(this.tour=this.onboardingAppRef.current.getTour())}},{key:"render",value:function(){return this.featureService.isBuilderOnboardingActive()?Ei.a.createElement(gE,{ref:this.onboardingAppRef,steps:this.steps,tourOptions:this.tourOptions,onTourStart:this.onTourStart.bind(this),onTourCancel:this.onTourExit.bind(this),onTourComplete:this.onTourExit.bind(this)}):null}}]),n}(Ei.a.Component),EE=Object(yi.connect)((function(e){return{action:e.action}}))(fE);function yE(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var TE=function(e){u()(n,e);var t=yE(n);function n(e){var i;return o()(this,n),i=t.call(this,e),v()(A()(i),"state",void 0),i.state={hasError:!1},i}return l()(n,[{key:"render",value:function(){return this.state.hasError?null:this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(Ei.a.Component),vE=di()(Vp,{}),OE=di()(TE,{},void 0,di()(EE,{})),bE=function e(t){o()(this,e);var n=Object(Te.c)(),i=lE.getPaywallComponent();tr.a.render(di()(yi.Provider,{store:n},void 0,di()(Qf.Provider,{value:t},void 0,di()(i,{})),vE,OE),document.getElementById("builder-app-container"))};function CE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function IE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CE(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function RE(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}window.BuilderApp=bE;var PE=function(e){u()(n,e);var t=RE(n);function n(){var e;if(o()(this,n),e=t.call(this),v()(A()(e),"engine",void 0),v()(A()(e),"apiRootAddress",void 0),v()(A()(e),"editorCapabilities",void 0),v()(A()(e),"jq",void 0),v()(A()(e),"form",void 0),v()(A()(e),"storage",void 0),v()(A()(e),"undoService",void 0),v()(A()(e),"header",null),v()(A()(e),"onDocumentChangedThrottler",void 0),v()(A()(e),"ui",void 0),v()(A()(e),"commands",void 0),v()(A()(e),"rules",void 0),v()(A()(e),"api",void 0),v()(A()(e),"selection",void 0),v()(A()(e),"mouseManager",void 0),v()(A()(e),"editUserAccessMode",O.n.FULL_EDIT),v()(A()(e),"itemPanelOuterPlaceholder",void 0),v()(A()(e),"fontsManager",void 0),v()(A()(e),"platformDetails",void 0),v()(A()(e),"preloadedExternalThemeProperties",void 0),v()(A()(e),"languages",void 0),v()(A()(e),"mobileDevice",!1),v()(A()(e),"mobileInteractionsEnabled",!1),v()(A()(e),"readonlySubuser",!1),v()(A()(e),"reusableDomainAliases",void 0),v()(A()(e),"uiCSSSelectors",{"undo-button":"#menu_undo","redo-button":"#menu_redo","themes-button":"#hide-themes-options","selection-delete-button":"","view-form-button":"","show-grid-checkbox":"","form-name-input":"#myformnameinput","saving-container":"","editor-settings-panel":"#editor-settings-panel","show-controls-list":"#show_controls_list","mobile-item-editor-toolbar":"#mobile-item-editor-toolbar"}),v()(A()(e),"saveToServer",!1),v()(A()(e),"savingEnabled",!0),v()(A()(e),"hasSaveRequests",!1),v()(A()(e),"sessionId",void 0),v()(A()(e),"i18n",void 0),v()(A()(e),"formTranslationsService",void 0),v()(A()(e),"lang",void 0),v()(A()(e),"userId",void 0),v()(A()(e),"updateFormErrorStateNotificationThrottle",void 0),v()(A()(e),"formSettings",void 0),v()(A()(e),"initialSerializedForm",void 0),v()(A()(e),"resources",{}),v()(A()(e),"showDowngradeNotification",!0),v()(A()(e),"isFirstTime",!1),v()(A()(e),"shouldSeeMigrationToOldEditorNotification",!1),v()(A()(e),"shouldSeeHipaaSecurityPopup",!1),v()(A()(e),"onEditorSettingsListChangedThrottle",void 0),v()(A()(e),"geolocationUserCountryCode",void 0),v()(A()(e),"wixAuthorizedRequestDetails",void 0),v()(A()(e),"themeStrategy",O.nb.INTERNAL),v()(A()(e),"editorSettingsPanel",void 0),v()(A()(e),"editorPanelGroup",void 0),v()(A()(e),"openInspectorOnInsert",!1),v()(A()(e),"translationsDropdownVisibleOnForm",!1),v()(A()(e),"isFFTForm",!1),v()(A()(e),"oAuth",void 0),v()(A()(e),"workflowsUsersList",void 0),v()(A()(e),"userFeatures",null),v()(A()(e),"popupNotifications",null),v()(A()(e),"mobileInteractionsDisabled",!1),v()(A()(e),"defaultUserPreferences",void 0),v()(A()(e),"platformMetricsManager",void 0),v()(A()(e),"userPlanName",void 0),v()(A()(e),"dropdownsWithForms",!1),v()(A()(e),"defaultNotificationsPreferences",void 0),v()(A()(e),"controlsThatHaveRepeatablePathsAddedToPrefillValue",[]),v()(A()(e),"userDetails",void 0),v()(A()(e),"isRealtimeSummaryOn",void 0),v()(A()(e),"selectedCurrencyId",ge.a.DEFAULT_CURRENCY_ID),v()(A()(e),"summarySettingsCache",{}),v()(A()(e),"viewManager",void 0),v()(A()(e),"URLHandler",void 0),v()(A()(e),"editorPanelConfig",void 0),v()(A()(e),"userService",void 0),v()(A()(e),"customerEventService",void 0),e.rules=window.RulesV3.getInstance(),!e.rules)throw new Error("Cannot load RulesV3 module!");if(e.URLHandler=gi.a,!window.EditorPanelConfig)throw new Error("Dependency not found: EditorPanelConfig");return e.editorPanelConfig=window.EditorPanelConfig,e.userService=Xt.a.getInstance(),new bE(e.userService),e.viewManager=new sc,e.customerEventService=ks.a.getInstance(),e}return l()(n,[{key:"navigate",value:function(e){var t=Object(ve.j)(e);Object(Te.a)()(t)}},{key:"setPublishTab",value:function(e){var t=Object(ve.r)(e);Object(Te.a)()(t)}},{key:"init",value:function(){var e,t=this;this.mobileDevice=""===x.a.meetsRequirements("* * mobile * *"),this.initPlatformBodyAttributes(),this.jq=jQuery.noConflict(),this.api=new Hr.a(this.jq,this.apiRootAddress),this.engine=new Sp(this,this.jq,this.form,this.editorCapabilities,this.resources),mc.a.createInstance(this.engine),mc.a.addSalvageHelpers(),this.formTranslationsService=new Pu(this.engine.getDocument()),this.editorPanelGroup=new window.EditorPanelGroup(document.getElementById("inspector-panel-group")),this.viewManager.setLoader(this),this.viewManager.setPanelGroup(this.editorPanelGroup),this.i18n=new Kc(this.jq,this.api,this.lang,this.engine.getResourceManager()),L.a.withI18n(this.i18n),L.a.withResourceManager(this.engine.getResourceManager()),this.fontsManager=new Fd(this.engine.getResourceManager(),this.jq),this.i18n.on("load",(function(){t.engine.getDocument().updateI18n(),console.warn("LOADED I18n"),t.displayTranslatedNotifications(),t.readonlySubuser&&t.commands.displayReadonlySubuserCannotSave()})),this.i18n.get(),this.storage=new vd(this.engine),e=this.header?new Lu(this.header):new Su(this.getUICssSelector("undo-button"),this.getUICssSelector("redo-button")),this.undoService=new wu(this.engine,e),this.ui=new St(this.engine),Gu.a.getInstance().withUI(this.ui).withResourceManager(this.engine.getResourceManager()),this.oAuth=new hc(this),this.commands=new Lp.a(this.engine,this),this.selection=new Dd(this.engine.getDocument()),this.mouseManager=new Ed(this.jq,this.form,this.engine.getDocument()),this.editorPanelConfig.configurePanels(this.editorPanelGroup,this,this.jq,this.engine.getDocument()),this.updateFormErrorStateNotificationThrottle=ie.a.create((function(){t.commands.updateFormErrorStateNotification()}),100),this.onEditorSettingsListChangedThrottle=ie.a.create((function(){t.commands.updateEditorSettingsPanel(!1),t.commands.refreshPaymentsAvailabilityStatus(),t.editorPanelConfig.getPublishPanel()&&t.editorPanelConfig.getPublishPanel().withDependency("formName",t.engine.getDocument().getProperty("name.value")).withDependency("headerInstance",t.header).withDependency("undoServiceInstance",t.undoService)}),200),this.initEventingSystem(this.saveToServer?1e3:10),void 0===this.initialSerializedForm?this.storage.load():(this.engine.loadFromString(JSON.stringify(this.initialSerializedForm)),this.initialSerializedForm=void 0),this.shouldSeeMigrationToOldEditorNotification&&this.commands.displayMigrationNotification(),this.commands.displayNotificationForFinalizationPricesAndPaymentProviderIfNeeded(),this.commands.displayNotificationForFirstValueAndProcessorIfNeeded(),this.commands.notifyTrackerWithUserTimeSpentOnEditor(this.isFirstTime),this.setFormEditorInWixAttribute(),this.commands.makePreviewOverlayCoverEditorElementsOnWix(),this.engine.getDocument().on("editor-settings-changed",(function(){t.onEditorSettingsListChangedThrottle()})),this.on("unserialize",(function(){t.onEditorSettingsListChangedThrottle()})),this.loadStartupPanel(),this.onEditorSettingsListChangedThrottle(),this.updateClickOnPublishButtonForWeebly(),this.formTranslationsService.on("translations-list-changed",(function(){console.warn("TRANSLATIONS LIST CHANGED HOOK!");var e=t.getFormTranslationsService().getLanguages();t.languages=[];for(var n=0,i=e.length;n<i;n++)e[n].getCode2()?t.languages.push(e[n].getCode2()):t.languages.push(e[n].getCode3());t.withTranslationsDropdownVisibleOnForm(t.formTranslationsService.enumerateAvailableFormLanguages().length>1),t.isTranslationsDropdownVisibleOnForm()?(t.form.setAttribute("data-has-language-selector",""),t.engine.getDocument().getPageByIndex(0).renderHeader()):(t.form.removeAttribute("data-has-language-selector"),t.engine.getDocument().getPageByIndex(0).renderHeader())})),this.trigger("load"),this.addPaymentSummaryPageContainerIfNeeded(),this.triggerPaywallForPaidTemplateFromFFT(),this.initializeBlankDocumentFromOCRSerializedData();var n=this.engine.getDocument().getForm().getEditorSettingByTypeId(K.a.PAYMENT_PRODUCTS_EDITOR_SETTING);return n&&n.hasProperty("currencyId")&&(this.selectedCurrencyId=n.getProperty("currencyId")),this.renderHeaderOnAllPages(),this.engine.getDocument().on("editor-save-form-finished",(function(e){var n=Object(ve.x)(e);Object(Te.a)()(n),t.customerEventService.triggerEvent(ks.b.REFRESH_ACCOUNT_STATUS)})),document.getElementById("inspector-panel-group").removeAttribute("data-is-loading"),this.buildNewFormBasedOfControls(),this}},{key:"buildNewFormBasedOfControls",value:function(){var e=this,t=document.createElement("div"),n=sessionStorage.getItem("wizardControls"),i=sessionStorage.getItem("wizardTheme");n&&(this.commands.createNewFormWithListOfControls(JSON.parse(n)),sessionStorage.removeItem("wizardControls"),sessionStorage.getItem("wizardTheme")||(t.style.display="none",document.querySelector("#form").style.opacity="1",document.querySelector('[data-role="site-header-container"]').style.opacity="1",document.querySelector("#inspector-panel-group").style.opacity="1")),i&&this.commands.loadAvailableThemes().then((function(){e.commands.setThemeById(JSON.parse(i)),sessionStorage.removeItem("wizardTheme"),t.style.display="none",document.querySelector("#form").style.opacity="1",document.querySelector('[data-role="site-header-container"]').style.opacity="1",document.querySelector("#inspector-panel-group").style.opacity="1"})),n||i||(t.style.display="none",document.querySelector("#form").style.opacity="1",document.querySelector('[data-role="site-header-container"]').style.opacity="1",document.querySelector("#inspector-panel-group").style.opacity="1")}},{key:"getPublishPanelByTabId",value:function(e){var t=O.ab.LINK;switch(e){case O.cb.EMBED_JAVASCRIPT:return O.ab.EMBED_JAVASCRIPT;case O.cb.PLATFORM_BIG_COMMERCE:return this.getPlatformDetails().isBigCommerce?"bigcommerce-embed-in-page-publish-method":O.ab.PLATFORM_BIG_COMMERCE;case O.cb.PLATFORM_BLOGGER:return O.ab.PLATFORM_BLOGGER;case O.cb.PLATFORM_FACEBOOK:return O.ab.PLATFORM_FACEBOOK;case O.cb.PLATFORM_GOOGLE_SITES:return O.ab.PLATFORM_GOOGLE_SITES;case O.cb.PLATFORM_JOOMLA:return O.ab.PLATFORM_JOOMLA;case O.cb.PLATFORM_SALESFORCE:return O.ab.PLATFORM_SALESFORCE;case O.cb.PLATFORM_SALESFORCE_COMMUNITY:return O.ab.PLATFORM_SALESFORCE_COMMUNITY;case O.cb.PLATFORM_SHOPIFY:return this.getPlatformDetails().isShopify?"shopify-embed-in-page-publish-method":O.ab.PLATFORM_SHOPIFY;case O.cb.PLATFORM_TWITTER:return O.ab.PLATFORM_TWITTER;case O.cb.PLATFORM_UNBOUNCE:return O.ab.PLATFORM_UNBOUNCE;case O.cb.PLATFORM_WORDPRESS:return O.ab.PLATFORM_WORDPRESS;case O.cb.PLATFORM_WEEBLY:return O.ab.PLATFORM_WEEBLY;case O.cb.PUBLISH_PLATFORMS:return O.ab.PUBLISH_PLATFORMS}return t}},{key:"triggerPaywallForPaidTemplateFromFFT",value:function(){var e=this;if(this.isFFTForm){var t=this.userService.getLimitForFeature("create_form_field"),n=this.userService.getControlTypesExcludedFromPlanCounting(),i=Object(Te.b)(Oe.i),r=Object(xr.a)(i,(function(e){return!n.includes(e.type)})).length,a=null;Object(Te.b)(Oe.m)&&!this.userService.canEnableFormPayments()?a=it.k.PAYMENTS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN:r>t&&(a=it.k.CREATE_NEW_FORM_NOT_SUPPORTED_IN_CURRENT_USER_PLAN),a&&setTimeout((function(){e.commands.triggerPaywall(a)}),5e3)}}},{key:"displayTranslatedNotifications",value:function(){this.commands.displayPostMigrationNotification()}},{key:"withPlatformDetails",value:function(e){return this.platformDetails=e,this}},{key:"getPlatformDetails",value:function(){return this.platformDetails}},{key:"withAPIRootAddress",value:function(e){return this.apiRootAddress=e,this.userService.setApiRoot(e),this}},{key:"withEditorCapabilities",value:function(e){return this.editorCapabilities=e,this}},{key:"withFormId",value:function(e){var t=Object(ve.p)(e);return Object(Te.a)()(t),this}},{key:"withFormDOMNode",value:function(e){return this.form=e,this}},{key:"withLanguageCode",value:function(e){return this.lang=e,this}},{key:"withUserId",value:function(e){return this.userId=e,this}},{key:"withCustomUICSSSelectors",value:function(e){return this.uiCSSSelectors=e||this.uiCSSSelectors,this}},{key:"withInitialSerializedForm",value:function(e){var t=Object(ve.h)(e);return Object(Te.a)()(t),this.initialSerializedForm=e,this.saveToServer=void 0!==e,this}},{key:"withIsFirstTime",value:function(e){return this.isFirstTime=e,this}},{key:"withIsFFTForm",value:function(e){return this.isFFTForm=e,this}},{key:"withUserPlanName",value:function(e){return this.userPlanName=e,this}},{key:"withHeader",value:function(e){return this.header=e,this}},{key:"getHeader",value:function(){return this.header}},{key:"withMigrationToOldEditorNotification",value:function(e){return this.shouldSeeMigrationToOldEditorNotification=e,this}},{key:"getSessionId",value:function(){return this.sessionId||null}},{key:"withSessionId",value:function(e){return this.sessionId=e,this}},{key:"withWixAuthorizedRequestDetails",value:function(e){return this.wixAuthorizedRequestDetails=e||null,this}},{key:"getWixAuthorizedRequestDetails",value:function(){return JSON.parse(JSON.stringify(this.wixAuthorizedRequestDetails||null))}},{key:"getApiRootAddress",value:function(){return this.apiRootAddress}},{key:"getEditorCapabilities",value:function(){return this.editorCapabilities}},{key:"getFormId",value:function(){return Object(Te.b)(Oe.j)}},{key:"getEngine",value:function(){return this.engine}},{key:"getJQuery",value:function(){return this.jq}},{key:"getUndoService",value:function(){return this.undoService}},{key:"withOpenInspectorOnInsert",value:function(e){return this.openInspectorOnInsert=e,this}},{key:"getOpenInspectorOnInsert",value:function(){return this.openInspectorOnInsert}},{key:"getUICssSelector",value:function(e){return"string"!==typeof this.uiCSSSelectors[e]?(console.warn("EDITOR: feature-request not implemented on this page, UI component: ".concat(JSON.stringify(e))),""):this.uiCSSSelectors[e]}},{key:"initEventingSystem",value:function(e){!function(t,i,r,a,o){var s=window.innerWidth;window.addEventListener("resize",Object(re.a)((function(){t.onWindowResized(),s!==window.innerWidth&&t.editorPanelGroup.setVisible(!1),s=window.innerWidth}),500),{capture:!0,passive:!0}),t.onWindowResized(),t.openEditorPanelGroupWhenStartupPanelIsPresent(),t.on("unserialize",(function(){t.commands.executeFormPostUnserializationActions()})),t.itemPanelOuterPlaceholder=window.document.getElementById("item"),t.onDocumentChangedThrottler=ie.a.create((function(){t.saveDocumentInImmediateMode()}),e),r.on("change",(function(){t.onDocumentChangedThrottler()})),o.on("change",(function(){t.onDocumentChangedThrottler(),o.recompute()})),o.on("theme-changed",(function(){t.onDocumentChangedThrottler()})),o.on("repaint-only",(function(){o.recompute()})),o.on("theme-font-changed",(function(e){t.commands.updateThemeThumbnailFont(e)})),t.undoService.on("change",(function(){t.saveDocumentInImmediateMode(),t.commands.reloadVisiblePanel()}));var l=t.getUICssSelector("undo-button"),c=t.getUICssSelector("view-form-button"),u=t.getUICssSelector("themes-button"),d=t.getUICssSelector("selection-delete-button"),p=t.getUICssSelector("show-grid-checkbox"),h=t.getUICssSelector("form-name-input"),_=t.getUICssSelector("editor-settings-panel"),g=t.getUICssSelector("show-controls-list"),m=t.getUICssSelector("mobile-item-editor-toolbar");a(l).on("click",(function(){t.execCommand("undo")})),a(c).on("click",(function(){t.execCommand("view-form")})),a(u).on("click",(function(){var e;t.mobileInteractionsEnabled?!t.editorPanelGroup.isVisible()||(e=t.editorPanelGroup.getActivePanel())&&"options"!==e.getId()?(t.execCommand("set-active-panel","options"),t.editorPanelGroup.setVisible(!0)):t.editorPanelGroup.setVisible(!1):t.execCommand("set-active-panel","options")})),a(g).on("click",(function(){var e;t.mobileInteractionsEnabled?!t.editorPanelGroup.isVisible()||(e=t.editorPanelGroup.getActivePanel())&&"editor"!==e.getId()?(t.execCommand("set-active-panel","editor"),t.editorPanelGroup.setVisible(!0)):t.editorPanelGroup.setVisible(!1):t.execCommand("set-active-panel","editor")})),a(m).on("click","button[data-action]",(function(){var e=this.getAttribute("data-target-setting-id"),n=this.getAttribute("data-action"),i=this.getAttribute("data-target-element-hash");if(e){var r=t.engine.getDocument().getEditorSettingByTypeId(e);return t.editorPanelGroup.isVisible()?void t.editorPanelGroup.setVisible(!1):(t.commands.loadEditorSettingIntoPanel(r),t.editorPanelGroup.setActivePanel("item"),void t.editorPanelGroup.setVisible(!0))}if(n&&i){var a=t.engine.getDocument().getElementByHash(i);a&&t.commands.executeElementCommand(a,n)}})),a(_).each((function(){t.editorSettingsPanel=this})),a(_).on("click","> [data-role=setting][data-type-id]",(function(){var e=this.getAttribute("data-type-id");t.selectSettingInPanel(_,this,a),e&&t.execCommand("edit-setting",e)})),t.bindHeaderEvents(),a("#inspector-panel-group").on("click","[data-role=panel-switcher]",(function(e){if("setting_payment_summary"===t.editorPanelGroup.getActivePanel().getRootNode().getAttribute("data-target-setting-id")){var n=t.engine.getDocument().getNumberOfPagesIncludingPaymentSummary();t.engine.getDocument().getPageByIndex(n-1).unselectPaymentSummaryContainer()}var i=e.target||e.srcElement,r=a(this).attr("data-target-panel")||null;if(a(i).is("[data-role=back-button], [data-role=back-text]"))if(t.mobileInteractionsEnabled)t.editorPanelGroup.setVisible(!1);else{t.URLHandler.setNewUrl(O.d.EDITOR);var o=Object(ve.j)(O.d.EDITOR);Object(Te.a)()(o),t.execCommand("set-active-panel",r)}})),a(h).val(r.getProperty("name.value")).on("input",(function(){""!==this.value&&r.setProperty("name.value",this.value)})),a(d).on("click",(function(){t.execCommand("delete-selection")})),t.engine.getTheme().on("theme-changed",(function(){t.commands.onThemeIdChanged(t.engine.getTheme().getCurrentThemeId())})),t.engine.getTheme().on("enter-preview-mode",(function(){t.commands.onThemeEnteringPreviewMode()})),a(t.form).on("click",(function(e){a(_).find(e.target).length<1&&t.clearSelectionInSettingsPanel(_,a)})).on("click","[data-hash]",(function(e){var n=a(e.target).parents("[data-type=payment-summary]").length>0,i=a(this).attr("data-hash"),o=r.getElementByHash(i);if(o&&o.isSelectable()){if(e.ctrlKey||e.metaKey)t.engine.getDocument().setActiveElement(null),t.selection.has(o)?t.selection.remove(o):t.selection.add(o);else if(n){var s=t.engine.getDocument().getActiveElement();s&&(s.getRootNode().removeAttribute("data-is-active"),s.onFocusLeave(),t.engine.getDocument().trigger("blur",s))}else{t.selection.set(o),t.engine.getDocument().setActiveElement(o),o===r.getHeader()&&r.getHeader().openEditableHTMLDialog();var l=t.engine.getDocument().getNumberOfPagesIncludingPaymentSummary();t.engine.getDocument().getPageByIndex(l-1).unselectPaymentSummaryContainer()}e.stopPropagation()}})).on("click",(function(e){t.form!==e.srcElement&&t.form!==e.target||t.selection.clear()})).on("click","> div[data-role=page-break] > div[data-role=merge-pages] button[data-role=merge-pages-button]",(function(e){var n=a(this).closest("[data-role=page-break]").attr("data-page-index");e.preventDefault(),e.stopPropagation(),n&&t.commands.mergePageByIndexWithNextPage(~~n)})).on("click","[data-role=page] > [data-role=page-header] > [data-role=control][data-type=realtime-calculations]",(function(e){e.stopPropagation(),t.execCommand("edit-setting","setting_payment_summary")})),t.selection.on("add",(function(e){e.onEnterSelection()})),t.selection.on("remove",(function(e){e.onLeaveSelection()})),t.selection.on("change",(function(){t.commands.onSelectionChanged()})),a(p).on("click",(function(){t.commands.setGridVisibility(this.checked)})),a("#notifications-area").on("click","a[data-role=downgrade-editor]",(function(){t.commands.downgradeToOldEditor(!1)})).on("click","a[data-role=downgrade-editor-with-backup]",(function(){t.commands.downgradeToOldEditor(!0)})).on("click","a[data-role=disable-downgrade-notification], div.close",(function(){t.commands.disableMigrationNotification()})),t.mouseManager.on("resize-start",(function(){t.savingEnabled=!1})),t.mouseManager.on("drag-start",(function(){t.savingEnabled=!1})),t.mouseManager.on("label-resize-start",(function(){t.savingEnabled=!1})),t.mouseManager.on("resize-end",(function(){t.savingEnabled=!0,t.hasSaveRequests&&t.saveDocumentInImmediateMode()})),t.mouseManager.on("drag-end",(function(){t.savingEnabled=!0,t.hasSaveRequests&&t.saveDocumentInImmediateMode()})),t.mouseManager.on("label-resize-end",(function(){t.savingEnabled=!0,t.hasSaveRequests&&t.saveDocumentInImmediateMode()})),Nt.a.addHelper({name:"LABEL_CONVERTER_TO_WORDS",func:function(e){return String(e||"").replace(/([a-z])([A-Z])/g,"$1 $2")}}),Nt.a.addHelper({name:"json",func:function(e){return JSON.stringify(e)}}),t.commands.loadEditorControlsIntoPanel(),t.commands.setActiveEditorPanel("editor"),t.getEngine().getDocument().getForm().on("errors-changed",(function(e){t.notifyInspectorPanelAboutErrorChanges(e),t.updateFormErrorStateNotificationThrottle(),P()(e,Wn.a)&&t.commands.updateSettingErrorStateInEditorSettingsPanel(e)})),t.undoService.trigger("resume"),t.undoService.trigger("save"),t.shouldSeeHipaaSecurityPopup&&t.commands.showHipaaDialog(),t.on("unserialize",(function(){t.commands.repopulateCustomCSSPanelWithActualValues()})),t.editorPanelGroup.on("visibility-state-changed",(function(){setTimeout((function(){t.engine.onResize()}),300)})).on("panel-changed",(function(e,n){e&&"item"===e.getId()?t.commands.updateMobileItemEditorPanel():a("#mobile-item-editor-toolbar").text(""),e&&"publish-form"===e.getId()&&n&&t.trackPublishPanelViews(n)})),t.on("load",(function(){t.renderHeaderOnAllPages(),t.renderPaymentSummary()})),t.on("payments_summary_realtime_changed",(function(){t.renderHeaderOnAllPages(),t.renderPaymentSummary()})),t.on("payments_currency_change",(function(e){t.setSelectedCurrencyId(e.id),t.renderHeaderOnAllPages(),t.renderPaymentSummary()})),t.on("products_dialog_on_save",(function(){t.renderHeaderOnAllPages(),t.renderPaymentSummary()})),t.on("products_discount_tax_change",(function(){t.renderPaymentSummary()})),t.on("payments_summary_show_after_submit",(function(){t.execCommand("append-element",b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE),t.engine.getDocument().repaginateInImmediateMode(),t.renderHeaderOnAllPages(),t.renderPaymentSummary()})),t.on("payments_summary_show_on_form",(function(){t.execCommand("remove-payment-summary-page"),t.engine.getDocument().repaginateInImmediateMode(),t.renderHeaderOnAllPages(),t.renderPaymentSummary()})),t.on("payments_status_changed",(function(){t.removePaymentSummaryPageIfNeeded(),t.renderHeaderOnAllPages(),t.renderPaymentSummary(),t.commands.updateEditorSettingsPanel(!1)})),t.on("inserted_element",(function(){t.renderPaymentSummary()})),t.on("deleted_element",(function(){t.renderPaymentSummary()})),t.on("page_created",(function(){t.renderFooterOnAllPages()})),t.on("payments_products_price_change",(function(){t.renderHeaderOnAllPages(),t.renderPaymentSummary()})),t.on("control_deleted",(function(){t.renderHeaderOnAllPages()})),t.on("payments_column_visibility_changed",(function(e){t.changePaymentSummaryColumnVisibility(e)})),t.on("payments_column_name_changed",(function(e,i){switch(e){case O.u.INPUT:n.changePaymentSummaryColumnNameOnInput(i);break;case O.u.BLUR:t.changePaymentSummaryColumnNameOnBlur(i)}})),t.on("payments_use_sandbox_changed",(function(){return t.updateStripeConnectedAccountPlaceholder()}))}(this,this.engine,this.engine.getDocument(),this.getJQuery(),this.engine.getTheme())}},{key:"updateControlDisabledStateByPropertyName",value:function(e,t,n){var i=this.jq("[data-property-name=".concat(t,"]")),r=this.jq(e).is(":checked"),a=i.find('input[type="checkbox"]');r?(a.attr("disabled",!0),i.css("opacity",.3),i.find("input[type=checkbox],span.decorator").attr("title",n).css("cursor","default")):(a.removeAttr("disabled"),i.css("opacity",1),i.find("input[type=checkbox],span.decorator").attr("title","").css("cursor","pointer"))}},{key:"saveDocumentInImmediateMode",value:function(){this.savingEnabled&&!this.readonlySubuser?(console.log("save..."),this.hasSaveRequests=!1,this.saveToServer?this.commands.saveForm():this.storage.save()):this.hasSaveRequests=!0}},{key:"getUI",value:function(){return this.ui}},{key:"getAPI",value:function(){return this.api}},{key:"getRules",value:function(){return this.rules}},{key:"getCommandDispatcher",value:function(){return this.commands}},{key:"getSelection",value:function(){return this.selection}},{key:"execCommand",value:function(e){for(var t=this,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];switch(e){case"view-form":this.commands.viewForm();break;case"set-active-panel":var a=String(i[0]||"")||"editor",o=i[1]?String(i[1]):null,s=this.undoService.canRedo(),l=this.undoService.canUndo(),c=a&&"notifications"===this.editorPanelGroup.getActivePanel().getId()&&!this.editorPanelGroup.getActivePanel().getUserConfirmationForDiscardingUnsavedChanges();if(c)return;if(this.commands.setActiveEditorPanel(a),"editor"!==a&&"options"!==a&&"item"!==a&&(s=!1,l=!1),this.header.setButtonInteractionState(Hl.REDO,s),this.header.setButtonInteractionState(Hl.UNDO,l),o){var u=this.editorPanelGroup.getPanelById("publish-form");u.openElementById(o)}break;case"filter-settings":this.commands.filterSettingsProperties(String(i[0]||""));break;case"filter-controls":this.commands.filterControlsList(String(i[0]||""));break;case"form-name-changed":this.commands.onFormNameChanged();break;case"append-element":this.commands.appendElement(~~i[0]);break;case"repaint-footer":this.commands.repaintFooterOnAllPages();break;case"edit-html":this.commands.createHTMLEditorDialog(i[0],i[1],i[2],i[3]);break;case"delete-selection":this.commands.deleteSelection();break;case"resize-element":this.commands.resizeElement(i[0],i[1],i[2]);break;case"resize-label-by-delta":this.commands.resizeLabelByDelta(i[0],i[1],i[2]);break;case"drop":this.commands.executeDropOperation(i[0],i[1],i[2],!!i[3],i[4]);break;case"select-element":this.selection.set(i[0]||null),this.engine.getDocument().setActiveElement(i[0]||null);break;case"select-rectangle":this.commands.selectElementsByMousePoints(i[0],i[1],!!i[2]);break;case"select-rectangle-while-dragging":this.commands.interactiveDisplaySelectionFeedbackByMousePoints(i[0],i[1]);break;case"element-command":this.commands.executeElementCommand(i[0],i[1]);break;case"selection-command":this.commands.executeSelectionCommand(i[0]);break;case"show-validator-upgrade-dialog":this.commands.triggerFeatureModal(Zt.a.FIELD_VALIDATION_CONTROL_OPTION);break;case"track-event":this.commands.trackEvent(i[0],i[1]||{},i[2]||void 0);break;case"save-external-theme":this.commands.saveExternalFormTheme(i[0]||void 0);break;case"save-custom-css-text":this.commands.setCustomCssText(i[0]);break;case"save-custom-css-url":this.commands.setCustomCssUrl(i[0]);break;case"update-custom-css-errors":this.commands.updateCustomCSSErrorDOMNodes(i[0],i[1]);break;case"add-setting":this.commands.addSetting(i[0]);break;case"edit-setting":this.engine.getLoader().getSelection().clear(),ie.a.create((function(){t.commands.loadEditorSettingIntoPanel(t.engine.getDocument().getEditorSettingByTypeId(i[0]))}),10)();break;case"editor-setting-command":this.commands.executeEditorSettingCommand(i[0],i[1]);break;case"reset-used-choices":this.commands.resetUsedChoicesOnElement(i[0]);break;case"open-products-dialog":this.commands.trackEvent("product_dialog_open",{},50),ge.a.openFromExternalSource();break;case"scroll-inspector-to-payments":this.commands.scrollToPaymentsInInspector();break;case"add-payment-summary-listeners":this.commands.addPaymentSummaryListener(i[0]);break;case"remove-payment-summary-page":this.commands.removePaymentSummaryAfterSubmit();break;default:console.warn("EditorLoader.execCommand(".concat(JSON.stringify(e),"): command not implemented"))}}},{key:"getLoaderDependency",value:function(e){switch(e){case O.M.USER_INTERFACE:return this.ui;case O.M.SESSION_ID:return this.getSessionId();case O.M.CURRENT_EDITABLE_ELEMENT:return this.getCurrentEditableElement();case O.M.FORM_SETTINGS:return this.getFormSettings();case O.M.SHOW_DOWNGRADE_NOTIFICATION:return this.showDowngradeNotification;case O.M.UNDO_SERVICE:return this.undoService;case O.M.FONTS_MANAGER:return this.fontsManager;case O.M.GEOLOCATION_USER_COUNTRY_CODE:return this.geolocationUserCountryCode;case O.M.WIX_AUTHORIZED_REQUEST_DETAILS:return this.getWixAuthorizedRequestDetails();case O.M.THEME_STRATEGY:return this.getThemeStrategy();case O.M.EXTERNAL_THEME_INITIAL_PROPERTIES:return this.getPreloadedExternalThemeProperties();case O.M.EDITOR_SETTINGS_PANEL:return this.editorSettingsPanel||null;case O.M.IS_HIPAA_FORM:return this.isHipaaForm();case O.M.TRANSLATIONS_LANGUAGE_CODES:return this.translationsDropdownVisibleOnForm?this.getFormAvailableLanguages():null;case O.M.EDITOR_HEADER:return this.header;case O.M.WORKFLOWS_USERS_LIST:return this.workflowsUsersList||null;case O.M.EDITOR_PLATFORM_DETAILS:return this.platformDetails;case O.M.USER_FEATURES:return this.userFeatures||null;case O.M.POPUP_NOTIFICATIONS:return this.popupNotifications||null;case O.M.DISABLED_MOBILE_INTERACTION:return this.mobileInteractionsDisabled;case O.M.DEFAULT_USER_PREFERENCES:return this.defaultUserPreferences||null;case O.M.USER_PLAN_NAME:return this.userPlanName;case O.M.DEFAULT_NOTIFICATIONS_PREFERENCES:return this.defaultNotificationsPreferences||null;case O.M.USER_DETAILS:return this.userDetails||null;case O.M.SHOW_REALTIME_CALCULATIONS:return this.showRealtimeCalculations();case O.M.DETAILED_INVOICE_OPTIONS:return this.getDetailedInvoiceOptions();case O.M.LAST_CALCULATION_HTML_MARKUP:return this.commands.getLastCalculationHTMLMarkup();case O.M.SHOULD_SHOW_PAYMENT_SUMMARY:return this.checkFormHasPaymentProcessor()&&this.checkFormHasFormulasOrProductsOrFixedFees();case O.M.HAS_ENABLED_PAYMENT_PROCESSORS:return this.checkFormHasPaymentProcessor();case O.M.HAS_CALCULATE_BUTTON:var t=this.getLoaderDependency(O.M.DETAILED_INVOICE_OPTIONS),n=this.getLoaderDependency(O.M.SHOW_REALTIME_CALCULATIONS);return this.getLoaderDependency(O.M.SHOULD_SHOW_PAYMENT_SUMMARY)&&!n&&t&&t.showPaymentsSummaryBelowForm;default:return null}}},{key:"getI18n",value:function(){return this.i18n}},{key:"getFormTranslationsService",value:function(){return this.formTranslationsService||null}},{key:"getUserId",value:function(){return this.userId}},{key:"getLoaderType",value:function(){return O.B.EDIT}},{key:"withEditUserAccessMode",value:function(e){return this.editUserAccessMode=e,this}},{key:"getEditUserAccessMode",value:function(){return this.editUserAccessMode}},{key:"withReadonlySubuser",value:function(e){return this.readonlySubuser=e,this}},{key:"getReadonlySubuser",value:function(){return this.readonlySubuser}},{key:"getCurrentEditableElement",value:function(){var e=this.itemPanelOuterPlaceholder.getAttribute("data-target-element");if(e)return this.engine.getDocument().getElementByHash(e);var t=this.itemPanelOuterPlaceholder.getAttribute("data-target-setting-id");return t?this.engine.getDocument().getEditorSettingByTypeId(t):void 0}},{key:"notifyInspectorPanelAboutErrorChanges",value:function(e){e&&e===this.getCurrentEditableElement()&&this.commands.updateElementErrorsInInspectorPanel(e)}},{key:"withFormSettings",value:function(e){return this.formSettings=IE({},e,{publishSettings:IE({},null===e||void 0===e?void 0:e.publishSettings,{baseDomain:S.a.computeFormPublishDomain(),formPrefix:S.a.computeFormPrefix()})}),this.setApprovalToStore(e.approval),this}},{key:"setApprovalToStore",value:function(e){var t=Object(ve.u)(e);Object(Te.a)()(t)}},{key:"getFormSettings",value:function(){return this.formSettings}},{key:"withResource",value:function(e,t){return e&&"string"===typeof e&&(this.resources[e]=atob(t)),this}},{key:"withShowDowngradeNotification",value:function(e){return this.showDowngradeNotification=!!e,this}},{key:"setFormEditorInWixAttribute",value:function(){!function(e){window.location.host&&"wix.123formbuilder.com"===window.location.host?e("body").attr("data-form-editor-on-wix","1"):e("body").attr("data-form-editor-on-wix","0")}(this.getJQuery())}},{key:"getThemeStrategy",value:function(){return this.themeStrategy}},{key:"withThemeStrategy",value:function(e){return this.themeStrategy=e,this}},{key:"getPreloadedExternalThemeProperties",value:function(){return this.preloadedExternalThemeProperties}},{key:"withPreloadedExternalThemeProperties",value:function(e){return this.preloadedExternalThemeProperties=e||null,this}},{key:"withFormAvailableLanguages",value:function(e){return this.languages=e,this}},{key:"getFormAvailableLanguages",value:function(){return this.languages}},{key:"getShouldSeeHipaaSecurityPopup",value:function(){return this.shouldSeeHipaaSecurityPopup}},{key:"withShouldSeeHipaaSecurityPopup",value:function(e){return this.shouldSeeHipaaSecurityPopup=e,this}},{key:"withMobileInteractionsDisabled",value:function(e){return this.mobileInteractionsDisabled=e,this}},{key:"getGeolocationUserCountryCode",value:function(){return this.geolocationUserCountryCode}},{key:"withGeolocationUserCountryCode",value:function(e){return this.geolocationUserCountryCode=e||null,this}},{key:"isUserPreventedFromSelectingBothHiddenAndRequiredSettings",value:function(e,t,n,i,r){var a=n(e).attr("data-target-element"),o=i.getElementByHash(a),s=n(r).closest("[data-property-name]").attr("data-property-name");if("options-hidden"===s){if(o.hasProperty("options.required")&&!0===o.getProperty("options.required"))return t.preventDefault(),!0;this.updateControlDisabledStateByPropertyName(r,"options-required","Required option isn't compatible with the field property Hidden.")}if("options-required"===s){if(o.hasProperty("options.hidden")&&!0===o.getProperty("options.hidden"))return t.preventDefault(),!0;this.updateControlDisabledStateByPropertyName(r,"options-hidden","Hidden option isn't compatible with the field property Required.")}return"options-isNumberOfTimesAnOptionCanBeChosen"===s&&!this.userService.canLimitChoices()&&(this.commands.triggerFeatureModal(Zt.a.LIMIT_CHOICES_CONTROL_OPTION),t.preventDefault(),!0)}},{key:"withIsHipaaForm",value:function(e){var t=Object(ve.o)(!!e);return Object(Te.a)()(t),e||bd.a.makePropertyHiddenInInspectorPanel("options.hipaaField",null,null),this}},{key:"isHipaaForm",value:function(){return Object(Te.b)(Oe.n)}},{key:"getEditorPanelGroup",value:function(){return this.editorPanelGroup}},{key:"openEditorPanelGroupWhenStartupPanelIsPresent",value:function(){this.mobileInteractionsEnabled&&window.location.href.indexOf("startup_panel")>0&&this.editorPanelGroup.setVisible(!0)}},{key:"onWindowResized",value:function(){var e=this,t=!this.mobileInteractionsDisabled&&(this.mobileDevice||document.body.offsetWidth<=900);t!==this.mobileInteractionsEnabled&&(this.mobileInteractionsEnabled=t,this.mobileInteractionsEnabled?(document.body.setAttribute("data-mobile-interactions","1"),this.editorPanelGroup.setVisible(!1)):(document.body.removeAttribute("data-mobile-interactions"),this.editorPanelGroup.setVisible(!0)),setTimeout((function(){e.engine.onResize()}),1e3))}},{key:"isMobileInteractionsEnabled",value:function(){return this.mobileInteractionsEnabled}},{key:"initPlatformBodyAttributes",value:function(){switch(!0){case""===x.a.meetsRequirements("* * mobile safari *"):document.body.setAttribute("data-host-type","mobile-safari")}}},{key:"installEditorPageErrorHandler",value:function(){var e=this;Hr.a.THROW_REQUEST_ERRORS_IN_CONSOLE=!0;var t=!0;window.addEventListener("error",(function(n){if(t){var i=["message: ".concat(n.message.substr(0,2048)),"file: ".concat(n.filename),"line: ".concat(n.lineno)].join("\n");e.api.POST("/v2/errorLog",{error:i}).fail((function(e){console.warn("ERROR REPORTING TO BACKEND STOPPED - GOT ERROR ON ERROR REPORTING ENDPOINT"),t=!1}))}}))}},{key:"updateClickOnPublishButtonForWeebly",value:function(){var e=this,t=document.querySelector("#publish-button.publish-on-weebly-button");null!==t&&(t.onclick=function(){e.commands.publishFormOnWeebly(e.getFormId())})}},{key:"withTranslationsDropdownVisibleOnForm",value:function(e){return this.translationsDropdownVisibleOnForm=!!e,this}},{key:"isTranslationsDropdownVisibleOnForm",value:function(){return this.translationsDropdownVisibleOnForm}},{key:"getOAuth",value:function(){return this.oAuth}},{key:"withReusableDomainAliases",value:function(e){return this.reusableDomainAliases=e,this}},{key:"getReusableDomainAliases",value:function(){return this.reusableDomainAliases}},{key:"withUsersList",value:function(e){return this.workflowsUsersList=e,this.workflowsUsersList||bd.a.makePropertyHiddenInInspectorPanel("choices.isWorkflowsUserDropdown","boolean",b.a.CONTROL_TYPE_DROPDOWN),bd.a.makePropertyHiddenInInspectorPanel("choices.isWorkflowsUserDropdownSelectAll","boolean",b.a.CONTROL_TYPE_DROPDOWN),this}},{key:"replaceQueryStringParameter",value:function(e,t){var n=Object(ft.p)((location.search||"").substr(1));n[e]=t;var i=[];for(var r in n)n.hasOwnProperty(r)&&n[r]&&""!==n[r]&&i.push("".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(n[r]||"")));history.replaceState(null,document.title,"?".concat(i.join("&")))}},{key:"trackPublishPanelViews",value:function(e){this.commands.trackEvent("page_view_publish");var t=Object(ft.p)(location.search.substr(1)),n=new gr(this.getPlatformDetails());switch(e){case"item":case"editor":t.click_from&&"settings"===t.click_from?(this.commands.trackEvent("page_view_publish_from_settings"),this.replaceQueryStringParameter("click_from","")):this.commands.trackEvent("page_view_publish_from_edit")}"publish-form"!==e&&n.trackPlatformMetric("page_view_publish")}},{key:"withUserFeatures",value:function(e){return this.userFeatures=e,e&&e.allowIFrame&&M.a.USER_HTML_TAGS.push("iframe"),this}},{key:"withPopupNotifications",value:function(e){return this.popupNotifications=e,this}},{key:"withDefaultUserPreferences",value:function(e){return this.defaultUserPreferences=e,this}},{key:"trackPlatformSpecificMetric",value:function(e){void 0===this.platformMetricsManager&&(this.platformMetricsManager=new gr(this.getPlatformDetails())),this.platformMetricsManager.trackPlatformMetric(e)}},{key:"initializeBlankDocumentFromOCRSerializedData",value:function(){try{var e=JSON.parse(sessionStorage.getItem("ocr_data"));this.commands.initializeDocumentFromOCRData(e),void 0!==sessionStorage.getItem("lastDigitizedHash")&&32==sessionStorage.getItem("lastDigitizedHash").length&&(this.getJQuery().ajax({type:"POST",cache:!1,url:"/modules/OCRForm/logger.php",data:{ocrData:e,formId:this.getFormId(),lastDigitizedHash:sessionStorage.getItem("lastDigitizedHash")}}),sessionStorage.removeItem("lastDigitizedHash")),sessionStorage.removeItem("ocr_data")}catch(t){}}},{key:"getPanelNameByKey",value:function(e){switch(e){case Hl.PUBLISH_WEEBLY:return"weebly-embed-in-page-publish-method";case Hl.PUBLISH_WEEBLY_LINK:return"weebly-link-to-form-publish-method";case Hl.PUBLISH_WEEBLY_LIGHTBOX:return"weebly-lightbox-publish-method";case Hl.PUBLISH_BIG_COMMERCE:return"bigcommerce-embed-in-page-publish-method";case Hl.PUBLISH_BIG_COMMERCE_LINK:return"bigcommerce-link-to-form-publish-method";case Hl.PUBLISH_BIG_COMMERCE_LIGHTBOX:return"bigcommerce-lightbox-publish-method";case Hl.PUBLISH_SHOPIFY:return"shopify-embed-in-page-publish-method";case Hl.PUBLISH_SHOPIFY_LINK:return"shopify-link-to-form-publish-method";case Hl.PUBLISH_SHOPIFY_LIGHTBOX:return"shopify-lightbox-publish-method"}return"weebly-embed-in-page-publish-method"}},{key:"openPublishPanel",value:function(e){this.editorPanelGroup.setVisible(!0),this.execCommand("set-active-panel","publish-form",e)}},{key:"openEditorPanel",value:function(e){window.innerWidth<=900&&window.localStorage.getItem("noSidebarActiveState")||(this.editorPanelGroup.setVisible(!0),this.execCommand("set-active-panel",e))}},{key:"getEmbedCodePanelId",value:function(){return this.getPlatformDetails()&&(this.getPlatformDetails().isShopify||this.getPlatformDetails().isBigCommerce||this.getPlatformDetails().isWeebly)?"iframe-publish-method":"javascript-publish-method"}},{key:"withDropdownsWithForms",value:function(e){return this.dropdownsWithForms=e,this.dropdownsWithForms||bd.a.makePropertyHiddenInInspectorPanel("choices.isDropdownWithForms","boolean",b.a.CONTROL_TYPE_DROPDOWN),this}},{key:"withDefaultNotificationsPreferences",value:function(e){return this.defaultNotificationsPreferences=e,this}},{key:"getDefaultNotificationsPreferences",value:function(){return this.defaultNotificationsPreferences}},{key:"withUserDetails",value:function(e){return this.userDetails=e,this}},{key:"selectSettingInPanel",value:function(e,t,n){this.clearSelectionInSettingsPanel(e,n),t.setAttribute("data-is-selected","1")}},{key:"clearSelectionInSettingsPanel",value:function(e,t){t(e).find(" > [data-role=setting][data-type-id][data-is-selected]").each((function(){this.removeAttribute("data-is-selected")}))}},{key:"withControlsThatHaveRepeatablePathsAddedToPrefillValue",value:function(e){return this.controlsThatHaveRepeatablePathsAddedToPrefillValue=e,this}},{key:"getControlsThatHaveRepeatablePathsAddedToPrefillValue",value:function(){return this.controlsThatHaveRepeatablePathsAddedToPrefillValue}},{key:"getUserDetails",value:function(){return this.userDetails}},{key:"redirectToNotifications",value:function(){var e=this.header.getModel();e&&(e.toggles.exp_notifications_v2?this.redirectToNotificationsV2():this.redirectToNotificationsV1())}},{key:"redirectToNotificationsV2",value:function(){var e=Object(ve.j)(O.d.NOTIFICATIONS);Object(Te.a)()(e)}},{key:"redirectToNotificationsV1",value:function(){var e=Object(ve.j)(O.jb.OLD_NOTIFICATIONS);Object(Te.a)()(e)}},{key:"toggleExperiment",value:function(){return this.jq.ajax({url:"/ajax-call.php?service=usersExperiments&do=exposeUser&experimentName=edt_notifications_v2",data:{},type:"GET",crossDomain:!0})}},{key:"getSummarySettingProperty",value:function(e){var t=this.engine.getDocument().getForm().getEditorSettingByTypeId(K.a.PAYMENT_SUMMARY_EDITOR_SETTING);return t&&(this.summarySettingsCache[e]=t.getProperty(e)),this.summarySettingsCache[e]}},{key:"setSummarySettingProperty",value:function(e,t){var n=this.engine.getDocument().getForm().getEditorSettingByTypeId(K.a.PAYMENT_SUMMARY_EDITOR_SETTING);n&&n.setProperty(e,t)}},{key:"getDetailedInvoiceOptions",value:function(){return{showDiscountAndTax:this.getSummarySettingProperty("showDiscountAndTax"),showPaymentsSummaryBelowForm:!this.getSummarySettingProperty("showSummaryAfterSubmit"),showQuantityColumn:this.getSummarySettingProperty("showQuantity"),showIndexColumn:this.getSummarySettingProperty("showIndexColumn"),columns:this.getSummarySettingProperty("columns")}}},{key:"showRealtimeCalculations",value:function(){return!!this.getSummarySettingProperty("showRealTimeSummary")&&this.getSummarySettingProperty("showRealTimeSummary")&&this.checkFormHasPaymentProcessor()&&this.checkFormHasFormulasOrProductsOrFixedFees()}},{key:"renderFooterOnAllPages",value:function(){for(var e=this.engine.getDocument().getNumberOfPagesIncludingPaymentSummary(),t=0;t<e;t++)this.engine.getDocument().getPageByIndex(t).renderFooter()}},{key:"renderPaymentSummary",value:function(){var e=this;this.getLoaderDependency(O.M.SHOULD_SHOW_PAYMENT_SUMMARY)?this.commands.recalculateForm().done((function(){e.renderFooterOnAllPages()})):this.renderFooterOnAllPages()}},{key:"removePaymentSummaryPageIfNeeded",value:function(){var e=this.getLoaderDependency(O.M.DETAILED_INVOICE_OPTIONS);this.getLoaderDependency(O.M.SHOULD_SHOW_PAYMENT_SUMMARY)||e.showPaymentsSummaryBelowForm||this.execCommand("remove-payment-summary-page")}},{key:"renderHeaderOnAllPages",value:function(){for(var e=0,t=this.engine.getDocument().getNumberOfPagesIncludingPaymentSummary();e<t;e++)this.engine.getDocument().getPageByIndex(e).renderHeader()}},{key:"setSelectedCurrencyId",value:function(e){this.selectedCurrencyId="string"===typeof e?parseInt(e):e}},{key:"getSelectedCurrencyId",value:function(){return this.selectedCurrencyId}},{key:"withShowSummaryAfterEachCalculation",value:function(e){return this.isRealtimeSummaryOn=e,this}},{key:"checkFormHasPaymentProcessor",value:function(){return this.engine.getDocument().getConfiguration().getProperty("isPaymentEnabled")}},{key:"checkFormHasFormulasOrProductsOrFixedFees",value:function(){var e=this.engine.getDocument().getForm().getEditorSettingByTypeId(K.a.PAYMENT_PRODUCTS_EDITOR_SETTING),t=e?e.getProperty("fixedAmount"):null,n=this.getFormulas(),i=this.getProductsWithValue(),r=!1;return n.length>0||(void 0!==t&&null!==t&&parseInt(t)>0||(Object(H.a)(i,(function(e){var t=e.value;Object(Yr.a)(t,(function(e){return e>0}))&&(r=!0)})),r))}},{key:"getFormulas",value:function(){var e=this.engine.getDocument().getForm().getEditorSettingByTypeId(K.a.PAYMENT_PRODUCTS_EDITOR_SETTING),t=e?e.getProperty("productsData"):[],n=this.engine.getDocument().getControlsList(),i=[];return Object(H.a)(t,(function(e){var t=Object(Ur.a)(n,(function(t){return t.getId()===e.controlId}));if(t&&t.getTypeId()===b.a.CONTROL_TYPE_FORMULA){var r=IE({},e,{type:t.getTypeId(),details:t.getProperty("label.labelText")});i.push(r)}})),i}},{key:"getProductsWithValue",value:function(){var e=this.engine.getDocument().getForm().getEditorSettingByTypeId(K.a.PAYMENT_PRODUCTS_EDITOR_SETTING),t=e?e.getProperty("productsData"):[],n=this.engine.getDocument().getControlsList(),i=[];return Object(H.a)(t,(function(e){var t=Object(Ur.a)(n,(function(t){return t.getId()===e.controlId}));if(t&&t.hasProperty("payments.value")){var r=t.getProperty("payments.value"),a=IE({},e,{value:r,type:t.getTypeId(),details:t.getProperty("label.labelText")});i.push(a)}})),i}},{key:"enumeratePaymentSummaryTranslations",value:function(){var e=this,t=[],n=this.getEngine().getDocument().getForm().getEditorSettingByTypeId(K.a.PAYMENT_SUMMARY_EDITOR_SETTING),i=[];return n&&n.hasProperty("columns")&&(i=n.getProperty("columns")),Object(H.a)(i,(function(n){t.push({key:n.i18n,sourceText:n.label||e.getI18n().translateText(n.i18n)})})),t}},{key:"changePaymentSummaryColumnVisibility",value:function(e){var t=this,n=this.getSummarySettingProperty(O.Y.COLUMNS);Object(H.a)(n,(function(n){if(n.name===e.name&&n.showFlag)return t.setSummarySettingProperty(n.showFlag,e.isVisible),void t.renderPaymentSummary()}))}},{key:"changePaymentSummaryColumnNameOnBlur",value:function(e){var t=this;this.updatePaymentSummaryColumnName(e);var n=mc.a.getPaymentSummaryColumn(e.name);n&&n.length&&Object(H.a)(n,(function(n){if(n&&""===e.value){var i=n.getAttribute("data-i18n-text");e.value=t.getI18n().translateText(i),n.textContent=e.value}}))}},{key:"updatePaymentSummaryColumnName",value:function(e){var t=this.getSummarySettingProperty(O.Y.COLUMNS),n=[];Object(H.a)(t,(function(t){t.name===e.name?n.push(IE({},t,{label:e.value})):n.push(t)})),this.setSummarySettingProperty(O.Y.COLUMNS,n)}},{key:"bindHeaderEvents",value:function(){var e=this;this.header&&this.header.on(Bl.HEADER_EVENT,(function(t){var n=Object(Te.a)(),i=Object(Te.b)(Oe.j);switch(t.key){case Hl.PUBLISH_WEEBLY:e.commands.publishFormOnWeebly(i);break;case Hl.PUBLISH_WIX_PLATFORMS:e.commands.publishFormOnWix(i);break;case Hl.PUBLISH_WEEBLY_LINK:case Hl.PUBLISH_WEEBLY_LIGHTBOX:case Hl.PUBLISH_BIG_COMMERCE_LINK:case Hl.PUBLISH_BIG_COMMERCE_LIGHTBOX:case Hl.PUBLISH_SHOPIFY_LINK:case Hl.PUBLISH_SHOPIFY_LIGHTBOX:n(Object(ve.j)(t.key));break;case Hl.PUBLISH_BIG_COMMERCE:case Hl.PUBLISH_SHOPIFY:var r=e.getEditorPanelGroup(),a=r.getPanelById("publish-form"),o="weebly-embed-in-page-publish-method";r.setVisible(!0),e.execCommand("set-active-panel","publish-form"),o=e.getPanelNameByKey(t.key),a&&a.openElementById(o),n(Object(ve.j)(t.key));break;case Hl.CUSTOMIZE_THEME:n(Object(ve.j)(O.d.THEMES));break;case Hl.ADD_FIELDS:n(Object(ve.j)(O.d.EDITOR));break;case Hl.EMAIL_AND_SMS:e.redirectToNotifications();break;case Hl.TRANSLATIONS:n(Object(ve.j)(O.d.TRANSLATIONS));break;case Hl.EDIT_TITLE_BOX:e.engine.getDocument().setProperty("name.value",t.value);break;case Hl.PRODUCTS:e.execCommand("open-products-dialog");break;case Hl.PAYMENTS:n(Object(ve.j)(O.d.PAYMENTS));break;case Hl.PUBLISH_GET_LINK:n(Object(ve.j)(O.d.PUBLISH_GET_LINK));break;case Hl.PUBLISH_EMBED_CODE:n(Object(ve.j)(O.d.PUBLISH_EMBED_CODE)),o=e.getEmbedCodePanelId(),console.error("PUBLISH_EMBED_CODE triggered"),e.openPublishPanel(o),e.URLHandler.setNewUrl("publish-form","page_view_publish_embed"),e.trackPlatformSpecificMetric("page_view_publish_embed");break;case Hl.PUBLISH_WEEBLY_PLATFORMS:case Hl.PUBLISH_SHOPIFY_PLATFORMS:case Hl.PUBLISH_BIG_COMMERCE_PLATFORMS:n(Object(ve.j)(t.key)),e.trackPlatformSpecificMetric("page_view_publish_platforms");break;case Hl.PUBLISH_FACEBOOK:n(Object(ve.j)(O.d.PUBLISH_FACEBOOK)),e.URLHandler.setNewUrl("publish-form",Hl.PUBLISH_FACEBOOK),e.openPublishPanel("facebook-publish-method");break;case Hl.PUBLISH_BLOGGER:n(Object(ve.j)(O.d.PUBLISH_BLOGGER)),e.URLHandler.setNewUrl("publish-form","blogger-publish-method"),e.openPublishPanel("blogger-publish-method");break;case Hl.PUBLISH_WORDPRESS:n(Object(ve.j)(O.d.PUBLISH_WORDPRESS)),e.URLHandler.setNewUrl("publish-form","wordpress-publish-method"),e.openPublishPanel("wordpress-publish-method");break;case Hl.PUBLISH_JOOMLA:n(Object(ve.j)(O.d.PUBLISH_JOOMLA)),e.URLHandler.setNewUrl("publish-form","joomla-publish-method"),e.openPublishPanel("joomla-publish-method");break;case Hl.PUBLISH_SALESFORCE:n(Object(ve.j)(O.d.PUBLISH_SALESFORCE)),e.URLHandler.setNewUrl("publish-form","salesforce-publish-method"),e.openPublishPanel("salesforce-publish-method");break;case Hl.PUBLISH_SALESFORCE_COMMUNITY:n(Object(ve.j)(O.d.PUBLISH_SALESFORCE_COMMUNITY)),e.URLHandler.setNewUrl("publish-form","salesforce-community-publish-method"),e.openPublishPanel("salesforce-community-publish-method");break;case Hl.PUBLISH_UNBOUNCE:n(Object(ve.j)(O.d.PUBLISH_UNBOUNCE)),e.URLHandler.setNewUrl("publish-form","unbounce-publish-method"),e.openPublishPanel("unbounce-publish-method");break;case Hl.PUBLISH_GOOGLE_SITES:n(Object(ve.j)(O.d.PUBLISH_GOOGLE_SITES)),e.URLHandler.setNewUrl("publish-form","google-sites-publish-method"),e.openPublishPanel("google-sites-publish-method");break;case Hl.PUBLISH_TWITTER:n(Object(ve.j)(O.d.PUBLISH_TWITTER)),e.URLHandler.setNewUrl("publish-form","twitter-publish-method"),e.openPublishPanel("twitter-publish-method");break;case Hl.PUBLISH_PLATFORMS:n(Object(ve.j)(O.d.PUBLISH_PLATFORMS)),e.URLHandler.setNewUrl("publish-form","platforms-publish-method"),e.openPublishPanel("platforms-publish-method");break;case Hl.PUBLISH_SALESFORCE_PLATFORMS:n(Object(ve.j)(O.d.PUBLISH_SALESFORCE_PLATFORMS))}}))}},{key:"loadStartupPanel",value:function(){var e,t=this,n=Object(ft.o)(window.location.href),i=Object(ft.p)((n.search||"?").replace(/^\?/g,"")),r=Object(Te.a)();if(i.startup_panel)switch(i.startup_panel){case Zi.PRODUCTS:this.on("load",ge.a.openFromExternalSource);break;case Zi.PUBLISH:this.on("load",(function(){var n=t.getPlatformDetails(),a=O.d.PUBLISH_GET_LINK;(null===i||void 0===i?void 0:i.tabid)&&!(null===n||void 0===n?void 0:n.isWeebly)?a=t.viewManager.getPublishPanelByTabId(parseInt(i.tabid)):(null===n||void 0===n?void 0:n.isShopify)?a=O.d.PUBLISH_SHOPIFY:(null===n||void 0===n?void 0:n.isBigCommerce)?a=O.d.PUBLISH_BIG_COMMERCE:(null===n||void 0===n?void 0:n.isSalesforce)?a=O.d.PUBLISH_SALESFORCE:(null===n||void 0===n?void 0:n.isWeebly)?a=O.d.PUBLISH_WEEBLY:(null===n||void 0===n?void 0:n.isWix)&&(a=O.d.PUBLISH_WIX_PLATFORMS),e=Object(ve.j)(a),r(e)}));break;case Zi.NOTIFICATIONS:this.on("load",(function(){e=Object(ve.j)(O.d.NOTIFICATIONS),r(e)}));break;case O.d.TRANSLATIONS:this.on("load",(function(){e=Object(ve.j)(O.d.TRANSLATIONS),r(e)}));break;case O.d.THEMES:this.on("load",(function(){e=Object(ve.j)(O.d.THEMES),r(e)}));break;case O.d.EDITOR:this.on("load",(function(){var n=window.innerWidth,i=window.localStorage,a=i.getItem("noSidebarActiveState");n<=900&&a&&t.editorPanelGroup.isVisible()?(i.removeItem("noSidebarActiveState"),t.editorPanelGroup.setVisible(!1)):(e=Object(ve.j)(O.d.EDITOR),r(e))}));break;case O.d.PAYMENTS:this.on("load",(function(){e=Object(ve.j)(O.d.PAYMENTS),r(e)}));break;default:this.commands.setActiveEditorPanel(i.startup_panel)}else e=Object(ve.j)(O.d.EDITOR),r(e)}},{key:"updateStripeConnectedAccountPlaceholder",value:function(){var e=this,t=document.querySelector('#item [data-role="vertical-content"]');if(t){var n=this.engine.getDocument().getConfiguration();if(n){var i=t.querySelectorAll('input[data-plugin="payments-string-read-only"]'),r=n.getProperty("isPaymentSandboxEnabled");i.forEach((function(t){t.placeholder=e.i18n.translateText("payments_connected")||"Connected",r&&(t.placeholder=e.i18n.translateText("edt_text_sandbox_placeholder")||"Sandbox")}))}}}},{key:"addPaymentSummaryPageContainerIfNeeded",value:function(){var e=this.getLoaderDependency(O.M.DETAILED_INVOICE_OPTIONS);this.getLoaderDependency(O.M.SHOULD_SHOW_PAYMENT_SUMMARY)&&e&&!1===e.showPaymentsSummaryBelowForm&&!1===this.engine.getDocument().getHasPaymentSummaryPage()&&(this.execCommand("append-element",b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE),this.engine.getDocument().repaginateInImmediateMode(),this.renderHeaderOnAllPages(),this.renderPaymentSummary())}}],[{key:"changePaymentSummaryColumnNameOnInput",value:function(e){var t=mc.a.getPaymentSummaryColumn(e.name);t&&t.length&&Object(H.a)(t,(function(t){t&&(t.textContent=e.value)}))}}]),n}(ir.a);n(590);function NE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var AE=function(e){var t=Object(fi.useState)(e.isAlwaysFixed),n=Di()(t,2),i=n[0],r=n[1],a=Object(fi.useRef)(null);Object(fi.useEffect)((function(){var t,n=(null===(t=e.scrollableParent)||void 0===t?void 0:t.current)||window;return e.isAlwaysFixed||(s(),n.addEventListener("scroll",s)),function(){e.isAlwaysFixed||n.removeEventListener("scroll",s)}}),[]);var o,s=function(){var t=window.scrollY||window.pageYOffset||document.body.scrollTop+(document.documentElement&&document.documentElement.scrollTop||0),n=window.innerHeight+t-50<document.body.offsetHeight-a.current.clientHeight;e.scrollableParent&&(t=e.scrollableParent.current.scrollTop,n=e.scrollableParent.current.offsetHeight+t+50<e.scrollableParent.current.scrollHeight),r(!!n)};return di()("div",{className:vi()("action-bar",v()({"action-bar--visible":e.isVisible,"action-bar--fixed":i},e.className,!!e.className)),style:(o=e.isAlwaysFixed?e.isVisible?{height:"auto"}:{height:"25px"}:{},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NE(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o,{},e.style)),"data-testid":e.testid},void 0,Ei.a.createElement("div",{className:vi()("action-content",{"action-bar--visible":e.isVisible,"action-bar--fixed":i}),ref:a},di()("div",{className:"action-bar__group"},void 0,e.children)))},SE=(n(592),di()("img",{className:"branding-action-bar__logo",src:"/images3/logos/123FormBuilder-27px@2x.png",alt:"123FormBuilder logo"})),LE=function(e){var t=e.testid,n=e.formId,i=new F.a,r="https://www.123formbuilder.com/free-form-templates/?utm_source=forms&utm_medium=create_a_form&utm_content=".concat(n);return di()(AE,{className:"branding-action-bar",testid:t,isVisible:!0,isAlwaysFixed:!0},void 0,SE,di()(bi,{className:"branding-action-bar__divider d-none-breakpoint-m",type:Mn.VERTICAL}),di()("span",{className:"d-none-breakpoint-m"},void 0,i.translateTextDefault("brandingActionBar_createForms","Create online forms and surveys")),di()(Ha,{className:"branding-action-bar__button",label:i.translateTextDefault("brandingActionBar_createyourForm","Create your own form"),type:Nr.PRIMARY,onClick:function(){return Object(ft.m)(r)}}))},DE=(n(594),function(e){var t=e.href,n=new F.a;return di()("div",{className:"abuse-disclaimer","data-testid":"abuse-disclaimer"},void 0,n.translateTextDefault("formFooter_sensitiveInformation","Never submit sensitive information such as passwords.")," ",di()("a",{href:t,target:"_blank"},void 0,n.translateTextDefault("fun_reportAbuse","Report abuse")))});function wE(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var kE=function(e){u()(n,e);var t=wE(n);function n(){var e;return o()(this,n),e=t.call(this),v()(A()(e),"formId",void 0),v()(A()(e),"jq",void 0),v()(A()(e),"serializedFormData",void 0),v()(A()(e),"apiRootAddress",void 0),v()(A()(e),"editorCapabilities",void 0),v()(A()(e),"api",void 0),v()(A()(e),"form",void 0),v()(A()(e),"engine",void 0),v()(A()(e),"resources",{}),v()(A()(e),"sessionId",void 0),v()(A()(e),"commandDispatcher",void 0),v()(A()(e),"rules",void 0),v()(A()(e),"translator",void 0),v()(A()(e),"domAbstractionLayer",void 0),v()(A()(e),"jqlAdditionalFunctionsLibrary",void 0),v()(A()(e),"previouslySubmittedData",null),v()(A()(e),"viewFormContext",void 0),v()(A()(e),"viewFormEnvironmentContext",void 0),v()(A()(e),"viewFormContextOptions",void 0),v()(A()(e),"csrfToken",void 0),v()(A()(e),"queryBuilder",void 0),v()(A()(e),"rulesData",[]),v()(A()(e),"paymentProcessors",[]),v()(A()(e),"showSummaryAfterEachCalculation",void 0),v()(A()(e),"quizTimer",null),v()(A()(e),"i18n",void 0),v()(A()(e),"formTranslationsService",void 0),v()(A()(e),"currentLanguage",void 0),v()(A()(e),"defaultLanguage",void 0),v()(A()(e),"languages",void 0),v()(A()(e),"userId",void 0),v()(A()(e),"ui",void 0),v()(A()(e),"couponConfiguration",void 0),v()(A()(e),"captchaSkipped",void 0),v()(A()(e),"focusManager",void 0),v()(A()(e),"submissionXMLDateTimeStart",void 0),v()(A()(e),"submissionId",void 0),v()(A()(e),"usersList",void 0),v()(A()(e),"formSettings",void 0),v()(A()(e),"detailedInvoiceOptions",void 0),v()(A()(e),"previewOnlyMode",void 0),v()(A()(e),"fontsManager",void 0),v()(A()(e),"geolocationUserCountryCode",void 0),v()(A()(e),"wixAuthorizedRequestDetails",void 0),v()(A()(e),"themeStrategy",O.nb.INTERNAL),v()(A()(e),"preloadedExternalThemeProperties",void 0),v()(A()(e),"serverUTCOffset",void 0),v()(A()(e),"rulesPageLoader",void 0),v()(A()(e),"quizScoreService",void 0),v()(A()(e),"isWorkflowsViewForm",void 0),v()(A()(e),"controlsThatHaveRepeatablePathsAddedToPrefillValue",[]),v()(A()(e),"userFeatures",null),v()(A()(e),"allowAutoSubmit",!0),v()(A()(e),"controlRelationships",[]),v()(A()(e),"targetedControl",null),v()(A()(e),"isInitialFormCalculation",!0),v()(A()(e),"hasProductsOrFixedFees",!1),v()(A()(e),"loaderTarget",void 0),v()(A()(e),"loaderNode",void 0),v()(A()(e),"uniqueViewIdKey",void 0),v()(A()(e),"uniqueViewId",void 0),e.rules=Zc.a.getInstance(),e.rules.getDuplicateQueryDiscarder().setActive(!0),e.rulesPageLoader=new cd,e}return l()(n,[{key:"execCommand",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];switch(e){case"dispatch-actionbar-command":this.commandDispatcher.handleActionBarCommand(n[0]||null);break;case"execute-error-action":this.commandDispatcher.handleErrorActionCommand(n[0]||null);break;case"set-language":this.commandDispatcher.setFormLanguage(n[0]||"en");break;case"explore-database":this.commandDispatcher.exploreJQLDatabase();break;case"show-detailed-invoice-dialog":this.commandDispatcher.showDetailedInvoiceDialog();break;case"control-has-changed-visibility":this.isInitialFormCalculation||this.targetedControl!==n[0].controlId&&(this.targetedControl=n[0].controlId,this.refreshCalculationForPreviouslyHiddenControl(n[0]));break;case"add-payment-summary-listeners":case"remove-payment-summary-page":case"form-name-changed":break;default:return void console.warn("ViewFormLoader::execCommand(".concat(JSON.stringify(e),"): Unrecognized command"))}}},{key:"withRules",value:function(e){return this.rulesData=e||[],this}},{key:"withPaymentProcessors",value:function(e){return this.viewFormContext!==O.vb.VIEW_FORM&&this.viewFormContext!==O.vb.SAVE_FOR_LATER||(this.paymentProcessors=e&&e.length?e:null),this}},{key:"getPaymentProcessors",value:function(){return this.paymentProcessors||null}},{key:"getUI",value:function(){return this.ui}},{key:"withSessionId",value:function(e){return this.sessionId=e,this}},{key:"getSessionId",value:function(){return this.sessionId||null}},{key:"withFormId",value:function(e){return this.formId=e,this}},{key:"getFormId",value:function(){return this.formId}},{key:"getSelection",value:function(){return null}},{key:"getUICssSelector",value:function(e){return null}},{key:"withJQuery",value:function(e){return this.jq=e,L.a.withJQuery(e),this}},{key:"getJQuery",value:function(){return this.jq}},{key:"withSerializedFormData",value:function(e){return this.serializedFormData=e,this}},{key:"withApiRootAddress",value:function(e){return this.apiRootAddress=e,this}},{key:"getApiRootAddress",value:function(){return this.apiRootAddress}},{key:"withEditorCapabilities",value:function(e){return this.editorCapabilities=e,this}},{key:"withResource",value:function(e,t){return e&&"string"===typeof e&&(this.resources[e]=atob(t)),this}},{key:"withPreviouslySubmittedData",value:function(e){return this.previouslySubmittedData=e||null,this}},{key:"withFormLanguage",value:function(e){return this.currentLanguage=e,this}},{key:"withFormDefaultLanguage",value:function(e){return this.defaultLanguage=e,this}},{key:"withFormAvailableLanguages",value:function(e){return this.languages=e,this}},{key:"getFormAvailableLanguages",value:function(){return this.languages&&this.languages.length>1?this.languages:null}},{key:"getCurrentLanguage",value:function(){return this.currentLanguage}},{key:"getDefaultLanguage",value:function(){return this.defaultLanguage}},{key:"init",value:function(){var e=this;this.hideFormIfWeAreInAutoApproveContext(),document.body.setAttribute("data-view-form-context",this.getViewFormContextAsString()),this.api=new Hr.a(this.jq,this.apiRootAddress),this.form=document.getElementById("form"),this.setupBodyDeviceAttribute(),this.engine=new Sp(this,this.jq,this.form,this.editorCapabilities,this.resources),mc.a.createInstance(this.engine),mc.a.addSalvageHelpers(),this.quizScoreService=new vc,this.formTranslationsService=new Pu(this.engine.getDocument()),this.fontsManager=new Fd(this.engine.getResourceManager(),this.jq,!1),this.focusManager=new Yd(this.engine.getDocument(),this.jq),this.i18n=new Kc(this.jq,this.api,this.currentLanguage,this.engine.getResourceManager()),L.a.withI18n(this.i18n),this.i18n.on("load",(function(){e.engine.getDocument().trigger("translate"),e.engine.getDocument().updateI18n(),e.currentLanguage=e.i18n.getLanguageCode(),e.domAbstractionLayer.trigger("control-event",Xc.a.CHANGE,null,"language",null)})),this.quizScoreService.on("change",(function(){e.domAbstractionLayer.trigger("control-event",Xc.a.CHANGE,null,"quiz_score",null)})),this.ui=new St(this.engine),Gu.a.getInstance().withUI(this.ui).withResourceManager(this.engine.getResourceManager()),this.engine.loadFromString(JSON.stringify(this.serializedFormData)),this.engine.getDocument().initApplicationControls(),this.forceHiddenFieldsVisibilityInEditSubmissionMode(),this.i18n.get("".concat(this.apiRootAddress,"/v2/language/").concat(this.currentLanguage,"/").concat(this.formId)),this.engine.getDocument().setCurrentPageIndex(0),this.engine.getDocument().withRules(this.rulesData),this.commandDispatcher=new Dp(this.engine,this),this.quizScoreService.withCommandDispatcher(this.commandDispatcher),this.translator=new zc(this.engine.getDocument()),this.domAbstractionLayer=new Jc(this,this.translator),this.queryBuilder=new iu(this.domAbstractionLayer,this.rules.getDatabase(),this.engine.getDocument()),this.jqlAdditionalFunctionsLibrary=new $c(this.domAbstractionLayer),this.injectCouponCodeControlIntoFormIfNeeded(),this.initDOMEvents();var t,n=document.getElementById("branding-action-bar");if(this.formSettings.formFooter&&n&&tr.a.render(Ei.a.createElement(LE,{testid:"branding-action-bar",formId:this.formId},null),n),(t=this).on("plugin-rendered",(function(e,n){t.onPluginRendered(e,n)})),t.engine.getDocument().on("calculate",(function(e){t.commandDispatcher.recalculateForm(e)})),t.on("form_has_products_or_fixed_fees_changed",(function(e){t.hasProductsOrFixedFees=e})),this.rules.getDatabase().withFunction("IS_CONTROL_CHECKED",this.wrapMethodCall("IS_CONTROL_CHECKED",this.jqlAdditionalFunctionsLibrary)).withFunction("IS_NOT_CONTROL_CHECKED",this.wrapMethodCall("IS_NOT_CONTROL_CHECKED",this.jqlAdditionalFunctionsLibrary)),this.rules.withJQLTable("controls",au.create(this.translator,this.domAbstractionLayer)),console.log("Init view form"),this.previouslySubmittedData&&this.loadPreviouslySubmittedData(),!0===this.engine.getDocument().getActionBar().getProperty("configuration.hasApproveButton")&&this.viewFormContextOptions&&this.viewFormContextOptions.autoSubmitApproval){var i="approve";this.viewFormContextOptions.autoSubmitApprovalReject&&(i="reject"),this.rulesData.length>0?this.domAbstractionLayer.on("compute-form-rules",(function(){setTimeout((function(){console.log("Approve automatically with rules"),e.execCommand("dispatch-actionbar-command",i)}),500)})):setTimeout((function(){console.log("Approve automatically without rules"),e.execCommand("dispatch-actionbar-command",i)}),500)}this.rules.getDatabase().initPlanner(),this.injectExistingFormRulesToEngine(),this.rules.shouldShowLoader()&&this.createLoader(),this.rules.withDOMAbstractionLayer(this.domAbstractionLayer),this.rules.getDatabase().withAutoBindingProvider(new nu),this.rules.getDatabase().withAutoBindingProvider(this.rules.getDOMAbstractionLayer().getBindingProvider()),this.rules.getDatabase().withAutoBindingProvider(new tu(this.engine,this.quizScoreService)),this.rules.getDatabase().withAutoBindingProvider(new Qc(this.engine)),this.rules.getDatabase().withAutoBindingProvider(new eu(this.engine));this.rules.getDatabase().on("idle",(function t(){e.rules.getDatabase().off("idle",t),e.loadPreviouslySubmittedData(),e.previouslySubmittedData&&e.domAbstractionLayer.trigger("compute-form-rules",(function(){e.loadPreviouslySubmittedData(),console.warn("FORM LOGIC INITIALIZATION DONE!"),e.rules.getDuplicateQueryDiscarder().setActive(!1),e.engine.trigger("compute-form-rules-done"),e.isInitialFormCalculation=!1})),e.onFormRulesAreLoadedFirstTimePageLoads(),e.hideLoader()})),this.rules.initializeInFormViewMode(),this.rulesData&&0!==this.rulesData.length||this.onFormRulesAreLoadedFirstTimePageLoads(),setTimeout((function(){e.onFormRulesAreLoadedFirstTimePageLoads()}),500),lt.a.ALLOW_REAL_TIME_CALCULATIONS&&this.isShowSummaryAfterEachCalculation()&&this.engine.getDocument().realTimeCalculationsThrottler(),null!==this.quizTimer&&this.commandDispatcher.startQuizTimerCountdownThread(),this.engine.on("page-scroll",(function(){console.log("scroll!")})),this.formSettings&&this.formSettings.autoFocusOnFirstInputField&&setTimeout((function(){e.commandDispatcher.focusOnFirstFormField()}),500),this.setFormIsEmbeddebAttribute(),this.setWorkflowsViewFormFlag(),this.notifyWindowParentWithFormDimensions(),setTimeout((function(){S.a.addEditorModeChangeEventListenerForWix(e.jq),S.a.getUserSessionTokenForWix()}),100),setTimeout((function(){S.a.refreshFrameHeightOnWix()}),400),this.markSalesforceControlsWithDOMAttribute(this.rules.getSalesforceAffectedControlsTriggers(),"trigger"),this.markSalesforceControlsWithDOMAttribute(this.rules.getSalesforceAffectedControls(),"normalField"),this.trigger("ready"),this.verifyAutoSubmit(),this.getViewFormContext()===O.vb.PDF_EXPORT&&this.verifyRulesTypeForPdf(),this.addMobileAppActions()}},{key:"verifyRulesTypeForPdf",value:function(){for(var e=this,t=this.rules.getRules(),n=0,i=this.engine.getDocument().getControlsList().length,r=0,a=t.length;r<a;r++)t[r].eventType!==Xc.a.APPROVED&&t[r].eventType!==Xc.a.SUBMITTED||n++;if(n===t.length)var o=setInterval((function(){i===e.engine.getDocument().getControlsList().length&&(console.warn("FORM LOGIC INITIALIZATION DONE!"),clearInterval(o)),i=e.engine.getDocument().getControlsList().length}),1e3)}},{key:"addMobileAppActions",value:function(){var e;(e=this).engine.on("theme-ready",(function(){setTimeout((function(){window.mobileApp&&(e.bindMobileAppSelect(),e.engine.getDocument().on("node-insertion-trigger",(function(t){t.getTypeId()===b.a.CONTAINER_TYPE_REPEATABLE_GROUP&&t.flatten().forEach((function(t){t.getTypeId()===b.a.CONTROL_TYPE_DROPDOWN&&e.bindMobileAppSelect()}))})))}))}))}},{key:"bindMobileAppSelect",value:function(){var e=window.mobileApp;!function(t,n){e.systemName&&"Android"===e.systemName&&e.isTablet&&"true"===e.isTablet&&e.systemVersion&&parseFloat(e.systemVersion.substring(0,3))<=5.1&&(n("select").mobileSelect({theme:"mac",noValueSelected:"",onClose:function(){var e,i=this.closest('[data-role="control"]').attr("data-id"),r="Please Select"===this.val()?"":this.val();this.parents('div[data-type="repeatable-group"]').length&&(e=n(this.parents('div[data-type="repeatable-group"]')[0]).attr("data-repeatable-path")),e?t.getDOMAbstractionLayer().setControlValueById(i.toString(),r,null,e):t.getDOMAbstractionLayer().setControlValueById(i.toString(),r),t.jq(this)[0].dispatchEvent(new Event("change")),n(".mobileSelect-container").find(".mobileSelect-overlay").remove()},onOpen:function(){var e=n('.mobileSelect-container[style*="display: block"]'),t=n(".mobileSelect-control"),i=document.createElement("div");i.className="mobileSelect-overlay",e.append(i).append((function(){return n(this).find(".mobileSelect-overlay").on("click",(function(){n(this).closest(".mobileSelect-container").find(".mobileSelect-cancelbtn").trigger("click")})),this})),e.find(".mobileSelect-title").css("display","none"),e.find(".mobileSelect-buttons").css("display","none"),setTimeout((function(){t.on("click",(function(e){e.preventDefault(),e.stopPropagation(),n(this).closest(".mobileSelect-container").find(".mobileSelect-savebtn").trigger("click")})),t.on("click",(function(e){e.preventDefault(),e.stopPropagation(),n(this).closest(".mobileSelect-container").find(".mobileSelect-savebtn").trigger("click")}))}))}}),n('[data-role="dropdown-skin"]').css("display","none"),setTimeout((function(){t.engine.getDocument().flatten().forEach((function(e){if(e.getTypeId()===b.a.CONTROL_TYPE_DROPDOWN&&""!==e.getValue().value&&e.getRootNode().querySelector("button .text")){var t=e.getValue().value;null===e.getValue().value&&(t=""),e.getRootNode().querySelector("button .text").innerText=t}})),n(".btn-mobileSelect-gen .text").on("DOMSubtreeModified",(function(e){e.preventDefault(),e.stopPropagation(),"Please Select"===this.innerText&&(this.innerText="")}))}),500))}(this,this.jq)}},{key:"isEnabledAutoSubmit",value:function(){var e=this.getFormSettings();if(void 0!==e.autoSubmit&&e.autoSubmit&&!0===this.getAllowAutoSubmit()){var t=this.engine.getLoader().getLoaderDependency(O.M.VIEW_FORM_CONTEXT);if([O.vb.EDIT_LATER,O.vb.EDIT_SUBMISSION,O.vb.APPROVAL].indexOf(t)>-1)return!1;var n=this.rules.getRules();if(n.length)for(var i=0,r=n.length;i<r;i++)if(n[i].eventType!==Xc.a.INIT&&n[i].eventType!==Xc.a.ALL_EVENTS&&n[i].eventType!==Xc.a.SUBMITTED)return!1;return!0}return!1}},{key:"verifyAutoSubmit",value:function(){!function(e){if(e.isEnabledAutoSubmit()){var t=e.rules.getRules();if(t.length){for(var n=!1,i=0,r=t.length;i<r;i++)if(void 0!==t[i].actions)for(var a=0,o=t[i].actions.length;a<o;a++){var s=t[i].actions[a].controlId;if(null!==e.engine.getDocument().getElementById(Number(s.replace("control_",""))).getFirstParentOfType(b.a.CONTAINER_TYPE_REPEATABLE_GROUP)){n=!0;break}}n?e.engine.on("repeatable-prefill-done",(function(){t.some((function(e){return!0===e.isSalesforce}))?e.engine.on("compute-form-rules-done",(function(){e.doAutoSubmit()})):e.doAutoSubmit()})):e.engine.on("compute-form-rules-done",(function(){e.doAutoSubmit()}))}else e.doAutoSubmit()}}(this)}},{key:"doAutoSubmit",value:function(){var e;e=this,this.jq,e.setAllowAutoSubmit(!1),e.commandDispatcher.submit(O.F.SUBMIT),e.setAllowAutoSubmit(!0)}},{key:"setFormIsEmbeddebAttribute",value:function(){for(var e=Object(ft.o)(window.location.href),t=Object(ft.p)(e.search),n=0,i=Object.keys(t),r=i.length;n<r;n++)if(i[n].indexOf("embed")>-1){this.engine.getForm().setAttribute("data-form-is-embedded","1"),document.body.setAttribute("data-is-in-iframe","1");break}}},{key:"setWorkflowsViewFormFlag",value:function(){var e=Object(ft.o)(window.location.href),t=Object(ft.p)(e.search);this.isWorkflowsViewForm=!!~~t.is_workflows}},{key:"injectExistingFormRulesToEngine",value:function(){var e=this.engine.getDocument().getRules(),t=[];if(e){for(var n=0,i=e.length;n<i;n++)for(var r=this.queryBuilder.buildAction(e[n]),a=0,o=r.length;a<o;a++)t.push(r[a]);t.length&&this.rules.withRules(t),this.setControlsRelationships()}}},{key:"wrapMethodCall",value:function(e,t){return function(){return t[e].apply(t,Array.prototype.slice.call(arguments,0))}}},{key:"loadPreviouslySubmittedData",value:function(){this.domAbstractionLayer.disableEvents();for(var e=0,t=this.previouslySubmittedData.length;e<t;e++)this.domAbstractionLayer.setControlValueById(this.previouslySubmittedData[e].controlId,this.previouslySubmittedData[e].value,this.previouslySubmittedData[e].repeated||null,this.previouslySubmittedData[e].repeatedPath||null);this.domAbstractionLayer.enableEvents()}},{key:"initDOMEvents",value:function(){!function(e,t){var n,i=[b.a.CONTROL_TYPE_TIME,b.a.CONTROL_TYPE_DATE],r={},a=function(t){var n=r[t];return n||(n=Gd.a.create.bind(e)(e.onControlValueChangedBecauseOfUserInput,200),r[t]=n),n};(e.getEngine().getDocument().on("node-property-changed",(function(t,n,r,o){if(i.indexOf(t.getTypeId())>-1&&"value.value"===n){var s=t.getRootNode().querySelector('[data-role="i123-input"]');a.bind(e)(t.getHash())(s,Xc.a.TEXT_INPUT,"input",!0)}})),t("#form").on("input",["[data-role=control][data-hash] input[data-role=i123-input]:not([type=radio]):not([type=checkbox]):not([type=hidden])","[data-role=control][data-hash] div[data-role=i123-input]:not([data-type=dropdown]):not([data-type=searchable-dropdown])","[data-role=control][data-hash] textarea","[data-role=control][data-hash][data-type=check-box] input[type=text][data-role=other]","[data-role=control][data-hash][data-type=radio] input[type=text][data-role=other]"].join(", "),(function(t){"other"===this.getAttribute("data-role")&&"text"===this.getAttribute("type")?a.bind(e)(this.outerHTML)(this,this.value?Xc.a.CHECK:Xc.a.UNCHECK,t.type,!0):a.bind(e)(this.outerHTML)(this,Xc.a.TEXT_INPUT,t.type,!0)})).on("change",["[data-role=control][data-hash] select[data-role=i123-input]","[data-role=control][data-hash] div[data-role=i123-input][data-type=dropdown]","[data-role=control][data-hash] div[data-role=i123-input][data-type=searchable-dropdown]","[data-role=control][data-hash] div[data-role=i123-input][data-type=file]","[data-role=control][data-hash] input[type=text][data-role=i123-input]","[data-role=control][data-hash] input[type=email][data-role=i123-input]","[data-role=control][data-hash] input[type=password][data-role=i123-input]","[data-role=control][data-hash] textarea[data-role=i123-input]"].join(","),(function(t){e.onControlValueChangedBecauseOfUserInput(this,Xc.a.CHANGE,t.type,!0)})).on("click change",["[data-role=control][data-hash] input[data-role=i123-input][type=radio]","[data-role=control][data-hash] input[data-role=i123-input][type=checkbox]"].join(", "),(function(t){a.bind(e)(this.outerHTML+t.type)(this,this.checked?Xc.a.CHECK:Xc.a.UNCHECK,t.type,"click"===t.type)})).on("mousedown focus","div[data-hash], div[data-hash] *",(function(n){e.onElementFocusedByUser(t(this).closest("[data-hash]").get(0)),n.stopPropagation()})).on("input",["div[data-role=control][data-type=check-box] [data-role=choice] input[type=text][data-role=other]","div[data-role=control][data-type=radio] [data-role=choice] input[type=text][data-role=other]"].join(","),(function(t){e.checkOrUncheckAssociateRadioOrCheckboxDependingOnTheOtherValue(this)})).on("submit",(function(e){return e.preventDefault(),e.stopPropagation(),!1})).on("click","[data-role=page] > [data-role=page-footer] > [data-role=control][data-type=form-action-bar] button[data-role]",(function(n){if(document.activeElement!==this&&document.activeElement!==document.body)return n.preventDefault(),void n.stopPropagation();var i=t(this).attr("data-role");i&&e.execCommand("dispatch-actionbar-command",i)})).on("click","> [data-role=form-errors] [data-role=error] [data-action]",(function(n){var i=t(this).attr("data-action");i&&e.execCommand("execute-error-action",i)})).on("change","div[data-role=control][data-type=language-selector] [data-type=dropdown]",(function(){e.execCommand("set-language",this.value)})).on("click","div[data-role=control][data-type=radio] label[data-role=label] span[data-role=clear-value]",(function(){t(this).closest("[data-role=control]").each((function(){e.clearControlValue(this)}))})).on("blur","[data-hash] [data-role=i123-input]",(function(n){var i=t(this).closest("[data-hash]").attr("data-hash");if(i){var r=e.engine.getDocument().getElementByHash(i);r&&r.onBlur()}})).on("click","[data-role=page] > [data-role=page-header] > [data-role=control][data-type=realtime-calculations]",(function(t){e.execCommand("show-detailed-invoice-dialog")})),null!==e.quizTimer||e.paymentProcessors&&e.paymentProcessors.length)&&setInterval((function(){var t=e.engine.getDocument().getCurrentPageIndex(),i=e.engine.getDocument().getPageByIndex(t).getHeaderContainerDOMNode().getBoundingClientRect();n!==i.top&&(n=i.top,e.onHeaderDOMNodeTopPositionChanged(i.top))}),100);e.engine.getDocument().on("radio-uncheck",(function(t,n){var i=t.getInputDOMNodeAtIndex(n);e.domAbstractionLayer.trigger("control-event",Xc.a.UNCHECK,i,"control_".concat(t.getId(),"_").concat(n),null)}))}(this,this.jq)}},{key:"onControlValueChangedBecauseOfUserInput",value:function(e,t,n,i){var r=this.jq(Pe.a.castToDOMElement(e)).closest("[data-role=control][data-hash]").attr("data-hash"),a=String(e.getAttribute("data-index")||"").split(",");if(r){var o=this.engine.getDocument().getElementByHash(r);if(setTimeout((function(){o.trigger("value-change")}),10),o&&O.p.CONTROL===o.getElementKind()){for(var s=[],l=0,c=a.length;l<c;l++){var u=void 0;"-1"===a[l]&&o.getTypeId()===b.a.CONTROL_TYPE_RADIO&&(u=o.getProperty("choices.values")||[])&&(a[l]=String(u.length)),a[l]&&s.push("control_".concat(o.getId(),"_").concat(a[l])),"0"===a[l]&&s.push("control_".concat(o.getId()))}if(s.length||s.push("control_".concat(o.getId())),o.removeAllBackendErrors(),o.onValueChanged(),i){var d=this.rules.getDOMAbstractionLayer();if(d)for(var p=0,h=s.length;p<h;p++)d.trigger("control-event",t,e,s[p],null)}this.quizScoreService.updateInAsyncMode()}}}},{key:"onElementFocusedByUser",value:function(e){var t,n=e.getAttribute("data-hash");n&&(t=this.engine.getDocument().getElementByHash(n))&&this.engine.getDocument().setActiveElement(t)}},{key:"checkOrUncheckAssociateRadioOrCheckboxDependingOnTheOtherValue",value:function(e){!function(t){""!==e.value.replace(/(^[\s]+|[\s]+$)/g,"")?t(e).closest("[data-role=choice]").find("input[type=radio], input[type=checkbox]").each((function(){this.checked||(this.checked=!0,t(this).trigger("change"))})):t(e).closest("[data-role=choice]").find("input[type=radio], input[type=checkbox]").each((function(){this.checked&&(this.checked=!1,t(this).trigger("change"))}))}(this.jq)}},{key:"getRules",value:function(){return this.rules}},{key:"getCommandDispatcher",value:function(){return this.commandDispatcher}},{key:"withViewFormContext",value:function(e){return this.viewFormContext=e,this}},{key:"getViewFormContext",value:function(){return this.viewFormContext}},{key:"withViewFormEnvironmentContext",value:function(e){return this.viewFormEnvironmentContext=e,this}},{key:"getViewFormEnvironmentContext",value:function(){return this.viewFormEnvironmentContext}},{key:"withCSRFToken",value:function(e){return this.csrfToken=e,this.jq.ajaxSetup({headers:{theToken:e}}),this}},{key:"getCSRFToken",value:function(){return this.csrfToken}},{key:"jql",value:function(e,t){return this.rules.getDatabase().createStatement(e)}},{key:"getDOMAbstractionLayer",value:function(){return this.domAbstractionLayer}},{key:"getRulesQueryBuilder",value:function(){return this.queryBuilder}},{key:"withShowSummaryAfterEachCalculation",value:function(e){return this.viewFormContext===O.vb.VIEW_FORM||this.viewFormContext===O.vb.SAVE_FOR_LATER||this.viewFormContext===O.vb.PDF_EXPORT?this.showSummaryAfterEachCalculation=!!e:this.showSummaryAfterEachCalculation=!1,this}},{key:"isShowSummaryAfterEachCalculation",value:function(){return this.showSummaryAfterEachCalculation}},{key:"getLoaderDependency",value:function(e){switch(e){case O.M.PAYMENT_PROCESSORS_LIST:return this.getPaymentProcessors();case O.M.SELECTED_PAYMENT_PROCESSOR_TYPE_ID:return this.commandDispatcher.getSelectedPaymentProcessorTypeId();case O.M.SELECTED_PAYMENT_PROCESSOR_EXTRA_DATA:return this.commandDispatcher.getSelectedPaymentProcessorExtraData();case O.M.INITIAL_QUIZ_TIMER:return this.getQuizTimer();case O.M.CURRENT_QUIZ_TIMER:return this.commandDispatcher.quizTimerCountdownValue;case O.M.SESSION_ID:return this.getSessionId();case O.M.I18N:return this.getI18n();case O.M.USER_INTERFACE:return this.getUI();case O.M.SKIP_CAPTCHA:return this.isCaptchaSkipped();case O.M.TRANSLATIONS_LANGUAGE_CODES:return this.getFormAvailableLanguages();case O.M.VIEW_FORM_CONTEXT:return this.getViewFormContext();case O.M.SUBMISSION_XML_DATETIME_START:return this.getSubmissionXMLDateTimeStart();case O.M.PAYMENTS_COUPON_CODE_CONFIGURATION:return this.getCouponConfiguration();case O.M.SUBMISSION_ID:return this.getSubmissionId();case O.M.FORM_SETTINGS:return this.getFormSettings();case O.M.SHOW_REALTIME_CALCULATIONS:return this.isShowSummaryAfterEachCalculation();case O.M.DETAILED_INVOICE_OPTIONS:return this.getDetailedInvoiceOptions();case O.M.LAST_CALCULATION_HTML_MARKUP:return this.commandDispatcher?this.commandDispatcher.getLastCalculationHTMLMarkup():"";case O.M.FONTS_MANAGER:return this.fontsManager;case O.M.GEOLOCATION_USER_COUNTRY_CODE:return this.getGeolocationUserCountryCode();case O.M.WIX_AUTHORIZED_REQUEST_DETAILS:return this.getWixAuthorizedRequestDetails();case O.M.THEME_STRATEGY:return this.getThemeStrategy();case O.M.EXTERNAL_THEME_INITIAL_PROPERTIES:return this.getPreloadedExternalThemeProperties();case O.M.DIFFERENCE_BETWEEN_CLIENT_AND_SERVER_TIME:return this.getDifferenceBetweenClientAndServerTime();case O.M.RULES_QUERY_BUILDER:return this.queryBuilder||null;case O.M.VIEW_FORM_CONTEXT_OPTIONS:return this.viewFormContextOptions||null;case O.M.IS_WORKFLOWS_VIEW_FORM_EMBED:return this.isWorkflowsViewForm;case O.M.WORKFLOWS_USERS_LIST:return this.getUsersList();case O.M.USER_FEATURES:return this.userFeatures||null;case O.M.SHOULD_SHOW_PAYMENT_SUMMARY:return this.hasProductsOrFixedFees;case O.M.HAS_ENABLED_PAYMENT_PROCESSORS:return this.checkFormHasPaymentProcessor();case O.M.HAS_CALCULATE_BUTTON:var t=this.getDetailedInvoiceOptions();return this.checkFormHasPaymentProcessor()&&!this.isShowSummaryAfterEachCalculation()&&(null===t||null!==t&&t.showPaymentsSummaryBelowForm);default:return null}}},{key:"onPluginRendered",value:function(e,t){switch(e){case"payments-selector":this.commandDispatcher.initPaymentsSelector(t);break;default:console.warn("onPluginRendered: Unknown plugin: ",e)}}},{key:"withQuizTimer",value:function(e){return this.quizTimer=e,this}},{key:"getQuizTimer",value:function(){return this.quizTimer}},{key:"getI18n",value:function(){return this.i18n||null}},{key:"getFormTranslationsService",value:function(){return this.formTranslationsService||null}},{key:"withUserId",value:function(e){return this.userId=e,this}},{key:"getUserId",value:function(){return this.userId}},{key:"getCouponConfiguration",value:function(){return this.couponConfiguration||null}},{key:"withCouponConfiguration",value:function(e){return this.couponConfiguration=e||null,this}},{key:"getLoaderType",value:function(){return O.B.VIEW}},{key:"withIsCaptchaSkipped",value:function(e){return this.captchaSkipped=!!e,this}},{key:"isCaptchaSkipped",value:function(){return this.captchaSkipped}},{key:"clearControlValue",value:function(e){try{var t=e.getAttribute("data-hash"),n=this.engine.getDocument().getElementByHash(t);n&&n.clearValue()}catch(i){}}},{key:"onHeaderDOMNodeTopPositionChanged",value:function(e){e<0?this.engine.getForm().setAttribute("data-has-fixed-header",""):this.engine.getForm().removeAttribute("data-has-fixed-header")}},{key:"getSubmissionXMLDateTimeStart",value:function(){return this.submissionXMLDateTimeStart||null}},{key:"withSubmissionXMLDateTimeStart",value:function(e){return this.submissionXMLDateTimeStart=e||null,this}},{key:"injectCouponCodeControlIntoFormIfNeeded",value:function(){if(this.couponConfiguration){var e=this.engine.createElement(b.a.CONTROL_TYPE_TEXT,void 0,this.engine.getDocument());e.getLabelDOMNode().setAttribute("data-i18n-text","textdef_42"),e.setProperty("label.labelText",this.couponConfiguration.label),e.updateLabelText(),this.engine.getDocument().withCouponCode(e),e.setAttached(!0)}}},{key:"withSubmissionId",value:function(e){return this.submissionId=e,this}},{key:"getSubmissionId",value:function(){return this.submissionId||null}},{key:"withUsersList",value:function(e){return this.usersList=e,this}},{key:"getUsersList",value:function(){return this.usersList||null}},{key:"withFormSettings",value:function(e){return this.formSettings=e,this}},{key:"getFormSettings",value:function(){return this.formSettings}},{key:"withPreviewOnlyMode",value:function(e){return(e=!!e)===this.previewOnlyMode||(this.previewOnlyMode=e,this.previewOnlyMode&&this.engine.getDocument().getRootNode().setAttribute("data-is-preview-mode","")),this}},{key:"isPreviewOnlyMode",value:function(){return this.previewOnlyMode}},{key:"withDetailedInvoiceOptions",value:function(e){return this.detailedInvoiceOptions=e||null,this}},{key:"getDetailedInvoiceOptions",value:function(){return this.detailedInvoiceOptions||null}},{key:"setupBodyDeviceAttribute",value:function(){""===x.a.meetsRequirements("* * mobile * *")?(document.body.setAttribute("data-device","mobile"),document.getElementsByTagName("html")[0].style.height="100%",document.body.style.height="100%"):document.body.setAttribute("data-device","desktop")}},{key:"getWixAuthorizedRequestDetails",value:function(){return JSON.parse(JSON.stringify(this.wixAuthorizedRequestDetails||null))}},{key:"notifyWindowParentWithFormDimensions",value:function(){var e=this,t=this.engine.getDocument().getProperty("options.widthInPixels"),n=this.engine.getDocument().getProperty("options.widthInPercents"),i=this.getFormId(),r=null===t||t<1?"".concat(~~n,"%"):"".concat(~~t,"px");try{window.parent.postMessage({message_type:"embedParams",message_content:{width:r,formId:i}},"*")}catch(a){}setTimeout((function(){e.jq(window).trigger("resize")}),100)}},{key:"getGeolocationUserCountryCode",value:function(){return this.geolocationUserCountryCode}},{key:"withGeolocationUserCountryCode",value:function(e){return this.geolocationUserCountryCode=e||null,this}},{key:"withWixAuthorizedRequestDetails",value:function(e){return this.wixAuthorizedRequestDetails=e||null,this}},{key:"getThemeStrategy",value:function(){return this.themeStrategy}},{key:"withThemeStrategy",value:function(e){return this.themeStrategy=e,this}},{key:"getPreloadedExternalThemeProperties",value:function(){return JSON.parse(JSON.stringify(this.preloadedExternalThemeProperties))}},{key:"withPreloadedExternalThemeProperties",value:function(e){return this.preloadedExternalThemeProperties=e||null,this}},{key:"getDifferenceBetweenClientAndServerTime",value:function(){var e=this.serverUTCOffset||0,t=-60*(new Date).getTimezoneOffset(),n=Math.abs(t-e);return t>=e?n:-n}},{key:"withServerUTCOffset",value:function(e){return this.serverUTCOffset=e,this}},{key:"withUserFeatures",value:function(e){return this.userFeatures=e,e&&e.allowIFrame&&M.a.USER_HTML_TAGS.push("iframe"),this}},{key:"getViewFormContextAsString",value:function(){switch(this.getViewFormContext()){case O.vb.VIEW_FORM:return"view-form";case O.vb.EDIT_FORM:return"edit-form";case O.vb.EDIT_SUBMISSION:return"edit-submission";case O.vb.APPROVAL:return"approval";case O.vb.QUIZ:return"quiz";case O.vb.SAVE_FOR_LATER:return"save-for-later";case O.vb.PDF_EXPORT:return"pdf-export";case O.vb.EDIT_LATER:return"edit-later";default:return""}}},{key:"onFormRulesAreLoadedFirstTimePageLoads",value:function(){var e=this;document.body.hasAttribute("data-rules-are-loaded")||(this.rules.getDatabase().on("busy",(function(){e.rulesPageLoader.onLoadRequestStart()})),this.rules.getDatabase().on("idle",(function(){e.rulesPageLoader.onLoadRequestEnd()}))),document.body.setAttribute("data-rules-are-loaded","")}},{key:"forceHiddenFieldsVisibilityInEditSubmissionMode",value:function(){if(this.viewFormContext===O.vb.EDIT_SUBMISSION)for(var e=this.engine.getDocument().getControlsList(),t=0,n=e.length;t<n;t++)e[t].setVisible(!0)}},{key:"getEngine",value:function(){return this.engine}},{key:"getQuizScoreService",value:function(){return this.quizScoreService}},{key:"withViewFormContextOptions",value:function(e){return this.viewFormContextOptions=e||null,this}},{key:"hideFormIfWeAreInAutoApproveContext",value:function(){this.viewFormContext===O.vb.APPROVAL&&this.viewFormContextOptions&&this.viewFormContextOptions.autoSubmitApproval&&document.body.setAttribute("data-is-approval-auto-submit-enabled","")}},{key:"markSalesforceControlsWithDOMAttribute",value:function(e,t){for(var n=0,i=e||[],r=i.length;n<r;n++){var a=this.domAbstractionLayer.getControlInstanceById(i[n]),o=void 0;a&&(o=a.getRootNode())&&("trigger"===t?o.setAttribute("data-is-salesforce-prefill-trigger","1"):o.setAttribute("data-is-salesforce-prefill-normal","1"));for(var s=o.querySelectorAll("input, select, textarea"),l=a.getHash(),c=0;c<s.length;c++)s[c].hasAttribute("id")||s[c].setAttribute("id","".concat(l,"_").concat(c)),s[c].setAttribute("autocomplete","off")}}},{key:"withControlsThatHaveRepeatablePathsAddedToPrefillValue",value:function(e){return this.controlsThatHaveRepeatablePathsAddedToPrefillValue=e,this}},{key:"getControlsThatHaveRepeatablePathsAddedToPrefillValue",value:function(){return this.controlsThatHaveRepeatablePathsAddedToPrefillValue}},{key:"setControlsRelationships",value:function(){var e=this,t=function(e,t,n){return n.indexOf(e)===t};this.rulesData.map((function(n){var i=n.expression.match(/(\d+){5,}/g);if(i){var r=i.map((function(e){return parseInt(e)})).filter(t),a=parseInt(n.action.target[0]),o={actionType:n.action.type,target:a,targetedBy:r};e.controlRelationships.push(o)}}))}},{key:"refreshCalculationForPreviouslyHiddenControl",value:function(e){if(null!==e&&!0===e.visibility){var t=function(e,t){for(var n=null,i=0;i<t.length;i++)t[i].target===e&&(n=t[i]);return n}(e.controlId,this.controlRelationships.filter((function(e){return e.actionType===O.eb.CALCULATE})));t&&this.domAbstractionLayer.trigger("compute-single-control-rule",t)}}},{key:"getAllowAutoSubmit",value:function(){return this.allowAutoSubmit}},{key:"setAllowAutoSubmit",value:function(e){this.allowAutoSubmit=e}},{key:"checkFormHasPaymentProcessor",value:function(){return this.paymentProcessors&&this.paymentProcessors.length>0||this.engine.getDocument().getConfiguration().getProperty("isPaymentEnabled")}},{key:"createLoader",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.i18n.translateText("loading_pleaseWait");if(this.form&&!this.loaderTarget){if(this.loaderTarget=this.form,this.loaderNode)return this.form.prepend(this.loaderNode),void(this.form.dataset.hasLoader="1");this.loaderNode=document.createElement("div"),this.loaderNode.classList.add("loader-container"),this.form.dataset.hasLoader="1",this.form.prepend(this.loaderNode),this.engine.getResourceManager().get("/modules/Typescript/Form/resources/preloader.html").then((function(n){var i={formHeader:e.i18n.translateText(ye.headerI18nKey),loaderText:t},r=new Nt.a(n);e.loaderNode.innerHTML=r.parse(i)})).fail((function(t){e.hideLoader()}))}}},{key:"hideLoader",value:function(){this.loaderTarget&&this.loaderNode&&this.loaderTarget.contains(this.loaderNode)&&(this.loaderTarget.removeChild(this.loaderNode),delete this.loaderTarget.dataset.hasLoader,this.loaderTarget=null)}},{key:"withUniqueViewId",value:function(e){return this.uniqueViewId=e||null,this}},{key:"getUniqueViewId",value:function(){return this.uniqueViewId}},{key:"withUniqueViewIdKey",value:function(e){return this.uniqueViewIdKey=e||null,this}},{key:"getUniqueViewIdKey",value:function(){return this.uniqueViewIdKey}},{key:"appendAbuseDisclaimerToPageFooter",value:function(){var e,t=document.getElementById("abuse-disclaimer-root");t&&this.formSettings.formFooter&&tr.a.render(Ei.a.createElement(DE,{href:null===(e=this.formSettings.formFooter.abuse)||void 0===e?void 0:e.anchorUrl},null),t)}}]),n}(ir.a),ME=function(){wd.addPropertyChangeEventListener(b.a.ELEMENT_TYPE_FORM,/^options\.widthIn(Pixels|Percents)$/,(function(e){e.getTheme().recompute()})),wd.addPropertyChangeEventListener(b.a.ELEMENT_TYPE_FORM,/^options\.(label(Placement|WidthInUnits|TextAlignment)|instructions(Placement|TextAlignment)|direction|paginationType|showPageTitles)$/,(function(e,t,n,i){switch(i){case"options.labelTextAlignment":t.updateLabelTextAlignment();break;case"options.instructionsTextAlignment":t.updateInstructionsTextAlignment();break;case"options.direction":t.updateTextDirection();break;case"options.labelPlacement":t.updateLabelPlacement();case"options.labelWidthInUnits":case"options.instructionsPlacement":e.reconfigureLayout();break;case"options.paginationType":case"options.showPageTitles":t.renderPageHeadersInImmediateMode()}})),wd.addPropertyChangeEventListener(b.a.ELEMENT_TYPE_FORM,"name.value",(function(e,t,n,i,r){e.getLoader().execCommand("form-name-changed"),e.getLoader().getLoaderType()===O.B.EDIT&&window.EditorPanelConfig.getPublishPanel().withDependency("formName",r)})),wd.addPropertyChangeEventListener(null,"label.labelText",(function(e,t,n){n.getTypeId()!==b.a.CONTAINER_TYPE_PAGE&&n.getTypeId()!==b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE?n.isRenderingSupported()&&n.updateLabelText():t.renderPageHeadersInImmediateMode()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_HEADING,/^configuration.(fontSize|alignment|color)$/,(function(e,t,n){n.updateLabelText()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_DATE,/^(configuration\.(acceptedDaysOfWeek|weekStart)|validation\.(type))$/,(function(e,t,n){n.setDateControlOptions()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_TIME,"configuration.timeFormat",(function(e,t,n){n.setTimeControlOptions()})),wd.addPropertyChangeEventListener(null,"instructions.text",(function(e,t,n){n.isRenderingSupported()&&n.updateInstructionsText()})),wd.addPropertyChangeEventListener(null,/^label.is(CompactField|Removed)$/,(function(e,t,n,i,r){n.isRenderingSupported()&&n.reRender()})),wd.addPropertyChangeEventListener(null,"label.isBold",(function(e,t,n){n.isRenderingSupported()&&n.updateLabelBoldState()})),wd.addPropertyChangeEventListener(null,"label.isItalic",(function(e,t,n){n.isRenderingSupported()&&n.updateLabelItalicState()})),wd.addPropertyChangeEventListener(null,"label.isHidden",(function(e,t,n){n.isRenderingSupported()&&n.updateLabelHiddenState()})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_HEADING],/(configuration.fieldName)|(label.isRemoved)/,(function(e,t,n,i){switch(i){case"configuration.fieldName":n.updateFieldNameAttribute();break;case"label.isRemoved":n.updateLabelRemovedState()}})),wd.addPropertyChangeEventListener(null,"id",(function(e,t,n,i,r){})),wd.addPropertyChangeEventListener(null,"options.required",(function(e,t,n){n.isRenderingSupported()&&n.updateRequiredState()})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_FORM_HEADER,b.a.CONTROL_TYPE_HTML_BLOCK],"configuration.innerHTML",(function(e,t,n){n.updateHTMLContent()})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_TEXTAREA,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_TERMS_OF_SERVICE,b.a.CONTROL_TYPE_WEBSITE],/^configuration.defaultValue(IsUniqueId)?$/,(function(e,t,n){n.updateDefaultValue()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_TERMS_OF_SERVICE,"configuration.agreementLabelAdditionalText",(function(e,t,n){n.updateTOSAdditionalLabelText()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_ACTION_BAR,null,(function(e,t,n){n.updateDOMAttributes(),e.getLoader().execCommand("repaint-footer")})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_CAPTCHA,/^(configuration|label)\./,(function(e,t,n,i){if(!0!==e.getLoader().getLoaderDependency(O.M.SKIP_CAPTCHA)){"configuration.type"===i&&(n.onCaptchaTypeChanged(),n.reRender());var r=t.getPageByIndex(t.getNumberOfPages()-1);r&&r.renderFooter()}})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_DROPDOWN,b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_LIKERT_SCALE],/^(choices\.|options\.randomizeOrder$|layout\.(columns|isSideBySide)$)/,(function(e,t,n){try{n.updateChoices()}catch(i){console.warn("FAILED to update choices on element "+n.getHash()+" of type "+n.getElementName())}})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_LIKERT_SCALE,/^options\.(inlineOptions|boldOptions)$/,(function(e,t,n,i){switch(i){case"options.inlineOptions":n.updateChoices(),n.updateInlineOptionsAttribute();break;case"options.boldOptions":n.updateBoldOptionsAttribute()}})),wd.addPropertyChangeEventListener(b.a.CONTAINER_TYPE_LIKERT_WRAPPER,/^options\.(inlineOptions|boldOptions|choiceTextAlignment)$/,(function(e,t,n,i){switch(i){case"options.inlineOptions":n.updateInlineOptionsState();break;case"options.boldOptions":n.updateBoldOptionsState();break;case"options.choiceTextAlignment":n.updateChoiceTextAlignment()}})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_RADIO,"options.clearable",(function(e,t,n){n.updateClearableOption()})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_CHECKBOX],"layout.direction",(function(e,t,n){n.reRender()})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_RADIO],"layout.isSideBySide",(function(e,t,n){n.updateSideBySideAttribute()})),wd.addPropertyChangeEventListener(null,"options.hidden",(function(e,t,n){n.updateHiddenAttribute()})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_DROPDOWN],"options.showNumberOfChoicesLeft",(function(e,t,n){n.updateChoices()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_MAP,/^configuration\.(initialZoom|isInteractive|initialAddressText)$/,(function(e,t,n,i){switch(i){case"configuration.initialZoom":n.updateMapZoomSetting();break;case"configuration.isInteractive":n.updateMapInteractiveSetting();break;case"configuration.initialAddressText":n.updateMarkerPositionInThrottledMode()}})),wd.addPropertyChangeEventListener(null,/^validation\./,(function(e,t,n){n.getElementKind()===O.p.CONTROL&&"function"===typeof n.onValidationChanged&&n.onValidationChanged()})),wd.addPropertyChangeEventListener(null,/^value\./,(function(e,t,n,i,r,a){(n.trigger("change"),n.getElementKind()===O.p.CONTROL&&a!==r)&&(n.synchronizationEnabled&&n.synchronizeValue(),n.getForm().getEngine().getLoader().getLoaderDependency(O.M.SHOW_REALTIME_CALCULATIONS)&&t.realTimeCalculationsThrottler())})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_NAME,/^configuration\.field/,(function(e,t,n){n.reRender()})),Ot.a.addVirtualProperty("configuration.uploadToCustomizeImage","string",[b.a.CONTROL_TYPE_IMAGE],(function(){return this.hasProperty("configuration.remoteURL")?this.getProperty("configuration.remoteURL"):null}),(function(e){this.hasProperty("configuration.remoteURL")&&this.setProperty("configuration.remoteURL",e)})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_IMAGE,/^configuration\.(remoteURL|name|align|alternateText)$/,(function(e,t,n,i){"configuration.alternateText"===i?n.updateAlternateTextAttribute():n.updateImageOptions()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_SOCIAL,/^configuration\./,(function(e,t,n,i){"configuration.alignment"===i?n.updateAlignment():n.refreshButtons()})),wd.addPropertyChangeEventListener(null,"instructions.showInstructionsOnClick",(function(e,t,n){n.updateShowInstructionsOnClick()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_HTML_BLOCK,"configuration.fieldName",(function(e,t,n){n.updateFieldNameAttribute()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_STAR_RATING,/^configuration\.(displayAs|starsCount)$/,(function(e,t,n,i){switch(i){case"configuration.displayAs":n.updateStarShapeType();break;case"configuration.starsCount":n.updateStarsCount()}})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_ADDRESS,"configuration.zoneLabel",(function(e,t,n){n.updateZoneLabelPlaceholder()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_ADDRESS,"configuration.postalCodeLabel",(function(e,t,n){n.updatePostalCodeLabelPlaceholder()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_ADDRESS,"configuration.defaultCountry",(function(e,t,n){n.setDefaultCountry()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_ADDRESS,/^configuration\.(addressStyle|countries)$/,(function(e,t,n){n.populateCountryDOMNode(),n.configureRegionDOMNode(),n.updateZoneLabelPlaceholder(),n.reRender()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_NAME,/^configuration\.(defaultValue|fieldInitials|fieldMiddleName|fieldTitle|titleChoices)$/,(function(e,t,n,i){switch(i){case"configuration.titleChoices":n.updateTitleOptions();default:n.updateDefaultName()}})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_FILE,/^configuration\.(allow|forbid)Extensions$/,(function(e,t,n,i){switch(i){case"configuration.allowExtensions":n.updateAllowedFileExtensions();break;case"configuration.forbidExtensions":n.updateDisabledFileExtensions()}})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_DATE],"configuration.defaultValue",(function(e,t,n){n.loadDefaultDateValueIntoForm()})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_TIME],/^configuration\.(defaultValue|timeFormat)$/,(function(e,t,n){n.loadDefaultTimeValueIntoForm()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_PRICE,"options.intendedCurrencyISOCode",(function(e,t,n){n.updateCurrencyLabel()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_PRICE,"options.hideDecimals",(function(e,t,n){n.updatePlaceholderValue()})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_PASSWORD,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_WEBSITE],"synchronize.withControlId",(function(e,t,n){n.onSynchronizeWithControlIdPropertyChanged()})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_PASSWORD,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_WEBSITE],"synchronize.enabled",(function(e,t,n){n.onSynchronizeEnabledPropertyChanged()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_TEXTAREA,"size.heightInRows",(function(e,t,n){n.setHeightInRows()})),wd.addPropertyChangeEventListener(null,"validation.type",(function(e,t,n,i,r,a){n.getElementKind()===O.p.CONTROL&&n.displayValidationUpgradePopupIfNeeded(a)})),wd.addPropertyChangeEventListener(b.a.CONTAINER_TYPE_LIKERT_WRAPPER,"options.randomizeOrder",(function(e,t,n){n.randomizeOptions()})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],/^configuration\.(isLimitSubmissionsEnabled|limitSubmissionsTotal)$/,(function(e,t,n){n.updateInstructionsText()})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_WIDGET_VIDEO,b.a.CONTROL_TYPE_WIDGET_PDF,b.a.CONTROL_TYPE_WIDGET_FACEBOOK],"configuration.url",(function(e,t,n){n.generateProperLinkForIframe()})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_WEBSITE,b.a.CONTROL_TYPE_EMAIL],"options.suggestions",(function(e,t,n){n.initializeSuggestions()})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_TEXTAREA,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_WEBSITE,b.a.CONTROL_TYPE_NUMBER],"options.readOnly",(function(e,t,n){n.onReadonlyStateChanged()})),wd.addPropertyChangeEventListener(b.a.CONTAINER_TYPE_REPEATABLE,"configuration.addButtonText",(function(e,t,n){n.onAddButtonTextChanged()})),wd.addPropertyChangeEventListener(b.a.CONTAINER_TYPE_REPEATABLE,"configuration.showBorders",(function(e,t,n){n.onBorderSettingsChanged()})),wd.addPropertyChangeEventListener(b.a.CONTAINER_TYPE_REPEATABLE,"configuration.maxNumberOfGroupsAllowed",(function(e,t,n){n.updateNumberOfGroupsAllowed()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_MAP,"configuration.apiKey",(function(t,n,i){e(i)}));var e=Gd.a.create((function(e){e.updateApiKey(),e.initializeMapCanvas()}),500);wd.addPropertyChangeEventListener(null,"payments.value",(function(e,t,n){e.getLoader().getCommandDispatcher().trackFirstValueSaved(n)})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_FEE,"payments.value",(function(e,t,n){n.updatePriceFee()})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],"configuration.prefix",(function(e,t,n){n.updatePrefixLabel()})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],/^label.(isCompactField|labelText)$/,(function(e,t,n){n.getTypeId()!==b.a.CONTAINER_TYPE_PAGE&&n.getTypeId()!==b.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE&&n.isRenderingSupported()&&n.syncInputCompactField()})),wd.addPropertyChangeEventListener(b.a.CONTROL_TYPE_DROPDOWN,"options.placeholderText",(function(e,t,n){n.updateChoices()})),wd.addPropertyChangeEventListener([b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_CHECKBOX],"choices.useButtonLikeChoices",(function(e,t,n){e.getLoader().getCommandDispatcher().updateLayoutProperties(n)}))},xE=function(){Sd.addNormalizationSelector("#form div[data-type=virtual-form-table-row]:empty"),Sd.addNormalizationSelector('#form div[data-role=control][data-type=separator][data-colspan="0"]'),Sd.addNormalizationSelector('#form div[data-type=virtual-form-table-row][data-num-children="1"] > div[data-role=control][data-type=separator]'),Sd.addNormalizationSelector('#form div[data-role=container][data-type=div][data-num-children="0"], #form div[data-role=container][data-type=div]:not([data-num-children])'),Sd.addNormalizationSelector('#form div[data-role=container][data-type=div][data-num-children="1"] > div[data-role=container][data-role=virtual-form-table-row][data-num-children="1"] > div[data-hash]',(function(e){var t=e.getParent(),n=t.getParent();n.insertBefore(t,e),n.removeChild(t)})),Sd.addNormalizationSelector("#form div[data-type=virtual-form-table-row] > div[data-role=control][data-type=page-break]")},UE=function(){Ot.a.addVirtualProperty("label.visibilityMode","int",[b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_DROPDOWN,b.a.CONTROL_TYPE_FILE,b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_TEXTAREA,b.a.CONTROL_TYPE_ADDRESS,b.a.CONTROL_TYPE_DATE,b.a.CONTROL_TYPE_EMAIL,b.a.CONTAINER_TYPE_LIKERT_WRAPPER,b.a.CONTROL_TYPE_LIKERT_SCALE,b.a.CONTROL_TYPE_NAME,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_PHONE,b.a.CONTROL_TYPE_PRICE,b.a.CONTROL_TYPE_TIME,b.a.CONTROL_TYPE_MAP,b.a.CONTROL_TYPE_PASSWORD,b.a.CONTROL_TYPE_SIGNATURE,b.a.CONTROL_TYPE_STAR_RATING,b.a.CONTROL_TYPE_TERMS_OF_SERVICE,b.a.CONTROL_TYPE_WEBSITE,b.a.CONTROL_TYPE_HEADING,b.a.CONTROL_TYPE_COUPON,b.a.CONTROL_TYPE_FORMULA,b.a.CONTROL_TYPE_FEE],(function(){return this.getVisibilityMode()}),(function(e){this.setVisibilityMode(e)})),Ot.a.addVirtualProperty("choices.statements","I18nText[]",[b.a.CONTAINER_TYPE_LIKERT_WRAPPER],(function(){return this.getChoiceStatements()}),(function(e){this.setChoiceStatements(e)})),Ot.a.addVirtualProperty("options.required","boolean",[b.a.CONTAINER_TYPE_LIKERT_WRAPPER],(function(){return this.isRequired()}),(function(e){this.setRequired(e)})),Ot.a.addVirtualProperty("configuration.allowedPlatforms","int[]",[b.a.CONTROL_TYPE_SOCIAL],(function(){return this.getAllowedSocialPlatforms()}),(function(e){this.setAllowedSocialPlatforms(e)})),Ot.a.addVirtualProperty("choices.scale","TextChoiceInterface[]",[b.a.CONTAINER_TYPE_LIKERT_WRAPPER],(function(){return this.getChoiceScale()}),(function(e){this.setChoiceScale(e)})),Ot.a.addVirtualProperty("options.quizOptions","TextChoiceInterface[]",[b.a.CONTAINER_TYPE_LIKERT_WRAPPER],(function(){return this.getChoiceScale()}),(function(e){this.setProperty("choices.scale",e)})),Ot.a.addVirtualProperty("options.paginationType","int",[b.a.CONTAINER_TYPE_PAGE],(function(){return this.getPaginationType()}),(function(e){this.setPaginationType(e)})),Ot.a.addVirtualProperty("options.showPageTitles","boolean",[b.a.CONTAINER_TYPE_PAGE],(function(){return this.getPageTitlesVisibility()}),(function(e){this.setPageTitlesVisibility(e)})),Ot.a.addVirtualProperty("options.widthUnit","string",[b.a.ELEMENT_TYPE_FORM],(function(){return this.getWidthUnit()}),(function(e){this.setWidthUnit(e)})),Ot.a.addVirtualProperty("options.requiredFields","int[]",[b.a.CONTROL_TYPE_ADDRESS],(function(){return this.getRequiredFields()}),(function(e){this.setRequiredFields(e)})),Ot.a.addVirtualProperty("configuration.allowedFields","int[]",[b.a.CONTROL_TYPE_ADDRESS],(function(){return this.getAllowedFields()}),(function(e){this.setAllowedFields(e)})),Ot.a.addVirtualProperty("value.fullCountryName","string",[b.a.CONTROL_TYPE_ADDRESS],(function(){return this.getFullCountryName()}),(function(e){e&&2===e.length?this.setCountryByCountryCode(e):this.setCountryByCountryName(e)})),Ot.a.addVirtualProperty("configuration.optionalFields","int[]",[b.a.CONTROL_TYPE_NAME],(function(){return this.getOptionalFields()}),(function(e){this.setOptionalFields(e)})),Ot.a.addVirtualProperty("configuration.configurableButtons","string[]",[b.a.CONTROL_TYPE_ACTION_BAR],(function(){return this.getConfigurableButtons()}),(function(e){this.setConfigurableButtons(e)})),Ot.a.addVirtualProperty("configuration.acceptedDaysOfWeekString","string[]",[b.a.CONTROL_TYPE_DATE],(function(){return this.getAcceptedDaysOfWeekString()}),(function(e){this.setAcceptedDaysOfWeekString(e)})),Ot.a.addVirtualProperty("value.stringValue","string",[b.a.CONTROL_TYPE_DATE,b.a.CONTROL_TYPE_TIME],(function(){return this.getStringValue()}),(function(e){this.setStringValue(e)})),Ot.a.addVirtualProperty("value.fixedPart","string",[b.a.CONTROL_TYPE_PRICE],(function(){return this.getIntPartAsString()}),(function(e){this.setIntPartFromString(e)})),Ot.a.addVirtualProperty("value.decimalPart","string",[b.a.CONTROL_TYPE_PRICE],(function(){return this.getDecimalPartAsString()}),(function(e){this.setDecimalPartAsString(e)})),Ot.a.addVirtualProperty("value.asFloat","number",[b.a.CONTROL_TYPE_PRICE],(function(){return this.getValueAsFloat()}),(function(e){this.getValueAsFloat()>0&&e!=this.getValueAsFloat()&&this.getForm().getEngine().loader.getDOMAbstractionLayer().trigger("compute-form-rules",(function(){})),this.setValueFromFloat(e)})),Ot.a.addVirtualProperty("value.downloadURL","string",[b.a.CONTROL_TYPE_FILE],(function(){return this.getDownloadURL()}),(function(e){this.setDownloadURL(e)})),Ot.a.addVirtualProperty("options.isNumberOfTimesAnOptionCanBeChosen","boolean",[b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_DROPDOWN],(function(){return this.isNumberOfTimesAnOptionCanBeChosen()}),(function(e){this.setIsNumberOfTimesAnOptionCanBeChosen(e)})),Ot.a.addVirtualProperty("options.configureValues","TextChoiceInterface[]",[b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_DROPDOWN],(function(){return this.getChoicesValues()}),(function(e){this.setChoicesValues(e)})),Ot.a.addVirtualProperty("options.quizOptions","TextChoiceInterface[]",[b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_DROPDOWN],(function(){return this.getChoicesValues()}),(function(e){this.setChoicesValues(e)})),Ot.a.addVirtualProperty("payments.virtualValue","number",[b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_STAR_RATING,b.a.CONTROL_TYPE_TERMS_OF_SERVICE,b.a.CONTROL_TYPE_PRICE,b.a.CONTROL_TYPE_FEE],(function(){return Tn.getValueForSingleValueControl(this)}),(function(e){Tn.setValueForSingleValueControl(this,e)})),Ot.a.addVirtualProperty("payments.virtualValue","TextChoiceInterface[]",[b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_DROPDOWN],(function(){return Tn.getValueForOptionsBasedControl(this)}),(function(e){Tn.setValueForOptionsBasedControl(this,e)})),Ot.a.addVirtualProperty("payments.virtualValue","TextChoiceInterface[]",[b.a.CONTAINER_TYPE_LIKERT_WRAPPER],(function(){return Tn.getValueForComposedControl(this)}),(function(e){Tn.setValueForComposedControl(this,e)})),Ot.a.addVirtualProperty("payments.productsDialogTrigger","any",[b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_STAR_RATING,b.a.CONTROL_TYPE_TERMS_OF_SERVICE,b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_DROPDOWN,b.a.CONTROL_TYPE_PRICE,b.a.CONTAINER_TYPE_LIKERT_WRAPPER],(function(){}),(function(){})),Ot.a.addVirtualProperty("coupons.couponCodes","ICouponCodeSettings[]",[b.a.CONTROL_TYPE_COUPON],(function(){return this.getCouponCodes()}),(function(e){this.setCouponCodes(e)})),Ot.a.addVirtualProperty("options.displaySuggestions","boolean",[b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_WEBSITE],(function(){return this.getSuggestionsVisibility()}),(function(e){this.setSuggestionsVisibility(e)})),Ot.a.addVirtualProperty("configuration.minSizeInKiloBytes","number",[b.a.CONTROL_TYPE_FILE],(function(){return this.getMinSizeInKiloBytes()}),(function(e){this.setMinSizeInKiloBytes(e)})),Ot.a.addVirtualProperty("configuration.maxSizeInKiloBytes","number",[b.a.CONTROL_TYPE_FILE],(function(){return this.getMaxSizeInKiloBytes()}),(function(e){this.setMaxSizeInKiloBytes(e)})),Ot.a.addVirtualProperty("options.displayPrefix","boolean",[b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],(function(){return this.getPrefixVisibility()}),(function(e){this.setPrefixVisibility(e)})),Ot.a.addVirtualProperty("choices.displayPlaceholderText","boolean",[b.a.CONTROL_TYPE_DROPDOWN],(function(){return this.getPlaceholderTextVisibility()}),(function(e){this.setPlaceholderTextVisibility(e)})),Ot.a.addVirtualProperty("verification.displayCaptcha","boolean",[b.a.CONTROL_TYPE_CAPTCHA],(function(){return this.getCaptchaVisibility()}),(function(e){this.setCaptchaVisibility(e)})),Ot.a.addVirtualProperty("options.masterFontFamily","string",[b.a.ELEMENT_TYPE_FORM],(function(){return this.getMasterFont()}),(function(e){this.setAllFonts(e)})),Ot.a.addVirtualProperty("options.masterTextColor","string",[b.a.ELEMENT_TYPE_FORM],(function(){return this.getMasterTextColor()}),(function(e){this.setAllTextColor(e)}))},FE=function(){bd.a.makePropertyHiddenInInspectorPanel(/(^label\.(widthInUnits|isCompactField|isHidden|isRemoved)$|^configuration\.(remoteURL|id|name|size|mimeType)$|^value\.|^layoutSize\.|i18n|I18n)/,null,null),bd.a.makePropertyHiddenInInspectorPanel(/^options\.(paginationType|showPageTitles)|name\.value$/,null,[b.a.ELEMENT_TYPE_FORM]),bd.a.makePropertyHiddenInInspectorPanel(/^(options|configuration)\.(required|isRequiredField(Address1|Address2|City|Zone|ZipCode|Country)|field(Address1|Address2|City|Zone|ZipCode|Country))$/,null,b.a.CONTROL_TYPE_ADDRESS),bd.a.makePropertyHiddenInInspectorPanel(/^(size\.value|choices\.allowOther)$/,null,b.a.CONTROL_TYPE_DROPDOWN),bd.a.makePropertyHiddenInInspectorPanel(/^configuration\.hasButtonGooglePlus|hasButtonLinkedin|hasButtonTwitter|hasFacebookLike|hasFacebookShare$/,null,b.a.CONTROL_TYPE_SOCIAL),bd.a.makePropertyHiddenInInspectorPanel(/^configuration\.minValue|maxValue$/,null,[b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_EMAIL]),bd.a.makePropertyHiddenInInspectorPanel(/^(configuration\.mapHeight|instructions\.showInstructionsOnClick)$/,null,b.a.CONTROL_TYPE_MAP),bd.a.makePropertyHiddenInInspectorPanel(/^configuration\.(fieldInitials|fieldMiddleName|fieldTitle)$/,null,b.a.CONTROL_TYPE_NAME),bd.a.makePropertyHiddenInInspectorPanel(/^(configuration\.has(Approve|Calculate|Next|Preview|Previous|Print|Reset|SaveForLater|Submit|Update|Purchase)Button|label\.is(Bold|Italic))$/,null,b.a.CONTROL_TYPE_ACTION_BAR),bd.a.makePropertyHiddenInInspectorPanel(/^configuration\.(maxValue|minValue)$/,null,b.a.CONTROL_TYPE_WEBSITE),bd.a.makePropertyHiddenInInspectorPanel("configuration.acceptedDaysOfWeek",null,b.a.CONTROL_TYPE_DATE),bd.a.makePropertyHiddenInInspectorPanel("validation.type",null,[b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_WEBSITE,b.a.CONTROL_TYPE_FORMULA]),bd.a.makePropertyHiddenInInspectorPanel("configuration.disableSubmitButtonAfterClick",null,b.a.CONTROL_TYPE_ACTION_BAR),bd.a.makePropertyHiddenInInspectorPanel("instructions.showInstructionsOnClick",null,[b.a.CONTROL_TYPE_FILE,b.a.CONTAINER_TYPE_REPEATABLE]),bd.a.makePropertyHiddenInInspectorPanel("payments.value",null,[b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_STAR_RATING,b.a.CONTROL_TYPE_TERMS_OF_SERVICE,b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_DROPDOWN,b.a.CONTROL_TYPE_PRICE,b.a.CONTROL_TYPE_LIKERT_SCALE]),bd.a.makePropertyHiddenInInspectorPanel("payments.hasProductsSettingsEntry",null,[b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_STAR_RATING,b.a.CONTROL_TYPE_TERMS_OF_SERVICE,b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_DROPDOWN,b.a.CONTROL_TYPE_PRICE,b.a.CONTROL_TYPE_LIKERT_SCALE]),bd.a.makePropertyHiddenInInspectorPanel("payments.isProduct",null,null),bd.a.makePropertyHiddenInInspectorPanel("configuration.minSizeInBytes",null,[b.a.CONTROL_TYPE_FILE]),bd.a.makePropertyHiddenInInspectorPanel("configuration.maxSizeInBytes",null,[b.a.CONTROL_TYPE_FILE]),bd.a.makePropertyHiddenInInspectorPanel("options.useDifferentValuesPerStatement",null,[b.a.CONTAINER_TYPE_LIKERT_WRAPPER]),bd.a.makePropertyHiddenInInspectorPanel("payments.hasProductsSettingsEntry","boolean",[b.a.CONTROL_TYPE_FEE]),bd.a.makePropertyHiddenInInspectorPanel("payments.value","number[]",[b.a.CONTROL_TYPE_FEE])},BE=function(){kd.a.setPropertyGroup(null,"configuration.maxLength",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(null,"configuration.minLength",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(null,"configuration.maxNumberOfWords",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(null,"configuration.minNumberOfWords",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(null,"options.required",kd.a.ATTRIBUTE_QUICK_SETUP),kd.a.setPropertyGroup(null,"options.noDuplicates",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_TEXTAREA,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_NAME,b.a.CONTROL_TYPE_WEBSITE,b.a.CONTROL_TYPE_PASSWORD,b.a.VIRTUAL_SELECTION_CONTROL],"configuration.defaultValue",kd.a.ATTRIBUTE_DEFAULT_VALUE),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_TEXT],"configuration.defaultValueIsUniqueId",kd.a.ATTRIBUTE_DEFAULT_VALUE),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_CHECKBOX,"choices.maxNumberOfChoices",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_CHECKBOX,"choices.minNumberOfChoices",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(b.a.CONTAINER_TYPE_LIKERT_WRAPPER,"choices.scale",kd.a.ATTRIBUTE_SCALE),kd.a.setPropertyGroup(b.a.CONTAINER_TYPE_LIKERT_WRAPPER,"choices.statements",kd.a.ATTRIBUTE_STATEMENTS),kd.a.setPropertyGroup(b.a.CONTAINER_TYPE_LIKERT_WRAPPER,"options.boldOptions",kd.a.ATTRIBUTE_LAYOUT),kd.a.setPropertyGroup(b.a.CONTAINER_TYPE_LIKERT_WRAPPER,"options.choiceTextAlignment",kd.a.ATTRIBUTE_LAYOUT),kd.a.setPropertyGroup(b.a.CONTAINER_TYPE_LIKERT_WRAPPER,"options.inlineOptions",kd.a.ATTRIBUTE_LAYOUT),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_STAR_RATING,"configuration.defaultValue",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_STAR_RATING,"configuration.displayAs",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_STAR_RATING,"configuration.starsCount",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_FILE,"options.multiple",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_FILE,"configuration.allowExtensions",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_FILE,"configuration.isAllowFolderUpload",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_FILE,"configuration.forbidExtensions",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_FILE,"configuration.maxSizeInBytes",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_FILE,"configuration.minSizeInBytes",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],"configuration.maxValue",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],"configuration.minValue",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],"configuration.limitSubmissionsTotal",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_NAME,"configuration.optionalFields",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_NAME,"configuration.titleChoices",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_ADDRESS,"configuration.addressStyle",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_ADDRESS,"configuration.allowedFields",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_ADDRESS,"configuration.countries",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_ADDRESS,"configuration.defaultCountry",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_ADDRESS,"configuration.zoneLabel",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_ADDRESS,"options.requiredFields",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_DATE,"configuration.acceptedDaysOfWeek",kd.a.ATTRIBUTE_ACCEPTED_DATES),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_DATE,"configuration.acceptedDaysOfWeekString",kd.a.ATTRIBUTE_ACCEPTED_DATES),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_DATE,"configuration.maxDateRelativeValue",kd.a.ATTRIBUTE_ACCEPTED_DATES),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_DATE,"configuration.minDateRelativeValue",kd.a.ATTRIBUTE_ACCEPTED_DATES),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_DATE,"configuration.defaultValue",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_DATE,"configuration.weekStart",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_TIME,"configuration.defaultValue",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_TIME,"configuration.defaultValue",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_TIME,"configuration.timeFormat",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_PRICE,"options.intendedCurrencyISOCode",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_PRICE,"options.hideDecimals",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_TERMS_OF_SERVICE,"configuration.agreementHTMLMarkup",kd.a.ATTRIBUTE_AGREEMENT_TEXT),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_TERMS_OF_SERVICE,"configuration.linkBehaviour",kd.a.ATTRIBUTE_AGREEMENT_TEXT),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_TERMS_OF_SERVICE,"configuration.popupHeightInPixels",kd.a.ATTRIBUTE_AGREEMENT_TEXT),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_TERMS_OF_SERVICE,"configuration.popupWidthInPixels",kd.a.ATTRIBUTE_AGREEMENT_TEXT),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_TERMS_OF_SERVICE,"configuration.url",kd.a.ATTRIBUTE_AGREEMENT_TEXT),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_TERMS_OF_SERVICE,"configuration.agreementLabelAdditionalText",kd.a.ATTRIBUTE_AGREEMENT_TEXT),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_TERMS_OF_SERVICE,"configuration.defaultValue",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_HEADING,"label.labelText",kd.a.ATTRIBUTE_TEXT),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_HEADING,"label.visibilityMode",kd.a.ATTRIBUTE_TEXT),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_HEADING,"label.isBold",kd.a.ATTRIBUTE_TEXT),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_HEADING,"label.isItalic",kd.a.ATTRIBUTE_TEXT),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_HEADING,"configuration.fontSize",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_HTML_BLOCK,"configuration.innerHTML",kd.a.ATTRIBUTE_HTML_CONTENT),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_IMAGE,"configuration.uploadToCustomizeImage",kd.a.ATTRIBUTE_IMAGE),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_IMAGE,"configuration.align",kd.a.ATTRIBUTE_IMAGE),kd.a.setPropertyGroup(b.a.CONTAINER_TYPE_PAGE,"label.labelText",kd.a.ATTRIBUTE_PAGE_TITLE),kd.a.setPropertyGroup(b.a.CONTAINER_TYPE_PAGE,"options.paginationType",kd.a.ATTRIBUTE_LAYOUT),kd.a.setPropertyGroup(b.a.CONTAINER_TYPE_PAGE,"options.showPageTitles",kd.a.ATTRIBUTE_LAYOUT),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_SOCIAL,"configuration.allowedPlatforms",kd.a.ATTRIBUTE_BUTTONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_SOCIAL,"configuration.alignment",kd.a.ATTRIBUTE_BUTTONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_SOCIAL,"configuration.facebookTitle",kd.a.ATTRIBUTE_FACEBOOK_SHARE),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_SOCIAL,"configuration.facebookDescription",kd.a.ATTRIBUTE_FACEBOOK_SHARE),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_SOCIAL,"configuration.useCustomLink",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_SOCIAL,"configuration.customLink",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_MAP,"configuration.initialAddressText",kd.a.ATTRIBUTE_DEFAULT_MAP),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_MAP,"configuration.initialZoom",kd.a.ATTRIBUTE_DEFAULT_MAP),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_MAP,"configuration.isInteractive",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_CAPTCHA,"configuration.type",kd.a.ATTRIBUTE_QUICK_SETUP),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_ACTION_BAR,"configuration.buttonsPosition",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_ACTION_BAR,"configuration.configurableButtons",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_ACTION_BAR,"label.submitButtonText",kd.a.ATTRIBUTE_SUBMIT_BUTTON),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_ACTION_BAR,"label.autoSubmitButtonText",kd.a.ATTRIBUTE_SUBMIT_BUTTON),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_ACTION_BAR,"configuration.disableSubmitButtonAfterClick",kd.a.ATTRIBUTE_SUBMIT_BUTTON),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_ACTION_BAR,"configuration.hasSubmitButtonIcon",kd.a.ATTRIBUTE_SUBMIT_BUTTON),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_ACTION_BAR,"label.resetButtonText",kd.a.ATTRIBUTE_RESET_BUTTON),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_ACTION_BAR,"label.isItalic",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_ACTION_BAR,"label.isBold",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_HEADING,b.a.CONTROL_TYPE_HTML_BLOCK,b.a.CONTROL_TYPE_IMAGE],"configuration.fieldName",kd.a.ATTRIBUTE_FIELD_NAME),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_IMAGE],"configuration.alternateText",kd.a.ATTRIBUTE_ALT_TEXT),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_PASSWORD,b.a.CONTROL_TYPE_WEBSITE,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_FORMULA],"synchronize.enabled",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_PASSWORD,b.a.CONTROL_TYPE_WEBSITE,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_FORMULA],"synchronize.withControlId",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_TEXTAREA,"size.heightInRows",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],"configuration.currentSubmissionsValue",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],"configuration.isLimitSubmissionsEnabled",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_WIDGET_VIDEO,b.a.CONTROL_TYPE_WIDGET_PDF,b.a.CONTROL_TYPE_WIDGET_FACEBOOK],"configuration.url",kd.a.ATTRIBUTE_URL),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_WIDGET_VIDEO,b.a.CONTROL_TYPE_WIDGET_PDF,b.a.CONTROL_TYPE_WIDGET_FACEBOOK],"configuration.fieldName",kd.a.ATTRIBUTE_FIELD_NAME),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_MAP],"synchronize.enabled",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_MAP],"synchronize.withControlId",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_MAP],"propagate.enabled",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_MAP],"propagate.onControlId",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup([b.a.CONTAINER_TYPE_REPEATABLE],"configuration.addButtonText",kd.a.ATTRIBUTE_ADD_BUTTON),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_FILE],"configuration.minSizeInKiloBytes",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_FILE],"configuration.maxSizeInKiloBytes",kd.a.ATTRIBUTE_VALIDATION),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_ADDRESS,"configuration.postalCodeLabel",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_MAP,"configuration.apiKey",kd.a.ATTRIBUTE_MAPS_API_KEY),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_FEE,"label.labelText",kd.a.ATTRIBUTE_FEE_DETAILS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_FEE,"instructions.text",kd.a.ATTRIBUTE_FEE_DETAILS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_FEE,"payments.virtualValue",kd.a.ATTRIBUTE_FEE_PRICE),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_FEE,"label.visibilityMode",kd.a.ATTRIBUTE_FEE_DETAILS),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],"configuration.prefix",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_DROPDOWN,"options.placeholderText",kd.a.ATTRIBUTE_CHOICES),kd.a.setPropertyGroup(null,"label.isBold",kd.a.ATTRIBUTE_QUICK_SETUP),kd.a.setPropertyGroup(null,"label.isItalic",kd.a.ATTRIBUTE_QUICK_SETUP),kd.a.setPropertyGroup(null,"label.labelText",kd.a.ATTRIBUTE_QUICK_SETUP),kd.a.setPropertyGroup(null,"instructions.text",kd.a.ATTRIBUTE_QUICK_SETUP),kd.a.setPropertyGroup(null,"options.quizOptions",kd.a.ATTRIBUTE_QUIZ),kd.a.setPropertyGroup(null,"label.visibilityMode",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(null,"instructions.showInstructionsOnClick",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_HEADING,"configuration.alignment",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup(b.a.CONTROL_TYPE_HEADING,"configuration.color",kd.a.ATTRIBUTE_OPTIONS),kd.a.setPropertyGroup([b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_CHECKBOX],"choices.useButtonLikeChoices",kd.a.ATTRIBUTE_LAYOUT)},YE=function(){kd.a.setPropertyOrder(b.a.CONTROL_TYPE_IMAGE,kd.a.ATTRIBUTE_IMAGE,"uploadToCustomizeImage","align",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_TEXT,kd.a.ATTRIBUTE_VALIDATION,"type","customValue",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_SOCIAL,kd.a.ATTRIBUTE_OPTIONS,"useCustomLink","customLink",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_CHECKBOX,kd.a.ATTRIBUTE_OPTIONS,"hasGroupedAnswers","groupedAnswersSeparatorType",O.D.AFTER),kd.a.setPropertyOrder(null,kd.a.ATTRIBUTE_INSTRUCTIONS,"text","showInstructionsOnClick",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_TEXT,kd.a.ATTRIBUTE_VALIDATION,"required","type",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_TEXT,kd.a.ATTRIBUTE_VALIDATION,"type","minLength",O.D.AFTER),kd.a.setPropertyOrder(null,kd.a.ATTRIBUTE_VALIDATION,"minLength","maxLength",O.D.AFTER),kd.a.setPropertyOrder(null,kd.a.ATTRIBUTE_VALIDATION,"minNumberOfWords","maxNumberOfWords",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_TEXT,kd.a.ATTRIBUTE_VALIDATION,"maxLength","noDuplicates",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_TEXTAREA,kd.a.ATTRIBUTE_VALIDATION,"minLength","required",O.D.BEFORE),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_RADIO,kd.a.ATTRIBUTE_OPTIONS,"clearable","hidden",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_DROPDOWN,kd.a.ATTRIBUTE_OPTIONS,"searchable","randomizeOrder",O.D.AFTER),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_DROPDOWN,b.a.CONTROL_TYPE_RADIO],kd.a.ATTRIBUTE_OPTIONS,"randomizeOrder","resetChoicesCountEveryDay",O.D.AFTER),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_DROPDOWN,b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_CHECKBOX],kd.a.ATTRIBUTE_OPTIONS,"showNumberOfChoicesLeft","hidden",O.D.AFTER),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_CHECKBOX],kd.a.ATTRIBUTE_CHOICES,"values","allowOther",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_CHECKBOX,kd.a.ATTRIBUTE_VALIDATION,"minNumberOfChoices","maxNumberOfChoices",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_CHECKBOX,kd.a.ATTRIBUTE_VALIDATION,"minNumberOfChoices","required",O.D.BEFORE),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_STAR_RATING,kd.a.ATTRIBUTE_OPTIONS,"defaultValue","starsCount",O.D.BEFORE),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_FILE,kd.a.ATTRIBUTE_VALIDATION,"required","multiple",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_FILE,kd.a.ATTRIBUTE_VALIDATION,"multiple","isAllowFolderUpload",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_FILE,kd.a.ATTRIBUTE_VALIDATION,"isAllowFolderUpload","allowExtensions",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_FILE,kd.a.ATTRIBUTE_VALIDATION,"allowExtensions","forbidExtensions",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_FILE,kd.a.ATTRIBUTE_VALIDATION,"forbidExtensions","minSizeInKiloBytes",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_FILE,kd.a.ATTRIBUTE_VALIDATION,"minSizeInKiloBytes","maxSizeInKiloBytes",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_NUMBER,kd.a.ATTRIBUTE_VALIDATION,"type","minValue",O.D.AFTER),kd.a.setPropertyOrder(null,kd.a.ATTRIBUTE_VALIDATION,"minValue","maxValue",O.D.AFTER),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],kd.a.ATTRIBUTE_VALIDATION,"maxValue","limitSubmissionsTotal",O.D.AFTER),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],kd.a.ATTRIBUTE_VALIDATION,"limitSubmissionsTotal","minLength",O.D.AFTER),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],kd.a.ATTRIBUTE_VALIDATION,"minLength","maxLength",O.D.AFTER),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],kd.a.ATTRIBUTE_VALIDATION,"maxLength","noDuplicates",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_EMAIL,kd.a.ATTRIBUTE_VALIDATION,"required","minLength",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_EMAIL,kd.a.ATTRIBUTE_VALIDATION,"minLength","maxLength",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_EMAIL,kd.a.ATTRIBUTE_VALIDATION,"maxLength","noDuplicates",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_NAME,kd.a.ATTRIBUTE_OPTIONS,"titleChoices","capitalize",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_NAME,kd.a.ATTRIBUTE_OPTIONS,"capitalize","hidden",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_NAME,kd.a.ATTRIBUTE_VALIDATION,"required","noDuplicates",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_ADDRESS,kd.a.ATTRIBUTE_OPTIONS,"hidden","zoneLabel",O.D.BEFORE),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_PHONE,kd.a.ATTRIBUTE_VALIDATION,"type","noDuplicates",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_DATE,kd.a.ATTRIBUTE_ACCEPTED_DATES,"minDateRelativeValue","maxDateRelativeValue",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_DATE,kd.a.ATTRIBUTE_ACCEPTED_DATES,"maxDateRelativeValue","acceptedDaysOfWeekString",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_DATE,kd.a.ATTRIBUTE_OPTIONS,"defaultValue","weekStart",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_DATE,kd.a.ATTRIBUTE_VALIDATION,"type","noDuplicates",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_PRICE,kd.a.ATTRIBUTE_VALIDATION,"required","intendedCurrencyISOCode",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_PRICE,kd.a.ATTRIBUTE_VALIDATION,"intendedCurrencyISOCode","hideDecimals",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_WEBSITE,kd.a.ATTRIBUTE_VALIDATION,"minLength","required",O.D.BEFORE),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_PASSWORD,kd.a.ATTRIBUTE_VALIDATION,"minLength","type",O.D.BEFORE),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_PASSWORD,kd.a.ATTRIBUTE_VALIDATION,"type","required",O.D.BEFORE),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_TERMS_OF_SERVICE,kd.a.ATTRIBUTE_AGREEMENT_TEXT,"linkBehaviour","agreementHTMLMarkup",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_TERMS_OF_SERVICE,kd.a.ATTRIBUTE_AGREEMENT_TEXT,"agreementHTMLMarkup","popupWidthInPixels",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_SOCIAL,kd.a.ATTRIBUTE_BUTTONS,"allowedPlatforms","alignment",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_SOCIAL,kd.a.ATTRIBUTE_FACEBOOK_SHARE,"facebookTitle","facebookDescription",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_ACTION_BAR,kd.a.ATTRIBUTE_SUBMIT_BUTTON,"submitButtonText","disableSubmitButtonAfterClick",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_ACTION_BAR,kd.a.ATTRIBUTE_SUBMIT_BUTTON,"disableSubmitButtonAfterClick","hasSubmitButtonIcon",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_ACTION_BAR,kd.a.ATTRIBUTE_SUBMIT_BUTTON,"submitButtonText","autoSubmitButtonText",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_TEXT,kd.a.ATTRIBUTE_VALIDATION,"type","customValue",O.D.AFTER),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_DROPDOWN,b.a.CONTROL_TYPE_RADIO],kd.a.ATTRIBUTE_OPTIONS,"randomizeOrder","isNumberOfTimesAnOptionCanBeChosen",O.D.AFTER),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_DROPDOWN,b.a.CONTROL_TYPE_RADIO],kd.a.ATTRIBUTE_OPTIONS,"isNumberOfTimesAnOptionCanBeChosen","configureValues",O.D.AFTER),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_PASSWORD,b.a.CONTROL_TYPE_WEBSITE,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_FORMULA],kd.a.ATTRIBUTE_VALIDATION,"withControlId","enabled",O.D.BEFORE),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_PASSWORD,b.a.CONTROL_TYPE_WEBSITE,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_FORMULA],kd.a.ATTRIBUTE_VALIDATION,"noDuplicates","enabled",O.D.AFTER),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_DROPDOWN,b.a.CONTROL_TYPE_RADIO,b.a.CONTAINER_TYPE_LIKERT_WRAPPER],kd.a.ATTRIBUTE_OPTIONS,"hidden","quizOptions",O.D.BEFORE),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],kd.a.ATTRIBUTE_VALIDATION,"limitSubmissionsTotal","currentSubmissionsValue",O.D.BEFORE),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],kd.a.ATTRIBUTE_VALIDATION,"currentSubmissionsValue","isLimitSubmissionsEnabled",O.D.BEFORE),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_STAR_RATING,b.a.CONTROL_TYPE_TERMS_OF_SERVICE,b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_DROPDOWN,b.a.CONTROL_TYPE_PRICE,b.a.CONTAINER_TYPE_LIKERT_WRAPPER],kd.a.ATTRIBUTE_PAYMENTS,"virtualValue","productsDialogTrigger",O.D.AFTER),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_MAP],kd.a.ATTRIBUTE_OPTIONS,"enabled","isInteractive",O.D.BEFORE),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_MAP],kd.a.ATTRIBUTE_OPTIONS,"enabled","withControlId",O.D.AFTER),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_WEBSITE],kd.a.ATTRIBUTE_OPTIONS,"suggestions","displaySuggestions",O.D.BEFORE),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_DROPDOWN],kd.a.ATTRIBUTE_CHOICES,"isWorkflowsUserDropdown","values",O.D.AFTER),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_DROPDOWN],kd.a.ATTRIBUTE_CHOICES,"values","isDropdownWithForms",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_ADDRESS,kd.a.ATTRIBUTE_OPTIONS,"hidden","postalCodeLabel",O.D.BEFORE),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_FEE,kd.a.ATTRIBUTE_FEE_DETAILS,"labelText","visibilityMode",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_TEXT,kd.a.ATTRIBUTE_OPTIONS,"suggestions","prefix",O.D.AFTER),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_NUMBER,kd.a.ATTRIBUTE_OPTIONS,"readOnly","prefix",O.D.AFTER),kd.a.setPropertyOrder([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],kd.a.ATTRIBUTE_OPTIONS,"prefix","displayPrefix",O.D.BEFORE),kd.a.setPropertyOrder(b.a.CONTROL_TYPE_DROPDOWN,kd.a.ATTRIBUTE_CHOICES,"placeholderText","displayPlaceholderText",O.D.BEFORE),kd.a.setPropertyOrder(null,kd.a.ATTRIBUTE_QUICK_SETUP,"required","text",O.D.BEFORE)},VE=function(){Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_DATE,"configuration.acceptedDaysOfWeekString","Accepted days:","edt_UI_property_configuration_acceptedDaysOfWeekString"),Od.a.addHardcodedPropertyName(null,"label.visibilityMode","Label placement","fieldProperty_labelPlacement"),Od.a.addHardcodedPropertyName(null,"instructions.showInstructionsOnClick","Show instructions on click","fieldProperty_showInstructions"),Od.a.addHardcodedPropertyName(null,"options.required","Required field:","edt_UI_property_options_required"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_EMAIL],"validation.type","Data format","fieldProperty_dataFormat"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],"configuration.minValue","Min value:","edt_UI_property_configuration_minValue"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_NUMBER,"configuration.defaultValue","Value","edt_UI_property_configuration_defaultValue_number"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_NUMBER,"configuration.limitSubmissionsTotal","Limit submissions total value:","edt_UI_property_configuration_limitSubmissionsTotal"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],"configuration.maxValue","Max value:","edt_UI_property_configuration_maxValue"),Od.a.addHardcodedPropertyName(null,"configuration.maxLength","Max no. of characters:","edt_UI_property_configuration_maxLength"),Od.a.addHardcodedPropertyName(null,"configuration.minLength","Min no. of characters:","edt_UI_property_configuration_minLength"),Od.a.addHardcodedPropertyName(null,"options.noDuplicates","Don't allow duplicate values:","edt_UI_property_options_noDuplicates"),Od.a.addHardcodedPropertyName(null,"options.hidden","Hide field:","edt_UI_property_options_hidden"),Od.a.addHardcodedPropertyName(null,"options.suggestions","Suggestions:","edt_UI_property_options_suggestions"),Od.a.addHardcodedPropertyName(null,"options.readOnly","Readonly field:","edt_UI_property_options_readonly"),Od.a.addHardcodedPropertyName(null,"configuration.maxNumberOfWords","Max no. of words:","edt_UI_property_configuration_maxNumberOfWords"),Od.a.addHardcodedPropertyName(null,"configuration.minNumberOfWords","Min no. of words:","edt_UI_property_configuration_minNumberOfWords"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_DROPDOWN,"options.searchable","Searchable:","edt_UI_property_options_searchable"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_DROPDOWN,b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_CHECKBOX],"options.randomizeOrder","Randomize choices:","edt_UI_property_options_randomizeOrder"),Od.a.addHardcodedPropertyName([b.a.CONTAINER_TYPE_LIKERT_WRAPPER],"options.randomizeOrder","Randomize statements:","edt_text_randomize_statements"),Od.a.addHardcodedPropertyName(null,"options.resetChoicesCountEveryDay","Reset every day:","edt_UI_property_options_resetChoicesCountEveryDay"),Od.a.addHardcodedPropertyName(null,"options.showNumberOfChoicesLeft","Show no. of choices left:","edt_UI_property_options_showNumberOfChoicesLeft"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_RADIO,"options.clearable","Clearable:","edt_UI_property_options_clearable"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_CHECKBOX],"layout.columns","No. of columns:","edt_UI_property_layout_columns"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_CHECKBOX],"layout.direction","Direction:","edt_UI_property_layout_direction"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_CHECKBOX],"layout.isSideBySide","Inline choices:","edt_UI_property_layout_isSideBySide"),Od.a.addHardcodedPropertyName(null,"choices.allowOther",'"Other" choice',"fieldProperty_otherChoice"),Od.a.addHardcodedPropertyName(null,"choices.maxNumberOfChoices","Max no. of choices:","edt_UI_property_choices_maxNumberOfChoices"),Od.a.addHardcodedPropertyName(null,"choices.minNumberOfChoices","Min no. of choices:","edt_UI_property_choices_minNumberOfChoices"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_CHECKBOX,"options.hasGroupedAnswers","Group answers:","edt_UI_property_options_hasGroupedAnswers"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_CHECKBOX,"options.groupedAnswersSeparatorType","Separator:","edt_UI_property_options_groupedAnswersSeparatorType"),Od.a.addHardcodedPropertyName(b.a.CONTAINER_TYPE_LIKERT_WRAPPER,"options.boldOptions","Bold scale values:","edt_UI_property_options_boldOptions"),Od.a.addHardcodedPropertyName(b.a.CONTAINER_TYPE_LIKERT_WRAPPER,"options.choiceTextAlignment","Scale values alignment:","edt_UI_property_options_choiceTextAlignment"),Od.a.addHardcodedPropertyName(b.a.CONTAINER_TYPE_LIKERT_WRAPPER,"options.inlineOptions","Inline scale values:","edt_UI_property_options_inlineOptions"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_STAR_RATING,"configuration.starsCount","No. of stars:","edt_UI_property_configuration_starsCount"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_STAR_RATING,"configuration.displayAs","Display as:","edt_UI_property_configuration_displayAs"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_STAR_RATING,"configuration.defaultValue","Default value:","edt_UI_property_configuration_defaultValue_star"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_FILE,"options.multiple","Allow multiple files:","edt_UI_property_options_multiple"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_FILE,"configuration.isAllowFolderUpload","Allow folder upload:","edt_UI_property_configuration_isAllowFolderUpload"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_FILE,"configuration.allowExtensions","File types accepted:","edt_UI_property_configuration_allowExtensions"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_FILE,"configuration.forbidExtensions","File types forbidden:","edt_UI_property_configuration_forbidExtensions"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_FILE,"configuration.maxSizeInBytes","Max file size:","edt_UI_property_configuration_maxSizeInBytes"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_FILE,"configuration.minSizeInBytes","Min file size:","edt_UI_property_configuration_minSizeInBytes"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_FILE,"configuration.minSizeInKiloBytes","Min file size (KB):","edt_UI_property_configuration_minSizeInKiloBytes"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_FILE,"configuration.maxSizeInKiloBytes","Max file size (KB):","edt_UI_property_configuration_maxSizeInKiloBytes"),Od.a.addHardcodedPropertyName(null,"options.capitalize","Capitalize first letter:","edt_UI_property_options_capitalize"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_NAME,"configuration.optionalFields","Additional subfields:","edt_UI_property_configuration_optionalFields"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_ADDRESS,"configuration.addressStyle","Address style:","edt_UI_property_configuration_addressStyle"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_ADDRESS,"configuration.allowedFields","Visible subfields:","edt_UI_property_configuration_allowedFields"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_ADDRESS,"configuration.countries","Avaliable countries:","edt_UI_property_configuration_countries"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_ADDRESS,"configuration.defaultCountry","Default country:","edt_UI_property_configuration_defaultCountry"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_ADDRESS,"configuration.zoneLabel","Region label:","edt_UI_property_configuration_zoneLabel"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_DATE,"configuration.defaultValue","Default date:","edt_UI_property_configuration_defaultValue_date"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_DATE,"configuration.maxDateRelativeValue","Until:","edt_UI_property_configuration_maxDateRelativeValue"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_DATE,"configuration.minDateRelativeValue","From:","edt_UI_property_configuration_minDateRelativeValue"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_DATE,"configuration.weekStart","Week starts on:","edt_UI_property_configuration_weekStart"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_DATE,"validation.type","Date format:","edt_UI_property_validation_type_date"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_PHONE,"validation.type","Number format","edt_UI_property_validation_type_number"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_TIME,"configuration.defaultValue","Default time:","edt_UI_property_configuration_defaultValue_time"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_TIME,"configuration.timeFormat","Time format:","edt_UI_property_configuration_timeFormat"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_PRICE,"options.hideDecimals","Hide decimals:","edt_UI_property_options_hideDecimals"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_PRICE,"options.intendedCurrencyISOCode","Currency:","edt_UI_property_options_intendedCurrencyISOCode"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_PASSWORD,"validation.type","Password complexity:","edt_UI_property_validation_type_password"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_SIGNATURE,"validation.type","Signature complexity:","edt_UI_property_validation_type_signature"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_TERMS_OF_SERVICE,"configuration.linkBehaviour","Link behaviour:","edt_UI_property_configuration_linkBehaviour"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_TERMS_OF_SERVICE,"configuration.popupHeightInPixels","Popup height:","edt_UI_property_configuration_popupHeightInPixels"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_TERMS_OF_SERVICE,"configuration.popupWidthInPixels","Popup width:","edt_UI_property_configuration_popupWidthInPixels"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_TERMS_OF_SERVICE,"configuration.defaultValue","Checked by default:","edt_UI_property_configuration_defaultValue_TOS"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_HEADING,"configuration.fontSize","Font size:","edt_UI_property_configuration_fontSize"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_IMAGE,"configuration.align","Alignment","edt_UI_property_configuration_align"),Od.a.addHardcodedPropertyName(b.a.CONTAINER_TYPE_PAGE,"options.showPageTitles","Show page titles:","edt_UI_property_options_showPageTitles"),Od.a.addHardcodedPropertyName(b.a.CONTAINER_TYPE_PAGE,"options.paginationType","Display as:","edt_UI_property_options_paginationType"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_SOCIAL,"options.showCount","Show count:","edt_UI_property_options_showCount"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_SOCIAL,"configuration.useCustomLink","Use custom link:","edt_UI_property_configuration_useCustomLink"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_SOCIAL,"configuration.allowedPlatforms","Display:","edt_UI_property_configuration_allowedPlatforms"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_SOCIAL,"configuration.alignment","Alignment:","edt_UI_property_configuration_alignment"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_MAP,"configuration.initialZoom","Zoom level:","edt_UI_property_configuration_initialZoom"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_MAP,"configuration.apiKey","Google Maps API Key:","edt_UI_property_configuration_mapsApiKey"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_MAP,"configuration.isInteractive","Interactive:","edt_UI_property_configuration_isInteractive"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_CAPTCHA,"configuration.type","Type:","edt_UI_property_configuration_type"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_ACTION_BAR,"configuration.disableSubmitButtonAfterClick","Disable after click:","edt_UI_property_configuration_disableSubmitButtonAfterClick"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_ACTION_BAR,"configuration.hasSubmitButtonIcon","Show icon:","edt_UI_property_configuration_hasSubmitButtonIcon"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_ACTION_BAR,"configuration.buttonsPosition","Alignment:","edt_UI_property_configuration_buttonsPosition"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_ACTION_BAR,"configuration.configurableButtons","Additional buttons:","edt_UI_property_configuration_configurableButtons"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_PASSWORD,b.a.CONTROL_TYPE_WEBSITE,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_FORMULA],"synchronize.enabled","Match another field value:","edt_UI_property_synchronize_enabled"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_PASSWORD,b.a.CONTROL_TYPE_WEBSITE,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_FORMULA],"synchronize.withControlId","Match with:","edt_UI_property_synchronize_withControlId"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_DROPDOWN,b.a.CONTROL_TYPE_RADIO],"options.isNumberOfTimesAnOptionCanBeChosen","Limit choices","edt_UI_property_options_isNumberOfTimesAnOptionCanBeChosen"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_TEXTAREA,"size.heightInRows","Input height in rows:","edt_UI_property_size_heightInRows"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],"configuration.isLimitSubmissionsEnabled","Limit submissions total value:","edt_UI_property_configuration_isLimitSubmissionsEnabled"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],"configuration.currentSubmissionsValue","Current total value:","edt_UI_property_configuration_currentSubmissionsValue"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],"configuration.limitSubmissionsTotal","Max total value:","edt_UI_property_number_configuration_limitSubmissionsTotal"),Od.a.addHardcodedPropertyName(null,"options.hipaaField","HIPAA protected field","ajax_editFieldHipaa"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_STAR_RATING,b.a.CONTROL_TYPE_TERMS_OF_SERVICE,b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_CHECKBOX,b.a.CONTROL_TYPE_DROPDOWN,b.a.CONTROL_TYPE_PRICE],"payments.virtualValue","Price","fieldProperty_price"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_MAP],"propagate.enabled","Send coordinates to a field:","edt_UI_property_propagate_checkbox"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_MAP],"propagate.onControlId","To field:","edt_UI_property_propagate_to_field"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_MAP],"synchronize.enabled","Match with address field:","edt_UI_property_synchronize_checkbox"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_MAP],"synchronize.withControlId","Field:","edt_UI_property_synchronize_with_field"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_EMAIL,b.a.CONTROL_TYPE_WEBSITE],"options.displaySuggestions","Display suggestions:","edt_display_suggestions_text"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_TEXT],"configuration.defaultValueIsUniqueId","Unique ID"),Od.a.addHardcodedPropertyName(b.a.CONTAINER_TYPE_REPEATABLE,"configuration.maxNumberOfGroupsAllowed","Max no. of rows allowed","edt_UI_property_max_number_of_rows_allowed"),Od.a.addHardcodedPropertyName(b.a.CONTAINER_TYPE_REPEATABLE,"configuration.showBorders","Show borders","edt_UI_property_show_borders"),Od.a.addHardcodedPropertyName(b.a.CONTAINER_TYPE_REPEATABLE,"configuration.addButtonText","Add button text","edt_UI_property_add_button_text"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_DROPDOWN,"choices.isWorkflowsUserDropdown","Show users list","edt_workflows_users_list"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_ADDRESS,"configuration.postalCodeLabel","Postal/Zip label:","edt_UI_property_configuration_postalCodeLabel"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_DROPDOWN,"choices.isDropdownWithForms","Search within selected forms","hilti_importFormFieldCheckboxTitle"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_FEE,"payments.value","Price","XYZ"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],"options.displayPrefix","Add prefix inside the field:","edt_UI_property_add_prefix"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_TEXT,b.a.CONTROL_TYPE_NUMBER,b.a.CONTROL_TYPE_FORMULA],"configuration.prefix","Prefix:","edt_UI_property_prefix"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_DROPDOWN,"choices.displayPlaceholderText","Add placeholder text:","edt_UI_add_placeholder_text"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_CAPTCHA,"verification.displayCaptcha","Use Captcha for verification","captcha_displayCaptcha"),Od.a.addHardcodedPropertyName(null,"label.labelText","Label","propertyLabel_label"),Od.a.addHardcodedPropertyName(null,"instructions.text","Instructions","propertyLabel_instructions"),Od.a.addHardcodedPropertyName(null,"configuration.defaultValue","Prefilled value","fieldProperty_prefilledValue"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_WIDGET_VIDEO,"configuration.url","Video link","fieldProperty_videoLink"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_WIDGET_PDF,"configuration.url","PDF file link","fieldProperty_pdfLink"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_ADDRESS,"options.requiredFields","Required fields:","fieldProperty_requiredFields"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_HEADING,"configuration.alignment","Alignment","edt_UI_property_configuration_align"),Od.a.addHardcodedPropertyName(b.a.CONTROL_TYPE_HEADING,"configuration.color","Color","edt_UI_property_configuration_color"),Od.a.addHardcodedPropertyName([b.a.CONTROL_TYPE_RADIO,b.a.CONTROL_TYPE_CHECKBOX],"choices.useButtonLikeChoices","Button-like choices:","fieldProperty_buttonChoices")},HE=function(){Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_ACCEPTED_DATES,"Accepted dates","edt_UI_attribute_accepted_dates"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_LAYOUT_SIZE,"Layout size","edt_UI_attribute_layout_size"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_DEFAULT_VALUE,"Prefill","fieldCategory_prefilledValue"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_AGREEMENT_TEXT,"Agreement text","edt_UI_attribute_agreement_text"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_HTML_CONTENT,"HTML Content","edt_UI_attribute_html_content"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_PAGE_TITLE,"Page title","edt_UI_attribute_page_title"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_FACEBOOK_SHARE,"Facebook share","edt_UI_attribute_facebook_share"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_DEFAULT_MAP,"Default map","edt_UI_attribute_default_map"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_SUBMIT_BUTTON,"Submit button","edt_UI_attribute_submit_button"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_RESET_BUTTON,"Reset button","edt_UI_attribute_reset_button"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_FIELD_NAME,"Field name","edt_UI_attribute_field_name"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_ALT_TEXT,"Alt text","edt_UI_attribute_alt_text"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_PAYMENTS,"Payments and calculations","fieldCategory_paymentsCalculations"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_COUPONS,"Coupon codes","edt_UI_attribute_coupons"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_CALCULATIONS,"Formula","edt_UI_attribute_calculations"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_ADD_BUTTON,"Button text","fieldCategory_buttonText"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_MAPS_API_KEY,"Google Maps API Key","edt_UI_attribute_maps_api_key"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_FEE_DETAILS,"Fee details","XYZ"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_FEE_PRICE,"Price","XYZ"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_QUICK_SETUP,"Quick setup","fieldCategory_quickSetup"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_QUIZ,"Quiz","fieldCategory_quiz"),Od.a.addHardcodedAttributeName(kd.a.ATTRIBUTE_CHOICES,"Edit choices","fieldCategory_editChoices")},GE=(n(596),function(){function e(){o()(this,e)}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(e,t,n){e(t).find('input[type="hidden"][data-plugin="color-picker"]').each((function(t,n){var i=document.createElement("div");i.className="colorPicker__container";var r=L.a.createElement(L.a.ELEMENT_TYPE_COLOR);r.setValue(n.value),r.setChangeCallback((function(){var t=r.getValue();n.value=t,e(n).trigger("input")})),i.appendChild(r.getRootNode()),n.parentElement.appendChild(i)}))}}]),e}());v()(GE,"NAME","ColorPickerInspectorPlugin");var WE=function(){St.addPlugin(new Vt),St.addPlugin(new zt),St.addPlugin(new Wt),St.addPlugin(new wt),St.addPlugin(new Lt),St.addPlugin(new Mt.a),St.addPlugin(new Dt),St.addPlugin(new Bt),St.addPlugin(new en),St.addPlugin(new Kt),St.addPlugin(new jt),St.addPlugin(new hn),St.addPlugin(new Ut),St.addPlugin(new _n),St.addPlugin(new ln),St.addPlugin(new xt),St.addPlugin(new Gt),St.addPlugin(new rn),St.addPlugin(new mn),St.addPlugin(new fn),St.addPlugin(new sn),St.addPlugin(new an),St.addPlugin(new gn),St.addPlugin(new En),St.addPlugin(new Ht),St.addPlugin(new qt),St.addPlugin(new pn),St.addPlugin(new Yt),St.addPlugin(new tn),St.addPlugin(new cn),St.addPlugin(new GE)},jE=function(){Object.defineProperty(window,"EDITOR_V2",{get:function(){return!0},set:function(e){},enumerable:!1,configurable:!1})},KE=function(){ME(),xE(),UE(),FE(),BE(),YE(),VE(),HE(),WE(),jE()};window.TextControl=pe,window.SynchronizableFormControl=f,window.FormControl=i.a,window.FormElement=r.a,window.ActionBarControl=I,window.AddressControl=k,window.CaptchaControl=Y,window.CheckBoxControl=W,window.DateControl=q,window.DropDownControl=Q,window.ElementNotSupported=ue,window.EmailControl=_e,window.FileControl=te,window.CouponControl=X,window.FeeControl=fe,window.FormHeaderControl=ye,window.FormulaControl=oe,window.HeadingControl=Ce,window.HTMLBlockControl=le,window.ImageControl=Re,window.LikertScaleControl=Ae,window.MapControl=Se.a,window.NameControl=we,window.NumberControl=Me,window.PageBreakControl=Ue,window.PasswordControl=Be,window.PhoneControl=Ve,window.PriceControl=We,window.RadioControl=ze,window.SeparatorControl=Ze,window.SignatureControl=Qe,window.SocialControl=et,window.StarRatingControl=nt,window.TermsOfServiceControl=at,window.TextAreaControl=st,window.TimeControl=ut,window.WebsiteControl=pt,window.WidgetFacebookControl=mt,window.WidgetPDFControl=yt,window.WidgetVideoControl=vt,window.ElementVirtualProperty=Ot.a,window.EditorUserInterface=St,window.AcceptedDaysOfWeekInspectorPlugin=Lt,window.CaptchaConfigurationInspectorPlugin=Dt,window.CheckBoxAndRadioInputInspectorPlugin=wt,window.ChoicesEditorInspectorPlugin=Mt.a,window.CouponCodesInspectorPlugin=xt,window.DateEditorInspectorPlugin=Ut,window.DiscountAndTaxOnTotalInspectorPlugin=Yt,window.DropDownInspectorPlugin=Vt,window.DropdownsEditFormsListInspectorPlugin=Ht,window.FormulaInspectorPlugin=Gt,window.HTMLEditorInspectorPlugin=Wt,window.ImageUploaderInspectorPlugin=jt,window.InputTypeNumberInspectorPlugin=Kt,window.InputTypeSizeInPixelsInspectorPlugin=zt,window.LikertQuizOptionsInspectorPlugin=qt,window.LikertStatementsEditorInspectorPlugin=en,window.ListEditorPlugin=tn,window.MarkdownEditorInspectorPlugin=rn,window.PaymentProcessorsAssocsInspectorPlugin=an,window.PaymentProcessorsInspectorPlugin=sn,window.PaymentsProductsPlugin=ln,window.PaymentsStringReadOnlyPlugin=cn,window.PriceEditorInspectorPlugin=pn,window.PropagatedDOMAttributes=hn,window.RangedPropertiesDeferredSliderAppearance=_n,window.SagepayCustomerEmailInspectorPlugin=gn,window.SortablePlugin=$t.a,window.SquareStoreLocationInspectorPlugin=mn,window.SquareStoreLocationsPopupInspectorPlugin=fn,window.TextAppearanceDropDownInspectorPlugin=Bt,window.WorkflowEditUsersListInspectorPlugin=En,window.SaveActivity=yn.a,window.PaymentsAttributeHelper=Tn,window.DivContainer=bn,window.LikertContainer=In,window.PageContainer=Rn.a,window.PaymentSummaryPageContainer=Nn,window.RowContainer=Sn,window.RepeatableContainer=Dn,window.RepeatableGroup=kn,window.ReactiveButton=xn.a,window.VirtualSelect=un.a,window.BlankDataset=Pt,window.GenericI18nDataset=It.a,window.DegreesOfAgreementDataset=Un.a,window.DegreesOfImportanceDataset=Fn.a,window.DegreesOfProbabilityDataset=Bn.a,window.DegreesOfSatisfactionDataset=Yn.a,window.DegreesOfQualityDataset=Vn.a,window.DaysOfWeekDataset=Hn.a,window.MonthsOfTheYearDataset=Gn.a,window.DatasetProvider=Ct.a,window.EDatasetProviderType=Ct.b,window.EditorSetting=Wn.a,window.EditorSettingGroups=on.a,window.EditorSettingTypes=K.a,window.CouponCodesEditorSetting=jn.a,window.ProductsEditorSetting=Kn.a,window.SummaryEditorSetting=zn.a,window.AuthorizeEditorSetting=Xn.a,window.BraintreeEditorSetting=Zn.a,window.CivicaEditorSetting=qn.a,window.FreshbooksEditorSetting=Jn.a,window.PayfastEditorSetting=Qn.a,window.PaypalCheckoutEditorSetting=$n.a,window.PaypalEditorSetting=ei.a,window.PaypalPayflowEditorSetting=ti.a,window.PaypalProEditorSetting=ni.a,window.PayUEditorSetting=ii.a,window.SagepayEditorSetting=ri.a,window.SisowEditorSetting=ai.a,window.SquareEditorSetting=oi.a,window.StripeCheckoutEditorSetting=si.a,window.StripeEditorSetting=li.a,window.WorldpayEditorSetting=ci.a,window.ViewManager=sc,window.UIElement=lc.a,window.UITagsContainer=cc.a,window.EditorPanelConfig=oc,window.EditorPanelGroup=dc,window.MetricsService=Ci.a,window.ControlPropertyTranslator=Gc.a,window.I18n=Kc,window.LegacyDataTranslator=zc,window.AbstractionLayerV2=Jc,window.CalculationsDatabaseBindingProvider=Qc,window.JQLDatabaseFunctionsV2=$c,window.LanguageBindingProvider=eu,window.QuizScoreBindingProvider=tu,window.RequestQueryStringParameterBindingProvider=nu,window.RulesQueryBuilder=iu,window.FormV2Table=au,window.JQLWorkerVirtualRow=du,window.JQLWorkerVirtualTable=gu,window.JQLWorkerBase=cu,window.JQLWorkerConnector=su,window.JQLWorkerDatabase=vu,window.JQLWorkerStatement=fu,window.JQLWorkerStatementResult=yu,window.JQLWorkerTable=hu,window.PlatformMetricsManager=gr,window.BigCommerceHTMLOverlayComponent=Fs,window.BloggerHTMLOverlayComponent=Ys,window.DomainAliasCheckboxComponent=js,window.DomainAliasDropdownComponent=zs,window.EmbedHTMLOverlayComponent=xs,window.FacebookHTMLOverlayComponent=Zs,window.GoogleSitesHTMLOverlayComponent=Js,window.IFrameHTMLOverlayComponent=$s,window.JavaScriptHTMLOverlayComponent=tl,window.JoomlaHTMLOverlayComponent=il,window.LightboxHTMLOverlayComponent=al,window.LinkHTMLOverlayComponent=sl,window.LinkToFormHTMLOverlayComponent=cl,window.PlatformSpecificJavaScriptOverlayComponent=dl,window.PlatformSpecificLightboxOverlayComponent=hl,window.PlatformSpecificLinkToFormOverlayComponent=gl,window.SalesforceCommunityHTMLOverlayComponent=fl,window.SalesforceHTMLOverlayComponent=vl,window.ShopifyHTMLOverlayComponent=bl,window.SSLCheckboxComponent=bu,window.TwitterHTMLOverlayComponent=yl,window.UnbounceHTMLOverlayComponent=Il,window.WordpressHTMLOverlayComponent=Pl,window.CSVTranslationsReader=Cu.a,window.FormLanguage=Iu.a,window.FormTranslationsService=Pu,window.TranslationsEditor=Nu.a,window.TranslationsService=Au.a,window.ButtonUndoServiceInteractionProvider=Su,window.HeaderUndoServiceInteractionProvider=Lu,window.UndoService=wu,window.UnserializerBag=ku,window.UnserializerV0_4=Fu,window.UnserializerV0_5=Mu,window.UnserializerV0_6=xu,window.UploadFile=Yu,window.TinyMceUploadImage=bo.a,window.UploadsService=Hu,window.UserFileExtensionsService=Gu.a,window.EditorOAuthFlow=hc,window.PaymentProcessorsConfiguration=gc,window.PaymentProcessorConfigurationModel=_c,window.PaymentsProductsDialog=ge.a,window.PaymentsSummaryHelper=mc.a,window.NullPaymentProcessorPlugin=Ec,window.PaymentProcessorsPluginFactory=fc,window.SisowPaymentProcessorPlugin=yc,window.QuizScoreService=vc,window.CustomControlRenderer=Oc.a,window.LabelPlacementLeftInstructionsBelowFieldCompactFieldRenderer=bc.a,window.LabelPlacementLeftInstructionsBelowFieldNoCompactFieldRenderer=Cc.a,window.LabelPlacementLeftInstructionsBelowLabelCompactFieldRenderer=Ic.a,window.LabelPlacementLeftInstructionsBelowLabelNoCompactFieldRenderer=Rc.a,window.LabelPlacementRightInstructionsBelowFieldCompactFieldRenderer=Pc.a,window.LabelPlacementRightInstructionsBelowFieldNoCompactFieldRenderer=Nc.a,window.LabelPlacementRightInstructionsBelowLabelCompactFieldRenderer=Ac.a,window.LabelPlacementRightInstructionsBelowLabelNoCompactFieldRenderer=Sc.a,window.LabelPlacementTopInstructionsBelowFieldCompactFieldRenderer=Lc.a,window.LabelPlacementTopInstructionsBelowFieldNoCompactFieldRenderer=Dc.a,window.LabelPlacementTopInstructionsBelowLabelCompactFieldRenderer=wc.a,window.LabelPlacementTopInstructionsBelowLabelNoCompactFieldRenderer=kc.a,window.Renderer=Pe.a,window.ExternalThemeManagedByWix=xc,window.InternalTheme=Yc,window.WixThemeWithExternalStorage=Hc,window.UI=L.a,window.InspectorDropdownComponent=Wu,window.UISearchableDropDown=ju.a,window.UIDropDown=Ku.a,window.UIDropDownOption=D.a,window.UIColorPicker=zu.a,window.UIDate=Xu.a,window.UIDateGroup=Zu.a,window.UITime=qu.a,window.UIFile=Ju.a,window.UITagsListContainer=Qu.a,window.UISingleTagsListContainer=$u.a,window.UITag=ed.a,window.TextMeasurement=td,window.AutoIncrement=nd,window.TagsReadonlyKeyword=id,window.TagsEditableKeyword=rd,window.UITagsComponent=ad,window.UIFileUpload=od.a,window.UIFileDownload=sd.a,window.UIStarRating=ld.a,window.UIMenuPopup=rs.a,window.GlobalPageLoader=cd,window.DropdownButtonComponent=ao,window.UITextareaTagsComponent=ud,window.AbstractMenuPanelChild=ar,window.AbstractMenuPanelChildThatSupportsChildren=dr,window.MenuPanelComponent=lo,window.MenuPanelHeaderComponent=br,window.MenuPanelItemComponent=_s,window.MenuPanelDividerComponent=Al,window.MenuPanelHeadingComponent=Ir,window.MenuPanelCheckboxComponent=us,window.MenuPanelExtensionComponent=Er,window.MenuPanelScrollableComponent=Lr,window.MenuPanelDropdownComponent=Hs,window.MenuPanelContainerComponent=_r,window.MenuPanelOverlaySidebarComponent=uo,window.MenuPanelButtonComponent=cr,window.MouseUtils=qe.a,window.MouseManager=Ed,window.MousePluginIdleState=gd,window.MousePluginElementResize=dd,window.MousePluginLabelResize=md,window.MousePluginDragAndDrop=hd,window.MousePluginAreaSelect=_d,window.FormUtils=S.a,window.ColorUtils=yd.a,window.NameUtils=Le,window.Caret=Co.a,window.I18nUtils=Wc,window.Errors=g.a,window.ElementTypes=b.a,window.PersistentStorage=vd,window.FormUnserializer=Uu,window.ElementHardcodedPropertyLabel=Od.a,window.InspectorHiddenProperties=bd.a,window.ElementConfigurationModel=Id,window.WidgetFormControl=_t,window.FormContainer=vn.a,window.Form=Sd,window.FormSelection=Dd,window.RenderersFactory=je.a,window.GlobalEventHandler=wd,window.ElementPropertyOrder=kd.a,window.ThemePropertyDecorator=Md.a,window.CSSEvalExpression=xd.a,window.CSSExpressionParser=xd.b,window.VirtualSelectionControl=Nd,window.FontsManager=Fd,window.EngineToggles=lt.a,window.FocusManager=Yd,window.Theme=Vd.a,window.parse=ft.o,window.stringify=ft.s,window.parseQueryString=ft.p,window.getCurrentPageIdentifier=ft.i,window.removeProtocolFromUrl=ft.q,window.setRawUrl=ft.r,window.getAnchorFromUrl=ft.g,window.computeWixRedirectUrl=ft.e,window.computePackageUpgradeUrl=ft.c,window.computeBundlePurchaseUrl=ft.a,window.createSubmissionsRibbonRedirectUrl=ft.f,window.getCurrentPageString=ft.j,window.getWixInstanceId=ft.l,window.getWixDirectUpgradeUrl=ft.k,window.openWixDirectUpgrade=ft.n,window.MD5=Hd.a,window.hexEncode=Hd.c,window.Utf8Encode=Hd.b,window.Debounce=Gd.a,window.Throttle=ie.a,window.EventEmitter=ir.a,window.UUID=Wd.a,window.Cookie=jd.a,window.FileUtils=Kd.a,window.GenericUserInterface=zd.a,window.I18nService=F.a,window.GeolocationService=Xd,window.PhoneUtils=Zd,window.ElementPosition=qd.a,window.CurrencyService=He,window.DataValidator=j.a,window.BrowserDetector=x.a,window.MimeTypeService=Jd,window.TimeUtils=Qd.a,window.Activity=$d.a,window.Tooltip=ep.a,window.Salvage=Nt.a,window.SelectionFB=Mo,window.SelectionFBUtils=ko,window.Runtime=Ip,window.StringParser=tp,window.Validator=Cp,window.Type=ap,window.SanitizeHTML=M.a,window.Api=Hr.a,window.FullFeaturedFactory=Rp,window.ResourceManager=Pp.a,window.EditorValueRendererFactory=Np.a,window.Engine=Sp,window.EditorCommandDispatcher=Lp.a,window.ViewFormCommandDispatcher=Dp,window.EditorLoader=PE,window.ViewFormLoader=kE,KE()}]);